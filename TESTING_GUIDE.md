# 测试指南

## 修复的问题

我已经修复了连接和删除按钮无效的问题。主要改动：

1. **简化事件处理**: 移除了不必要的 `event.stopPropagation()`
2. **添加调试日志**: 在关键函数中添加了 console.log
3. **改进CSS**: 确保按钮有正确的 z-index 和 pointer-events
4. **验证绑定**: 确认所有后端方法都已正确绑定到前端

## 如何测试

### 启动应用

```bash
# 在项目根目录
$HOME/go/bin/wails dev
```

### 测试清单

#### ✅ 1. 新建连接
- [ ] 点击 "**+ 新建连接**" 按钮 - 表单应该显示
- [ ] 填写所有必填字段（名称、主机、用户名）
- [ ] 输入密码（可选）
- [ ] 点击 "**测试连接**" - 应该弹出成功或失败消息
- [ ] 点击 "**保存**" - 连接应该出现在列表中
- [ ] 点击 "**取消**" - 表单应该关闭

#### ✅ 2. 编辑连接
- [ ] 在连接列表中点击 "**编辑**" 按钮
- [ ] 表单应该预填充现有数据
- [ ] 修改任意字段
- [ ] 点击 "**保存**" - 更改应该生效
- [ ] 再次点击 "**编辑**" 验证更改已保存

#### ✅ 3. 删除连接
- [ ] 在连接列表中点击 "**删除**" 按钮
- [ ] 应该弹出确认对话框
- [ ] 点击 "**确定**" - 连接应该从列表中移除
- [ ] 点击 "**取消**" - 连接应该保留

#### ✅ 4. 连接到SSH
- [ ] 点击 "**连接**" 按钮
- [ ] 应该弹出密码输入对话框
- [ ] 输入正确的密码
- [ ] 终端应该显示连接信息
- [ ] 可以输入命令并看到输出

## 调试技巧

### 查看控制台日志

如果按钮仍然无效，请：

1. 在应用中按 `F12` 或 `Cmd+Option+I` (Mac) 打开开发者工具
2. 切换到 "**Console**" 标签
3. 点击有问题的按钮
4. 查看是否有错误消息或日志输出

你应该看到类似这样的日志：
```
handleConnect called: {id: "conn_1234", name: "测试服务器", ...}
```

### 常见问题

#### 按钮点击无响应
- **检查**: 控制台是否有 JavaScript 错误
- **解决**: 刷新页面 (Cmd+R 或 Ctrl+R)

#### "onConnect callback not provided" 错误
- **原因**: 父组件没有传递 onConnect 回调
- **解决**: 这是预期行为，检查 App.svelte

#### 连接失败
- **检查**: 主机地址、端口、用户名是否正确
- **检查**: SSH服务是否运行
- **检查**: 防火墙是否允许连接

#### 删除后连接仍在
- **检查**: 刷新页面看连接是否真的被删除
- **检查**: ~/.sshtools/config.json 文件内容

## 预期行为

### 新建连接按钮
- 点击后表单展开
- 再次点击表单收起（显示"取消"）

### 连接按钮
1. 点击按钮
2. 弹出密码输入框
3. 输入密码并确认
4. 终端区域显示连接过程
5. 连接成功后可以输入命令

### 编辑按钮
1. 点击按钮
2. 表单展开并预填充数据
3. 标题显示 "编辑连接"
4. 可以修改任何字段
5. 保存后更新列表

### 删除按钮
1. 点击按钮
2. 弹出确认对话框
3. 确认后从列表中移除
4. 配置文件同步更新

## 报告问题

如果发现问题，请提供：
1. 控制台日志截图
2. 具体操作步骤
3. 预期行为 vs 实际行为
4. 系统信息（macOS/Windows/Linux版本）

## 下一步

所有基础功能测试通过后，可以考虑添加：
- 多标签页支持
- SSH密钥认证
- SFTP文件传输
- 会话恢复功能
