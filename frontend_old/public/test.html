<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>按钮测试</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1e1e1e;
            color: white;
            font-family: sans-serif;
        }

        button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        .test1 {
            background: red;
            color: white;
            pointer-events: auto !important;
            -webkit-app-region: no-drag !important;
            position: relative;
            z-index: 9999;
        }

        .test2 {
            background: green;
            color: white;
            pointer-events: auto !important;
            -webkit-app-region: no-drag !important;
            position: relative;
            z-index: 9999;
        }

        .test3 {
            background: blue;
            color: white;
            pointer-events: auto !important;
            -webkit-app-region: no-drag !important;
            position: relative;
            z-index: 9999;
        }

        .container {
            pointer-events: auto !important;
            -webkit-app-region: no-drag !important;
        }

        #log {
            margin-top: 20px;
            padding: 10px;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 5px;
            max-height: 400px;
            overflow-y: auto;
        }

        .log-item {
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>纯 HTML 按钮测试</h1>
        <p>如果这些按钮都无法点击，说明问题在 Wails 配置或系统级别</p>

        <div>
            <button class="test1" onclick="test1()">
                测试1: onclick 内联
            </button>

            <button class="test2" id="test2">
                测试2: addEventListener
            </button>

            <button class="test3" id="test3">
                测试3: 通过 window 函数
            </button>
        </div>

        <div id="log">
            <div class="log-item">等待点击...</div>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const item = document.createElement('div');
            item.className = 'log-item';
            item.textContent = new Date().toLocaleTimeString() + ': ' + message;
            logDiv.insertBefore(item, logDiv.firstChild);
        }

        // 测试1: 内联 onclick
        function test1() {
            alert('✅ 测试1成功: onclick 内联事件有效！');
            log('✅ 测试1成功: onclick 内联');
        }

        // 测试2: addEventListener
        document.getElementById('test2').addEventListener('click', function() {
            alert('✅ 测试2成功: addEventListener 有效！');
            log('✅ 测试2成功: addEventListener');
        });

        // 测试3: 通过 window 函数
        window.test3Click = function() {
            alert('✅ 测试3成功: window函数有效！');
            log('✅ 测试3成功: window函数');
        };
        document.getElementById('test3').onclick = window.test3Click;

        // 页面加载完成
        log('页面加载完成');
        log('如果可以看到这条消息，说明 JavaScript 正常运行');

        // 全局点击监听
        document.addEventListener('click', function(e) {
            log('检测到点击事件: ' + e.target.tagName + ' ' + e.target.className);
        });

        // 鼠标移动监听
        let lastMove = 0;
        document.addEventListener('mousemove', function(e) {
            const now = Date.now();
            if (now - lastMove > 1000) {
                log('鼠标移动: x=' + e.clientX + ', y=' + e.clientY);
                lastMove = now;
            }
        });
    </script>
</body>
</html>
