var fr=Object.defineProperty;var _r=(m,f,b)=>f in m?fr(m,f,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[f]=b;var bt=(m,f,b)=>_r(m,typeof f!="symbol"?f+"":f,b);(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))k(x);new MutationObserver(x=>{for(const O of x)if(O.type==="childList")for(const w of O.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&k(w)}).observe(document,{childList:!0,subtree:!0});function b(x){const O={};return x.integrity&&(O.integrity=x.integrity),x.referrerPolicy&&(O.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?O.credentials="include":x.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function k(x){if(x.ep)return;x.ep=!0;const O=b(x);fetch(x.href,O)}})();const pr="modulepreload",gr=function(m){return"/"+m},Bt={},vr=function(f,b,k){let x=Promise.resolve();if(b&&b.length>0){document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),i=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));x=Promise.allSettled(b.map(o=>{if(o=gr(o),o in Bt)return;Bt[o]=!0;const a=o.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const n=document.createElement("link");if(n.rel=a?"stylesheet":pr,a||(n.as="script"),n.crossOrigin="",n.href=o,i&&n.setAttribute("nonce",i),document.head.appendChild(n),a)return new Promise((l,u)=>{n.addEventListener("load",l),n.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})}))}function O(w){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=w,window.dispatchEvent(i),!i.defaultPrevented)throw w}return x.then(w=>{for(const i of w||[])i.status==="rejected"&&O(i.reason);return f().catch(O)})};function he(){}function mr(m,f){for(const b in f)m[b]=f[b];return m}function ir(m){return m()}function At(){return Object.create(null)}function ke(m){m.forEach(ir)}function rt(m){return typeof m=="function"}function Pe(m,f){return m!=m?f==f:m!==f||m&&typeof m=="object"||typeof m=="function"}function br(m){return Object.keys(m).length===0}function sr(m,...f){if(m==null){for(const k of f)k(void 0);return he}const b=m.subscribe(...f);return b.unsubscribe?()=>b.unsubscribe():b}function et(m,f,b){m.$$.on_destroy.push(sr(f,b))}function Sr(m,f,b,k){if(m){const x=nr(m,f,b,k);return m[0](x)}}function nr(m,f,b,k){return m[1]&&k?mr(b.ctx.slice(),m[1](k(f))):b.ctx}function yr(m,f,b,k){return m[2],f.dirty}function wr(m,f,b,k,x,O){if(x){const w=nr(f,b,k,O);m.p(w,x)}}function Cr(m){if(m.ctx.length>32){const f=[],b=m.ctx.length/32;for(let k=0;k<b;k++)f[k]=-1;return f}return-1}function Mt(m){return m??""}const kr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function L(m,f){m.appendChild(f)}function ne(m,f,b){m.insertBefore(f,b||null)}function se(m){m.parentNode&&m.parentNode.removeChild(m)}function Er(m,f){for(let b=0;b<m.length;b+=1)m[b]&&m[b].d(f)}function F(m){return document.createElement(m)}function pe(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function oe(m){return document.createTextNode(m)}function z(){return oe(" ")}function ut(){return oe("")}function ae(m,f,b,k){return m.addEventListener(f,b,k),()=>m.removeEventListener(f,b,k)}function xr(m){return function(f){return f.preventDefault(),m.call(this,f)}}function Tt(m){return function(f){return f.stopPropagation(),m.call(this,f)}}function R(m,f,b){b==null?m.removeAttribute(f):m.getAttribute(f)!==b&&m.setAttribute(f,b)}function Lr(m){return Array.from(m.childNodes)}function ue(m,f){f=""+f,m.data!==f&&(m.data=f)}function ce(m,f){m.value=f??""}function Re(m,f,b,k){b==null?m.style.removeProperty(f):m.style.setProperty(f,b,"")}function Ot(m,f,b){for(let k=0;k<m.options.length;k+=1){const x=m.options[k];if(x.__value===f){x.selected=!0;return}}(!b||f!==void 0)&&(m.selectedIndex=-1)}function Dr(m){const f=m.querySelector(":checked");return f&&f.__value}function Pt(m,f,b){m.classList.toggle(f,!!b)}let tt;function Qe(m){tt=m}function or(){if(!tt)throw new Error("Function called outside component initialization");return tt}function ft(m){or().$$.on_mount.push(m)}function xt(m){or().$$.on_destroy.push(m)}function It(m,f){const b=m.$$.callbacks[f.type];b&&b.slice().forEach(k=>k.call(this,f))}const Xe=[],ze=[];let Je=[];const yt=[],Rr=Promise.resolve();let wt=!1;function Br(){wt||(wt=!0,Rr.then(ar))}function ct(m){Je.push(m)}function Ct(m){yt.push(m)}const St=new Set;let Ve=0;function ar(){if(Ve!==0)return;const m=tt;do{try{for(;Ve<Xe.length;){const f=Xe[Ve];Ve++,Qe(f),Ar(f.$$)}}catch(f){throw Xe.length=0,Ve=0,f}for(Qe(null),Xe.length=0,Ve=0;ze.length;)ze.pop()();for(let f=0;f<Je.length;f+=1){const b=Je[f];St.has(b)||(St.add(b),b())}Je.length=0}while(Xe.length);for(;yt.length;)yt.pop()();wt=!1,St.clear(),Qe(m)}function Ar(m){if(m.fragment!==null){m.update(),ke(m.before_update);const f=m.dirty;m.dirty=[-1],m.fragment&&m.fragment.p(m.ctx,f),m.after_update.forEach(ct)}}function Mr(m){const f=[],b=[];Je.forEach(k=>m.indexOf(k)===-1?f.push(k):b.push(k)),b.forEach(k=>k()),Je=f}const lt=new Set;let je;function _t(){je={r:0,c:[],p:je}}function pt(){je.r||ke(je.c),je=je.p}function Se(m,f){m&&m.i&&(lt.delete(m),m.i(f))}function Ce(m,f,b,k){if(m&&m.o){if(lt.has(m))return;lt.add(m),je.c.push(()=>{lt.delete(m),k&&(b&&m.d(1),k())}),m.o(f)}else k&&k()}function Te(m){return(m==null?void 0:m.length)!==void 0?m:Array.from(m)}function gt(m,f){m.d(1),f.delete(m.key)}function Tr(m,f){Ce(m,1,1,()=>{f.delete(m.key)})}function it(m,f,b,k,x,O,w,i,o,a,d,n){let l=m.length,u=O.length,g=l;const c={};for(;g--;)c[m[g].key]=g;const t=[],s=new Map,e=new Map,r=[];for(g=u;g--;){const S=n(x,O,g),_=b(S);let y=w.get(_);y?r.push(()=>y.p(S,f)):(y=a(_,S),y.c()),s.set(_,t[g]=y),_ in c&&e.set(_,Math.abs(g-c[_]))}const h=new Set,p=new Set;function v(S){Se(S,1),S.m(i,d),w.set(S.key,S),d=S.first,u--}for(;l&&u;){const S=t[u-1],_=m[l-1],y=S.key,D=_.key;S===_?(d=S.first,l--,u--):s.has(D)?!w.has(y)||h.has(y)?v(S):p.has(D)?l--:e.get(y)>e.get(D)?(p.add(y),v(S)):(h.add(D),l--):(o(_,w),l--)}for(;l--;){const S=m[l];s.has(S.key)||o(S,w)}for(;u;)v(t[u-1]);return ke(r),t}function kt(m,f,b){const k=m.$$.props[f];k!==void 0&&(m.$$.bound[k]=b,b(m.$$.ctx[k]))}function Ue(m){m&&m.c()}function He(m,f,b){const{fragment:k,after_update:x}=m.$$;k&&k.m(f,b),ct(()=>{const O=m.$$.on_mount.map(ir).filter(rt);m.$$.on_destroy?m.$$.on_destroy.push(...O):ke(O),m.$$.on_mount=[]}),x.forEach(ct)}function Fe(m,f){const b=m.$$;b.fragment!==null&&(Mr(b.after_update),ke(b.on_destroy),b.fragment&&b.fragment.d(f),b.on_destroy=b.fragment=null,b.ctx=[])}function Or(m,f){m.$$.dirty[0]===-1&&(Xe.push(m),Br(),m.$$.dirty.fill(0)),m.$$.dirty[f/31|0]|=1<<f%31}function We(m,f,b,k,x,O,w=null,i=[-1]){const o=tt;Qe(m);const a=m.$$={fragment:null,ctx:[],props:O,update:he,not_equal:x,bound:At(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f.context||(o?o.$$.context:[])),callbacks:At(),dirty:i,skip_bound:!1,root:f.target||o.$$.root};w&&w(a.root);let d=!1;if(a.ctx=b?b(m,f.props||{},(n,l,...u)=>{const g=u.length?u[0]:l;return a.ctx&&x(a.ctx[n],a.ctx[n]=g)&&(!a.skip_bound&&a.bound[n]&&a.bound[n](g),d&&Or(m,n)),l}):[],a.update(),d=!0,ke(a.before_update),a.fragment=k?k(a.ctx):!1,f.target){if(f.hydrate){const n=Lr(f.target);a.fragment&&a.fragment.l(n),n.forEach(se)}else a.fragment&&a.fragment.c();f.intro&&Se(m.$$.fragment),He(m,f.target,f.anchor),ar()}Qe(o)}class Ne{constructor(){bt(this,"$$");bt(this,"$$set")}$destroy(){Fe(this,1),this.$destroy=he}$on(f,b){if(!rt(b))return he;const k=this.$$.callbacks[f]||(this.$$.callbacks[f]=[]);return k.push(b),()=>{const x=k.indexOf(b);x!==-1&&k.splice(x,1)}}$set(f){this.$$set&&!br(f)&&(this.$$.skip_bound=!0,this.$$set(f),this.$$.skip_bound=!1)}}const Pr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pr);const Ge=[];function Ir(m,f){return{subscribe:Ye(m,f).subscribe}}function Ye(m,f=he){let b;const k=new Set;function x(i){if(Pe(m,i)&&(m=i,b)){const o=!Ge.length;for(const a of k)a[1](),Ge.push(a,m);if(o){for(let a=0;a<Ge.length;a+=2)Ge[a][0](Ge[a+1]);Ge.length=0}}}function O(i){x(i(m))}function w(i,o=he){const a=[i,o];return k.add(a),k.size===1&&(b=f(x,O)||he),i(m),()=>{k.delete(a),k.size===0&&b&&(b(),b=null)}}return{set:x,update:O,subscribe:w}}function st(m,f,b){const k=!Array.isArray(m),x=k?[m]:m;if(!x.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const O=f.length<2;return Ir(b,(w,i)=>{let o=!1;const a=[];let d=0,n=he;const l=()=>{if(d)return;n();const g=f(k?a[0]:a,w,i);O?w(g):n=rt(g)?g:he},u=x.map((g,c)=>sr(g,t=>{a[c]=t,d&=~(1<<c),o&&l()},()=>{d|=1<<c}));return o=!0,l(),function(){ke(u),n(),o=!1}})}const Lt=Ye([{id:"1",name:"生产服务器-01",host:"192.168.1.10",port:22,username:"root",group:"生产环境",status:"online",type:"ssh"},{id:"2",name:"生产服务器-02",host:"192.168.1.11",port:22,username:"root",group:"生产环境",status:"online",type:"ssh"},{id:"3",name:"Web服务器",host:"192.168.1.20",port:22,username:"ubuntu",group:"生产环境",status:"offline",type:"ssh"},{id:"4",name:"开发服务器-01",host:"192.168.2.10",port:22,username:"dev",group:"开发环境",status:"online",type:"ssh"},{id:"5",name:"开发服务器-02",host:"192.168.2.11",port:22,username:"dev",group:"开发环境",status:"online",type:"ssh"},{id:"6",name:"测试服务器",host:"192.168.3.10",port:22,username:"test",group:"测试环境",status:"online",type:"ssh"},{id:"7",name:"MySQL数据库",host:"192.168.1.30",port:3306,username:"root",group:"生产环境",status:"online",type:"database",dbType:"mysql"},{id:"8",name:"Docker主机",host:"192.168.1.40",port:2375,username:"docker",group:"开发环境",status:"online",type:"docker"}]);st(Lt,m=>m.reduce((f,b)=>(f[b.group]||(f[b.group]=[]),f[b.group].push(b),f),{}));const ht=Ye(new Map),ot=Ye(null),Et=Ye("light"),vt=Ye({isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288});st(vt,m=>m.isDevToolsOpen);st(vt,m=>m.isFileManagerOpen);st(vt,m=>m.isMonitorOpen);st(vt,m=>m.sidebarWidth);function Ht(m,f,b){const k=m.slice();return k[13]=f[b][0],k[14]=f[b][1],k}function Ft(m,f,b){const k=m.slice();return k[17]=f[b],k}function Hr(m){let f,b;return{c(){f=pe("svg"),b=pe("path"),R(b,"stroke-linecap","round"),R(b,"stroke-linejoin","round"),R(b,"stroke-width","2"),R(b,"d","M9 5l7 7-7 7"),R(f,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),R(f,"fill","none"),R(f,"stroke","currentColor"),R(f,"viewBox","0 0 24 24")},m(k,x){ne(k,f,x),L(f,b)},d(k){k&&se(f)}}}function Fr(m){let f,b;return{c(){f=pe("svg"),b=pe("path"),R(b,"stroke-linecap","round"),R(b,"stroke-linejoin","round"),R(b,"stroke-width","2"),R(b,"d","M19 9l-7 7-7-7"),R(f,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),R(f,"fill","none"),R(f,"stroke","currentColor"),R(f,"viewBox","0 0 24 24")},m(k,x){ne(k,f,x),L(f,b)},d(k){k&&se(f)}}}function Wt(m){let f,b=[],k=new Map,x=Te(m[14]);const O=w=>w[17].id;for(let w=0;w<x.length;w+=1){let i=Ft(m,x,w),o=O(i);k.set(o,b[w]=$t(o,i))}return{c(){f=F("div");for(let w=0;w<b.length;w+=1)b[w].c();R(f,"class","ml-4")},m(w,i){ne(w,f,i);for(let o=0;o<b.length;o+=1)b[o]&&b[o].m(f,null)},p(w,i){i&17&&(x=Te(w[14]),b=it(b,i,O,1,w,x,k,f,gt,$t,null,Ft))},d(w){w&&se(f);for(let i=0;i<b.length;i+=1)b[i].d()}}}function Nt(m){let f,b=m[17].dbType.toUpperCase()+"",k;return{c(){f=oe("• "),k=oe(b)},m(x,O){ne(x,f,O),ne(x,k,O)},p(x,O){O&16&&b!==(b=x[17].dbType.toUpperCase()+"")&&ue(k,b)},d(x){x&&(se(f),se(k))}}}function $t(m,f){let b,k,x=jt(f[17].type)+"",O,w,i,o,a=f[17].name+"",d,n,l,u,g,c,t=f[17].username+"",s,e,r=f[17].host+"",h,p,v=f[17].port+"",S,_,y,D,A,T,B,W,$,K,q=f[17].type==="database"&&f[17].dbType&&Nt(f);function V(){return f[12](f[17])}return{key:m,first:null,c(){b=F("div"),k=F("div"),O=z(),w=F("div"),i=F("div"),o=F("span"),d=oe(a),n=z(),l=F("div"),g=z(),c=F("div"),s=oe(t),e=oe("@"),h=oe(r),p=oe(":"),S=oe(v),_=z(),q&&q.c(),y=z(),D=F("div"),A=F("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',T=z(),B=F("button"),B.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',W=z(),R(k,"class","flex-shrink-0"),R(o,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),R(l,"class",u=`w-2 h-2 rounded-full flex-shrink-0 ${f[17].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),R(i,"class","flex items-center gap-2"),R(c,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),R(w,"class","flex-1 min-w-0"),R(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),R(B,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),R(D,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),R(b,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=b},m(C,M){ne(C,b,M),L(b,k),k.innerHTML=x,L(b,O),L(b,w),L(w,i),L(i,o),L(o,d),L(i,n),L(i,l),L(w,g),L(w,c),L(c,s),L(c,e),L(c,h),L(c,p),L(c,S),L(c,_),q&&q.m(c,null),L(b,y),L(b,D),L(D,A),L(D,T),L(D,B),L(b,W),$||(K=[ae(A,"click",Tt(f[9])),ae(B,"click",Tt(f[8])),ae(b,"click",V)],$=!0)},p(C,M){f=C,M&16&&x!==(x=jt(f[17].type)+"")&&(k.innerHTML=x),M&16&&a!==(a=f[17].name+"")&&ue(d,a),M&16&&u!==(u=`w-2 h-2 rounded-full flex-shrink-0 ${f[17].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&R(l,"class",u),M&16&&t!==(t=f[17].username+"")&&ue(s,t),M&16&&r!==(r=f[17].host+"")&&ue(h,r),M&16&&v!==(v=f[17].port+"")&&ue(S,v),f[17].type==="database"&&f[17].dbType?q?q.p(f,M):(q=Nt(f),q.c(),q.m(c,null)):q&&(q.d(1),q=null)},d(C){C&&se(b),q&&q.d(),$=!1,ke(K)}}}function Ut(m){let f,b,k,x,O,w,i,o,a=m[13]+"",d,n,l,u,g=m[14].length+"",c,t,s,e=m[3].has(m[13]),r,h,p;function v(A,T){return T&24&&(k=null),k==null&&(k=!!A[3].has(A[13])),k?Fr:Hr}let S=v(m,-1),_=S(m);function y(){return m[11](m[13])}let D=e&&Wt(m);return{c(){f=F("div"),b=F("div"),_.c(),x=z(),O=pe("svg"),w=pe("path"),i=z(),o=F("span"),d=oe(a),n=z(),l=F("span"),u=oe("("),c=oe(g),t=oe(")"),s=z(),D&&D.c(),r=z(),R(w,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),R(O,"class","w-4 h-4 text-amber-500"),R(O,"fill","currentColor"),R(O,"viewBox","0 0 24 24"),R(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),R(l,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),R(b,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),R(f,"class","mb-1")},m(A,T){ne(A,f,T),L(f,b),_.m(b,null),L(b,x),L(b,O),L(O,w),L(b,i),L(b,o),L(o,d),L(b,n),L(b,l),L(l,u),L(l,c),L(l,t),L(f,s),D&&D.m(f,null),L(f,r),h||(p=ae(b,"click",y),h=!0)},p(A,T){m=A,S!==(S=v(m,T))&&(_.d(1),_=S(m),_&&(_.c(),_.m(b,x))),T&16&&a!==(a=m[13]+"")&&ue(d,a),T&16&&g!==(g=m[14].length+"")&&ue(c,g),T&24&&(e=m[3].has(m[13])),e?D?D.p(m,T):(D=Wt(m),D.c(),D.m(f,r)):D&&(D.d(1),D=null)},d(A){A&&se(f),_.d(),D&&D.d(),h=!1,p()}}}function Wr(m){let f,b,k,x,O,w,i,o,a,d,n,l,u,g,c,t,s=Te(Object.entries(m[4])),e=[];for(let r=0;r<s.length;r+=1)e[r]=Ut(Ht(m,s,r));return{c(){f=F("div"),b=F("div"),k=F("div"),x=F("h2"),x.textContent="服务器资产",O=z(),w=F("button"),w.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',i=z(),o=F("div"),a=pe("svg"),d=pe("path"),n=z(),l=F("input"),u=z(),g=F("div");for(let r=0;r<e.length;r+=1)e[r].c();R(x,"class","text-sm font-semibold text-gray-900 dark:text-white"),R(w,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),R(k,"class","flex items-center justify-between mb-3"),R(d,"stroke-linecap","round"),R(d,"stroke-linejoin","round"),R(d,"stroke-width","2"),R(d,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),R(a,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),R(a,"fill","none"),R(a,"stroke","currentColor"),R(a,"viewBox","0 0 24 24"),R(l,"type","text"),R(l,"placeholder","搜索服务器..."),R(l,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(o,"class","relative"),R(b,"class","p-4 border-b border-gray-200 dark:border-gray-700"),R(g,"class","flex-1 overflow-y-auto scrollbar-thin"),R(f,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(r,h){ne(r,f,h),L(f,b),L(b,k),L(k,x),L(k,O),L(k,w),L(b,i),L(b,o),L(o,a),L(a,d),L(o,n),L(o,l),ce(l,m[2]),L(f,u),L(f,g);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(g,null);c||(t=[ae(w,"click",function(){rt(m[1])&&m[1].apply(this,arguments)}),ae(l,"input",m[10])],c=!0)},p(r,[h]){if(m=r,h&4&&l.value!==m[2]&&ce(l,m[2]),h&57){s=Te(Object.entries(m[4]));let p;for(p=0;p<s.length;p+=1){const v=Ht(m,s,p);e[p]?e[p].p(v,h):(e[p]=Ut(v),e[p].c(),e[p].m(g,null))}for(;p<e.length;p+=1)e[p].d(1);e.length=s.length}},i:he,o:he,d(r){r&&se(f),Er(e,r),c=!1,ke(t)}}}function jt(m){switch(m){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function Nr(m,f,b){let k,x,O;et(m,Lt,t=>b(7,O=t));let{onConnect:w}=f,{onAddClick:i}=f,o="",a=new Set(["生产环境","开发环境"]);function d(t){const s=new Set(a);s.has(t)?s.delete(t):s.add(t),b(3,a=s)}function n(t){It.call(this,m,t)}function l(t){It.call(this,m,t)}function u(){o=this.value,b(2,o)}const g=t=>d(t),c=t=>w(t);return m.$$set=t=>{"onConnect"in t&&b(0,w=t.onConnect),"onAddClick"in t&&b(1,i=t.onAddClick)},m.$$.update=()=>{m.$$.dirty&132&&b(6,k=O.filter(t=>{const s=o.toLowerCase();return t.name.toLowerCase().includes(s)||t.host.toLowerCase().includes(s)||t.group.toLowerCase().includes(s)||t.username.toLowerCase().includes(s)})),m.$$.dirty&64&&b(4,x=k.reduce((t,s)=>(t[s.group]||(t[s.group]=[]),t[s.group].push(s),t),{}))},[w,i,o,a,x,d,k,O,n,l,u,g,c]}class $r extends Ne{constructor(f){super(),We(this,f,Nr,Wr,Pe,{onConnect:0,onAddClick:1})}}var lr={exports:{}};(function(m,f){(function(b,k){m.exports=k()})(globalThis,()=>(()=>{var b={4567:function(w,i,o){var a=this&&this.__decorate||function(e,r,h,p){var v,S=arguments.length,_=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(e,r,h,p);else for(var y=e.length-1;y>=0;y--)(v=e[y])&&(_=(S<3?v(_):S>3?v(r,h,_):v(r,h))||_);return S>3&&_&&Object.defineProperty(r,h,_),_},d=this&&this.__param||function(e,r){return function(h,p){r(h,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const n=o(9042),l=o(9924),u=o(844),g=o(4725),c=o(2585),t=o(3656);let s=i.AccessibilityManager=class extends u.Disposable{constructor(e,r,h,p){super(),this._terminal=e,this._coreBrowserService=h,this._renderService=p,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new l.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,t.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,u.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let r=0;r<e;r++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=n.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,r){this._liveRegionDebouncer.refresh(e,r,this._terminal.rows)}_renderRows(e,r){const h=this._terminal.buffer,p=h.lines.length.toString();for(let v=e;v<=r;v++){const S=h.lines.get(h.ydisp+v),_=[],y=(S==null?void 0:S.translateToString(!0,void 0,void 0,_))||"",D=(h.ydisp+v+1).toString(),A=this._rowElements[v];A&&(y.length===0?(A.innerText=" ",this._rowColumns.set(A,[0,1])):(A.textContent=y,this._rowColumns.set(A,_)),A.setAttribute("aria-posinset",D),A.setAttribute("aria-setsize",p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,r){const h=e.target,p=this._rowElements[r===0?1:this._rowElements.length-2];if(h.getAttribute("aria-posinset")===(r===0?"1":`${this._terminal.buffer.lines.length}`)||e.relatedTarget!==p)return;let v,S;if(r===0?(v=h,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(v=this._rowElements.shift(),S=h,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){const _=this._createAccessibilityTreeNode();this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)}else{const _=this._createAccessibilityTreeNode();this._rowElements.push(_),this._rowContainer.appendChild(_)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var y;if(this._rowElements.length===0)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error("anchorNode and/or focusNode are null");let r={node:e.anchorNode,offset:e.anchorOffset},h={node:e.focusNode,offset:e.focusOffset};if((r.node.compareDocumentPosition(h.node)&Node.DOCUMENT_POSITION_PRECEDING||r.node===h.node&&r.offset>h.offset)&&([r,h]=[h,r]),r.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(r={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(r.node))return;const p=this._rowElements.slice(-1)[0];if(h.node.compareDocumentPosition(p)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(h={node:p,offset:((y=p.textContent)==null?void 0:y.length)??0}),!this._rowContainer.contains(h.node))return;const v=({node:D,offset:A})=>{const T=D instanceof Text?D.parentNode:D;let B=parseInt(T==null?void 0:T.getAttribute("aria-posinset"),10)-1;if(isNaN(B))return console.warn("row is invalid. Race condition?"),null;const W=this._rowColumns.get(T);if(!W)return console.warn("columns is null. Race condition?"),null;let $=A<W.length?W[A]:W.slice(-1)[0]+1;return $>=this._terminal.cols&&(++B,$=0),{row:B,column:$}},S=v(r),_=v(h);if(S&&_){if(S.row>_.row||S.row===_.row&&S.column>=_.column)throw new Error("invalid range");this._terminal.select(S.column,S.row,(_.row-S.row)*this._terminal.cols-S.column+_.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=s=a([d(1,c.IInstantiationService),d(2,g.ICoreBrowserService),d(3,g.IRenderService)],s)},3614:(w,i)=>{function o(l){return l.replace(/\r?\n/g,"\r")}function a(l,u){return u?"\x1B[200~"+l+"\x1B[201~":l}function d(l,u,g,c){l=a(l=o(l),g.decPrivateModes.bracketedPasteMode&&c.rawOptions.ignoreBracketedPasteMode!==!0),g.triggerDataEvent(l,!0),u.value=""}function n(l,u,g){const c=g.getBoundingClientRect(),t=l.clientX-c.left-10,s=l.clientY-c.top-10;u.style.width="20px",u.style.height="20px",u.style.left=`${t}px`,u.style.top=`${s}px`,u.style.zIndex="1000",u.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=a,i.copyHandler=function(l,u){l.clipboardData&&l.clipboardData.setData("text/plain",u.selectionText),l.preventDefault()},i.handlePasteEvent=function(l,u,g,c){l.stopPropagation(),l.clipboardData&&d(l.clipboardData.getData("text/plain"),u,g,c)},i.paste=d,i.moveTextAreaUnderMouseCursor=n,i.rightClickHandler=function(l,u,g,c,t){n(l,u,g),t&&c.rightClickSelect(l),u.value=c.selectionText,u.select()}},7239:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const a=o(1505);i.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(d,n,l){this._css.set(d,n,l)}getCss(d,n){return this._css.get(d,n)}setColor(d,n,l){this._color.set(d,n,l)}getColor(d,n){return this._color.get(d,n)}clear(){this._color.clear(),this._css.clear()}}},3656:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,a,d,n){o.addEventListener(a,d,n);let l=!1;return{dispose:()=>{l||(l=!0,o.removeEventListener(a,d,n))}}}},3551:function(w,i,o){var a=this&&this.__decorate||function(s,e,r,h){var p,v=arguments.length,S=v<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,r):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(s,e,r,h);else for(var _=s.length-1;_>=0;_--)(p=s[_])&&(S=(v<3?p(S):v>3?p(e,r,S):p(e,r))||S);return v>3&&S&&Object.defineProperty(e,r,S),S},d=this&&this.__param||function(s,e){return function(r,h){e(r,h,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const n=o(3656),l=o(8460),u=o(844),g=o(2585),c=o(4725);let t=i.Linkifier=class extends u.Disposable{get currentLink(){return this._currentLink}constructor(s,e,r,h,p){super(),this._element=s,this._mouseService=e,this._renderService=r,this._bufferService=h,this._linkProviderService=p,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new l.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new l.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,u.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,u.toDisposable)(()=>{var v;this._lastMouseEvent=void 0,(v=this._activeProviderReplies)==null||v.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(s){this._lastMouseEvent=s;const e=this._positionFromMouseEvent(s,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;const r=s.composedPath();for(let h=0;h<r.length;h++){const p=r[h];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&e.x===this._lastBufferCell.x&&e.y===this._lastBufferCell.y||(this._handleHover(e),this._lastBufferCell=e)}_handleHover(s){if(this._activeLine!==s.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(s,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,s)||(this._clearCurrentLink(),this._askForLink(s,!0))}_askForLink(s,e){var h,p;this._activeProviderReplies&&e||((h=this._activeProviderReplies)==null||h.forEach(v=>{v==null||v.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=s.y);let r=!1;for(const[v,S]of this._linkProviderService.linkProviders.entries())e?(p=this._activeProviderReplies)!=null&&p.get(v)&&(r=this._checkLinkProviderResult(v,s,r)):S.provideLinks(s.y,_=>{var D,A;if(this._isMouseOut)return;const y=_==null?void 0:_.map(T=>({link:T}));(D=this._activeProviderReplies)==null||D.set(v,y),r=this._checkLinkProviderResult(v,s,r),((A=this._activeProviderReplies)==null?void 0:A.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(s.y,this._activeProviderReplies)})}_removeIntersectingLinks(s,e){const r=new Set;for(let h=0;h<e.size;h++){const p=e.get(h);if(p)for(let v=0;v<p.length;v++){const S=p[v],_=S.link.range.start.y<s?0:S.link.range.start.x,y=S.link.range.end.y>s?this._bufferService.cols:S.link.range.end.x;for(let D=_;D<=y;D++){if(r.has(D)){p.splice(v--,1);break}r.add(D)}}}}_checkLinkProviderResult(s,e,r){var v;if(!this._activeProviderReplies)return r;const h=this._activeProviderReplies.get(s);let p=!1;for(let S=0;S<s;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(p=!0);if(!p&&h){const S=h.find(_=>this._linkAtPosition(_.link,e));S&&(r=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let S=0;S<this._activeProviderReplies.size;S++){const _=(v=this._activeProviderReplies.get(S))==null?void 0:v.find(y=>this._linkAtPosition(y.link,e));if(_){r=!0,this._handleNewLink(_);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(s){if(!this._currentLink)return;const e=this._positionFromMouseEvent(s,this._element,this._mouseService);e&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(s,this._currentLink.link.text)}_clearCurrentLink(s,e){this._currentLink&&this._lastMouseEvent&&(!s||!e||this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,u.disposeArray)(this._linkCacheDisposables))}_handleNewLink(s){if(!this._lastMouseEvent)return;const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(s.link,e)&&(this._currentLink=s,this._currentLink.state={decorations:{underline:s.link.decorations===void 0||s.link.decorations.underline,pointerCursor:s.link.decorations===void 0||s.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,s.link,this._lastMouseEvent),s.link.decorations={},Object.defineProperties(s.link.decorations,{pointerCursor:{get:()=>{var r,h;return(h=(r=this._currentLink)==null?void 0:r.state)==null?void 0:h.decorations.pointerCursor},set:r=>{var h;(h=this._currentLink)!=null&&h.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>{var r,h;return(h=(r=this._currentLink)==null?void 0:r.state)==null?void 0:h.decorations.underline},set:r=>{var h,p,v;(h=this._currentLink)!=null&&h.state&&((v=(p=this._currentLink)==null?void 0:p.state)==null?void 0:v.decorations.underline)!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(s.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;const h=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(h,p),this._lastMouseEvent)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(s,e,r){var h;(h=this._currentLink)!=null&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&s.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(r,e.text)}_fireUnderlineEvent(s,e){const r=s.range,h=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-h-1,r.end.x,r.end.y-h-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(s,e,r){var h;(h=this._currentLink)!=null&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&s.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(r,e.text)}_linkAtPosition(s,e){const r=s.range.start.y*this._bufferService.cols+s.range.start.x,h=s.range.end.y*this._bufferService.cols+s.range.end.x,p=e.y*this._bufferService.cols+e.x;return r<=p&&p<=h}_positionFromMouseEvent(s,e,r){const h=r.getCoords(s,e,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(s,e,r,h,p){return{x1:s,y1:e,x2:r,y2:h,cols:this._bufferService.cols,fg:p}}};i.Linkifier=t=a([d(1,c.IMouseService),d(2,c.IRenderService),d(3,g.IBufferService),d(4,c.ILinkProviderService)],t)},9042:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(w,i,o){var a=this&&this.__decorate||function(c,t,s,e){var r,h=arguments.length,p=h<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,t,s,e);else for(var v=c.length-1;v>=0;v--)(r=c[v])&&(p=(h<3?r(p):h>3?r(t,s,p):r(t,s))||p);return h>3&&p&&Object.defineProperty(t,s,p),p},d=this&&this.__param||function(c,t){return function(s,e){t(s,e,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const n=o(511),l=o(2585);let u=i.OscLinkProvider=class{constructor(c,t,s){this._bufferService=c,this._optionsService=t,this._oscLinkService=s}provideLinks(c,t){var y;const s=this._bufferService.buffer.lines.get(c-1);if(!s)return void t(void 0);const e=[],r=this._optionsService.rawOptions.linkHandler,h=new n.CellData,p=s.getTrimmedLength();let v=-1,S=-1,_=!1;for(let D=0;D<p;D++)if(S!==-1||s.hasContent(D)){if(s.loadCell(D,h),h.hasExtendedAttrs()&&h.extended.urlId){if(S===-1){S=D,v=h.extended.urlId;continue}_=h.extended.urlId!==v}else S!==-1&&(_=!0);if(_||S!==-1&&D===p-1){const A=(y=this._oscLinkService.getLinkData(v))==null?void 0:y.uri;if(A){const T={start:{x:S+1,y:c},end:{x:D+(_||D!==p-1?0:1),y:c}};let B=!1;if(!(r!=null&&r.allowNonHttpProtocols))try{const W=new URL(A);["http:","https:"].includes(W.protocol)||(B=!0)}catch{B=!0}B||e.push({text:A,range:T,activate:(W,$)=>r?r.activate(W,$,T):g(0,$),hover:(W,$)=>{var K;return(K=r==null?void 0:r.hover)==null?void 0:K.call(r,W,$,T)},leave:(W,$)=>{var K;return(K=r==null?void 0:r.leave)==null?void 0:K.call(r,W,$,T)}})}_=!1,h.hasExtendedAttrs()&&h.extended.urlId?(S=D,v=h.extended.urlId):(S=-1,v=-1)}}t(e)}};function g(c,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const s=window.open();if(s){try{s.opener=null}catch{}s.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=u=a([d(0,l.IBufferService),d(1,l.IOptionsService),d(2,l.IOscLinkService)],u)},6193:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,d){this._rowCount=d,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const a=o(3614),d=o(3656),n=o(3551),l=o(9042),u=o(3730),g=o(1680),c=o(3107),t=o(5744),s=o(2950),e=o(1296),r=o(428),h=o(4269),p=o(5114),v=o(8934),S=o(3230),_=o(9312),y=o(4725),D=o(6731),A=o(8055),T=o(8969),B=o(8460),W=o(844),$=o(6114),K=o(8437),q=o(2584),V=o(7399),C=o(5941),M=o(9074),P=o(2585),H=o(5435),U=o(4567),G=o(779);class Q extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new W.MutableDisposable),this._onCursorMove=this.register(new B.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new B.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new B.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new B.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new B.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new B.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new B.EventEmitter),this._onBlur=this.register(new B.EventEmitter),this._onA11yCharEmitter=this.register(new B.EventEmitter),this._onA11yTabEmitter=this.register(new B.EventEmitter),this._onWillOpen=this.register(new B.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(G.LinkProviderService),this._instantiationService.setService(y.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(u.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((E,j)=>this.refresh(E,j))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(E=>this._reportWindowsOptions(E))),this.register(this._inputHandler.onColor(E=>this._handleColorEvent(E))),this.register((0,B.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,B.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(E=>this._afterResize(E.cols,E.rows))),this.register((0,W.toDisposable)(()=>{var E,j;this._customKeyEventHandler=void 0,(j=(E=this.element)==null?void 0:E.parentNode)==null||j.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const E of I){let j,N="";switch(E.index){case 256:j="foreground",N="10";break;case 257:j="background",N="11";break;case 258:j="cursor",N="12";break;default:j="ansi",N="4;"+E.index}switch(E.type){case 0:const J=A.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[E.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${q.C0.ESC}]${N};${(0,C.toRgbString)(J)}${q.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors(X=>X.ansi[E.index]=A.channels.toColor(...E.color));else{const X=j;this._themeService.modifyColors(re=>re[X]=A.channels.toColor(...E.color))}break;case 2:this._themeService.restoreColor(E.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)==null?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,E=this.buffer.lines.get(I);if(!E)return;const j=Math.min(this.buffer.x,this.cols-1),N=this._renderService.dimensions.css.cell.height,J=E.getWidth(j),X=this._renderService.dimensions.css.cell.width*J,re=this.buffer.y*this._renderService.dimensions.css.cell.height,Y=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Y+"px",this.textarea.style.top=re+"px",this.textarea.style.width=X+"px",this.textarea.style.height=N+"px",this.textarea.style.lineHeight=N+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,d.addDisposableDomListener)(this.element,"copy",E=>{this.hasSelection()&&(0,a.copyHandler)(E,this._selectionService)}));const I=E=>(0,a.handlePasteEvent)(E,this.textarea,this.coreService,this.optionsService);this.register((0,d.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,d.addDisposableDomListener)(this.element,"paste",I)),$.isFirefox?this.register((0,d.addDisposableDomListener)(this.element,"mousedown",E=>{E.button===2&&(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,d.addDisposableDomListener)(this.element,"contextmenu",E=>{(0,a.rightClickHandler)(E,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,d.addDisposableDomListener)(this.element,"auxclick",E=>{E.button===1&&(0,a.moveTextAreaUnderMouseCursor)(E,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,d.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,d.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var j;if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((j=this.element)==null?void 0:j.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const E=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),E.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,d.addDisposableDomListener)(this.screenElement,"mousemove",N=>this.updateCursorStyle(N))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),E.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,d.addDisposableDomListener)(this.textarea,"focus",N=>this._handleTextAreaFocus(N))),this.register((0,d.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(r.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(h.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(S.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(N=>this._onRender.fire(N))),this.onResize(N=>this._renderService.resize(N.cols,N.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(n.Linkifier,this.screenElement)),this.element.appendChild(E);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(g.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(N=>this.scrollLines(N.amount,N.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(N=>this.scrollLines(N.amount,N.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(N=>this._renderService.handleSelectionChanged(N.start,N.end,N.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(N=>{this.textarea.value=N,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(N=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,d.addDisposableDomListener)(this.element,"mousedown",N=>this._selectionService.handleMouseDown(N))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",N=>this._handleScreenReaderModeOptionChange(N))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",N=>{!this._overviewRulerRenderer&&N&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(e.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,E=this.element;function j(X){const re=I._mouseService.getMouseReportCoords(X,I.screenElement);if(!re)return!1;let Y,te;switch(X.overrideType||X.type){case"mousemove":te=32,X.buttons===void 0?(Y=3,X.button!==void 0&&(Y=X.button<3?X.button:3)):Y=1&X.buttons?0:4&X.buttons?1:2&X.buttons?2:3;break;case"mouseup":te=0,Y=X.button<3?X.button:3;break;case"mousedown":te=1,Y=X.button<3?X.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler(X)===!1||I.viewport.getLinesScrolled(X)===0)return!1;te=X.deltaY<0?0:1,Y=4;break;default:return!1}return!(te===void 0||Y===void 0||Y>4)&&I.coreMouseService.triggerMouseEvent({col:re.col,row:re.row,x:re.x,y:re.y,button:Y,action:te,ctrl:X.ctrlKey,alt:X.altKey,shift:X.shiftKey})}const N={mouseup:null,wheel:null,mousedrag:null,mousemove:null},J={mouseup:X=>(j(X),X.buttons||(this._document.removeEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.removeEventListener("mousemove",N.mousedrag)),this.cancel(X)),wheel:X=>(j(X),this.cancel(X,!0)),mousedrag:X=>{X.buttons&&j(X)},mousemove:X=>{X.buttons||j(X)}};this.register(this.coreMouseService.onProtocolChange(X=>{X?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(X)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&X?N.mousemove||(E.addEventListener("mousemove",J.mousemove),N.mousemove=J.mousemove):(E.removeEventListener("mousemove",N.mousemove),N.mousemove=null),16&X?N.wheel||(E.addEventListener("wheel",J.wheel,{passive:!1}),N.wheel=J.wheel):(E.removeEventListener("wheel",N.wheel),N.wheel=null),2&X?N.mouseup||(N.mouseup=J.mouseup):(this._document.removeEventListener("mouseup",N.mouseup),N.mouseup=null),4&X?N.mousedrag||(N.mousedrag=J.mousedrag):(this._document.removeEventListener("mousemove",N.mousedrag),N.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,d.addDisposableDomListener)(E,"mousedown",X=>{if(X.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(X))return j(X),N.mouseup&&this._document.addEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.addEventListener("mousemove",N.mousedrag),this.cancel(X)})),this.register((0,d.addDisposableDomListener)(E,"wheel",X=>{if(!N.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(X)===!1)return!1;if(!this.buffer.hasScrollback){const re=this.viewport.getLinesScrolled(X);if(re===0)return;const Y=q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(X.deltaY<0?"A":"B");let te="";for(let fe=0;fe<Math.abs(re);fe++)te+=Y;return this.coreService.triggerDataEvent(te,!0),this.cancel(X,!0)}return this.viewport.handleWheel(X)?this.cancel(X):void 0}},{passive:!1})),this.register((0,d.addDisposableDomListener)(E,"touchstart",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(X),this.cancel(X)},{passive:!0})),this.register((0,d.addDisposableDomListener)(E,"touchmove",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(X)?void 0:this.cancel(X)},{passive:!1}))}refresh(I,E){var j;(j=this._renderService)==null||j.refreshRows(I,E)}updateCursorStyle(I){var E;(E=this._selectionService)!=null&&E.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,E,j=0){var N;j===1?(super.scrollLines(I,E,j),this.refresh(0,this.rows-1)):(N=this.viewport)==null||N.scrollLines(I)}paste(I){(0,a.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const E=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),E}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,E,j){this._selectionService.setSelection(I,E,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)==null||I.clearSelection()}selectAll(){var I;(I=this._selectionService)==null||I.selectAll()}selectLines(I,E){var j;(j=this._selectionService)==null||j.selectLines(I,E)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const E=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!E&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;E||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const j=(0,V.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),j.type===3||j.type===2){const N=this.rows-1;return this.scrollLines(j.type===2?-N:N),this.cancel(I,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(j.cancel&&this.cancel(I,!0),!j.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==q.C0.ETX&&j.key!==q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,E){const j=I.isMac&&!this.options.macOptionIsMeta&&E.altKey&&!E.ctrlKey&&!E.metaKey||I.isWindows&&E.altKey&&E.ctrlKey&&!E.metaKey||I.isWindows&&E.getModifierState("AltGraph");return E.type==="keypress"?j:j&&(!E.keyCode||E.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(E){return E.keyCode===16||E.keyCode===17||E.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let E;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)E=I.charCode;else if(I.which===null||I.which===void 0)E=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;E=I.which}return!(!E||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(E=String.fromCharCode(E),this._onKey.fire({key:E,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(E,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const E=I.data;return this.coreService.triggerDataEvent(E,!0),this.cancel(I),!0}return!1}resize(I,E){I!==this.cols||E!==this.rows?super.resize(I,E):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,E){var j,N;(j=this._charSizeService)==null||j.measure(),(N=this.viewport)==null||N.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let E=1;E<this.rows;E++)this.buffer.lines.push(this.buffer.getBlankLine(K.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)==null||I.reset(),this.refresh(0,this.rows-1)}}reset(){var E,j;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(E=this._selectionService)==null||E.reset(),this._decorationService.reset(),(j=this.viewport)==null||j.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)==null||I.clearTextureAtlas()}_reportFocus(){var I;(I=this.element)!=null&&I.classList.contains("focus")?this.coreService.triggerDataEvent(q.C0.ESC+"[I"):this.coreService.triggerDataEvent(q.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const E=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[4;${j};${E}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const N=this._renderService.dimensions.css.cell.width.toFixed(0),J=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[6;${J};${N}t`)}}cancel(I,E){if(this.options.cancelEvents||E)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=Q},9924:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,d){this._rowCount=d,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;const n=Date.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){const l=n-this._lastRefreshMs,u=this._debounceThresholdMS-l;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},u)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(w,i,o){var a=this&&this.__decorate||function(s,e,r,h){var p,v=arguments.length,S=v<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,r):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(s,e,r,h);else for(var _=s.length-1;_>=0;_--)(p=s[_])&&(S=(v<3?p(S):v>3?p(e,r,S):p(e,r))||S);return v>3&&S&&Object.defineProperty(e,r,S),S},d=this&&this.__param||function(s,e){return function(r,h){e(r,h,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const n=o(3656),l=o(4725),u=o(8460),g=o(844),c=o(2585);let t=i.Viewport=class extends g.Disposable{constructor(s,e,r,h,p,v,S,_){super(),this._viewportElement=s,this._scrollArea=e,this._bufferService=r,this._optionsService=h,this._charSizeService=p,this._renderService=v,this._coreBrowserService=S,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(_.colors),this.register(_.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(s){this._viewportElement.style.backgroundColor=s.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(s){if(s)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._refreshAnimationFrame=null}syncScrollArea(s=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(s);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(s)}_handleScroll(s){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const e=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const s=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(s*(this._smoothScrollState.target-this._smoothScrollState.origin)),s<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(s,e){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(e<0&&this._viewportElement.scrollTop!==0||e>0&&r<this._lastRecordedBufferHeight)||(s.cancelable&&s.preventDefault(),!1)}handleWheel(s){const e=this._getPixelsScrolled(s);return e!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+e:this._smoothScrollState.target+=e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=e,this._bubbleScroll(s,e))}scrollLines(s){if(s!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const e=s*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!1})}_getPixelsScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let e=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_LINE?e*=this._currentRowHeight:s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._currentRowHeight*this._bufferService.rows),e}getBufferElements(s,e){var _;let r,h="";const p=[],v=e??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let y=s;y<v;y++){const D=S.get(y);if(!D)continue;const A=(_=S.get(y+1))==null?void 0:_.isWrapped;if(h+=D.translateToString(!A),!A||y===S.length-1){const T=document.createElement("div");T.textContent=h,p.push(T),h.length>0&&(r=T),h=""}}return{bufferElements:p,cursorElement:r}}getLinesScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let e=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(e/=this._currentRowHeight+0,this._wheelPartialScroll+=e,e=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._bufferService.rows),e}_applyScrollModifier(s,e){const r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&e.altKey||r==="ctrl"&&e.ctrlKey||r==="shift"&&e.shiftKey?s*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:s*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(s){this._lastTouchY=s.touches[0].pageY}handleTouchMove(s){const e=this._lastTouchY-s.touches[0].pageY;return this._lastTouchY=s.touches[0].pageY,e!==0&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(s,e))}};i.Viewport=t=a([d(2,c.IBufferService),d(3,c.IOptionsService),d(4,l.ICharSizeService),d(5,l.IRenderService),d(6,l.ICoreBrowserService),d(7,l.IThemeService)],t)},3107:function(w,i,o){var a=this&&this.__decorate||function(c,t,s,e){var r,h=arguments.length,p=h<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,t,s,e);else for(var v=c.length-1;v>=0;v--)(r=c[v])&&(p=(h<3?r(p):h>3?r(t,s,p):r(t,s))||p);return h>3&&p&&Object.defineProperty(t,s,p),p},d=this&&this.__param||function(c,t){return function(s,e){t(s,e,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const n=o(4725),l=o(844),u=o(2585);let g=i.BufferDecorationRenderer=class extends l.Disposable{constructor(c,t,s,e,r){super(),this._screenElement=c,this._bufferService=t,this._coreBrowserService=s,this._decorationService=e,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this.register((0,l.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var e;const t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",((e=c==null?void 0:c.options)==null?void 0:e.layer)==="top"),t.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",t.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const s=c.options.x??0;return s&&s>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(c,t),t}_refreshStyle(c){const t=c.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let s=this._decorationElements.get(c);s||(s=this._createElement(c),c.element=s,this._decorationElements.set(c,s),this._container.appendChild(s),c.onDispose(()=>{this._decorationElements.delete(c),s.remove()})),s.style.top=t*this._renderService.dimensions.css.cell.height+"px",s.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(s)}}_refreshXPosition(c,t=c.element){if(!t)return;const s=c.options.x??0;(c.options.anchor||"left")==="right"?t.style.right=s?s*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=s?s*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var t;(t=this._decorationElements.get(c))==null||t.remove(),this._decorationElements.delete(c),c.dispose()}};i.BufferDecorationRenderer=g=a([d(1,u.IBufferService),d(2,n.ICoreBrowserService),d(3,u.IDecorationService),d(4,n.IRenderService)],g)},5871:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,d){return a>=o.startBufferLine-this._linePadding[d||"full"]&&a<=o.endBufferLine+this._linePadding[d||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(w,i,o){var a=this&&this.__decorate||function(r,h,p,v){var S,_=arguments.length,y=_<3?h:v===null?v=Object.getOwnPropertyDescriptor(h,p):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,h,p,v);else for(var D=r.length-1;D>=0;D--)(S=r[D])&&(y=(_<3?S(y):_>3?S(h,p,y):S(h,p))||y);return _>3&&y&&Object.defineProperty(h,p,y),y},d=this&&this.__param||function(r,h){return function(p,v){h(p,v,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const n=o(5871),l=o(4725),u=o(844),g=o(2585),c={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0};let e=i.OverviewRulerRenderer=class extends u.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(r,h,p,v,S,_,y){var A;super(),this._viewportElement=r,this._screenElement=h,this._bufferService=p,this._decorationService=v,this._renderService=S,this._optionsService=_,this._coreBrowserService=y,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)==null||A.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,u.toDisposable)(()=>{var T;(T=this._canvas)==null||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const r=Math.floor(this._canvas.width/3),h=Math.ceil(this._canvas.width/3);t.full=this._canvas.width,t.left=r,t.center=h,t.right=r,this._refreshDrawHeightConstants(),s.full=0,s.left=0,s.center=t.left,s.right=t.left+t.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowserService.dpr);const r=this._canvas.height/this._bufferService.buffer.lines.length,h=Math.round(Math.max(Math.min(r,12),6)*this._coreBrowserService.dpr);c.left=h,c.center=h,c.right=h}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const h of this._decorationService.decorations)this._colorZoneStore.addDecoration(h);this._ctx.lineWidth=1;const r=this._colorZoneStore.zones;for(const h of r)h.position!=="full"&&this._renderColorZone(h);for(const h of r)h.position==="full"&&this._renderColorZone(h);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(r){this._ctx.fillStyle=r.color,this._ctx.fillRect(s[r.position||"full"],Math.round((this._canvas.height-1)*(r.startBufferLine/this._bufferService.buffers.active.lines.length)-c[r.position||"full"]/2),t[r.position||"full"],Math.round((this._canvas.height-1)*((r.endBufferLine-r.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[r.position||"full"]))}_queueRefresh(r,h){this._shouldUpdateDimensions=r||this._shouldUpdateDimensions,this._shouldUpdateAnchor=h||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=e=a([d(2,g.IBufferService),d(3,g.IDecorationService),d(4,l.IRenderService),d(5,g.IOptionsService),d(6,l.ICoreBrowserService)],e)},2950:function(w,i,o){var a=this&&this.__decorate||function(c,t,s,e){var r,h=arguments.length,p=h<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,s):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,t,s,e);else for(var v=c.length-1;v>=0;v--)(r=c[v])&&(p=(h<3?r(p):h>3?r(t,s,p):r(t,s))||p);return h>3&&p&&Object.defineProperty(t,s,p),p},d=this&&this.__param||function(c,t){return function(s,e){t(s,e,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const n=o(4725),l=o(2585),u=o(2584);let g=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(c,t,s,e,r,h){this._textarea=c,this._compositionView=t,this._bufferService=s,this._optionsService=e,this._coreService=r,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(c){this._compositionView.textContent=c.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(c){if(this._isComposing||this._isSendingComposition){if(c.keyCode===229||c.keyCode===16||c.keyCode===17||c.keyCode===18)return!1;this._finalizeComposition(!1)}return c.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(c){if(this._compositionView.classList.remove("active"),this._isComposing=!1,c){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let s;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,s=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const c=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,s=t.replace(c,"");this._dataAlreadySent=s,t.length>c.length?this._coreService.triggerDataEvent(s,!0):t.length<c.length?this._coreService.triggerDataEvent(`${u.C0.DEL}`,!0):t.length===c.length&&t!==c&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(c){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,e=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=e+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const h=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=e+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}c||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=g=a([d(2,l.IBufferService),d(3,l.IOptionsService),d(4,l.ICoreService),d(5,n.IRenderService)],g)},9806:(w,i)=>{function o(a,d,n){const l=n.getBoundingClientRect(),u=a.getComputedStyle(n),g=parseInt(u.getPropertyValue("padding-left")),c=parseInt(u.getPropertyValue("padding-top"));return[d.clientX-l.left-g,d.clientY-l.top-c]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(a,d,n,l,u,g,c,t,s){if(!g)return;const e=o(a,d,n);return e?(e[0]=Math.ceil((e[0]+(s?c/2:0))/c),e[1]=Math.ceil(e[1]/t),e[0]=Math.min(Math.max(e[0],1),l+(s?1:0)),e[1]=Math.min(Math.max(e[1],1),u),e):void 0}},9504:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const a=o(2584);function d(t,s,e,r){const h=t-n(t,e),p=s-n(s,e),v=Math.abs(h-p)-function(S,_,y){let D=0;const A=S-n(S,y),T=_-n(_,y);for(let B=0;B<Math.abs(A-T);B++){const W=l(S,_)==="A"?-1:1,$=y.buffer.lines.get(A+W*B);$!=null&&$.isWrapped&&D++}return D}(t,s,e);return c(v,g(l(t,s),r))}function n(t,s){let e=0,r=s.buffer.lines.get(t),h=r==null?void 0:r.isWrapped;for(;h&&t>=0&&t<s.rows;)e++,r=s.buffer.lines.get(--t),h=r==null?void 0:r.isWrapped;return e}function l(t,s){return t>s?"A":"B"}function u(t,s,e,r,h,p){let v=t,S=s,_="";for(;v!==e||S!==r;)v+=h?1:-1,h&&v>p.cols-1?(_+=p.buffer.translateBufferLineToString(S,!1,t,v),v=0,t=0,S++):!h&&v<0&&(_+=p.buffer.translateBufferLineToString(S,!1,0,t+1),v=p.cols-1,t=v,S--);return _+p.buffer.translateBufferLineToString(S,!1,t,v)}function g(t,s){const e=s?"O":"[";return a.C0.ESC+e+t}function c(t,s){t=Math.floor(t);let e="";for(let r=0;r<t;r++)e+=s;return e}i.moveToCellSequence=function(t,s,e,r){const h=e.buffer.x,p=e.buffer.y;if(!e.buffer.hasScrollback)return function(_,y,D,A,T,B){return d(y,A,T,B).length===0?"":c(u(_,y,_,y-n(y,T),!1,T).length,g("D",B))}(h,p,0,s,e,r)+d(p,s,e,r)+function(_,y,D,A,T,B){let W;W=d(y,A,T,B).length>0?A-n(A,T):y;const $=A,K=function(q,V,C,M,P,H){let U;return U=d(C,M,P,H).length>0?M-n(M,P):V,q<C&&U<=M||q>=C&&U<M?"C":"D"}(_,y,D,A,T,B);return c(u(_,W,D,$,K==="C",T).length,g(K,B))}(h,p,t,s,e,r);let v;if(p===s)return v=h>t?"D":"C",c(Math.abs(h-t),g(v,r));v=p>s?"D":"C";const S=Math.abs(p-s);return c(function(_,y){return y.cols-_}(p>s?t:h,e)+(S-1)*e.cols+1+((p>s?h:t)-1),g(v,r))}},1296:function(w,i,o){var a=this&&this.__decorate||function(B,W,$,K){var q,V=arguments.length,C=V<3?W:K===null?K=Object.getOwnPropertyDescriptor(W,$):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(B,W,$,K);else for(var M=B.length-1;M>=0;M--)(q=B[M])&&(C=(V<3?q(C):V>3?q(W,$,C):q(W,$))||C);return V>3&&C&&Object.defineProperty(W,$,C),C},d=this&&this.__param||function(B,W){return function($,K){W($,K,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const n=o(3787),l=o(2550),u=o(2223),g=o(6171),c=o(6052),t=o(4725),s=o(8055),e=o(8460),r=o(844),h=o(2585),p="xterm-dom-renderer-owner-",v="xterm-rows",S="xterm-fg-",_="xterm-bg-",y="xterm-focus",D="xterm-selection";let A=1,T=i.DomRenderer=class extends r.Disposable{constructor(B,W,$,K,q,V,C,M,P,H,U,G,Q){super(),this._terminal=B,this._document=W,this._element=$,this._screenElement=K,this._viewportElement=q,this._helperContainer=V,this._linkifier2=C,this._charSizeService=P,this._optionsService=H,this._bufferService=U,this._coreBrowserService=G,this._themeService=Q,this._terminalClass=A++,this._rowElements=[],this._selectionRenderModel=(0,c.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new e.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(D),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,g.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Z=>this._injectCss(Z))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Z=>this._handleLinkHover(Z))),this.register(this._linkifier2.onHideLinkUnderline(Z=>this._handleLinkLeave(Z))),this.register((0,r.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new l.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const B=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*B,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*B),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/B),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/B),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const $ of this._rowElements)$.style.width=`${this.dimensions.css.canvas.width}px`,$.style.height=`${this.dimensions.css.cell.height}px`,$.style.lineHeight=`${this.dimensions.css.cell.height}px`,$.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const W=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=W,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(B){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let W=`${this._terminalSelector} .${v} { color: ${B.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;W+=`${this._terminalSelector} .${v} .xterm-dim { color: ${s.color.multiplyOpacity(B.foreground,.5).css};}`,W+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const $=`blink_underline_${this._terminalClass}`,K=`blink_bar_${this._terminalClass}`,q=`blink_block_${this._terminalClass}`;W+=`@keyframes ${$} { 50% {  border-bottom-style: hidden; }}`,W+=`@keyframes ${K} { 50% {  box-shadow: none; }}`,W+=`@keyframes ${q} { 0% {  background-color: ${B.cursor.css};  color: ${B.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${B.cursor.css}; }}`,W+=`${this._terminalSelector} .${v}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${v}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${v}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${B.cursor.css}; color: ${B.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${B.cursor.css} !important; color: ${B.cursorAccent.css} !important;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${B.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${B.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${B.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,W+=`${this._terminalSelector} .${D} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${D} div { position: absolute; background-color: ${B.selectionBackgroundOpaque.css};}${this._terminalSelector} .${D} div { position: absolute; background-color: ${B.selectionInactiveBackgroundOpaque.css};}`;for(const[V,C]of B.ansi.entries())W+=`${this._terminalSelector} .${S}${V} { color: ${C.css}; }${this._terminalSelector} .${S}${V}.xterm-dim { color: ${s.color.multiplyOpacity(C,.5).css}; }${this._terminalSelector} .${_}${V} { background-color: ${C.css}; }`;W+=`${this._terminalSelector} .${S}${u.INVERTED_DEFAULT_COLOR} { color: ${s.color.opaque(B.background).css}; }${this._terminalSelector} .${S}${u.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${s.color.multiplyOpacity(s.color.opaque(B.background),.5).css}; }${this._terminalSelector} .${_}${u.INVERTED_DEFAULT_COLOR} { background-color: ${B.foreground.css}; }`,this._themeStyleElement.textContent=W}_setDefaultSpacing(){const B=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${B}px`,this._rowFactory.defaultSpacing=B}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(B,W){for(let $=this._rowElements.length;$<=W;$++){const K=this._document.createElement("div");this._rowContainer.appendChild(K),this._rowElements.push(K)}for(;this._rowElements.length>W;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(B,W){this._refreshRowElements(B,W),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(y),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(y),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(B,W,$){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(B,W,$),this.renderRows(0,this._bufferService.rows-1),!B||!W)return;this._selectionRenderModel.update(this._terminal,B,W,$);const K=this._selectionRenderModel.viewportStartRow,q=this._selectionRenderModel.viewportEndRow,V=this._selectionRenderModel.viewportCappedStartRow,C=this._selectionRenderModel.viewportCappedEndRow;if(V>=this._bufferService.rows||C<0)return;const M=this._document.createDocumentFragment();if($){const P=B[0]>W[0];M.appendChild(this._createSelectionElement(V,P?W[0]:B[0],P?B[0]:W[0],C-V+1))}else{const P=K===V?B[0]:0,H=V===q?W[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(V,P,H));const U=C-V-1;if(M.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,U)),V!==C){const G=q===C?W[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(C,0,G))}}this._selectionContainer.appendChild(M)}_createSelectionElement(B,W,$,K=1){const q=this._document.createElement("div"),V=W*this.dimensions.css.cell.width;let C=this.dimensions.css.cell.width*($-W);return V+C>this.dimensions.css.canvas.width&&(C=this.dimensions.css.canvas.width-V),q.style.height=K*this.dimensions.css.cell.height+"px",q.style.top=B*this.dimensions.css.cell.height+"px",q.style.left=`${V}px`,q.style.width=`${C}px`,q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const B of this._rowElements)B.replaceChildren()}renderRows(B,W){const $=this._bufferService.buffer,K=$.ybase+$.y,q=Math.min($.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,C=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=B;P<=W;P++){const H=P+$.ydisp,U=this._rowElements[P],G=$.lines.get(H);if(!U||!G)break;U.replaceChildren(...this._rowFactory.createRow(G,H,H===K,C,M,q,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!0)}_handleLinkLeave(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!1)}_setCellUnderline(B,W,$,K,q,V){$<0&&(B=0),K<0&&(W=0);const C=this._bufferService.rows-1;$=Math.max(Math.min($,C),0),K=Math.max(Math.min(K,C),0),q=Math.min(q,this._bufferService.cols);const M=this._bufferService.buffer,P=M.ybase+M.y,H=Math.min(M.x,q-1),U=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let Z=$;Z<=K;++Z){const I=Z+M.ydisp,E=this._rowElements[Z],j=M.lines.get(I);if(!E||!j)break;E.replaceChildren(...this._rowFactory.createRow(j,I,I===P,G,Q,H,U,this.dimensions.css.cell.width,this._widthCache,V?Z===$?B:0:-1,V?(Z===K?W:q)-1:-1))}}};i.DomRenderer=T=a([d(7,h.IInstantiationService),d(8,t.ICharSizeService),d(9,h.IOptionsService),d(10,h.IBufferService),d(11,t.ICoreBrowserService),d(12,t.IThemeService)],T)},3787:function(w,i,o){var a=this&&this.__decorate||function(v,S,_,y){var D,A=arguments.length,T=A<3?S:y===null?y=Object.getOwnPropertyDescriptor(S,_):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(v,S,_,y);else for(var B=v.length-1;B>=0;B--)(D=v[B])&&(T=(A<3?D(T):A>3?D(S,_,T):D(S,_))||T);return A>3&&T&&Object.defineProperty(S,_,T),T},d=this&&this.__param||function(v,S){return function(_,y){S(_,y,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const n=o(2223),l=o(643),u=o(511),g=o(2585),c=o(8055),t=o(4725),s=o(4269),e=o(6171),r=o(3734);let h=i.DomRendererRowFactory=class{constructor(v,S,_,y,D,A,T){this._document=v,this._characterJoinerService=S,this._optionsService=_,this._coreBrowserService=y,this._coreService=D,this._decorationService=A,this._themeService=T,this._workCell=new u.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(v,S,_){this._selectionStart=v,this._selectionEnd=S,this._columnSelectMode=_}createRow(v,S,_,y,D,A,T,B,W,$,K){const q=[],V=this._characterJoinerService.getJoinedCharacters(S),C=this._themeService.colors;let M,P=v.getNoBgTrimmedLength();_&&P<A+1&&(P=A+1);let H=0,U="",G=0,Q=0,Z=0,I=!1,E=0,j=!1,N=0;const J=[],X=$!==-1&&K!==-1;for(let re=0;re<P;re++){v.loadCell(re,this._workCell);let Y=this._workCell.getWidth();if(Y===0)continue;let te=!1,fe=re,ee=this._workCell;if(V.length>0&&re===V[0][0]){te=!0;const ie=V.shift();ee=new s.JoinedCellData(this._workCell,v.translateToString(!0,ie[0],ie[1]),ie[1]-ie[0]),fe=ie[1]-1,Y=ee.getWidth()}const me=this._isCellInSelection(re,S),Me=_&&re===A,Ie=X&&re>=$&&re<=K;let we=!1;this._decorationService.forEachDecorationAtCell(re,S,void 0,ie=>{we=!0});let xe=ee.getChars()||l.WHITESPACE_CELL_CHAR;if(xe===" "&&(ee.isUnderline()||ee.isOverline())&&(xe=" "),N=Y*B-W.get(xe,ee.isBold(),ee.isItalic()),M){if(H&&(me&&j||!me&&!j&&ee.bg===G)&&(me&&j&&C.selectionForeground||ee.fg===Q)&&ee.extended.ext===Z&&Ie===I&&N===E&&!Me&&!te&&!we){ee.isInvisible()?U+=l.WHITESPACE_CELL_CHAR:U+=xe,H++;continue}H&&(M.textContent=U),M=this._document.createElement("span"),H=0,U=""}else M=this._document.createElement("span");if(G=ee.bg,Q=ee.fg,Z=ee.extended.ext,I=Ie,E=N,j=me,te&&A>=re&&A<=fe&&(A=re),!this._coreService.isCursorHidden&&Me&&this._coreService.isCursorInitialized){if(J.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&J.push("xterm-cursor-blink"),J.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":J.push("xterm-cursor-outline");break;case"block":J.push("xterm-cursor-block");break;case"bar":J.push("xterm-cursor-bar");break;case"underline":J.push("xterm-cursor-underline")}}if(ee.isBold()&&J.push("xterm-bold"),ee.isItalic()&&J.push("xterm-italic"),ee.isDim()&&J.push("xterm-dim"),U=ee.isInvisible()?l.WHITESPACE_CELL_CHAR:ee.getChars()||l.WHITESPACE_CELL_CHAR,ee.isUnderline()&&(J.push(`xterm-underline-${ee.extended.underlineStyle}`),U===" "&&(U=" "),!ee.isUnderlineColorDefault()))if(ee.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(ee.getUnderlineColor()).join(",")})`;else{let ie=ee.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ee.isBold()&&ie<8&&(ie+=8),M.style.textDecorationColor=C.ansi[ie].css}ee.isOverline()&&(J.push("xterm-overline"),U===" "&&(U=" ")),ee.isStrikethrough()&&J.push("xterm-strikethrough"),Ie&&(M.style.textDecoration="underline");let _e=ee.getFgColor(),Be=ee.getFgColorMode(),be=ee.getBgColor(),ve=ee.getBgColorMode();const Oe=!!ee.isInverse();if(Oe){const ie=_e;_e=be,be=ie;const nt=Be;Be=ve,ve=nt}let Ee,Ae,ye,de=!1;switch(this._decorationService.forEachDecorationAtCell(re,S,void 0,ie=>{ie.options.layer!=="top"&&de||(ie.backgroundColorRGB&&(ve=50331648,be=ie.backgroundColorRGB.rgba>>8&16777215,Ee=ie.backgroundColorRGB),ie.foregroundColorRGB&&(Be=50331648,_e=ie.foregroundColorRGB.rgba>>8&16777215,Ae=ie.foregroundColorRGB),de=ie.options.layer==="top")}),!de&&me&&(Ee=this._coreBrowserService.isFocused?C.selectionBackgroundOpaque:C.selectionInactiveBackgroundOpaque,be=Ee.rgba>>8&16777215,ve=50331648,de=!0,C.selectionForeground&&(Be=50331648,_e=C.selectionForeground.rgba>>8&16777215,Ae=C.selectionForeground)),de&&J.push("xterm-decoration-top"),ve){case 16777216:case 33554432:ye=C.ansi[be],J.push(`xterm-bg-${be}`);break;case 50331648:ye=c.channels.toColor(be>>16,be>>8&255,255&be),this._addStyle(M,`background-color:#${p((be>>>0).toString(16),"0",6)}`);break;default:Oe?(ye=C.foreground,J.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):ye=C.background}switch(Ee||ee.isDim()&&(Ee=c.color.multiplyOpacity(ye,.5)),Be){case 16777216:case 33554432:ee.isBold()&&_e<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(_e+=8),this._applyMinimumContrast(M,ye,C.ansi[_e],ee,Ee,void 0)||J.push(`xterm-fg-${_e}`);break;case 50331648:const ie=c.channels.toColor(_e>>16&255,_e>>8&255,255&_e);this._applyMinimumContrast(M,ye,ie,ee,Ee,Ae)||this._addStyle(M,`color:#${p(_e.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,ye,C.foreground,ee,Ee,Ae)||Oe&&J.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}J.length&&(M.className=J.join(" "),J.length=0),Me||te||we?M.textContent=U:H++,N!==this.defaultSpacing&&(M.style.letterSpacing=`${N}px`),q.push(M),re=fe}return M&&H&&(M.textContent=U),q}_applyMinimumContrast(v,S,_,y,D,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,e.treatGlyphAsBackgroundColor)(y.getCode()))return!1;const T=this._getContrastCache(y);let B;if(D||A||(B=T.getColor(S.rgba,_.rgba)),B===void 0){const W=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);B=c.color.ensureContrastRatio(D||S,A||_,W),T.setColor((D||S).rgba,(A||_).rgba,B??null)}return!!B&&(this._addStyle(v,`color:${B.css}`),!0)}_getContrastCache(v){return v.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(v,S){v.setAttribute("style",`${v.getAttribute("style")||""}${S};`)}_isCellInSelection(v,S){const _=this._selectionStart,y=this._selectionEnd;return!(!_||!y)&&(this._columnSelectMode?_[0]<=y[0]?v>=_[0]&&S>=_[1]&&v<y[0]&&S<=y[1]:v<_[0]&&S>=_[1]&&v>=y[0]&&S<=y[1]:S>_[1]&&S<y[1]||_[1]===y[1]&&S===_[1]&&v>=_[0]&&v<y[0]||_[1]<y[1]&&S===y[1]&&v<y[0]||_[1]<y[1]&&S===_[1]&&v>=_[0])}};function p(v,S,_){for(;v.length<_;)v=S+v;return v}i.DomRendererRowFactory=h=a([d(1,t.ICharacterJoinerService),d(2,g.IOptionsService),d(3,t.ICoreBrowserService),d(4,g.ICoreService),d(5,g.IDecorationService),d(6,t.IThemeService)],h)},2550:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=o.createElement("span");d.classList.add("xterm-char-measure-element");const n=o.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold";const l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontStyle="italic";const u=o.createElement("span");u.classList.add("xterm-char-measure-element"),u.style.fontWeight="bold",u.style.fontStyle="italic",this._measureElements=[d,n,l,u],this._container.appendChild(d),this._container.appendChild(n),this._container.appendChild(l),this._container.appendChild(u),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,d,n){o===this._font&&a===this._fontSize&&d===this._weight&&n===this._weightBold||(this._font=o,this._fontSize=a,this._weight=d,this._weightBold=n,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${d}`,this._measureElements[1].style.fontWeight=`${n}`,this._measureElements[2].style.fontWeight=`${d}`,this._measureElements[3].style.fontWeight=`${n}`,this.clear())}get(o,a,d){let n=0;if(!a&&!d&&o.length===1&&(n=o.charCodeAt(0))<256){if(this._flat[n]!==-9999)return this._flat[n];const g=this._measure(o,0);return g>0&&(this._flat[n]=g),g}let l=o;a&&(l+="B"),d&&(l+="I");let u=this._holey.get(l);if(u===void 0){let g=0;a&&(g|=1),d&&(g|=2),u=this._measure(o,g),u>0&&this._holey.set(l,u)}return u}_measure(o,a){const d=this._measureElements[a];return d.textContent=o.repeat(32),d.offsetWidth/32}}},2223:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const a=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(w,i)=>{function o(d){return 57508<=d&&d<=57558}function a(d){return d>=128512&&d<=128591||d>=127744&&d<=128511||d>=128640&&d<=128767||d>=9728&&d<=9983||d>=9984&&d<=10175||d>=65024&&d<=65039||d>=129280&&d<=129535||d>=127462&&d<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},i.isEmoji=a,i.allowRescaling=function(d,n,l,u){return n===1&&l>Math.ceil(1.5*u)&&d!==void 0&&d>255&&!a(d)&&!o(d)&&!function(g){return 57344<=g&&g<=63743}(d)},i.treatGlyphAsBackgroundColor=function(d){return o(d)||function(n){return 9472<=n&&n<=9631}(d)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(d,n,l=0){return(d-(2*Math.round(n)-l))%(2*Math.round(n))}},6052:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(d,n,l,u=!1){if(this.selectionStart=n,this.selectionEnd=l,!n||!l||n[0]===l[0]&&n[1]===l[1])return void this.clear();const g=d.buffers.active.ydisp,c=n[1]-g,t=l[1]-g,s=Math.max(c,0),e=Math.min(t,d.rows-1);s>=d.rows||e<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=u,this.viewportStartRow=c,this.viewportEndRow=t,this.viewportCappedStartRow=s,this.viewportCappedEndRow=e,this.startCol=n[0],this.endCol=l[0])}isCellSelected(d,n,l){return!!this.hasSelection&&(l-=d.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?n>=this.startCol&&l>=this.viewportCappedStartRow&&n<this.endCol&&l<=this.viewportCappedEndRow:n<this.startCol&&l>=this.viewportCappedStartRow&&n>=this.endCol&&l<=this.viewportCappedEndRow:l>this.viewportStartRow&&l<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&l===this.viewportStartRow&&n>=this.startCol&&n<this.endCol||this.viewportStartRow<this.viewportEndRow&&l===this.viewportEndRow&&n<this.endCol||this.viewportStartRow<this.viewportEndRow&&l===this.viewportStartRow&&n>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(w,i,o){var a=this&&this.__decorate||function(e,r,h,p){var v,S=arguments.length,_=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(e,r,h,p);else for(var y=e.length-1;y>=0;y--)(v=e[y])&&(_=(S<3?v(_):S>3?v(r,h,_):v(r,h))||_);return S>3&&_&&Object.defineProperty(r,h,_),_},d=this&&this.__param||function(e,r){return function(h,p){r(h,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const n=o(2585),l=o(8460),u=o(844);let g=i.CharSizeService=class extends u.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,r,h){super(),this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=this.register(new l.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new s(this._optionsService))}catch{this._measureStrategy=this.register(new t(e,r,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};i.CharSizeService=g=a([d(2,n.IOptionsService)],g);class c extends u.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(r,h){r!==void 0&&r>0&&h!==void 0&&h>0&&(this._result.width=r,this._result.height=h)}}class t extends c{constructor(r,h,p){super(),this._document=r,this._parentElement=h,this._optionsService=p,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class s extends c{constructor(r){super(),this._optionsService=r,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const h=this._ctx.measureText("W");if(!("width"in h&&"fontBoundingBoxAscent"in h&&"fontBoundingBoxDescent"in h))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const r=this._ctx.measureText("W");return this._validateAndSet(r.width,r.fontBoundingBoxAscent+r.fontBoundingBoxDescent),this._result}}},4269:function(w,i,o){var a=this&&this.__decorate||function(s,e,r,h){var p,v=arguments.length,S=v<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,r):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(s,e,r,h);else for(var _=s.length-1;_>=0;_--)(p=s[_])&&(S=(v<3?p(S):v>3?p(e,r,S):p(e,r))||S);return v>3&&S&&Object.defineProperty(e,r,S),S},d=this&&this.__param||function(s,e){return function(r,h){e(r,h,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const n=o(3734),l=o(643),u=o(511),g=o(2585);class c extends n.AttributeData{constructor(e,r,h){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=r,this._width=h}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=c;let t=i.CharacterJoinerService=class hr{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}register(e){const r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id}deregister(e){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];const h=[],p=r.translateToString(!0);let v=0,S=0,_=0,y=r.getFg(0),D=r.getBg(0);for(let A=0;A<r.getTrimmedLength();A++)if(r.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==D){if(A-v>1){const T=this._getJoinedRanges(p,_,S,r,v);for(let B=0;B<T.length;B++)h.push(T[B])}v=A,_=S,y=this._workCell.fg,D=this._workCell.bg}S+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const A=this._getJoinedRanges(p,_,S,r,v);for(let T=0;T<A.length;T++)h.push(A[T])}return h}_getJoinedRanges(e,r,h,p,v){const S=e.substring(r,h);let _=[];try{_=this._characterJoiners[0].handler(S)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{const D=this._characterJoiners[y].handler(S);for(let A=0;A<D.length;A++)hr._mergeRanges(_,D[A])}catch(D){console.error(D)}return this._stringRangesToCellRanges(_,p,v),_}_stringRangesToCellRanges(e,r,h){let p=0,v=!1,S=0,_=e[p];if(_){for(let y=h;y<this._bufferService.cols;y++){const D=r.getWidth(y),A=r.getString(y).length||l.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!v&&_[0]<=S&&(_[0]=y,v=!0),_[1]<=S){if(_[1]=y,_=e[++p],!_)break;_[0]<=S?(_[0]=y,v=!0):v=!1}S+=A}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(e,r){let h=!1;for(let p=0;p<e.length;p++){const v=e[p];if(h){if(r[1]<=v[0])return e[p-1][1]=r[1],e;if(r[1]<=v[1])return e[p-1][1]=Math.max(r[1],v[1]),e.splice(p,1),e;e.splice(p,1),p--}else{if(r[1]<=v[0])return e.splice(p,0,r),e;if(r[1]<=v[1])return v[0]=Math.min(r[0],v[0]),e;r[0]<v[1]&&(v[0]=Math.min(r[0],v[0]),h=!0)}}return h?e[e.length-1][1]=r[1]:e.push(r),e}};i.CharacterJoinerService=t=a([d(0,g.IBufferService)],t)},5114:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const a=o(844),d=o(8460),n=o(3656);class l extends a.Disposable{constructor(c,t,s){super(),this._textarea=c,this._window=t,this.mainDocument=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new u(this._window),this._onDprChange=this.register(new d.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new d.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(e=>this._screenDprMonitor.setWindow(e))),this.register((0,d.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(c){this._window!==c&&(this._window=c,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=l;class u extends a.Disposable{constructor(c){super(),this._parentWindow=c,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new d.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)(()=>this.clearListener()))}setWindow(c){this._parentWindow=c,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,n.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var c;this._outerListener&&((c=this._resolutionMediaMatchList)==null||c.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const a=o(844);class d extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(l){return this.linkProviders.push(l),{dispose:()=>{const u=this.linkProviders.indexOf(l);u!==-1&&this.linkProviders.splice(u,1)}}}}i.LinkProviderService=d},8934:function(w,i,o){var a=this&&this.__decorate||function(g,c,t,s){var e,r=arguments.length,h=r<3?c:s===null?s=Object.getOwnPropertyDescriptor(c,t):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(g,c,t,s);else for(var p=g.length-1;p>=0;p--)(e=g[p])&&(h=(r<3?e(h):r>3?e(c,t,h):e(c,t))||h);return r>3&&h&&Object.defineProperty(c,t,h),h},d=this&&this.__param||function(g,c){return function(t,s){c(t,s,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const n=o(4725),l=o(9806);let u=i.MouseService=class{constructor(g,c){this._renderService=g,this._charSizeService=c}getCoords(g,c,t,s,e){return(0,l.getCoords)(window,g,c,t,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,e)}getMouseReportCoords(g,c){const t=(0,l.getCoordsRelativeToElement)(window,g,c);if(this._charSizeService.hasValidSize)return t[0]=Math.min(Math.max(t[0],0),this._renderService.dimensions.css.canvas.width-1),t[1]=Math.min(Math.max(t[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};i.MouseService=u=a([d(0,n.IRenderService),d(1,n.ICharSizeService)],u)},3230:function(w,i,o){var a=this&&this.__decorate||function(e,r,h,p){var v,S=arguments.length,_=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(e,r,h,p);else for(var y=e.length-1;y>=0;y--)(v=e[y])&&(_=(S<3?v(_):S>3?v(r,h,_):v(r,h))||_);return S>3&&_&&Object.defineProperty(r,h,_),_},d=this&&this.__param||function(e,r){return function(h,p){r(h,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const n=o(6193),l=o(4725),u=o(8460),g=o(844),c=o(7226),t=o(2585);let s=i.RenderService=class extends g.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,r,h,p,v,S,_,y){super(),this._rowCount=e,this._charSizeService=p,this._renderer=this.register(new g.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._observerDisposable=this.register(new g.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new u.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new u.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new u.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new u.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new n.RenderDebouncer((D,A)=>this._renderRows(D,A),_),this.register(this._renderDebouncer),this.register(_.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)==null?void 0:D.clear()})),this.register(h.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(h.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(h.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register(y.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(_.window,r),this.register(_.onWindowChange(D=>this._registerIntersectionObserver(D,r)))}_registerIntersectionObserver(e,r){if("IntersectionObserver"in e){const h=new e.IntersectionObserver(p=>this._handleIntersectionChange(p[p.length-1]),{threshold:0});h.observe(r),this._observerDisposable.value=(0,g.toDisposable)(()=>h.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,r,h=!1){this._isPaused?this._needsFullRefresh=!0:(h||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,r,this._rowCount))}_renderRows(e,r){this._renderer.value&&(e=Math.min(e,this._rowCount-1),r=Math.min(r,this._rowCount-1),this._renderer.value.renderRows(e,r),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:r}),this._onRender.fire({start:e,end:r}),this._isNextRenderRedrawOnly=!0)}resize(e,r){this._rowCount=r,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(r=>this.refreshRows(r.start,r.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,r;this._renderer.value&&((r=(e=this._renderer.value).clearTextureAtlas)==null||r.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,r){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var h;return(h=this._renderer.value)==null?void 0:h.handleResize(e,r)}):this._renderer.value.handleResize(e,r),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,r,h){var p;this._selectionState.start=e,this._selectionState.end=r,this._selectionState.columnSelectMode=h,(p=this._renderer.value)==null||p.handleSelectionChanged(e,r,h)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};i.RenderService=s=a([d(2,t.IOptionsService),d(3,l.ICharSizeService),d(4,t.IDecorationService),d(5,t.IBufferService),d(6,l.ICoreBrowserService),d(7,l.IThemeService)],s)},9312:function(w,i,o){var a=this&&this.__decorate||function(_,y,D,A){var T,B=arguments.length,W=B<3?y:A===null?A=Object.getOwnPropertyDescriptor(y,D):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(_,y,D,A);else for(var $=_.length-1;$>=0;$--)(T=_[$])&&(W=(B<3?T(W):B>3?T(y,D,W):T(y,D))||W);return B>3&&W&&Object.defineProperty(y,D,W),W},d=this&&this.__param||function(_,y){return function(D,A){y(D,A,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const n=o(9806),l=o(9504),u=o(456),g=o(4725),c=o(8460),t=o(844),s=o(6114),e=o(4841),r=o(511),h=o(2585),p=" ",v=new RegExp(p,"g");let S=i.SelectionService=class extends t.Disposable{constructor(_,y,D,A,T,B,W,$,K){super(),this._element=_,this._screenElement=y,this._linkifier=D,this._bufferService=A,this._coreService=T,this._mouseService=B,this._optionsService=W,this._renderService=$,this._coreBrowserService=K,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new r.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=q=>this._handleMouseMove(q),this._mouseUpListener=q=>this._handleMouseUp(q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(q=>this._handleTrim(q)),this.register(this._bufferService.buffers.onBufferActivate(q=>this._handleBufferActivate(q))),this.enable(),this._model=new u.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,t.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const _=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!_||!y||_[0]===y[0]&&_[1]===y[1])}get selectionText(){const _=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!_||!y)return"";const D=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(_[0]===y[0])return"";const T=_[0]<y[0]?_[0]:y[0],B=_[0]<y[0]?y[0]:_[0];for(let W=_[1];W<=y[1];W++){const $=D.translateBufferLineToString(W,!0,T,B);A.push($)}}else{const T=_[1]===y[1]?y[0]:void 0;A.push(D.translateBufferLineToString(_[1],!0,_[0],T));for(let B=_[1]+1;B<=y[1]-1;B++){const W=D.lines.get(B),$=D.translateBufferLineToString(B,!0);W!=null&&W.isWrapped?A[A.length-1]+=$:A.push($)}if(_[1]!==y[1]){const B=D.lines.get(y[1]),W=D.translateBufferLineToString(y[1],!0,0,y[0]);B&&B.isWrapped?A[A.length-1]+=W:A.push(W)}}return A.map(T=>T.replace(v," ")).join(s.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),s.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){const y=this._getMouseBufferCoords(_),D=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(D&&A&&y)&&this._areCoordsInSelection(y,D,A)}isCellInSelection(_,y){const D=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!D||!A)&&this._areCoordsInSelection([_,y],D,A)}_areCoordsInSelection(_,y,D){return _[1]>y[1]&&_[1]<D[1]||y[1]===D[1]&&_[1]===y[1]&&_[0]>=y[0]&&_[0]<D[0]||y[1]<D[1]&&_[1]===D[1]&&_[0]<D[0]||y[1]<D[1]&&_[1]===y[1]&&_[0]>=y[0]}_selectWordAtCursor(_,y){var T,B;const D=(B=(T=this._linkifier.currentLink)==null?void 0:T.link)==null?void 0:B.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,e.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const A=this._getMouseBufferCoords(_);return!!A&&(this._selectWordAt(A,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,y){this._model.clearSelection(),_=Math.max(_,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){const y=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(_){let y=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=D?0:(y>D&&(y-=D),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(_){return s.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){const y=this._getMouseBufferCoords(_);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(_){return _.altKey&&!(s.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;const y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const A=D.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){const y=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const A=(0,l.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const _=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,D=!(!_||!y||_[0]===y[0]&&_[1]===y[1]);D?_&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,y,D)):this._oldHasSelection&&this._fireOnSelectionChange(_,y,D)}_fireOnSelectionChange(_,y,D){this._oldSelectionStart=_,this._oldSelectionEnd=y,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(_,y){let D=y;for(let A=0;y>=A;A++){const T=_.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&y!==A&&(D+=T-1)}return D}setSelection(_,y,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,y],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,y,D=!0,A=!0){if(_[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,B=T.lines.get(_[1]);if(!B)return;const W=T.translateBufferLineToString(_[1],!1);let $=this._convertViewportColToCharacterIndex(B,_[0]),K=$;const q=_[0]-$;let V=0,C=0,M=0,P=0;if(W.charAt($)===" "){for(;$>0&&W.charAt($-1)===" ";)$--;for(;K<W.length&&W.charAt(K+1)===" ";)K++}else{let G=_[0],Q=_[0];B.getWidth(G)===0&&(V++,G--),B.getWidth(Q)===2&&(C++,Q++);const Z=B.getString(Q).length;for(Z>1&&(P+=Z-1,K+=Z-1);G>0&&$>0&&!this._isCharWordSeparator(B.loadCell(G-1,this._workCell));){B.loadCell(G-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,G--):I>1&&(M+=I-1,$-=I-1),$--,G--}for(;Q<B.length&&K+1<W.length&&!this._isCharWordSeparator(B.loadCell(Q+1,this._workCell));){B.loadCell(Q+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(C++,Q++):I>1&&(P+=I-1,K+=I-1),K++,Q++}}K++;let H=$+q-V+M,U=Math.min(this._bufferService.cols,K-$+V+C-M-P);if(y||W.slice($,K).trim()!==""){if(D&&H===0&&B.getCodePoint(0)!==32){const G=T.lines.get(_[1]-1);if(G&&B.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(Q){const Z=this._bufferService.cols-Q.start;H-=Z,U+=Z}}}if(A&&H+U===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const G=T.lines.get(_[1]+1);if(G!=null&&G.isWrapped&&G.getCodePoint(0)!==32){const Q=this._getWordAt([0,_[1]+1],!1,!1,!0);Q&&(U+=Q.length)}}return{start:H,length:U}}}_selectWordAt(_,y){const D=this._getWordAt(_,y);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[D.start,_[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(_){const y=this._getWordAt(_,!0);if(y){let D=_[1];for(;y.start<0;)y.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,D]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){const y=this._bufferService.buffer.getWrappedRangeForLine(_),D={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,e.getRangeLength)(D,this._bufferService.cols)}};i.SelectionService=S=a([d(3,h.IBufferService),d(4,h.ICoreService),d(5,g.IMouseService),d(6,h.IOptionsService),d(7,g.IRenderService),d(8,g.ICoreBrowserService)],S)},4725:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const a=o(8343);i.ICharSizeService=(0,a.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),i.IMouseService=(0,a.createDecorator)("MouseService"),i.IRenderService=(0,a.createDecorator)("RenderService"),i.ISelectionService=(0,a.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,a.createDecorator)("ThemeService"),i.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(w,i,o){var a=this&&this.__decorate||function(S,_,y,D){var A,T=arguments.length,B=T<3?_:D===null?D=Object.getOwnPropertyDescriptor(_,y):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(S,_,y,D);else for(var W=S.length-1;W>=0;W--)(A=S[W])&&(B=(T<3?A(B):T>3?A(_,y,B):A(_,y))||B);return T>3&&B&&Object.defineProperty(_,y,B),B},d=this&&this.__param||function(S,_){return function(y,D){_(y,D,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const n=o(7239),l=o(8055),u=o(8460),g=o(844),c=o(2585),t=l.css.toColor("#ffffff"),s=l.css.toColor("#000000"),e=l.css.toColor("#ffffff"),r=l.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const S=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let y=0;y<216;y++){const D=_[y/36%6|0],A=_[y/6%6|0],T=_[y%6];S.push({css:l.channels.toCss(D,A,T),rgba:l.channels.toRgba(D,A,T)})}for(let y=0;y<24;y++){const D=8+10*y;S.push({css:l.channels.toCss(D,D,D),rgba:l.channels.toRgba(D,D,D)})}return S})());let p=i.ThemeService=class extends g.Disposable{get colors(){return this._colors}constructor(S){super(),this._optionsService=S,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new u.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:s,cursor:e,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:l.color.blend(s,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:l.color.blend(s,h),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(S={}){const _=this._colors;if(_.foreground=v(S.foreground,t),_.background=v(S.background,s),_.cursor=v(S.cursor,e),_.cursorAccent=v(S.cursorAccent,r),_.selectionBackgroundTransparent=v(S.selectionBackground,h),_.selectionBackgroundOpaque=l.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=v(S.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=l.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=S.selectionForeground?v(S.selectionForeground,l.NULL_COLOR):void 0,_.selectionForeground===l.NULL_COLOR&&(_.selectionForeground=void 0),l.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=l.color.opacity(_.selectionBackgroundTransparent,.3)),l.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=l.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=i.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=v(S.black,i.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=v(S.red,i.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=v(S.green,i.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=v(S.yellow,i.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=v(S.blue,i.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=v(S.magenta,i.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=v(S.cyan,i.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=v(S.white,i.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=v(S.brightBlack,i.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=v(S.brightRed,i.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=v(S.brightGreen,i.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=v(S.brightYellow,i.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=v(S.brightBlue,i.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=v(S.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=v(S.brightCyan,i.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=v(S.brightWhite,i.DEFAULT_ANSI_COLORS[15]),S.extendedAnsi){const y=Math.min(_.ansi.length-16,S.extendedAnsi.length);for(let D=0;D<y;D++)_.ansi[D+16]=v(S.extendedAnsi[D],i.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(S){this._restoreColor(S),this._onChangeColors.fire(this.colors)}_restoreColor(S){if(S!==void 0)switch(S){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[S]=this._restoreColors.ansi[S]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(S){S(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(S,_){if(S!==void 0)try{return l.css.toColor(S)}catch{}return _}i.ThemeService=p=a([d(0,c.IOptionsService)],p)},6349:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const a=o(8460),d=o(844);class n extends d.Disposable{constructor(u){super(),this._maxLength=u,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(u){if(this._maxLength===u)return;const g=new Array(u);for(let c=0;c<Math.min(u,this.length);c++)g[c]=this._array[this._getCyclicIndex(c)];this._array=g,this._maxLength=u,this._startIndex=0}get length(){return this._length}set length(u){if(u>this._length)for(let g=this._length;g<u;g++)this._array[g]=void 0;this._length=u}get(u){return this._array[this._getCyclicIndex(u)]}set(u,g){this._array[this._getCyclicIndex(u)]=g}push(u){this._array[this._getCyclicIndex(this._length)]=u,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(u,g,...c){if(g){for(let t=u;t<this._length-g;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+g)];this._length-=g,this.onDeleteEmitter.fire({index:u,amount:g})}for(let t=this._length-1;t>=u;t--)this._array[this._getCyclicIndex(t+c.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<c.length;t++)this._array[this._getCyclicIndex(u+t)]=c[t];if(c.length&&this.onInsertEmitter.fire({index:u,amount:c.length}),this._length+c.length>this._maxLength){const t=this._length+c.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=c.length}trimStart(u){u>this._length&&(u=this._length),this._startIndex+=u,this._length-=u,this.onTrimEmitter.fire(u)}shiftElements(u,g,c){if(!(g<=0)){if(u<0||u>=this._length)throw new Error("start argument out of range");if(u+c<0)throw new Error("Cannot shift elements in list beyond index 0");if(c>0){for(let s=g-1;s>=0;s--)this.set(u+s+c,this.get(u+s));const t=u+g+c-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<g;t++)this.set(u+t+c,this.get(u+t))}}_getCyclicIndex(u){return(this._startIndex+u)%this._maxLength}}i.CircularList=n},1439:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(a,d=5){if(typeof a!="object")return a;const n=Array.isArray(a)?[]:{};for(const l in a)n[l]=d<=1?a[l]:a[l]&&o(a[l],d-1);return n}},8055:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,a=0,d=0,n=0;var l,u,g,c,t;function s(r){const h=r.toString(16);return h.length<2?"0"+h:h}function e(r,h){return r<h?(h+.05)/(r+.05):(r+.05)/(h+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(h,p,v,S){return S!==void 0?`#${s(h)}${s(p)}${s(v)}${s(S)}`:`#${s(h)}${s(p)}${s(v)}`},r.toRgba=function(h,p,v,S=255){return(h<<24|p<<16|v<<8|S)>>>0},r.toColor=function(h,p,v,S){return{css:r.toCss(h,p,v,S),rgba:r.toRgba(h,p,v,S)}}}(l||(i.channels=l={})),function(r){function h(p,v){return n=Math.round(255*v),[o,a,d]=t.toChannels(p.rgba),{css:l.toCss(o,a,d,n),rgba:l.toRgba(o,a,d,n)}}r.blend=function(p,v){if(n=(255&v.rgba)/255,n===1)return{css:v.css,rgba:v.rgba};const S=v.rgba>>24&255,_=v.rgba>>16&255,y=v.rgba>>8&255,D=p.rgba>>24&255,A=p.rgba>>16&255,T=p.rgba>>8&255;return o=D+Math.round((S-D)*n),a=A+Math.round((_-A)*n),d=T+Math.round((y-T)*n),{css:l.toCss(o,a,d),rgba:l.toRgba(o,a,d)}},r.isOpaque=function(p){return(255&p.rgba)==255},r.ensureContrastRatio=function(p,v,S){const _=t.ensureContrastRatio(p.rgba,v.rgba,S);if(_)return l.toColor(_>>24&255,_>>16&255,_>>8&255)},r.opaque=function(p){const v=(255|p.rgba)>>>0;return[o,a,d]=t.toChannels(v),{css:l.toCss(o,a,d),rgba:v}},r.opacity=h,r.multiplyOpacity=function(p,v){return n=255&p.rgba,h(p,n*v/255)},r.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}}(u||(i.color=u={})),function(r){let h,p;try{const v=document.createElement("canvas");v.width=1,v.height=1;const S=v.getContext("2d",{willReadFrequently:!0});S&&(h=S,h.globalCompositeOperation="copy",p=h.createLinearGradient(0,0,1,1))}catch{}r.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),a=parseInt(v.slice(2,3).repeat(2),16),d=parseInt(v.slice(3,4).repeat(2),16),l.toColor(o,a,d);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),a=parseInt(v.slice(2,3).repeat(2),16),d=parseInt(v.slice(3,4).repeat(2),16),n=parseInt(v.slice(4,5).repeat(2),16),l.toColor(o,a,d,n);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const S=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return o=parseInt(S[1]),a=parseInt(S[2]),d=parseInt(S[3]),n=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),l.toColor(o,a,d,n);if(!h||!p)throw new Error("css.toColor: Unsupported css format");if(h.fillStyle=p,h.fillStyle=v,typeof h.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(h.fillRect(0,0,1,1),[o,a,d,n]=h.getImageData(0,0,1,1).data,n!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(o,a,d,n),css:v}}}(g||(i.css=g={})),function(r){function h(p,v,S){const _=p/255,y=v/255,D=S/255;return .2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}r.relativeLuminance=function(p){return h(p>>16&255,p>>8&255,255&p)},r.relativeLuminance2=h}(c||(i.rgb=c={})),function(r){function h(v,S,_){const y=v>>24&255,D=v>>16&255,A=v>>8&255;let T=S>>24&255,B=S>>16&255,W=S>>8&255,$=e(c.relativeLuminance2(T,B,W),c.relativeLuminance2(y,D,A));for(;$<_&&(T>0||B>0||W>0);)T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),W-=Math.max(0,Math.ceil(.1*W)),$=e(c.relativeLuminance2(T,B,W),c.relativeLuminance2(y,D,A));return(T<<24|B<<16|W<<8|255)>>>0}function p(v,S,_){const y=v>>24&255,D=v>>16&255,A=v>>8&255;let T=S>>24&255,B=S>>16&255,W=S>>8&255,$=e(c.relativeLuminance2(T,B,W),c.relativeLuminance2(y,D,A));for(;$<_&&(T<255||B<255||W<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),W=Math.min(255,W+Math.ceil(.1*(255-W))),$=e(c.relativeLuminance2(T,B,W),c.relativeLuminance2(y,D,A));return(T<<24|B<<16|W<<8|255)>>>0}r.blend=function(v,S){if(n=(255&S)/255,n===1)return S;const _=S>>24&255,y=S>>16&255,D=S>>8&255,A=v>>24&255,T=v>>16&255,B=v>>8&255;return o=A+Math.round((_-A)*n),a=T+Math.round((y-T)*n),d=B+Math.round((D-B)*n),l.toRgba(o,a,d)},r.ensureContrastRatio=function(v,S,_){const y=c.relativeLuminance(v>>8),D=c.relativeLuminance(S>>8);if(e(y,D)<_){if(D<y){const B=h(v,S,_),W=e(y,c.relativeLuminance(B>>8));if(W<_){const $=p(v,S,_);return W>e(y,c.relativeLuminance($>>8))?B:$}return B}const A=p(v,S,_),T=e(y,c.relativeLuminance(A>>8));if(T<_){const B=h(v,S,_);return T>e(y,c.relativeLuminance(B>>8))?A:B}return A}},r.reduceLuminance=h,r.increaseLuminance=p,r.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(t||(i.rgba=t={})),i.toPaddedHex=s,i.contrastRatio=e},8969:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const a=o(844),d=o(2585),n=o(4348),l=o(7866),u=o(744),g=o(7302),c=o(6975),t=o(8460),s=o(1753),e=o(1480),r=o(7994),h=o(9282),p=o(5435),v=o(5981),S=o(2660);let _=!1;class y extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(A=>{var T;(T=this._onScrollApi)==null||T.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const T in A)this.optionsService.options[T]=A[T]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new g.OptionsService(A)),this._instantiationService.setService(d.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(u.BufferService)),this._instantiationService.setService(d.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(l.LogService)),this._instantiationService.setService(d.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(d.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(s.CoreMouseService)),this._instantiationService.setService(d.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(e.UnicodeService)),this._instantiationService.setService(d.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(d.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(S.OscLinkService),this._instantiationService.setService(d.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((T,B)=>this._inputHandler.parse(T,B))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,T){this._writeBuffer.write(A,T)}writeSync(A,T){this._logService.logLevel<=d.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(A,T)}input(A,T=!0){this.coreService.triggerDataEvent(A,T)}resize(A,T){isNaN(A)||isNaN(T)||(A=Math.max(A,u.MINIMUM_COLS),T=Math.max(T,u.MINIMUM_ROWS),this._bufferService.resize(A,T))}scroll(A,T=!1){this._bufferService.scroll(A,T)}scrollLines(A,T,B){this._bufferService.scrollLines(A,T,B)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const T=A-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(A,T){return this._inputHandler.registerEscHandler(A,T)}registerDcsHandler(A,T){return this._inputHandler.registerDcsHandler(A,T)}registerCsiHandler(A,T){return this._inputHandler.registerCsiHandler(A,T)}registerOscHandler(A,T){return this._inputHandler.registerOscHandler(A,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?A=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(h.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,h.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(const T of A)T.dispose()})}}}i.CoreTerminal=y},8460:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){const d=[];for(let n=0;n<this._listeners.length;n++)d.push(this._listeners[n]);for(let n=0;n<d.length;n++)d[n].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,a){return o(d=>a.fire(d))},i.runAndSubscribe=function(o,a){return a(void 0),o(d=>a(d))}},5435:function(w,i,o){var a=this&&this.__decorate||function(V,C,M,P){var H,U=arguments.length,G=U<3?C:P===null?P=Object.getOwnPropertyDescriptor(C,M):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(V,C,M,P);else for(var Q=V.length-1;Q>=0;Q--)(H=V[Q])&&(G=(U<3?H(G):U>3?H(C,M,G):H(C,M))||G);return U>3&&G&&Object.defineProperty(C,M,G),G},d=this&&this.__param||function(V,C){return function(M,P){C(M,P,V)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const n=o(2584),l=o(7116),u=o(2015),g=o(844),c=o(482),t=o(8437),s=o(8460),e=o(643),r=o(511),h=o(3734),p=o(2585),v=o(1480),S=o(6242),_=o(6351),y=o(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},A=131072;function T(V,C){if(V>24)return C.setWinLines||!1;switch(V){case 1:return!!C.restoreWin;case 2:return!!C.minimizeWin;case 3:return!!C.setWinPosition;case 4:return!!C.setWinSizePixels;case 5:return!!C.raiseWin;case 6:return!!C.lowerWin;case 7:return!!C.refreshWin;case 8:return!!C.setWinSizeChars;case 9:return!!C.maximizeWin;case 10:return!!C.fullscreenWin;case 11:return!!C.getWinState;case 13:return!!C.getWinPosition;case 14:return!!C.getWinSizePixels;case 15:return!!C.getScreenSizePixels;case 16:return!!C.getCellSizePixels;case 18:return!!C.getWinSizeChars;case 19:return!!C.getScreenSizeChars;case 20:return!!C.getIconTitle;case 21:return!!C.getWinTitle;case 22:return!!C.pushTitle;case 23:return!!C.popTitle;case 24:return!!C.setWinLines}return!1}var B;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(B||(i.WindowsOptionsReportType=B={}));let W=0;class $ extends g.Disposable{getAttrData(){return this._curAttrData}constructor(C,M,P,H,U,G,Q,Z,I=new u.EscapeSequenceParser){super(),this._bufferService=C,this._charsetService=M,this._coreService=P,this._logService=H,this._optionsService=U,this._oscLinkService=G,this._coreMouseService=Q,this._unicodeService=Z,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new s.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new s.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new s.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new s.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new s.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new s.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new s.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new s.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new s.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new s.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new s.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new K(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,j)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:j.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,j,N)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:j,data:N})}),this._parser.setDcsHandlerFallback((E,j,N)=>{j==="HOOK"&&(N=N.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:j,payload:N})}),this._parser.setPrintHandler((E,j,N)=>this.print(E,j,N)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(n.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(n.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(n.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(n.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(n.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(n.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(n.C1.IND,()=>this.index()),this._parser.setExecuteHandler(n.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(n.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new S.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new S.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new S.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new S.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new S.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new S.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new S.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new S.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new S.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new S.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new S.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const E in l.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler((E,j)=>this.requestStatusString(E,j)))}_preserveStack(C,M,P,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=C,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=P,this._parseStack.position=H}_logSlowResolvingAsync(C){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([C,new Promise((M,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(C,M){let P,H=this._activeBuffer.x,U=this._activeBuffer.y,G=0;const Q=this._parseStack.paused;if(Q){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(P),P;H=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,C.length>A&&(G=this._parseStack.position+A)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof C=="string"?` "${C}"`:` "${Array.prototype.map.call(C,E=>String.fromCharCode(E)).join("")}"`),typeof C=="string"?C.split("").map(E=>E.charCodeAt(0)):C),this._parseBuffer.length<C.length&&this._parseBuffer.length<A&&(this._parseBuffer=new Uint32Array(Math.min(C.length,A))),Q||this._dirtyRowTracker.clearRange(),C.length>A)for(let E=G;E<C.length;E+=A){const j=E+A<C.length?E+A:C.length,N=typeof C=="string"?this._stringDecoder.decode(C.substring(E,j),this._parseBuffer):this._utf8Decoder.decode(C.subarray(E,j),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,N))return this._preserveStack(H,U,N,E),this._logSlowResolvingAsync(P),P}else if(!Q){const E=typeof C=="string"?this._stringDecoder.decode(C,this._parseBuffer):this._utf8Decoder.decode(C,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,E))return this._preserveStack(H,U,E,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===H&&this._activeBuffer.y===U||this._onCursorMove.fire();const Z=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(Z,this._bufferService.rows-1))}print(C,M,P){let H,U;const G=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,Z=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,j=this._curAttrData;let N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-M>0&&N.getWidth(this._activeBuffer.x-1)===2&&N.setCellFromCodepoint(this._activeBuffer.x-1,0,1,j);let J=this._parser.precedingJoinState;for(let X=M;X<P;++X){if(H=C[X],H<127&&G){const fe=G[String.fromCharCode(H)];fe&&(H=fe.charCodeAt(0))}const re=this._unicodeService.charProperties(H,J);U=v.UnicodeService.extractWidth(re);const Y=v.UnicodeService.extractShouldJoin(re),te=Y?v.UnicodeService.extractWidth(J):0;if(J=re,Q&&this._onA11yChar.fire((0,c.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+U-te>Z){if(I){const fe=N;let ee=this._activeBuffer.x-te;for(this._activeBuffer.x=te,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),te>0&&N instanceof t.BufferLine&&N.copyCellsFrom(fe,ee,0,te,!1);ee<Z;)fe.setCellFromCodepoint(ee++,0,1,j)}else if(this._activeBuffer.x=Z-1,U===2)continue}if(Y&&this._activeBuffer.x){const fe=N.getWidth(this._activeBuffer.x-1)?1:2;N.addCodepointToCell(this._activeBuffer.x-fe,H,U);for(let ee=U-te;--ee>=0;)N.setCellFromCodepoint(this._activeBuffer.x++,0,0,j)}else if(E&&(N.insertCells(this._activeBuffer.x,U-te,this._activeBuffer.getNullCell(j)),N.getWidth(Z-1)===2&&N.setCellFromCodepoint(Z-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,j)),N.setCellFromCodepoint(this._activeBuffer.x++,H,U,j),U>0)for(;--U;)N.setCellFromCodepoint(this._activeBuffer.x++,0,0,j)}this._parser.precedingJoinState=J,this._activeBuffer.x<Z&&P-M>0&&N.getWidth(this._activeBuffer.x)===0&&!N.hasContent(this._activeBuffer.x)&&N.setCellFromCodepoint(this._activeBuffer.x,0,1,j),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(C,M){return C.final!=="t"||C.prefix||C.intermediates?this._parser.registerCsiHandler(C,M):this._parser.registerCsiHandler(C,P=>!T(P.params[0],this._optionsService.rawOptions.windowOptions)||M(P))}registerDcsHandler(C,M){return this._parser.registerDcsHandler(C,new _.DcsHandler(M))}registerEscHandler(C,M){return this._parser.registerEscHandler(C,M)}registerOscHandler(C,M){return this._parser.registerOscHandler(C,new S.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var C;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((C=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&C.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const C=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-C),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(C=this._bufferService.cols-1){this._activeBuffer.x=Math.min(C,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(C,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=C,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=C,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(C,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+C,this._activeBuffer.y+M)}cursorUp(C){const M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,C.params[0]||1)):this._moveCursor(0,-(C.params[0]||1)),!0}cursorDown(C){const M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,C.params[0]||1)):this._moveCursor(0,C.params[0]||1),!0}cursorForward(C){return this._moveCursor(C.params[0]||1,0),!0}cursorBackward(C){return this._moveCursor(-(C.params[0]||1),0),!0}cursorNextLine(C){return this.cursorDown(C),this._activeBuffer.x=0,!0}cursorPrecedingLine(C){return this.cursorUp(C),this._activeBuffer.x=0,!0}cursorCharAbsolute(C){return this._setCursor((C.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(C){return this._setCursor(C.length>=2?(C.params[1]||1)-1:0,(C.params[0]||1)-1),!0}charPosAbsolute(C){return this._setCursor((C.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(C){return this._moveCursor(C.params[0]||1,0),!0}linePosAbsolute(C){return this._setCursor(this._activeBuffer.x,(C.params[0]||1)-1),!0}vPositionRelative(C){return this._moveCursor(0,C.params[0]||1),!0}hVPosition(C){return this.cursorPosition(C),!0}tabClear(C){const M=C.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(C){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=C.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(C){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=C.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(C){const M=C.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(C,M,P,H=!1,U=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+C);G.replaceCells(M,P,this._activeBuffer.getNullCell(this._eraseAttrData()),U),H&&(G.isWrapped=!1)}_resetBufferLine(C,M=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+C);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+C),P.isWrapped=!1)}eraseInDisplay(C,M=!1){let P;switch(this._restrictCursor(this._bufferService.cols),C.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);P<this._bufferService.rows;P++)this._resetBufferLine(P,M);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,M);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(C,M=!1){switch(this._restrictCursor(this._bufferService.cols),C.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(C){this._restrictCursor();let M=C.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;M--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(C){this._restrictCursor();let M=C.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;M--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(C){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,C.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(C){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,C.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(C){let M=C.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(C){let M=C.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=C.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=C.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=C.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(C){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=C.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(C){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(C.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(C){const M=this._parser.precedingJoinState;if(!M)return!0;const P=C.params[0]||1,H=v.UnicodeService.extractWidth(M),U=this._activeBuffer.x-H,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(U),Q=new Uint32Array(G.length*P);let Z=0;for(let E=0;E<G.length;){const j=G.codePointAt(E)||0;Q[Z++]=j,E+=j>65535?2:1}let I=Z;for(let E=1;E<P;++E)Q.copyWithin(I,0,Z),I+=Z;return this.print(Q,0,I),!0}sendDeviceAttributesPrimary(C){return C.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(C){return C.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(C.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(C){return(this._optionsService.rawOptions.termName+"").indexOf(C)===0}setMode(C){for(let M=0;M<C.length;M++)switch(C.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(C){for(let M=0;M<C.length;M++)switch(C.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),this._charsetService.setgCharset(1,l.DEFAULT_CHARSET),this._charsetService.setgCharset(2,l.DEFAULT_CHARSET),this._charsetService.setgCharset(3,l.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(C){for(let M=0;M<C.length;M++)switch(C.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(C){for(let M=0;M<C.length;M++)switch(C.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),C.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(C,M){const P=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:U}=this._coreMouseService,G=this._coreService,{buffers:Q,cols:Z}=this._bufferService,{active:I,alt:E}=Q,j=this._optionsService.rawOptions,N=Y=>Y?1:2,J=C.params[0];return X=J,re=M?J===2?4:J===4?N(G.modes.insertMode):J===12?3:J===20?N(j.convertEol):0:J===1?N(P.applicationCursorKeys):J===3?j.windowOptions.setWinLines?Z===80?2:Z===132?1:0:0:J===6?N(P.origin):J===7?N(P.wraparound):J===8?3:J===9?N(H==="X10"):J===12?N(j.cursorBlink):J===25?N(!G.isCursorHidden):J===45?N(P.reverseWraparound):J===66?N(P.applicationKeypad):J===67?4:J===1e3?N(H==="VT200"):J===1002?N(H==="DRAG"):J===1003?N(H==="ANY"):J===1004?N(P.sendFocus):J===1005?4:J===1006?N(U==="SGR"):J===1015?4:J===1016?N(U==="SGR_PIXELS"):J===1048?1:J===47||J===1047||J===1049?N(I===E):J===2004?N(P.bracketedPasteMode):0,G.triggerDataEvent(`${n.C0.ESC}[${M?"":"?"}${X};${re}$y`),!0;var X,re}_updateAttrColor(C,M,P,H,U){return M===2?(C|=50331648,C&=-16777216,C|=h.AttributeData.fromColorRGB([P,H,U])):M===5&&(C&=-50331904,C|=33554432|255&P),C}_extractColor(C,M,P){const H=[0,0,-1,0,0,0];let U=0,G=0;do{if(H[G+U]=C.params[M+G],C.hasSubParams(M+G)){const Q=C.getSubParams(M+G);let Z=0;do H[1]===5&&(U=1),H[G+Z+1+U]=Q[Z];while(++Z<Q.length&&Z+G+1+U<H.length);break}if(H[1]===5&&G+U>=2||H[1]===2&&G+U>=5)break;H[1]&&(U=1)}while(++G+M<C.length&&G+U<H.length);for(let Q=2;Q<H.length;++Q)H[Q]===-1&&(H[Q]=0);switch(H[0]){case 38:P.fg=this._updateAttrColor(P.fg,H[1],H[3],H[4],H[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,H[1],H[3],H[4],H[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,H[1],H[3],H[4],H[5])}return G}_processUnderline(C,M){M.extended=M.extended.clone(),(!~C||C>5)&&(C=1),M.extended.underlineStyle=C,M.fg|=268435456,C===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(C){C.fg=t.DEFAULT_ATTR_DATA.fg,C.bg=t.DEFAULT_ATTR_DATA.bg,C.extended=C.extended.clone(),C.extended.underlineStyle=0,C.extended.underlineColor&=-67108864,C.updateExtended()}charAttributes(C){if(C.length===1&&C.params[0]===0)return this._processSGR0(this._curAttrData),!0;const M=C.length;let P;const H=this._curAttrData;for(let U=0;U<M;U++)P=C.params[U],P>=30&&P<=37?(H.fg&=-50331904,H.fg|=16777216|P-30):P>=40&&P<=47?(H.bg&=-50331904,H.bg|=16777216|P-40):P>=90&&P<=97?(H.fg&=-50331904,H.fg|=16777224|P-90):P>=100&&P<=107?(H.bg&=-50331904,H.bg|=16777224|P-100):P===0?this._processSGR0(H):P===1?H.fg|=134217728:P===3?H.bg|=67108864:P===4?(H.fg|=268435456,this._processUnderline(C.hasSubParams(U)?C.getSubParams(U)[0]:1,H)):P===5?H.fg|=536870912:P===7?H.fg|=67108864:P===8?H.fg|=1073741824:P===9?H.fg|=2147483648:P===2?H.bg|=134217728:P===21?this._processUnderline(2,H):P===22?(H.fg&=-134217729,H.bg&=-134217729):P===23?H.bg&=-67108865:P===24?(H.fg&=-268435457,this._processUnderline(0,H)):P===25?H.fg&=-536870913:P===27?H.fg&=-67108865:P===28?H.fg&=-1073741825:P===29?H.fg&=2147483647:P===39?(H.fg&=-67108864,H.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):P===49?(H.bg&=-67108864,H.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?U+=this._extractColor(C,U,H):P===53?H.bg|=1073741824:P===55?H.bg&=-1073741825:P===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):P===100?(H.fg&=-67108864,H.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(C){switch(C.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const M=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${M};${P}R`)}return!0}deviceStatusPrivate(C){if(C.params[0]===6){const M=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${M};${P}R`)}return!0}softReset(C){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(C){const M=C.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=M%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(C){const M=C.params[0]||1;let P;return(C.length<2||(P=C.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(C){if(!T(C.params[0],this._optionsService.rawOptions.windowOptions))return!0;const M=C.length>1?C.params[1]:0;switch(C.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(B.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(B.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(C){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(C){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(C){return this._windowTitle=C,this._onTitleChange.fire(C),!0}setIconName(C){return this._iconName=C,!0}setOrReportIndexedColor(C){const M=[],P=C.split(";");for(;P.length>1;){const H=P.shift(),U=P.shift();if(/^\d+$/.exec(H)){const G=parseInt(H);if(q(G))if(U==="?")M.push({type:0,index:G});else{const Q=(0,y.parseColor)(U);Q&&M.push({type:1,index:G,color:Q})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(C){const M=C.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(C,M){this._getCurrentLinkId()&&this._finishHyperlink();const P=C.split(":");let H;const U=P.findIndex(G=>G.startsWith("id="));return U!==-1&&(H=P[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(C,M){const P=C.split(";");for(let H=0;H<P.length&&!(M>=this._specialColors.length);++H,++M)if(P[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{const U=(0,y.parseColor)(P[H]);U&&this._onColor.fire([{type:1,index:this._specialColors[M],color:U}])}return!0}setOrReportFgColor(C){return this._setOrReportSpecialColor(C,0)}setOrReportBgColor(C){return this._setOrReportSpecialColor(C,1)}setOrReportCursorColor(C){return this._setOrReportSpecialColor(C,2)}restoreIndexedColor(C){if(!C)return this._onColor.fire([{type:2}]),!0;const M=[],P=C.split(";");for(let H=0;H<P.length;++H)if(/^\d+$/.exec(P[H])){const U=parseInt(P[H]);q(U)&&M.push({type:2,index:U})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(C){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(C){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(C){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),!0}selectCharset(C){return C.length!==2?(this.selectDefaultCharset(),!0):(C[0]==="/"||this._charsetService.setgCharset(D[C[0]],l.CHARSETS[C[1]]||l.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const C=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,C,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(C){return this._charsetService.setgLevel(C),!0}screenAlignmentPattern(){const C=new r.CellData;C.content=4194373,C.fg=this._curAttrData.fg,C.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){const P=this._activeBuffer.ybase+this._activeBuffer.y+M,H=this._activeBuffer.lines.get(P);H&&(H.fill(C),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(C,M){const P=this._bufferService.buffer,H=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${U}${n.C0.ESC}\\`),!0))(C==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:C==='"p'?'P1$r61;1"p':C==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:C==="m"?"P1$r0m":C===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(C,M){this._dirtyRowTracker.markRangeDirty(C,M)}}i.InputHandler=$;let K=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,C){V>C&&(W=V,V=C,C=W),V<this.start&&(this.start=V),C>this.end&&(this.end=C)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(V){return 0<=V&&V<256}K=a([d(0,p.IBufferService)],K)},844:(w,i)=>{function o(a){for(const d of a)d.dispose();a.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){const d=this._disposables.indexOf(a);d!==-1&&this._disposables.splice(d,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){var d;this._isDisposed||a===this._value||((d=this._value)==null||d.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){var a;this._isDisposed=!0,(a=this._value)==null||a.dispose(),this._value=void 0}},i.toDisposable=function(a){return{dispose:a}},i.disposeArray=o,i.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(d,n,l){this._data[d]||(this._data[d]={}),this._data[d][n]=l}get(d,n){return this._data[d]?this._data[d][n]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(a,d,n,l,u){this._data.get(a,d)||this._data.set(a,d,new o),this._data.get(a,d).set(n,l,u)}get(a,d,n,l){var u;return(u=this._data.get(a,d))==null?void 0:u.get(n,l)}clear(){this._data.clear()}}},6114:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,a=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const d=o.match(/Version\/(\d+)/);return d===null||d.length<2?0:parseInt(d[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),i.isIpad=a==="iPad",i.isIphone=a==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),i.isLinux=a.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;const d=this._getKey(a);if(d===void 0||(o=this._search(d),o===-1)||this._getKey(this._array[o])!==d)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===d);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,d){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do d(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let d=0,n=this._array.length-1;for(;n>=d;){let l=d+n>>1;const u=this._getKey(this._array[l]);if(u>a)n=l-1;else{if(!(u<a)){for(;l>0&&this._getKey(this._array[l-1])===a;)l--;return l}d=l+1}}return d}}},7226:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const a=o(6114);class d{constructor(){this._tasks=[],this._i=0}enqueue(u){this._tasks.push(u),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(u){this._idleCallback=void 0;let g=0,c=0,t=u.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),c=Math.max(g,c),s=u.timeRemaining(),1.5*c>s)return t-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-g))}ms`),void this._start();t=s}this.clear()}}class n extends d{_requestCallback(u){return setTimeout(()=>u(this._createDeadline(16)))}_cancelCallback(u){clearTimeout(u)}_createDeadline(u){const g=Date.now()+u;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}i.PriorityTaskQueue=n,i.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends d{_requestCallback(l){return requestIdleCallback(l)}_cancelCallback(l){cancelIdleCallback(l)}}:n,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(l){this._queue.clear(),this._queue.enqueue(l)}flush(){this._queue.flush()}}},9282:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const a=o(643);i.updateWindowsModeWrappedState=function(d){const n=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),l=n==null?void 0:n.get(d.cols-1),u=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);u&&l&&(u.isWrapped=l[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&l[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(n){return[n>>>16&255,n>>>8&255,255&n]}static fromColorRGB(n){return(255&n[0])<<16|(255&n[1])<<8|255&n[2]}clone(){const n=new o;return n.fg=this.fg,n.bg=this.bg,n.extended=this.extended.clone(),n}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(n){this._ext=n}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(n){this._ext&=-469762049,this._ext|=n<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(n){this._ext&=-67108864,this._ext|=67108863&n}get urlId(){return this._urlId}set urlId(n){this._urlId=n}get underlineVariantOffset(){const n=(3758096384&this._ext)>>29;return n<0?4294967288^n:n}set underlineVariantOffset(n){this._ext&=536870911,this._ext|=n<<29&3758096384}constructor(n=0,l=0){this._ext=0,this._urlId=0,this._ext=n,this._urlId=l}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=a},9092:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const a=o(6349),d=o(7226),n=o(3734),l=o(8437),u=o(4634),g=o(511),c=o(643),t=o(4863),s=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(e,r,h){this._hasScrollback=e,this._optionsService=r,this._bufferService=h,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=l.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,r){return new l.BufferLine(this._bufferService.cols,this.getNullCell(e),r)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const r=e+this._optionsService.rawOptions.scrollback;return r>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:r}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=l.DEFAULT_ATTR_DATA);let r=this._rows;for(;r--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,r){const h=this.getNullCell(l.DEFAULT_ATTR_DATA);let p=0;const v=this._getCorrectBufferLength(r);if(v>this.lines.maxLength&&(this.lines.maxLength=v),this.lines.length>0){if(this._cols<e)for(let _=0;_<this.lines.length;_++)p+=+this.lines.get(_).resize(e,h);let S=0;if(this._rows<r)for(let _=this._rows;_<r;_++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new l.BufferLine(e,h)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new l.BufferLine(e,h)));else for(let _=this._rows;_>r;_--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(v<this.lines.maxLength){const _=this.lines.length-v;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=v}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(let S=0;S<this.lines.length;S++)p+=+this.lines.get(S).resize(e,h);this._cols=e,this._rows=r,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let r=0;for(;this._memoryCleanupPosition<this.lines.length;)if(r+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),r>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))}_reflowLarger(e,r){const h=(0,u.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(l.DEFAULT_ATTR_DATA));if(h.length>0){const p=(0,u.reflowLargerCreateNewLayout)(this.lines,h);(0,u.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(e,r,p.countRemoved)}}_reflowLargerAdjustViewport(e,r,h){const p=this.getNullCell(l.DEFAULT_ATTR_DATA);let v=h;for(;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new l.BufferLine(e,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-h,0)}_reflowSmaller(e,r){const h=this.getNullCell(l.DEFAULT_ATTR_DATA),p=[];let v=0;for(let S=this.lines.length-1;S>=0;S--){let _=this.lines.get(S);if(!_||!_.isWrapped&&_.getTrimmedLength()<=e)continue;const y=[_];for(;_.isWrapped&&S>0;)_=this.lines.get(--S),y.unshift(_);const D=this.ybase+this.y;if(D>=S&&D<S+y.length)continue;const A=y[y.length-1].getTrimmedLength(),T=(0,u.reflowSmallerGetNewLineLengths)(y,this._cols,e),B=T.length-y.length;let W;W=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);const $=[];for(let P=0;P<B;P++){const H=this.getBlankLine(l.DEFAULT_ATTR_DATA,!0);$.push(H)}$.length>0&&(p.push({start:S+y.length+v,newLines:$}),v+=$.length),y.push(...$);let K=T.length-1,q=T[K];q===0&&(K--,q=T[K]);let V=y.length-B-1,C=A;for(;V>=0;){const P=Math.min(C,q);if(y[K]===void 0)break;if(y[K].copyCellsFrom(y[V],C-P,q-P,P,!0),q-=P,q===0&&(K--,q=T[K]),C-=P,C===0){V--;const H=Math.max(V,0);C=(0,u.getWrappedLineTrimmedLength)(y,H,this._cols)}}for(let P=0;P<y.length;P++)T[P]<e&&y[P].setCell(T[P],h);let M=B-W;for(;M-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+r-1)}if(p.length>0){const S=[],_=[];for(let K=0;K<this.lines.length;K++)_.push(this.lines.get(K));const y=this.lines.length;let D=y-1,A=0,T=p[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);let B=0;for(let K=Math.min(this.lines.maxLength-1,y+v-1);K>=0;K--)if(T&&T.start>D+B){for(let q=T.newLines.length-1;q>=0;q--)this.lines.set(K--,T.newLines[q]);K++,S.push({index:D+1,amount:T.newLines.length}),B+=T.newLines.length,T=p[++A]}else this.lines.set(K,_[D--]);let W=0;for(let K=S.length-1;K>=0;K--)S[K].index+=W,this.lines.onInsertEmitter.fire(S[K]),W+=S[K].amount;const $=Math.max(0,y+v-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(e,r,h=0,p){const v=this.lines.get(e);return v?v.translateToString(r,h,p):""}getWrappedRangeForLine(e){let r=e,h=e;for(;r>0&&this.lines.get(r).isWrapped;)r--;for(;h+1<this.lines.length&&this.lines.get(h+1).isWrapped;)h++;return{first:r,last:h}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].line===e&&(this.markers[r].dispose(),this.markers.splice(r--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const r=new t.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim(h=>{r.line-=h,r.line<0&&r.dispose()})),r.register(this.lines.onInsert(h=>{r.line>=h.index&&(r.line+=h.amount)})),r.register(this.lines.onDelete(h=>{r.line>=h.index&&r.line<h.index+h.amount&&r.dispose(),r.line>h.index&&(r.line-=h.amount)})),r.register(r.onDispose(()=>this._removeMarker(r))),r}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const a=o(3734),d=o(511),n=o(643),l=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let u=0;class g{constructor(t,s,e=!1){this.isWrapped=e,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const r=s||d.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let h=0;h<t;++h)this.setCell(h,r);this.length=t}get(t){const s=this._data[3*t+0],e=2097151&s;return[this._data[3*t+1],2097152&s?this._combined[t]:e?(0,l.stringFromCodePoint)(e):"",s>>22,2097152&s?this._combined[t].charCodeAt(this._combined[t].length-1):e]}set(t,s){this._data[3*t+1]=s[n.CHAR_DATA_ATTR_INDEX],s[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=s[1],this._data[3*t+0]=2097152|t|s[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=s[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const s=this._data[3*t+0];return 2097152&s?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&s}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const s=this._data[3*t+0];return 2097152&s?this._combined[t]:2097151&s?(0,l.stringFromCodePoint)(2097151&s):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,s){return u=3*t,s.content=this._data[u+0],s.fg=this._data[u+1],s.bg=this._data[u+2],2097152&s.content&&(s.combinedData=this._combined[t]),268435456&s.bg&&(s.extended=this._extendedAttrs[t]),s}setCell(t,s){2097152&s.content&&(this._combined[t]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[t]=s.extended),this._data[3*t+0]=s.content,this._data[3*t+1]=s.fg,this._data[3*t+2]=s.bg}setCellFromCodepoint(t,s,e,r){268435456&r.bg&&(this._extendedAttrs[t]=r.extended),this._data[3*t+0]=s|e<<22,this._data[3*t+1]=r.fg,this._data[3*t+2]=r.bg}addCodepointToCell(t,s,e){let r=this._data[3*t+0];2097152&r?this._combined[t]+=(0,l.stringFromCodePoint)(s):2097151&r?(this._combined[t]=(0,l.stringFromCodePoint)(2097151&r)+(0,l.stringFromCodePoint)(s),r&=-2097152,r|=2097152):r=s|4194304,e&&(r&=-12582913,r|=e<<22),this._data[3*t+0]=r}insertCells(t,s,e){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),s<this.length-t){const r=new d.CellData;for(let h=this.length-t-s-1;h>=0;--h)this.setCell(t+s+h,this.loadCell(t+h,r));for(let h=0;h<s;++h)this.setCell(t+h,e)}else for(let r=t;r<this.length;++r)this.setCell(r,e);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,e)}deleteCells(t,s,e){if(t%=this.length,s<this.length-t){const r=new d.CellData;for(let h=0;h<this.length-t-s;++h)this.setCell(t+h,this.loadCell(t+s+h,r));for(let h=this.length-s;h<this.length;++h)this.setCell(h,e)}else for(let r=t;r<this.length;++r)this.setCell(r,e);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodepoint(t,0,1,e)}replaceCells(t,s,e,r=!1){if(r)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,e),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodepoint(s,0,1,e);t<s&&t<this.length;)this.isProtected(t)||this.setCell(t,e),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s,0,1,e);t<s&&t<this.length;)this.setCell(t++,e)}resize(t,s){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const e=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*e)this._data=new Uint32Array(this._data.buffer,0,e);else{const r=new Uint32Array(e);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,s)}else{this._data=this._data.subarray(0,e);const r=Object.keys(this._combined);for(let p=0;p<r.length;p++){const v=parseInt(r[p],10);v>=t&&delete this._combined[v]}const h=Object.keys(this._extendedAttrs);for(let p=0;p<h.length;p++){const v=parseInt(h[p],10);v>=t&&delete this._extendedAttrs[v]}}return this.length=t,4*e*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,s=!1){if(s)for(let e=0;e<this.length;++e)this.isProtected(e)||this.setCell(e,t);else{this._combined={},this._extendedAttrs={};for(let e=0;e<this.length;++e)this.setCell(e,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const s in t._combined)this._combined[s]=t._combined[s];this._extendedAttrs={};for(const s in t._extendedAttrs)this._extendedAttrs[s]=t._extendedAttrs[s];this.isWrapped=t.isWrapped}clone(){const t=new g(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const s in this._combined)t._combined[s]=this._combined[s];for(const s in this._extendedAttrs)t._extendedAttrs[s]=this._extendedAttrs[s];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0]||50331648&this._data[3*t+2])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,s,e,r,h){const p=t._data;if(h)for(let S=r-1;S>=0;S--){for(let _=0;_<3;_++)this._data[3*(e+S)+_]=p[3*(s+S)+_];268435456&p[3*(s+S)+2]&&(this._extendedAttrs[e+S]=t._extendedAttrs[s+S])}else for(let S=0;S<r;S++){for(let _=0;_<3;_++)this._data[3*(e+S)+_]=p[3*(s+S)+_];268435456&p[3*(s+S)+2]&&(this._extendedAttrs[e+S]=t._extendedAttrs[s+S])}const v=Object.keys(t._combined);for(let S=0;S<v.length;S++){const _=parseInt(v[S],10);_>=s&&(this._combined[_-s+e]=t._combined[_])}}translateToString(t,s,e,r){s=s??0,e=e??this.length,t&&(e=Math.min(e,this.getTrimmedLength())),r&&(r.length=0);let h="";for(;s<e;){const p=this._data[3*s+0],v=2097151&p,S=2097152&p?this._combined[s]:v?(0,l.stringFromCodePoint)(v):n.WHITESPACE_CELL_CHAR;if(h+=S,r)for(let _=0;_<S.length;++_)r.push(s);s+=p>>22||1}return r&&r.push(s),h}}i.BufferLine=g},4841:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(w,i)=>{function o(a,d,n){if(d===a.length-1)return a[d].getTrimmedLength();const l=!a[d].hasContent(n-1)&&a[d].getWidth(n-1)===1,u=a[d+1].getWidth(0)===2;return l&&u?n-1:n}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(a,d,n,l,u){const g=[];for(let c=0;c<a.length-1;c++){let t=c,s=a.get(++t);if(!s.isWrapped)continue;const e=[a.get(c)];for(;t<a.length&&s.isWrapped;)e.push(s),s=a.get(++t);if(l>=c&&l<t){c+=e.length-1;continue}let r=0,h=o(e,r,d),p=1,v=0;for(;p<e.length;){const _=o(e,p,d),y=_-v,D=n-h,A=Math.min(y,D);e[r].copyCellsFrom(e[p],v,h,A,!1),h+=A,h===n&&(r++,h=0),v+=A,v===_&&(p++,v=0),h===0&&r!==0&&e[r-1].getWidth(n-1)===2&&(e[r].copyCellsFrom(e[r-1],n-1,h++,1,!1),e[r-1].setCell(n-1,u))}e[r].replaceCells(h,n,u);let S=0;for(let _=e.length-1;_>0&&(_>r||e[_].getTrimmedLength()===0);_--)S++;S>0&&(g.push(c+e.length-S),g.push(S)),c+=e.length-1}return g},i.reflowLargerCreateNewLayout=function(a,d){const n=[];let l=0,u=d[l],g=0;for(let c=0;c<a.length;c++)if(u===c){const t=d[++l];a.onDeleteEmitter.fire({index:c-g,amount:t}),c+=t-1,g+=t,u=d[++l]}else n.push(c);return{layout:n,countRemoved:g}},i.reflowLargerApplyNewLayout=function(a,d){const n=[];for(let l=0;l<d.length;l++)n.push(a.get(d[l]));for(let l=0;l<n.length;l++)a.set(l,n[l]);a.length=d.length},i.reflowSmallerGetNewLineLengths=function(a,d,n){const l=[],u=a.map((s,e)=>o(a,e,d)).reduce((s,e)=>s+e);let g=0,c=0,t=0;for(;t<u;){if(u-t<n){l.push(u-t);break}g+=n;const s=o(a,c,d);g>s&&(g-=s,c++);const e=a[c].getWidth(g-1)===2;e&&g--;const r=e?n-1:n;l.push(r),t+=r}return l},i.getWrappedLineTrimmedLength=o},5295:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const a=o(8460),d=o(844),n=o(9092);class l extends d.Disposable{constructor(g,c){super(),this._optionsService=g,this._bufferService=c,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(g,c){this._normal.resize(g,c),this._alt.resize(g,c),this.setupTabStops(g)}setupTabStops(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)}}i.BufferSet=l},511:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const a=o(482),d=o(643),n=o(3734);class l extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(g){const c=new l;return c.setFromCharData(g),c}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[d.CHAR_DATA_ATTR_INDEX],this.bg=0;let c=!1;if(g[d.CHAR_DATA_CHAR_INDEX].length>2)c=!0;else if(g[d.CHAR_DATA_CHAR_INDEX].length===2){const t=g[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const s=g[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(t-55296)+s-56320+65536|g[d.CHAR_DATA_WIDTH_INDEX]<<22:c=!0}else c=!0}else this.content=g[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[d.CHAR_DATA_WIDTH_INDEX]<<22;c&&(this.combinedData=g[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[d.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=l},643:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const a=o(8460),d=o(844);class n{get id(){return this._id}constructor(u){this.line=u,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,d.disposeArray)(this._disposables),this._disposables.length=0)}register(u){return this._disposables.push(u),u}}i.Marker=n,n._nextId=1},7116:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(w,i)=>{var o,a,d;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(n){n.NUL="\0",n.SOH="",n.STX="",n.ETX="",n.EOT="",n.ENQ="",n.ACK="",n.BEL="\x07",n.BS="\b",n.HT="	",n.LF=`
`,n.VT="\v",n.FF="\f",n.CR="\r",n.SO="",n.SI="",n.DLE="",n.DC1="",n.DC2="",n.DC3="",n.DC4="",n.NAK="",n.SYN="",n.ETB="",n.CAN="",n.EM="",n.SUB="",n.ESC="\x1B",n.FS="",n.GS="",n.RS="",n.US="",n.SP=" ",n.DEL=""}(o||(i.C0=o={})),function(n){n.PAD="",n.HOP="",n.BPH="",n.NBH="",n.IND="",n.NEL="",n.SSA="",n.ESA="",n.HTS="",n.HTJ="",n.VTS="",n.PLD="",n.PLU="",n.RI="",n.SS2="",n.SS3="",n.DCS="",n.PU1="",n.PU2="",n.STS="",n.CCH="",n.MW="",n.SPA="",n.EPA="",n.SOS="",n.SGCI="",n.SCI="",n.CSI="",n.ST="",n.OSC="",n.PM="",n.APC=""}(a||(i.C1=a={})),function(n){n.ST=`${o.ESC}\\`}(d||(i.C1_ESCAPED=d={}))},7399:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const a=o(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(n,l,u,g){const c={type:0,cancel:!1,key:void 0},t=(n.shiftKey?1:0)|(n.altKey?2:0)|(n.ctrlKey?4:0)|(n.metaKey?8:0);switch(n.keyCode){case 0:n.key==="UIKeyInputUpArrow"?c.key=l?a.C0.ESC+"OA":a.C0.ESC+"[A":n.key==="UIKeyInputLeftArrow"?c.key=l?a.C0.ESC+"OD":a.C0.ESC+"[D":n.key==="UIKeyInputRightArrow"?c.key=l?a.C0.ESC+"OC":a.C0.ESC+"[C":n.key==="UIKeyInputDownArrow"&&(c.key=l?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:c.key=n.ctrlKey?"\b":a.C0.DEL,n.altKey&&(c.key=a.C0.ESC+c.key);break;case 9:if(n.shiftKey){c.key=a.C0.ESC+"[Z";break}c.key=a.C0.HT,c.cancel=!0;break;case 13:c.key=n.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,c.cancel=!0;break;case 27:c.key=a.C0.ESC,n.altKey&&(c.key=a.C0.ESC+a.C0.ESC),c.cancel=!0;break;case 37:if(n.metaKey)break;t?(c.key=a.C0.ESC+"[1;"+(t+1)+"D",c.key===a.C0.ESC+"[1;3D"&&(c.key=a.C0.ESC+(u?"b":"[1;5D"))):c.key=l?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(n.metaKey)break;t?(c.key=a.C0.ESC+"[1;"+(t+1)+"C",c.key===a.C0.ESC+"[1;3C"&&(c.key=a.C0.ESC+(u?"f":"[1;5C"))):c.key=l?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(n.metaKey)break;t?(c.key=a.C0.ESC+"[1;"+(t+1)+"A",u||c.key!==a.C0.ESC+"[1;3A"||(c.key=a.C0.ESC+"[1;5A")):c.key=l?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(n.metaKey)break;t?(c.key=a.C0.ESC+"[1;"+(t+1)+"B",u||c.key!==a.C0.ESC+"[1;3B"||(c.key=a.C0.ESC+"[1;5B")):c.key=l?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:n.shiftKey||n.ctrlKey||(c.key=a.C0.ESC+"[2~");break;case 46:c.key=t?a.C0.ESC+"[3;"+(t+1)+"~":a.C0.ESC+"[3~";break;case 36:c.key=t?a.C0.ESC+"[1;"+(t+1)+"H":l?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:c.key=t?a.C0.ESC+"[1;"+(t+1)+"F":l?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:n.shiftKey?c.type=2:n.ctrlKey?c.key=a.C0.ESC+"[5;"+(t+1)+"~":c.key=a.C0.ESC+"[5~";break;case 34:n.shiftKey?c.type=3:n.ctrlKey?c.key=a.C0.ESC+"[6;"+(t+1)+"~":c.key=a.C0.ESC+"[6~";break;case 112:c.key=t?a.C0.ESC+"[1;"+(t+1)+"P":a.C0.ESC+"OP";break;case 113:c.key=t?a.C0.ESC+"[1;"+(t+1)+"Q":a.C0.ESC+"OQ";break;case 114:c.key=t?a.C0.ESC+"[1;"+(t+1)+"R":a.C0.ESC+"OR";break;case 115:c.key=t?a.C0.ESC+"[1;"+(t+1)+"S":a.C0.ESC+"OS";break;case 116:c.key=t?a.C0.ESC+"[15;"+(t+1)+"~":a.C0.ESC+"[15~";break;case 117:c.key=t?a.C0.ESC+"[17;"+(t+1)+"~":a.C0.ESC+"[17~";break;case 118:c.key=t?a.C0.ESC+"[18;"+(t+1)+"~":a.C0.ESC+"[18~";break;case 119:c.key=t?a.C0.ESC+"[19;"+(t+1)+"~":a.C0.ESC+"[19~";break;case 120:c.key=t?a.C0.ESC+"[20;"+(t+1)+"~":a.C0.ESC+"[20~";break;case 121:c.key=t?a.C0.ESC+"[21;"+(t+1)+"~":a.C0.ESC+"[21~";break;case 122:c.key=t?a.C0.ESC+"[23;"+(t+1)+"~":a.C0.ESC+"[23~";break;case 123:c.key=t?a.C0.ESC+"[24;"+(t+1)+"~":a.C0.ESC+"[24~";break;default:if(!n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)if(u&&!g||!n.altKey||n.metaKey)!u||n.altKey||n.ctrlKey||n.shiftKey||!n.metaKey?n.key&&!n.ctrlKey&&!n.altKey&&!n.metaKey&&n.keyCode>=48&&n.key.length===1?c.key=n.key:n.key&&n.ctrlKey&&(n.key==="_"&&(c.key=a.C0.US),n.key==="@"&&(c.key=a.C0.NUL)):n.keyCode===65&&(c.type=1);else{const s=d[n.keyCode],e=s==null?void 0:s[n.shiftKey?1:0];if(e)c.key=a.C0.ESC+e;else if(n.keyCode>=65&&n.keyCode<=90){const r=n.ctrlKey?n.keyCode-64:n.keyCode+32;let h=String.fromCharCode(r);n.shiftKey&&(h=h.toUpperCase()),c.key=a.C0.ESC+h}else if(n.keyCode===32)c.key=a.C0.ESC+(n.ctrlKey?a.C0.NUL:" ");else if(n.key==="Dead"&&n.code.startsWith("Key")){let r=n.code.slice(3,4);n.shiftKey||(r=r.toLowerCase()),c.key=a.C0.ESC+r,c.cancel=!0}}else n.keyCode>=65&&n.keyCode<=90?c.key=String.fromCharCode(n.keyCode-64):n.keyCode===32?c.key=a.C0.NUL:n.keyCode>=51&&n.keyCode<=55?c.key=String.fromCharCode(n.keyCode-51+27):n.keyCode===56?c.key=a.C0.DEL:n.keyCode===219?c.key=a.C0.ESC:n.keyCode===220?c.key=a.C0.FS:n.keyCode===221&&(c.key=a.C0.GS)}return c}},482:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,a=0,d=o.length){let n="";for(let l=a;l<d;++l){let u=o[l];u>65535?(u-=65536,n+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):n+=String.fromCharCode(u)}return n},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){const d=o.length;if(!d)return 0;let n=0,l=0;if(this._interim){const u=o.charCodeAt(l++);56320<=u&&u<=57343?a[n++]=1024*(this._interim-55296)+u-56320+65536:(a[n++]=this._interim,a[n++]=u),this._interim=0}for(let u=l;u<d;++u){const g=o.charCodeAt(u);if(55296<=g&&g<=56319){if(++u>=d)return this._interim=g,n;const c=o.charCodeAt(u);56320<=c&&c<=57343?a[n++]=1024*(g-55296)+c-56320+65536:(a[n++]=g,a[n++]=c)}else g!==65279&&(a[n++]=g)}return n}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){const d=o.length;if(!d)return 0;let n,l,u,g,c=0,t=0,s=0;if(this.interim[0]){let h=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let v,S=0;for(;(v=63&this.interim[++S])&&S<4;)p<<=6,p|=v;const _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=_-S;for(;s<y;){if(s>=d)return 0;if(v=o[s++],(192&v)!=128){s--,h=!0;break}this.interim[S++]=v,p<<=6,p|=63&v}h||(_===2?p<128?s--:a[c++]=p:_===3?p<2048||p>=55296&&p<=57343||p===65279||(a[c++]=p):p<65536||p>1114111||(a[c++]=p)),this.interim.fill(0)}const e=d-4;let r=s;for(;r<d;){for(;!(!(r<e)||128&(n=o[r])||128&(l=o[r+1])||128&(u=o[r+2])||128&(g=o[r+3]));)a[c++]=n,a[c++]=l,a[c++]=u,a[c++]=g,r+=4;if(n=o[r++],n<128)a[c++]=n;else if((224&n)==192){if(r>=d)return this.interim[0]=n,c;if(l=o[r++],(192&l)!=128){r--;continue}if(t=(31&n)<<6|63&l,t<128){r--;continue}a[c++]=t}else if((240&n)==224){if(r>=d)return this.interim[0]=n,c;if(l=o[r++],(192&l)!=128){r--;continue}if(r>=d)return this.interim[0]=n,this.interim[1]=l,c;if(u=o[r++],(192&u)!=128){r--;continue}if(t=(15&n)<<12|(63&l)<<6|63&u,t<2048||t>=55296&&t<=57343||t===65279)continue;a[c++]=t}else if((248&n)==240){if(r>=d)return this.interim[0]=n,c;if(l=o[r++],(192&l)!=128){r--;continue}if(r>=d)return this.interim[0]=n,this.interim[1]=l,c;if(u=o[r++],(192&u)!=128){r--;continue}if(r>=d)return this.interim[0]=n,this.interim[1]=l,this.interim[2]=u,c;if(g=o[r++],(192&g)!=128){r--;continue}if(t=(7&n)<<18|(63&l)<<12|(63&u)<<6|63&g,t<65536||t>1114111)continue;a[c++]=t}}return c}}},225:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const a=o(1480),d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],n=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let l;i.UnicodeV6=class{constructor(){if(this.version="6",!l){l=new Uint8Array(65536),l.fill(1),l[0]=0,l.fill(0,1,32),l.fill(0,127,160),l.fill(2,4352,4448),l[9001]=2,l[9002]=2,l.fill(2,11904,42192),l[12351]=1,l.fill(2,44032,55204),l.fill(2,63744,64256),l.fill(2,65040,65050),l.fill(2,65072,65136),l.fill(2,65280,65377),l.fill(2,65504,65511);for(let u=0;u<d.length;++u)l.fill(0,d[u][0],d[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?l[u]:function(g,c){let t,s=0,e=c.length-1;if(g<c[0][0]||g>c[e][1])return!1;for(;e>=s;)if(t=s+e>>1,g>c[t][1])s=t+1;else{if(!(g<c[t][0]))return!0;e=t-1}return!1}(u,n)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}charProperties(u,g){let c=this.wcwidth(u),t=c===0&&g!==0;if(t){const s=a.UnicodeService.extractWidth(g);s===0?t=!1:s>c&&(c=s)}return a.UnicodeService.createPropertyValue(0,c,t)}}},5981:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const a=o(8460),d=o(844);class n extends d.Disposable{constructor(u){super(),this._action=u,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(u,g){if(g!==void 0&&this._syncCalls>g)return void(this._syncCalls=0);if(this._pendingData+=u.length,this._writeBuffer.push(u),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let c;for(this._isSyncWriting=!0;c=this._writeBuffer.shift();){this._action(c);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(u,g){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=u.length,this._writeBuffer.push(u),this._callbacks.push(g),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=u.length,this._writeBuffer.push(u),this._callbacks.push(g)}_innerWrite(u=0,g=!0){const c=u||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],s=this._action(t,g);if(s){const r=h=>Date.now()-c>=12?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(c,h);return void s.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(r)}const e=this._callbacks[this._bufferOffset];if(e&&e(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-c>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=n},5941:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function d(n,l){const u=n.toString(16),g=u.length<2?"0"+u:u;switch(l){case 4:return u[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}i.parseColor=function(n){if(!n)return;let l=n.toLowerCase();if(l.indexOf("rgb:")===0){l=l.slice(4);const u=o.exec(l);if(u){const g=u[1]?15:u[4]?255:u[7]?4095:65535;return[Math.round(parseInt(u[1]||u[4]||u[7]||u[10],16)/g*255),Math.round(parseInt(u[2]||u[5]||u[8]||u[11],16)/g*255),Math.round(parseInt(u[3]||u[6]||u[9]||u[12],16)/g*255)]}}else if(l.indexOf("#")===0&&(l=l.slice(1),a.exec(l)&&[3,6,9,12].includes(l.length))){const u=l.length/3,g=[0,0,0];for(let c=0;c<3;++c){const t=parseInt(l.slice(u*c,u*c+u),16);g[c]=u===1?t<<4:u===2?t:u===3?t>>4:t>>8}return g}},i.toRgbString=function(n,l=16){const[u,g,c]=n;return`rgb:${d(u,l)}/${d(g,l)}/${d(c,l)}`}},5770:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const a=o(482),d=o(8742),n=o(5770),l=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}registerHandler(g,c){this._handlers[g]===void 0&&(this._handlers[g]=[]);const t=this._handlers[g];return t.push(c),{dispose:()=>{const s=t.indexOf(c);s!==-1&&t.splice(s,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}reset(){if(this._active.length)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0}hook(g,c){if(this.reset(),this._ident=g,this._active=this._handlers[g]||l,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(c);else this._handlerFb(this._ident,"HOOK",c)}put(g,c,t){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(g,c,t);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(g,c,t))}unhook(g,c=!0){if(this._active.length){let t=!1,s=this._active.length-1,e=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,t=c,e=this._stack.fallThrough,this._stack.paused=!1),!e&&t===!1){for(;s>=0&&(t=this._active[s].unhook(g),t!==!0);s--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,t;s--}for(;s>=0;s--)if(t=this._active[s].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",g);this._active=l,this._ident=0}};const u=new d.Params;u.addParam(0),i.DcsHandler=class{constructor(g){this._handler=g,this._data="",this._params=u,this._hitLimit=!1}hook(g){this._params=g.length>1||g.params[0]?g.clone():u,this._data="",this._hitLimit=!1}put(g,c,t){this._hitLimit||(this._data+=(0,a.utf32ToString)(g,c,t),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(g){let c=!1;if(this._hitLimit)c=!1;else if(g&&(c=this._handler(this._data,this._params),c instanceof Promise))return c.then(t=>(this._params=u,this._data="",this._hitLimit=!1,t));return this._params=u,this._data="",this._hitLimit=!1,c}}},2015:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const a=o(844),d=o(8742),n=o(6242),l=o(6351);class u{constructor(s){this.table=new Uint8Array(s)}setDefault(s,e){this.table.fill(s<<4|e)}add(s,e,r,h){this.table[e<<8|s]=r<<4|h}addMany(s,e,r,h){for(let p=0;p<s.length;p++)this.table[e<<8|s[p]]=r<<4|h}}i.TransitionTable=u;const g=160;i.VT500_TRANSITION_TABLE=function(){const t=new u(4095),s=Array.apply(null,Array(256)).map((S,_)=>_),e=(S,_)=>s.slice(S,_),r=e(32,127),h=e(0,24);h.push(25),h.push.apply(h,e(28,32));const p=e(0,14);let v;for(v in t.setDefault(1,0),t.addMany(r,0,2,0),p)t.addMany([24,26,153,154],v,3,0),t.addMany(e(128,144),v,3,0),t.addMany(e(144,152),v,3,0),t.add(156,v,0,0),t.add(27,v,11,1),t.add(157,v,4,8),t.addMany([152,158,159],v,0,7),t.add(155,v,11,3),t.add(144,v,11,9);return t.addMany(h,0,3,0),t.addMany(h,1,3,1),t.add(127,1,0,1),t.addMany(h,8,0,8),t.addMany(h,3,3,3),t.add(127,3,0,3),t.addMany(h,4,3,4),t.add(127,4,0,4),t.addMany(h,6,3,6),t.addMany(h,5,3,5),t.add(127,5,0,5),t.addMany(h,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(e(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(h,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(e(64,127),3,7,0),t.addMany(e(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(e(48,60),4,8,4),t.addMany(e(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(e(32,64),6,0,6),t.add(127,6,0,6),t.addMany(e(64,127),6,0,0),t.addMany(e(32,48),3,9,5),t.addMany(e(32,48),5,9,5),t.addMany(e(48,64),5,0,6),t.addMany(e(64,127),5,7,0),t.addMany(e(32,48),4,9,5),t.addMany(e(32,48),1,9,2),t.addMany(e(32,48),2,9,2),t.addMany(e(48,127),2,10,0),t.addMany(e(48,80),1,10,0),t.addMany(e(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(e(96,127),1,10,0),t.add(80,1,11,9),t.addMany(h,9,0,9),t.add(127,9,0,9),t.addMany(e(28,32),9,0,9),t.addMany(e(32,48),9,9,12),t.addMany(e(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(h,11,0,11),t.addMany(e(32,128),11,0,11),t.addMany(e(28,32),11,0,11),t.addMany(h,10,0,10),t.add(127,10,0,10),t.addMany(e(28,32),10,0,10),t.addMany(e(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(e(32,48),10,9,12),t.addMany(h,12,0,12),t.add(127,12,0,12),t.addMany(e(28,32),12,0,12),t.addMany(e(32,48),12,9,12),t.addMany(e(48,64),12,0,11),t.addMany(e(64,127),12,12,13),t.addMany(e(64,127),10,12,13),t.addMany(e(64,127),9,12,13),t.addMany(h,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(g,0,2,0),t.add(g,8,5,8),t.add(g,6,0,6),t.add(g,11,0,11),t.add(g,13,13,13),t}();class c extends a.Disposable{constructor(s=i.VT500_TRANSITION_TABLE){super(),this._transitions=s,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new d.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,r,h)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,r)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new l.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(s,e=[64,126]){let r=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=s.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<s.intermediates.length;++p){const v=s.intermediates.charCodeAt(p);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=v}}if(s.final.length!==1)throw new Error("final must be a single byte");const h=s.final.charCodeAt(0);if(e[0]>h||h>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return r<<=8,r|=h,r}identToString(s){const e=[];for(;s;)e.push(String.fromCharCode(255&s)),s>>=8;return e.reverse().join("")}setPrintHandler(s){this._printHandler=s}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(s,e){const r=this._identifier(s,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const h=this._escHandlers[r];return h.push(e),{dispose:()=>{const p=h.indexOf(e);p!==-1&&h.splice(p,1)}}}clearEscHandler(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]}setEscHandlerFallback(s){this._escHandlerFb=s}setExecuteHandler(s,e){this._executeHandlers[s.charCodeAt(0)]=e}clearExecuteHandler(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]}setExecuteHandlerFallback(s){this._executeHandlerFb=s}registerCsiHandler(s,e){const r=this._identifier(s);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const h=this._csiHandlers[r];return h.push(e),{dispose:()=>{const p=h.indexOf(e);p!==-1&&h.splice(p,1)}}}clearCsiHandler(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]}setCsiHandlerFallback(s){this._csiHandlerFb=s}registerDcsHandler(s,e){return this._dcsParser.registerHandler(this._identifier(s),e)}clearDcsHandler(s){this._dcsParser.clearHandler(this._identifier(s))}setDcsHandlerFallback(s){this._dcsParser.setHandlerFallback(s)}registerOscHandler(s,e){return this._oscParser.registerHandler(s,e)}clearOscHandler(s){this._oscParser.clearHandler(s)}setOscHandlerFallback(s){this._oscParser.setHandlerFallback(s)}setErrorHandler(s){this._errorHandler=s}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(s,e,r,h,p){this._parseStack.state=s,this._parseStack.handlers=e,this._parseStack.handlerPos=r,this._parseStack.transition=h,this._parseStack.chunkPos=p}parse(s,e,r){let h,p=0,v=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const _=this._parseStack.handlers;let y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&y>-1){for(;y>=0&&(h=_[y](this._params),h!==!0);y--)if(h instanceof Promise)return this._parseStack.handlerPos=y,h}this._parseStack.handlers=[];break;case 4:if(r===!1&&y>-1){for(;y>=0&&(h=_[y](),h!==!0);y--)if(h instanceof Promise)return this._parseStack.handlerPos=y,h}this._parseStack.handlers=[];break;case 6:if(p=s[this._parseStack.chunkPos],h=this._dcsParser.unhook(p!==24&&p!==26,r),h)return h;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=s[this._parseStack.chunkPos],h=this._oscParser.end(p!==24&&p!==26,r),h)return h;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let _=S;_<e;++_){switch(p=s[_],v=this._transitions.table[this.currentState<<8|(p<160?p:g)],v>>4){case 2:for(let B=_+1;;++B){if(B>=e||(p=s[B])<32||p>126&&p<g){this._printHandler(s,_,B),_=B-1;break}if(++B>=e||(p=s[B])<32||p>126&&p<g){this._printHandler(s,_,B),_=B-1;break}if(++B>=e||(p=s[B])<32||p>126&&p<g){this._printHandler(s,_,B),_=B-1;break}if(++B>=e||(p=s[B])<32||p>126&&p<g){this._printHandler(s,_,B),_=B-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const y=this._csiHandlers[this._collect<<8|p];let D=y?y.length-1:-1;for(;D>=0&&(h=y[D](this._params),h!==!0);D--)if(h instanceof Promise)return this._preserveStack(3,y,D,v,_),h;D<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingJoinState=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++_<e&&(p=s[_])>47&&p<60);_--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const A=this._escHandlers[this._collect<<8|p];let T=A?A.length-1:-1;for(;T>=0&&(h=A[T](),h!==!0);T--)if(h instanceof Promise)return this._preserveStack(4,A,T,v,_),h;T<0&&this._escHandlerFb(this._collect<<8|p),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let B=_+1;;++B)if(B>=e||(p=s[B])===24||p===26||p===27||p>127&&p<g){this._dcsParser.put(s,_,B),_=B-1;break}break;case 14:if(h=this._dcsParser.unhook(p!==24&&p!==26),h)return this._preserveStack(6,[],0,v,_),h;p===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let B=_+1;;B++)if(B>=e||(p=s[B])<32||p>127&&p<g){this._oscParser.put(s,_,B),_=B-1;break}break;case 6:if(h=this._oscParser.end(p!==24&&p!==26),h)return this._preserveStack(5,[],0,v,_),h;p===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&v}}}i.EscapeSequenceParser=c},6242:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const a=o(5770),d=o(482),n=[];i.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(l,u){this._handlers[l]===void 0&&(this._handlers[l]=[]);const g=this._handlers[l];return g.push(u),{dispose:()=>{const c=g.indexOf(u);c!==-1&&g.splice(c,1)}}}clearHandler(l){this._handlers[l]&&delete this._handlers[l]}setHandlerFallback(l){this._handlerFb=l}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(this._state===2)for(let l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].start();else this._handlerFb(this._id,"START")}_put(l,u,g){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(l,u,g);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(l,u,g))}start(){this.reset(),this._state=1}put(l,u,g){if(this._state!==3){if(this._state===1)for(;u<g;){const c=l[u++];if(c===59){this._state=2,this._start();break}if(c<48||57<c)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+c-48}this._state===2&&g-u>0&&this._put(l,u,g)}}end(l,u=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let g=!1,c=this._active.length-1,t=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,g=u,t=this._stack.fallThrough,this._stack.paused=!1),!t&&g===!1){for(;c>=0&&(g=this._active[c].end(l),g!==!0);c--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,g;c--}for(;c>=0;c--)if(g=this._active[c].end(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,g}else this._handlerFb(this._id,"END",l);this._active=n,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(l){this._handler=l,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(l,u,g){this._hitLimit||(this._data+=(0,d.utf32ToString)(l,u,g),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(l){let u=!1;if(this._hitLimit)u=!1;else if(l&&(u=this._handler(this._data),u instanceof Promise))return u.then(g=>(this._data="",this._hitLimit=!1,g));return this._data="",this._hitLimit=!1,u}}},8742:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class a{static fromArray(n){const l=new a;if(!n.length)return l;for(let u=Array.isArray(n[0])?1:0;u<n.length;++u){const g=n[u];if(Array.isArray(g))for(let c=0;c<g.length;++c)l.addSubParam(g[c]);else l.addParam(g)}return l}constructor(n=32,l=32){if(this.maxLength=n,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(n),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(n),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const n=new a(this.maxLength,this.maxSubParamsLength);return n.params.set(this.params),n.length=this.length,n._subParams.set(this._subParams),n._subParamsLength=this._subParamsLength,n._subParamsIdx.set(this._subParamsIdx),n._rejectDigits=this._rejectDigits,n._rejectSubDigits=this._rejectSubDigits,n._digitIsSub=this._digitIsSub,n}toArray(){const n=[];for(let l=0;l<this.length;++l){n.push(this.params[l]);const u=this._subParamsIdx[l]>>8,g=255&this._subParamsIdx[l];g-u>0&&n.push(Array.prototype.slice.call(this._subParams,u,g))}return n}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(n){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(n<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=n>o?o:n}}addSubParam(n){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(n<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=n>o?o:n,this._subParamsIdx[this.length-1]++}}hasSubParams(n){return(255&this._subParamsIdx[n])-(this._subParamsIdx[n]>>8)>0}getSubParams(n){const l=this._subParamsIdx[n]>>8,u=255&this._subParamsIdx[n];return u-l>0?this._subParams.subarray(l,u):null}getSubParamsAll(){const n={};for(let l=0;l<this.length;++l){const u=this._subParamsIdx[l]>>8,g=255&this._subParamsIdx[l];g-u>0&&(n[l]=this._subParams.slice(u,g))}return n}addDigit(n){let l;if(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const u=this._digitIsSub?this._subParams:this.params,g=u[l-1];u[l-1]=~g?Math.min(10*g+n,o):n}}i.Params=a},5741:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){const d={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(d),a.dispose=()=>this._wrappedAddonDispose(d),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let d=0;d<this._addons.length;d++)if(this._addons[d]===o){a=d;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const a=o(3785),d=o(511);i.BufferApiView=class{constructor(n,l){this._buffer=n,this.type=l}init(n){return this._buffer=n,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(n){const l=this._buffer.lines.get(n);if(l)return new a.BufferLineApiView(l)}getNullCell(){return new d.CellData}}},3785:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const a=o(511);i.BufferLineApiView=class{constructor(d){this._line=d}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(d,n){if(!(d<0||d>=this._line.length))return n?(this._line.loadCell(d,n),n):this._line.loadCell(d,new a.CellData)}translateToString(d,n,l){return this._line.translateToString(d,n,l)}}},8285:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const a=o(8771),d=o(8460),n=o(844);class l extends n.Disposable{constructor(g){super(),this._core=g,this._onBufferChange=this.register(new d.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=l},7975:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,d=>a(d.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(d,n)=>a(d,n.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(w,i,o){var a=this&&this.__decorate||function(t,s,e,r){var h,p=arguments.length,v=p<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(t,s,e,r);else for(var S=t.length-1;S>=0;S--)(h=t[S])&&(v=(p<3?h(v):p>3?h(s,e,v):h(s,e))||v);return p>3&&v&&Object.defineProperty(s,e,v),v},d=this&&this.__param||function(t,s){return function(e,r){s(e,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const n=o(8460),l=o(844),u=o(5295),g=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let c=i.BufferService=class extends l.Disposable{get buffer(){return this.buffers.active}constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new u.BufferSet(t,this))}resize(t,s){this.cols=t,this.rows=s,this.buffers.resize(t,s),this._onResize.fire({cols:t,rows:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,s=!1){const e=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===t.fg&&r.getBg(0)===t.bg||(r=e.getBlankLine(t,s),this._cachedBlankLine=r),r.isWrapped=s;const h=e.ybase+e.scrollTop,p=e.ybase+e.scrollBottom;if(e.scrollTop===0){const v=e.lines.isFull;p===e.lines.length-1?v?e.lines.recycle().copyFrom(r):e.lines.push(r.clone()):e.lines.splice(p+1,0,r.clone()),v?this.isUserScrolling&&(e.ydisp=Math.max(e.ydisp-1,0)):(e.ybase++,this.isUserScrolling||e.ydisp++)}else{const v=p-h+1;e.lines.shiftElements(h+1,v-1,-1),e.lines.set(p,r.clone())}this.isUserScrolling||(e.ydisp=e.ybase),this._onScroll.fire(e.ydisp)}scrollLines(t,s,e){const r=this.buffer;if(t<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else t+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const h=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+t,r.ybase),0),h!==r.ydisp&&(s||this._onScroll.fire(r.ydisp))}};i.BufferService=c=a([d(0,g.IOptionsService)],c)},7994:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(w,i,o){var a=this&&this.__decorate||function(r,h,p,v){var S,_=arguments.length,y=_<3?h:v===null?v=Object.getOwnPropertyDescriptor(h,p):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,h,p,v);else for(var D=r.length-1;D>=0;D--)(S=r[D])&&(y=(_<3?S(y):_>3?S(h,p,y):S(h,p))||y);return _>3&&y&&Object.defineProperty(h,p,y),y},d=this&&this.__param||function(r,h){return function(p,v){h(p,v,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const n=o(2585),l=o(8460),u=o(844),g={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function c(r,h){let p=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(p|=64,p|=r.action):(p|=3&r.button,4&r.button&&(p|=64),8&r.button&&(p|=128),r.action===32?p|=32:r.action!==0||h||(p|=3)),p}const t=String.fromCharCode,s={DEFAULT:r=>{const h=[c(r,!1)+32,r.col+32,r.row+32];return h[0]>255||h[1]>255||h[2]>255?"":`\x1B[M${t(h[0])}${t(h[1])}${t(h[2])}`},SGR:r=>{const h=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${c(r,!0)};${r.col};${r.row}${h}`},SGR_PIXELS:r=>{const h=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${c(r,!0)};${r.x};${r.y}${h}`}};let e=i.CoreMouseService=class extends u.Disposable{constructor(r,h){super(),this._bufferService=r,this._coreService=h,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new l.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(g))this.addProtocol(p,g[p]);for(const p of Object.keys(s))this.addEncoding(p,s[p]);this.reset()}addProtocol(r,h){this._protocols[r]=h}addEncoding(r,h){this._encodings[r]=h}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const h=this._encodings[this._activeEncoding](r);return h&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(h):this._coreService.triggerDataEvent(h,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,h,p){if(p){if(r.x!==h.x||r.y!==h.y)return!1}else if(r.col!==h.col||r.row!==h.row)return!1;return r.button===h.button&&r.action===h.action&&r.ctrl===h.ctrl&&r.alt===h.alt&&r.shift===h.shift}};i.CoreMouseService=e=a([d(0,n.IBufferService),d(1,n.ICoreService)],e)},6975:function(w,i,o){var a=this&&this.__decorate||function(e,r,h,p){var v,S=arguments.length,_=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(e,r,h,p);else for(var y=e.length-1;y>=0;y--)(v=e[y])&&(_=(S<3?v(_):S>3?v(r,h,_):v(r,h))||_);return S>3&&_&&Object.defineProperty(r,h,_),_},d=this&&this.__param||function(e,r){return function(h,p){r(h,p,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const n=o(1439),l=o(8460),u=o(844),g=o(2585),c=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let s=i.CoreService=class extends u.Disposable{constructor(e,r,h){super(),this._bufferService=e,this._logService=r,this._optionsService=h,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new l.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new l.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(t)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(t)}triggerDataEvent(e,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const h=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&h.ybase!==h.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(p=>p.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(e))}};i.CoreService=s=a([d(0,g.IBufferService),d(1,g.ILogService),d(2,g.IOptionsService)],s)},9074:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const a=o(8055),d=o(8460),n=o(844),l=o(6106);let u=0,g=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new l.SortedList(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this.register(new d.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new d.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const r=new t(e);if(r){const h=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),h.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,r,h){let p=0,v=0;for(const S of this._decorations.getKeyIterator(r))p=S.options.x??0,v=p+(S.options.width??1),e>=p&&e<v&&(!h||(S.options.layer??"bottom")===h)&&(yield S)}forEachDecorationAtCell(e,r,h,p){this._decorations.forEachByKey(r,v=>{u=v.options.x??0,g=u+(v.options.width??1),e>=u&&e<g&&(!h||(v.options.layer??"bottom")===h)&&p(v)})}}i.DecorationService=c;class t extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new d.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const a=o(2585),d=o(8343);class n{constructor(...u){this._entries=new Map;for(const[g,c]of u)this.set(g,c)}set(u,g){const c=this._entries.get(u);return this._entries.set(u,g),c}forEach(u){for(const[g,c]of this._entries.entries())u(g,c)}has(u){return this._entries.has(u)}get(u){return this._entries.get(u)}}i.ServiceCollection=n,i.InstantiationService=class{constructor(){this._services=new n,this._services.set(a.IInstantiationService,this)}setService(l,u){this._services.set(l,u)}getService(l){return this._services.get(l)}createInstance(l,...u){const g=(0,d.getServiceDependencies)(l).sort((s,e)=>s.index-e.index),c=[];for(const s of g){const e=this._services.get(s.id);if(!e)throw new Error(`[createInstance] ${l.name} depends on UNKNOWN service ${s.id}.`);c.push(e)}const t=g.length>0?g[0].index:u.length;if(u.length!==t)throw new Error(`[createInstance] First service dependency of ${l.name} at position ${t+1} conflicts with ${u.length} static arguments`);return new l(...u,...c)}}},7866:function(w,i,o){var a=this&&this.__decorate||function(t,s,e,r){var h,p=arguments.length,v=p<3?s:r===null?r=Object.getOwnPropertyDescriptor(s,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(t,s,e,r);else for(var S=t.length-1;S>=0;S--)(h=t[S])&&(v=(p<3?h(v):p>3?h(s,e,v):h(s,e))||v);return p>3&&v&&Object.defineProperty(s,e,v),v},d=this&&this.__param||function(t,s){return function(e,r){s(e,r,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const n=o(844),l=o(2585),u={trace:l.LogLevelEnum.TRACE,debug:l.LogLevelEnum.DEBUG,info:l.LogLevelEnum.INFO,warn:l.LogLevelEnum.WARN,error:l.LogLevelEnum.ERROR,off:l.LogLevelEnum.OFF};let g,c=i.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(t){super(),this._optionsService=t,this._logLevel=l.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=u[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let s=0;s<t.length;s++)typeof t[s]=="function"&&(t[s]=t[s]())}_log(t,s,e){this._evalLazyOptionalParams(e),t.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+s,...e)}trace(t,...s){var e;this._logLevel<=l.LogLevelEnum.TRACE&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.trace.bind(this._optionsService.options.logger))??console.log,t,s)}debug(t,...s){var e;this._logLevel<=l.LogLevelEnum.DEBUG&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.debug.bind(this._optionsService.options.logger))??console.log,t,s)}info(t,...s){var e;this._logLevel<=l.LogLevelEnum.INFO&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.info.bind(this._optionsService.options.logger))??console.info,t,s)}warn(t,...s){var e;this._logLevel<=l.LogLevelEnum.WARN&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.warn.bind(this._optionsService.options.logger))??console.warn,t,s)}error(t,...s){var e;this._logLevel<=l.LogLevelEnum.ERROR&&this._log(((e=this._optionsService.options.logger)==null?void 0:e.error.bind(this._optionsService.options.logger))??console.error,t,s)}};i.LogService=c=a([d(0,l.IOptionsService)],c),i.setTraceLogger=function(t){g=t},i.traceCall=function(t,s,e){if(typeof e.value!="function")throw new Error("not supported");const r=e.value;e.value=function(...h){if(g.logLevel!==l.LogLevelEnum.TRACE)return r.apply(this,h);g.trace(`GlyphRenderer#${r.name}(${h.map(v=>JSON.stringify(v)).join(", ")})`);const p=r.apply(this,h);return g.trace(`GlyphRenderer#${r.name} return`,p),p}}},7302:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const a=o(8460),d=o(844),n=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const l=["normal","bold","100","200","300","400","500","600","700","800","900"];class u extends d.Disposable{constructor(c){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t={...i.DEFAULT_OPTIONS};for(const s in c)if(s in t)try{const e=c[s];t[s]=this._sanitizeAndValidateOption(s,e)}catch(e){console.error(e)}this.rawOptions=t,this.options={...t},this._setupOptions(),this.register((0,d.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(c,t){return this.onOptionChange(s=>{s===c&&t(this.rawOptions[c])})}onMultipleOptionChange(c,t){return this.onOptionChange(s=>{c.indexOf(s)!==-1&&t()})}_setupOptions(){const c=s=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},t=(s,e)=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);e=this._sanitizeAndValidateOption(s,e),this.rawOptions[s]!==e&&(this.rawOptions[s]=e,this._onOptionChange.fire(s))};for(const s in this.rawOptions){const e={get:c.bind(this,s),set:t.bind(this,s)};Object.defineProperty(this.options,s,e)}}_sanitizeAndValidateOption(c,t){switch(c){case"cursorStyle":if(t||(t=i.DEFAULT_OPTIONS[c]),!function(s){return s==="block"||s==="underline"||s==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${c}`);break;case"wordSeparator":t||(t=i.DEFAULT_OPTIONS[c]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=l.includes(t)?t:i.DEFAULT_OPTIONS[c];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${c} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${c} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${c} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${c} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{}}return t}}i.OptionsService=u},2660:function(w,i,o){var a=this&&this.__decorate||function(u,g,c,t){var s,e=arguments.length,r=e<3?g:t===null?t=Object.getOwnPropertyDescriptor(g,c):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(u,g,c,t);else for(var h=u.length-1;h>=0;h--)(s=u[h])&&(r=(e<3?s(r):e>3?s(g,c,r):s(g,c))||r);return e>3&&r&&Object.defineProperty(g,c,r),r},d=this&&this.__param||function(u,g){return function(c,t){g(c,t,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const n=o(2585);let l=i.OscLinkService=class{constructor(u){this._bufferService=u,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(u){const g=this._bufferService.buffer;if(u.id===void 0){const h=g.addMarker(g.ybase+g.y),p={data:u,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(p,h)),this._dataByLinkId.set(p.id,p),p.id}const c=u,t=this._getEntryIdKey(c),s=this._entriesWithId.get(t);if(s)return this.addLineToLink(s.id,g.ybase+g.y),s.id;const e=g.addMarker(g.ybase+g.y),r={id:this._nextId++,key:this._getEntryIdKey(c),data:c,lines:[e]};return e.onDispose(()=>this._removeMarkerFromLink(r,e)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(u,g){const c=this._dataByLinkId.get(u);if(c&&c.lines.every(t=>t.line!==g)){const t=this._bufferService.buffer.addMarker(g);c.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(c,t))}}getLinkData(u){var g;return(g=this._dataByLinkId.get(u))==null?void 0:g.data}_getEntryIdKey(u){return`${u.id};;${u.uri}`}_removeMarkerFromLink(u,g){const c=u.lines.indexOf(g);c!==-1&&(u.lines.splice(c,1),u.lines.length===0&&(u.data.id!==void 0&&this._entriesWithId.delete(u.key),this._dataByLinkId.delete(u.id)))}};i.OscLinkService=l=a([d(0,n.IBufferService)],l)},8343:(w,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",a="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(d){return d[a]||[]},i.createDecorator=function(d){if(i.serviceRegistry.has(d))return i.serviceRegistry.get(d);const n=function(l,u,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(c,t,s){t[o]===t?t[a].push({id:c,index:s}):(t[a]=[{id:c,index:s}],t[o]=t)})(n,l,g)};return n.toString=()=>d,i.serviceRegistry.set(d,n),n}},2585:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const a=o(8343);var d;i.IBufferService=(0,a.createDecorator)("BufferService"),i.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),i.ICoreService=(0,a.createDecorator)("CoreService"),i.ICharsetService=(0,a.createDecorator)("CharsetService"),i.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(n){n[n.TRACE=0]="TRACE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.OFF=5]="OFF"}(d||(i.LogLevelEnum=d={})),i.ILogService=(0,a.createDecorator)("LogService"),i.IOptionsService=(0,a.createDecorator)("OptionsService"),i.IOscLinkService=(0,a.createDecorator)("OscLinkService"),i.IUnicodeService=(0,a.createDecorator)("UnicodeService"),i.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(w,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const a=o(8460),d=o(225);class n{static extractShouldJoin(u){return(1&u)!=0}static extractWidth(u){return u>>1&3}static extractCharKind(u){return u>>3}static createPropertyValue(u,g,c=!1){return(16777215&u)<<3|(3&g)<<1|(c?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;const u=new d.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let g=0,c=0;const t=u.length;for(let s=0;s<t;++s){let e=u.charCodeAt(s);if(55296<=e&&e<=56319){if(++s>=t)return g+this.wcwidth(e);const p=u.charCodeAt(s);56320<=p&&p<=57343?e=1024*(e-55296)+p-56320+65536:g+=this.wcwidth(p)}const r=this.charProperties(e,c);let h=n.extractWidth(r);n.extractShouldJoin(r)&&(h-=n.extractWidth(c)),g+=h,c=r}return g}charProperties(u,g){return this._activeProvider.charProperties(u,g)}}i.UnicodeService=n}},k={};function x(w){var i=k[w];if(i!==void 0)return i.exports;var o=k[w]={exports:{}};return b[w].call(o.exports,o,o.exports,x),o.exports}var O={};return(()=>{var w=O;Object.defineProperty(w,"__esModule",{value:!0}),w.Terminal=void 0;const i=x(9042),o=x(3236),a=x(844),d=x(5741),n=x(8285),l=x(7975),u=x(7090),g=["cols","rows"];class c extends a.Disposable{constructor(s){super(),this._core=this.register(new o.Terminal(s)),this._addonManager=this.register(new d.AddonManager),this._publicOptions={...this._core.options};const e=h=>this._core.options[h],r=(h,p)=>{this._checkReadonlyOptions(h),this._core.options[h]=p};for(const h in this._core.options){const p={get:e.bind(this,h),set:r.bind(this,h)};Object.defineProperty(this._publicOptions,h,p)}}_checkReadonlyOptions(s){if(g.includes(s))throw new Error(`Option "${s}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new u.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new n.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const s=this._core.coreService.decPrivateModes;let e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}}get options(){return this._publicOptions}set options(s){for(const e in s)this._publicOptions[e]=s[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(s,e=!0){this._core.input(s,e)}resize(s,e){this._verifyIntegers(s,e),this._core.resize(s,e)}open(s){this._core.open(s)}attachCustomKeyEventHandler(s){this._core.attachCustomKeyEventHandler(s)}attachCustomWheelEventHandler(s){this._core.attachCustomWheelEventHandler(s)}registerLinkProvider(s){return this._core.registerLinkProvider(s)}registerCharacterJoiner(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)}deregisterCharacterJoiner(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)}registerMarker(s=0){return this._verifyIntegers(s),this._core.registerMarker(s)}registerDecoration(s){return this._checkProposedApi(),this._verifyPositiveIntegers(s.x??0,s.width??0,s.height??0),this._core.registerDecoration(s)}hasSelection(){return this._core.hasSelection()}select(s,e,r){this._verifyIntegers(s,e,r),this._core.select(s,e,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(s,e){this._verifyIntegers(s,e),this._core.selectLines(s,e)}dispose(){super.dispose()}scrollLines(s){this._verifyIntegers(s),this._core.scrollLines(s)}scrollPages(s){this._verifyIntegers(s),this._core.scrollPages(s)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(s){this._verifyIntegers(s),this._core.scrollToLine(s)}clear(){this._core.clear()}write(s,e){this._core.write(s,e)}writeln(s,e){this._core.write(s),this._core.write(`\r
`,e)}paste(s){this._core.paste(s)}refresh(s,e){this._verifyIntegers(s,e),this._core.refresh(s,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(s){this._addonManager.loadAddon(this,s)}static get strings(){return i}_verifyIntegers(...s){for(const e of s)if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...s){for(const e of s)if(e&&(e===1/0||isNaN(e)||e%1!=0||e<0))throw new Error("This API only accepts positive integers")}}w.Terminal=c})(),O})())})(lr);var Ur=lr.exports,cr={exports:{}};(function(m,f){(function(b,k){m.exports=k()})(self,()=>(()=>{var b={};return(()=>{var k=b;Object.defineProperty(k,"__esModule",{value:!0}),k.FitAddon=void 0,k.FitAddon=class{activate(x){this._terminal=x}dispose(){}fit(){const x=this.proposeDimensions();if(!x||!this._terminal||isNaN(x.cols)||isNaN(x.rows))return;const O=this._terminal._core;this._terminal.rows===x.rows&&this._terminal.cols===x.cols||(O._renderService.clear(),this._terminal.resize(x.cols,x.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const x=this._terminal._core,O=x._renderService.dimensions;if(O.css.cell.width===0||O.css.cell.height===0)return;const w=this._terminal.options.scrollback===0?0:x.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),a=Math.max(0,parseInt(i.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),n=o-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),l=a-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-w;return{cols:Math.max(2,Math.floor(l/O.css.cell.width)),rows:Math.max(1,Math.floor(n/O.css.cell.height))}}}})(),b})())})(cr);var jr=cr.exports,dr={exports:{}};(function(m,f){(function(b,k){m.exports=k()})(self,()=>(()=>{var b={6:(w,i)=>{function o(d){try{const n=new URL(d),l=n.password&&n.username?`${n.protocol}//${n.username}:${n.password}@${n.host}`:n.username?`${n.protocol}//${n.username}@${n.host}`:`${n.protocol}//${n.host}`;return d.toLocaleLowerCase().startsWith(l.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(d,n,l,u={}){this._terminal=d,this._regex=n,this._handler=l,this._options=u}provideLinks(d,n){const l=a.computeLink(d,this._regex,this._terminal,this._handler);n(this._addCallbacks(l))}_addCallbacks(d){return d.map(n=>(n.leave=this._options.leave,n.hover=(l,u)=>{if(this._options.hover){const{range:g}=n;this._options.hover(l,u,g)}},n))}};class a{static computeLink(n,l,u,g){const c=new RegExp(l.source,(l.flags||"")+"g"),[t,s]=a._getWindowedLineStrings(n-1,u),e=t.join("");let r;const h=[];for(;r=c.exec(e);){const p=r[0];if(!o(p))continue;const[v,S]=a._mapStrIdx(u,s,0,r.index),[_,y]=a._mapStrIdx(u,v,S,p.length);if(v===-1||S===-1||_===-1||y===-1)continue;const D={start:{x:S+1,y:v+1},end:{x:y,y:_+1}};h.push({range:D,text:p,activate:g})}return h}static _getWindowedLineStrings(n,l){let u,g=n,c=n,t=0,s="";const e=[];if(u=l.buffer.active.getLine(n)){const r=u.translateToString(!0);if(u.isWrapped&&r[0]!==" "){for(t=0;(u=l.buffer.active.getLine(--g))&&t<2048&&(s=u.translateToString(!0),t+=s.length,e.push(s),u.isWrapped&&s.indexOf(" ")===-1););e.reverse()}for(e.push(r),t=0;(u=l.buffer.active.getLine(++c))&&u.isWrapped&&t<2048&&(s=u.translateToString(!0),t+=s.length,e.push(s),s.indexOf(" ")===-1););}return[e,g]}static _mapStrIdx(n,l,u,g){const c=n.buffer.active,t=c.getNullCell();let s=u;for(;g;){const e=c.getLine(l);if(!e)return[-1,-1];for(let r=s;r<e.length;++r){e.getCell(r,t);const h=t.getChars();if(t.getWidth()&&(g-=h.length||1,r===e.length-1&&h==="")){const p=c.getLine(l+1);p&&p.isWrapped&&(p.getCell(0,t),t.getWidth()===2&&(g+=1))}if(g<0)return[l,r]}l++,s=0}return[l,s]}}i.LinkComputer=a}},k={};function x(w){var i=k[w];if(i!==void 0)return i.exports;var o=k[w]={exports:{}};return b[w](o,o.exports,x),o.exports}var O={};return(()=>{var w=O;Object.defineProperty(w,"__esModule",{value:!0}),w.WebLinksAddon=void 0;const i=x(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function a(d,n){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}w.WebLinksAddon=class{constructor(d=a,n={}){this._handler=d,this._options=n}activate(d){this._terminal=d;const n=this._options,l=n.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,l,this._handler,n))}dispose(){var d;(d=this._linkProvider)==null||d.dispose()}}})(),O})())})(dr);var zr=dr.exports;function Kr(m){let f;return{c(){f=F("div"),f.innerHTML="",R(f,"class","terminal-container svelte-hnjomb")},m(b,k){ne(b,f,k),m[8](f)},p:he,i:he,o:he,d(b){b&&se(f),m[8](null)}}}function qr(m,f,b){let{sessionId:k=null}=f,{session:x={}}=f,O,w,i,o="dark";const a={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},d={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},n=Et.subscribe(e=>{o=e.theme,w&&(w.options.theme=o==="light"?d:a)});ft(()=>{w=new Ur.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:o==="light"?d:a,allowProposedApi:!0,scrollback:1e3,convertEol:!0}),i=new jr.FitAddon,w.loadAddon(i),w.loadAddon(new zr.WebLinksAddon),w.open(O),i.fit(),w.onData(r=>{onData&&k&&onData(k,r)}),w.onResize(({cols:r,rows:h})=>{onResize&&k&&onResize(k,r,h)});const e=new ResizeObserver(()=>{i.fit()});return e.observe(O),()=>{e.disconnect()}}),xt(()=>{n&&n(),w&&w.dispose()});function l(e){w&&w.write(e)}function u(e){w&&w.writeln(e)}function g(){w&&w.clear()}function c(){w&&w.focus()}function t(){return w?{cols:w.cols,rows:w.rows}:{cols:80,rows:24}}function s(e){ze[e?"unshift":"push"](()=>{O=e,b(0,O)})}return m.$$set=e=>{"sessionId"in e&&b(1,k=e.sessionId),"session"in e&&b(2,x=e.session)},[O,k,x,l,u,g,c,t,s]}class Vr extends Ne{constructor(f){super(),We(this,f,qr,Kr,Pe,{sessionId:1,session:2,write:3,writeln:4,clear:5,focus:6,getSize:7})}get write(){return this.$$.ctx[3]}get writeln(){return this.$$.ctx[4]}get clear(){return this.$$.ctx[5]}get focus(){return this.$$.ctx[6]}get getSize(){return this.$$.ctx[7]}}const{Map:ur}=kr;function zt(m,f,b){const k=m.slice();return k[24]=f[b],k[25]=f,k[26]=b,k}function Kt(m,f,b){const k=m.slice();return k[24]=f[b],k}function Gr(m){let f=[],b=new ur,k,x=Te(m[1]);const O=w=>w[24].sessionId;for(let w=0;w<x.length;w+=1){let i=Kt(m,x,w),o=O(i);b.set(o,f[w]=qt(o,i))}return{c(){for(let w=0;w<f.length;w+=1)f[w].c();k=ut()},m(w,i){for(let o=0;o<f.length;o+=1)f[o]&&f[o].m(w,i);ne(w,k,i)},p(w,i){i&1022&&(x=Te(w[1]),f=it(f,i,O,1,w,x,b,k.parentNode,gt,qt,k,Kt))},d(w){w&&se(k);for(let i=0;i<f.length;i+=1)f[i].d(w)}}}function Xr(m){let f;return{c(){f=F("div"),f.textContent="没有活动连接",R(f,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(b,k){ne(b,f,k)},p:he,d(b){b&&se(f)}}}function Jr(m){let f,b=(m[24].tabName||m[24].connection.name)+"",k;return{c(){f=F("span"),k=oe(b),R(f,"class","text-sm font-medium truncate flex-1")},m(x,O){ne(x,f,O),L(f,k)},p(x,O){O&2&&b!==(b=(x[24].tabName||x[24].connection.name)+"")&&ue(k,b)},d(x){x&&se(f)}}}function Yr(m){let f,b,k;return{c(){f=F("input"),R(f,"type","text"),R(f,"class","flex-1 bg-transparent text-sm outline-none px-1"),R(f,"focus","")},m(x,O){ne(x,f,O),ce(f,m[3]),b||(k=[ae(f,"input",m[13]),ae(f,"blur",m[8]),ae(f,"keydown",m[9])],b=!0)},p(x,O){O&8&&f.value!==x[3]&&ce(f,x[3])},d(x){x&&se(f),b=!1,ke(k)}}}function qt(m,f){let b,k,x,O,w,i,o,a,d,n;function l(e,r){return e[2]===e[24].sessionId?Yr:Jr}let u=l(f),g=u(f);function c(...e){return f[14](f[24],...e)}function t(){return f[15](f[24])}function s(){return f[16](f[24])}return{key:m,first:null,c(){b=F("div"),k=F("div"),O=z(),g.c(),w=z(),i=F("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=z(),R(k,"class",x=Mt(`w-2 h-2 rounded-full flex-shrink-0 ${f[24].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-o6eji6"),R(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),R(b,"class",a="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(f[4]===f[24].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),this.first=b},m(e,r){ne(e,b,r),L(b,k),L(b,O),g.m(b,null),L(b,w),L(b,i),L(b,o),d||(n=[ae(i,"click",c),ae(b,"click",t),ae(b,"dblclick",s)],d=!0)},p(e,r){f=e,r&2&&x!==(x=Mt(`w-2 h-2 rounded-full flex-shrink-0 ${f[24].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-o6eji6")&&R(k,"class",x),u===(u=l(f))&&g?g.p(f,r):(g.d(1),g=u(f),g&&(g.c(),g.m(b,w))),r&18&&a!==(a="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(f[4]===f[24].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&R(b,"class",a)},d(e){e&&se(b),g.d(),d=!1,ke(n)}}}function Zr(m){let f;return{c(){f=F("div"),f.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',R(f,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(b,k){ne(b,f,k)},p:he,i:he,o:he,d(b){b&&se(f)}}}function Qr(m){let f=[],b=new ur,k,x,O=Te(m[1]);const w=i=>i[24].sessionId;for(let i=0;i<O.length;i+=1){let o=zt(m,O,i),a=w(o);b.set(a,f[i]=Vt(a,o))}return{c(){for(let i=0;i<f.length;i+=1)f[i].c();k=ut()},m(i,o){for(let a=0;a<f.length;a+=1)f[a]&&f[a].m(i,o);ne(i,k,o),x=!0},p(i,o){o&3091&&(O=Te(i[1]),_t(),f=it(f,o,w,1,i,O,b,k.parentNode,Tr,Vt,k,zt),pt())},i(i){if(!x){for(let o=0;o<O.length;o+=1)Se(f[o]);x=!0}},o(i){for(let o=0;o<f.length;o+=1)Ce(f[o]);x=!1},d(i){i&&se(k);for(let o=0;o<f.length;o+=1)f[o].d(i)}}}function ei(m){let f;return{c(){f=F("div"),R(f,"class","flex-1 hidden")},m(b,k){ne(b,f,k)},p:he,i:he,o:he,d(b){b&&se(f)}}}function ti(m){let f,b,k=m[24].connection.username+"",x,O,w=m[24].connection.host+"",i,o,a=m[24].connection.port+"",d,n,l,u,g,c,t=m[24],s;const e=()=>m[17](c,t),r=()=>m[17](null,t);let h={sessionId:m[24].sessionId,session:m[24],onData:m[10],onResize:m[11]};return c=new Vr({props:h}),e(),{c(){f=F("div"),b=F("div"),x=oe(k),O=oe("@"),i=oe(w),o=oe(":"),d=oe(a),n=z(),l=F("div"),l.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 01-2 2z"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-6 0a2 2 0 00-2 2v4a2 2 0 002 2m0 0v4a2 2 0 002 2v-4a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 01-2 2z"></path></svg></button>',u=z(),g=F("div"),Ue(c.$$.fragment),R(b,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),R(l,"class","flex items-center gap-1"),R(f,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),R(g,"class","flex-1 overflow-hidden")},m(p,v){ne(p,f,v),L(f,b),L(b,x),L(b,O),L(b,i),L(b,o),L(b,d),L(f,n),L(f,l),ne(p,u,v),ne(p,g,v),He(c,g,null),s=!0},p(p,v){(!s||v&2)&&k!==(k=p[24].connection.username+"")&&ue(x,k),(!s||v&2)&&w!==(w=p[24].connection.host+"")&&ue(i,w),(!s||v&2)&&a!==(a=p[24].connection.port+"")&&ue(d,a),t!==p[24]&&(r(),t=p[24],e());const S={};v&2&&(S.sessionId=p[24].sessionId),v&2&&(S.session=p[24]),c.$set(S)},i(p){s||(Se(c.$$.fragment,p),s=!0)},o(p){Ce(c.$$.fragment,p),s=!1},d(p){p&&(se(f),se(u),se(g)),r(),Fe(c)}}}function Vt(m,f){let b,k,x,O,w,i;const o=[ti,ei],a=[];function d(n,l){return n[4]===n[24].sessionId?0:1}return k=d(f),x=a[k]=o[k](f),{key:m,first:null,c(){b=F("div"),x.c(),O=z(),R(b,"class",w="terminal-wrapper flex-1 flex flex-col "+(f[4]===f[24].sessionId?"active":"inactive")+" svelte-o6eji6"),this.first=b},m(n,l){ne(n,b,l),a[k].m(b,null),L(b,O),i=!0},p(n,l){f=n;let u=k;k=d(f),k===u?a[k].p(f,l):(_t(),Ce(a[u],1,1,()=>{a[u]=null}),pt(),x=a[k],x?x.p(f,l):(x=a[k]=o[k](f),x.c()),Se(x,1),x.m(b,O)),(!i||l&18&&w!==(w="terminal-wrapper flex-1 flex flex-col "+(f[4]===f[24].sessionId?"active":"inactive")+" svelte-o6eji6"))&&R(b,"class",w)},i(n){i||(Se(x),i=!0)},o(n){Ce(x),i=!1},d(n){n&&se(b),a[k].d()}}}function ri(m){let f,b,k,x,O,w;function i(u,g){return u[1].length===0?Xr:Gr}let o=i(m),a=o(m);const d=[Qr,Zr],n=[];function l(u,g){return u[1].length>0?0:1}return x=l(m),O=n[x]=d[x](m),{c(){f=F("div"),b=F("div"),a.c(),k=z(),O.c(),R(b,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),R(f,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(u,g){ne(u,f,g),L(f,b),a.m(b,null),L(f,k),n[x].m(f,null),w=!0},p(u,[g]){o===(o=i(u))&&a?a.p(u,g):(a.d(1),a=o(u),a&&(a.c(),a.m(b,null)));let c=x;x=l(u),x===c?n[x].p(u,g):(_t(),Ce(n[c],1,1,()=>{n[c]=null}),pt(),O=n[x],O?O.p(u,g):(O=n[x]=d[x](u),O.c()),Se(O,1),O.m(f,null))},i(u){w||(Se(O),w=!0)},o(u){Ce(O),w=!1},d(u){u&&se(f),a.d(),n[x].d()}}}function ii(m,f,b){let k,x;et(m,ht,y=>b(12,k=y)),et(m,ot,y=>b(4,x=y));let O={},w=[],i=new Map;async function o(y){const D=i.get(y);D&&(D(),i.delete(y)),delete O[y];const{CloseSSH:A}=window.wailsBindings||{};if(typeof A=="function")try{await A(y)}catch(B){console.error("Failed to close session:",B)}ht.update(B=>(B.delete(y),new Map(B)));const T=Array.from(k.keys());x===y&&(T.length>0?ot.set(T[0]):ot.set(null))}function a(y){k.has(y)&&(ot.set(y),setTimeout(()=>{const D=O[y];if(D){D.focus();const A=D.getSize(),{ResizeSSH:T}=window.wailsBindings||{};typeof T=="function"&&T(y,A.cols,A.rows).catch(console.error)}},50))}function d(y,D){D.stopPropagation();const A=k.get(y);A&&(A.connected&&!confirm("确定关闭此 SSH 会话吗？")||o(y))}function n(y,D){const A=k.get(y);A&&(A.tabName=D.trim(),ht.update(T=>(T.set(y,A),new Map(T))))}let l=null,u="";function g(y){const D=k.get(y);D&&(b(2,l=y),b(3,u=D.tabName||D.connection.name))}function c(){l&&u.trim()&&n(l,u.trim()),b(2,l=null),b(3,u="")}function t(){b(2,l=null),b(3,u="")}function s(y){y.key==="Enter"?c():y.key==="Escape"&&t()}function e(y,D){if(!k.has(y))return;const{SendSSHData:A}=window.wailsBindings||{};typeof A=="function"&&A(y,D).catch(T=>{console.error("Failed to send data:",T)})}function r(y,D,A){if(!k.has(y))return;const{ResizeSSH:T}=window.wailsBindings||{};typeof T=="function"&&T(y,D,A).catch(B=>{console.error("Failed to resize terminal:",B)})}xt(()=>{i.forEach(y=>{y()})}),ft(()=>{window.wailsBindings&&console.log("Wails bindings already loaded")});function h(){u=this.value,b(3,u)}const p=(y,D)=>d(y.sessionId,D),v=y=>a(y.sessionId),S=y=>g(y.sessionId);function _(y,D){ze[y?"unshift":"push"](()=>{O[D.sessionId]=y,b(0,O)})}return m.$$.update=()=>{m.$$.dirty&4096&&b(1,w=Array.from(k.values()))},[O,w,l,u,x,a,d,g,c,s,e,r,k,h,p,v,S,_]}class si extends Ne{constructor(f){super(),We(this,f,ii,ri,Pe,{})}}function Gt(m,f,b){const k=m.slice();return k[8]=f[b],k[10]=b,k}function ni(m){let f,b,k,x;return{c(){f=F("div"),b=z(),k=pe("svg"),x=pe("path"),R(f,"class","w-3"),R(x,"stroke-linecap","round"),R(x,"stroke-linejoin","round"),R(x,"stroke-width","2"),R(x,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),R(k,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),R(k,"fill","none"),R(k,"stroke","currentColor"),R(k,"viewBox","0 0 24 24")},m(O,w){ne(O,f,w),ne(O,b,w),ne(O,k,w),L(k,x)},p:he,d(O){O&&(se(f),se(b),se(k))}}}function oi(m){let f,b,k,x;function O(o,a){return a&3&&(f=null),f==null&&(f=!!o[0].has(`${dt}/${o[8].name}`)),f?li:ai}let w=O(m,-1),i=w(m);return{c(){i.c(),b=z(),k=pe("svg"),x=pe("path"),R(x,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),R(k,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),R(k,"fill","currentColor"),R(k,"viewBox","0 0 24 24")},m(o,a){i.m(o,a),ne(o,b,a),ne(o,k,a),L(k,x)},p(o,a){w!==(w=O(o,a))&&(i.d(1),i=w(o),i&&(i.c(),i.m(b.parentNode,b)))},d(o){o&&(se(b),se(k)),i.d(o)}}}function ai(m){let f,b;return{c(){f=pe("svg"),b=pe("path"),R(b,"stroke-linecap","round"),R(b,"stroke-linejoin","round"),R(b,"stroke-width","2"),R(b,"d","M9 5l7 7-7 7"),R(f,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),R(f,"fill","none"),R(f,"stroke","currentColor"),R(f,"viewBox","0 0 24 24")},m(k,x){ne(k,f,x),L(f,b)},d(k){k&&se(f)}}}function li(m){let f,b;return{c(){f=pe("svg"),b=pe("path"),R(b,"stroke-linecap","round"),R(b,"stroke-linejoin","round"),R(b,"stroke-width","2"),R(b,"d","M19 9l-7 7-7-7"),R(f,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),R(f,"fill","none"),R(f,"stroke","currentColor"),R(f,"viewBox","0 0 24 24")},m(k,x){ne(k,f,x),L(f,b)},d(k){k&&se(f)}}}function Xt(m){let f,b,k=m[8].size+"",x,O,w,i,o,a=m[8].modified+"",d;return{c(){f=F("div"),b=F("span"),x=oe(k),O=z(),w=F("span"),w.textContent="•",i=z(),o=F("span"),d=oe(a),R(f,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2")},m(n,l){ne(n,f,l),L(f,b),L(b,x),L(f,O),L(f,w),L(f,i),L(f,o),L(o,d)},p(n,l){l&2&&k!==(k=n[8].size+"")&&ue(x,k),l&2&&a!==(a=n[8].modified+"")&&ue(d,a)},d(n){n&&se(f)}}}function Jt(m,f){let b,k,x,O,w=f[8].name+"",i,o,a,d,n=f[8].permissions+"",l,u,g,c;function t(p,v){return p[8].type==="directory"?oi:ni}let s=t(f),e=s(f),r=f[8].type==="file"&&Xt(f);function h(){return f[5](f[8])}return{key:m,first:null,c(){b=F("div"),e.c(),k=z(),x=F("div"),O=F("div"),i=oe(w),o=z(),r&&r.c(),a=z(),d=F("span"),l=oe(n),u=z(),R(O,"class","text-gray-900 dark:text-white font-medium truncate"),R(x,"class","flex-1 min-w-0"),R(d,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]"),R(b,"class","group flex items-center gap-2 px-3 py-2 hover:bg-purple-50 dark:hover:bg-purple-900/20 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg"),this.first=b},m(p,v){ne(p,b,v),e.m(b,null),L(b,k),L(b,x),L(x,O),L(O,i),L(x,o),r&&r.m(x,null),L(b,a),L(b,d),L(d,l),L(b,u),g||(c=ae(b,"click",h),g=!0)},p(p,v){f=p,s===(s=t(f))&&e?e.p(f,v):(e.d(1),e=s(f),e&&(e.c(),e.m(b,k))),v&2&&w!==(w=f[8].name+"")&&ue(i,w),f[8].type==="file"?r?r.p(f,v):(r=Xt(f),r.c(),r.m(x,null)):r&&(r.d(1),r=null),v&2&&n!==(n=f[8].permissions+"")&&ue(l,n)},d(p){p&&se(b),e.d(),r&&r.d(),g=!1,c()}}}function hi(m){let f,b,k,x,O,w,i,o,a,d,n,l,u,g,c,t,s,e,r,h,p=[],v=new Map,S,_,y=Te(m[1]);const D=A=>A[10];for(let A=0;A<y.length;A+=1){let T=Gt(m,y,A),B=D(T);v.set(B,p[A]=Jt(B,T))}return{c(){f=F("div"),b=F("div"),k=F("div"),x=F("h3"),x.textContent="文件管理",O=z(),w=F("div"),i=F("button"),i.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>',o=z(),a=F("button"),a.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>',d=z(),n=F("button"),n.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0L8 8m4-4V4"></path></svg>',l=z(),u=F("div"),g=F("button"),g.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',c=z(),t=F("span"),t.textContent="/",s=z(),e=F("span"),e.textContent=`${dt.split("/").filter(Boolean).join(" / ")}`,r=z(),h=F("div");for(let A=0;A<p.length;A+=1)p[A].c();R(x,"class","text-sm font-semibold text-gray-900 dark:text-white"),R(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),R(i,"title","刷新"),R(a,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),R(a,"title","上传"),R(n,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),R(n,"title","下载"),R(w,"class","flex items-center gap-1"),R(k,"class","flex items-center justify-between mb-2"),R(g,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),R(t,"class","text-gray-400 dark:text-gray-500"),R(e,"class","text-purple-600 dark:text-purple-400 font-medium"),R(u,"class","flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),R(b,"class","p-3 border-b border-gray-200 dark:border-gray-700"),R(h,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),R(f,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(A,T){ne(A,f,T),L(f,b),L(b,k),L(k,x),L(k,O),L(k,w),L(w,i),L(w,o),L(w,a),L(w,d),L(w,n),L(b,l),L(b,u),L(u,g),L(u,c),L(u,t),L(u,s),L(u,e),L(f,r),L(f,h);for(let B=0;B<p.length;B+=1)p[B]&&p[B].m(h,null);S||(_=[ae(i,"click",m[3]),ae(a,"click",m[4])],S=!0)},p(A,[T]){T&7&&(y=Te(A[1]),p=it(p,T,D,1,A,y,v,h,gt,Jt,null,Gt))},i:he,o:he,d(A){A&&se(f);for(let T=0;T<p.length;T+=1)p[T].d();S=!1,ke(_)}}}let dt="/home/user";function ci(m,f,b){let k=new Set(["/home/user"]),x=null,O=[{name:"Documents",type:"directory",modified:"2024-01-20 10:30",permissions:"drwxr-xr-x"},{name:"Downloads",type:"directory",modified:"2024-01-20 09:15",permissions:"drwxr-xr-x"},{name:"Projects",type:"directory",modified:"2024-01-22 14:20",permissions:"drwxr-xr-x"},{name:"config.json",type:"file",size:"2.4 KB",modified:"2024-01-22 11:45",permissions:"-rw-r--r--"},{name:"deploy.sh",type:"file",size:"1.8 KB",modified:"2024-01-21 16:30",permissions:"-rwxr-xr-x"},{name:"README.md",type:"file",size:"4.2 KB",modified:"2024-01-20 08:00",permissions:"-rw-r--r--"},{name:"package.json",type:"file",size:"1.2 KB",modified:"2024-01-19 15:20",permissions:"-rw-r--r--"}];function w(d){const n=new Set(k),l=`${dt}/${d}`;n.has(l)?n.delete(l):n.add(l),b(0,k=n)}async function i(){if(!x)return;const{ListFiles:d}=window.wailsBindings||{};if(typeof d=="function")try{const n=await d(x,dt);n&&b(1,O=n)}catch(n){console.error("Failed to refresh files:",n)}}async function o(){if(!x)return;const{SelectUploadFiles:d,UploadFile:n}=window.wailsBindings||{};if(typeof d=="function")try{const l=await d();l&&l.length>0&&console.log("Selected files to upload:",l)}catch(l){console.error("Failed to select files:",l)}}return onMount(()=>{const d=n=>{x=n.detail,x&&i()};return window.addEventListener("active-session-changed",d),()=>{window.removeEventListener("active-session-changed",d)}}),[k,O,w,i,o,d=>d.type==="directory"&&w(d.name)]}class di extends Ne{constructor(f){super(),We(this,f,ci,hi,Pe,{})}}function ui(m){let f,b,k,x,O,w=m[1]?"实时数据获取中...":"请先连接到服务器",i,o,a,d,n,l,u,g,c=m[0].cpu+"",t,s,e,r,h,p,v,S,_,y,D=m[0].memory+"",A,T,B,W,$,K,q,V,C,M,P=m[0].disk+"",H,U,G,Q,Z,I,E,j,N,J,X,re,Y,te,fe,ee,me=m[0].network.in.toFixed(1)+"",Me,Ie,we,xe,_e,Be,be,ve=m[0].network.out.toFixed(1)+"",Oe,Ee,Ae,ye;return{c(){f=F("div"),b=F("div"),k=F("h3"),k.textContent="服务器监控",x=z(),O=F("div"),i=oe(w),o=z(),a=F("div"),d=F("div"),n=F("div"),l=F("div"),l.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',u=z(),g=F("span"),t=oe(c),s=oe("%"),e=z(),r=F("div"),r.textContent="CPU 图表待实现",h=z(),p=F("div"),v=F("div"),S=F("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',_=z(),y=F("span"),A=oe(D),T=oe("%"),B=z(),W=F("div"),W.textContent="内存图表待实现",$=z(),K=F("div"),q=F("div"),V=F("div"),V.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',C=z(),M=F("span"),H=oe(P),U=oe("%"),G=z(),Q=F("div"),Z=F("div"),I=z(),E=F("div"),E.innerHTML="<span>已用 156 GB</span> <span>总计 200 GB</span>",j=z(),N=F("div"),J=F("div"),J.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',X=z(),re=F("div"),Y=F("div"),te=F("div"),te.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',fe=z(),ee=F("span"),Me=oe(me),Ie=oe(" MB/s"),we=z(),xe=F("div"),_e=F("div"),_e.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',Be=z(),be=F("span"),Oe=oe(ve),Ee=oe(" MB/s"),Ae=z(),ye=F("div"),ye.innerHTML='<div class="text-xs font-semibold text-gray-900 dark:text-white mb-2">系统信息</div> <div class="space-y-1.5 text-[10px]"><div class="flex justify-between py-1"><span class="text-gray-600 dark:text-gray-400">操作系统</span> <span class="text-gray-900 dark:text-white font-medium">Ubuntu 22.04 LTS</span></div> <div class="flex justify-between py-1"><span class="text-gray-600 dark:text-gray-400">内核版本</span> <span class="text-gray-900 dark:text-white font-medium">5.15.0-91-generic</span></div> <div class="flex justify-between py-1"><span class="text-gray-600 dark:text-gray-400">运行时间</span> <span class="text-gray-900 dark:text-white font-medium">15天 7小时 32分</span></div> <div class="flex justify-between py-1"><span class="text-gray-600 dark:text-gray-400">进程数</span> <span class="text-gray-900 dark:text-white font-medium">187</span></div></div>',R(k,"class","text-sm font-semibold text-gray-900 dark:text-white"),R(O,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),R(b,"class","p-3 border-b border-gray-200 dark:border-gray-700"),R(l,"class","flex items-center gap-2"),R(g,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Re(g,"color",$e(m[0].cpu)),R(n,"class","flex items-center justify-between mb-2"),R(r,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg flex items-center justify-center text-xs text-gray-400"),R(d,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),R(S,"class","flex items-center gap-2"),R(y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Re(y,"color",$e(m[0].memory)),R(v,"class","flex items-center justify-between mb-2"),R(W,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg flex items-center justify-center text-xs text-gray-400"),R(p,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),R(V,"class","flex items-center gap-2"),R(M,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Re(M,"color",$e(m[0].disk)),R(q,"class","flex items-center justify-between mb-2"),R(Z,"class","h-2 rounded-full transition-all duration-300"),Re(Z,"width",m[0].disk+"%"),Re(Z,"background-color",$e(m[0].disk)),R(Q,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),R(E,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),R(K,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),R(J,"class","flex items-center gap-2 mb-3"),R(te,"class","flex items-center gap-2"),R(ee,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),R(Y,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),R(_e,"class","flex items-center gap-2"),R(be,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),R(xe,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),R(re,"class","space-y-2"),R(N,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),R(ye,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),R(a,"class","p-3 space-y-3"),R(f,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(de,ie){ne(de,f,ie),L(f,b),L(b,k),L(b,x),L(b,O),L(O,i),L(f,o),L(f,a),L(a,d),L(d,n),L(n,l),L(n,u),L(n,g),L(g,t),L(g,s),L(d,e),L(d,r),L(a,h),L(a,p),L(p,v),L(v,S),L(v,_),L(v,y),L(y,A),L(y,T),L(p,B),L(p,W),L(a,$),L(a,K),L(K,q),L(q,V),L(q,C),L(q,M),L(M,H),L(M,U),L(K,G),L(K,Q),L(Q,Z),L(K,I),L(K,E),L(a,j),L(a,N),L(N,J),L(N,X),L(N,re),L(re,Y),L(Y,te),L(Y,fe),L(Y,ee),L(ee,Me),L(ee,Ie),L(re,we),L(re,xe),L(xe,_e),L(xe,Be),L(xe,be),L(be,Oe),L(be,Ee),L(a,Ae),L(a,ye)},p(de,[ie]){ie&2&&w!==(w=de[1]?"实时数据获取中...":"请先连接到服务器")&&ue(i,w),ie&1&&c!==(c=de[0].cpu+"")&&ue(t,c),ie&1&&Re(g,"color",$e(de[0].cpu)),ie&1&&D!==(D=de[0].memory+"")&&ue(A,D),ie&1&&Re(y,"color",$e(de[0].memory)),ie&1&&P!==(P=de[0].disk+"")&&ue(H,P),ie&1&&Re(M,"color",$e(de[0].disk)),ie&1&&Re(Z,"width",de[0].disk+"%"),ie&1&&Re(Z,"background-color",$e(de[0].disk)),ie&1&&me!==(me=de[0].network.in.toFixed(1)+"")&&ue(Me,me),ie&1&&ve!==(ve=de[0].network.out.toFixed(1)+"")&&ue(Oe,ve)},i:he,o:he,d(de){de&&se(f)}}}function $e(m){return m<50?"#10b981":m<80?"#f59e0b":"#ef4444"}function fi(m,f,b){let k={cpu:45,memory:62,disk:78,network:{in:125.5,out:89.3}},x=null,O=null;async function w(){if(!x)return;const{GetMonitoringData:i}=window.wailsBindings||{};if(typeof i=="function")try{const o=await i(x);o&&b(0,k={cpu:o.cpu||45,memory:o.memory||62,disk:o.disk||78,network:o.network||{in:125.5,out:89.3}})}catch(o){console.error("Failed to fetch monitoring data:",o)}}return ft(()=>{const i=o=>{b(1,x=o.detail),x&&w()};return window.addEventListener("active-session-changed",i),O=setInterval(w,2e3),()=>{window.removeEventListener("active-session-changed",i),clearInterval(O)}}),xt(()=>{O&&clearInterval(O)}),[k,x]}class _i extends Ne{constructor(f){super(),We(this,f,fi,ui,Pe,{})}}function Yt(m,f,b){const k=m.slice();return k[13]=f[b],k}function Zt(m){var A;let f,b,k,x,O,w,i,o,a,d,n,l=[],u=new Map,g,c,t,s=(((A=m[4].find(m[9]))==null?void 0:A.name)||"选择工具")+"",e,r,h,p,v=Te(m[4]);const S=T=>T[13].id;for(let T=0;T<v.length;T+=1){let B=Yt(m,v,T),W=S(B);u.set(W,l[T]=Qt(W,B))}function _(T,B){return T[1]==="json"?gi:pi}let y=_(m),D=y(m);return{c(){f=F("div"),b=F("div"),k=z(),x=F("div"),O=F("div"),w=F("div"),i=F("h3"),i.textContent="开发工具",o=z(),a=F("button"),a.innerHTML='<svg class="w-4 h-4 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',d=z(),n=F("div");for(let T=0;T<l.length;T+=1)l[T].c();g=z(),c=F("div"),t=F("h2"),e=oe(s),r=z(),D.c(),R(b,"class","absolute inset-0 bg-black/20 backdrop-blur-sm"),R(i,"class","text-sm font-semibold text-gray-900 dark:text-white"),R(a,"class","p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors"),R(w,"class","flex items-center justify-between mb-4"),R(n,"class","space-y-1"),R(O,"class","w-64 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 p-4"),R(t,"class","text-lg font-semibold text-gray-900 dark:text-white mb-6"),R(c,"class","flex-1 p-6 overflow-y-auto"),R(x,"class","relative w-full max-w-4xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl m-4 max-h-[80vh] overflow-hidden flex"),R(f,"class","fixed inset-0 z-50 flex items-start justify-center pt-16"),R(f,"role","dialog"),R(f,"aria-modal","true")},m(T,B){ne(T,f,B),L(f,b),L(f,k),L(f,x),L(x,O),L(O,w),L(w,i),L(w,o),L(w,a),L(O,d),L(O,n);for(let W=0;W<l.length;W+=1)l[W]&&l[W].m(n,null);L(x,g),L(x,c),L(c,t),L(t,e),L(c,r),D.m(c,null),h||(p=[ae(a,"click",m[7]),ae(f,"click",m[6])],h=!0)},p(T,B){var W;B&18&&(v=Te(T[4]),l=it(l,B,S,1,T,v,u,n,gt,Qt,null,Yt)),B&2&&s!==(s=(((W=T[4].find(T[9]))==null?void 0:W.name)||"选择工具")+"")&&ue(e,s),y===(y=_(T))&&D?D.p(T,B):(D.d(1),D=y(T),D&&(D.c(),D.m(c,null)))},d(T){T&&se(f);for(let B=0;B<l.length;B+=1)l[B].d();D.d(),h=!1,ke(p)}}}function Qt(m,f){let b,k,x,O,w=f[13].name+"",i,o,a,d,n,l;function u(){return f[8](f[13])}return{key:m,first:null,c(){b=F("button"),k=F("span"),k.textContent=`${f[13].icon}`,x=z(),O=F("span"),i=oe(w),a=z(),R(k,"class","text-xl"),R(O,"class",o=`text-sm font-medium ${f[1]===f[13].id?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"}`),R(b,"class",d="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all "+(f[1]===f[13].id?"bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-800")),this.first=b},m(g,c){ne(g,b,c),L(b,k),L(b,x),L(b,O),L(O,i),L(b,a),n||(l=ae(b,"click",u),n=!0)},p(g,c){f=g,c&2&&o!==(o=`text-sm font-medium ${f[1]===f[13].id?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"}`)&&R(O,"class",o),c&2&&d!==(d="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all "+(f[1]===f[13].id?"bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-800"))&&R(b,"class",d)},d(g){g&&se(b),n=!1,l()}}}function pi(m){var x;let f,b=((x=m[4].find(m[12]))==null?void 0:x.name)+" 功能待实现",k;return{c(){f=F("div"),k=oe(b),R(f,"class","text-center py-12 text-gray-500 dark:text-gray-400")},m(O,w){ne(O,f,w),L(f,k)},p(O,w){var i;w&2&&b!==(b=((i=O[4].find(O[12]))==null?void 0:i.name)+" 功能待实现")&&ue(k,b)},d(O){O&&se(f)}}}function gi(m){let f,b,k,x,O,w,i,o,a,d,n,l,u,g;return{c(){f=F("div"),b=F("div"),k=F("label"),k.textContent="输入 JSON",x=z(),O=F("textarea"),w=z(),i=F("button"),i.textContent="格式化",o=z(),a=F("div"),d=F("label"),d.textContent="输出",n=z(),l=F("textarea"),R(k,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(O,"placeholder","{&quot;name&quot;: &quot;test&quot;}"),R(O,"class","w-full h-32 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm font-mono resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 dark:text-white"),R(i,"class","w-full px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors"),R(d,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),l.readOnly=!0,R(l,"class","w-full h-32 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm font-mono resize-none focus:outline-none dark:text-white"),R(f,"class","space-y-4")},m(c,t){ne(c,f,t),L(f,b),L(b,k),L(b,x),L(b,O),ce(O,m[2]),L(f,w),L(f,i),L(f,o),L(f,a),L(a,d),L(a,n),L(a,l),ce(l,m[3]),u||(g=[ae(O,"input",m[10]),ae(i,"click",m[5]),ae(l,"input",m[11])],u=!0)},p(c,t){t&4&&ce(O,c[2]),t&8&&ce(l,c[3])},d(c){c&&se(f),u=!1,ke(g)}}}function vi(m){let f,b=m[0]&&Zt(m);return{c(){b&&b.c(),f=ut()},m(k,x){b&&b.m(k,x),ne(k,f,x)},p(k,[x]){k[0]?b?b.p(k,x):(b=Zt(k),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},i:he,o:he,d(k){k&&se(f),b&&b.d(k)}}}function mi(m,f,b){let{isOpen:k=!1}=f,x=null,O="",w="";const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-600"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-600"},{id:"hash",name:"Hash 计算",icon:"#️⃣",color:"text-green-600"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-600"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-600"}];function o(){try{const t=JSON.parse(O);b(3,w=JSON.stringify(t,null,2))}catch(t){b(3,w="JSON 格式错误: "+t.message)}}function a(t){t.target===t.currentTarget&&b(0,k=!1)}const d=()=>b(0,k=!1),n=t=>b(1,x=t.id),l=t=>t.id===x;function u(){O=this.value,b(2,O)}function g(){w=this.value,b(3,w)}const c=t=>t.id===x;return m.$$set=t=>{"isOpen"in t&&b(0,k=t.isOpen)},[k,x,O,w,i,o,a,d,n,l,u,g,c]}class bi extends Ne{constructor(f){super(),We(this,f,mi,vi,Pe,{isOpen:0})}}function er(m){let f,b,k,x,O,w,i,o,a,d,n,l,u,g,c;const t=m[6].default,s=Sr(t,m,m[5],null);return{c(){f=F("div"),b=F("div"),k=z(),x=F("div"),O=F("div"),w=F("h2"),i=oe(m[2]),o=z(),a=F("button"),a.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',d=z(),n=F("div"),s&&s.c(),R(b,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity"),R(w,"class","text-xl font-semibold text-gray-900 dark:text-white"),R(a,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),R(O,"class","flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"),R(n,"class","flex-1 overflow-y-auto p-6"),R(x,"class",l="relative w-full max-w-"+m[3]+" bg-white dark:bg-gray-800 rounded-2xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),R(f,"class","fixed inset-0 z-50 flex items-center justify-center"),R(f,"role","dialog"),R(f,"aria-modal","true")},m(e,r){ne(e,f,r),L(f,b),L(f,k),L(f,x),L(x,O),L(O,w),L(w,i),L(O,o),L(O,a),L(x,d),L(x,n),s&&s.m(n,null),u=!0,g||(c=[ae(a,"click",function(){rt(m[1])&&m[1].apply(this,arguments)}),ae(f,"click",m[4])],g=!0)},p(e,r){m=e,(!u||r&4)&&ue(i,m[2]),s&&s.p&&(!u||r&32)&&wr(s,t,m,m[5],u?yr(t,m[5],r,null):Cr(m[5]),null),(!u||r&8&&l!==(l="relative w-full max-w-"+m[3]+" bg-white dark:bg-gray-800 rounded-2xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"))&&R(x,"class",l)},i(e){u||(Se(s,e),u=!0)},o(e){Ce(s,e),u=!1},d(e){e&&se(f),s&&s.d(e),g=!1,ke(c)}}}function Si(m){let f,b,k=m[0]&&er(m);return{c(){k&&k.c(),f=ut()},m(x,O){k&&k.m(x,O),ne(x,f,O),b=!0},p(x,[O]){x[0]?k?(k.p(x,O),O&1&&Se(k,1)):(k=er(x),k.c(),Se(k,1),k.m(f.parentNode,f)):k&&(_t(),Ce(k,1,1,()=>{k=null}),pt())},i(x){b||(Se(k),b=!0)},o(x){Ce(k),b=!1},d(x){x&&se(f),k&&k.d(x)}}}function yi(m,f,b){let{$$slots:k={},$$scope:x}=f,{isOpen:O=!1}=f,{onClose:w=()=>{}}=f,{title:i=""}=f,{size:o="md"}=f;function a(n){n.target===n.currentTarget&&w()}function d(n){n.key==="Escape"&&O&&w()}return m.$$set=n=>{"isOpen"in n&&b(0,O=n.isOpen),"onClose"in n&&b(1,w=n.onClose),"title"in n&&b(2,i=n.title),"size"in n&&b(3,o=n.size),"$$scope"in n&&b(5,x=n.$$scope)},m.$$.update=()=>{m.$$.dirty&1&&(O?document.addEventListener("keydown",d):document.removeEventListener("keydown",d))},[O,w,i,o,a,x,k]}class wi extends Ne{constructor(f){super(),We(this,f,yi,Si,Pe,{isOpen:0,onClose:1,title:2,size:3})}}function tr(m){let f,b,k,x,O,w,i,o,a,d;return{c(){f=F("div"),b=F("label"),b.innerHTML='数据库类型 <span class="text-red-500">*</span>',k=z(),x=F("select"),O=F("option"),O.textContent="MySQL",w=F("option"),w.textContent="PostgreSQL",i=F("option"),i.textContent="MongoDB",o=F("option"),o.textContent="Redis",R(b,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),O.__value="mysql",ce(O,O.__value),w.__value="postgresql",ce(w,w.__value),i.__value="mongodb",ce(i,i.__value),o.__value="redis",ce(o,o.__value),R(x,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),m[1].dbType===void 0&&ct(()=>m[10].call(x))},m(n,l){ne(n,f,l),L(f,b),L(f,k),L(f,x),L(x,O),L(x,w),L(x,i),L(x,o),Ot(x,m[1].dbType,!0),a||(d=ae(x,"change",m[10]),a=!0)},p(n,l){l&2&&Ot(x,n[1].dbType)},d(n){n&&se(f),a=!1,d()}}}function rr(m){let f,b,k,x,O,w;return{c(){f=F("div"),b=F("label"),b.textContent="数据库名",k=z(),x=F("input"),R(b,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(x,"type","text"),R(x,"placeholder","例如：production_db"),R(x,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){ne(i,f,o),L(f,b),L(f,k),L(f,x),ce(x,m[1].database),O||(w=ae(x,"input",m[15]),O=!0)},p(i,o){o&2&&x.value!==i[1].database&&ce(x,i[1].database)},d(i){i&&se(f),O=!1,w()}}}function Ci(m){let f,b,k,x,O,w,i,o,a,d,n,l,u,g,c,t,s,e,r,h,p,v,S,_,y,D,A,T,B,W,$,K,q,V,C,M,P,H,U,G,Q,Z,I,E,j,N,J,X,re,Y,te,fe,ee,me,Me,Ie,we,xe,_e,Be,be,ve,Oe,Ee,Ae,ye,de,ie,nt,Ke,qe,Dt,Ze,mt,Rt,Le=m[2]==="database"&&tr(m),De=m[2]==="database"&&rr(m);return{c(){f=F("div"),b=F("label"),b.textContent="连接类型",k=z(),x=F("div"),O=F("button"),w=pe("svg"),i=pe("path"),a=z(),d=F("div"),n=oe("SSH"),g=z(),c=F("button"),t=pe("svg"),s=pe("path"),r=z(),h=F("div"),p=oe("数据库"),_=z(),y=F("button"),D=pe("svg"),A=pe("path"),B=z(),W=F("div"),$=oe("Docker"),V=z(),C=F("form"),M=F("div"),P=F("label"),P.innerHTML='连接名称 <span class="text-red-500">*</span>',H=z(),U=F("input"),G=z(),Le&&Le.c(),Q=z(),Z=F("div"),I=F("div"),E=F("label"),E.innerHTML='主机地址 <span class="text-red-500">*</span>',j=z(),N=F("input"),J=z(),X=F("div"),re=F("label"),re.innerHTML='端口 <span class="text-red-500">*</span>',Y=z(),te=F("input"),fe=z(),ee=F("div"),me=F("div"),Me=F("label"),Me.innerHTML='用户名 <span class="text-red-500">*</span>',Ie=z(),we=F("input"),xe=z(),_e=F("div"),Be=F("label"),Be.textContent="密码",be=z(),ve=F("input"),Oe=z(),De&&De.c(),Ee=z(),Ae=F("div"),ye=F("label"),ye.textContent="分组",de=z(),ie=F("input"),nt=z(),Ke=F("div"),qe=F("button"),qe.textContent="取消",Dt=z(),Ze=F("button"),Ze.textContent="添加连接",R(b,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"),R(i,"stroke-linecap","round"),R(i,"stroke-linejoin","round"),R(i,"stroke-width","2"),R(i,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),R(w,"class",o=`w-6 h-6 mx-auto mb-2 ${m[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),R(w,"fill","none"),R(w,"stroke","currentColor"),R(w,"viewBox","0 0 24 24"),R(d,"class",l=`text-sm font-medium ${m[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),R(O,"type","button"),R(O,"class",u=`p-4 rounded-xl border-2 transition-all ${m[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`),R(s,"stroke-linecap","round"),R(s,"stroke-linejoin","round"),R(s,"stroke-width","2"),R(s,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),R(t,"class",e=`w-6 h-6 mx-auto mb-2 ${m[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),R(t,"fill","none"),R(t,"stroke","currentColor"),R(t,"viewBox","0 0 24 24"),R(h,"class",v=`text-sm font-medium ${m[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),R(c,"type","button"),R(c,"class",S=`p-4 rounded-xl border-2 transition-all ${m[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`),R(A,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),R(D,"class",T=`w-6 h-6 mx-auto mb-2 ${m[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),R(D,"fill","currentColor"),R(D,"viewBox","0 0 24 24"),R(W,"class",K=`text-sm font-medium ${m[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),R(y,"type","button"),R(y,"class",q=`p-4 rounded-xl border-2 transition-all ${m[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`),R(x,"class","grid grid-cols-3 gap-3"),R(f,"class","mb-6"),R(P,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(U,"type","text"),U.required=!0,R(U,"placeholder","例如：生产服务器-01"),R(U,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(E,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(N,"type","text"),N.required=!0,R(N,"placeholder","192.168.1.10 或 example.com"),R(N,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(I,"class","col-span-2"),R(re,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(te,"type","text"),te.required=!0,R(te,"placeholder",m[4]()),R(te,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(Z,"class","grid grid-cols-3 gap-3"),R(Me,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(we,"type","text"),we.required=!0,R(we,"placeholder","root"),R(we,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(Be,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(ve,"type","password"),R(ve,"placeholder","••••••••"),R(ve,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(ee,"class","grid grid-cols-2 gap-3"),R(ye,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),R(ie,"type","text"),R(ie,"placeholder","例如：生产环境"),R(ie,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),R(qe,"type","button"),R(qe,"class","flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg font-medium transition-colors"),R(Ze,"type","submit"),R(Ze,"class","flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm"),R(Ke,"class","flex gap-3 pt-4"),R(C,"class","space-y-4")},m(le,ge){ne(le,f,ge),L(f,b),L(f,k),L(f,x),L(x,O),L(O,w),L(w,i),L(O,a),L(O,d),L(d,n),L(x,g),L(x,c),L(c,t),L(t,s),L(c,r),L(c,h),L(h,p),L(x,_),L(x,y),L(y,D),L(D,A),L(y,B),L(y,W),L(W,$),ne(le,V,ge),ne(le,C,ge),L(C,M),L(M,P),L(M,H),L(M,U),ce(U,m[1].name),L(C,G),Le&&Le.m(C,null),L(C,Q),L(C,Z),L(Z,I),L(I,E),L(I,j),L(I,N),ce(N,m[1].host),L(Z,J),L(Z,X),L(X,re),L(X,Y),L(X,te),ce(te,m[1].port),L(C,fe),L(C,ee),L(ee,me),L(me,Me),L(me,Ie),L(me,we),ce(we,m[1].username),L(ee,xe),L(ee,_e),L(_e,Be),L(_e,be),L(_e,ve),ce(ve,m[1].password),L(C,Oe),De&&De.m(C,null),L(C,Ee),L(C,Ae),L(Ae,ye),L(Ae,de),L(Ae,ie),ce(ie,m[1].group),L(C,nt),L(C,Ke),L(Ke,qe),L(Ke,Dt),L(Ke,Ze),mt||(Rt=[ae(O,"click",m[6]),ae(c,"click",m[7]),ae(y,"click",m[8]),ae(U,"input",m[9]),ae(N,"input",m[11]),ae(te,"input",m[12]),ae(we,"input",m[13]),ae(ve,"input",m[14]),ae(ie,"input",m[16]),ae(qe,"click",m[17]),ae(C,"submit",xr(m[3]))],mt=!0)},p(le,ge){ge&4&&o!==(o=`w-6 h-6 mx-auto mb-2 ${le[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&R(w,"class",o),ge&4&&l!==(l=`text-sm font-medium ${le[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&R(d,"class",l),ge&4&&u!==(u=`p-4 rounded-xl border-2 transition-all ${le[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`)&&R(O,"class",u),ge&4&&e!==(e=`w-6 h-6 mx-auto mb-2 ${le[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&R(t,"class",e),ge&4&&v!==(v=`text-sm font-medium ${le[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&R(h,"class",v),ge&4&&S!==(S=`p-4 rounded-xl border-2 transition-all ${le[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`)&&R(c,"class",S),ge&4&&T!==(T=`w-6 h-6 mx-auto mb-2 ${le[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&R(D,"class",T),ge&4&&K!==(K=`text-sm font-medium ${le[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&R(W,"class",K),ge&4&&q!==(q=`p-4 rounded-xl border-2 transition-all ${le[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`)&&R(y,"class",q),ge&2&&U.value!==le[1].name&&ce(U,le[1].name),le[2]==="database"?Le?Le.p(le,ge):(Le=tr(le),Le.c(),Le.m(C,Q)):Le&&(Le.d(1),Le=null),ge&2&&N.value!==le[1].host&&ce(N,le[1].host),ge&2&&te.value!==le[1].port&&ce(te,le[1].port),ge&2&&we.value!==le[1].username&&ce(we,le[1].username),ge&2&&ve.value!==le[1].password&&ce(ve,le[1].password),le[2]==="database"?De?De.p(le,ge):(De=rr(le),De.c(),De.m(C,Ee)):De&&(De.d(1),De=null),ge&2&&ie.value!==le[1].group&&ce(ie,le[1].group)},d(le){le&&(se(f),se(V),se(C)),Le&&Le.d(),De&&De.d(),mt=!1,ke(Rt)}}}function ki(m){let f,b,k;function x(w){m[19](w)}let O={onClose:m[18],title:"添加连接",size:"lg",$$slots:{default:[Ci]},$$scope:{ctx:m}};return m[0]!==void 0&&(O.isOpen=m[0]),f=new wi({props:O}),ze.push(()=>kt(f,"isOpen",x)),{c(){Ue(f.$$.fragment)},m(w,i){He(f,w,i),k=!0},p(w,[i]){const o={};i&1&&(o.onClose=w[18]),i&1048583&&(o.$$scope={dirty:i,ctx:w}),!b&&i&1&&(b=!0,o.isOpen=w[0],Ct(()=>b=!1)),f.$set(o)},i(w){k||(Se(f.$$.fragment,w),k=!0)},o(w){Ce(f.$$.fragment,w),k=!1},d(w){Fe(f,w)}}}function Ei(m,f,b){let{isOpen:k=!1}=f,{onAdd:x=()=>{}}=f,O="ssh",w={name:"",host:"",port:"",username:"",password:"",group:"",dbType:"mysql",database:""};function i(){const S={id:Date.now().toString(),type:O,name:w.name,host:w.host,port:parseInt(w.port),username:w.username,group:w.group||"默认分组",status:"online",...O==="database"&&{dbType:w.dbType,database:w.database}};x(S),b(0,k=!1),b(1,w={name:"",host:"",port:"",username:"",password:"",group:"",dbType:"mysql",database:""})}function o(){switch(O){case"ssh":return"22";case"docker":return"2375";case"database":switch(w.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}const a=()=>b(2,O="ssh"),d=()=>b(2,O="database"),n=()=>b(2,O="docker");function l(){w.name=this.value,b(1,w)}function u(){w.dbType=Dr(this),b(1,w)}function g(){w.host=this.value,b(1,w)}function c(){w.port=this.value,b(1,w)}function t(){w.username=this.value,b(1,w)}function s(){w.password=this.value,b(1,w)}function e(){w.database=this.value,b(1,w)}function r(){w.group=this.value,b(1,w)}const h=()=>b(0,k=!1),p=()=>b(0,k=!1);function v(S){k=S,b(0,k)}return m.$$set=S=>{"isOpen"in S&&b(0,k=S.isOpen),"onAdd"in S&&b(5,x=S.onAdd)},m.$$.update=()=>{m.$$.dirty&2&&w.port===""&&b(1,w.port=o(),w)},[k,w,O,i,o,x,a,d,n,l,u,g,c,t,s,e,r,h,p,v]}class xi extends Ne{constructor(f){super(),We(this,f,Ei,ki,Pe,{isOpen:0,onAdd:5})}}function Li(m){let f,b,k,x,O,w,i,o,a,d,n,l,u,g,c,t,s,e,r,h,p,v,S,_,y,D,A,T,B,W,$,K,q,V,C,M,P,H,U,G,Q,Z,I,E,j;p=new $r({props:{onConnect:Di,onAddClick:m[8]}}),y=new si({}),W=new di({}),V=new _i({});function N(Y){m[9](Y)}let J={onAdd:m[6]};m[2]!==void 0&&(J.isOpen=m[2]),P=new xi({props:J}),ze.push(()=>kt(P,"isOpen",N));function X(Y){m[10](Y)}let re={};return m[1]!==void 0&&(re.isOpen=m[1]),G=new bi({props:re}),ze.push(()=>kt(G,"isOpen",X)),{c(){f=F("div"),b=F("header"),k=F("div"),x=F("div"),x.textContent="SSH",O=z(),w=F("div"),i=F("div"),o=oe("跨平台 SSH 连接工具"),d=z(),n=F("div"),l=oe("Cross-Platform SSH Manager"),g=z(),c=F("div"),t=F("button"),t.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-1.066 2.573c-.94-1.543.826-3.31-2.37a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31.826-2.37a1.724 1.724 0 00-1.065-2.572-1.065c-.426 1.756-2.924 0 3.35a1.724 1.724 0 001.066-2.573c.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="text-sm">开发工具</span>',e=z(),r=F("div"),h=F("div"),Ue(p.$$.fragment),S=z(),_=F("div"),Ue(y.$$.fragment),A=z(),T=F("div"),B=F("div"),Ue(W.$$.fragment),K=z(),q=F("div"),Ue(V.$$.fragment),M=z(),Ue(P.$$.fragment),U=z(),Ue(G.$$.fragment),R(x,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),R(i,"class",a="font-semibold text-sm "+(m[0]==="dark"?"text-white":"text-gray-900")),R(n,"class",u="text-xs "+(m[0]==="dark"?"text-gray-400":"text-gray-500")),R(k,"class","flex items-center gap-3"),R(t,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm"),R(c,"class","ml-auto"),R(b,"class",s="h-14 "+(m[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),R(h,"class",v="flex-shrink-0 transition-all duration-200 "+(m[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r"),Re(h,"width",(m[3]?"0":at)+"px"),Re(h,"min-width",(m[3]?"0":at)+"px"),Pt(h,"collapsed",m[3]),R(_,"class",D="flex-1 min-w-0 "+(m[0]==="dark"?"bg-gray-900":"bg-gray-50")),R(B,"class",$="h-1/2 "+(m[0]==="dark"?"border-gray-700":"border-gray-200")+" border-b"),R(q,"class","h-1/2"),R(T,"class",C="w-80 flex-shrink-0 flex flex-col "+(m[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),R(r,"class","flex-1 flex overflow-hidden"),R(f,"class",Z="h-screen w-full "+m[4]+" "+(m[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900"))},m(Y,te){ne(Y,f,te),L(f,b),L(b,k),L(k,x),L(k,O),L(k,w),L(w,i),L(i,o),L(w,d),L(w,n),L(n,l),L(b,g),L(b,c),L(c,t),L(f,e),L(f,r),L(r,h),He(p,h,null),L(r,S),L(r,_),He(y,_,null),L(r,A),L(r,T),L(T,B),He(W,B,null),L(T,K),L(T,q),He(V,q,null),L(f,M),He(P,f,null),L(f,U),He(G,f,null),I=!0,E||(j=ae(t,"click",m[5]),E=!0)},p(Y,[te]){(!I||te&1&&a!==(a="font-semibold text-sm "+(Y[0]==="dark"?"text-white":"text-gray-900")))&&R(i,"class",a),(!I||te&1&&u!==(u="text-xs "+(Y[0]==="dark"?"text-gray-400":"text-gray-500")))&&R(n,"class",u),(!I||te&1&&s!==(s="h-14 "+(Y[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&R(b,"class",s);const fe={};te&4&&(fe.onAddClick=Y[8]),p.$set(fe),(!I||te&1&&v!==(v="flex-shrink-0 transition-all duration-200 "+(Y[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r"))&&R(h,"class",v),(!I||te&8)&&Re(h,"width",(Y[3]?"0":at)+"px"),(!I||te&8)&&Re(h,"min-width",(Y[3]?"0":at)+"px"),(!I||te&9)&&Pt(h,"collapsed",Y[3]),(!I||te&1&&D!==(D="flex-1 min-w-0 "+(Y[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&R(_,"class",D),(!I||te&1&&$!==($="h-1/2 "+(Y[0]==="dark"?"border-gray-700":"border-gray-200")+" border-b"))&&R(B,"class",$),(!I||te&1&&C!==(C="w-80 flex-shrink-0 flex flex-col "+(Y[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&R(T,"class",C);const ee={};!H&&te&4&&(H=!0,ee.isOpen=Y[2],Ct(()=>H=!1)),P.$set(ee);const me={};!Q&&te&2&&(Q=!0,me.isOpen=Y[1],Ct(()=>Q=!1)),G.$set(me),(!I||te&17&&Z!==(Z="h-screen w-full "+Y[4]+" "+(Y[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")))&&R(f,"class",Z)},i(Y){I||(Se(p.$$.fragment,Y),Se(y.$$.fragment,Y),Se(W.$$.fragment,Y),Se(V.$$.fragment,Y),Se(P.$$.fragment,Y),Se(G.$$.fragment,Y),I=!0)},o(Y){Ce(p.$$.fragment,Y),Ce(y.$$.fragment,Y),Ce(W.$$.fragment,Y),Ce(V.$$.fragment,Y),Ce(P.$$.fragment,Y),Ce(G.$$.fragment,Y),I=!1},d(Y){Y&&se(f),Fe(p),Fe(y),Fe(W),Fe(V),Fe(P),Fe(G),E=!1,j()}}}let at=288;function Di(m){console.log("Connecting to:",m.name,m.host)}function Ri(m,f,b){let k,x,O;et(m,Et,g=>b(0,x=g)),et(m,ht,g=>b(7,O=g));let w=!1,i=!1,o=!1;function a(){b(1,w=!w)}function d(g){Lt.update(c=>[...c,g])}ft(async()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&Et.set("dark");try{const g=await vr(()=>import("./App.js"),[]);window.wailsBindings=g,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(g.default||g).join(", ")}))}catch(g){console.warn("Wails bindings not available yet:",g.message)}});const n=()=>b(2,i=!0);function l(g){i=g,b(2,i)}function u(g){w=g,b(1,w)}return m.$$.update=()=>{m.$$.dirty&128&&Array.from(O.values()),m.$$.dirty&1&&b(4,k=x==="dark"?"dark":"")},[x,w,i,o,k,a,d,O,n,l,u]}class Bi extends Ne{constructor(f){super(),We(this,f,Ri,Li,Pe,{})}}new Bi({target:document.getElementById("app")});
