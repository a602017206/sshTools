var ko=Object.defineProperty;var So=(r,e,t)=>e in r?ko(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var jr=(r,e,t)=>So(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const b of a)if(b.type==="childList")for(const d of b.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const b={};return a.integrity&&(b.integrity=a.integrity),a.referrerPolicy&&(b.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?b.credentials="include":a.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function n(a){if(a.ep)return;a.ep=!0;const b=t(a);fetch(a.href,b)}})();const Co="modulepreload",xo=function(r){return"/"+r},ti={},Cr=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),i=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(t.map(o=>{if(o=xo(o),o in ti)return;ti[o]=!0;const u=o.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${m}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Co,u||(f.as="script"),f.crossOrigin="",f.href=o,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((g,v)=>{f.addEventListener("load",g),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${o}`)))})}))}function b(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return a.then(d=>{for(const i of d||[])i.status==="rejected"&&b(i.reason);return e().catch(b)})};function Oe(){}function Eo(r,e){for(const t in e)r[t]=e[t];return r}function Jn(r){return r()}function ri(){return Object.create(null)}function et(r){r.forEach(Jn)}function tr(r){return typeof r=="function"}function Ct(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Lo(r){return Object.keys(r).length===0}function Gr(r,...e){if(r==null){for(const n of e)n(void 0);return Oe}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Do(r){let e;return Gr(r,t=>e=t)(),e}function Pt(r,e,t){r.$$.on_destroy.push(Gr(e,t))}function Mo(r,e,t,n){if(r){const a=Yn(r,e,t,n);return r[0](a)}}function Yn(r,e,t,n){return r[1]&&n?Eo(t.ctx.slice(),r[1](n(e))):t.ctx}function To(r,e,t,n){return r[2],e.dirty}function Bo(r,e,t,n,a,b){if(a){const d=Yn(e,t,n,b);r.p(d,a)}}function Ao(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function ii(r){return r??""}function Xn(r){return r&&tr(r.destroy)?r.destroy:Oe}const Zn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function l(r,e){r.appendChild(e)}function U(r,e,t){r.insertBefore(e,t||null)}function N(r){r.parentNode&&r.parentNode.removeChild(r)}function Mt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function C(r){return document.createElement(r)}function de(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function G(r){return document.createTextNode(r)}function A(){return G(" ")}function It(){return G("")}function Y(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Ro(r){return function(e){return e.preventDefault(),r.call(this,e)}}function vr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function s(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Oo(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function xr(r){return r===""?null:+r}function Po(r){return Array.from(r.childNodes)}function he(r,e){e=""+e,r.data!==e&&(r.data=e)}function Me(r,e){r.value=e??""}function Re(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function nr(r,e,t){for(let n=0;n<r.options.length;n+=1){const a=r.options[n];if(a.__value===e){a.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Pr(r){const e=r.querySelector(":checked");return e&&e.__value}function Mr(r,e,t){r.classList.toggle(e,!!t)}function Gt(r,e){return new r(e)}let Er;function Sr(r){Er=r}function Qn(){if(!Er)throw new Error("Function called outside component initialization");return Er}function ar(r){Qn().$$.on_mount.push(r)}function Ir(r){Qn().$$.on_destroy.push(r)}const gr=[],gt=[];let mr=[];const Vr=[],$n=Promise.resolve();let Kr=!1;function eo(){Kr||(Kr=!0,$n.then(to))}function Rr(){return eo(),$n}function dr(r){mr.push(r)}function kt(r){Vr.push(r)}const Wr=new Set;let pr=0;function to(){if(pr!==0)return;const r=Er;do{try{for(;pr<gr.length;){const e=gr[pr];pr++,Sr(e),Io(e.$$)}}catch(e){throw gr.length=0,pr=0,e}for(Sr(null),gr.length=0,pr=0;gt.length;)gt.pop()();for(let e=0;e<mr.length;e+=1){const t=mr[e];Wr.has(t)||(Wr.add(t),t())}mr.length=0}while(gr.length);for(;Vr.length;)Vr.pop()();Kr=!1,Wr.clear(),Sr(r)}function Io(r){if(r.fragment!==null){r.update(),et(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(dr)}}function Ho(r){const e=[],t=[];mr.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),mr=e}const Or=new Set;let cr;function Wt(){cr={r:0,c:[],p:cr}}function Nt(){cr.r||et(cr.c),cr=cr.p}function Ge(r,e){r&&r.i&&(Or.delete(r),r.i(e))}function Ze(r,e,t,n){if(r&&r.o){if(Or.has(r))return;Or.add(r),cr.c.push(()=>{Or.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function Ue(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Xt(r,e){r.d(1),e.delete(r.key)}function Fo(r,e){Ze(r,1,1,()=>{e.delete(r.key)})}function Jt(r,e,t,n,a,b,d,i,o,u,m,f){let g=r.length,v=b.length,k=g;const y={};for(;k--;)y[r[k].key]=k;const c=[],p=new Map,h=new Map,_=[];for(k=v;k--;){const E=f(a,b,k),S=t(E);let D=d.get(S);D?_.push(()=>D.p(E,e)):(D=u(S,E),D.c()),p.set(S,c[k]=D),S in y&&h.set(S,Math.abs(k-y[S]))}const w=new Set,L=new Set;function x(E){Ge(E,1),E.m(i,m),d.set(E.key,E),m=E.first,v--}for(;g&&v;){const E=c[v-1],S=r[g-1],D=E.key,B=S.key;E===S?(m=E.first,g--,v--):p.has(B)?!d.has(D)||w.has(D)?x(E):L.has(B)?g--:h.get(D)>h.get(B)?(L.add(D),x(E)):(w.add(B),g--):(o(S,d),g--)}for(;g--;){const E=r[g];p.has(E.key)||o(E,d)}for(;v;)x(c[v-1]);return et(_),c}function St(r,e,t){const n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function ct(r){r&&r.c()}function lt(r,e,t){const{fragment:n,after_update:a}=r.$$;n&&n.m(e,t),dr(()=>{const b=r.$$.on_mount.map(Jn).filter(tr);r.$$.on_destroy?r.$$.on_destroy.push(...b):et(b),r.$$.on_mount=[]}),a.forEach(dr)}function at(r,e){const t=r.$$;t.fragment!==null&&(Ho(t.after_update),et(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function zo(r,e){r.$$.dirty[0]===-1&&(gr.push(r),eo(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function xt(r,e,t,n,a,b,d=null,i=[-1]){const o=Er;Sr(r);const u=r.$$={fragment:null,ctx:[],props:b,update:Oe,not_equal:a,bound:ri(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:ri(),dirty:i,skip_bound:!1,root:e.target||o.$$.root};d&&d(u.root);let m=!1;if(u.ctx=t?t(r,e.props||{},(f,g,...v)=>{const k=v.length?v[0]:g;return u.ctx&&a(u.ctx[f],u.ctx[f]=k)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](k),m&&zo(r,f)),g}):[],u.update(),m=!0,et(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const f=Po(e.target);u.fragment&&u.fragment.l(f),f.forEach(N)}else u.fragment&&u.fragment.c();e.intro&&Ge(r.$$.fragment),lt(r,e.target,e.anchor),to()}Sr(o)}class Et{constructor(){jr(this,"$$");jr(this,"$$set")}$destroy(){at(this,1),this.$destroy=Oe}$on(e,t){if(!tr(t))return Oe;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const a=n.indexOf(t);a!==-1&&n.splice(a,1)}}$set(e){this.$$set&&!Lo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(jo);const _r=[];function Wo(r,e){return{subscribe:ur(r,e).subscribe}}function ur(r,e=Oe){let t;const n=new Set;function a(i){if(Ct(r,i)&&(r=i,t)){const o=!_r.length;for(const u of n)u[1](),_r.push(u,r);if(o){for(let u=0;u<_r.length;u+=2)_r[u][0](_r[u+1]);_r.length=0}}}function b(i){a(i(r))}function d(i,o=Oe){const u=[i,o];return n.add(u),n.size===1&&(t=e(a,b)||Oe),i(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:a,update:b,subscribe:d}}function rr(r,e,t){const n=!Array.isArray(r),a=n?[r]:r;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const b=e.length<2;return Wo(t,(d,i)=>{let o=!1;const u=[];let m=0,f=Oe;const g=()=>{if(m)return;f();const k=e(n?u[0]:u,d,i);b?d(k):f=tr(k)?k:Oe},v=a.map((k,y)=>Gr(k,c=>{u[y]=c,m&=~(1<<y),o&&g()},()=>{m|=1<<y}));return o=!0,g(),function(){et(v),f(),o=!1}})}const Yt=ur([]),No=rr(Yt,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{})),Kt=ur(new Map),Vt=ur(null),ro="ssh-tools-theme";function Uo(){if(typeof window>"u")return null;try{return localStorage.getItem(ro)}catch{return null}}function Vo(r){if(!(typeof window>"u"))try{localStorage.setItem(ro,r)}catch{}}const Ko=Uo(),qo=Ko||"light",yr=ur(qo);function si(r){yr.set(r),Vo(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Go(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const Jo={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},Yo=Go(),Zt=ur({...Jo,...Yo});Zt.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});rr(Zt,r=>r.isDevToolsOpen);rr(Zt,r=>r.isFileManagerOpen);rr(Zt,r=>r.isMonitorOpen);rr(Zt,r=>r.sidebarWidth);rr(Zt,r=>r.rightPanelWidth);rr(Zt,r=>r.fileManagerHeight);function ni(r){Zt.update(e=>({...e,sidebarWidth:r}))}function Xo(r){Zt.update(e=>({...e,rightPanelWidth:r}))}function Zo(r){Zt.update(e=>({...e,fileManagerHeight:r}))}function oi(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y;const c=r[7].default,p=Mo(c,r,r[6],null);return{c(){e=C("div"),t=C("div"),n=A(),a=C("div"),b=C("div"),d=C("h2"),i=G(r[2]),o=A(),u=C("button"),u.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=A(),f=C("div"),p&&p.c(),s(t,"class","absolute inset-0 bg-slate-900/35 dark:bg-black/45 backdrop-blur-sm transition-opacity pointer-events-auto"),s(d,"class","text-base font-semibold text-slate-900 dark:text-white"),s(u,"class","p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2"),s(b,"class","flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-700"),s(f,"class","flex-1 overflow-y-auto p-6"),s(a,"class",g=`relative w-full ${r[3]} bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 m-4 max-h-[92vh] overflow-hidden flex flex-col transform transition-all`),s(e,"class","fixed inset-0 z-50 flex items-center justify-center"),s(e,"role","dialog"),s(e,"aria-modal","true")},m(h,_){U(h,e,_),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),l(d,i),l(b,o),l(b,u),l(a,m),l(a,f),p&&p.m(f,null),v=!0,k||(y=[Y(u,"click",function(){tr(r[1])&&r[1].apply(this,arguments)}),Y(e,"click",r[4])],k=!0)},p(h,_){r=h,(!v||_&4)&&he(i,r[2]),p&&p.p&&(!v||_&64)&&Bo(p,c,r,r[6],v?To(c,r[6],_,null):Ao(r[6]),null),(!v||_&8&&g!==(g=`relative w-full ${r[3]} bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 m-4 max-h-[92vh] overflow-hidden flex flex-col transform transition-all`))&&s(a,"class",g)},i(h){v||(Ge(p,h),v=!0)},o(h){Ze(p,h),v=!1},d(h){h&&N(e),p&&p.d(h),k=!1,et(y)}}}function Qo(r){let e,t,n=r[0]&&oi(r);return{c(){n&&n.c(),e=It()},m(a,b){n&&n.m(a,b),U(a,e,b),t=!0},p(a,[b]){a[0]?n?(n.p(a,b),b&1&&Ge(n,1)):(n=oi(a),n.c(),Ge(n,1),n.m(e.parentNode,e)):n&&(Wt(),Ze(n,1,1,()=>{n=null}),Nt())},i(a){t||(Ge(n),t=!0)},o(a){Ze(n),t=!1},d(a){a&&N(e),n&&n.d(a)}}}function $o(r,e,t){let n,{$$slots:a={},$$scope:b}=e,{isOpen:d=!1}=e,{onClose:i=()=>{}}=e,{title:o=""}=e,{size:u="md"}=e;const m={sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-5xl"};function f(v){v.target===v.currentTarget&&i()}function g(v){v.key==="Escape"&&d&&i()}return r.$$set=v=>{"isOpen"in v&&t(0,d=v.isOpen),"onClose"in v&&t(1,i=v.onClose),"title"in v&&t(2,o=v.title),"size"in v&&t(5,u=v.size),"$$scope"in v&&t(6,b=v.$$scope)},r.$$.update=()=>{r.$$.dirty&32&&t(3,n=m[u]||m.md),r.$$.dirty&1&&(d?document.addEventListener("keydown",g):document.removeEventListener("keydown",g))},[d,i,o,n,f,u,b,a]}class wr extends Et{constructor(e){super(),xt(this,e,$o,Qo,Ct,{isOpen:0,onClose:1,title:2,size:5})}}function el(r){let e,t,n,a,b,d,i,o,u,m,f,g,v;return{c(){e=C("div"),t=C("p"),n=G(r[2]),a=A(),b=C("div"),d=C("button"),i=G(r[4]),o=A(),u=C("button"),m=G(r[3]),s(t,"class","text-sm text-slate-700 dark:text-slate-300 leading-relaxed"),s(d,"type","button"),s(d,"class","px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2"),s(u,"type","button"),s(u,"class",f="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":r[7]==="warning"?"bg-amber-500 hover:bg-amber-600 text-white":"accent-bg accent-bg-hover text-white")),s(b,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(k,y){U(k,e,y),l(e,t),l(t,n),l(e,a),l(e,b),l(b,d),l(d,i),l(b,o),l(b,u),l(u,m),g||(v=[Y(d,"click",function(){tr(r[6])&&r[6].apply(this,arguments)}),Y(u,"click",function(){tr(r[5])&&r[5].apply(this,arguments)})],g=!0)},p(k,y){r=k,y&4&&he(n,r[2]),y&16&&he(i,r[4]),y&8&&he(m,r[3]),y&128&&f!==(f="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":r[7]==="warning"?"bg-amber-500 hover:bg-amber-600 text-white":"accent-bg accent-bg-hover text-white"))&&s(u,"class",f)},d(k){k&&N(e),g=!1,et(v)}}}function tl(r){let e,t,n;function a(d){r[8](d)}let b={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[el]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),gt.push(()=>St(e,"isOpen",a)),{c(){ct(e.$$.fragment)},m(d,i){lt(e,d,i),n=!0},p(d,[i]){const o={};i&64&&(o.onClose=d[6]),i&2&&(o.title=d[1]),i&764&&(o.$$scope={dirty:i,ctx:d}),!t&&i&1&&(t=!0,o.isOpen=d[0],kt(()=>t=!1)),e.$set(o)},i(d){n||(Ge(e.$$.fragment,d),n=!0)},o(d){Ze(e.$$.fragment,d),n=!1},d(d){at(e,d)}}}function rl(r,e,t){let{isOpen:n=!1}=e,{title:a=""}=e,{message:b=""}=e,{confirmText:d="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:o=()=>{}}=e,{onCancel:u=()=>{}}=e,{type:m="default"}=e;function f(g){n=g,t(0,n)}return r.$$set=g=>{"isOpen"in g&&t(0,n=g.isOpen),"title"in g&&t(1,a=g.title),"message"in g&&t(2,b=g.message),"confirmText"in g&&t(3,d=g.confirmText),"cancelText"in g&&t(4,i=g.cancelText),"onConfirm"in g&&t(5,o=g.onConfirm),"onCancel"in g&&t(6,u=g.onCancel),"type"in g&&t(7,m=g.type)},[n,a,b,d,i,o,u,m,f]}class hr extends Et{constructor(e){super(),xt(this,e,rl,tl,Ct,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function li(r){let e,t;return{c(){e=C("p"),t=G(r[2]),s(e,"class","text-sm text-slate-700 dark:text-slate-300 leading-relaxed")},m(n,a){U(n,e,a),l(e,t)},p(n,a){a&4&&he(t,n[2])},d(n){n&&N(e)}}}function il(r){let e,t,n;return{c(){e=C("input"),s(e,"type","text"),s(e,"placeholder",r[3]),s(e,"class","w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus-visible:ring-2 focus:border-transparent transition-all")},m(a,b){U(a,e,b),r[18](e),Me(e,r[10]),t||(n=[Y(e,"input",r[19]),Y(e,"keydown",r[12])],t=!0)},p(a,b){b&8&&s(e,"placeholder",a[3]),b&1024&&e.value!==a[10]&&Me(e,a[10])},d(a){a&&N(e),r[18](null),t=!1,et(n)}}}function sl(r){let e,t,n;return{c(){e=C("input"),s(e,"type","password"),s(e,"placeholder",r[3]),s(e,"class","w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus-visible:ring-2 focus:border-transparent transition-all")},m(a,b){U(a,e,b),r[16](e),Me(e,r[10]),t||(n=[Y(e,"input",r[17]),Y(e,"keydown",r[12])],t=!0)},p(a,b){b&8&&s(e,"placeholder",a[3]),b&1024&&e.value!==a[10]&&Me(e,a[10])},d(a){a&&N(e),r[16](null),t=!1,et(n)}}}function nl(r){let e,t,n,a,b,d,i,o,u,m,f,g,v=r[2]&&li(r);function k(p,h){return p[4]==="password"?sl:il}let y=k(r),c=y(r);return{c(){e=C("div"),v&&v.c(),t=A(),c.c(),n=A(),a=C("div"),b=C("button"),d=G(r[7]),i=A(),o=C("button"),u=G(r[6]),s(b,"type","button"),s(b,"class","px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2"),s(o,"type","button"),o.disabled=m=!r[5]&&!r[10].trim(),s(o,"class","px-3 py-1.5 accent-bg accent-bg-hover text-white rounded-md text-xs font-medium transition-all shadow-sm focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"),s(a,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(p,h){U(p,e,h),v&&v.m(e,null),l(e,t),c.m(e,null),l(e,n),l(e,a),l(a,b),l(b,d),l(a,i),l(a,o),l(o,u),f||(g=[Y(b,"click",function(){tr(r[8])&&r[8].apply(this,arguments)}),Y(o,"click",r[11])],f=!0)},p(p,h){r=p,r[2]?v?v.p(r,h):(v=li(r),v.c(),v.m(e,t)):v&&(v.d(1),v=null),y===(y=k(r))&&c?c.p(r,h):(c.d(1),c=y(r),c&&(c.c(),c.m(e,n))),h&128&&he(d,r[7]),h&64&&he(u,r[6]),h&1056&&m!==(m=!r[5]&&!r[10].trim())&&(o.disabled=m)},d(p){p&&N(e),v&&v.d(),c.d(),f=!1,et(g)}}}function ol(r){let e,t,n;function a(d){r[20](d)}let b={onClose:r[8],title:r[1],size:"sm",$$slots:{default:[nl]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),gt.push(()=>St(e,"isOpen",a)),{c(){ct(e.$$.fragment)},m(d,i){lt(e,d,i),n=!0},p(d,[i]){const o={};i&256&&(o.onClose=d[8]),i&2&&(o.title=d[1]),i&2099196&&(o.$$scope={dirty:i,ctx:d}),!t&&i&1&&(t=!0,o.isOpen=d[0],kt(()=>t=!1)),e.$set(o)},i(d){n||(Ge(e.$$.fragment,d),n=!0)},o(d){Ze(e.$$.fragment,d),n=!1},d(d){at(e,d)}}}function ll(r,e,t){let{isOpen:n=!1}=e,{title:a=""}=e,{message:b=""}=e,{defaultValue:d=""}=e,{placeholder:i=""}=e,{inputType:o="text"}=e,{allowEmpty:u=!1}=e,{trimValue:m=!0}=e,{confirmText:f="确定"}=e,{cancelText:g="取消"}=e,{onConfirm:v=()=>{}}=e,{onCancel:k=()=>{}}=e,y="",c;function p(){if(u){v(m?y.trim():y);return}const S=m?y.trim():y;S&&v(S)}function h(S){S.key==="Enter"&&p()}function _(S){gt[S?"unshift":"push"](()=>{c=S,t(9,c)})}function w(){y=this.value,t(10,y),t(0,n),t(13,d)}function L(S){gt[S?"unshift":"push"](()=>{c=S,t(9,c)})}function x(){y=this.value,t(10,y),t(0,n),t(13,d)}function E(S){n=S,t(0,n)}return r.$$set=S=>{"isOpen"in S&&t(0,n=S.isOpen),"title"in S&&t(1,a=S.title),"message"in S&&t(2,b=S.message),"defaultValue"in S&&t(13,d=S.defaultValue),"placeholder"in S&&t(3,i=S.placeholder),"inputType"in S&&t(4,o=S.inputType),"allowEmpty"in S&&t(5,u=S.allowEmpty),"trimValue"in S&&t(14,m=S.trimValue),"confirmText"in S&&t(6,f=S.confirmText),"cancelText"in S&&t(7,g=S.cancelText),"onConfirm"in S&&t(15,v=S.onConfirm),"onCancel"in S&&t(8,k=S.onCancel)},r.$$.update=()=>{r.$$.dirty&8193&&n&&t(10,y=d),r.$$.dirty&513&&n&&c&&setTimeout(()=>{c==null||c.focus(),c==null||c.select()},0)},[n,a,b,i,o,u,f,g,k,c,y,p,h,d,m,v,_,w,L,x,E]}class br extends Et{constructor(e){super(),xt(this,e,ll,ol,Ct,{isOpen:0,title:1,message:2,defaultValue:13,placeholder:3,inputType:4,allowEmpty:5,trimValue:14,confirmText:6,cancelText:7,onConfirm:15,onCancel:8})}}function ai(r,e,t){const n=r.slice();return n[81]=e[t][0],n[82]=e[t][1],n}function ci(r,e,t){const n=r.slice();return n[85]=e[t],n}function di(r,e,t){const n=r.slice();return n[81]=e[t][0],n[82]=e[t][1],n}function hi(r,e,t){const n=r.slice();return n[85]=e[t],n}function ui(r,e,t){const n=r.slice();return n[92]=e[t],n}function fi(r,e,t){const n=r.slice();return n[95]=e[t],n}function pi(r){let e,t,n,a,b,d,i,o,u,m,f,g;return{c(){e=C("div"),t=C("button"),t.innerHTML='<svg class="w-4 h-4 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(加密)</span>',n=A(),a=C("button"),a.innerHTML='<svg class="w-4 h-4 accent-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(跨设备加密)</span>',b=A(),d=C("button"),d.innerHTML='<svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导出(明文)</span>',i=A(),o=C("div"),u=A(),m=C("button"),m.innerHTML='<svg class="w-4 h-4 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导入连接</span>',s(t,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(a,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(d,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(o,"class","border-t border-gray-200 dark:border-gray-700 my-1"),s(m,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10 py-1 min-w-[160px]")},m(v,k){U(v,e,k),l(e,t),l(e,n),l(e,a),l(e,b),l(e,d),l(e,i),l(e,o),l(e,u),l(e,m),f||(g=[Y(t,"click",r[55]),Y(a,"click",r[56]),Y(d,"click",r[57]),Y(m,"click",r[42])],f=!0)},p:Oe,d(v){v&&N(e),f=!1,et(g)}}}function al(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function cl(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function _i(r){let e,t=[],n=new Map,a=Ue(r[82]);const b=d=>d[85].id;for(let d=0;d<a.length;d+=1){let i=hi(r,a,d),o=b(i);n.set(o,t[d]=Si(o,i))}return{c(){e=C("div");for(let d=0;d<t.length;d+=1)t[d].c();s(e,"class","ml-4")},m(d,i){U(d,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(d,i){i[0]&1955528709|i[1]&131072&&(a=Ue(d[82]),t=Jt(t,i,b,1,d,a,n,e,Xt,Si,null,hi))},d(d){d&&N(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function gi(r){let e,t,n,a,b;function d(m,f){return f[0]&8454144&&(t=null),t==null&&(t=!!m[16].has(m[85].id)),t?hl:dl}let i=d(r,[-1,-1,-1,-1]),o=i(r);function u(){return r[60](r[85])}return{c(){e=C("button"),o.c(),s(e,"type","button"),s(e,"class","absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 flex items-center justify-center rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-100 dark:hover:bg-gray-700"),s(e,"title",n=r[85].dbConnected?"展开数据库":"连接后展开")},m(m,f){U(m,e,f),o.m(e,null),a||(b=Y(e,"click",vr(u)),a=!0)},p(m,f){r=m,i!==(i=d(r,f))&&(o.d(1),o=i(r),o&&(o.c(),o.m(e,null))),f[0]&8388608&&n!==(n=r[85].dbConnected?"展开数据库":"连接后展开")&&s(e,"title",n)},d(m){m&&N(e),o.d(),a=!1,b()}}}function dl(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function hl(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function mi(r){let e,t=r[85].dbConnected?"已连接":"未连接",n,a;return{c(){e=C("span"),n=G(t),s(e,"class",a=`text-[10px] px-1.5 py-0.5 rounded ${r[85].dbConnected?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300"}`)},m(b,d){U(b,e,d),l(e,n)},p(b,d){d[0]&8388608&&t!==(t=b[85].dbConnected?"已连接":"未连接")&&he(n,t),d[0]&8388608&&a!==(a=`text-[10px] px-1.5 py-0.5 rounded ${b[85].dbConnected?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300"}`)&&s(e,"class",a)},d(b){b&&N(e)}}}function bi(r){let e,t=r[85].dbType.toUpperCase()+"",n;return{c(){e=G("• "),n=G(t)},m(a,b){U(a,e,b),U(a,n,b)},p(a,b){b[0]&8388608&&t!==(t=a[85].dbType.toUpperCase()+"")&&he(n,t)},d(a){a&&(N(e),N(n))}}}function vi(r){let e,t,n,a,b,d,i,o;function u(){return r[66](r[85])}function m(v,k){var y,c,p,h;return(y=v[18][v[85].id])!=null&&y.loading?_l:(c=v[18][v[85].id])!=null&&c.error?pl:(h=(p=v[18][v[85].id])==null?void 0:p.items)!=null&&h.length?fl:ul}let f=m(r),g=f(r);return{c(){e=C("div"),t=C("div"),n=C("span"),n.textContent="数据库",a=A(),b=C("button"),b.textContent="刷新",d=A(),g.c(),s(b,"type","button"),s(b,"class","px-2 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700"),s(t,"class","flex items-center justify-between text-xs text-gray-600 dark:text-gray-300 mb-2"),s(e,"class","ml-8 mr-2 mb-2 rounded-md border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 p-2")},m(v,k){U(v,e,k),l(e,t),l(t,n),l(t,a),l(t,b),l(e,d),g.m(e,null),i||(o=Y(b,"click",vr(u)),i=!0)},p(v,k){r=v,f===(f=m(r))&&g?g.p(r,k):(g.d(1),g=f(r),g&&(g.c(),g.m(e,null)))},d(v){v&&N(e),g.d(),i=!1,o()}}}function ul(r){let e;return{c(){e=C("div"),e.textContent="暂无数据库",s(e,"class","text-xs text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function fl(r){let e,t=Ue(r[18][r[85].id].items),n=[];for(let a=0;a<t.length;a+=1)n[a]=ki(ui(r,t,a));return{c(){e=C("div");for(let a=0;a<n.length;a+=1)n[a].c();s(e,"class","space-y-1")},m(a,b){U(a,e,b);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(a,b){if(b[0]&1083047936){t=Ue(a[18][a[85].id].items);let d;for(d=0;d<t.length;d+=1){const i=ui(a,t,d);n[d]?n[d].p(i,b):(n[d]=ki(i),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=t.length}},d(a){a&&N(e),Mt(n,a)}}}function pl(r){let e,t=r[18][r[85].id].error+"",n;return{c(){e=C("div"),n=G(t),s(e,"class","text-xs text-red-500")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&8650752&&t!==(t=a[18][a[85].id].error+"")&&he(n,t)},d(a){a&&N(e)}}}function _l(r){let e;return{c(){e=C("div"),e.textContent="加载中...",s(e,"class","text-xs text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function gl(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function ml(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function yi(r){let e;function t(b,d){var i,o,u,m;return(i=b[19][`${b[85].id}:${b[92]}`])!=null&&i.loading?wl:(o=b[19][`${b[85].id}:${b[92]}`])!=null&&o.error?yl:(m=(u=b[19][`${b[85].id}:${b[92]}`])==null?void 0:u.items)!=null&&m.length?vl:bl}let n=t(r),a=n(r);return{c(){e=C("div"),a.c(),s(e,"class","ml-5 mt-1 space-y-1")},m(b,d){U(b,e,d),a.m(e,null)},p(b,d){n===(n=t(b))&&a?a.p(b,d):(a.d(1),a=n(b),a&&(a.c(),a.m(e,null)))},d(b){b&&N(e),a.d()}}}function bl(r){let e;return{c(){e=C("div"),e.textContent="暂无表",s(e,"class","text-xs text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function vl(r){let e,t=Ue(r[19][`${r[85].id}:${r[92]}`].items),n=[];for(let a=0;a<t.length;a+=1)n[a]=wi(fi(r,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=It()},m(a,b){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(a,b);U(a,e,b)},p(a,b){if(b[0]&9175040){t=Ue(a[19][`${a[85].id}:${a[92]}`].items);let d;for(d=0;d<t.length;d+=1){const i=fi(a,t,d);n[d]?n[d].p(i,b):(n[d]=wi(i),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=t.length}},d(a){a&&N(e),Mt(n,a)}}}function yl(r){let e,t=r[19][`${r[85].id}:${r[92]}`].error+"",n;return{c(){e=C("div"),n=G(t),s(e,"class","text-xs text-red-500")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&9175040&&t!==(t=a[19][`${a[85].id}:${a[92]}`].error+"")&&he(n,t)},d(a){a&&N(e)}}}function wl(r){let e;return{c(){e=C("div"),e.textContent="加载表中...",s(e,"class","text-xs text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function wi(r){let e,t=r[95]+"",n,a,b,d;function i(){return r[68](r[85],r[92],r[95])}return{c(){e=C("button"),n=G(t),a=A(),s(e,"type","button"),s(e,"class","w-full text-left text-xs px-2 py-1 rounded accent-soft-hover")},m(o,u){U(o,e,u),l(e,n),l(e,a),b||(d=Y(e,"click",vr(i)),b=!0)},p(o,u){r=o,u[0]&9175040&&t!==(t=r[95]+"")&&he(n,t)},d(o){o&&N(e),b=!1,d()}}}function ki(r){var h;let e,t,n,a,b,d=r[92]+"",i,o,u=(h=r[17][r[85].id])==null?void 0:h.has(r[92]),m,f,g;function v(_,w){var L;return w[0]&8781824&&(n=null),n==null&&(n=!!((L=_[17][_[85].id])!=null&&L.has(_[92]))),n?ml:gl}let k=v(r,[-1,-1,-1,-1]),y=k(r);function c(){return r[67](r[85],r[92])}let p=u&&yi(r);return{c(){e=C("div"),t=C("button"),y.c(),a=A(),b=C("span"),i=G(d),o=A(),p&&p.c(),m=A(),s(b,"class","flex-1 text-left truncate"),s(t,"type","button"),s(t,"class","w-full flex items-center gap-2 text-xs px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700")},m(_,w){U(_,e,w),l(e,t),y.m(t,null),l(t,a),l(t,b),l(b,i),l(e,o),p&&p.m(e,null),l(e,m),f||(g=Y(t,"click",vr(c)),f=!0)},p(_,w){var L;r=_,k!==(k=v(r,w))&&(y.d(1),y=k(r),y&&(y.c(),y.m(t,a))),w[0]&8650752&&d!==(d=r[92]+"")&&he(i,d),w[0]&8781824&&(u=(L=r[17][r[85].id])==null?void 0:L.has(r[92])),u?p?p.p(r,w):(p=yi(r),p.c(),p.m(e,m)):p&&(p.d(1),p=null)},d(_){_&&N(e),y.d(),p&&p.d(),f=!1,g()}}}function Si(r,e){let t,n,a,b,d=Mi(e[85].type)+"",i,o,u,m,f=e[85].name+"",g,v,k,y,c,p,h,_=e[85].username+"",w,L,x=e[85].host+"",E,S,D=e[85].port+"",B,O,I,R,j,K,J,te,W,M,P=e[85].type==="database"&&e[16].has(e[85].id),H,z,$,V=e[85].type==="database"&&gi(e),X=e[85].type==="database"&&mi(e),Z=e[85].type==="database"&&e[85].dbType&&bi(e);function F(){return e[61](e[85])}function T(){return e[62](e[85])}function Q(...ce){return e[63](e[85],...ce)}function q(){return e[64](e[85])}function ne(...ce){return e[65](e[85],...ce)}let ie=P&&vi(e);return{key:r,first:null,c(){t=C("div"),n=C("div"),V&&V.c(),a=A(),b=C("div"),i=A(),o=C("div"),u=C("div"),m=C("span"),g=G(f),v=A(),k=C("div"),c=A(),X&&X.c(),p=A(),h=C("div"),w=G(_),L=G("@"),E=G(x),S=G(":"),B=G(D),O=A(),Z&&Z.c(),I=A(),R=C("div"),j=C("button"),j.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',K=A(),J=C("button"),J.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',te=A(),W=C("button"),W.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',M=A(),ie&&ie.c(),H=A(),s(b,"class","flex-shrink-0"),s(m,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),s(k,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[85].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),s(u,"class","flex items-center gap-2"),s(h,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),s(o,"class","flex-1 min-w-0"),s(j,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),s(j,"title","连接"),s(J,"class","p-1 accent-soft-hover rounded"),s(W,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),s(R,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),s(n,"class","group relative flex items-center gap-2 px-3 py-2.5 accent-soft-hover rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(ce,fe){U(ce,t,fe),l(t,n),V&&V.m(n,null),l(n,a),l(n,b),b.innerHTML=d,l(n,i),l(n,o),l(o,u),l(u,m),l(m,g),l(u,v),l(u,k),l(u,c),X&&X.m(u,null),l(o,p),l(o,h),l(h,w),l(h,L),l(h,E),l(h,S),l(h,B),l(h,O),Z&&Z.m(h,null),l(n,I),l(n,R),l(R,j),l(R,K),l(R,J),l(R,te),l(R,W),l(t,M),ie&&ie.m(t,null),l(t,H),z||($=[Y(j,"click",vr(F)),Y(J,"click",vr(T)),Y(W,"click",Q),Y(n,"click",q),Y(n,"contextmenu",ne)],z=!0)},p(ce,fe){e=ce,e[85].type==="database"?V?V.p(e,fe):(V=gi(e),V.c(),V.m(n,a)):V&&(V.d(1),V=null),fe[0]&8388608&&d!==(d=Mi(e[85].type)+"")&&(b.innerHTML=d),fe[0]&8388608&&f!==(f=e[85].name+"")&&he(g,f),fe[0]&8388608&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[85].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&s(k,"class",y),e[85].type==="database"?X?X.p(e,fe):(X=mi(e),X.c(),X.m(u,null)):X&&(X.d(1),X=null),fe[0]&8388608&&_!==(_=e[85].username+"")&&he(w,_),fe[0]&8388608&&x!==(x=e[85].host+"")&&he(E,x),fe[0]&8388608&&D!==(D=e[85].port+"")&&he(B,D),e[85].type==="database"&&e[85].dbType?Z?Z.p(e,fe):(Z=bi(e),Z.c(),Z.m(h,null)):Z&&(Z.d(1),Z=null),fe[0]&8454144&&(P=e[85].type==="database"&&e[16].has(e[85].id)),P?ie?ie.p(e,fe):(ie=vi(e),ie.c(),ie.m(t,H)):ie&&(ie.d(1),ie=null)},d(ce){ce&&N(t),V&&V.d(),X&&X.d(),Z&&Z.d(),ie&&ie.d(),z=!1,et($)}}}function Ci(r){let e,t,n,a,b,d,i,o,u=r[81]+"",m,f,g,v,k=r[82].length+"",y,c,p,h=r[5].has(r[81]),_,w,L;function x(O,I){return I[0]&8388640&&(n=null),n==null&&(n=!!O[5].has(O[81])),n?cl:al}let E=x(r,[-1,-1,-1,-1]),S=E(r);function D(){return r[59](r[81])}let B=h&&_i(r);return{c(){e=C("div"),t=C("div"),S.c(),a=A(),b=de("svg"),d=de("path"),i=A(),o=C("span"),m=G(u),f=A(),g=C("span"),v=G("("),y=G(k),c=G(")"),p=A(),B&&B.c(),_=A(),s(d,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(b,"class","w-4 h-4 text-amber-500"),s(b,"fill","currentColor"),s(b,"viewBox","0 0 24 24"),s(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(g,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),s(e,"class","mb-1")},m(O,I){U(O,e,I),l(e,t),S.m(t,null),l(t,a),l(t,b),l(b,d),l(t,i),l(t,o),l(o,m),l(t,f),l(t,g),l(g,v),l(g,y),l(g,c),l(e,p),B&&B.m(e,null),l(e,_),w||(L=Y(t,"click",D),w=!0)},p(O,I){r=O,E!==(E=x(r,I))&&(S.d(1),S=E(r),S&&(S.c(),S.m(t,a))),I[0]&8388608&&u!==(u=r[81]+"")&&he(m,u),I[0]&8388608&&k!==(k=r[82].length+"")&&he(y,k),I[0]&8388640&&(h=r[5].has(r[81])),h?B?B.p(r,I):(B=_i(r),B.c(),B.m(e,_)):B&&(B.d(1),B=null)},d(O){O&&N(e),S.d(),B&&B.d(),w=!1,L()}}}function xi(r){let e,t,n,a,b;return{c(){e=C("div"),t=C("button"),t.innerHTML='<svg class="w-4 h-4 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> <span>断开连接</span>',s(t,"type","button"),s(t,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(e,"class","fixed z-[120] w-40 rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-lg"),s(e,"style",n=`top: ${r[22].y}px; left: ${r[22].x}px;`)},m(d,i){U(d,e,i),l(e,t),a||(b=Y(t,"click",r[27]),a=!0)},p(d,i){i[0]&4194304&&n!==(n=`top: ${d[22].y}px; left: ${d[22].x}px;`)&&s(e,"style",n)},d(d){d&&N(e),a=!1,b()}}}function Ei(r,e){let t,n,a,b,d,i=e[85].name+"",o,u,m,f=e[85].username+"",g,v,k=e[85].host+"",y,c,p,h;function _(){return e[72](e[85])}return{key:r,first:null,c(){t=C("label"),n=C("input"),b=A(),d=C("span"),o=G(i),u=A(),m=C("span"),g=G(f),v=G("@"),y=G(k),c=A(),s(n,"type","checkbox"),n.checked=a=e[12].has(e[85].id),s(n,"class","w-4 h-4 accent-control"),s(d,"class","truncate"),s(m,"class","text-xs text-gray-400 dark:text-gray-500 truncate"),s(t,"class","flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"),this.first=t},m(w,L){U(w,t,L),l(t,n),l(t,b),l(t,d),l(d,o),l(t,u),l(t,m),l(m,g),l(m,v),l(m,y),l(t,c),p||(h=Y(n,"change",_),p=!0)},p(w,L){e=w,L[0]&16781312&&a!==(a=e[12].has(e[85].id))&&(n.checked=a),L[0]&16777216&&i!==(i=e[85].name+"")&&he(o,i),L[0]&16777216&&f!==(f=e[85].username+"")&&he(g,f),L[0]&16777216&&k!==(k=e[85].host+"")&&he(y,k)},d(w){w&&N(t),p=!1,h()}}}function Li(r){let e,t,n,a,b,d,i=r[81]+"",o,u,m,f,g=r[82].length+"",v,k,y,c,p=[],h=new Map,_,w,L;function x(){return r[71](r[82])}let E=Ue(r[82]);const S=D=>D[85].id;for(let D=0;D<E.length;D+=1){let B=ci(r,E,D),O=S(B);h.set(O,p[D]=Ei(O,B))}return{c(){e=C("div"),t=C("div"),n=C("input"),b=A(),d=C("span"),o=G(i),u=A(),m=C("span"),f=G("("),v=G(g),k=G(")"),y=A(),c=C("div");for(let D=0;D<p.length;D+=1)p[D].c();_=A(),s(n,"type","checkbox"),n.checked=a=r[41](r[82]),s(n,"class","w-4 h-4 accent-control"),s(d,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(m,"class","text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700/40"),s(c,"class","px-3 py-2 space-y-1"),s(e,"class","rounded-lg border border-gray-200 dark:border-gray-700")},m(D,B){U(D,e,B),l(e,t),l(t,n),l(t,b),l(t,d),l(d,o),l(t,u),l(t,m),l(m,f),l(m,v),l(m,k),l(e,y),l(e,c);for(let O=0;O<p.length;O+=1)p[O]&&p[O].m(c,null);l(e,_),w||(L=Y(n,"change",x),w=!0)},p(D,B){r=D,B[0]&16777216&&a!==(a=r[41](r[82]))&&(n.checked=a),B[0]&16777216&&i!==(i=r[81]+"")&&he(o,i),B[0]&16777216&&g!==(g=r[82].length+"")&&he(v,g),B[0]&16781312|B[1]&128&&(E=Ue(r[82]),p=Jt(p,B,S,1,r,E,h,c,Xt,Ei,null,ci))},d(D){D&&N(e);for(let B=0;B<p.length;B+=1)p[B].d();w=!1,L()}}}function kl(r){let e,t,n,a,b=r[12].size+"",d,i,o=r[4].length+"",u,m,f,g=r[12].size===r[4].length?"取消全选":"全选",v,k,y,c,p,h,_,w,L,x,E,S,D=Ue(Object.entries(r[24])),B=[];for(let O=0;O<D.length;O+=1)B[O]=Li(ai(r,D,O));return{c(){e=C("div"),t=C("div"),n=C("div"),a=G("已选 "),d=G(b),i=G(" / "),u=G(o),m=A(),f=C("button"),v=G(g),k=A(),y=C("div");for(let O=0;O<B.length;O+=1)B[O].c();c=A(),p=C("div"),h=C("button"),h.textContent="取消",_=A(),w=C("button"),L=G("导出"),s(n,"class","text-xs text-gray-500 dark:text-gray-400"),s(f,"type","button"),s(f,"class","text-xs accent-text hover:underline"),s(t,"class","flex items-center justify-between"),s(y,"class","max-h-64 overflow-y-auto space-y-2"),s(h,"type","button"),s(h,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(w,"type","button"),w.disabled=x=r[12].size===0,s(w,"class","px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm accent-bg accent-bg-hover text-white focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"),s(p,"class","flex gap-2 justify-end"),s(e,"class","space-y-4")},m(O,I){U(O,e,I),l(e,t),l(t,n),l(n,a),l(n,d),l(n,i),l(n,u),l(t,m),l(t,f),l(f,v),l(e,k),l(e,y);for(let R=0;R<B.length;R+=1)B[R]&&B[R].m(y,null);l(e,c),l(e,p),l(p,h),l(p,_),l(p,w),l(w,L),E||(S=[Y(f,"click",r[40]),Y(h,"click",r[33]),Y(w,"click",r[32])],E=!0)},p(O,I){if(I[0]&4096&&b!==(b=O[12].size+"")&&he(d,b),I[0]&16&&o!==(o=O[4].length+"")&&he(u,o),I[0]&4112&&g!==(g=O[12].size===O[4].length?"取消全选":"全选")&&he(v,g),I[0]&16781312|I[1]&1408){D=Ue(Object.entries(O[24]));let R;for(R=0;R<D.length;R+=1){const j=ai(O,D,R);B[R]?B[R].p(j,I):(B[R]=Li(j),B[R].c(),B[R].m(y,null))}for(;R<B.length;R+=1)B[R].d(1);B.length=D.length}I[0]&4096&&x!==(x=O[12].size===0)&&(w.disabled=x)},d(O){O&&N(e),Mt(B,O),E=!1,et(S)}}}function Sl(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z=r[6]&&pi(r),F=Ue(Object.entries(r[23])),T=[];for(let se=0;se<F.length;se+=1)T[se]=Ci(di(r,F,se));let Q=r[20]&&r[21]&&xi(r);function q(se){r[69](se)}let ne={title:"删除连接",message:r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？",type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[49],onCancel:r[50]};r[7]!==void 0&&(ne.isOpen=r[7]),x=new hr({props:ne}),gt.push(()=>St(x,"isOpen",q));function ie(se){r[70](se)}let ce={title:"导入连接",message:"确定要导入连接配置吗？导入后会合并到现有连接中。",type:"warning",confirmText:"导入",cancelText:"取消",onConfirm:r[43],onCancel:r[46]};r[9]!==void 0&&(ce.isOpen=r[9]),D=new hr({props:ce}),gt.push(()=>St(D,"isOpen",ie));function fe(se){r[73](se)}let ge={onClose:r[33],title:r[11]==="plain"?"导出连接（明文）":r[11]==="passphrase"?"导出连接（跨设备加密）":"导出连接（加密）",size:"md",$$slots:{default:[kl]},$$scope:{ctx:r}};r[10]!==void 0&&(ge.isOpen=r[10]),I=new wr({props:ge}),gt.push(()=>St(I,"isOpen",fe));function pe(se){r[74](se)}let ye={title:"导出加密",message:"请输入导出密码（用于跨设备解密）",placeholder:"导出密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"下一步",cancelText:"取消",onConfirm:r[34],onCancel:r[35]};r[13]!==void 0&&(ye.isOpen=r[13]),K=new br({props:ye}),gt.push(()=>St(K,"isOpen",pe));function Ke(se){r[75](se)}let Le={title:"确认导出密码",message:"请再次输入导出密码",placeholder:"确认导出密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"导出",cancelText:"取消",onConfirm:r[36],onCancel:r[37]};r[14]!==void 0&&(Le.isOpen=r[14]),W=new br({props:Le}),gt.push(()=>St(W,"isOpen",Ke));function Se(se){r[76](se)}let ke={title:"导入解密",message:"该文件需要导入密码，请输入",placeholder:"导入密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"导入",cancelText:"取消",onConfirm:r[44],onCancel:r[45]};return r[15]!==void 0&&(ke.isOpen=r[15]),H=new br({props:ke}),gt.push(()=>St(H,"isOpen",Se)),{c(){e=C("div"),t=C("div"),n=C("div"),a=C("h2"),a.textContent="服务器资产",b=A(),d=C("div"),i=C("button"),i.innerHTML='<svg class="w-4 h-4 accent-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',o=A(),u=C("div"),m=C("button"),m.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>',f=A(),Z&&Z.c(),g=A(),v=C("div"),k=de("svg"),y=de("path"),c=A(),p=C("input"),h=A(),_=C("div");for(let se=0;se<T.length;se+=1)T[se].c();w=A(),Q&&Q.c(),L=A(),ct(x.$$.fragment),S=A(),ct(D.$$.fragment),O=A(),ct(I.$$.fragment),j=A(),ct(K.$$.fragment),te=A(),ct(W.$$.fragment),P=A(),ct(H.$$.fragment),s(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(i,"title","添加连接"),s(m,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(m,"title","导出/导入"),s(u,"class","relative"),s(d,"class","flex gap-1"),s(n,"class","flex items-center justify-between mb-3"),s(y,"stroke-linecap","round"),s(y,"stroke-linejoin","round"),s(y,"stroke-width","2"),s(y,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(k,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),s(k,"fill","none"),s(k,"stroke","currentColor"),s(k,"viewBox","0 0 24 24"),s(p,"type","text"),s(p,"placeholder","搜索服务器..."),s(p,"class","w-full pl-9 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus-visible:ring-2 focus:border-transparent transition-all"),s(v,"class","relative"),s(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),s(_,"class","flex-1 overflow-y-auto scrollbar-thin"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(se,_e){U(se,e,_e),l(e,t),l(t,n),l(n,a),l(n,b),l(n,d),l(d,i),l(d,o),l(d,u),l(u,m),l(u,f),Z&&Z.m(u,null),l(t,g),l(t,v),l(v,k),l(k,y),l(v,c),l(v,p),Me(p,r[3]),l(e,h),l(e,_);for(let ue=0;ue<T.length;ue+=1)T[ue]&&T[ue].m(_,null);U(se,w,_e),Q&&Q.m(se,_e),U(se,L,_e),lt(x,se,_e),U(se,S,_e),lt(D,se,_e),U(se,O,_e),lt(I,se,_e),U(se,j,_e),lt(K,se,_e),U(se,te,_e),lt(W,se,_e),U(se,P,_e),lt(H,se,_e),$=!0,V||(X=[Y(i,"click",function(){tr(r[1])&&r[1].apply(this,arguments)}),Y(m,"click",r[54]),Y(p,"input",r[58]),Y(e,"click",r[25])],V=!0)},p(se,_e){if(r=se,r[6]?Z?Z.p(r,_e):(Z=pi(r),Z.c(),Z.m(u,null)):Z&&(Z.d(1),Z=null),_e[0]&8&&p.value!==r[3]&&Me(p,r[3]),_e[0]&1955528741|_e[1]&196608){F=Ue(Object.entries(r[23]));let qe;for(qe=0;qe<F.length;qe+=1){const nt=di(r,F,qe);T[qe]?T[qe].p(nt,_e):(T[qe]=Ci(nt),T[qe].c(),T[qe].m(_,null))}for(;qe<T.length;qe+=1)T[qe].d(1);T.length=F.length}r[20]&&r[21]?Q?Q.p(r,_e):(Q=xi(r),Q.c(),Q.m(L.parentNode,L)):Q&&(Q.d(1),Q=null);const ue={};_e[0]&256&&(ue.message=r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？"),!E&&_e[0]&128&&(E=!0,ue.isOpen=r[7],kt(()=>E=!1)),x.$set(ue);const Ce={};!B&&_e[0]&512&&(B=!0,Ce.isOpen=r[9],kt(()=>B=!1)),D.$set(Ce);const Qe={};_e[0]&2048&&(Qe.title=r[11]==="plain"?"导出连接（明文）":r[11]==="passphrase"?"导出连接（跨设备加密）":"导出连接（加密）"),_e[0]&16781328|_e[3]&32&&(Qe.$$scope={dirty:_e,ctx:r}),!R&&_e[0]&1024&&(R=!0,Qe.isOpen=r[10],kt(()=>R=!1)),I.$set(Qe);const ut={};!J&&_e[0]&8192&&(J=!0,ut.isOpen=r[13],kt(()=>J=!1)),K.$set(ut);const ze={};!M&&_e[0]&16384&&(M=!0,ze.isOpen=r[14],kt(()=>M=!1)),W.$set(ze);const it={};!z&&_e[0]&32768&&(z=!0,it.isOpen=r[15],kt(()=>z=!1)),H.$set(it)},i(se){$||(Ge(x.$$.fragment,se),Ge(D.$$.fragment,se),Ge(I.$$.fragment,se),Ge(K.$$.fragment,se),Ge(W.$$.fragment,se),Ge(H.$$.fragment,se),$=!0)},o(se){Ze(x.$$.fragment,se),Ze(D.$$.fragment,se),Ze(I.$$.fragment,se),Ze(K.$$.fragment,se),Ze(W.$$.fragment,se),Ze(H.$$.fragment,se),$=!1},d(se){se&&(N(e),N(w),N(L),N(S),N(O),N(j),N(te),N(P)),Z&&Z.d(),Mt(T,se),Q&&Q.d(se),at(x,se),at(D,se),at(I,se),at(K,se),at(W,se),at(H,se),V=!1,et(X)}}}function Di(r,e){var n;const t=(n=window.wailsBindings)==null?void 0:n.ShowMessageDialog;if(typeof t=="function"){t(r,e);return}alert(e)}function kr(r,e){var n;const t=(n=window.wailsBindings)==null?void 0:n.ShowErrorDialog;if(typeof t=="function"){t(r,e);return}alert(e)}function Cl(r,e){window.dispatchEvent(new CustomEvent("database:connect",{detail:{asset:r,openPanel:e}}))}function xl(r,e,t){window.dispatchEvent(new CustomEvent("database:table-select",{detail:{sessionId:r.dbSessionId,databaseName:e,tableName:t}}))}function Mi(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 accent-text flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 accent-text flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function El(r,e,t){let n,a,b,d;Pt(r,Yt,ee=>t(4,b=ee)),Pt(r,No,ee=>t(24,d=ee));let{onConnect:i}=e,{onAddClick:o}=e,{onDelete:u}=e,{onEdit:m}=e,f="",g=new Set(["生产环境","开发环境"]),v=!1,k=!1,y=null,c=!1,p="",h=!1,_="machine",w=new Set,L=!1,x=!1,E="",S=!1,D=new Set,B={},O={},I={},R=null,j=!1,K=null,J={x:0,y:0};function te(ee){t(6,v=!1),t(20,j=!1),ee.stopPropagation()}function W(ee,le){ee.type==="database"&&(le.preventDefault(),le.stopPropagation(),t(21,K=ee),t(22,J={x:le.clientX,y:le.clientY}),t(20,j=!0))}async function M(){if(!K||!K.dbSessionId){t(20,j=!1);return}if(!window.wailsBindings||typeof window.wailsBindings.CloseDatabase!="function"){kr("断开失败","断开数据库功能不可用"),t(20,j=!1);return}try{await window.wailsBindings.CloseDatabase(K.dbSessionId),Yt.update(ee=>ee.map(le=>le.id===K.id?{...le,dbConnected:!1,dbSessionId:null}:le)),D.delete(K.id),t(16,D=new Set(D)),delete O[K.id],Object.keys(I).forEach(ee=>{ee.startsWith(`${K.id}:`)&&delete I[ee]}),t(17,B={...B,[K.id]:new Set})}catch(ee){kr("断开失败",ee.message||"断开数据库失败")}finally{t(20,j=!1)}}function P(ee){if(!ee.dbConnected){t(52,R=ee.id),Cl(ee,!1);return}D.has(ee.id)?D.delete(ee.id):(D.add(ee.id),H(ee,!1)),t(16,D=new Set(D))}async function H(ee,le){var De,Pe,Je;if(!(!window.wailsBindings||!ee.dbSessionId)&&!(!le&&((De=O[ee.id])!=null&&De.items))){t(18,O={...O,[ee.id]:{items:((Pe=O[ee.id])==null?void 0:Pe.items)||[],loading:!0,error:""}});try{const{ListDatabases:st}=window.wailsBindings;if(typeof st!="function")throw new Error("数据库列表接口不可用");const Te=await st(ee.dbSessionId);t(18,O={...O,[ee.id]:{items:(Te||[]).slice().sort(),loading:!1,error:""}})}catch(st){t(18,O={...O,[ee.id]:{items:((Je=O[ee.id])==null?void 0:Je.items)||[],loading:!1,error:st.message||"加载失败"}})}}}function z(ee,le){B[ee.id]||t(17,B={...B,[ee.id]:new Set});const De=B[ee.id];De.has(le)?De.delete(le):(De.add(le),$(ee,le)),t(17,B={...B,[ee.id]:new Set(De)})}async function $(ee,le,De){var Je,st,Te;if(!window.wailsBindings||!ee.dbSessionId)return;const Pe=`${ee.id}:${le}`;if(!((Je=I[Pe])!=null&&Je.items)){t(19,I={...I,[Pe]:{items:((st=I[Pe])==null?void 0:st.items)||[],loading:!0,error:""}});try{const{ListDatabaseTablesInDatabase:Xe}=window.wailsBindings;if(typeof Xe!="function")throw new Error("表列表接口不可用");const Ft=await Xe(ee.dbSessionId,le);t(19,I={...I,[Pe]:{items:(Ft||[]).slice().sort(),loading:!1,error:""}})}catch(Xe){t(19,I={...I,[Pe]:{items:((Te=I[Pe])==null?void 0:Te.items)||[],loading:!1,error:Xe.message||"加载失败"}})}}}function V(ee,le){if(le.stopPropagation(),t(6,v=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}t(11,_=ee),t(12,w=new Set(b.map(De=>De.id))),t(10,h=!0)}async function X(ee,le=""){const{ExportConnectionsByIDs:De,ExportConnectionsByIDsWithPassphrase:Pe,SaveBinaryFile:Je}=window.wailsBindings;if(ee==="passphrase"){if(typeof Pe!="function")throw new Error("导出功能不可用，请升级应用");return Pe(Array.from(w),le).then(Xe=>Je("ssh-connections.json",btoa(unescape(encodeURIComponent(Xe)))))}if(typeof De!="function")throw new Error("导出功能不可用，请升级应用");const st=await De(Array.from(w),ee),Te=btoa(unescape(encodeURIComponent(st)));return Je("ssh-connections.json",Te)}function Z(){if(!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}if(w.size===0){alert("请至少选择一个连接");return}if(_==="passphrase"){t(13,L=!0);return}X(_==="machine").then(()=>{t(10,h=!1)}).catch(le=>{console.error("导出失败:",le),alert("导出失败: "+le.message)})}function F(){t(10,h=!1)}function T(ee){E=ee,t(13,L=!1),t(14,x=!0)}function Q(){E="",t(13,L=!1)}function q(ee){if(t(14,x=!1),ee!==E){alert("两次输入的密码不一致"),E="",t(13,L=!0);return}X("passphrase",E).then(()=>{t(10,h=!1),E=""}).catch(le=>{console.error("导出失败:",le),alert("导出失败: "+le.message)})}function ne(){E="",t(14,x=!1)}function ie(ee){const le=new Set(w);le.has(ee)?le.delete(ee):le.add(ee),t(12,w=le)}function ce(ee){const le=new Set(w);ee.every(Pe=>le.has(Pe.id))?ee.forEach(Pe=>le.delete(Pe.id)):ee.forEach(Pe=>le.add(Pe.id)),t(12,w=le)}function fe(){if(w.size===b.length){t(12,w=new Set);return}t(12,w=new Set(b.map(ee=>ee.id)))}function ge(ee){return ee.length>0&&ee.every(le=>w.has(le.id))}async function pe(ee){if(ee.stopPropagation(),t(6,v=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}try{const le=await window.wailsBindings.SelectImportFile();if(!le)return;p=le,t(9,c=!0)}catch(le){console.error("导入失败:",le),alert("导入失败: "+le.message)}}async function ye(){if(!p){t(9,c=!1);return}let ee=!1;try{const{ImportConnectionsFromFileWithPassphrase:le,ImportConnectionsFromFile:De}=window.wailsBindings;let Pe=0;if(typeof le=="function")try{Pe=await le(p,"")}catch(Je){const st=(Je==null?void 0:Je.message)||String(Je);if(st.includes("passphrase required")||st.includes("invalid passphrase")){t(9,c=!1),t(15,S=!0),ee=!0;return}throw Je}else if(typeof De=="function")Pe=await De(p);else throw new Error("导入功能不可用");Di("导入完成",`成功导入 ${Pe} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed"))}catch(le){console.error("导入失败:",le),kr("导入失败",(le==null?void 0:le.message)||le)}finally{t(9,c=!1),ee||(p="")}}async function Ke(ee){if(!p){t(15,S=!1);return}try{const{ImportConnectionsFromFileWithPassphrase:le}=window.wailsBindings;if(typeof le!="function")throw new Error("导入功能不可用");const De=await le(p,ee);Di("导入完成",`成功导入 ${De} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed")),t(15,S=!1),p=""}catch(le){const De=(le==null?void 0:le.message)||String(le);if(De.includes("invalid passphrase")){kr("导入失败","导入密码不正确，请重试"),t(15,S=!0);return}console.error("导入失败:",le),kr("导入失败",De),t(15,S=!1),p=""}}function Le(){t(15,S=!1),p=""}function Se(){t(9,c=!1),p=""}function ke(ee){const le=new Set(g);le.has(ee)?le.delete(ee):le.add(ee),t(5,g=le)}async function se(ee,le){if(le.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Yt.update(De=>De.filter(Pe=>Pe.id!==ee.id));return}t(8,y=ee),t(7,k=!0)}async function _e(){if(y)try{await window.wailsBindings.RemoveConnection(y.id),Yt.update(ee=>ee.filter(le=>le.id!==y.id))}catch(ee){console.error("Failed to delete asset:",ee),alert("删除连接失败: "+((ee==null?void 0:ee.message)||ee))}finally{t(7,k=!1),t(8,y=null)}}function ue(){t(7,k=!1),t(8,y=null)}const Ce=ee=>{ee.stopPropagation(),t(6,v=!v)},Qe=ee=>V("machine",ee),ut=ee=>V("passphrase",ee),ze=ee=>V("plain",ee);function it(){f=this.value,t(3,f)}const qe=ee=>ke(ee),nt=ee=>P(ee),je=ee=>i(ee),Ee=ee=>m(ee),We=(ee,le)=>se(ee,le),mt=ee=>i(ee),ht=(ee,le)=>W(ee,le),re=ee=>H(ee,!0),ve=(ee,le)=>z(ee,le),we=(ee,le,De)=>xl(ee,le,De);function Be(ee){k=ee,t(7,k)}function Fe(ee){c=ee,t(9,c)}const Ae=ee=>ce(ee),Ne=ee=>ie(ee.id);function be(ee){h=ee,t(10,h)}function dt(ee){L=ee,t(13,L)}function rt(ee){x=ee,t(14,x)}function Ye(ee){S=ee,t(15,S)}return r.$$set=ee=>{"onConnect"in ee&&t(0,i=ee.onConnect),"onAddClick"in ee&&t(1,o=ee.onAddClick),"onDelete"in ee&&t(51,u=ee.onDelete),"onEdit"in ee&&t(2,m=ee.onEdit)},r.$$.update=()=>{if(r.$$.dirty[0]&16|r.$$.dirty[1]&2097152&&R){const ee=b.find(le=>le.id===R);ee!=null&&ee.dbConnected&&(P(ee),t(52,R=null))}r.$$.dirty[0]&24&&t(53,n=b.filter(ee=>{const le=f.toLowerCase();return ee.name.toLowerCase().includes(le)||ee.host.toLowerCase().includes(le)||ee.group.toLowerCase().includes(le)||ee.username.toLowerCase().includes(le)})),r.$$.dirty[1]&4194304&&t(23,a=n.reduce((ee,le)=>(ee[le.group]||(ee[le.group]=[]),ee[le.group].push(le),ee),{}))},[i,o,m,f,b,g,v,k,y,c,h,_,w,L,x,S,D,B,O,I,j,K,J,a,d,te,W,M,P,H,z,V,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe,ye,Ke,Le,Se,ke,se,_e,ue,u,R,n,Ce,Qe,ut,ze,it,qe,nt,je,Ee,We,mt,ht,re,ve,we,Be,Fe,Ae,Ne,be,dt,rt,Ye]}class Ll extends Et{constructor(e){super(),xt(this,e,El,Sl,Ct,{onConnect:0,onAddClick:1,onDelete:51,onEdit:2},null,[-1,-1,-1,-1])}}var io={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(globalThis,()=>(()=>{var t={4567:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},m=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const f=o(9042),g=o(9924),v=o(844),k=o(4725),y=o(2585),c=o(3656);let p=i.AccessibilityManager=class extends v.Disposable{constructor(h,_,w,L){super(),this._terminal=h,this._coreBrowserService=w,this._renderService=L,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(x=>this._handleResize(x.rows))),this.register(this._terminal.onRender(x=>this._refreshRows(x.start,x.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(x=>this._handleChar(x))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(x=>this._handleTab(x))),this.register(this._terminal.onKey(x=>this._handleKey(x.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,c.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,v.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let _=0;_<h;_++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,_){this._liveRegionDebouncer.refresh(h,_,this._terminal.rows)}_renderRows(h,_){const w=this._terminal.buffer,L=w.lines.length.toString();for(let x=h;x<=_;x++){const E=w.lines.get(w.ydisp+x),S=[],D=(E==null?void 0:E.translateToString(!0,void 0,void 0,S))||"",B=(w.ydisp+x+1).toString(),O=this._rowElements[x];O&&(D.length===0?(O.innerText=" ",this._rowColumns.set(O,[0,1])):(O.textContent=D,this._rowColumns.set(O,S)),O.setAttribute("aria-posinset",B),O.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,_){const w=h.target,L=this._rowElements[_===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==L)return;let x,E;if(_===0?(x=w,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(x=this._rowElements.shift(),E=w,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleSelectionChange(){var D;if(this._rowElements.length===0)return;const h=document.getSelection();if(!h)return;if(h.isCollapsed)return void(this._rowContainer.contains(h.anchorNode)&&this._terminal.clearSelection());if(!h.anchorNode||!h.focusNode)return void console.error("anchorNode and/or focusNode are null");let _={node:h.anchorNode,offset:h.anchorOffset},w={node:h.focusNode,offset:h.focusOffset};if((_.node.compareDocumentPosition(w.node)&Node.DOCUMENT_POSITION_PRECEDING||_.node===w.node&&_.offset>w.offset)&&([_,w]=[w,_]),_.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(_={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(_.node))return;const L=this._rowElements.slice(-1)[0];if(w.node.compareDocumentPosition(L)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(w={node:L,offset:((D=L.textContent)==null?void 0:D.length)??0}),!this._rowContainer.contains(w.node))return;const x=({node:B,offset:O})=>{const I=B instanceof Text?B.parentNode:B;let R=parseInt(I==null?void 0:I.getAttribute("aria-posinset"),10)-1;if(isNaN(R))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(I);if(!j)return console.warn("columns is null. Race condition?"),null;let K=O<j.length?j[O]:j.slice(-1)[0]+1;return K>=this._terminal.cols&&(++R,K=0),{row:R,column:K}},E=x(_),S=x(w);if(E&&S){if(E.row>S.row||E.row===S.row&&E.column>=S.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(S.row-E.row)*this._terminal.cols-E.column+S.column)}}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=this._coreBrowserService.mainDocument.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=p=u([m(1,y.IInstantiationService),m(2,k.ICoreBrowserService),m(3,k.IRenderService)],p)},3614:(d,i)=>{function o(g){return g.replace(/\r?\n/g,"\r")}function u(g,v){return v?"\x1B[200~"+g+"\x1B[201~":g}function m(g,v,k,y){g=u(g=o(g),k.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(g,!0),v.value=""}function f(g,v,k){const y=k.getBoundingClientRect(),c=g.clientX-y.left-10,p=g.clientY-y.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${c}px`,v.style.top=`${p}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=u,i.copyHandler=function(g,v){g.clipboardData&&g.clipboardData.setData("text/plain",v.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,v,k,y){g.stopPropagation(),g.clipboardData&&m(g.clipboardData.getData("text/plain"),v,k,y)},i.paste=m,i.moveTextAreaUnderMouseCursor=f,i.rightClickHandler=function(g,v,k,y,c){f(g,v,k),c&&y.rightClickSelect(g),v.value=y.selectionText,v.select()}},7239:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=o(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(m,f,g){this._css.set(m,f,g)}getCss(m,f){return this._css.get(m,f)}setColor(m,f,g){this._color.set(m,f,g)}getColor(m,f){return this._color.get(m,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,u,m,f){o.addEventListener(u,m,f);let g=!1;return{dispose:()=>{g||(g=!0,o.removeEventListener(u,m,f))}}}},3551:function(d,i,o){var u=this&&this.__decorate||function(p,h,_,w){var L,x=arguments.length,E=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,h,_,w);else for(var S=p.length-1;S>=0;S--)(L=p[S])&&(E=(x<3?L(E):x>3?L(h,_,E):L(h,_))||E);return x>3&&E&&Object.defineProperty(h,_,E),E},m=this&&this.__param||function(p,h){return function(_,w){h(_,w,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const f=o(3656),g=o(8460),v=o(844),k=o(2585),y=o(4725);let c=i.Linkifier=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(p,h,_,w,L){super(),this._element=p,this._mouseService=h,this._renderService=_,this._bufferService=w,this._linkProviderService=L,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{var x;this._lastMouseEvent=void 0,(x=this._activeProviderReplies)==null||x.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const h=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;const _=p.composedPath();for(let w=0;w<_.length;w++){const L=_[w];if(L.classList.contains("xterm"))break;if(L.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,h){var w,L;this._activeProviderReplies&&h||((w=this._activeProviderReplies)==null||w.forEach(x=>{x==null||x.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=p.y);let _=!1;for(const[x,E]of this._linkProviderService.linkProviders.entries())h?(L=this._activeProviderReplies)!=null&&L.get(x)&&(_=this._checkLinkProviderResult(x,p,_)):E.provideLinks(p.y,S=>{var B,O;if(this._isMouseOut)return;const D=S==null?void 0:S.map(I=>({link:I}));(B=this._activeProviderReplies)==null||B.set(x,D),_=this._checkLinkProviderResult(x,p,_),((O=this._activeProviderReplies)==null?void 0:O.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)})}_removeIntersectingLinks(p,h){const _=new Set;for(let w=0;w<h.size;w++){const L=h.get(w);if(L)for(let x=0;x<L.length;x++){const E=L[x],S=E.link.range.start.y<p?0:E.link.range.start.x,D=E.link.range.end.y>p?this._bufferService.cols:E.link.range.end.x;for(let B=S;B<=D;B++){if(_.has(B)){L.splice(x--,1);break}_.add(B)}}}}_checkLinkProviderResult(p,h,_){var x;if(!this._activeProviderReplies)return _;const w=this._activeProviderReplies.get(p);let L=!1;for(let E=0;E<p;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(L=!0);if(!L&&w){const E=w.find(S=>this._linkAtPosition(S.link,h));E&&(_=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!_)for(let E=0;E<this._activeProviderReplies.size;E++){const S=(x=this._activeProviderReplies.get(E))==null?void 0:x.find(D=>this._linkAtPosition(D.link,h));if(S){_=!0,this._handleNewLink(S);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const h=this._positionFromMouseEvent(p,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,h){this._currentLink&&this._lastMouseEvent&&(!p||!h||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(p.link,h)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var _,w;return(w=(_=this._currentLink)==null?void 0:_.state)==null?void 0:w.decorations.pointerCursor},set:_=>{var w;(w=this._currentLink)!=null&&w.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",_))}},underline:{get:()=>{var _,w;return(w=(_=this._currentLink)==null?void 0:_.state)==null?void 0:w.decorations.underline},set:_=>{var w,L,x;(w=this._currentLink)!=null&&w.state&&((x=(L=this._currentLink)==null?void 0:L.state)==null?void 0:x.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,_))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;const w=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=w&&this._currentLink.link.range.end.y<=L&&(this._clearCurrentLink(w,L),this._lastMouseEvent)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}})))}_linkHover(p,h,_){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(_,h.text)}_fireUnderlineEvent(p,h){const _=p.range,w=this._bufferService.buffer.ydisp,L=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-w-1,_.end.x,_.end.y-w-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(L)}_linkLeave(p,h,_){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(_,h.text)}_linkAtPosition(p,h){const _=p.range.start.y*this._bufferService.cols+p.range.start.x,w=p.range.end.y*this._bufferService.cols+p.range.end.x,L=h.y*this._bufferService.cols+h.x;return _<=L&&L<=w}_positionFromMouseEvent(p,h,_){const w=_.getCoords(p,h,this._bufferService.cols,this._bufferService.rows);if(w)return{x:w[0],y:w[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,h,_,w,L){return{x1:p,y1:h,x2:_,y2:w,cols:this._bufferService.cols,fg:L}}};i.Linkifier=c=u([m(1,y.IMouseService),m(2,y.IRenderService),m(3,k.IBufferService),m(4,y.ILinkProviderService)],c)},9042:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(d,i,o){var u=this&&this.__decorate||function(y,c,p,h){var _,w=arguments.length,L=w<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,c,p,h);else for(var x=y.length-1;x>=0;x--)(_=y[x])&&(L=(w<3?_(L):w>3?_(c,p,L):_(c,p))||L);return w>3&&L&&Object.defineProperty(c,p,L),L},m=this&&this.__param||function(y,c){return function(p,h){c(p,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const f=o(511),g=o(2585);let v=i.OscLinkProvider=class{constructor(y,c,p){this._bufferService=y,this._optionsService=c,this._oscLinkService=p}provideLinks(y,c){var D;const p=this._bufferService.buffer.lines.get(y-1);if(!p)return void c(void 0);const h=[],_=this._optionsService.rawOptions.linkHandler,w=new f.CellData,L=p.getTrimmedLength();let x=-1,E=-1,S=!1;for(let B=0;B<L;B++)if(E!==-1||p.hasContent(B)){if(p.loadCell(B,w),w.hasExtendedAttrs()&&w.extended.urlId){if(E===-1){E=B,x=w.extended.urlId;continue}S=w.extended.urlId!==x}else E!==-1&&(S=!0);if(S||E!==-1&&B===L-1){const O=(D=this._oscLinkService.getLinkData(x))==null?void 0:D.uri;if(O){const I={start:{x:E+1,y},end:{x:B+(S||B!==L-1?0:1),y}};let R=!1;if(!(_!=null&&_.allowNonHttpProtocols))try{const j=new URL(O);["http:","https:"].includes(j.protocol)||(R=!0)}catch{R=!0}R||h.push({text:O,range:I,activate:(j,K)=>_?_.activate(j,K,I):k(0,K),hover:(j,K)=>{var J;return(J=_==null?void 0:_.hover)==null?void 0:J.call(_,j,K,I)},leave:(j,K)=>{var J;return(J=_==null?void 0:_.leave)==null?void 0:J.call(_,j,K,I)}})}S=!1,w.hasExtendedAttrs()&&w.extended.urlId?(E=B,x=w.extended.urlId):(E=-1,x=-1)}}c(h)}};function k(y,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=v=u([m(0,g.IBufferService),m(1,g.IOptionsService),m(2,g.IOscLinkService)],v)},6193:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,u){this._renderCallback=o,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,u,m){this._rowCount=m,o=o!==void 0?o:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=o(3614),m=o(3656),f=o(3551),g=o(9042),v=o(3730),k=o(1680),y=o(3107),c=o(5744),p=o(2950),h=o(1296),_=o(428),w=o(4269),L=o(5114),x=o(8934),E=o(3230),S=o(9312),D=o(4725),B=o(6731),O=o(8055),I=o(8969),R=o(8460),j=o(844),K=o(6114),J=o(8437),te=o(2584),W=o(7399),M=o(5941),P=o(9074),H=o(2585),z=o(5435),$=o(4567),V=o(779);class X extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=K,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(V.LinkProviderService),this._instantiationService.setService(D.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((T,Q)=>this.refresh(T,Q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(T=>this._reportWindowsOptions(T))),this.register(this._inputHandler.onColor(T=>this._handleColorEvent(T))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(T=>this._afterResize(T.cols,T.rows))),this.register((0,j.toDisposable)(()=>{var T,Q;this._customKeyEventHandler=void 0,(Q=(T=this.element)==null?void 0:T.parentNode)==null||Q.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(const T of F){let Q,q="";switch(T.index){case 256:Q="foreground",q="10";break;case 257:Q="background",q="11";break;case 258:Q="cursor",q="12";break;default:Q="ansi",q="4;"+T.index}switch(T.type){case 0:const ne=O.color.toColorRGB(Q==="ansi"?this._themeService.colors.ansi[T.index]:this._themeService.colors[Q]);this.coreService.triggerDataEvent(`${te.C0.ESC}]${q};${(0,M.toRgbString)(ne)}${te.C1_ESCAPED.ST}`);break;case 1:if(Q==="ansi")this._themeService.modifyColors(ie=>ie.ansi[T.index]=O.channels.toColor(...T.color));else{const ie=Q;this._themeService.modifyColors(ce=>ce[ie]=O.channels.toColor(...T.color))}break;case 2:this._themeService.restoreColor(T.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance($.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)==null?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const F=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(F);if(!T)return;const Q=Math.min(this.buffer.x,this.cols-1),q=this._renderService.dimensions.css.cell.height,ne=T.getWidth(Q),ie=this._renderService.dimensions.css.cell.width*ne,ce=this.buffer.y*this._renderService.dimensions.css.cell.height,fe=Q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=fe+"px",this.textarea.style.top=ce+"px",this.textarea.style.width=ie+"px",this.textarea.style.height=q+"px",this.textarea.style.lineHeight=q+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",T=>{this.hasSelection()&&(0,u.copyHandler)(T,this._selectionService)}));const F=T=>(0,u.handlePasteEvent)(T,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,m.addDisposableDomListener)(this.element,"paste",F)),K.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",T=>{T.button===2&&(0,u.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",T=>{(0,u.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),K.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",T=>{T.button===1&&(0,u.moveTextAreaUnderMouseCursor)(T,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,m.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var Q;if(!F)throw new Error("Terminal requires a parent element.");if(F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((Q=this.element)==null?void 0:Q.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=F.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);const T=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,m.addDisposableDomListener)(this.screenElement,"mousemove",q=>this.updateCursorStyle(q))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),K.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(L.CoreBrowserService,this.textarea,F.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(D.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",q=>this._handleTextAreaFocus(q))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(D.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(D.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(w.CharacterJoinerService),this._instantiationService.setService(D.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(D.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(q=>this._onRender.fire(q))),this.onResize(q=>this._renderService.resize(q.cols,q.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(D.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(f.Linkifier,this.screenElement)),this.element.appendChild(T);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(q=>this.scrollLines(q.amount,q.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(D.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(q=>this.scrollLines(q.amount,q.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(q=>this._renderService.handleSelectionChanged(q.start,q.end,q.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(q=>{this.textarea.value=q,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(q=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",q=>this._selectionService.handleMouseDown(q))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance($.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",q=>this._handleScreenReaderModeOptionChange(q))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",q=>{!this._overviewRulerRenderer&&q&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const F=this,T=this.element;function Q(ie){const ce=F._mouseService.getMouseReportCoords(ie,F.screenElement);if(!ce)return!1;let fe,ge;switch(ie.overrideType||ie.type){case"mousemove":ge=32,ie.buttons===void 0?(fe=3,ie.button!==void 0&&(fe=ie.button<3?ie.button:3)):fe=1&ie.buttons?0:4&ie.buttons?1:2&ie.buttons?2:3;break;case"mouseup":ge=0,fe=ie.button<3?ie.button:3;break;case"mousedown":ge=1,fe=ie.button<3?ie.button:3;break;case"wheel":if(F._customWheelEventHandler&&F._customWheelEventHandler(ie)===!1||F.viewport.getLinesScrolled(ie)===0)return!1;ge=ie.deltaY<0?0:1,fe=4;break;default:return!1}return!(ge===void 0||fe===void 0||fe>4)&&F.coreMouseService.triggerMouseEvent({col:ce.col,row:ce.row,x:ce.x,y:ce.y,button:fe,action:ge,ctrl:ie.ctrlKey,alt:ie.altKey,shift:ie.shiftKey})}const q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:ie=>(Q(ie),ie.buttons||(this._document.removeEventListener("mouseup",q.mouseup),q.mousedrag&&this._document.removeEventListener("mousemove",q.mousedrag)),this.cancel(ie)),wheel:ie=>(Q(ie),this.cancel(ie,!0)),mousedrag:ie=>{ie.buttons&&Q(ie)},mousemove:ie=>{ie.buttons||Q(ie)}};this.register(this.coreMouseService.onProtocolChange(ie=>{ie?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ie)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ie?q.mousemove||(T.addEventListener("mousemove",ne.mousemove),q.mousemove=ne.mousemove):(T.removeEventListener("mousemove",q.mousemove),q.mousemove=null),16&ie?q.wheel||(T.addEventListener("wheel",ne.wheel,{passive:!1}),q.wheel=ne.wheel):(T.removeEventListener("wheel",q.wheel),q.wheel=null),2&ie?q.mouseup||(q.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",q.mouseup),q.mouseup=null),4&ie?q.mousedrag||(q.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",q.mousedrag),q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(T,"mousedown",ie=>{if(ie.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ie))return Q(ie),q.mouseup&&this._document.addEventListener("mouseup",q.mouseup),q.mousedrag&&this._document.addEventListener("mousemove",q.mousedrag),this.cancel(ie)})),this.register((0,m.addDisposableDomListener)(T,"wheel",ie=>{if(!q.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ie)===!1)return!1;if(!this.buffer.hasScrollback){const ce=this.viewport.getLinesScrolled(ie);if(ce===0)return;const fe=te.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ie.deltaY<0?"A":"B");let ge="";for(let pe=0;pe<Math.abs(ce);pe++)ge+=fe;return this.coreService.triggerDataEvent(ge,!0),this.cancel(ie,!0)}return this.viewport.handleWheel(ie)?this.cancel(ie):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(T,"touchstart",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ie),this.cancel(ie)},{passive:!0})),this.register((0,m.addDisposableDomListener)(T,"touchmove",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ie)?void 0:this.cancel(ie)},{passive:!1}))}refresh(F,T){var Q;(Q=this._renderService)==null||Q.refreshRows(F,T)}updateCursorStyle(F){var T;(T=this._selectionService)!=null&&T.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,T,Q=0){var q;Q===1?(super.scrollLines(F,T,Q),this.refresh(0,this.rows-1)):(q=this.viewport)==null||q.scrollLines(F)}paste(F){(0,u.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}attachCustomWheelEventHandler(F){this._customWheelEventHandler=F}registerLinkProvider(F){return this._linkProviderService.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const T=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),T}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,T,Q){this._selectionService.setSelection(F,T,Q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)==null||F.clearSelection()}selectAll(){var F;(F=this._selectionService)==null||F.selectAll()}selectLines(F,T){var Q;(Q=this._selectionService)==null||Q.selectLines(F,T)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;const T=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!T&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;T||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Q=(0,W.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),Q.type===3||Q.type===2){const q=this.rows-1;return this.scrollLines(Q.type===2?-q:q),this.cancel(F,!0)}return Q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(Q.cancel&&this.cancel(F,!0),!Q.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Q.key!==te.C0.ETX&&Q.key!==te.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Q.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(Q.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,T){const Q=F.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||F.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey||F.isWindows&&T.getModifierState("AltGraph");return T.type==="keypress"?Q:Q&&(!T.keyCode||T.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let T;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)T=F.charCode;else if(F.which===null||F.which===void 0)T=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;T=F.which}return!(!T||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(T,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const T=F.data;return this.coreService.triggerDataEvent(T,!0),this.cancel(F),!0}return!1}resize(F,T){F!==this.cols||T!==this.rows?super.resize(F,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,T){var Q,q;(Q=this._charSizeService)==null||Q.measure(),(q=this.viewport)==null||q.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let T=1;T<this.rows;T++)this.buffer.lines.push(this.buffer.getBlankLine(J.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)==null||F.reset(),this.refresh(0,this.rows-1)}}reset(){var T,Q;this.options.rows=this.rows,this.options.cols=this.cols;const F=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)==null||T.reset(),this._decorationService.reset(),(Q=this.viewport)==null||Q.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)==null||F.clearTextureAtlas()}_reportFocus(){var F;(F=this.element)!=null&&F.classList.contains("focus")?this.coreService.triggerDataEvent(te.C0.ESC+"[I"):this.coreService.triggerDataEvent(te.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const T=this._renderService.dimensions.css.canvas.width.toFixed(0),Q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[4;${Q};${T}t`);break;case z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const q=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[6;${ne};${q}t`)}}cancel(F,T){if(this.options.cancelEvents||T)return F.preventDefault(),F.stopPropagation(),!1}}i.Terminal=X},9924:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,u=1e3){this._renderCallback=o,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,u,m){this._rowCount=m,o=o!==void 0?o:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=f-this._lastRefreshMs,v=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,u)}}},1680:function(d,i,o){var u=this&&this.__decorate||function(p,h,_,w){var L,x=arguments.length,E=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,h,_,w);else for(var S=p.length-1;S>=0;S--)(L=p[S])&&(E=(x<3?L(E):x>3?L(h,_,E):L(h,_))||E);return x>3&&E&&Object.defineProperty(h,_,E),E},m=this&&this.__param||function(p,h){return function(_,w){h(_,w,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const f=o(3656),g=o(4725),v=o(8460),k=o(844),y=o(2585);let c=i.Viewport=class extends k.Disposable{constructor(p,h,_,w,L,x,E,S){super(),this._viewportElement=p,this._scrollArea=h,this._bufferService=_,this._optionsService=w,this._charSizeService=L,this._renderService=x,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(D=>this._renderDimensions=D)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(D=>this._handleThemeChange(D))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,h){const _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(h<0&&this._viewportElement.scrollTop!==0||h>0&&_<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const h=this._getPixelsScrolled(p);return h!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(p,h))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const h=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let h=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getBufferElements(p,h){var S;let _,w="";const L=[],x=h??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let D=p;D<x;D++){const B=E.get(D);if(!B)continue;const O=(S=E.get(D+1))==null?void 0:S.isWrapped;if(w+=B.translateToString(!O),!O||D===E.length-1){const I=document.createElement("div");I.textContent=w,L.push(I),w.length>0&&(_=I),w=""}}return{bufferElements:L,cursorElement:_}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let h=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(p,h){const _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&h.altKey||_==="ctrl"&&h.ctrlKey||_==="shift"&&h.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const h=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,h!==0&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(p,h))}};i.Viewport=c=u([m(2,y.IBufferService),m(3,y.IOptionsService),m(4,g.ICharSizeService),m(5,g.IRenderService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],c)},3107:function(d,i,o){var u=this&&this.__decorate||function(y,c,p,h){var _,w=arguments.length,L=w<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,c,p,h);else for(var x=y.length-1;x>=0;x--)(_=y[x])&&(L=(w<3?_(L):w>3?_(c,p,L):_(c,p))||L);return w>3&&L&&Object.defineProperty(c,p,L),L},m=this&&this.__param||function(y,c){return function(p,h){c(p,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const f=o(4725),g=o(844),v=o(2585);let k=i.BufferDecorationRenderer=class extends g.Disposable{constructor(y,c,p,h,_){super(),this._screenElement=y,this._bufferService=c,this._coreBrowserService=p,this._decorationService=h,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(w=>this._removeDecoration(w))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const y of this._decorationService.decorations)this._renderDecoration(y);this._dimensionsChanged=!1}_renderDecoration(y){this._refreshStyle(y),this._dimensionsChanged&&this._refreshXPosition(y)}_createElement(y){var h;const c=this._coreBrowserService.mainDocument.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((h=y==null?void 0:y.options)==null?void 0:h.layer)==="top"),c.style.width=`${Math.round((y.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(y.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(y.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=y.options.x??0;return p&&p>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(y,c),c}_refreshStyle(y){const c=y.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)y.element&&(y.element.style.display="none",y.onRenderEmitter.fire(y.element));else{let p=this._decorationElements.get(y);p||(p=this._createElement(y),y.element=p,this._decorationElements.set(y,p),this._container.appendChild(p),y.onDispose(()=>{this._decorationElements.delete(y),p.remove()})),p.style.top=c*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",y.onRenderEmitter.fire(p)}}_refreshXPosition(y,c=y.element){if(!c)return;const p=y.options.x??0;(y.options.anchor||"left")==="right"?c.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(y){var c;(c=this._decorationElements.get(y))==null||c.remove(),this._decorationElements.delete(y),y.dispose()}};i.BufferDecorationRenderer=k=u([m(1,v.IBufferService),m(2,f.ICoreBrowserService),m(3,v.IDecorationService),m(4,f.IRenderService)],k)},5871:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const u of this._zones)if(u.color===o.options.overviewRulerOptions.color&&u.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,o.marker.line))return;if(this._lineAdjacentToZone(u,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(u,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,u){return u>=o.startBufferLine&&u<=o.endBufferLine}_lineAdjacentToZone(o,u,m){return u>=o.startBufferLine-this._linePadding[m||"full"]&&u<=o.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(o,u){o.startBufferLine=Math.min(o.startBufferLine,u),o.endBufferLine=Math.max(o.endBufferLine,u)}}},5744:function(d,i,o){var u=this&&this.__decorate||function(_,w,L,x){var E,S=arguments.length,D=S<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,L):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,w,L,x);else for(var B=_.length-1;B>=0;B--)(E=_[B])&&(D=(S<3?E(D):S>3?E(w,L,D):E(w,L))||D);return S>3&&D&&Object.defineProperty(w,L,D),D},m=this&&this.__param||function(_,w){return function(L,x){w(L,x,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const f=o(5871),g=o(4725),v=o(844),k=o(2585),y={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let h=i.OverviewRulerRenderer=class extends v.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,w,L,x,E,S,D){var O;super(),this._viewportElement=_,this._screenElement=w,this._bufferService=L,this._decorationService=x,this._renderService=E,this._optionsService=S,this._coreBrowserService=D,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)==null||O.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var I;(I=this._canvas)==null||I.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=_,c.center=w,c.right=_,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=c.left,p.right=c.left+c.center}_refreshDrawHeightConstants(){y.full=Math.round(2*this._coreBrowserService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowserService.dpr);y.left=w,y.center=w,y.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const w of _)w.position!=="full"&&this._renderColorZone(w);for(const w of _)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(p[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-y[_.position||"full"]/2),c[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+y[_.position||"full"]))}_queueRefresh(_,w){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=h=u([m(2,k.IBufferService),m(3,k.IDecorationService),m(4,g.IRenderService),m(5,k.IOptionsService),m(6,g.ICoreBrowserService)],h)},2950:function(d,i,o){var u=this&&this.__decorate||function(y,c,p,h){var _,w=arguments.length,L=w<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,c,p,h);else for(var x=y.length-1;x>=0;x--)(_=y[x])&&(L=(w<3?_(L):w>3?_(c,p,L):_(c,p))||L);return w>3&&L&&Object.defineProperty(c,p,L),L},m=this&&this.__param||function(y,c){return function(p,h){c(p,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const f=o(4725),g=o(2585),v=o(2584);let k=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,c,p,h,_,w){this._textarea=y,this._compositionView=c,this._bufferService=p,this._optionsService=h,this._coreService=_,this._renderService=w,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,p=c.replace(y,"");this._dataAlreadySent=p,c.length>y.length?this._coreService.triggerDataEvent(p,!0):c.length<y.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):c.length===y.length&&c!==y&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,h=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=h+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const w=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=h+"px",this._textarea.style.width=Math.max(w.width,1)+"px",this._textarea.style.height=Math.max(w.height,1)+"px",this._textarea.style.lineHeight=w.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=k=u([m(2,g.IBufferService),m(3,g.IOptionsService),m(4,g.ICoreService),m(5,f.IRenderService)],k)},9806:(d,i)=>{function o(u,m,f){const g=f.getBoundingClientRect(),v=u.getComputedStyle(f),k=parseInt(v.getPropertyValue("padding-left")),y=parseInt(v.getPropertyValue("padding-top"));return[m.clientX-g.left-k,m.clientY-g.top-y]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(u,m,f,g,v,k,y,c,p){if(!k)return;const h=o(u,m,f);return h?(h[0]=Math.ceil((h[0]+(p?y/2:0))/y),h[1]=Math.ceil(h[1]/c),h[0]=Math.min(Math.max(h[0],1),g+(p?1:0)),h[1]=Math.min(Math.max(h[1],1),v),h):void 0}},9504:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=o(2584);function m(c,p,h,_){const w=c-f(c,h),L=p-f(p,h),x=Math.abs(w-L)-function(E,S,D){let B=0;const O=E-f(E,D),I=S-f(S,D);for(let R=0;R<Math.abs(O-I);R++){const j=g(E,S)==="A"?-1:1,K=D.buffer.lines.get(O+j*R);K!=null&&K.isWrapped&&B++}return B}(c,p,h);return y(x,k(g(c,p),_))}function f(c,p){let h=0,_=p.buffer.lines.get(c),w=_==null?void 0:_.isWrapped;for(;w&&c>=0&&c<p.rows;)h++,_=p.buffer.lines.get(--c),w=_==null?void 0:_.isWrapped;return h}function g(c,p){return c>p?"A":"B"}function v(c,p,h,_,w,L){let x=c,E=p,S="";for(;x!==h||E!==_;)x+=w?1:-1,w&&x>L.cols-1?(S+=L.buffer.translateBufferLineToString(E,!1,c,x),x=0,c=0,E++):!w&&x<0&&(S+=L.buffer.translateBufferLineToString(E,!1,0,c+1),x=L.cols-1,c=x,E--);return S+L.buffer.translateBufferLineToString(E,!1,c,x)}function k(c,p){const h=p?"O":"[";return u.C0.ESC+h+c}function y(c,p){c=Math.floor(c);let h="";for(let _=0;_<c;_++)h+=p;return h}i.moveToCellSequence=function(c,p,h,_){const w=h.buffer.x,L=h.buffer.y;if(!h.buffer.hasScrollback)return function(S,D,B,O,I,R){return m(D,O,I,R).length===0?"":y(v(S,D,S,D-f(D,I),!1,I).length,k("D",R))}(w,L,0,p,h,_)+m(L,p,h,_)+function(S,D,B,O,I,R){let j;j=m(D,O,I,R).length>0?O-f(O,I):D;const K=O,J=function(te,W,M,P,H,z){let $;return $=m(M,P,H,z).length>0?P-f(P,H):W,te<M&&$<=P||te>=M&&$<P?"C":"D"}(S,D,B,O,I,R);return y(v(S,j,B,K,J==="C",I).length,k(J,R))}(w,L,c,p,h,_);let x;if(L===p)return x=w>c?"D":"C",y(Math.abs(w-c),k(x,_));x=L>p?"D":"C";const E=Math.abs(L-p);return y(function(S,D){return D.cols-S}(L>p?c:w,h)+(E-1)*h.cols+1+((L>p?w:c)-1),k(x,_))}},1296:function(d,i,o){var u=this&&this.__decorate||function(R,j,K,J){var te,W=arguments.length,M=W<3?j:J===null?J=Object.getOwnPropertyDescriptor(j,K):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(R,j,K,J);else for(var P=R.length-1;P>=0;P--)(te=R[P])&&(M=(W<3?te(M):W>3?te(j,K,M):te(j,K))||M);return W>3&&M&&Object.defineProperty(j,K,M),M},m=this&&this.__param||function(R,j){return function(K,J){j(K,J,R)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const f=o(3787),g=o(2550),v=o(2223),k=o(6171),y=o(6052),c=o(4725),p=o(8055),h=o(8460),_=o(844),w=o(2585),L="xterm-dom-renderer-owner-",x="xterm-rows",E="xterm-fg-",S="xterm-bg-",D="xterm-focus",B="xterm-selection";let O=1,I=i.DomRenderer=class extends _.Disposable{constructor(R,j,K,J,te,W,M,P,H,z,$,V,X){super(),this._terminal=R,this._document=j,this._element=K,this._screenElement=J,this._viewportElement=te,this._helperContainer=W,this._linkifier2=M,this._charSizeService=H,this._optionsService=z,this._bufferService=$,this._coreBrowserService=V,this._themeService=X,this._terminalClass=O++,this._rowElements=[],this._selectionRenderModel=(0,y.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Z=>this._injectCss(Z))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(L+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Z=>this._handleLinkHover(Z))),this.register(this._linkifier2.onHideLinkUnderline(Z=>this._handleLinkLeave(Z))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(L+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const K of this._rowElements)K.style.width=`${this.dimensions.css.canvas.width}px`,K.style.height=`${this.dimensions.css.cell.height}px`,K.style.lineHeight=`${this.dimensions.css.cell.height}px`,K.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${x} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${x} .xterm-dim { color: ${p.color.multiplyOpacity(R.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const K=`blink_underline_${this._terminalClass}`,J=`blink_bar_${this._terminalClass}`,te=`blink_block_${this._terminalClass}`;j+=`@keyframes ${K} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${J} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${te} { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,j+=`${this._terminalSelector} .${x}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${x}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${x}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${te} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${R.cursor.css} !important; color: ${R.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[W,M]of R.ansi.entries())j+=`${this._terminalSelector} .${E}${W} { color: ${M.css}; }${this._terminalSelector} .${E}${W}.xterm-dim { color: ${p.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${S}${W} { background-color: ${M.css}; }`;j+=`${this._terminalSelector} .${E}${v.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(R.background).css}; }${this._terminalSelector} .${E}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${S}${v.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,j){for(let K=this._rowElements.length;K<=j;K++){const J=this._document.createElement("div");this._rowContainer.appendChild(J),this._rowElements.push(J)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,j){this._refreshRowElements(R,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(D),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(D),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,j,K){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,j,K),this.renderRows(0,this._bufferService.rows-1),!R||!j)return;this._selectionRenderModel.update(this._terminal,R,j,K);const J=this._selectionRenderModel.viewportStartRow,te=this._selectionRenderModel.viewportEndRow,W=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(W>=this._bufferService.rows||M<0)return;const P=this._document.createDocumentFragment();if(K){const H=R[0]>j[0];P.appendChild(this._createSelectionElement(W,H?j[0]:R[0],H?R[0]:j[0],M-W+1))}else{const H=J===W?R[0]:0,z=W===te?j[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(W,H,z));const $=M-W-1;if(P.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,$)),W!==M){const V=te===M?j[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(M,0,V))}}this._selectionContainer.appendChild(P)}_createSelectionElement(R,j,K,J=1){const te=this._document.createElement("div"),W=j*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(K-j);return W+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-W),te.style.height=J*this.dimensions.css.cell.height+"px",te.style.top=R*this.dimensions.css.cell.height+"px",te.style.left=`${W}px`,te.style.width=`${M}px`,te}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,j){const K=this._bufferService.buffer,J=K.ybase+K.y,te=Math.min(K.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=R;H<=j;H++){const z=H+K.ydisp,$=this._rowElements[H],V=K.lines.get(z);if(!$||!V)break;$.replaceChildren(...this._rowFactory.createRow(V,z,z===J,M,P,te,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${L}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,j,K,J,te,W){K<0&&(R=0),J<0&&(j=0);const M=this._bufferService.rows-1;K=Math.max(Math.min(K,M),0),J=Math.max(Math.min(J,M),0),te=Math.min(te,this._bufferService.cols);const P=this._bufferService.buffer,H=P.ybase+P.y,z=Math.min(P.x,te-1),$=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let Z=K;Z<=J;++Z){const F=Z+P.ydisp,T=this._rowElements[Z],Q=P.lines.get(F);if(!T||!Q)break;T.replaceChildren(...this._rowFactory.createRow(Q,F,F===H,V,X,z,$,this.dimensions.css.cell.width,this._widthCache,W?Z===K?R:0:-1,W?(Z===J?j:te)-1:-1))}}};i.DomRenderer=I=u([m(7,w.IInstantiationService),m(8,c.ICharSizeService),m(9,w.IOptionsService),m(10,w.IBufferService),m(11,c.ICoreBrowserService),m(12,c.IThemeService)],I)},3787:function(d,i,o){var u=this&&this.__decorate||function(x,E,S,D){var B,O=arguments.length,I=O<3?E:D===null?D=Object.getOwnPropertyDescriptor(E,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(x,E,S,D);else for(var R=x.length-1;R>=0;R--)(B=x[R])&&(I=(O<3?B(I):O>3?B(E,S,I):B(E,S))||I);return O>3&&I&&Object.defineProperty(E,S,I),I},m=this&&this.__param||function(x,E){return function(S,D){E(S,D,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const f=o(2223),g=o(643),v=o(511),k=o(2585),y=o(8055),c=o(4725),p=o(4269),h=o(6171),_=o(3734);let w=i.DomRendererRowFactory=class{constructor(x,E,S,D,B,O,I){this._document=x,this._characterJoinerService=E,this._optionsService=S,this._coreBrowserService=D,this._coreService=B,this._decorationService=O,this._themeService=I,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,E,S){this._selectionStart=x,this._selectionEnd=E,this._columnSelectMode=S}createRow(x,E,S,D,B,O,I,R,j,K,J){const te=[],W=this._characterJoinerService.getJoinedCharacters(E),M=this._themeService.colors;let P,H=x.getNoBgTrimmedLength();S&&H<O+1&&(H=O+1);let z=0,$="",V=0,X=0,Z=0,F=!1,T=0,Q=!1,q=0;const ne=[],ie=K!==-1&&J!==-1;for(let ce=0;ce<H;ce++){x.loadCell(ce,this._workCell);let fe=this._workCell.getWidth();if(fe===0)continue;let ge=!1,pe=ce,ye=this._workCell;if(W.length>0&&ce===W[0][0]){ge=!0;const je=W.shift();ye=new p.JoinedCellData(this._workCell,x.translateToString(!0,je[0],je[1]),je[1]-je[0]),pe=je[1]-1,fe=ye.getWidth()}const Ke=this._isCellInSelection(ce,E),Le=S&&ce===O,Se=ie&&ce>=K&&ce<=J;let ke=!1;this._decorationService.forEachDecorationAtCell(ce,E,void 0,je=>{ke=!0});let se=ye.getChars()||g.WHITESPACE_CELL_CHAR;if(se===" "&&(ye.isUnderline()||ye.isOverline())&&(se=" "),q=fe*R-j.get(se,ye.isBold(),ye.isItalic()),P){if(z&&(Ke&&Q||!Ke&&!Q&&ye.bg===V)&&(Ke&&Q&&M.selectionForeground||ye.fg===X)&&ye.extended.ext===Z&&Se===F&&q===T&&!Le&&!ge&&!ke){ye.isInvisible()?$+=g.WHITESPACE_CELL_CHAR:$+=se,z++;continue}z&&(P.textContent=$),P=this._document.createElement("span"),z=0,$=""}else P=this._document.createElement("span");if(V=ye.bg,X=ye.fg,Z=ye.extended.ext,F=Se,T=q,Q=Ke,ge&&O>=ce&&O<=pe&&(O=ce),!this._coreService.isCursorHidden&&Le&&this._coreService.isCursorInitialized){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&ne.push("xterm-cursor-blink"),ne.push(D==="bar"?"xterm-cursor-bar":D==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(ye.isBold()&&ne.push("xterm-bold"),ye.isItalic()&&ne.push("xterm-italic"),ye.isDim()&&ne.push("xterm-dim"),$=ye.isInvisible()?g.WHITESPACE_CELL_CHAR:ye.getChars()||g.WHITESPACE_CELL_CHAR,ye.isUnderline()&&(ne.push(`xterm-underline-${ye.extended.underlineStyle}`),$===" "&&($=" "),!ye.isUnderlineColorDefault()))if(ye.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB(ye.getUnderlineColor()).join(",")})`;else{let je=ye.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ye.isBold()&&je<8&&(je+=8),P.style.textDecorationColor=M.ansi[je].css}ye.isOverline()&&(ne.push("xterm-overline"),$===" "&&($=" ")),ye.isStrikethrough()&&ne.push("xterm-strikethrough"),Se&&(P.style.textDecoration="underline");let _e=ye.getFgColor(),ue=ye.getFgColorMode(),Ce=ye.getBgColor(),Qe=ye.getBgColorMode();const ut=!!ye.isInverse();if(ut){const je=_e;_e=Ce,Ce=je;const Ee=ue;ue=Qe,Qe=Ee}let ze,it,qe,nt=!1;switch(this._decorationService.forEachDecorationAtCell(ce,E,void 0,je=>{je.options.layer!=="top"&&nt||(je.backgroundColorRGB&&(Qe=50331648,Ce=je.backgroundColorRGB.rgba>>8&16777215,ze=je.backgroundColorRGB),je.foregroundColorRGB&&(ue=50331648,_e=je.foregroundColorRGB.rgba>>8&16777215,it=je.foregroundColorRGB),nt=je.options.layer==="top")}),!nt&&Ke&&(ze=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,Ce=ze.rgba>>8&16777215,Qe=50331648,nt=!0,M.selectionForeground&&(ue=50331648,_e=M.selectionForeground.rgba>>8&16777215,it=M.selectionForeground)),nt&&ne.push("xterm-decoration-top"),Qe){case 16777216:case 33554432:qe=M.ansi[Ce],ne.push(`xterm-bg-${Ce}`);break;case 50331648:qe=y.channels.toColor(Ce>>16,Ce>>8&255,255&Ce),this._addStyle(P,`background-color:#${L((Ce>>>0).toString(16),"0",6)}`);break;default:ut?(qe=M.foreground,ne.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):qe=M.background}switch(ze||ye.isDim()&&(ze=y.color.multiplyOpacity(qe,.5)),ue){case 16777216:case 33554432:ye.isBold()&&_e<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(_e+=8),this._applyMinimumContrast(P,qe,M.ansi[_e],ye,ze,void 0)||ne.push(`xterm-fg-${_e}`);break;case 50331648:const je=y.channels.toColor(_e>>16&255,_e>>8&255,255&_e);this._applyMinimumContrast(P,qe,je,ye,ze,it)||this._addStyle(P,`color:#${L(_e.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,qe,M.foreground,ye,ze,it)||ut&&ne.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}ne.length&&(P.className=ne.join(" "),ne.length=0),Le||ge||ke?P.textContent=$:z++,q!==this.defaultSpacing&&(P.style.letterSpacing=`${q}px`),te.push(P),ce=pe}return P&&z&&(P.textContent=$),te}_applyMinimumContrast(x,E,S,D,B,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,h.treatGlyphAsBackgroundColor)(D.getCode()))return!1;const I=this._getContrastCache(D);let R;if(B||O||(R=I.getColor(E.rgba,S.rgba)),R===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(D.isDim()?2:1);R=y.color.ensureContrastRatio(B||E,O||S,j),I.setColor((B||E).rgba,(O||S).rgba,R??null)}return!!R&&(this._addStyle(x,`color:${R.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,E){x.setAttribute("style",`${x.getAttribute("style")||""}${E};`)}_isCellInSelection(x,E){const S=this._selectionStart,D=this._selectionEnd;return!(!S||!D)&&(this._columnSelectMode?S[0]<=D[0]?x>=S[0]&&E>=S[1]&&x<D[0]&&E<=D[1]:x<S[0]&&E>=S[1]&&x>=D[0]&&E<=D[1]:E>S[1]&&E<D[1]||S[1]===D[1]&&E===S[1]&&x>=S[0]&&x<D[0]||S[1]<D[1]&&E===D[1]&&x<D[0]||S[1]<D[1]&&E===S[1]&&x>=S[0])}};function L(x,E,S){for(;x.length<S;)x=E+x;return x}i.DomRendererRowFactory=w=u([m(1,c.ICharacterJoinerService),m(2,k.IOptionsService),m(3,c.ICoreBrowserService),m(4,k.ICoreService),m(5,k.IDecorationService),m(6,c.IThemeService)],w)},2550:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=o.createElement("span");m.classList.add("xterm-char-measure-element");const f=o.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold";const g=o.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const v=o.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[m,f,g,v],this._container.appendChild(m),this._container.appendChild(f),this._container.appendChild(g),this._container.appendChild(v),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,u,m,f){o===this._font&&u===this._fontSize&&m===this._weight&&f===this._weightBold||(this._font=o,this._fontSize=u,this._weight=m,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(o,u,m){let f=0;if(!u&&!m&&o.length===1&&(f=o.charCodeAt(0))<256){if(this._flat[f]!==-9999)return this._flat[f];const k=this._measure(o,0);return k>0&&(this._flat[f]=k),k}let g=o;u&&(g+="B"),m&&(g+="I");let v=this._holey.get(g);if(v===void 0){let k=0;u&&(k|=1),m&&(k|=2),v=this._measure(o,k),v>0&&this._holey.set(g,v)}return v}_measure(o,u){const m=this._measureElements[u];return m.textContent=o.repeat(32),m.offsetWidth/32}}},2223:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(d,i)=>{function o(m){return 57508<=m&&m<=57558}function u(m){return m>=128512&&m<=128591||m>=127744&&m<=128511||m>=128640&&m<=128767||m>=9728&&m<=9983||m>=9984&&m<=10175||m>=65024&&m<=65039||m>=129280&&m<=129535||m>=127462&&m<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},i.isEmoji=u,i.allowRescaling=function(m,f,g,v){return f===1&&g>Math.ceil(1.5*v)&&m!==void 0&&m>255&&!u(m)&&!o(m)&&!function(k){return 57344<=k&&k<=63743}(m)},i.treatGlyphAsBackgroundColor=function(m){return o(m)||function(f){return 9472<=f&&f<=9631}(m)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(m,f,g=0){return(m-(2*Math.round(f)-g))%(2*Math.round(f))}},6052:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(m,f,g,v=!1){if(this.selectionStart=f,this.selectionEnd=g,!f||!g||f[0]===g[0]&&f[1]===g[1])return void this.clear();const k=m.buffers.active.ydisp,y=f[1]-k,c=g[1]-k,p=Math.max(y,0),h=Math.min(c,m.rows-1);p>=m.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=v,this.viewportStartRow=y,this.viewportEndRow=c,this.viewportCappedStartRow=p,this.viewportCappedEndRow=h,this.startCol=f[0],this.endCol=g[0])}isCellSelected(m,f,g){return!!this.hasSelection&&(g-=m.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?f>=this.startCol&&g>=this.viewportCappedStartRow&&f<this.endCol&&g<=this.viewportCappedEndRow:f<this.startCol&&g>=this.viewportCappedStartRow&&f>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&f>=this.startCol&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&f>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,u=this.selectionEnd;return!(!o||!u)&&(o[1]>u[1]||o[1]===u[1]&&o[0]>u[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},m=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const f=o(2585),g=o(8460),v=o(844);let k=i.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(h,_,w){super(),this._optionsService=w,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new c(h,_,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())}};i.CharSizeService=k=u([m(2,f.IOptionsService)],k);class y extends v.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(_,w){_!==void 0&&_>0&&w!==void 0&&w>0&&(this._result.width=_,this._result.height=w)}}class c extends y{constructor(_,w,L){super(),this._document=_,this._parentElement=w,this._optionsService=L,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends y{constructor(_){super(),this._optionsService=_,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const w=this._ctx.measureText("W");if(!("width"in w&&"fontBoundingBoxAscent"in w&&"fontBoundingBoxDescent"in w))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const _=this._ctx.measureText("W");return this._validateAndSet(_.width,_.fontBoundingBoxAscent+_.fontBoundingBoxDescent),this._result}}},4269:function(d,i,o){var u=this&&this.__decorate||function(p,h,_,w){var L,x=arguments.length,E=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,h,_,w);else for(var S=p.length-1;S>=0;S--)(L=p[S])&&(E=(x<3?L(E):x>3?L(h,_,E):L(h,_))||E);return x>3&&E&&Object.defineProperty(h,_,E),E},m=this&&this.__param||function(p,h){return function(_,w){h(_,w,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const f=o(3734),g=o(643),v=o(511),k=o(2585);class y extends f.AttributeData{constructor(h,_,w){super(),this.content=0,this.combinedData="",this.fg=h.fg,this.bg=h.bg,this.combinedData=_,this._width=w}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(h){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=y;let c=i.CharacterJoinerService=class so{constructor(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(h){const _={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(_),_.id}deregister(h){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===h)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(h){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(h);if(!_||_.length===0)return[];const w=[],L=_.translateToString(!0);let x=0,E=0,S=0,D=_.getFg(0),B=_.getBg(0);for(let O=0;O<_.getTrimmedLength();O++)if(_.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==D||this._workCell.bg!==B){if(O-x>1){const I=this._getJoinedRanges(L,S,E,_,x);for(let R=0;R<I.length;R++)w.push(I[R])}x=O,S=E,D=this._workCell.fg,B=this._workCell.bg}E+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const O=this._getJoinedRanges(L,S,E,_,x);for(let I=0;I<O.length;I++)w.push(O[I])}return w}_getJoinedRanges(h,_,w,L,x){const E=h.substring(_,w);let S=[];try{S=this._characterJoiners[0].handler(E)}catch(D){console.error(D)}for(let D=1;D<this._characterJoiners.length;D++)try{const B=this._characterJoiners[D].handler(E);for(let O=0;O<B.length;O++)so._mergeRanges(S,B[O])}catch(B){console.error(B)}return this._stringRangesToCellRanges(S,L,x),S}_stringRangesToCellRanges(h,_,w){let L=0,x=!1,E=0,S=h[L];if(S){for(let D=w;D<this._bufferService.cols;D++){const B=_.getWidth(D),O=_.getString(D).length||g.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!x&&S[0]<=E&&(S[0]=D,x=!0),S[1]<=E){if(S[1]=D,S=h[++L],!S)break;S[0]<=E?(S[0]=D,x=!0):x=!1}E+=O}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(h,_){let w=!1;for(let L=0;L<h.length;L++){const x=h[L];if(w){if(_[1]<=x[0])return h[L-1][1]=_[1],h;if(_[1]<=x[1])return h[L-1][1]=Math.max(_[1],x[1]),h.splice(L,1),h;h.splice(L,1),L--}else{if(_[1]<=x[0])return h.splice(L,0,_),h;if(_[1]<=x[1])return x[0]=Math.min(_[0],x[0]),h;_[0]<x[1]&&(x[0]=Math.min(_[0],x[0]),w=!0)}}return w?h[h.length-1][1]=_[1]:h.push(_),h}};i.CharacterJoinerService=c=u([m(0,k.IBufferService)],c)},5114:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const u=o(844),m=o(8460),f=o(3656);class g extends u.Disposable{constructor(y,c,p){super(),this._textarea=y,this._window=c,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new v(this._window),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new m.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(h=>this._screenDprMonitor.setWindow(h))),this.register((0,m.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(y){this._window!==y&&(this._window=y,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=g;class v extends u.Disposable{constructor(y){super(),this._parentWindow=y,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(y){this._parentWindow=y,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,f.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)==null||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const u=o(844);class m extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const v=this.linkProviders.indexOf(g);v!==-1&&this.linkProviders.splice(v,1)}}}}i.LinkProviderService=m},8934:function(d,i,o){var u=this&&this.__decorate||function(k,y,c,p){var h,_=arguments.length,w=_<3?y:p===null?p=Object.getOwnPropertyDescriptor(y,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(k,y,c,p);else for(var L=k.length-1;L>=0;L--)(h=k[L])&&(w=(_<3?h(w):_>3?h(y,c,w):h(y,c))||w);return _>3&&w&&Object.defineProperty(y,c,w),w},m=this&&this.__param||function(k,y){return function(c,p){y(c,p,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const f=o(4725),g=o(9806);let v=i.MouseService=class{constructor(k,y){this._renderService=k,this._charSizeService=y}getCoords(k,y,c,p,h){return(0,g.getCoords)(window,k,y,c,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(k,y){const c=(0,g.getCoordsRelativeToElement)(window,k,y);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};i.MouseService=v=u([m(0,f.IRenderService),m(1,f.ICharSizeService)],v)},3230:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},m=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const f=o(6193),g=o(4725),v=o(8460),k=o(844),y=o(7226),c=o(2585);let p=i.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(h,_,w,L,x,E,S,D){super(),this._rowCount=h,this._charSizeService=L,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new y.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new f.RenderDebouncer((B,O)=>this._renderRows(B,O),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)==null?void 0:B.clear()})),this.register(w.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(w.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(w.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register(D.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,_),this.register(S.onWindowChange(B=>this._registerIntersectionObserver(B,_)))}_registerIntersectionObserver(h,_){if("IntersectionObserver"in h){const w=new h.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});w.observe(_),this._observerDisposable.value=(0,k.toDisposable)(()=>w.disconnect())}}_handleIntersectionChange(h){this._isPaused=h.isIntersecting===void 0?h.intersectionRatio===0:!h.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(h,_,w=!1){this._isPaused?this._needsFullRefresh=!0:(w||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(h,_,this._rowCount))}_renderRows(h,_){this._renderer.value&&(h=Math.min(h,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(h,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:h,end:_}),this._onRender.fire({start:h,end:_}),this._isNextRenderRedrawOnly=!0)}resize(h,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(h){this._renderer.value=h,this._renderer.value&&(this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(h){return this._renderDebouncer.addRefreshCallback(h)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var h,_;this._renderer.value&&((_=(h=this._renderer.value).clearTextureAtlas)==null||_.call(h),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(h,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var w;return(w=this._renderer.value)==null?void 0:w.handleResize(h,_)}):this._renderer.value.handleResize(h,_),this._fullRefresh())}handleCharSizeChanged(){var h;(h=this._renderer.value)==null||h.handleCharSizeChanged()}handleBlur(){var h;(h=this._renderer.value)==null||h.handleBlur()}handleFocus(){var h;(h=this._renderer.value)==null||h.handleFocus()}handleSelectionChanged(h,_,w){var L;this._selectionState.start=h,this._selectionState.end=_,this._selectionState.columnSelectMode=w,(L=this._renderer.value)==null||L.handleSelectionChanged(h,_,w)}handleCursorMove(){var h;(h=this._renderer.value)==null||h.handleCursorMove()}clear(){var h;(h=this._renderer.value)==null||h.clear()}};i.RenderService=p=u([m(2,c.IOptionsService),m(3,g.ICharSizeService),m(4,c.IDecorationService),m(5,c.IBufferService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],p)},9312:function(d,i,o){var u=this&&this.__decorate||function(S,D,B,O){var I,R=arguments.length,j=R<3?D:O===null?O=Object.getOwnPropertyDescriptor(D,B):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(S,D,B,O);else for(var K=S.length-1;K>=0;K--)(I=S[K])&&(j=(R<3?I(j):R>3?I(D,B,j):I(D,B))||j);return R>3&&j&&Object.defineProperty(D,B,j),j},m=this&&this.__param||function(S,D){return function(B,O){D(B,O,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const f=o(9806),g=o(9504),v=o(456),k=o(4725),y=o(8460),c=o(844),p=o(6114),h=o(4841),_=o(511),w=o(2585),L=" ",x=new RegExp(L,"g");let E=i.SelectionService=class extends c.Disposable{constructor(S,D,B,O,I,R,j,K,J){super(),this._element=S,this._screenElement=D,this._linkifier=B,this._bufferService=O,this._coreService=I,this._mouseService=R,this._optionsService=j,this._renderService=K,this._coreBrowserService=J,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=te=>this._handleMouseMove(te),this._mouseUpListener=te=>this._handleMouseUp(te),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(te=>this._handleTrim(te)),this.register(this._bufferService.buffers.onBufferActivate(te=>this._handleBufferActivate(te))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!(!S||!D||S[0]===D[0]&&S[1]===D[1])}get selectionText(){const S=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;if(!S||!D)return"";const B=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(S[0]===D[0])return"";const I=S[0]<D[0]?S[0]:D[0],R=S[0]<D[0]?D[0]:S[0];for(let j=S[1];j<=D[1];j++){const K=B.translateBufferLineToString(j,!0,I,R);O.push(K)}}else{const I=S[1]===D[1]?D[0]:void 0;O.push(B.translateBufferLineToString(S[1],!0,S[0],I));for(let R=S[1]+1;R<=D[1]-1;R++){const j=B.lines.get(R),K=B.translateBufferLineToString(R,!0);j!=null&&j.isWrapped?O[O.length-1]+=K:O.push(K)}if(S[1]!==D[1]){const R=B.lines.get(D[1]),j=B.translateBufferLineToString(D[1],!0,0,D[0]);R&&R.isWrapped?O[O.length-1]+=j:O.push(j)}}return O.map(I=>I.replace(x," ")).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),p.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const D=this._getMouseBufferCoords(S),B=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(B&&O&&D)&&this._areCoordsInSelection(D,B,O)}isCellInSelection(S,D){const B=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!B||!O)&&this._areCoordsInSelection([S,D],B,O)}_areCoordsInSelection(S,D,B){return S[1]>D[1]&&S[1]<B[1]||D[1]===B[1]&&S[1]===D[1]&&S[0]>=D[0]&&S[0]<B[0]||D[1]<B[1]&&S[1]===B[1]&&S[0]<B[0]||D[1]<B[1]&&S[1]===D[1]&&S[0]>=D[0]}_selectWordAtCursor(S,D){var I,R;const B=(R=(I=this._linkifier.currentLink)==null?void 0:I.link)==null?void 0:R.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,h.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(S);return!!O&&(this._selectWordAt(O,D),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,D){this._model.clearSelection(),S=Math.max(S,0),D=Math.min(D,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,D],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const D=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(D)return D[0]--,D[1]--,D[1]+=this._bufferService.buffer.ydisp,D}_getMouseEventScrollAmount(S){let D=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return D>=0&&D<=B?0:(D>B&&(D-=B),D=Math.min(Math.max(D,-50),50),D/=50,D/Math.abs(D)+Math.round(14*D))}shouldForceSelection(S){return p.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const D=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);D&&D.length!==this._model.selectionStart[0]&&D.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const D=this._getMouseBufferCoords(S);D&&(this._activeSelectionMode=2,this._selectLineAt(D[1]))}shouldColumnSelect(S){return S.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const D=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const O=B.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}D&&D[0]===this._model.selectionEnd[0]&&D[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const D=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&D<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const O=(0,g.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,D=this._model.finalSelectionEnd,B=!(!S||!D||S[0]===D[0]&&S[1]===D[1]);B?S&&D&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&D[0]===this._oldSelectionEnd[0]&&D[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,D,B)):this._oldHasSelection&&this._fireOnSelectionChange(S,D,B)}_fireOnSelectionChange(S,D,B){this._oldSelectionStart=S,this._oldSelectionEnd=D,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(D=>this._handleTrim(D))}_convertViewportColToCharacterIndex(S,D){let B=D;for(let O=0;D>=O;O++){const I=S.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:I>1&&D!==O&&(B+=I-1)}return B}setSelection(S,D,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,D],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,D,B=!0,O=!0){if(S[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,R=I.lines.get(S[1]);if(!R)return;const j=I.translateBufferLineToString(S[1],!1);let K=this._convertViewportColToCharacterIndex(R,S[0]),J=K;const te=S[0]-K;let W=0,M=0,P=0,H=0;if(j.charAt(K)===" "){for(;K>0&&j.charAt(K-1)===" ";)K--;for(;J<j.length&&j.charAt(J+1)===" ";)J++}else{let V=S[0],X=S[0];R.getWidth(V)===0&&(W++,V--),R.getWidth(X)===2&&(M++,X++);const Z=R.getString(X).length;for(Z>1&&(H+=Z-1,J+=Z-1);V>0&&K>0&&!this._isCharWordSeparator(R.loadCell(V-1,this._workCell));){R.loadCell(V-1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===0?(W++,V--):F>1&&(P+=F-1,K-=F-1),K--,V--}for(;X<R.length&&J+1<j.length&&!this._isCharWordSeparator(R.loadCell(X+1,this._workCell));){R.loadCell(X+1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,X++):F>1&&(H+=F-1,J+=F-1),J++,X++}}J++;let z=K+te-W+P,$=Math.min(this._bufferService.cols,J-K+W+M-P-H);if(D||j.slice(K,J).trim()!==""){if(B&&z===0&&R.getCodePoint(0)!==32){const V=I.lines.get(S[1]-1);if(V&&R.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){const X=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(X){const Z=this._bufferService.cols-X.start;z-=Z,$+=Z}}}if(O&&z+$===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){const V=I.lines.get(S[1]+1);if(V!=null&&V.isWrapped&&V.getCodePoint(0)!==32){const X=this._getWordAt([0,S[1]+1],!1,!1,!0);X&&($+=X.length)}}return{start:z,length:$}}}_selectWordAt(S,D){const B=this._getWordAt(S,D);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[B.start,S[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(S){const D=this._getWordAt(S,!0);if(D){let B=S[1];for(;D.start<0;)D.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;D.start+D.length>this._bufferService.cols;)D.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?D.start:D.start+D.length,B]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const D=this._bufferService.buffer.getWrappedRangeForLine(S),B={start:{x:0,y:D.first},end:{x:this._bufferService.cols-1,y:D.last}};this._model.selectionStart=[0,D.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,h.getRangeLength)(B,this._bufferService.cols)}};i.SelectionService=E=u([m(3,w.IBufferService),m(4,w.ICoreService),m(5,k.IMouseService),m(6,w.IOptionsService),m(7,k.IRenderService),m(8,k.ICoreBrowserService)],E)},4725:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=o(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService"),i.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(d,i,o){var u=this&&this.__decorate||function(E,S,D,B){var O,I=arguments.length,R=I<3?S:B===null?B=Object.getOwnPropertyDescriptor(S,D):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(E,S,D,B);else for(var j=E.length-1;j>=0;j--)(O=E[j])&&(R=(I<3?O(R):I>3?O(S,D,R):O(S,D))||R);return I>3&&R&&Object.defineProperty(S,D,R),R},m=this&&this.__param||function(E,S){return function(D,B){S(D,B,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const f=o(7239),g=o(8055),v=o(8460),k=o(844),y=o(2585),c=g.css.toColor("#ffffff"),p=g.css.toColor("#000000"),h=g.css.toColor("#ffffff"),_=g.css.toColor("#000000"),w={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let D=0;D<216;D++){const B=S[D/36%6|0],O=S[D/6%6|0],I=S[D%6];E.push({css:g.channels.toCss(B,O,I),rgba:g.channels.toRgba(B,O,I)})}for(let D=0;D<24;D++){const B=8+10*D;E.push({css:g.channels.toCss(B,B,B),rgba:g.channels.toRgba(B,B,B)})}return E})());let L=i.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:p,cursor:h,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:w,selectionBackgroundOpaque:g.color.blend(p,w),selectionInactiveBackgroundTransparent:w,selectionInactiveBackgroundOpaque:g.color.blend(p,w),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const S=this._colors;if(S.foreground=x(E.foreground,c),S.background=x(E.background,p),S.cursor=x(E.cursor,h),S.cursorAccent=x(E.cursorAccent,_),S.selectionBackgroundTransparent=x(E.selectionBackground,w),S.selectionBackgroundOpaque=g.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=x(E.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=g.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=E.selectionForeground?x(E.selectionForeground,g.NULL_COLOR):void 0,S.selectionForeground===g.NULL_COLOR&&(S.selectionForeground=void 0),g.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=g.color.opacity(S.selectionBackgroundTransparent,.3)),g.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=g.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=x(E.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=x(E.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=x(E.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=x(E.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=x(E.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=x(E.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=x(E.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=x(E.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=x(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=x(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=x(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=x(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=x(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=x(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=x(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=x(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const D=Math.min(S.ansi.length-16,E.extendedAnsi.length);for(let B=0;B<D;B++)S.ansi[B+16]=x(E.extendedAnsi[B],i.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(E,S){if(E!==void 0)try{return g.css.toColor(E)}catch{}return S}i.ThemeService=L=u([m(0,y.IOptionsService)],L)},6349:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=o(8460),m=o(844);class f extends m.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const k=new Array(v);for(let y=0;y<Math.min(v,this.length);y++)k[y]=this._array[this._getCyclicIndex(y)];this._array=k,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let k=this._length;k<v;k++)this._array[k]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,k){this._array[this._getCyclicIndex(v)]=k}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,k,...y){if(k){for(let c=v;c<this._length-k;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+k)];this._length-=k,this.onDeleteEmitter.fire({index:v,amount:k})}for(let c=this._length-1;c>=v;c--)this._array[this._getCyclicIndex(c+y.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<y.length;c++)this._array[this._getCyclicIndex(v+c)]=y[c];if(y.length&&this.onInsertEmitter.fire({index:v,amount:y.length}),this._length+y.length>this._maxLength){const c=this._length+y.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=y.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,k,y){if(!(k<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let p=k-1;p>=0;p--)this.set(v+p+y,this.get(v+p));const c=v+k+y-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<k;c++)this.set(v+c+y,this.get(v+c))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}i.CircularList=f},1439:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(u,m=5){if(typeof u!="object")return u;const f=Array.isArray(u)?[]:{};for(const g in u)f[g]=m<=1?u[g]:u[g]&&o(u[g],m-1);return f}},8055:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,u=0,m=0,f=0;var g,v,k,y,c;function p(_){const w=_.toString(16);return w.length<2?"0"+w:w}function h(_,w){return _<w?(w+.05)/(_+.05):(_+.05)/(w+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(w,L,x,E){return E!==void 0?`#${p(w)}${p(L)}${p(x)}${p(E)}`:`#${p(w)}${p(L)}${p(x)}`},_.toRgba=function(w,L,x,E=255){return(w<<24|L<<16|x<<8|E)>>>0},_.toColor=function(w,L,x,E){return{css:_.toCss(w,L,x,E),rgba:_.toRgba(w,L,x,E)}}}(g||(i.channels=g={})),function(_){function w(L,x){return f=Math.round(255*x),[o,u,m]=c.toChannels(L.rgba),{css:g.toCss(o,u,m,f),rgba:g.toRgba(o,u,m,f)}}_.blend=function(L,x){if(f=(255&x.rgba)/255,f===1)return{css:x.css,rgba:x.rgba};const E=x.rgba>>24&255,S=x.rgba>>16&255,D=x.rgba>>8&255,B=L.rgba>>24&255,O=L.rgba>>16&255,I=L.rgba>>8&255;return o=B+Math.round((E-B)*f),u=O+Math.round((S-O)*f),m=I+Math.round((D-I)*f),{css:g.toCss(o,u,m),rgba:g.toRgba(o,u,m)}},_.isOpaque=function(L){return(255&L.rgba)==255},_.ensureContrastRatio=function(L,x,E){const S=c.ensureContrastRatio(L.rgba,x.rgba,E);if(S)return g.toColor(S>>24&255,S>>16&255,S>>8&255)},_.opaque=function(L){const x=(255|L.rgba)>>>0;return[o,u,m]=c.toChannels(x),{css:g.toCss(o,u,m),rgba:x}},_.opacity=w,_.multiplyOpacity=function(L,x){return f=255&L.rgba,w(L,f*x/255)},_.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(v||(i.color=v={})),function(_){let w,L;try{const x=document.createElement("canvas");x.width=1,x.height=1;const E=x.getContext("2d",{willReadFrequently:!0});E&&(w=E,w.globalCompositeOperation="copy",L=w.createLinearGradient(0,0,1,1))}catch{}_.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return o=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),m=parseInt(x.slice(3,4).repeat(2),16),g.toColor(o,u,m);case 5:return o=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),m=parseInt(x.slice(3,4).repeat(2),16),f=parseInt(x.slice(4,5).repeat(2),16),g.toColor(o,u,m,f);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const E=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return o=parseInt(E[1]),u=parseInt(E[2]),m=parseInt(E[3]),f=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),g.toColor(o,u,m,f);if(!w||!L)throw new Error("css.toColor: Unsupported css format");if(w.fillStyle=L,w.fillStyle=x,typeof w.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(w.fillRect(0,0,1,1),[o,u,m,f]=w.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(o,u,m,f),css:x}}}(k||(i.css=k={})),function(_){function w(L,x,E){const S=L/255,D=x/255,B=E/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}_.relativeLuminance=function(L){return w(L>>16&255,L>>8&255,255&L)},_.relativeLuminance2=w}(y||(i.rgb=y={})),function(_){function w(x,E,S){const D=x>>24&255,B=x>>16&255,O=x>>8&255;let I=E>>24&255,R=E>>16&255,j=E>>8&255,K=h(y.relativeLuminance2(I,R,j),y.relativeLuminance2(D,B,O));for(;K<S&&(I>0||R>0||j>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),j-=Math.max(0,Math.ceil(.1*j)),K=h(y.relativeLuminance2(I,R,j),y.relativeLuminance2(D,B,O));return(I<<24|R<<16|j<<8|255)>>>0}function L(x,E,S){const D=x>>24&255,B=x>>16&255,O=x>>8&255;let I=E>>24&255,R=E>>16&255,j=E>>8&255,K=h(y.relativeLuminance2(I,R,j),y.relativeLuminance2(D,B,O));for(;K<S&&(I<255||R<255||j<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),j=Math.min(255,j+Math.ceil(.1*(255-j))),K=h(y.relativeLuminance2(I,R,j),y.relativeLuminance2(D,B,O));return(I<<24|R<<16|j<<8|255)>>>0}_.blend=function(x,E){if(f=(255&E)/255,f===1)return E;const S=E>>24&255,D=E>>16&255,B=E>>8&255,O=x>>24&255,I=x>>16&255,R=x>>8&255;return o=O+Math.round((S-O)*f),u=I+Math.round((D-I)*f),m=R+Math.round((B-R)*f),g.toRgba(o,u,m)},_.ensureContrastRatio=function(x,E,S){const D=y.relativeLuminance(x>>8),B=y.relativeLuminance(E>>8);if(h(D,B)<S){if(B<D){const R=w(x,E,S),j=h(D,y.relativeLuminance(R>>8));if(j<S){const K=L(x,E,S);return j>h(D,y.relativeLuminance(K>>8))?R:K}return R}const O=L(x,E,S),I=h(D,y.relativeLuminance(O>>8));if(I<S){const R=w(x,E,S);return I>h(D,y.relativeLuminance(R>>8))?O:R}return O}},_.reduceLuminance=w,_.increaseLuminance=L,_.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}}(c||(i.rgba=c={})),i.toPaddedHex=p,i.contrastRatio=h},8969:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=o(844),m=o(2585),f=o(4348),g=o(7866),v=o(744),k=o(7302),y=o(6975),c=o(8460),p=o(1753),h=o(1480),_=o(7994),w=o(9282),L=o(5435),x=o(5981),E=o(2660);let S=!1;class D extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(O=>{var I;(I=this._onScrollApi)==null||I.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const I in O)this.optionsService.options[I]=O[I]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new k.OptionsService(O)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(h.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new L.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((I,R)=>this._inputHandler.parse(I,R))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,I){this._writeBuffer.write(O,I)}writeSync(O,I){this._logService.logLevel<=m.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(O,I)}input(O,I=!0){this.coreService.triggerDataEvent(O,I)}resize(O,I){isNaN(O)||isNaN(I)||(O=Math.max(O,v.MINIMUM_COLS),I=Math.max(I,v.MINIMUM_ROWS),this._bufferService.resize(O,I))}scroll(O,I=!1){this._bufferService.scroll(O,I)}scrollLines(O,I,R){this._bufferService.scrollLines(O,I,R)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const I=O-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(O,I){return this._inputHandler.registerEscHandler(O,I)}registerDcsHandler(O,I){return this._inputHandler.registerDcsHandler(O,I)}registerCsiHandler(O,I){return this._inputHandler.registerCsiHandler(O,I)}registerOscHandler(O,I){return this._inputHandler.registerOscHandler(O,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?O=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(w.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,w.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const I of O)I.dispose()})}}}i.CoreTerminal=D},8460:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===o)return void this._listeners.splice(u,1)}}})),this._event}fire(o,u){const m=[];for(let f=0;f<this._listeners.length;f++)m.push(this._listeners[f]);for(let f=0;f<m.length;f++)m[f].call(void 0,o,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,u){return o(m=>u.fire(m))},i.runAndSubscribe=function(o,u){return u(void 0),o(m=>u(m))}},5435:function(d,i,o){var u=this&&this.__decorate||function(W,M,P,H){var z,$=arguments.length,V=$<3?M:H===null?H=Object.getOwnPropertyDescriptor(M,P):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(W,M,P,H);else for(var X=W.length-1;X>=0;X--)(z=W[X])&&(V=($<3?z(V):$>3?z(M,P,V):z(M,P))||V);return $>3&&V&&Object.defineProperty(M,P,V),V},m=this&&this.__param||function(W,M){return function(P,H){M(P,H,W)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const f=o(2584),g=o(7116),v=o(2015),k=o(844),y=o(482),c=o(8437),p=o(8460),h=o(643),_=o(511),w=o(3734),L=o(2585),x=o(1480),E=o(6242),S=o(6351),D=o(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function I(W,M){if(W>24)return M.setWinLines||!1;switch(W){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var R;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(i.WindowsOptionsReportType=R={}));let j=0;class K extends k.Disposable{getAttrData(){return this._curAttrData}constructor(M,P,H,z,$,V,X,Z,F=new v.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=P,this._coreService=H,this._logService=z,this._optionsService=$,this._oscLinkService=V,this._coreMouseService=X,this._unicodeService=Z,this._parser=F,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new J(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,Q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:Q.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,Q,q)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:Q,data:q})}),this._parser.setDcsHandlerFallback((T,Q,q)=>{Q==="HOOK"&&(q=q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:Q,payload:q})}),this._parser.setPrintHandler((T,Q,q)=>this.print(T,Q,q)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new E.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new E.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new E.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new E.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new E.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new E.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new E.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new E.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new E.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new E.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new E.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((T,Q)=>this.requestStatusString(T,Q)))}_preserveStack(M,P,H,z){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=H,this._parseStack.position=z}_logSlowResolvingAsync(M){this._logService.logLevel<=L.LogLevelEnum.WARN&&Promise.race([M,new Promise((P,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,P){let H,z=this._activeBuffer.x,$=this._activeBuffer.y,V=0;const X=this._parseStack.paused;if(X){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(H),H;z=this._parseStack.cursorStartX,$=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>O&&(V=this._parseStack.position+O)}if(this._logService.logLevel<=L.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,T=>String.fromCharCode(T)).join("")}"`),typeof M=="string"?M.split("").map(T=>T.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(M.length,O))),X||this._dirtyRowTracker.clearRange(),M.length>O)for(let T=V;T<M.length;T+=O){const Q=T+O<M.length?T+O:M.length,q=typeof M=="string"?this._stringDecoder.decode(M.substring(T,Q),this._parseBuffer):this._utf8Decoder.decode(M.subarray(T,Q),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,q))return this._preserveStack(z,$,q,T),this._logSlowResolvingAsync(H),H}else if(!X){const T=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,T))return this._preserveStack(z,$,T,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===z&&this._activeBuffer.y===$||this._onCursorMove.fire();const Z=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),F=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);F<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(F,this._bufferService.rows-1),Math.min(Z,this._bufferService.rows-1))}print(M,P,H){let z,$;const V=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,Z=this._bufferService.cols,F=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,Q=this._curAttrData;let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-P>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodepoint(this._activeBuffer.x-1,0,1,Q);let ne=this._parser.precedingJoinState;for(let ie=P;ie<H;++ie){if(z=M[ie],z<127&&V){const pe=V[String.fromCharCode(z)];pe&&(z=pe.charCodeAt(0))}const ce=this._unicodeService.charProperties(z,ne);$=x.UnicodeService.extractWidth(ce);const fe=x.UnicodeService.extractShouldJoin(ce),ge=fe?x.UnicodeService.extractWidth(ne):0;if(ne=ce,X&&this._onA11yChar.fire((0,y.stringFromCodePoint)(z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+$-ge>Z){if(F){const pe=q;let ye=this._activeBuffer.x-ge;for(this._activeBuffer.x=ge,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ge>0&&q instanceof c.BufferLine&&q.copyCellsFrom(pe,ye,0,ge,!1);ye<Z;)pe.setCellFromCodepoint(ye++,0,1,Q)}else if(this._activeBuffer.x=Z-1,$===2)continue}if(fe&&this._activeBuffer.x){const pe=q.getWidth(this._activeBuffer.x-1)?1:2;q.addCodepointToCell(this._activeBuffer.x-pe,z,$);for(let ye=$-ge;--ye>=0;)q.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}else if(T&&(q.insertCells(this._activeBuffer.x,$-ge,this._activeBuffer.getNullCell(Q)),q.getWidth(Z-1)===2&&q.setCellFromCodepoint(Z-1,h.NULL_CELL_CODE,h.NULL_CELL_WIDTH,Q)),q.setCellFromCodepoint(this._activeBuffer.x++,z,$,Q),$>0)for(;--$;)q.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}this._parser.precedingJoinState=ne,this._activeBuffer.x<Z&&H-P>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodepoint(this._activeBuffer.x,0,1,Q),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,P){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,P):this._parser.registerCsiHandler(M,H=>!I(H.params[0],this._optionsService.rawOptions.windowOptions)||P(H))}registerDcsHandler(M,P){return this._parser.registerDcsHandler(M,new S.DcsHandler(P))}registerEscHandler(M,P){return this._parser.registerEscHandler(M,P)}registerOscHandler(M,P){return this._parser.registerOscHandler(M,new E.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=M,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+P)}cursorUp(M){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const P=M.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=M.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=M.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const P=M.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,P,H,z=!1,$=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);V.replaceCells(P,H,this._activeBuffer.getNullCell(this._eraseAttrData()),$),z&&(V.isWrapped=!1)}_resetBufferLine(M,P=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),H.isWrapped=!1)}eraseInDisplay(M,P=!1){let H;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);H<this._bufferService.rows;H++)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(0);break;case 3:const z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0}eraseInLine(M,P=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let P=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,$=this._bufferService.rows-1+this._activeBuffer.ybase-z+1;for(;P--;)this._activeBuffer.lines.splice($-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let P=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let z;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;P--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let P=M.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let P=M.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const P=this._parser.precedingJoinState;if(!P)return!0;const H=M.params[0]||1,z=x.UnicodeService.extractWidth(P),$=this._activeBuffer.x-z,V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString($),X=new Uint32Array(V.length*H);let Z=0;for(let T=0;T<V.length;){const Q=V.codePointAt(T)||0;X[Z++]=Q,T+=Q>65535?2:1}let F=Z;for(let T=1;T<H;++T)X.copyWithin(F,0,Z),F+=Z;return this.print(X,0,F),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,P){const H=this._coreService.decPrivateModes,{activeProtocol:z,activeEncoding:$}=this._coreMouseService,V=this._coreService,{buffers:X,cols:Z}=this._bufferService,{active:F,alt:T}=X,Q=this._optionsService.rawOptions,q=fe=>fe?1:2,ne=M.params[0];return ie=ne,ce=P?ne===2?4:ne===4?q(V.modes.insertMode):ne===12?3:ne===20?q(Q.convertEol):0:ne===1?q(H.applicationCursorKeys):ne===3?Q.windowOptions.setWinLines?Z===80?2:Z===132?1:0:0:ne===6?q(H.origin):ne===7?q(H.wraparound):ne===8?3:ne===9?q(z==="X10"):ne===12?q(Q.cursorBlink):ne===25?q(!V.isCursorHidden):ne===45?q(H.reverseWraparound):ne===66?q(H.applicationKeypad):ne===67?4:ne===1e3?q(z==="VT200"):ne===1002?q(z==="DRAG"):ne===1003?q(z==="ANY"):ne===1004?q(H.sendFocus):ne===1005?4:ne===1006?q($==="SGR"):ne===1015?4:ne===1016?q($==="SGR_PIXELS"):ne===1048?1:ne===47||ne===1047||ne===1049?q(F===T):ne===2004?q(H.bracketedPasteMode):0,V.triggerDataEvent(`${f.C0.ESC}[${P?"":"?"}${ie};${ce}$y`),!0;var ie,ce}_updateAttrColor(M,P,H,z,$){return P===2?(M|=50331648,M&=-16777216,M|=w.AttributeData.fromColorRGB([H,z,$])):P===5&&(M&=-50331904,M|=33554432|255&H),M}_extractColor(M,P,H){const z=[0,0,-1,0,0,0];let $=0,V=0;do{if(z[V+$]=M.params[P+V],M.hasSubParams(P+V)){const X=M.getSubParams(P+V);let Z=0;do z[1]===5&&($=1),z[V+Z+1+$]=X[Z];while(++Z<X.length&&Z+V+1+$<z.length);break}if(z[1]===5&&V+$>=2||z[1]===2&&V+$>=5)break;z[1]&&($=1)}while(++V+P<M.length&&V+$<z.length);for(let X=2;X<z.length;++X)z[X]===-1&&(z[X]=0);switch(z[0]){case 38:H.fg=this._updateAttrColor(H.fg,z[1],z[3],z[4],z[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,z[1],z[3],z[4],z[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,z[1],z[3],z[4],z[5])}return V}_processUnderline(M,P){P.extended=P.extended.clone(),(!~M||M>5)&&(M=1),P.extended.underlineStyle=M,P.fg|=268435456,M===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(M){M.fg=c.DEFAULT_ATTR_DATA.fg,M.bg=c.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=M.length;let H;const z=this._curAttrData;for(let $=0;$<P;$++)H=M.params[$],H>=30&&H<=37?(z.fg&=-50331904,z.fg|=16777216|H-30):H>=40&&H<=47?(z.bg&=-50331904,z.bg|=16777216|H-40):H>=90&&H<=97?(z.fg&=-50331904,z.fg|=16777224|H-90):H>=100&&H<=107?(z.bg&=-50331904,z.bg|=16777224|H-100):H===0?this._processSGR0(z):H===1?z.fg|=134217728:H===3?z.bg|=67108864:H===4?(z.fg|=268435456,this._processUnderline(M.hasSubParams($)?M.getSubParams($)[0]:1,z)):H===5?z.fg|=536870912:H===7?z.fg|=67108864:H===8?z.fg|=1073741824:H===9?z.fg|=2147483648:H===2?z.bg|=134217728:H===21?this._processUnderline(2,z):H===22?(z.fg&=-134217729,z.bg&=-134217729):H===23?z.bg&=-67108865:H===24?(z.fg&=-268435457,this._processUnderline(0,z)):H===25?z.fg&=-536870913:H===27?z.fg&=-67108865:H===28?z.fg&=-1073741825:H===29?z.fg&=2147483647:H===39?(z.fg&=-67108864,z.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):H===49?(z.bg&=-67108864,z.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?$+=this._extractColor(M,$,z):H===53?z.bg|=1073741824:H===55?z.bg&=-1073741825:H===59?(z.extended=z.extended.clone(),z.extended.underlineColor=-1,z.updateExtended()):H===100?(z.fg&=-67108864,z.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,z.bg&=-67108864,z.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${P};${H}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const P=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${P};${H}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const P=M.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=P%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion(M){const P=M.params[0]||1;let H;return(M.length<2||(H=M.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions(M){if(!I(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const P=[],H=M.split(";");for(;H.length>1;){const z=H.shift(),$=H.shift();if(/^\d+$/.exec(z)){const V=parseInt(z);if(te(V))if($==="?")P.push({type:0,index:V});else{const X=(0,D.parseColor)($);X&&P.push({type:1,index:V,color:X})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(M){const P=M.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(M,P){this._getCurrentLinkId()&&this._finishHyperlink();const H=M.split(":");let z;const $=H.findIndex(V=>V.startsWith("id="));return $!==-1&&(z=H[$].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:z,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,P){const H=M.split(";");for(let z=0;z<H.length&&!(P>=this._specialColors.length);++z,++P)if(H[z]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const $=(0,D.parseColor)(H[z]);$&&this._onColor.fire([{type:1,index:this._specialColors[P],color:$}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const P=[],H=M.split(";");for(let z=0;z<H.length;++z)if(/^\d+$/.exec(H[z])){const $=parseInt(H[z]);te($)&&P.push({type:2,index:$})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(B[M[0]],g.CHARSETS[M[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new _.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const H=this._activeBuffer.ybase+this._activeBuffer.y+P,z=this._activeBuffer.lines.get(H);z&&(z.fill(M),z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,P){const H=this._bufferService.buffer,z=this._optionsService.rawOptions;return($=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${$}${f.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[z.cursorStyle]-(z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,P){this._dirtyRowTracker.markRangeDirty(M,P)}}i.InputHandler=K;let J=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,M){W>M&&(j=W,W=M,M=j),W<this.start&&(this.start=W),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function te(W){return 0<=W&&W<256}J=u([m(0,L.IBufferService)],J)},844:(d,i)=>{function o(u){for(const m of u)m.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const m=this._disposables.indexOf(u);m!==-1&&this._disposables.splice(m,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var m;this._isDisposed||u===this._value||((m=this._value)==null||m.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=o,i.getDisposeArrayDisposable=function(u){return{dispose:()=>o(u)}}},1505:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(m,f,g){this._data[m]||(this._data[m]={}),this._data[m][f]=g}get(m,f){return this._data[m]?this._data[m][f]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(u,m,f,g,v){this._data.get(u,m)||this._data.set(u,m,new o),this._data.get(u,m).set(f,g,v)}get(u,m,f,g){var v;return(v=this._data.get(u,m))==null?void 0:v.get(f,g)}clear(){this._data.clear()}}},6114:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const m=o.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(o=this._search(this._getKey(u)),this._array.splice(o,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const m=this._getKey(u);if(m===void 0||(o=this._search(m),o===-1)||this._getKey(this._array[o])!==m)return!1;do if(this._array[o]===u)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===m);return!1}*getKeyIterator(u){if(this._array.length!==0&&(o=this._search(u),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===u))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===u)}forEachByKey(u,m){if(this._array.length!==0&&(o=this._search(u),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===u))do m(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===u)}values(){return[...this._array].values()}_search(u){let m=0,f=this._array.length-1;for(;f>=m;){let g=m+f>>1;const v=this._getKey(this._array[g]);if(v>u)f=g-1;else{if(!(v<u)){for(;g>0&&this._getKey(this._array[g-1])===u;)g--;return g}m=g+1}}return m}}},7226:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=o(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let k=0,y=0,c=v.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),y=Math.max(k,y),p=v.timeRemaining(),1.5*y>p)return c-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-k))}ms`),void this._start();c=p}this.clear()}}class f extends m{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const k=Date.now()+v;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}i.PriorityTaskQueue=f,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:f,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=o(643);i.updateWindowsModeWrappedState=function(m){const f=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),g=f==null?void 0:f.get(m.cols-1),v=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);v&&g&&(v.isWrapped=g[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&g[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new o;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}get underlineVariantOffset(){const f=(3758096384&this._ext)>>29;return f<0?4294967288^f:f}set underlineVariantOffset(f){this._ext&=536870911,this._ext|=f<<29&3758096384}constructor(f=0,g=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=g}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=o(6349),m=o(7226),f=o(3734),g=o(8437),v=o(4634),k=o(511),y=o(643),c=o(4863),p=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(h,_,w){this._hasScrollback=h,this._optionsService=_,this._bufferService=w,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,_){return new g.BufferLine(this._bufferService.cols,this.getNullCell(h),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;const _=h+this._optionsService.rawOptions.scrollback;return _>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:_}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=g.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,_){const w=this.getNullCell(g.DEFAULT_ATTR_DATA);let L=0;const x=this._getCorrectBufferLength(_);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<h)for(let S=0;S<this.lines.length;S++)L+=+this.lines.get(S).resize(h,w);let E=0;if(this._rows<_)for(let S=this._rows;S<_;S++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(h,w)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(h,w)));else for(let S=this._rows;S>_;S--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const S=this.lines.length-x;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=x}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,_-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(h,_),this._cols>h))for(let E=0;E<this.lines.length;E++)L+=+this.lines.get(E).resize(h,w);this._cols=h,this._rows=_,this._memoryCleanupQueue.clear(),L>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return h}get _isReflowEnabled(){const h=this._optionsService.rawOptions.windowsPty;return h&&h.buildNumber?this._hasScrollback&&h.backend==="conpty"&&h.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,_){this._cols!==h&&(h>this._cols?this._reflowLarger(h,_):this._reflowSmaller(h,_))}_reflowLarger(h,_){const w=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(w.length>0){const L=(0,v.reflowLargerCreateNewLayout)(this.lines,w);(0,v.reflowLargerApplyNewLayout)(this.lines,L.layout),this._reflowLargerAdjustViewport(h,_,L.countRemoved)}}_reflowLargerAdjustViewport(h,_,w){const L=this.getNullCell(g.DEFAULT_ATTR_DATA);let x=w;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new g.BufferLine(h,L))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-w,0)}_reflowSmaller(h,_){const w=this.getNullCell(g.DEFAULT_ATTR_DATA),L=[];let x=0;for(let E=this.lines.length-1;E>=0;E--){let S=this.lines.get(E);if(!S||!S.isWrapped&&S.getTrimmedLength()<=h)continue;const D=[S];for(;S.isWrapped&&E>0;)S=this.lines.get(--E),D.unshift(S);const B=this.ybase+this.y;if(B>=E&&B<E+D.length)continue;const O=D[D.length-1].getTrimmedLength(),I=(0,v.reflowSmallerGetNewLineLengths)(D,this._cols,h),R=I.length-D.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);const K=[];for(let H=0;H<R;H++){const z=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);K.push(z)}K.length>0&&(L.push({start:E+D.length+x,newLines:K}),x+=K.length),D.push(...K);let J=I.length-1,te=I[J];te===0&&(J--,te=I[J]);let W=D.length-R-1,M=O;for(;W>=0;){const H=Math.min(M,te);if(D[J]===void 0)break;if(D[J].copyCellsFrom(D[W],M-H,te-H,H,!0),te-=H,te===0&&(J--,te=I[J]),M-=H,M===0){W--;const z=Math.max(W,0);M=(0,v.getWrappedLineTrimmedLength)(D,z,this._cols)}}for(let H=0;H<D.length;H++)I[H]<h&&D[H].setCell(I[H],w);let P=R-j;for(;P-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+_-1)}if(L.length>0){const E=[],S=[];for(let J=0;J<this.lines.length;J++)S.push(this.lines.get(J));const D=this.lines.length;let B=D-1,O=0,I=L[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let R=0;for(let J=Math.min(this.lines.maxLength-1,D+x-1);J>=0;J--)if(I&&I.start>B+R){for(let te=I.newLines.length-1;te>=0;te--)this.lines.set(J--,I.newLines[te]);J++,E.push({index:B+1,amount:I.newLines.length}),R+=I.newLines.length,I=L[++O]}else this.lines.set(J,S[B--]);let j=0;for(let J=E.length-1;J>=0;J--)E[J].index+=j,this.lines.onInsertEmitter.fire(E[J]),j+=E[J].amount;const K=Math.max(0,D+x-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}}translateBufferLineToString(h,_,w=0,L){const x=this.lines.get(h);return x?x.translateToString(_,w,L):""}getWrappedRangeForLine(h){let _=h,w=h;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;w+1<this.lines.length&&this.lines.get(w+1).isWrapped;)w++;return{first:_,last:w}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===h&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){const _=new c.Marker(h);return this.markers.push(_),_.register(this.lines.onTrim(w=>{_.line-=w,_.line<0&&_.dispose()})),_.register(this.lines.onInsert(w=>{_.line>=w.index&&(_.line+=w.amount)})),_.register(this.lines.onDelete(w=>{_.line>=w.index&&_.line<w.index+w.amount&&_.dispose(),_.line>w.index&&(_.line-=w.amount)})),_.register(_.onDispose(()=>this._removeMarker(_))),_}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}}},8437:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=o(3734),m=o(511),f=o(643),g=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let v=0;class k{constructor(c,p,h=!1){this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const _=p||m.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let w=0;w<c;++w)this.setCell(w,_);this.length=c}get(c){const p=this._data[3*c+0],h=2097151&p;return[this._data[3*c+1],2097152&p?this._combined[c]:h?(0,g.stringFromCodePoint)(h):"",p>>22,2097152&p?this._combined[c].charCodeAt(this._combined[c].length-1):h]}set(c,p){this._data[3*c+1]=p[f.CHAR_DATA_ATTR_INDEX],p[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=p[1],this._data[3*c+0]=2097152|c|p[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=p[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const p=this._data[3*c+0];return 2097152&p?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&p}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const p=this._data[3*c+0];return 2097152&p?this._combined[c]:2097151&p?(0,g.stringFromCodePoint)(2097151&p):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,p){return v=3*c,p.content=this._data[v+0],p.fg=this._data[v+1],p.bg=this._data[v+2],2097152&p.content&&(p.combinedData=this._combined[c]),268435456&p.bg&&(p.extended=this._extendedAttrs[c]),p}setCell(c,p){2097152&p.content&&(this._combined[c]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[c]=p.extended),this._data[3*c+0]=p.content,this._data[3*c+1]=p.fg,this._data[3*c+2]=p.bg}setCellFromCodepoint(c,p,h,_){268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=p|h<<22,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}addCodepointToCell(c,p,h){let _=this._data[3*c+0];2097152&_?this._combined[c]+=(0,g.stringFromCodePoint)(p):2097151&_?(this._combined[c]=(0,g.stringFromCodePoint)(2097151&_)+(0,g.stringFromCodePoint)(p),_&=-2097152,_|=2097152):_=p|4194304,h&&(_&=-12582913,_|=h<<22),this._data[3*c+0]=_}insertCells(c,p,h){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,h),p<this.length-c){const _=new m.CellData;for(let w=this.length-c-p-1;w>=0;--w)this.setCell(c+p+w,this.loadCell(c+w,_));for(let w=0;w<p;++w)this.setCell(c+w,h)}else for(let _=c;_<this.length;++_)this.setCell(_,h);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,h)}deleteCells(c,p,h){if(c%=this.length,p<this.length-c){const _=new m.CellData;for(let w=0;w<this.length-c-p;++w)this.setCell(c+w,this.loadCell(c+p+w,_));for(let w=this.length-p;w<this.length;++w)this.setCell(w,h)}else for(let _=c;_<this.length;++_)this.setCell(_,h);c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,h),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodepoint(c,0,1,h)}replaceCells(c,p,h,_=!1){if(_)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodepoint(c-1,0,1,h),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,h);c<p&&c<this.length;)this.isProtected(c)||this.setCell(c,h),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,h),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,h);c<p&&c<this.length;)this.setCell(c++,h)}resize(c,p){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const h=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*h)this._data=new Uint32Array(this._data.buffer,0,h);else{const _=new Uint32Array(h);_.set(this._data),this._data=_}for(let _=this.length;_<c;++_)this.setCell(_,p)}else{this._data=this._data.subarray(0,h);const _=Object.keys(this._combined);for(let L=0;L<_.length;L++){const x=parseInt(_[L],10);x>=c&&delete this._combined[x]}const w=Object.keys(this._extendedAttrs);for(let L=0;L<w.length;L++){const x=parseInt(w[L],10);x>=c&&delete this._extendedAttrs[x]}}return this.length=c,4*h*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,p=!1){if(p)for(let h=0;h<this.length;++h)this.isProtected(h)||this.setCell(h,c);else{this._combined={},this._extendedAttrs={};for(let h=0;h<this.length;++h)this.setCell(h,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const p in c._combined)this._combined[p]=c._combined[p];this._extendedAttrs={};for(const p in c._extendedAttrs)this._extendedAttrs[p]=c._extendedAttrs[p];this.isWrapped=c.isWrapped}clone(){const c=new k(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const p in this._combined)c._combined[p]=this._combined[p];for(const p in this._extendedAttrs)c._extendedAttrs[p]=this._extendedAttrs[p];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,p,h,_,w){const L=c._data;if(w)for(let E=_-1;E>=0;E--){for(let S=0;S<3;S++)this._data[3*(h+E)+S]=L[3*(p+E)+S];268435456&L[3*(p+E)+2]&&(this._extendedAttrs[h+E]=c._extendedAttrs[p+E])}else for(let E=0;E<_;E++){for(let S=0;S<3;S++)this._data[3*(h+E)+S]=L[3*(p+E)+S];268435456&L[3*(p+E)+2]&&(this._extendedAttrs[h+E]=c._extendedAttrs[p+E])}const x=Object.keys(c._combined);for(let E=0;E<x.length;E++){const S=parseInt(x[E],10);S>=p&&(this._combined[S-p+h]=c._combined[S])}}translateToString(c,p,h,_){p=p??0,h=h??this.length,c&&(h=Math.min(h,this.getTrimmedLength())),_&&(_.length=0);let w="";for(;p<h;){const L=this._data[3*p+0],x=2097151&L,E=2097152&L?this._combined[p]:x?(0,g.stringFromCodePoint)(x):f.WHITESPACE_CELL_CHAR;if(w+=E,_)for(let S=0;S<E.length;++S)_.push(p);p+=L>>22||1}return _&&_.push(p),w}}i.BufferLine=k},4841:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,u){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return u*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(d,i)=>{function o(u,m,f){if(m===u.length-1)return u[m].getTrimmedLength();const g=!u[m].hasContent(f-1)&&u[m].getWidth(f-1)===1,v=u[m+1].getWidth(0)===2;return g&&v?f-1:f}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,m,f,g,v){const k=[];for(let y=0;y<u.length-1;y++){let c=y,p=u.get(++c);if(!p.isWrapped)continue;const h=[u.get(y)];for(;c<u.length&&p.isWrapped;)h.push(p),p=u.get(++c);if(g>=y&&g<c){y+=h.length-1;continue}let _=0,w=o(h,_,m),L=1,x=0;for(;L<h.length;){const S=o(h,L,m),D=S-x,B=f-w,O=Math.min(D,B);h[_].copyCellsFrom(h[L],x,w,O,!1),w+=O,w===f&&(_++,w=0),x+=O,x===S&&(L++,x=0),w===0&&_!==0&&h[_-1].getWidth(f-1)===2&&(h[_].copyCellsFrom(h[_-1],f-1,w++,1,!1),h[_-1].setCell(f-1,v))}h[_].replaceCells(w,f,v);let E=0;for(let S=h.length-1;S>0&&(S>_||h[S].getTrimmedLength()===0);S--)E++;E>0&&(k.push(y+h.length-E),k.push(E)),y+=h.length-1}return k},i.reflowLargerCreateNewLayout=function(u,m){const f=[];let g=0,v=m[g],k=0;for(let y=0;y<u.length;y++)if(v===y){const c=m[++g];u.onDeleteEmitter.fire({index:y-k,amount:c}),y+=c-1,k+=c,v=m[++g]}else f.push(y);return{layout:f,countRemoved:k}},i.reflowLargerApplyNewLayout=function(u,m){const f=[];for(let g=0;g<m.length;g++)f.push(u.get(m[g]));for(let g=0;g<f.length;g++)u.set(g,f[g]);u.length=m.length},i.reflowSmallerGetNewLineLengths=function(u,m,f){const g=[],v=u.map((p,h)=>o(u,h,m)).reduce((p,h)=>p+h);let k=0,y=0,c=0;for(;c<v;){if(v-c<f){g.push(v-c);break}k+=f;const p=o(u,y,m);k>p&&(k-=p,y++);const h=u[y].getWidth(k-1)===2;h&&k--;const _=h?f-1:f;g.push(_),c+=_}return g},i.getWrappedLineTrimmedLength=o},5295:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=o(8460),m=o(844),f=o(9092);class g extends m.Disposable{constructor(k,y){super(),this._optionsService=k,this._bufferService=y,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,y){this._normal.resize(k,y),this._alt.resize(k,y),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}i.BufferSet=g},511:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=o(482),m=o(643),f=o(3734);class g extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const y=new g;return y.setFromCharData(k),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(k[m.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(k[m.CHAR_DATA_CHAR_INDEX].length===2){const c=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const p=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(c-55296)+p-56320+65536|k[m.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[m.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=k[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=o(8460),m=o(844);class f{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}i.Marker=f,f._nextId=1},7116:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(d,i)=>{var o,u,m;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(o||(i.C0=o={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(u||(i.C1=u={})),function(f){f.ST=`${o.ESC}\\`}(m||(i.C1_ESCAPED=m={}))},7399:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=o(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(f,g,v,k){const y={type:0,cancel:!1,key:void 0},c=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?y.key=g?u.C0.ESC+"OA":u.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?y.key=g?u.C0.ESC+"OD":u.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?y.key=g?u.C0.ESC+"OC":u.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(y.key=g?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:y.key=f.ctrlKey?"\b":u.C0.DEL,f.altKey&&(y.key=u.C0.ESC+y.key);break;case 9:if(f.shiftKey){y.key=u.C0.ESC+"[Z";break}y.key=u.C0.HT,y.cancel=!0;break;case 13:y.key=f.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,y.cancel=!0;break;case 27:y.key=u.C0.ESC,f.altKey&&(y.key=u.C0.ESC+u.C0.ESC),y.cancel=!0;break;case 37:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"D",y.key===u.C0.ESC+"[1;3D"&&(y.key=u.C0.ESC+(v?"b":"[1;5D"))):y.key=g?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"C",y.key===u.C0.ESC+"[1;3C"&&(y.key=u.C0.ESC+(v?"f":"[1;5C"))):y.key=g?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"A",v||y.key!==u.C0.ESC+"[1;3A"||(y.key=u.C0.ESC+"[1;5A")):y.key=g?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"B",v||y.key!==u.C0.ESC+"[1;3B"||(y.key=u.C0.ESC+"[1;5B")):y.key=g?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(y.key=u.C0.ESC+"[2~");break;case 46:y.key=c?u.C0.ESC+"[3;"+(c+1)+"~":u.C0.ESC+"[3~";break;case 36:y.key=c?u.C0.ESC+"[1;"+(c+1)+"H":g?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:y.key=c?u.C0.ESC+"[1;"+(c+1)+"F":g?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:f.shiftKey?y.type=2:f.ctrlKey?y.key=u.C0.ESC+"[5;"+(c+1)+"~":y.key=u.C0.ESC+"[5~";break;case 34:f.shiftKey?y.type=3:f.ctrlKey?y.key=u.C0.ESC+"[6;"+(c+1)+"~":y.key=u.C0.ESC+"[6~";break;case 112:y.key=c?u.C0.ESC+"[1;"+(c+1)+"P":u.C0.ESC+"OP";break;case 113:y.key=c?u.C0.ESC+"[1;"+(c+1)+"Q":u.C0.ESC+"OQ";break;case 114:y.key=c?u.C0.ESC+"[1;"+(c+1)+"R":u.C0.ESC+"OR";break;case 115:y.key=c?u.C0.ESC+"[1;"+(c+1)+"S":u.C0.ESC+"OS";break;case 116:y.key=c?u.C0.ESC+"[15;"+(c+1)+"~":u.C0.ESC+"[15~";break;case 117:y.key=c?u.C0.ESC+"[17;"+(c+1)+"~":u.C0.ESC+"[17~";break;case 118:y.key=c?u.C0.ESC+"[18;"+(c+1)+"~":u.C0.ESC+"[18~";break;case 119:y.key=c?u.C0.ESC+"[19;"+(c+1)+"~":u.C0.ESC+"[19~";break;case 120:y.key=c?u.C0.ESC+"[20;"+(c+1)+"~":u.C0.ESC+"[20~";break;case 121:y.key=c?u.C0.ESC+"[21;"+(c+1)+"~":u.C0.ESC+"[21~";break;case 122:y.key=c?u.C0.ESC+"[23;"+(c+1)+"~":u.C0.ESC+"[23~";break;case 123:y.key=c?u.C0.ESC+"[24;"+(c+1)+"~":u.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(v&&!k||!f.altKey||f.metaKey)!v||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?y.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(y.key=u.C0.US),f.key==="@"&&(y.key=u.C0.NUL)):f.keyCode===65&&(y.type=1);else{const p=m[f.keyCode],h=p==null?void 0:p[f.shiftKey?1:0];if(h)y.key=u.C0.ESC+h;else if(f.keyCode>=65&&f.keyCode<=90){const _=f.ctrlKey?f.keyCode-64:f.keyCode+32;let w=String.fromCharCode(_);f.shiftKey&&(w=w.toUpperCase()),y.key=u.C0.ESC+w}else if(f.keyCode===32)y.key=u.C0.ESC+(f.ctrlKey?u.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let _=f.code.slice(3,4);f.shiftKey||(_=_.toLowerCase()),y.key=u.C0.ESC+_,y.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?y.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?y.key=u.C0.NUL:f.keyCode>=51&&f.keyCode<=55?y.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?y.key=u.C0.DEL:f.keyCode===219?y.key=u.C0.ESC:f.keyCode===220?y.key=u.C0.FS:f.keyCode===221&&(y.key=u.C0.GS)}return y}},482:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,u=0,m=o.length){let f="";for(let g=u;g<m;++g){let v=o[g];v>65535?(v-=65536,f+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):f+=String.fromCharCode(v)}return f},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,u){const m=o.length;if(!m)return 0;let f=0,g=0;if(this._interim){const v=o.charCodeAt(g++);56320<=v&&v<=57343?u[f++]=1024*(this._interim-55296)+v-56320+65536:(u[f++]=this._interim,u[f++]=v),this._interim=0}for(let v=g;v<m;++v){const k=o.charCodeAt(v);if(55296<=k&&k<=56319){if(++v>=m)return this._interim=k,f;const y=o.charCodeAt(v);56320<=y&&y<=57343?u[f++]=1024*(k-55296)+y-56320+65536:(u[f++]=k,u[f++]=y)}else k!==65279&&(u[f++]=k)}return f}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,u){const m=o.length;if(!m)return 0;let f,g,v,k,y=0,c=0,p=0;if(this.interim[0]){let w=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let x,E=0;for(;(x=63&this.interim[++E])&&E<4;)L<<=6,L|=x;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,D=S-E;for(;p<D;){if(p>=m)return 0;if(x=o[p++],(192&x)!=128){p--,w=!0;break}this.interim[E++]=x,L<<=6,L|=63&x}w||(S===2?L<128?p--:u[y++]=L:S===3?L<2048||L>=55296&&L<=57343||L===65279||(u[y++]=L):L<65536||L>1114111||(u[y++]=L)),this.interim.fill(0)}const h=m-4;let _=p;for(;_<m;){for(;!(!(_<h)||128&(f=o[_])||128&(g=o[_+1])||128&(v=o[_+2])||128&(k=o[_+3]));)u[y++]=f,u[y++]=g,u[y++]=v,u[y++]=k,_+=4;if(f=o[_++],f<128)u[y++]=f;else if((224&f)==192){if(_>=m)return this.interim[0]=f,y;if(g=o[_++],(192&g)!=128){_--;continue}if(c=(31&f)<<6|63&g,c<128){_--;continue}u[y++]=c}else if((240&f)==224){if(_>=m)return this.interim[0]=f,y;if(g=o[_++],(192&g)!=128){_--;continue}if(_>=m)return this.interim[0]=f,this.interim[1]=g,y;if(v=o[_++],(192&v)!=128){_--;continue}if(c=(15&f)<<12|(63&g)<<6|63&v,c<2048||c>=55296&&c<=57343||c===65279)continue;u[y++]=c}else if((248&f)==240){if(_>=m)return this.interim[0]=f,y;if(g=o[_++],(192&g)!=128){_--;continue}if(_>=m)return this.interim[0]=f,this.interim[1]=g,y;if(v=o[_++],(192&v)!=128){_--;continue}if(_>=m)return this.interim[0]=f,this.interim[1]=g,this.interim[2]=v,y;if(k=o[_++],(192&k)!=128){_--;continue}if(c=(7&f)<<18|(63&g)<<12|(63&v)<<6|63&k,c<65536||c>1114111)continue;u[y++]=c}}return y}}},225:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const u=o(1480),m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;i.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let v=0;v<m.length;++v)g.fill(0,m[v][0],m[v][1]+1)}}wcwidth(v){return v<32?0:v<127?1:v<65536?g[v]:function(k,y){let c,p=0,h=y.length-1;if(k<y[0][0]||k>y[h][1])return!1;for(;h>=p;)if(c=p+h>>1,k>y[c][1])p=c+1;else{if(!(k<y[c][0]))return!0;h=c-1}return!1}(v,f)?0:v>=131072&&v<=196605||v>=196608&&v<=262141?2:1}charProperties(v,k){let y=this.wcwidth(v),c=y===0&&k!==0;if(c){const p=u.UnicodeService.extractWidth(k);p===0?c=!1:p>y&&(y=p)}return u.UnicodeService.createPropertyValue(0,y,c)}}},5981:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=o(8460),m=o(844);class f extends m.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(k)}_innerWrite(v=0,k=!0){const y=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],p=this._action(c,k);if(p){const _=w=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,w)):this._innerWrite(y,w);return void p.catch(w=>(queueMicrotask(()=>{throw w}),Promise.resolve(!1))).then(_)}const h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=f},5941:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function m(f,g){const v=f.toString(16),k=v.length<2?"0"+v:v;switch(g){case 4:return v[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}i.parseColor=function(f){if(!f)return;let g=f.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const v=o.exec(g);if(v){const k=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/k*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/k*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/k*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),u.exec(g)&&[3,6,9,12].includes(g.length))){const v=g.length/3,k=[0,0,0];for(let y=0;y<3;++y){const c=parseInt(g.slice(v*y,v*y+v),16);k[y]=v===1?c<<4:v===2?c:v===3?c>>4:c>>8}return k}},i.toRgbString=function(f,g=16){const[v,k,y]=f;return`rgb:${m(v,g)}/${m(k,g)}/${m(y,g)}`}},5770:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=o(482),m=o(8742),f=o(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(k,y){this._handlers[k]===void 0&&(this._handlers[k]=[]);const c=this._handlers[k];return c.push(y),{dispose:()=>{const p=c.indexOf(y);p!==-1&&c.splice(p,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(k,y){if(this.reset(),this._ident=k,this._active=this._handlers[k]||g,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(k,y,c){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(k,y,c);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(k,y,c))}unhook(k,y=!0){if(this._active.length){let c=!1,p=this._active.length-1,h=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,c=y,h=this._stack.fallThrough,this._stack.paused=!1),!h&&c===!1){for(;p>=0&&(c=this._active[p].unhook(k),c!==!0);p--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,c;p--}for(;p>=0;p--)if(c=this._active[p].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",k);this._active=g,this._ident=0}};const v=new m.Params;v.addParam(0),i.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=v,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():v,this._data="",this._hitLimit=!1}put(k,y,c){this._hitLimit||(this._data+=(0,u.utf32ToString)(k,y,c),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let y=!1;if(this._hitLimit)y=!1;else if(k&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(c=>(this._params=v,this._data="",this._hitLimit=!1,c));return this._params=v,this._data="",this._hitLimit=!1,y}}},2015:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=o(844),m=o(8742),f=o(6242),g=o(6351);class v{constructor(p){this.table=new Uint8Array(p)}setDefault(p,h){this.table.fill(p<<4|h)}add(p,h,_,w){this.table[h<<8|p]=_<<4|w}addMany(p,h,_,w){for(let L=0;L<p.length;L++)this.table[h<<8|p[L]]=_<<4|w}}i.TransitionTable=v;const k=160;i.VT500_TRANSITION_TABLE=function(){const c=new v(4095),p=Array.apply(null,Array(256)).map((E,S)=>S),h=(E,S)=>p.slice(E,S),_=h(32,127),w=h(0,24);w.push(25),w.push.apply(w,h(28,32));const L=h(0,14);let x;for(x in c.setDefault(1,0),c.addMany(_,0,2,0),L)c.addMany([24,26,153,154],x,3,0),c.addMany(h(128,144),x,3,0),c.addMany(h(144,152),x,3,0),c.add(156,x,0,0),c.add(27,x,11,1),c.add(157,x,4,8),c.addMany([152,158,159],x,0,7),c.add(155,x,11,3),c.add(144,x,11,9);return c.addMany(w,0,3,0),c.addMany(w,1,3,1),c.add(127,1,0,1),c.addMany(w,8,0,8),c.addMany(w,3,3,3),c.add(127,3,0,3),c.addMany(w,4,3,4),c.add(127,4,0,4),c.addMany(w,6,3,6),c.addMany(w,5,3,5),c.add(127,5,0,5),c.addMany(w,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(_,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(h(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(_,7,0,7),c.addMany(w,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(h(64,127),3,7,0),c.addMany(h(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(h(48,60),4,8,4),c.addMany(h(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(h(32,64),6,0,6),c.add(127,6,0,6),c.addMany(h(64,127),6,0,0),c.addMany(h(32,48),3,9,5),c.addMany(h(32,48),5,9,5),c.addMany(h(48,64),5,0,6),c.addMany(h(64,127),5,7,0),c.addMany(h(32,48),4,9,5),c.addMany(h(32,48),1,9,2),c.addMany(h(32,48),2,9,2),c.addMany(h(48,127),2,10,0),c.addMany(h(48,80),1,10,0),c.addMany(h(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(h(96,127),1,10,0),c.add(80,1,11,9),c.addMany(w,9,0,9),c.add(127,9,0,9),c.addMany(h(28,32),9,0,9),c.addMany(h(32,48),9,9,12),c.addMany(h(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(w,11,0,11),c.addMany(h(32,128),11,0,11),c.addMany(h(28,32),11,0,11),c.addMany(w,10,0,10),c.add(127,10,0,10),c.addMany(h(28,32),10,0,10),c.addMany(h(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(h(32,48),10,9,12),c.addMany(w,12,0,12),c.add(127,12,0,12),c.addMany(h(28,32),12,0,12),c.addMany(h(32,48),12,9,12),c.addMany(h(48,64),12,0,11),c.addMany(h(64,127),12,12,13),c.addMany(h(64,127),10,12,13),c.addMany(h(64,127),9,12,13),c.addMany(w,13,13,13),c.addMany(_,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(k,0,2,0),c.add(k,8,5,8),c.add(k,6,0,6),c.add(k,11,0,11),c.add(k,13,13,13),c}();class y extends u.Disposable{constructor(p=i.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(h,_,w)=>{},this._executeHandlerFb=h=>{},this._csiHandlerFb=(h,_)=>{},this._escHandlerFb=h=>{},this._errorHandlerFb=h=>h,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(p,h=[64,126]){let _=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=p.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let L=0;L<p.intermediates.length;++L){const x=p.intermediates.charCodeAt(L);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=x}}if(p.final.length!==1)throw new Error("final must be a single byte");const w=p.final.charCodeAt(0);if(h[0]>w||w>h[1])throw new Error(`final must be in range ${h[0]} .. ${h[1]}`);return _<<=8,_|=w,_}identToString(p){const h=[];for(;p;)h.push(String.fromCharCode(255&p)),p>>=8;return h.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,h){const _=this._identifier(p,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);const w=this._escHandlers[_];return w.push(h),{dispose:()=>{const L=w.indexOf(h);L!==-1&&w.splice(L,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,h){this._executeHandlers[p.charCodeAt(0)]=h}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,h){const _=this._identifier(p);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);const w=this._csiHandlers[_];return w.push(h),{dispose:()=>{const L=w.indexOf(h);L!==-1&&w.splice(L,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,h){return this._dcsParser.registerHandler(this._identifier(p),h)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,h){return this._oscParser.registerHandler(p,h)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,h,_,w,L){this._parseStack.state=p,this._parseStack.handlers=h,this._parseStack.handlerPos=_,this._parseStack.transition=w,this._parseStack.chunkPos=L}parse(p,h,_){let w,L=0,x=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let D=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&D>-1){for(;D>=0&&(w=S[D](this._params),w!==!0);D--)if(w instanceof Promise)return this._parseStack.handlerPos=D,w}this._parseStack.handlers=[];break;case 4:if(_===!1&&D>-1){for(;D>=0&&(w=S[D](),w!==!0);D--)if(w instanceof Promise)return this._parseStack.handlerPos=D,w}this._parseStack.handlers=[];break;case 6:if(L=p[this._parseStack.chunkPos],w=this._dcsParser.unhook(L!==24&&L!==26,_),w)return w;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(L=p[this._parseStack.chunkPos],w=this._oscParser.end(L!==24&&L!==26,_),w)return w;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=E;S<h;++S){switch(L=p[S],x=this._transitions.table[this.currentState<<8|(L<160?L:k)],x>>4){case 2:for(let R=S+1;;++R){if(R>=h||(L=p[R])<32||L>126&&L<k){this._printHandler(p,S,R),S=R-1;break}if(++R>=h||(L=p[R])<32||L>126&&L<k){this._printHandler(p,S,R),S=R-1;break}if(++R>=h||(L=p[R])<32||L>126&&L<k){this._printHandler(p,S,R),S=R-1;break}if(++R>=h||(L=p[R])<32||L>126&&L<k){this._printHandler(p,S,R),S=R-1;break}}break;case 3:this._executeHandlers[L]?this._executeHandlers[L]():this._executeHandlerFb(L),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:L,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const D=this._csiHandlers[this._collect<<8|L];let B=D?D.length-1:-1;for(;B>=0&&(w=D[B](this._params),w!==!0);B--)if(w instanceof Promise)return this._preserveStack(3,D,B,x,S),w;B<0&&this._csiHandlerFb(this._collect<<8|L,this._params),this.precedingJoinState=0;break;case 8:do switch(L){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(L-48)}while(++S<h&&(L=p[S])>47&&L<60);S--;break;case 9:this._collect<<=8,this._collect|=L;break;case 10:const O=this._escHandlers[this._collect<<8|L];let I=O?O.length-1:-1;for(;I>=0&&(w=O[I](),w!==!0);I--)if(w instanceof Promise)return this._preserveStack(4,O,I,x,S),w;I<0&&this._escHandlerFb(this._collect<<8|L),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|L,this._params);break;case 13:for(let R=S+1;;++R)if(R>=h||(L=p[R])===24||L===26||L===27||L>127&&L<k){this._dcsParser.put(p,S,R),S=R-1;break}break;case 14:if(w=this._dcsParser.unhook(L!==24&&L!==26),w)return this._preserveStack(6,[],0,x,S),w;L===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let R=S+1;;R++)if(R>=h||(L=p[R])<32||L>127&&L<k){this._oscParser.put(p,S,R),S=R-1;break}break;case 6:if(w=this._oscParser.end(L!==24&&L!==26),w)return this._preserveStack(5,[],0,x,S),w;L===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}i.EscapeSequenceParser=y},6242:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=o(5770),m=o(482),f=[];i.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,v){this._handlers[g]===void 0&&(this._handlers[g]=[]);const k=this._handlers[g];return k.push(v),{dispose:()=>{const y=k.indexOf(v);y!==-1&&k.splice(y,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,v,k){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(g,v,k);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(g,v,k))}start(){this.reset(),this._state=1}put(g,v,k){if(this._state!==3){if(this._state===1)for(;v<k;){const y=g[v++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&k-v>0&&this._put(g,v,k)}}end(g,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,y=this._active.length-1,c=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,k=v,c=this._stack.fallThrough,this._stack.paused=!1),!c&&k===!1){for(;y>=0&&(k=this._active[y].end(g),k!==!0);y--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,k;y--}for(;y>=0;y--)if(k=this._active[y].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",g);this._active=f,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,v,k){this._hitLimit||(this._data+=(0,m.utf32ToString)(g,v,k),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let v=!1;if(this._hitLimit)v=!1;else if(g&&(v=this._handler(this._data),v instanceof Promise))return v.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,v}}},8742:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class u{static fromArray(f){const g=new u;if(!f.length)return g;for(let v=Array.isArray(f[0])?1:0;v<f.length;++v){const k=f[v];if(Array.isArray(k))for(let y=0;y<k.length;++y)g.addSubParam(k[y]);else g.addParam(k)}return g}constructor(f=32,g=32){if(this.maxLength=f,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new u(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let g=0;g<this.length;++g){f.push(this.params[g]);const v=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-v>0&&f.push(Array.prototype.slice.call(this._subParams,v,k))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>o?o:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>o?o:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const g=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];return v-g>0?this._subParams.subarray(g,v):null}getSubParamsAll(){const f={};for(let g=0;g<this.length;++g){const v=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-v>0&&(f[g]=this._subParams.slice(v,k))}return f}addDigit(f){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,k=v[g-1];v[g-1]=~k?Math.min(10*k+f,o):f}}i.Params=u},5741:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,u){const m={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(m),u.dispose=()=>this._wrappedAddonDispose(m),u.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let u=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===o){u=m;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(u,1)}}},8771:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=o(3785),m=o(511);i.BufferApiView=class{constructor(f,g){this._buffer=f,this.type=g}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const g=this._buffer.lines.get(f);if(g)return new u.BufferLineApiView(g)}getNullCell(){return new m.CellData}}},3785:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=o(511);i.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,f){if(!(m<0||m>=this._line.length))return f?(this._line.loadCell(m,f),f):this._line.loadCell(m,new u.CellData)}translateToString(m,f,g){return this._line.translateToString(m,f,g)}}},8285:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=o(8771),m=o(8460),f=o(844);class g extends f.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,u){return this._core.registerCsiHandler(o,m=>u(m.toArray()))}addCsiHandler(o,u){return this.registerCsiHandler(o,u)}registerDcsHandler(o,u){return this._core.registerDcsHandler(o,(m,f)=>u(m,f.toArray()))}addDcsHandler(o,u){return this.registerDcsHandler(o,u)}registerEscHandler(o,u){return this._core.registerEscHandler(o,u)}addEscHandler(o,u){return this.registerEscHandler(o,u)}registerOscHandler(o,u){return this._core.registerOscHandler(o,u)}addOscHandler(o,u){return this.registerOscHandler(o,u)}}},7090:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(d,i,o){var u=this&&this.__decorate||function(c,p,h,_){var w,L=arguments.length,x=L<3?p:_===null?_=Object.getOwnPropertyDescriptor(p,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,p,h,_);else for(var E=c.length-1;E>=0;E--)(w=c[E])&&(x=(L<3?w(x):L>3?w(p,h,x):w(p,h))||x);return L>3&&x&&Object.defineProperty(p,h,x),x},m=this&&this.__param||function(c,p){return function(h,_){p(h,_,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const f=o(8460),g=o(844),v=o(5295),k=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let y=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(c,this))}resize(c,p){this.cols=c,this.rows=p,this.buffers.resize(c,p),this._onResize.fire({cols:c,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,p=!1){const h=this.buffer;let _;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===c.fg&&_.getBg(0)===c.bg||(_=h.getBlankLine(c,p),this._cachedBlankLine=_),_.isWrapped=p;const w=h.ybase+h.scrollTop,L=h.ybase+h.scrollBottom;if(h.scrollTop===0){const x=h.lines.isFull;L===h.lines.length-1?x?h.lines.recycle().copyFrom(_):h.lines.push(_.clone()):h.lines.splice(L+1,0,_.clone()),x?this.isUserScrolling&&(h.ydisp=Math.max(h.ydisp-1,0)):(h.ybase++,this.isUserScrolling||h.ydisp++)}else{const x=L-w+1;h.lines.shiftElements(w+1,x-1,-1),h.lines.set(L,_.clone())}this.isUserScrolling||(h.ydisp=h.ybase),this._onScroll.fire(h.ydisp)}scrollLines(c,p,h){const _=this.buffer;if(c<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else c+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);const w=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+c,_.ybase),0),w!==_.ydisp&&(p||this._onScroll.fire(_.ydisp))}};i.BufferService=y=u([m(0,k.IOptionsService)],y)},7994:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,u){this._charsets[o]=u,this.glevel===o&&(this.charset=u)}}},1753:function(d,i,o){var u=this&&this.__decorate||function(_,w,L,x){var E,S=arguments.length,D=S<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,L):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,w,L,x);else for(var B=_.length-1;B>=0;B--)(E=_[B])&&(D=(S<3?E(D):S>3?E(w,L,D):E(w,L))||D);return S>3&&D&&Object.defineProperty(w,L,D),D},m=this&&this.__param||function(_,w){return function(L,x){w(L,x,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const f=o(2585),g=o(8460),v=o(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function y(_,w){let L=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(L|=64,L|=_.action):(L|=3&_.button,4&_.button&&(L|=64),8&_.button&&(L|=128),_.action===32?L|=32:_.action!==0||w||(L|=3)),L}const c=String.fromCharCode,p={DEFAULT:_=>{const w=[y(_,!1)+32,_.col+32,_.row+32];return w[0]>255||w[1]>255||w[2]>255?"":`\x1B[M${c(w[0])}${c(w[1])}${c(w[2])}`},SGR:_=>{const w=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${y(_,!0)};${_.col};${_.row}${w}`},SGR_PIXELS:_=>{const w=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${y(_,!0)};${_.x};${_.y}${w}`}};let h=i.CoreMouseService=class extends v.Disposable{constructor(_,w){super(),this._bufferService=_,this._coreService=w,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const L of Object.keys(k))this.addProtocol(L,k[L]);for(const L of Object.keys(p))this.addEncoding(L,p[L]);this.reset()}addProtocol(_,w){this._protocols[_]=w}addEncoding(_,w){this._encodings[_]=w}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;const w=this._encodings[this._activeEncoding](_);return w&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(w):this._coreService.triggerDataEvent(w,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,w,L){if(L){if(_.x!==w.x||_.y!==w.y)return!1}else if(_.col!==w.col||_.row!==w.row)return!1;return _.button===w.button&&_.action===w.action&&_.ctrl===w.ctrl&&_.alt===w.alt&&_.shift===w.shift}};i.CoreMouseService=h=u([m(0,f.IBufferService),m(1,f.ICoreService)],h)},6975:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},m=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const f=o(1439),g=o(8460),v=o(844),k=o(2585),y=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=i.CoreService=class extends v.Disposable{constructor(h,_,w){super(),this._bufferService=h,this._logService=_,this._optionsService=w,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(y),this.decPrivateModes=(0,f.clone)(c)}reset(){this.modes=(0,f.clone)(y),this.decPrivateModes=(0,f.clone)(c)}triggerDataEvent(h,_=!1){if(this._optionsService.rawOptions.disableStdin)return;const w=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&w.ybase!==w.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${h}"`,()=>h.split("").map(L=>L.charCodeAt(0))),this._onData.fire(h)}triggerBinaryEvent(h){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${h}"`,()=>h.split("").map(_=>_.charCodeAt(0))),this._onBinary.fire(h))}};i.CoreService=p=u([m(0,k.IBufferService),m(1,k.ILogService),m(2,k.IOptionsService)],p)},9074:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=o(8055),m=o(8460),f=o(844),g=o(6106);let v=0,k=0;class y extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(h=>h==null?void 0:h.marker.line),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(h){if(h.marker.isDisposed)return;const _=new c(h);if(_){const w=_.marker.onDispose(()=>_.dispose());_.onDispose(()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),w.dispose())}),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(const h of this._decorations.values())h.dispose();this._decorations.clear()}*getDecorationsAtCell(h,_,w){let L=0,x=0;for(const E of this._decorations.getKeyIterator(_))L=E.options.x??0,x=L+(E.options.width??1),h>=L&&h<x&&(!w||(E.options.layer??"bottom")===w)&&(yield E)}forEachDecorationAtCell(h,_,w,L){this._decorations.forEachByKey(_,x=>{v=x.options.x??0,k=v+(x.options.width??1),h>=v&&h<k&&(!w||(x.options.layer??"bottom")===w)&&L(x)})}}i.DecorationService=y;class c extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(h){super(),this.options=h,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=h.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=o(2585),m=o(8343);class f{constructor(...v){this._entries=new Map;for(const[k,y]of v)this.set(k,y)}set(v,k){const y=this._entries.get(v);return this._entries.set(v,k),y}forEach(v){for(const[k,y]of this._entries.entries())v(k,y)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}i.ServiceCollection=f,i.InstantiationService=class{constructor(){this._services=new f,this._services.set(u.IInstantiationService,this)}setService(g,v){this._services.set(g,v)}getService(g){return this._services.get(g)}createInstance(g,...v){const k=(0,m.getServiceDependencies)(g).sort((p,h)=>p.index-h.index),y=[];for(const p of k){const h=this._services.get(p.id);if(!h)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${p.id}.`);y.push(h)}const c=k.length>0?k[0].index:v.length;if(v.length!==c)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${c+1} conflicts with ${v.length} static arguments`);return new g(...v,...y)}}},7866:function(d,i,o){var u=this&&this.__decorate||function(c,p,h,_){var w,L=arguments.length,x=L<3?p:_===null?_=Object.getOwnPropertyDescriptor(p,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,p,h,_);else for(var E=c.length-1;E>=0;E--)(w=c[E])&&(x=(L<3?w(x):L>3?w(p,h,x):w(p,h))||x);return L>3&&x&&Object.defineProperty(p,h,x),x},m=this&&this.__param||function(c,p){return function(h,_){p(h,_,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const f=o(844),g=o(2585),v={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let k,y=i.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let p=0;p<c.length;p++)typeof c[p]=="function"&&(c[p]=c[p]())}_log(c,p,h){this._evalLazyOptionalParams(h),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...h)}trace(c,...p){var h;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.trace.bind(this._optionsService.options.logger))??console.log,c,p)}debug(c,...p){var h;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.debug.bind(this._optionsService.options.logger))??console.log,c,p)}info(c,...p){var h;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.info.bind(this._optionsService.options.logger))??console.info,c,p)}warn(c,...p){var h;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.warn.bind(this._optionsService.options.logger))??console.warn,c,p)}error(c,...p){var h;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.error.bind(this._optionsService.options.logger))??console.error,c,p)}};i.LogService=y=u([m(0,g.IOptionsService)],y),i.setTraceLogger=function(c){k=c},i.traceCall=function(c,p,h){if(typeof h.value!="function")throw new Error("not supported");const _=h.value;h.value=function(...w){if(k.logLevel!==g.LogLevelEnum.TRACE)return _.apply(this,w);k.trace(`GlyphRenderer#${_.name}(${w.map(x=>JSON.stringify(x)).join(", ")})`);const L=_.apply(this,w);return k.trace(`GlyphRenderer#${_.name} return`,L),L}}},7302:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=o(8460),m=o(844),f=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends m.Disposable{constructor(y){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c={...i.DEFAULT_OPTIONS};for(const p in y)if(p in c)try{const h=y[p];c[p]=this._sanitizeAndValidateOption(p,h)}catch(h){console.error(h)}this.rawOptions=c,this.options={...c},this._setupOptions(),this.register((0,m.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(y,c){return this.onOptionChange(p=>{p===y&&c(this.rawOptions[y])})}onMultipleOptionChange(y,c){return this.onOptionChange(p=>{y.indexOf(p)!==-1&&c()})}_setupOptions(){const y=p=>{if(!(p in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},c=(p,h)=>{if(!(p in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);h=this._sanitizeAndValidateOption(p,h),this.rawOptions[p]!==h&&(this.rawOptions[p]=h,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const h={get:y.bind(this,p),set:c.bind(this,p)};Object.defineProperty(this.options,p,h)}}_sanitizeAndValidateOption(y,c){switch(y){case"cursorStyle":if(c||(c=i.DEFAULT_OPTIONS[y]),!function(p){return p==="block"||p==="underline"||p==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${y}`);break;case"wordSeparator":c||(c=i.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=g.includes(c)?c:i.DEFAULT_OPTIONS[y];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${y} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${y} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}i.OptionsService=v},2660:function(d,i,o){var u=this&&this.__decorate||function(v,k,y,c){var p,h=arguments.length,_=h<3?k:c===null?c=Object.getOwnPropertyDescriptor(k,y):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,k,y,c);else for(var w=v.length-1;w>=0;w--)(p=v[w])&&(_=(h<3?p(_):h>3?p(k,y,_):p(k,y))||_);return h>3&&_&&Object.defineProperty(k,y,_),_},m=this&&this.__param||function(v,k){return function(y,c){k(y,c,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const f=o(2585);let g=i.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const k=this._bufferService.buffer;if(v.id===void 0){const w=k.addMarker(k.ybase+k.y),L={data:v,id:this._nextId++,lines:[w]};return w.onDispose(()=>this._removeMarkerFromLink(L,w)),this._dataByLinkId.set(L.id,L),L.id}const y=v,c=this._getEntryIdKey(y),p=this._entriesWithId.get(c);if(p)return this.addLineToLink(p.id,k.ybase+k.y),p.id;const h=k.addMarker(k.ybase+k.y),_={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(_,h)),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(v,k){const y=this._dataByLinkId.get(v);if(y&&y.lines.every(c=>c.line!==k)){const c=this._bufferService.buffer.addMarker(k);y.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(y,c))}}getLinkData(v){var k;return(k=this._dataByLinkId.get(v))==null?void 0:k.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,k){const y=v.lines.indexOf(k);y!==-1&&(v.lines.splice(y,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};i.OscLinkService=g=u([m(0,f.IBufferService)],g)},8343:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(m){return m[u]||[]},i.createDecorator=function(m){if(i.serviceRegistry.has(m))return i.serviceRegistry.get(m);const f=function(g,v,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,c,p){c[o]===c?c[u].push({id:y,index:p}):(c[u]=[{id:y,index:p}],c[o]=c)})(f,g,k)};return f.toString=()=>m,i.serviceRegistry.set(m,f),f}},2585:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=o(8343);var m;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(m||(i.LogLevelEnum=m={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=o(8460),m=o(225);class f{static extractShouldJoin(v){return(1&v)!=0}static extractWidth(v){return v>>1&3}static extractCharKind(v){return v>>3}static createPropertyValue(v,k,y=!1){return(16777215&v)<<3|(3&k)<<1|(y?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const v=new m.UnicodeV6;this.register(v),this._active=v.version,this._activeProvider=v}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(v){if(!this._providers[v])throw new Error(`unknown Unicode version "${v}"`);this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)}register(v){this._providers[v.version]=v}wcwidth(v){return this._activeProvider.wcwidth(v)}getStringCellWidth(v){let k=0,y=0;const c=v.length;for(let p=0;p<c;++p){let h=v.charCodeAt(p);if(55296<=h&&h<=56319){if(++p>=c)return k+this.wcwidth(h);const L=v.charCodeAt(p);56320<=L&&L<=57343?h=1024*(h-55296)+L-56320+65536:k+=this.wcwidth(L)}const _=this.charProperties(h,y);let w=f.extractWidth(_);f.extractShouldJoin(_)&&(w-=f.extractWidth(y)),k+=w,y=_}return k}charProperties(v,k){return this._activeProvider.charProperties(v,k)}}i.UnicodeService=f}},n={};function a(d){var i=n[d];if(i!==void 0)return i.exports;var o=n[d]={exports:{}};return t[d].call(o.exports,o,o.exports,a),o.exports}var b={};return(()=>{var d=b;Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;const i=a(9042),o=a(3236),u=a(844),m=a(5741),f=a(8285),g=a(7975),v=a(7090),k=["cols","rows"];class y extends u.Disposable{constructor(p){super(),this._core=this.register(new o.Terminal(p)),this._addonManager=this.register(new m.AddonManager),this._publicOptions={...this._core.options};const h=w=>this._core.options[w],_=(w,L)=>{this._checkReadonlyOptions(w),this._core.options[w]=L};for(const w in this._core.options){const L={get:h.bind(this,w),set:_.bind(this,w)};Object.defineProperty(this._publicOptions,w,L)}}_checkReadonlyOptions(p){if(k.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let h="none";switch(this._core.coreMouseService.activeProtocol){case"X10":h="x10";break;case"VT200":h="vt200";break;case"DRAG":h="drag";break;case"ANY":h="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:h,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const h in p)this._publicOptions[h]=p[h]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,h=!0){this._core.input(p,h)}resize(p,h){this._verifyIntegers(p,h),this._core.resize(p,h)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,h,_){this._verifyIntegers(p,h,_),this._core.select(p,h,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,h){this._verifyIntegers(p,h),this._core.selectLines(p,h)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,h){this._core.write(p,h)}writeln(p,h){this._core.write(p),this._core.write(`\r
`,h)}paste(p){this._core.paste(p)}refresh(p,h){this._verifyIntegers(p,h),this._core.refresh(p,h)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return i}_verifyIntegers(...p){for(const h of p)if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const h of p)if(h&&(h===1/0||isNaN(h)||h%1!=0||h<0))throw new Error("This API only accepts positive integers")}}d.Terminal=y})(),b})())})(io);var Dl=io.exports,no={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,()=>(()=>{var t={};return(()=>{var n=t;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const b=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(b._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,b=a._renderService.dimensions;if(b.css.cell.width===0||b.css.cell.height===0)return;const d=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),u=Math.max(0,parseInt(i.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),f=o-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),g=u-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(g/b.css.cell.width)),rows:Math.max(1,Math.floor(f/b.css.cell.height))}}}})(),t})())})(no);var Ml=no.exports,oo={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,()=>(()=>{var t={6:(d,i)=>{function o(m){try{const f=new URL(m),g=f.password&&f.username?`${f.protocol}//${f.username}:${f.password}@${f.host}`:f.username?`${f.protocol}//${f.username}@${f.host}`:`${f.protocol}//${f.host}`;return m.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(m,f,g,v={}){this._terminal=m,this._regex=f,this._handler=g,this._options=v}provideLinks(m,f){const g=u.computeLink(m,this._regex,this._terminal,this._handler);f(this._addCallbacks(g))}_addCallbacks(m){return m.map(f=>(f.leave=this._options.leave,f.hover=(g,v)=>{if(this._options.hover){const{range:k}=f;this._options.hover(g,v,k)}},f))}};class u{static computeLink(f,g,v,k){const y=new RegExp(g.source,(g.flags||"")+"g"),[c,p]=u._getWindowedLineStrings(f-1,v),h=c.join("");let _;const w=[];for(;_=y.exec(h);){const L=_[0];if(!o(L))continue;const[x,E]=u._mapStrIdx(v,p,0,_.index),[S,D]=u._mapStrIdx(v,x,E,L.length);if(x===-1||E===-1||S===-1||D===-1)continue;const B={start:{x:E+1,y:x+1},end:{x:D,y:S+1}};w.push({range:B,text:L,activate:k})}return w}static _getWindowedLineStrings(f,g){let v,k=f,y=f,c=0,p="";const h=[];if(v=g.buffer.active.getLine(f)){const _=v.translateToString(!0);if(v.isWrapped&&_[0]!==" "){for(c=0;(v=g.buffer.active.getLine(--k))&&c<2048&&(p=v.translateToString(!0),c+=p.length,h.push(p),v.isWrapped&&p.indexOf(" ")===-1););h.reverse()}for(h.push(_),c=0;(v=g.buffer.active.getLine(++y))&&v.isWrapped&&c<2048&&(p=v.translateToString(!0),c+=p.length,h.push(p),p.indexOf(" ")===-1););}return[h,k]}static _mapStrIdx(f,g,v,k){const y=f.buffer.active,c=y.getNullCell();let p=v;for(;k;){const h=y.getLine(g);if(!h)return[-1,-1];for(let _=p;_<h.length;++_){h.getCell(_,c);const w=c.getChars();if(c.getWidth()&&(k-=w.length||1,_===h.length-1&&w==="")){const L=y.getLine(g+1);L&&L.isWrapped&&(L.getCell(0,c),c.getWidth()===2&&(k+=1))}if(k<0)return[g,_]}g++,p=0}return[g,p]}}i.LinkComputer=u}},n={};function a(d){var i=n[d];if(i!==void 0)return i.exports;var o=n[d]={exports:{}};return t[d](o,o.exports,a),o.exports}var b={};return(()=>{var d=b;Object.defineProperty(d,"__esModule",{value:!0}),d.WebLinksAddon=void 0;const i=a(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(m,f){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}d.WebLinksAddon=class{constructor(m=u,f={}){this._handler=m,this._options=f}activate(m){this._terminal=m;const f=this._options,g=f.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,g,this._handler,f))}dispose(){var m;(m=this._linkProvider)==null||m.dispose()}}})(),b})())})(oo);var Tl=oo.exports;function Ti(r){let e,t,n,a,b,d,i,o,u,m,f,g=r[1].name+"",v,k,y,c=Ii(r[1].size)+"",p,h,_,w,L,x,E,S=r[3]&&Bi(r),D=r[2]==="pending"&&Ai(r),B=r[2]==="accepting"&&Ri(),O=r[2]==="completed"&&Oi(r);return{c(){e=C("div"),t=C("div"),n=C("div"),n.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',a=A(),b=C("div"),d=C("div"),i=C("div"),o=C("span"),o.textContent="📄",u=A(),m=C("div"),f=C("span"),v=G(g),k=A(),y=C("span"),p=G(c),h=G(" 字节"),_=A(),w=C("div"),S&&S.c(),L=A(),D&&D.c(),x=A(),B&&B.c(),E=A(),O&&O.c(),s(n,"class","zmodem-download-header"),s(o,"class","zmodem-download-icon"),s(f,"class","zmodem-download-name"),s(y,"class","zmodem-download-size"),s(m,"class","zmodem-download-details"),s(i,"class","zmodem-download-file"),s(d,"class","zmodem-download-info"),s(w,"class","zmodem-download-actions"),s(b,"class","zmodem-download-body"),s(t,"class","zmodem-download-content"),s(e,"class","zmodem-download-modal")},m(I,R){U(I,e,R),l(e,t),l(t,n),l(t,a),l(t,b),l(b,d),l(d,i),l(i,o),l(i,u),l(i,m),l(m,f),l(f,v),l(m,k),l(m,y),l(y,p),l(y,h),l(b,_),l(b,w),S&&S.m(w,null),l(w,L),D&&D.m(w,null),l(w,x),B&&B.m(w,null),l(w,E),O&&O.m(w,null)},p(I,R){R[0]&2&&g!==(g=I[1].name+"")&&he(v,g),R[0]&2&&c!==(c=Ii(I[1].size)+"")&&he(p,c),I[3]?S?S.p(I,R):(S=Bi(I),S.c(),S.m(w,L)):S&&(S.d(1),S=null),I[2]==="pending"?D?D.p(I,R):(D=Ai(I),D.c(),D.m(w,x)):D&&(D.d(1),D=null),I[2]==="accepting"?B||(B=Ri(),B.c(),B.m(w,E)):B&&(B.d(1),B=null),I[2]==="completed"?O?O.p(I,R):(O=Oi(I),O.c(),O.m(w,null)):O&&(O.d(1),O=null)},d(I){I&&N(e),S&&S.d(),D&&D.d(),B&&B.d(),O&&O.d()}}}function Bi(r){let e,t,n;return{c(){e=C("div"),t=G("❌ "),n=G(r[3]),s(e,"class","zmodem-error-message")},m(a,b){U(a,e,b),l(e,t),l(e,n)},p(a,b){b[0]&8&&he(n,a[3])},d(a){a&&N(e)}}}function Ai(r){let e,t,n,a,b,d,i,o;return{c(){e=C("p"),e.textContent="服务器正在发送文件，是否接收？",t=A(),n=C("div"),a=C("button"),a.textContent="拒绝",b=A(),d=C("button"),d.textContent="接收文件",s(e,"class","zmodem-download-prompt"),s(a,"class","zmodem-download-btn zmodem-btn-reject"),s(d,"class","zmodem-download-btn zmodem-btn-accept"),s(n,"class","zmodem-download-buttons")},m(u,m){U(u,e,m),U(u,t,m),U(u,n,m),l(n,a),l(n,b),l(n,d),i||(o=[Y(a,"click",r[6]),Y(d,"click",r[5])],i=!0)},p:Oe,d(u){u&&(N(e),N(t),N(n)),i=!1,et(o)}}}function Ri(r){let e;return{c(){e=C("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',s(e,"class","zmodem-downloading")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Oi(r){let e,t,n,a,b,d=(r[4]||r[1].name)+"",i;return{c(){e=C("div"),t=C("span"),t.textContent="✓",n=A(),a=C("span"),b=G("文件接收完成，已保存到："),i=G(d),s(t,"class","zmodem-success-icon"),s(e,"class","zmodem-completed")},m(o,u){U(o,e,u),l(e,t),l(e,n),l(e,a),l(a,b),l(a,i)},p(o,u){u[0]&18&&d!==(d=(o[4]||o[1].name)+"")&&he(i,d)},d(o){o&&N(e)}}}function Bl(r){let e,t,n,a=r[1]&&Ti(r);return{c(){e=C("div"),e.innerHTML="",t=A(),a&&a.c(),n=It(),s(e,"class","terminal-container svelte-14g4vw6")},m(b,d){U(b,e,d),r[16](e),U(b,t,d),a&&a.m(b,d),U(b,n,d)},p(b,d){b[1]?a?a.p(b,d):(a=Ti(b),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:Oe,o:Oe,d(b){b&&(N(e),N(t),N(n)),r[16](null),a&&a.d(b)}}}function Pi(){if(typeof document>"u")return{fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace'};const r=getComputedStyle(document.documentElement),e=Number.parseInt(r.getPropertyValue("--terminal-font-size"),10),t=r.getPropertyValue("--terminal-font-family").trim();return{fontSize:Number.isFinite(e)?e:14,fontFamily:t||'Menlo, Monaco, "Courier New", monospace'}}function Al(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function Rl(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function Ol(r){const e=[];let t=0;for await(const b of r)e.push(b),t+=b.length;const n=new Uint8Array(t);let a=0;for(const b of e)n.set(b,a),a+=b.length;return n}async function Pl(r,e){const t=await Ol(r),{SaveBinaryFile:n}=window.wailsBindings||{};if(typeof n=="function"){const a=btoa(Rl(t));return await n(e,a)}return Al(t,e),null}function Ii(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function Il(r,e,t){let{sessionId:n=null}=e,{onData:a=null}=e,{onResize:b=null}=e,{onZModemTransfer:d=null}=e,i,o,u,m=null,f=null,g=null,v=!1,k=null,y=!1,c=null,p="pending",h=null,_=null,w=null,L=null,x=Do(yr);const E={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},S={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},D=yr.subscribe(X=>{x=X,o&&(o.options.theme=x==="light"?S:E)});function B(){if(!o)return;const X=Pi();o.options.fontSize=X.fontSize,o.options.fontFamily=X.fontFamily,u==null||u.fit()}ar(async()=>{const X=Pi();o=new Dl.Terminal({cursorBlink:!0,fontSize:X.fontSize,fontFamily:X.fontFamily,theme:x==="light"?S:E,allowProposedApi:!0,scrollback:1e3,convertEol:!0,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),u=new Ml.FitAddon,o.loadAddon(u),o.loadAddon(new Tl.WebLinksAddon),o.open(i),u.fit(),o.attachCustomKeyEventHandler(F=>{if(F.metaKey&&F.key.toLowerCase()==="c"&&!F.shiftKey&&!F.ctrlKey){if(o.hasSelection()){const T=o.getSelection();return navigator.clipboard.writeText(T).catch(Q=>{console.error("Failed to copy:",Q)}),!1}return!0}if(F.ctrlKey&&!F.metaKey&&F.key.toLowerCase()==="c"&&!F.shiftKey){if(o.hasSelection()){const T=o.getSelection();return navigator.clipboard.writeText(T).catch(Q=>{console.error("Failed to copy:",Q)}),!1}return!0}return F.metaKey&&F.key.toLowerCase()==="v"&&!F.shiftKey&&!F.ctrlKey?(F.preventDefault(),navigator.clipboard.readText().then(T=>{T&&a&&n&&a(n,T)}).catch(T=>{console.error("Failed to read clipboard:",T)}),!1):F.ctrlKey&&!F.metaKey&&F.key.toLowerCase()==="v"&&!F.shiftKey?(F.preventDefault(),navigator.clipboard.readText().then(T=>{T&&a&&n&&a(n,T)}).catch(T=>{console.error("Failed to read clipboard:",T)}),!1):!0});try{const F=await Cr(()=>import("./index2.js").then(T=>T.i),[]);m=F.default||F,f=new m.Sentry({to_terminal:T=>{o&&o.write(new Uint8Array(T))},sender:T=>{if(n){if(d){d(n,new Uint8Array(T));return}if(a){let Q="";for(let q=0;q<T.length;q++)Q+=String.fromCharCode(T[q]);a(n,Q)}}},on_detect:T=>{if(console.log("ZMODEM detected:",T.type),console.log("Detection object:",T),g=T.confirm(),console.log("ZMODEM confirmed, type:",g.type,"has zsession:",!!g),!g){console.error("ERROR: zsession is null after confirm()");return}y=!0,o&&(o.options.disableStdin=!0),g.type==="receive"?(console.log("Calling handleZModemReceive for download"),j(g)):(console.log("Calling handleZModemSend for upload"),te(g))},on_retract:()=>{console.log("ZMODEM retracted"),g=null,y=!1,o&&(o.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(F){console.error("Failed to initialize ZMODEM:",F)}o.onData(F=>{a&&n&&a(n,F)}),o.onResize(({cols:F,rows:T})=>{b&&n&&b(n,F,T)});const Z=new ResizeObserver(()=>{u.fit()});return Z.observe(i),L=()=>{B()},window.addEventListener("app:appearance-updated",L),()=>{Z.disconnect(),L&&window.removeEventListener("app:appearance-updated",L)}}),Ir(()=>{D&&D(),o&&o.dispose()});function O(X){w||(w=document.createElement("div"),w.className="zmodem-progress-modal",w.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${X}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(w))}function I(X,Z,F,T,Q){if(!w)return;const q=Math.min(100,Math.round(T/Q*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${F}`,document.getElementById("zmodem-progress-bar").style.width=`${q}%`,document.getElementById("zmodem-progress-text").textContent=`${q}%`,document.getElementById("zmodem-files-progress").textContent=`${X+1} / ${Z}`}function R(){w&&(document.body.removeChild(w),w=null)}function j(X){t(1,c=null),k=null,t(2,p="pending"),t(3,h=null),t(4,_=null),X.on("offer",Z=>{const F=Z.get_details();k=Z,t(1,c=F),t(2,p="pending"),t(3,h=null),t(4,_=null)}),X.on("session_end",()=>{k=null,g=null,y=!1,o&&(o.options.disableStdin=!1),p==="accepting"?(t(2,p="completed"),setTimeout(()=>{t(1,c=null),t(2,p="pending"),t(4,_=null)},1500)):(t(1,c=null),t(2,p="pending"),t(4,_=null))}),X.start()}async function K(){if(k){t(2,p="accepting"),t(3,h=null);try{await k.accept();const X=k.get_payloads(),Z=k.get_details().name;t(4,_=await Pl(X,Z)),k=null,t(2,p="completed")}catch(X){console.error("接收文件失败:",X),t(3,h=X.message||String(X)),t(2,p="pending")}}}function J(){k&&k.skip(),k=null,t(1,c=null),t(2,p="pending"),t(3,h=null),t(4,_=null)}async function te(X){console.log("handleZModemSend called, session:",X);const Z=document.createElement("input");return Z.type="file",Z.multiple=!0,new Promise(F=>{Z.onchange=async T=>{const Q=Array.from(T.target.files);if(console.log("Files selected:",Q.length,Q.map(q=>q.name)),Q.length===0){console.log("No files selected, closing session"),X.close(),v=!1,y=!1,o&&(o.options.disableStdin=!1),F();return}try{O(Q.length),console.log("Starting to send files...");for(let q=0;q<Q.length;q++){const ne=Q[q],ie={name:ne.name,size:ne.size,mtime:new Date(ne.lastModified)};console.log(`Sending file ${q+1}/${Q.length}:`,ne.name,ne.size),await W(X,ne,ie,q,Q.length)}console.log("All files sent, closing session"),await X.close(),setTimeout(()=>{v=!1,R(),y=!1,o&&(o.options.disableStdin=!1),F()},500)}catch(q){console.error("发送文件失败:",q),console.error("Error details:",q.stack),X.close(),v=!1,R(),y=!1,o&&(o.options.disableStdin=!1),F()}},Z.click()})}async function W(X,Z,F,T,Q){return new Promise((q,ne)=>{X.send_offer(F).then(ie=>{if(!ie){q();return}const ce=new FileReader,fe=8192;ce.onload=ge=>{const pe=ge.target.result;let ye=0,Ke=0;function Le(){if(ye<pe.byteLength){const Se=new Uint8Array(pe,ye,Math.min(fe,pe.byteLength-ye));ie.send(Se),ye+=fe,Ke+=Se.byteLength,I(T,Q,Z.name,Ke,Z.size),setTimeout(Le,0)}else ie.end().then(q).catch(ne)}Le()},ce.onerror=()=>{ne(new Error("读取文件失败"))},ce.readAsArrayBuffer(Z)})})}function M(X){if(!o)return;let Z;if(typeof X=="string"?Z=new Uint8Array(X.split("").map(F=>F.charCodeAt(0))):X instanceof Uint8Array?Z=X:Z=new Uint8Array(X),f&&!v)try{f.consume(Z);return}catch(F){console.warn("ZMODEM consume failed:",F),g=null,k=null,y=!1,v=!1,o&&(o.options.disableStdin=!1)}o.write(Z)}function P(X){o&&o.writeln(X)}function H(){o&&o.clear()}function z(){o&&o.focus()}function $(){return o?{cols:o.cols,rows:o.rows}:{cols:80,rows:24}}function V(X){gt[X?"unshift":"push"](()=>{i=X,t(0,i)})}return r.$$set=X=>{"sessionId"in X&&t(7,n=X.sessionId),"onData"in X&&t(8,a=X.onData),"onResize"in X&&t(9,b=X.onResize),"onZModemTransfer"in X&&t(10,d=X.onZModemTransfer)},[i,c,p,h,_,K,J,n,a,b,d,M,P,H,z,$,V]}class Hl extends Et{constructor(e){super(),xt(this,e,Il,Bl,Ct,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function Hi(r,e,t){const n=r.slice();return n[31]=e[t],n}function Fi(r,e,t){const n=r.slice();return n[34]=e[t],n}function zi(r,e,t){const n=r.slice();return n[37]=e[t],n}function Fl(r){let e,t=Ue(r[12]),n=[];for(let a=0;a<t.length;a+=1)n[a]=ji(zi(r,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=It()},m(a,b){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(a,b);U(a,e,b)},p(a,b){if(b[0]&135170){t=Ue(a[12]);let d;for(d=0;d<t.length;d+=1){const i=zi(a,t,d);n[d]?n[d].p(i,b):(n[d]=ji(i),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=t.length}},d(a){a&&N(e),Mt(n,a)}}}function zl(r){let e;return{c(){e=C("div"),e.textContent="未匹配到数据库",s(e,"class","text-xs text-gray-500 dark:text-gray-400 p-2")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function jl(r){let e;return{c(){e=C("div"),e.textContent="暂无数据库",s(e,"class","text-xs text-gray-500 dark:text-gray-400 p-2")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Wl(r){let e;return{c(){e=C("div"),e.textContent="加载中...",s(e,"class","text-xs text-gray-500 dark:text-gray-400 p-2")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function ji(r){let e,t=r[37]+"",n,a,b,d,i;function o(){return r[25](r[37])}return{c(){e=C("button"),n=G(t),a=A(),s(e,"type","button"),s(e,"class",b="w-full text-left text-sm px-3 py-2 rounded mb-1 transition-colors "+(r[1]===r[37]?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"))},m(u,m){U(u,e,m),l(e,n),l(e,a),d||(i=Y(e,"click",o),d=!0)},p(u,m){r=u,m[0]&4096&&t!==(t=r[37]+"")&&he(n,t),m[0]&4098&&b!==(b="w-full text-left text-sm px-3 py-2 rounded mb-1 transition-colors "+(r[1]===r[37]?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"))&&s(e,"class",b)},d(u){u&&N(e),d=!1,i()}}}function Wi(r){let e,t,n;return{c(){e=C("button"),e.textContent="刷新",s(e,"class","text-xs px-2 py-1 rounded bg-gray-100 dark:bg-gray-700")},m(a,b){U(a,e,b),t||(n=Y(e,"click",r[26]),t=!0)},p:Oe,d(a){a&&N(e),t=!1,n()}}}function Ni(r){let e,t,n,a;return{c(){e=C("div"),t=C("input"),s(t,"type","text"),s(t,"placeholder","搜索表名或注释..."),s(t,"class","w-full text-xs px-3 py-2 rounded border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100"),s(e,"class","px-4 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800")},m(b,d){U(b,e,d),l(e,t),Me(t,r[3]),n||(a=Y(t,"input",r[27]),n=!0)},p(b,d){d[0]&8&&t.value!==b[3]&&Me(t,b[3])},d(b){b&&N(e),n=!1,a()}}}function Ui(r){let e,t;return{c(){e=C("div"),t=G(r[10]),s(e,"class","mb-2 text-xs text-red-500")},m(n,a){U(n,e,a),l(e,t)},p(n,a){a[0]&1024&&he(t,n[10])},d(n){n&&N(e)}}}function Nl(r){let e,t,n,a,b,d,i=Ue(r[13]),o=[];for(let f=0;f<i.length;f+=1)o[f]=Ki(Fi(r,i,f));let u=Ue(r[11]),m=[];for(let f=0;f<u.length;f+=1)m[f]=qi(Hi(r,u,f));return{c(){e=C("div"),t=C("table"),n=C("thead"),a=C("tr");for(let f=0;f<o.length;f+=1)o[f].c();b=A(),d=C("tbody");for(let f=0;f<m.length;f+=1)m[f].c();s(n,"class","bg-gray-50 dark:bg-gray-700/60"),s(t,"class","w-full text-xs border-collapse"),s(e,"class","overflow-auto border border-gray-200 dark:border-gray-700 rounded")},m(f,g){U(f,e,g),l(e,t),l(t,n),l(n,a);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(a,null);l(t,b),l(t,d);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(d,null)},p(f,g){if(g[0]&41008){i=Ue(f[13]);let v;for(v=0;v<i.length;v+=1){const k=Fi(f,i,v);o[v]?o[v].p(k,g):(o[v]=Ki(k),o[v].c(),o[v].m(a,null))}for(;v<o.length;v+=1)o[v].d(1);o.length=i.length}if(g[0]&264192){u=Ue(f[11]);let v;for(v=0;v<u.length;v+=1){const k=Hi(f,u,v);m[v]?m[v].p(k,g):(m[v]=qi(k),m[v].c(),m[v].m(d,null))}for(;v<m.length;v+=1)m[v].d(1);m.length=u.length}},d(f){f&&N(e),Mt(o,f),Mt(m,f)}}}function Ul(r){let e;return{c(){e=C("div"),e.textContent="未匹配到表，请调整搜索关键词",s(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Vl(r){let e;return{c(){e=C("div"),e.textContent="暂无表",s(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Kl(r){let e;return{c(){e=C("div"),e.textContent="表加载中...",s(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function ql(r){let e;return{c(){e=C("div"),e.textContent="请选择一个数据库",s(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Vi(r){let e,t=r[5]==="asc"?"↑":"↓",n;return{c(){e=C("span"),n=G(t),s(e,"aria-hidden","true")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&32&&t!==(t=a[5]==="asc"?"↑":"↓")&&he(n,t)},d(a){a&&N(e)}}}function Ki(r){let e,t,n,a,b,d,i,o,u=r[4]===r[34].key&&Vi(r);function m(){return r[28](r[34])}return{c(){e=C("th"),t=C("button"),n=C("span"),n.textContent=`${r[34].label}`,a=A(),u&&u.c(),d=A(),s(t,"type","button"),s(t,"class",b="inline-flex items-center gap-1 select-none hover:text-blue-600 dark:hover:text-blue-300 "+(r[4]===r[34].key?"text-blue-600 dark:text-blue-300":"")),s(e,"class","text-left px-3 py-2 border-b border-gray-200 dark:border-gray-700")},m(f,g){U(f,e,g),l(e,t),l(t,n),l(t,a),u&&u.m(t,null),l(e,d),i||(o=Y(t,"click",m),i=!0)},p(f,g){r=f,r[4]===r[34].key?u?u.p(r,g):(u=Vi(r),u.c(),u.m(t,null)):u&&(u.d(1),u=null),g[0]&16&&b!==(b="inline-flex items-center gap-1 select-none hover:text-blue-600 dark:hover:text-blue-300 "+(r[4]===r[34].key?"text-blue-600 dark:text-blue-300":""))&&s(t,"class",b)},d(f){f&&N(e),u&&u.d(),i=!1,o()}}}function qi(r){let e,t,n=r[31].tableName+"",a,b,d,i=Gi(r[31].rowCount)+"",o,u,m,f=Ji(r[31].dataLength)+"",g,v,k,y=(r[31].engine||"-")+"",c,p,h,_=Tr(r[31].createTime)+"",w,L,x,E=Tr(r[31].updateTime)+"",S,D,B,O=(r[31].collation||"-")+"",I,R,j,K=(r[31].comment||"-")+"",J,te,W,M;function P(){return r[29](r[31])}return{c(){e=C("tr"),t=C("td"),a=G(n),b=A(),d=C("td"),o=G(i),u=A(),m=C("td"),g=G(f),v=A(),k=C("td"),c=G(y),p=A(),h=C("td"),w=G(_),L=A(),x=C("td"),S=G(E),D=A(),B=C("td"),I=G(O),R=A(),j=C("td"),J=G(K),te=A(),s(t,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700 text-blue-700 dark:text-blue-300"),s(d,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(m,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(k,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(h,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(x,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(B,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(j,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),s(e,"class","hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer")},m(H,z){U(H,e,z),l(e,t),l(t,a),l(e,b),l(e,d),l(d,o),l(e,u),l(e,m),l(m,g),l(e,v),l(e,k),l(k,c),l(e,p),l(e,h),l(h,w),l(e,L),l(e,x),l(x,S),l(e,D),l(e,B),l(B,I),l(e,R),l(e,j),l(j,J),l(e,te),W||(M=Y(e,"click",P),W=!0)},p(H,z){r=H,z[0]&2048&&n!==(n=r[31].tableName+"")&&he(a,n),z[0]&2048&&i!==(i=Gi(r[31].rowCount)+"")&&he(o,i),z[0]&2048&&f!==(f=Ji(r[31].dataLength)+"")&&he(g,f),z[0]&2048&&y!==(y=(r[31].engine||"-")+"")&&he(c,y),z[0]&2048&&_!==(_=Tr(r[31].createTime)+"")&&he(w,_),z[0]&2048&&E!==(E=Tr(r[31].updateTime)+"")&&he(S,E),z[0]&2048&&O!==(O=(r[31].collation||"-")+"")&&he(I,O),z[0]&2048&&K!==(K=(r[31].comment||"-")+"")&&he(J,K)},d(H){H&&N(e),W=!1,M()}}}function Gl(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p=r[1]?`(${r[1]})`:"",h,_,w,L,x,E,S,D;function B(M,P){return M[8]?Wl:M[0].length===0?jl:M[12].length===0?zl:Fl}let O=B(r),I=O(r),R=r[1]&&Wi(r),j=r[1]&&Ni(r),K=r[10]&&Ui(r);function J(M,P){return M[1]?M[9]?Kl:M[7].length===0?Vl:M[6].length===0?Ul:Nl:ql}let te=J(r),W=te(r);return{c(){e=C("div"),t=C("aside"),n=C("div"),a=C("h3"),a.textContent="数据库",b=A(),d=C("button"),d.textContent="刷新",i=A(),o=C("div"),u=C("input"),m=A(),f=C("div"),I.c(),g=A(),v=C("section"),k=C("div"),y=C("h3"),c=G("表信息列表 "),h=G(p),_=A(),R&&R.c(),w=A(),j&&j.c(),L=A(),x=C("div"),K&&K.c(),E=A(),W.c(),s(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(d,"class","text-xs px-2 py-1 rounded bg-gray-100 dark:bg-gray-700"),s(n,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"),s(u,"type","text"),s(u,"placeholder","搜索数据库..."),s(u,"class","w-full text-xs px-3 py-2 rounded border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100"),s(o,"class","px-2 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),s(f,"class","flex-1 overflow-y-auto p-2"),s(t,"class","w-64 border-r border-gray-200 dark:border-gray-700 flex flex-col"),s(y,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(k,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"),s(x,"class","flex-1 overflow-y-auto p-3"),s(v,"class","flex-1 min-w-0 flex flex-col"),s(e,"class","h-full flex bg-white dark:bg-gray-800")},m(M,P){U(M,e,P),l(e,t),l(t,n),l(n,a),l(n,b),l(n,d),l(t,i),l(t,o),l(o,u),Me(u,r[2]),l(t,m),l(t,f),I.m(f,null),l(e,g),l(e,v),l(v,k),l(k,y),l(y,c),l(y,h),l(k,_),R&&R.m(k,null),l(v,w),j&&j.m(v,null),l(v,L),l(v,x),K&&K.m(x,null),l(x,E),W.m(x,null),S||(D=[Y(d,"click",r[14]),Y(u,"input",r[24])],S=!0)},p(M,P){P[0]&4&&u.value!==M[2]&&Me(u,M[2]),O===(O=B(M))&&I?I.p(M,P):(I.d(1),I=O(M),I&&(I.c(),I.m(f,null))),P[0]&2&&p!==(p=M[1]?`(${M[1]})`:"")&&he(h,p),M[1]?R?R.p(M,P):(R=Wi(M),R.c(),R.m(k,null)):R&&(R.d(1),R=null),M[1]?j?j.p(M,P):(j=Ni(M),j.c(),j.m(v,L)):j&&(j.d(1),j=null),M[10]?K?K.p(M,P):(K=Ui(M),K.c(),K.m(x,E)):K&&(K.d(1),K=null),te===(te=J(M))&&W?W.p(M,P):(W.d(1),W=te(M),W&&(W.c(),W.m(x,null)))},i:Oe,o:Oe,d(M){M&&N(e),I.d(),R&&R.d(),j&&j.d(),K&&K.d(),W.d(),S=!1,et(D)}}}function Jl(r){return String(r||"").replace(/'/g,"''")}function Yl(r,e){const t={};return r.forEach((n,a)=>{t[String(n||"").toLowerCase()]=e[a]}),{tableName:String(t.table_name||""),rowCount:t.table_rows,dataLength:t.data_length,engine:t.engine||"-",createTime:t.create_time||"-",updateTime:t.update_time||"-",collation:t.table_collation||"-",comment:t.table_comment||"-"}}function Gi(r){const e=Number(r);return Number.isNaN(e)?"-":e.toLocaleString("en-US")}function Ji(r){const e=Number(r);return Number.isNaN(e)||e<0?"-":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(1)} GB`}function Tr(r){if(!r||r==="-")return"-";const e=new Date(r);return Number.isNaN(e.getTime())?String(r):e.toLocaleString("zh-CN")}function Yi(r){const e=Number(r);return Number.isNaN(e)?null:e}function Xi(r){if(!r||r==="-")return null;const e=Date.parse(r);return Number.isNaN(e)?null:e}function Zi(r,e){return e==="tableName"?String(r.tableName||"").toLowerCase():e==="rowCount"?Yi(r.rowCount):e==="dataLength"?Yi(r.dataLength):e==="createTime"?Xi(r.createTime):e==="updateTime"?Xi(r.updateTime):e==="engine"?String(r.engine||"").toLowerCase():e==="collation"?String(r.collation||"").toLowerCase():e==="comment"?String(r.comment||"").toLowerCase():null}function Xl(r,e,t){let n,a,b,d,i,o,{sessionId:u=null}=e,{dbConfig:m=null}=e,f=[],g={},v="",k="",y="",c="tableName",p="desc";const h=[{key:"tableName",label:"表名"},{key:"rowCount",label:"行数"},{key:"dataLength",label:"数据长度"},{key:"engine",label:"引擎"},{key:"createTime",label:"创建时间"},{key:"updateTime",label:"修改时间"},{key:"collation",label:"排序规则"},{key:"comment",label:"注释"}];let _=!1,w=!1,L="";ar(async()=>{await x()});async function x(){var W;if(!(!window.wailsBindings||!u)){t(8,_=!0),t(10,L="");try{const M=await window.wailsBindings.ListDatabases(u);t(0,f=(M||[]).slice().sort()),!v&&f.length>0&&t(1,v=((W=m==null?void 0:m.metadata)==null?void 0:W.database)||f[0]),v&&await D(v)}catch(M){t(10,L=`加载数据库失败: ${M.message||"未知错误"}`)}finally{t(8,_=!1)}}}function E(W){var H;const M=(((H=m==null?void 0:m.metadata)==null?void 0:H.db_type)||(m==null?void 0:m.dbType)||"").toLowerCase(),P=Jl(W);return M==="postgresql"?`
        SELECT
          c.relname AS table_name,
          c.reltuples::bigint AS table_rows,
          pg_total_relation_size(c.oid) AS data_length,
          '' AS engine,
          NULL::text AS create_time,
          NULL::text AS update_time,
          pg_catalog.obj_description(c.oid, 'pg_class') AS table_comment,
          '' AS table_collation
        FROM pg_catalog.pg_class c
        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
        WHERE c.relkind = 'r'
          AND n.nspname = 'public'
        ORDER BY c.relname;
      `:`
      SELECT
        TABLE_NAME AS table_name,
        TABLE_ROWS AS table_rows,
        DATA_LENGTH AS data_length,
        ENGINE AS engine,
        CREATE_TIME AS create_time,
        UPDATE_TIME AS update_time,
        TABLE_COLLATION AS table_collation,
        TABLE_COMMENT AS table_comment
      FROM information_schema.tables
      WHERE TABLE_SCHEMA = '${P}'
      ORDER BY TABLE_NAME;
    `}function S(W){if(c===W){t(5,p=p==="asc"?"desc":"asc");return}t(4,c=W),t(5,p="desc")}async function D(W){if(!(!window.wailsBindings||!u||!W)){t(9,w=!0),t(10,L="");try{const M=E(W),P=await window.wailsBindings.ExecuteDatabaseQuery(u,M),H=JSON.parse(P||"{}"),z=(H==null?void 0:H.columns)||[],V=((H==null?void 0:H.rows)||[]).map(X=>Yl(z,X)).filter(X=>X.tableName);t(21,g={...g,[W]:V})}catch(M){t(10,L=`加载表失败: ${M.message||"未知错误"}`)}finally{t(9,w=!1)}}}async function B(W){t(1,v=W),t(3,y=""),g[W]||await D(W)}function O(W){window.dispatchEvent(new CustomEvent("database:table-select",{detail:{sessionId:u,databaseName:v,tableName:W}}))}function I(){k=this.value,t(2,k)}const R=W=>B(W),j=()=>D(v);function K(){y=this.value,t(3,y)}const J=W=>S(W.key),te=W=>O(W.tableName);return r.$$set=W=>{"sessionId"in W&&t(19,u=W.sessionId),"dbConfig"in W&&t(20,m=W.dbConfig)},r.$$.update=()=>{r.$$.dirty[0]&2097154&&t(7,n=v?g[v]||[]:[]),r.$$.dirty[0]&4&&t(23,a=k.trim().toLowerCase()),r.$$.dirty[0]&8388609&&t(12,b=a?f.filter(W=>String(W||"").toLowerCase().includes(a)):f),r.$$.dirty[0]&8&&t(22,d=y.trim().toLowerCase()),r.$$.dirty[0]&4194432&&t(6,i=d?n.filter(W=>{const M=String(W.tableName||"").toLowerCase(),P=String(W.comment||"").toLowerCase();return M.includes(d)||P.includes(d)}):n),r.$$.dirty[0]&112&&t(11,o=i.slice().sort((W,M)=>{const P=Zi(W,c),H=Zi(M,c);if(P===null&&H===null)return 0;if(P===null)return 1;if(H===null)return-1;if(typeof P=="string"&&typeof H=="string"){const $=P.localeCompare(H);return p==="asc"?$:-$}const z=Number(P)-Number(H);return p==="asc"?z:-z}))},[f,v,k,y,c,p,i,n,_,w,L,o,b,h,x,S,D,B,O,u,m,g,d,a,I,R,j,K,J,te]}class Zl extends Et{constructor(e){super(),xt(this,e,Xl,Gl,Ct,{sessionId:19,dbConfig:20},null,[-1,-1])}}function Qi(r,e,t){const n=r.slice();return n[31]=e[t],n}function $i(r,e,t){const n=r.slice();return n[34]=e[t],n}function es(r,e,t){const n=r.slice();return n[37]=e[t],n}function ts(r,e,t){const n=r.slice();return n[40]=e[t],n}function rs(r){let e,t;return{c(){e=C("div"),t=G(r[3]),s(e,"class","px-4 py-2 text-xs text-red-600 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800")},m(n,a){U(n,e,a),l(e,t)},p(n,a){a[0]&8&&he(t,n[3])},d(n){n&&N(e)}}}function is(r){let e,t;return{c(){e=C("div"),t=G(r[4]),s(e,"class","px-4 py-2 text-xs text-amber-700 bg-amber-50 dark:bg-amber-900/20 border-b border-amber-100 dark:border-amber-800")},m(n,a){U(n,e,a),l(e,t)},p(n,a){a[0]&16&&he(t,n[4])},d(n){n&&N(e)}}}function Ql(r){let e;return{c(){e=C("div"),e.textContent="暂无结果，执行查询后显示数据",s(e,"class","h-full flex items-center justify-center text-sm text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function $l(r){let e,t,n,a,b,d=Ue(r[0].columns),i=[];for(let m=0;m<d.length;m+=1)i[m]=ns(ts(r,d,m));let o=Ue(r[8]),u=[];for(let m=0;m<o.length;m+=1)u[m]=ls($i(r,o,m));return{c(){e=C("table"),t=C("thead"),n=C("tr");for(let m=0;m<i.length;m+=1)i[m].c();a=A(),b=C("tbody");for(let m=0;m<u.length;m+=1)u[m].c();s(t,"class","sticky top-0 z-10 bg-gray-100 dark:bg-gray-700"),s(e,"class","w-full text-xs border-collapse")},m(m,f){U(m,e,f),l(e,t),l(t,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(n,null);l(e,a),l(e,b);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(b,null)},p(m,f){if(f[0]&2241){d=Ue(m[0].columns);let g;for(g=0;g<d.length;g+=1){const v=ts(m,d,g);i[g]?i[g].p(v,f):(i[g]=ns(v),i[g].c(),i[g].m(n,null))}for(;g<i.length;g+=1)i[g].d(1);i.length=d.length}if(f[0]&256){o=Ue(m[8]);let g;for(g=0;g<o.length;g+=1){const v=$i(m,o,g);u[g]?u[g].p(v,f):(u[g]=ls(v),u[g].c(),u[g].m(b,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=o.length}},d(m){m&&N(e),Mt(i,m),Mt(u,m)}}}function ss(r){let e,t=r[6]==="asc"?"↑":"↓",n;return{c(){e=C("span"),n=G(t),s(e,"aria-hidden","true")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&64&&t!==(t=a[6]==="asc"?"↑":"↓")&&he(n,t)},d(a){a&&N(e)}}}function ns(r){let e,t,n,a=r[40]+"",b,d,i,o,u,m,f=r[7]===r[40]&&ss(r);function g(){return r[26](r[40])}return{c(){e=C("th"),t=C("button"),n=C("span"),b=G(a),d=A(),f&&f.c(),o=A(),s(t,"type","button"),s(t,"class",i="inline-flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-300 "+(r[7]===r[40]?"text-blue-600 dark:text-blue-300":"")),s(e,"class","text-left px-3 py-2 border-b border-gray-200 dark:border-gray-600 font-semibold text-gray-700 dark:text-gray-200")},m(v,k){U(v,e,k),l(e,t),l(t,n),l(n,b),l(t,d),f&&f.m(t,null),l(e,o),u||(m=Y(t,"click",g),u=!0)},p(v,k){r=v,k[0]&1&&a!==(a=r[40]+"")&&he(b,a),r[7]===r[40]?f?f.p(r,k):(f=ss(r),f.c(),f.m(t,null)):f&&(f.d(1),f=null),k[0]&129&&i!==(i="inline-flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-300 "+(r[7]===r[40]?"text-blue-600 dark:text-blue-300":""))&&s(t,"class",i)},d(v){v&&N(e),f&&f.d(),u=!1,m()}}}function os(r){let e,t=r[37]+"",n;return{c(){e=C("td"),n=G(t),s(e,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700 text-gray-800 dark:text-gray-100 align-top")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&256&&t!==(t=a[37]+"")&&he(n,t)},d(a){a&&N(e)}}}function ls(r){let e,t,n=Ue(r[34]),a=[];for(let b=0;b<n.length;b+=1)a[b]=os(es(r,n,b));return{c(){e=C("tr");for(let b=0;b<a.length;b+=1)a[b].c();t=A(),s(e,"class","hover:bg-gray-50 dark:hover:bg-gray-700/40")},m(b,d){U(b,e,d);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null);l(e,t)},p(b,d){if(d[0]&256){n=Ue(b[34]);let i;for(i=0;i<n.length;i+=1){const o=es(b,n,i);a[i]?a[i].p(o,d):(a[i]=os(o),a[i].c(),a[i].m(e,t))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},d(b){b&&N(e),Mt(a,b)}}}function ea(r){let e,t=Ue(r[5]),n=[];for(let a=0;a<t.length;a+=1)n[a]=as(Qi(r,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=It()},m(a,b){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(a,b);U(a,e,b)},p(a,b){if(b[0]&16416){t=Ue(a[5]);let d;for(d=0;d<t.length;d+=1){const i=Qi(a,t,d);n[d]?n[d].p(i,b):(n[d]=as(i),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=t.length}},d(a){a&&N(e),Mt(n,a)}}}function ta(r){let e;return{c(){e=C("div"),e.textContent="暂无历史",s(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function as(r){let e,t=r[31]+"",n,a,b,d;function i(){return r[27](r[31])}return{c(){e=C("button"),n=G(t),a=A(),s(e,"type","button"),s(e,"class","w-full text-left mb-1 px-2 py-1.5 rounded text-xs bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200")},m(o,u){U(o,e,u),l(e,n),l(e,a),b||(d=Y(e,"click",i),b=!0)},p(o,u){r=o,u[0]&32&&t!==(t=r[31]+"")&&he(n,t)},d(o){o&&N(e),b=!1,d()}}}function ra(r){var ie,ce;let e,t,n,a,b=(r[10]||"表数据")+"",d,i,o,u=r[9]?`${r[9]} · `:"",m,f,g,v,k,y=r[2]?"执行中...":"执行",c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P=(((ce=(ie=r[0])==null?void 0:ie.rows)==null?void 0:ce.length)||0)+"",H,z,$,V=r[3]&&rs(r),X=r[4]&&is(r);function Z(fe,ge){var pe,ye;return(ye=(pe=fe[0])==null?void 0:pe.columns)!=null&&ye.length?$l:Ql}let F=Z(r),T=F(r);function Q(fe,ge){return fe[5].length===0?ta:ea}let q=Q(r),ne=q(r);return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("div"),d=G(b),i=A(),o=C("div"),m=G(u),f=G("默认查询 LIMIT 100"),g=A(),v=C("div"),k=C("button"),c=G(y),p=A(),h=C("button"),h.textContent="清空",_=A(),w=C("button"),w.textContent="重置100条",L=A(),x=C("div"),E=C("textarea"),S=A(),V&&V.c(),D=A(),X&&X.c(),B=A(),O=C("div"),I=C("div"),T.c(),R=A(),j=C("aside"),K=C("div"),K.textContent="查询历史",J=A(),ne.c(),te=A(),W=C("div"),M=G("行数："),H=G(P),s(a,"class","text-sm font-semibold text-gray-900 dark:text-white truncate"),s(o,"class","text-xs text-gray-500 dark:text-gray-400"),s(n,"class","min-w-0"),s(k,"class","px-3 py-1.5 text-xs rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50"),k.disabled=r[2],s(h,"class","px-3 py-1.5 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"),s(w,"class","px-3 py-1.5 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"),s(v,"class","flex items-center gap-2"),s(t,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3"),s(E,"class","w-full h-28 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm font-mono px-3 py-2 text-gray-900 dark:text-gray-100"),s(E,"placeholder","输入 SQL，Ctrl+Enter 执行"),s(x,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40"),s(I,"class","flex-1 min-w-0 overflow-auto"),s(K,"class","text-xs font-semibold text-gray-600 dark:text-gray-300 mb-2"),s(j,"class","w-64 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-3 hidden lg:block"),s(O,"class","flex-1 min-h-0 flex"),s(W,"class","px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(fe,ge){U(fe,e,ge),l(e,t),l(t,n),l(n,a),l(a,d),l(n,i),l(n,o),l(o,m),l(o,f),l(t,g),l(t,v),l(v,k),l(k,c),l(v,p),l(v,h),l(v,_),l(v,w),l(e,L),l(e,x),l(x,E),Me(E,r[1]),l(e,S),V&&V.m(e,null),l(e,D),X&&X.m(e,null),l(e,B),l(e,O),l(O,I),T.m(I,null),l(O,R),l(O,j),l(j,K),l(j,J),ne.m(j,null),l(e,te),l(e,W),l(W,M),l(W,H),z||($=[Y(k,"click",r[12]),Y(h,"click",r[13]),Y(w,"click",r[15]),Y(E,"input",r[24]),Y(E,"keydown",r[25])],z=!0)},p(fe,ge){var pe,ye;ge[0]&1024&&b!==(b=(fe[10]||"表数据")+"")&&he(d,b),ge[0]&512&&u!==(u=fe[9]?`${fe[9]} · `:"")&&he(m,u),ge[0]&4&&y!==(y=fe[2]?"执行中...":"执行")&&he(c,y),ge[0]&4&&(k.disabled=fe[2]),ge[0]&2&&Me(E,fe[1]),fe[3]?V?V.p(fe,ge):(V=rs(fe),V.c(),V.m(e,D)):V&&(V.d(1),V=null),fe[4]?X?X.p(fe,ge):(X=is(fe),X.c(),X.m(e,B)):X&&(X.d(1),X=null),F===(F=Z(fe))&&T?T.p(fe,ge):(T.d(1),T=F(fe),T&&(T.c(),T.m(I,null))),q===(q=Q(fe))&&ne?ne.p(fe,ge):(ne.d(1),ne=q(fe),ne&&(ne.c(),ne.m(j,null))),ge[0]&1&&P!==(P=(((ye=(pe=fe[0])==null?void 0:pe.rows)==null?void 0:ye.length)||0)+"")&&he(H,P)},i:Oe,o:Oe,d(fe){fe&&N(e),V&&V.d(),X&&X.d(),T.d(),ne.d(),z=!1,et($)}}}const ia=50;function sa(r){return/\border\s+by\b/i.test(r)}function cs(r){if(r==null||r==="")return null;if(typeof r=="number")return r;const e=String(r).trim();if(!e)return null;const t=Number(e);if(!Number.isNaN(t)&&/^[-+]?\d+(\.\d+)?$/.test(e))return t;const n=Date.parse(e);return!Number.isNaN(n)&&/[-/:T]/.test(e)?n:e.toLowerCase()}function na(r,e){return r===null&&e===null?0:r===null?1:e===null?-1:typeof r=="number"&&typeof e=="number"?r-e:String(r).localeCompare(String(e),void 0,{numeric:!0,sensitivity:"base"})}function oa(r,e,t){let n,a,b,d,i,o,u,m,{sessionId:f=null}=e,{dbConfig:g=null}=e,{databaseName:v=""}=e,{tableName:k=""}=e,y="",c=null,p=!1,h="",_="",w=[],L={key:"",direction:"desc"};function x(){return k?v?`${v}.${k}`:k:""}function E(){const W=x();return W?`SELECT * FROM ${W} LIMIT 100;`:""}function S(W){const M=W.trim();M&&t(5,w=[M,...w.filter(P=>P!==M)].slice(0,ia))}function D(W){if(L.key===W){t(20,L={key:L.key,direction:L.direction==="asc"?"desc":"asc"});return}t(20,L={key:W,direction:"desc"})}async function B(){var W;if(y.trim()&&!(!window.wailsBindings||!f)){t(2,p=!0),t(3,h=""),t(4,_="");try{const M=y.trim(),P=await window.wailsBindings.ExecuteDatabaseQuery(f,M),H=JSON.parse(P);t(0,c=H),S(M),((W=H==null?void 0:H.rows)==null?void 0:W.length)>0&&!sa(M)&&/^\s*select\b/i.test(M)&&t(4,_="提示：当前查询未包含 ORDER BY，结果行顺序可能不稳定。")}catch(M){console.error("Query execution failed:",M),t(3,h=`查询执行失败: ${M.message||"未知错误"}`)}finally{t(2,p=!1)}}}function O(){t(1,y=""),t(0,c=null),t(3,h=""),t(4,_="")}function I(W){t(1,y=W)}async function R(){t(1,y=E()),y&&await B()}ar(async()=>{await R()});function j(){y=this.value,t(1,y)}const K=W=>{W.ctrlKey&&W.key==="Enter"&&(W.preventDefault(),B())},J=W=>D(W),te=W=>I(W);return r.$$set=W=>{"sessionId"in W&&t(16,f=W.sessionId),"dbConfig"in W&&t(17,g=W.dbConfig),"databaseName"in W&&t(18,v=W.databaseName),"tableName"in W&&t(19,k=W.tableName)},r.$$.update=()=>{var W,M;r.$$.dirty[0]&131072&&t(9,a=(W=g==null?void 0:g.metadata)!=null&&W.db_type?g.metadata.db_type.toUpperCase():""),r.$$.dirty[0]&1048576&&t(23,b=L.key),r.$$.dirty[0]&1048576&&t(21,d=L.direction),r.$$.dirty[0]&8388609&&t(22,i=((M=c==null?void 0:c.columns)==null?void 0:M.findIndex(P=>P===b))??-1),r.$$.dirty[0]&6291457&&t(8,o=c!=null&&c.rows?i<0?c.rows:c.rows.slice().sort((P,H)=>{const z=cs(P==null?void 0:P[i]),$=cs(H==null?void 0:H[i]),V=na(z,$);return d==="asc"?V:-V}):[]),r.$$.dirty[0]&1048576&&t(7,u=L.key),r.$$.dirty[0]&1048576&&t(6,m=L.direction)},t(10,n=x()),[c,y,p,h,_,w,m,u,o,a,n,D,B,O,I,R,f,g,v,k,L,d,i,b,j,K,J,te]}class la extends Et{constructor(e){super(),xt(this,e,oa,ra,Ct,{sessionId:16,dbConfig:17,databaseName:18,tableName:19},null,[-1,-1])}}function aa(r){window.runtime.LogPrint(r)}function ca(r){window.runtime.LogTrace(r)}function da(r){window.runtime.LogDebug(r)}function ha(r){window.runtime.LogInfo(r)}function ua(r){window.runtime.LogWarning(r)}function fa(r){window.runtime.LogError(r)}function pa(r){window.runtime.LogFatal(r)}function Jr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function Lr(r,e){return Jr(r,e,-1)}function _a(r,...e){return window.runtime.EventsOff(r,...e)}function ga(){return window.runtime.EventsOffAll()}function ma(r,e){return Jr(r,e,1)}function ba(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function va(){window.runtime.WindowReload()}function ya(){window.runtime.WindowReloadApp()}function wa(r){window.runtime.WindowSetAlwaysOnTop(r)}function ka(){window.runtime.WindowSetSystemDefaultTheme()}function Sa(){window.runtime.WindowSetLightTheme()}function Ca(){window.runtime.WindowSetDarkTheme()}function xa(){window.runtime.WindowCenter()}function Ea(r){window.runtime.WindowSetTitle(r)}function La(){window.runtime.WindowFullscreen()}function Da(){window.runtime.WindowUnfullscreen()}function Ma(){return window.runtime.WindowIsFullscreen()}function Ta(){return window.runtime.WindowGetSize()}function Ba(r,e){window.runtime.WindowSetSize(r,e)}function Aa(r,e){window.runtime.WindowSetMaxSize(r,e)}function Ra(r,e){window.runtime.WindowSetMinSize(r,e)}function Oa(r,e){window.runtime.WindowSetPosition(r,e)}function Pa(){return window.runtime.WindowGetPosition()}function Ia(){window.runtime.WindowHide()}function Ha(){window.runtime.WindowShow()}function Fa(){window.runtime.WindowMaximise()}function za(){window.runtime.WindowToggleMaximise()}function ja(){window.runtime.WindowUnmaximise()}function Wa(){return window.runtime.WindowIsMaximised()}function Na(){window.runtime.WindowMinimise()}function Ua(){window.runtime.WindowUnminimise()}function Va(r,e,t,n){window.runtime.WindowSetBackgroundColour(r,e,t,n)}function Ka(){return window.runtime.ScreenGetAll()}function qa(){return window.runtime.WindowIsMinimised()}function Ga(){return window.runtime.WindowIsNormal()}function Ja(r){window.runtime.BrowserOpenURL(r)}function Ya(){return window.runtime.Environment()}function Xa(){window.runtime.Quit()}function Za(){window.runtime.Hide()}function Qa(){window.runtime.Show()}function $a(){return window.runtime.ClipboardGetText()}function ec(r){return window.runtime.ClipboardSetText(r)}function tc(r,e){return window.runtime.OnFileDrop(r,e)}function rc(){return window.runtime.OnFileDropOff()}function ic(){return window.runtime.CanResolveFilePaths()}function sc(r){return window.runtime.ResolveFilePaths(r)}const lo=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:Ja,CanResolveFilePaths:ic,ClipboardGetText:$a,ClipboardSetText:ec,Environment:Ya,EventsEmit:ba,EventsOff:_a,EventsOffAll:ga,EventsOn:Lr,EventsOnMultiple:Jr,EventsOnce:ma,Hide:Za,LogDebug:da,LogError:fa,LogFatal:pa,LogInfo:ha,LogPrint:aa,LogTrace:ca,LogWarning:ua,OnFileDrop:tc,OnFileDropOff:rc,Quit:Xa,ResolveFilePaths:sc,ScreenGetAll:Ka,Show:Qa,WindowCenter:xa,WindowFullscreen:La,WindowGetPosition:Pa,WindowGetSize:Ta,WindowHide:Ia,WindowIsFullscreen:Ma,WindowIsMaximised:Wa,WindowIsMinimised:qa,WindowIsNormal:Ga,WindowMaximise:Fa,WindowMinimise:Na,WindowReload:va,WindowReloadApp:ya,WindowSetAlwaysOnTop:wa,WindowSetBackgroundColour:Va,WindowSetDarkTheme:Ca,WindowSetLightTheme:Sa,WindowSetMaxSize:Aa,WindowSetMinSize:Ra,WindowSetPosition:Oa,WindowSetSize:Ba,WindowSetSystemDefaultTheme:ka,WindowSetTitle:Ea,WindowShow:Ha,WindowToggleMaximise:za,WindowUnfullscreen:Da,WindowUnmaximise:ja,WindowUnminimise:Ua},Symbol.toStringTag,{value:"Module"})),{Map:ao}=Zn;function ds(r,e,t){const n=r.slice();return n[70]=e[t],n[71]=e,n[72]=t,n}function hs(r,e,t){const n=r.slice();return n[70]=e[t],n}function nc(r){let e=[],t=new ao,n,a=Ue(r[1]);const b=d=>d[70].sessionId;for(let d=0;d<a.length;d+=1){let i=hs(r,a,d),o=b(i);t.set(o,e[d]=us(o,i))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();n=It()},m(d,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(d,i);U(d,n,i)},p(d,i){i[0]&1930297346&&(a=Ue(d[1]),e=Jt(e,i,b,1,d,a,t,n.parentNode,Xt,us,n,hs))},d(d){d&&N(n);for(let i=0;i<e.length;i+=1)e[i].d(d)}}}function oc(r){let e;return{c(){e=C("div"),e.textContent="没有活动连接",s(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function lc(r){let e,t=(r[70].tabName||r[70].connection.name)+"",n;return{c(){e=C("span"),n=G(t),s(e,"class","text-sm font-medium truncate flex-1")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&2&&t!==(t=(a[70].tabName||a[70].connection.name)+"")&&he(n,t)},d(a){a&&N(e)}}}function ac(r){let e,t,n;return{c(){e=C("input"),s(e,"type","text"),s(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),s(e,"focus","")},m(a,b){U(a,e,b),Me(e,r[18]),t||(n=[Y(e,"input",r[41]),Y(e,"blur",r[29]),Y(e,"keydown",r[30])],t=!0)},p(a,b){b[0]&262144&&e.value!==a[18]&&Me(e,a[18])},d(a){a&&N(e),t=!1,et(n)}}}function us(r,e){let t,n,a,b,d,i,o,u,m,f;function g(_,w){return _[17]===_[70].sessionId?ac:lc}let v=g(e),k=v(e);function y(..._){return e[42](e[70],..._)}function c(){return e[43](e[70])}function p(){return e[44](e[70])}function h(..._){return e[45](e[70],..._)}return{key:r,first:null,c(){t=C("div"),n=C("div"),b=A(),k.c(),d=A(),i=C("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=A(),s(n,"class",a=ii(`w-2 h-2 rounded-full flex-shrink-0 ${e[70].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),s(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),s(t,"class",u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[19]===e[70].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 accent-border":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),s(t,"role","button"),s(t,"tabindex","0"),this.first=t},m(_,w){U(_,t,w),l(t,n),l(t,b),k.m(t,null),l(t,d),l(t,i),l(t,o),m||(f=[Y(i,"click",y),Y(t,"click",c),Y(t,"dblclick",p),Y(t,"keydown",h)],m=!0)},p(_,w){e=_,w[0]&2&&a!==(a=ii(`w-2 h-2 rounded-full flex-shrink-0 ${e[70].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&s(n,"class",a),v===(v=g(e))&&k?k.p(e,w):(k.d(1),k=v(e),k&&(k.c(),k.m(t,d))),w[0]&524290&&u!==(u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[19]===e[70].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 accent-border":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&s(t,"class",u)},d(_){_&&N(t),k.d(),m=!1,et(f)}}}function cc(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',s(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,n){U(t,e,n)},p:Oe,i:Oe,o:Oe,d(t){t&&N(e)}}}function dc(r){let e,t=[],n=new ao,a,b=Ue(r[1]);const d=i=>i[70].sessionId;for(let i=0;i<b.length;i+=1){let o=ds(r,b,i),u=d(o);n.set(u,t[i]=fs(u,o))}return{c(){e=C("div");for(let i=0;i<t.length;i+=1)t[i].c();s(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,o){U(i,e,o);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);a=!0},p(i,o){o[0]&524291|o[1]&56&&(b=Ue(i[1]),Wt(),t=Jt(t,o,d,1,i,b,n,e,Fo,fs,null,ds),Nt())},i(i){if(!a){for(let o=0;o<b.length;o+=1)Ge(t[o]);a=!0}},o(i){for(let o=0;o<t.length;o+=1)Ze(t[o]);a=!1},d(i){i&&N(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function hc(r){let e=r[70].connection.username+"",t,n,a=r[70].connection.host+"",b,d,i=r[70].connection.port+"",o;return{c(){t=G(e),n=G("@"),b=G(a),d=G(":"),o=G(i)},m(u,m){U(u,t,m),U(u,n,m),U(u,b,m),U(u,d,m),U(u,o,m)},p(u,m){m[0]&2&&e!==(e=u[70].connection.username+"")&&he(t,e),m[0]&2&&a!==(a=u[70].connection.host+"")&&he(b,a),m[0]&2&&i!==(i=u[70].connection.port+"")&&he(o,i)},d(u){u&&(N(t),N(n),N(b),N(d),N(o))}}}function uc(r){let e,t=r[70].databaseName?`${r[70].databaseName}.`:"",n,a=r[70].tableName+"",b;return{c(){e=G("表数据 · "),n=G(t),b=G(a)},m(d,i){U(d,e,i),U(d,n,i),U(d,b,i)},p(d,i){i[0]&2&&t!==(t=d[70].databaseName?`${d[70].databaseName}.`:"")&&he(n,t),i[0]&2&&a!==(a=d[70].tableName+"")&&he(b,a)},d(d){d&&(N(e),N(n),N(b))}}}function fc(r){let e,t=r[70].connection.name+"",n;return{c(){e=G("数据库列表 · "),n=G(t)},m(a,b){U(a,e,b),U(a,n,b)},p(a,b){b[0]&2&&t!==(t=a[70].connection.name+"")&&he(n,t)},d(a){a&&(N(e),N(n))}}}function pc(r){let e,t=r[70].connection.name!=="Local Shell"?` (${r[70].connection.name})`:"",n;return{c(){e=G("本地终端"),n=G(t)},m(a,b){U(a,e,b),U(a,n,b)},p(a,b){b[0]&2&&t!==(t=a[70].connection.name!=="Local Shell"?` (${a[70].connection.name})`:"")&&he(n,t)},d(a){a&&(N(e),N(n))}}}function _c(r){let e,t=r[70],n;const a=()=>r[46](e,t),b=()=>r[46](null,t);let d={sessionId:r[70].sessionId,onData:r[34],onResize:r[36],onZModemTransfer:r[35]};return e=new Hl({props:d}),a(),{c(){ct(e.$$.fragment)},m(i,o){lt(e,i,o),n=!0},p(i,o){t!==i[70]&&(b(),t=i[70],a());const u={};o[0]&2&&(u.sessionId=i[70].sessionId),e.$set(u)},i(i){n||(Ge(e.$$.fragment,i),n=!0)},o(i){Ze(e.$$.fragment,i),n=!1},d(i){b(),at(e,i)}}}function gc(r){let e,t;return e=new la({props:{sessionId:r[70].dbSessionId,dbConfig:r[70].connection,databaseName:r[70].databaseName,tableName:r[70].tableName}}),{c(){ct(e.$$.fragment)},m(n,a){lt(e,n,a),t=!0},p(n,a){const b={};a[0]&2&&(b.sessionId=n[70].dbSessionId),a[0]&2&&(b.dbConfig=n[70].connection),a[0]&2&&(b.databaseName=n[70].databaseName),a[0]&2&&(b.tableName=n[70].tableName),e.$set(b)},i(n){t||(Ge(e.$$.fragment,n),t=!0)},o(n){Ze(e.$$.fragment,n),t=!1},d(n){at(e,n)}}}function mc(r){let e,t;return e=new Zl({props:{sessionId:r[70].sessionId,dbConfig:r[70].connection}}),{c(){ct(e.$$.fragment)},m(n,a){lt(e,n,a),t=!0},p(n,a){const b={};a[0]&2&&(b.sessionId=n[70].sessionId),a[0]&2&&(b.dbConfig=n[70].connection),e.$set(b)},i(n){t||(Ge(e.$$.fragment,n),t=!0)},o(n){Ze(e.$$.fragment,n),t=!1},d(n){at(e,n)}}}function fs(r,e){let t,n,a,b,d,i,o,u,m,f,g,v;function k(w,L){return w[70].type==="local"?pc:w[70].type==="database"&&w[70].panelType==="database-list"?fc:w[70].type==="database"&&w[70].panelType==="database-table"?uc:hc}let y=k(e),c=y(e);const p=[mc,gc,_c],h=[];function _(w,L){return w[70].type==="database"&&w[70].panelType==="database-list"?0:w[70].type==="database"&&w[70].panelType==="database-table"?1:2}return u=_(e),m=h[u]=p[u](e),{key:r,first:null,c(){t=C("div"),n=C("div"),a=C("div"),c.c(),b=A(),d=C("div"),d.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=A(),o=C("div"),m.c(),f=A(),s(a,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),s(d,"class","flex items-center gap-1"),s(n,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),s(o,"class","flex-1 overflow-hidden"),s(t,"class",g="terminal-wrapper "+(e[19]===e[70].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(w,L){U(w,t,L),l(t,n),l(n,a),c.m(a,null),l(n,b),l(n,d),l(t,i),l(t,o),h[u].m(o,null),l(t,f),v=!0},p(w,L){e=w,y===(y=k(e))&&c?c.p(e,L):(c.d(1),c=y(e),c&&(c.c(),c.m(a,null)));let x=u;u=_(e),u===x?h[u].p(e,L):(Wt(),Ze(h[x],1,1,()=>{h[x]=null}),Nt(),m=h[u],m?m.p(e,L):(m=h[u]=p[u](e),m.c()),Ge(m,1),m.m(o,null)),(!v||L[0]&524290&&g!==(g="terminal-wrapper "+(e[19]===e[70].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&s(t,"class",g)},i(w){v||(Ge(m),v=!0)},o(w){Ze(m),v=!1},d(w){w&&N(t),c.d(),h[u].d()}}}function ps(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x;return w=Oo(r[51][0]),{c(){e=C("div"),t=C("div"),n=C("div"),n.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',a=A(),b=C("div"),d=C("label"),i=C("input"),o=A(),u=C("div"),u.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',m=A(),f=C("label"),g=C("input"),v=A(),k=C("div"),k.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',y=A(),c=C("div"),p=C("button"),p.textContent="取消",h=A(),_=C("button"),_.textContent="确定",s(n,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),s(i,"type","radio"),i.__value="powershell",Me(i,i.__value),s(i,"class","w-4 h-4 accent-text"),s(d,"class","flex items-center space-x-3 cursor-pointer"),s(g,"type","radio"),g.__value="cmd",Me(g,g.__value),s(g,"class","w-4 h-4 accent-text"),s(f,"class","flex items-center space-x-3 cursor-pointer"),s(b,"class","px-6 py-4 space-y-3"),s(p,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),s(_,"class","px-4 py-2 accent-bg accent-bg-hover text-white rounded-lg transition-colors font-medium focus-visible:outline-none focus-visible:ring-2"),s(c,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),s(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),s(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),w.p(i,g)},m(E,S){U(E,e,S),l(e,t),l(t,n),l(t,a),l(t,b),l(b,d),l(d,i),i.checked=i.__value===r[13],l(d,o),l(d,u),l(b,m),l(b,f),l(f,g),g.checked=g.__value===r[13],l(f,v),l(f,k),l(t,y),l(t,c),l(c,p),l(c,h),l(c,_),L||(x=[Y(i,"change",r[50]),Y(g,"change",r[52]),Y(p,"click",r[33]),Y(_,"click",r[32])],L=!0)},p(E,S){S[0]&8192&&(i.checked=i.__value===E[13]),S[0]&8192&&(g.checked=g.__value===E[13])},d(E){E&&N(e),w.r(),L=!1,et(x)}}}function bc(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L;function x(M,P){return M[1].length===0?oc:nc}let E=x(r),S=E(r);const D=[dc,cc],B=[];function O(M,P){return M[1].length>0?0:1}d=O(r),i=B[d]=D[d](r);function I(M){r[47](M)}let R={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[26],onCancel:r[27]};r[2]!==void 0&&(R.isOpen=r[2]),u=new hr({props:R}),gt.push(()=>St(u,"isOpen",I));function j(M){r[48](M)}let K={title:r[14],message:r[15],type:r[16],confirmText:"确定",cancelText:"取消",onConfirm:r[22],onCancel:r[23]};r[11]!==void 0&&(K.isOpen=r[11]),g=new hr({props:K}),gt.push(()=>St(g,"isOpen",j));function J(M){r[49](M)}let te={title:r[4],message:r[5],placeholder:r[6],defaultValue:r[7],inputType:r[8],allowEmpty:r[9],trimValue:r[10],confirmText:"确定",cancelText:"取消",onConfirm:r[20],onCancel:r[21]};r[3]!==void 0&&(te.isOpen=r[3]),y=new br({props:te}),gt.push(()=>St(y,"isOpen",J));let W=r[12]&&ps(r);return{c(){e=C("div"),t=C("div"),S.c(),n=A(),a=C("button"),a.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',b=A(),i.c(),o=A(),ct(u.$$.fragment),f=A(),ct(g.$$.fragment),k=A(),ct(y.$$.fragment),p=A(),W&&W.c(),h=It(),s(a,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),s(a,"title","打开本地终端"),s(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(M,P){U(M,e,P),l(e,t),S.m(t,null),l(t,n),l(t,a),l(e,b),B[d].m(e,null),U(M,o,P),lt(u,M,P),U(M,f,P),lt(g,M,P),U(M,k,P),lt(y,M,P),U(M,p,P),W&&W.m(M,P),U(M,h,P),_=!0,w||(L=Y(a,"click",r[31]),w=!0)},p(M,P){E===(E=x(M))&&S?S.p(M,P):(S.d(1),S=E(M),S&&(S.c(),S.m(t,n)));let H=d;d=O(M),d===H?B[d].p(M,P):(Wt(),Ze(B[H],1,1,()=>{B[H]=null}),Nt(),i=B[d],i?i.p(M,P):(i=B[d]=D[d](M),i.c()),Ge(i,1),i.m(e,null));const z={};!m&&P[0]&4&&(m=!0,z.isOpen=M[2],kt(()=>m=!1)),u.$set(z);const $={};P[0]&16384&&($.title=M[14]),P[0]&32768&&($.message=M[15]),P[0]&65536&&($.type=M[16]),!v&&P[0]&2048&&(v=!0,$.isOpen=M[11],kt(()=>v=!1)),g.$set($);const V={};P[0]&16&&(V.title=M[4]),P[0]&32&&(V.message=M[5]),P[0]&64&&(V.placeholder=M[6]),P[0]&128&&(V.defaultValue=M[7]),P[0]&256&&(V.inputType=M[8]),P[0]&512&&(V.allowEmpty=M[9]),P[0]&1024&&(V.trimValue=M[10]),!c&&P[0]&8&&(c=!0,V.isOpen=M[3],kt(()=>c=!1)),y.$set(V),M[12]?W?W.p(M,P):(W=ps(M),W.c(),W.m(h.parentNode,h)):W&&(W.d(1),W=null)},i(M){_||(Ge(i),Ge(u.$$.fragment,M),Ge(g.$$.fragment,M),Ge(y.$$.fragment,M),_=!0)},o(M){Ze(i),Ze(u.$$.fragment,M),Ze(g.$$.fragment,M),Ze(y.$$.fragment,M),_=!1},d(M){M&&(N(e),N(o),N(f),N(k),N(p),N(h)),S.d(),B[d].d(),at(u,M),at(g,M),at(y,M),W&&W.d(M),w=!1,L()}}}function vc(r,e){return{sessionId:e,connection:r,connected:!0,createdAt:Date.now(),lastActivity:Date.now(),type:"database",panelType:"database-list",dbSessionId:e,tabName:`${r.name} · 数据库`}}function yc(r,e,t){return`dbtable_${r}_${e||"__default__"}_${t}`}function wc(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r,0),t.set(e,r.length),t}function kc(r){const e=[27,93,55,59];let t=-1;for(let a=r.length-e.length;a>=0;a--)if(r[a]===e[0]&&r[a+1]===e[1]&&r[a+2]===e[2]&&r[a+3]===e[3]){t=a;break}return t===-1?r.slice(Math.max(0,r.length-(e.length-1))):Sc(r,t+e.length)===-1?r.slice(t):r.slice(Math.max(0,r.length-(e.length-1)))}function Sc(r,e){for(let t=e;t<r.length;t++)if(r[t]===7||r[t]===27&&t+1<r.length&&r[t+1]===92)return t;return-1}function Cc(r){const e=[],t=[27,93,55,59];let n=0;for(;n<=r.length-t.length;){if(r[n]===t[0]&&r[n+1]===t[1]&&r[n+2]===t[2]&&r[n+3]===t[3]){n+=t.length;const a=n;let b=-1;for(;n<r.length;){if(r[n]===7){b=n,n+=1;break}if(r[n]===27&&n+1<r.length&&r[n+1]===92){b=n,n+=2;break}n+=1}if(b>a){const d=xc(r.slice(a,b)),i=Ec(d);i&&e.push(i)}continue}n+=1}return e}function xc(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Ec(r){if(!r)return"";let e=r;if(e.startsWith("file://")){e=e.slice(7);const t=e.indexOf("/");if(t===-1)return"/";e=e.slice(t)}else e.startsWith("file:")&&(e=e.slice(5));try{e=decodeURIComponent(e)}catch{return e}return e}function qr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function _s(r){return btoa(qr(r))}function Lc(r,e,t){let n,a;Pt(r,Vt,re=>t(19,n=re)),Pt(r,Kt,re=>t(40,a=re));let b={},d=[],i=new Map,o=new Map,u=null,m=!1,f=null,g=!1,v="",k="",y="",c="",p="text",h=!1,_=!0,w=null,L=!1,x=null,E=!1,S="powershell";function D(re,ve){re&&Yt.update(we=>we.map(Be=>Be.dbSessionId===re?{...Be,dbConnected:ve,dbSessionId:null}:Be))}function B({asset:re,sessionId:ve}){if(!re||!ve)return;if(a.get(ve)){Vt.set(ve);return}const Be=vc(re,ve);Kt.update(Fe=>(Fe.set(ve,Be),Fe)),Vt.set(ve)}function O({sessionId:re,databaseName:ve,tableName:we}){if(!re||!we)return;const Be=a.get(re);if(!Be)return;const Fe=yc(re,ve,we);if(a.get(Fe)){Vt.set(Fe);return}const Ne=ve?`${ve}.`:"",be={sessionId:Fe,connection:Be.connection,connected:!0,createdAt:Date.now(),lastActivity:Date.now(),type:"database",panelType:"database-table",dbSessionId:re,databaseName:ve,tableName:we,tabName:`${Ne}${we}`};Kt.update(dt=>(dt.set(Fe,be),dt)),Vt.set(Fe)}async function I(re){var le;if(console.log("Connecting to:",re),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:ve,GetPassword:we,HasPassword:Be,SavePassword:Fe}=window.wailsBindings;if(typeof ve!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let Ae="",Ne="";if(re.auth_type==="key"){if(Ne=await R({title:`连接到 ${re.name}`,message:"如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：",placeholder:"Passphrase（可留空）",inputType:"password",allowEmpty:!0,trimValue:!1}),Ne===null)return;Ae=re.key_path||""}else try{if(typeof Be=="function"&&await Be(re.id))Ae=await we(re.id),console.log("Using saved password");else{if(Ae=await R({title:`连接到 ${re.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Ae===null)return;if(Ae&&await J("保存密码","是否保存密码以便下次自动连接？","warning")&&typeof Fe=="function")try{await Fe(re.id,Ae),console.log("Password saved successfully")}catch(Pe){console.error("Failed to save password:",Pe)}}}catch(De){if(console.error("Failed to get saved password:",De),Ae=await R({title:`连接到 ${re.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Ae===null)return}if(!Ae){console.log("Connection cancelled - no auth value provided");return}const be=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",re.host,re.port,re.username,"auth_type:",re.auth_type);const dt={sessionId:be,connection:re,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};Kt.update(De=>(De.set(be,dt),De)),Vt.set(be),await Rr(),await new Promise(De=>setTimeout(De,50));let rt=(le=b[be])==null?void 0:le.getSize();if(rt||(rt={cols:80,rows:24},console.warn("Terminal not ready, using default size:",rt)),console.log("Subscribing to events for session:",be),ue(be),await new Promise(De=>setTimeout(De,100)),!b[be]){console.error("Terminal component not ready after delay");return}const Ye=b[be];if(!Ye){console.error("Failed to get terminal reference for session:",be);return}console.log("Terminal ready, attempting to connect...");const ee=re.auth_type==="key"?"SSH key":"password";Ye.writeln(`正在连接 ${re.username}@${re.host}:${re.port} (${ee})...`),Ye.writeln("");try{await ve(be,re.host,re.port,re.username,re.auth_type||"password",Ae,Ne,rt.cols,rt.rows),dt.connected=!0,Kt.update(De=>(De.set(be,dt),De)),setTimeout(()=>{Ye.focus()},100)}catch(De){console.error("Failed to connect:",De),Ye&&Ye.writeln(`\r
连接失败: ${De.message||De}`),await z(be)}}function R({title:re,message:ve,placeholder:we,defaultValue:Be,inputType:Fe,allowEmpty:Ae,trimValue:Ne}){return new Promise(be=>{t(4,v=re||""),t(5,k=ve||""),t(6,y=we||""),t(7,c=Be||""),t(8,p=Fe),t(9,h=!!Ae),t(10,_=Ne!==!1),w=be,t(3,g=!0)})}function j(re){t(3,g=!1),w&&(w(re),w=null)}function K(){t(3,g=!1),w&&(w(null),w=null)}function J(re,ve,we="default"){return new Promise(Be=>{t(14,te=re),t(15,W=ve),t(16,M=we),x=Be,t(11,L=!0)})}let te="",W="",M="default";function P(){t(11,L=!1),x&&(x(!0),x=null)}function H(){t(11,L=!1),x&&(x(!1),x=null)}async function z(re){const ve=a.get(re),we=(ve==null?void 0:ve.type)==="database"&&(ve==null?void 0:ve.panelType)==="database-list",Be=(ve==null?void 0:ve.type)==="database"&&(ve==null?void 0:ve.panelType)==="database-table",Fe=i.get(re);if(Fe&&(Fe(),i.delete(re)),delete b[re],we){const{CloseDatabase:Ne}=window.wailsBindings||{};if(typeof Ne=="function")try{await Ne(re)}catch(be){console.error("Failed to close database session:",be)}D(re,!1)}else if(!Be){const{CloseSSH:Ne}=window.wailsBindings||{};if(typeof Ne=="function")try{await Ne(re)}catch(be){console.error("Failed to close session:",be)}}Kt.update(Ne=>(Ne.delete(re),we&&Array.from(Ne.entries()).filter(([dt,rt])=>(rt==null?void 0:rt.type)==="database"&&(rt==null?void 0:rt.dbSessionId)===re).map(([dt])=>dt).forEach(dt=>Ne.delete(dt)),Ne));const Ae=Array.from(a.keys());n===re&&(Ae.length>0?Vt.set(Ae[0]):Vt.set(null))}function $(re){a.has(re)&&(Vt.set(re),setTimeout(()=>{const ve=b[re];if(ve){ve.focus();const we=ve.getSize(),{ResizeSSH:Be}=window.wailsBindings||{};typeof Be=="function"&&Be(re,we.cols,we.rows).catch(console.error)}},50))}function V(re,ve){ve.stopPropagation();const we=a.get(re);we&&(we.type!=="database"&&we.connected?(f=re,t(2,m=!0)):z(re))}function X(){f&&(z(f),f=null),t(2,m=!1)}function Z(){f=null,t(2,m=!1)}function F(re,ve){const we=a.get(re);we&&(we.tabName=ve.trim(),Kt.update(Be=>(Be.set(re,we),Be)))}let T=null,Q="";function q(re){const ve=a.get(re);ve&&(t(17,T=re),t(18,Q=ve.tabName||ve.connection.name))}function ne(){T&&Q.trim()&&F(T,Q.trim()),t(17,T=null),t(18,Q="")}function ie(){t(17,T=null),t(18,Q="")}function ce(re){re.key==="Enter"?ne():re.key==="Escape"&&ie()}async function fe(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:re,SendSSHData:ve,ResizeSSH:we}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(12,E=!0);return}await ge("")}async function ge(re){var Ne;const{ConnectLocalShell:ve}=window.wailsBindings,we=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Be={sessionId:we,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};Kt.update(be=>(be.set(we,Be),be)),Vt.set(we),await Rr(),await new Promise(be=>setTimeout(be,50));let Fe=(Ne=b[we])==null?void 0:Ne.getSize();if(Fe||(Fe={cols:80,rows:24},console.warn("Terminal not ready, using default size:",Fe)),console.log("Subscribing to local events for session:",we),Ke(we),await new Promise(be=>setTimeout(be,100)),!b[we]){console.error("Terminal component not ready after delay");return}const Ae=b[we];if(!Ae){console.error("Failed to get terminal reference for session:",we);return}console.log("Terminal ready, starting local shell..."),Ae.writeln(`正在启动本地终端${re?` (${re})`:""}...`),Ae.writeln("");try{await ve(we,re,Fe.cols,Fe.rows),Be.connected=!0,Kt.update(be=>(be.set(we,Be),be)),setTimeout(()=>{Ae.focus()},100)}catch(be){console.error("Failed to start local shell:",be),Ae&&Ae.writeln(`\r
启动本地终端失败: ${be.message||be}`),await z(we)}}function pe(){t(12,E=!1),ge(S)}function ye(){t(12,E=!1)}function Ke(re){const ve=`local:output:${re}`,we=Lr(ve,Be=>{const Fe=b[re];if(Fe){const Ae=atob(Be),Ne=new Uint8Array(Ae.length);for(let be=0;be<Ae.length;be++)Ne[be]=Ae.charCodeAt(be);Le(re,Ne,!0),Fe.write(Ne)}});i.set(re,we)}function Le(re,ve,we){if(!re||!ve||ve.length===0||we)return;const{paths:Be,pending:Fe}=Se(re,ve);if(o.set(re,Fe),Be.length===0)return;const Ae=Be[Be.length-1];if(!Ae)return;const{UpdateCurrentPath:Ne}=window.wailsBindings||{};typeof Ne=="function"&&Ne(re,Ae).catch(be=>{console.error("Failed to update current path:",be)})}function Se(re,ve){const we=o.get(re),Be=we&&we.length>0?wc(we,ve):ve,Fe=Cc(Be),Ae=kc(Be);return{paths:Fe,pending:Ae}}function ke(re,ve){if(!a.has(re))return;const we=a.get(re),{SendSSHData:Be,SendLocalShellData:Fe}=window.wailsBindings||{};we&&we.type==="local"?typeof Fe=="function"&&Fe(re,ve).catch(Ae=>{console.error("Failed to send local shell data:",Ae)}):typeof Be=="function"&&Be(re,ve).catch(Ae=>{console.error("Failed to send SSH data:",Ae)})}function se(re,ve){if(!a.has(re))return;const we=a.get(re),{SendSSHData:Be,SendSSHDataBinary:Fe,SendLocalShellData:Ae,SendLocalShellDataBinary:Ne}=window.wailsBindings||{};if(we&&we.type==="local"){if(typeof Ne=="function"){const be=_s(ve);Ne(re,be).catch(dt=>{console.error("Failed to send local shell binary data:",dt)})}else if(typeof Ae=="function"){const be=qr(ve);Ae(re,be).catch(dt=>{console.error("Failed to send local shell data:",dt)})}}else if(typeof Fe=="function"){const be=_s(ve);Fe(re,be).catch(dt=>{console.error("Failed to send SSH binary data:",dt)})}else if(typeof Be=="function"){const be=qr(ve);Be(re,be).catch(dt=>{console.error("Failed to send SSH data:",dt)})}}function _e(re,ve,we){if(!a.has(re))return;const Be=a.get(re),{ResizeSSH:Fe,ResizeLocalShell:Ae}=window.wailsBindings||{};Be&&Be.type==="local"?typeof Ae=="function"&&Ae(re,ve,we).catch(Ne=>{console.error("Failed to resize local terminal:",Ne)}):typeof Fe=="function"&&Fe(re,ve,we).catch(Ne=>{console.error("Failed to resize SSH terminal:",Ne)})}function ue(re){const ve=`ssh:output:${re}`,we=Lr(ve,Be=>{const Fe=b[re];if(Fe){const Ae=atob(Be),Ne=new Uint8Array(Ae.length);for(let be=0;be<Ae.length;be++)Ne[be]=Ae.charCodeAt(be);Le(re,Ne,!1),Fe.write(Ne)}});i.set(re,we)}Ir(()=>{i.forEach(re=>{re()}),u&&window.removeEventListener("database:table-select",u)}),ar(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=b,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",d),u=re=>{const ve=re==null?void 0:re.detail;ve&&O(ve)},window.addEventListener("database:table-select",u),await Rr(),n&&b[n]&&setTimeout(()=>{b[n].focus()},100)});const Ce=[[]];function Qe(){Q=this.value,t(18,Q)}const ut=(re,ve)=>V(re.sessionId,ve),ze=re=>$(re.sessionId),it=re=>q(re.sessionId),qe=(re,ve)=>{(ve.key==="Enter"||ve.key===" ")&&(ve.preventDefault(),$(re.sessionId))};function nt(re,ve){gt[re?"unshift":"push"](()=>{b[ve.sessionId]=re,t(0,b)})}function je(re){m=re,t(2,m)}function Ee(re){L=re,t(11,L)}function We(re){g=re,t(3,g)}function mt(){S=this.__value,t(13,S)}function ht(){S=this.__value,t(13,S)}return r.$$.update=()=>{r.$$.dirty[1]&512&&t(1,d=a?Array.from(a.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=b)},[b,d,m,g,v,k,y,c,p,h,_,L,E,S,te,W,M,T,Q,n,j,K,P,H,$,V,X,Z,q,ne,ce,fe,pe,ye,ke,se,_e,B,I,ue,a,Qe,ut,ze,it,qe,nt,je,Ee,We,mt,Ce,ht]}class Dc extends Et{constructor(e){super(),xt(this,e,Lc,bc,Ct,{openDatabaseSession:37,handleConnect:38,subscribeToOutput:39},null,[-1,-1,-1])}get openDatabaseSession(){return this.$$.ctx[37]}get handleConnect(){return this.$$.ctx[38]}get subscribeToOutput(){return this.$$.ctx[39]}}function Mc(r){return window.go.main.App.AddConnection(r)}function Tc(r,e){return window.go.main.App.CalculateHash(r,e)}function Yr(r){return window.go.main.App.CancelTransfer(r)}function Bc(r,e){return window.go.main.App.ChangeDirectory(r,e)}function Ac(r){return window.go.main.App.CloseDatabase(r)}function Rc(r){return window.go.main.App.CloseSSH(r)}function Oc(r,e,t,n,a,b,d){return window.go.main.App.ConnectDatabase(r,e,t,n,a,b,d)}function Pc(r,e,t,n){return window.go.main.App.ConnectLocalShell(r,e,t,n)}function Ic(r,e,t,n,a,b,d,i,o){return window.go.main.App.ConnectSSH(r,e,t,n,a,b,d,i,o)}function Hc(r,e){return window.go.main.App.CreateDirectory(r,e)}function Fc(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function zc(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function jc(r){return window.go.main.App.DecodeBase64(r)}function Wc(r,e,t,n){return window.go.main.App.DecryptText(r,e,t,n)}function Nc(r,e){return window.go.main.App.DeleteFile(r,e)}function co(r,e){return window.go.main.App.DeleteFiles(r,e)}function Uc(r){return window.go.main.App.DeletePassword(r)}function Vc(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function ho(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function Kc(r){return window.go.main.App.EncodeBase64(r)}function qc(r,e,t,n){return window.go.main.App.EncryptText(r,e,t,n)}function Gc(r){return window.go.main.App.EscapeJSON(r)}function Jc(r,e){return window.go.main.App.ExecuteDatabaseQuery(r,e)}function Yc(r){return window.go.main.App.ExportConnections(r)}function Xc(r,e){return window.go.main.App.ExportConnectionsByIDs(r,e)}function Zc(r,e){return window.go.main.App.ExportConnectionsByIDsWithPassphrase(r,e)}function Qc(r){return window.go.main.App.FormatJSON(r)}function $c(){return window.go.main.App.GenerateUUIDv4()}function ed(r){return window.go.main.App.GetConnection(r)}function td(){return window.go.main.App.GetConnections()}function rd(r){return window.go.main.App.GetCurrentPath(r)}function id(){return window.go.main.App.GetCurrentTimestamp()}function sd(){return window.go.main.App.GetCurrentTimestampMs()}function nd(r,e){return window.go.main.App.GetFileInfo(r,e)}function od(r){return window.go.main.App.GetFileManagerSettings(r)}function ld(r){return window.go.main.App.GetMonitoringData(r)}function ad(r){return window.go.main.App.GetPassword(r)}function cd(){return window.go.main.App.GetSettings()}function dd(r,e){return window.go.main.App.GetTableColumns(r,e)}function hd(r){return window.go.main.App.GetTransferStatus(r)}function ud(){return window.go.main.App.GetVersion()}function fd(r){return window.go.main.App.Greet(r)}function pd(r){return window.go.main.App.HasPassword(r)}function _d(r){return window.go.main.App.ImportConnections(r)}function gd(r){return window.go.main.App.ImportConnectionsFromFile(r)}function md(r,e){return window.go.main.App.ImportConnectionsFromFileWithPassphrase(r,e)}function bd(r,e){return window.go.main.App.ImportConnectionsWithPassphrase(r,e)}function vd(r){return window.go.main.App.ListDatabaseTables(r)}function yd(r,e){return window.go.main.App.ListDatabaseTablesInDatabase(r,e)}function wd(r){return window.go.main.App.ListDatabases(r)}function uo(r,e){return window.go.main.App.ListFiles(r,e)}function kd(){return window.go.main.App.ListSSHSessions()}function Sd(r){return window.go.main.App.MinifyJSON(r)}function Cd(r){return window.go.main.App.ParseURL(r)}function xd(r){return window.go.main.App.RemoveConnection(r)}function fo(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function Ed(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function Ld(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function Dd(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function Md(r,e){return window.go.main.App.SavePassword(r,e)}function po(r,e,t,n,a){return window.go.main.App.SearchDirectories(r,e,t,n,a)}function _o(){return window.go.main.App.SelectDownloadDirectory()}function Td(){return window.go.main.App.SelectImportFile()}function Bd(){return window.go.main.App.SelectSSHKeyFile()}function go(){return window.go.main.App.SelectUploadFiles()}function Ad(r,e){return window.go.main.App.SendLocalShellData(r,e)}function Rd(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function Od(r,e){return window.go.main.App.SendSSHData(r,e)}function Pd(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function Id(){return window.go.main.App.ShowAboutDialog()}function Hd(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function Fd(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function zd(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function jd(r,e,t,n,a,b){return window.go.main.App.TestConnection(r,e,t,n,a,b)}function Wd(r,e,t,n,a,b){return window.go.main.App.TestDatabaseConnection(r,e,t,n,a,b)}function Nd(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function Ud(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function Vd(r,e){return window.go.main.App.URLDecode(r,e)}function Kd(r,e){return window.go.main.App.URLEncode(r,e)}function qd(r){return window.go.main.App.UpdateConnection(r)}function Gd(r,e){return window.go.main.App.UpdateCurrentPath(r,e)}function Jd(r,e){return window.go.main.App.UpdateFileManagerSettings(r,e)}function Yd(r){return window.go.main.App.UpdateSettings(r)}function mo(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function Xd(r){return window.go.main.App.ValidateJSON(r)}const bo=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:Mc,CalculateHash:Tc,CancelTransfer:Yr,ChangeDirectory:Bc,CloseDatabase:Ac,CloseSSH:Rc,ConnectDatabase:Oc,ConnectLocalShell:Pc,ConnectSSH:Ic,CreateDirectory:Hc,DateTimeToTimestamp:Fc,DateTimeToTimestampMs:zc,DecodeBase64:jc,DecryptText:Wc,DeleteFile:Nc,DeleteFiles:co,DeletePassword:Uc,DownloadFile:Vc,DownloadFiles:ho,EncodeBase64:Kc,EncryptText:qc,EscapeJSON:Gc,ExecuteDatabaseQuery:Jc,ExportConnections:Yc,ExportConnectionsByIDs:Xc,ExportConnectionsByIDsWithPassphrase:Zc,FormatJSON:Qc,GenerateUUIDv4:$c,GetConnection:ed,GetConnections:td,GetCurrentPath:rd,GetCurrentTimestamp:id,GetCurrentTimestampMs:sd,GetFileInfo:nd,GetFileManagerSettings:od,GetMonitoringData:ld,GetPassword:ad,GetSettings:cd,GetTableColumns:dd,GetTransferStatus:hd,GetVersion:ud,Greet:fd,HasPassword:pd,ImportConnections:_d,ImportConnectionsFromFile:gd,ImportConnectionsFromFileWithPassphrase:md,ImportConnectionsWithPassphrase:bd,ListDatabaseTables:vd,ListDatabaseTablesInDatabase:yd,ListDatabases:wd,ListFiles:uo,ListSSHSessions:kd,MinifyJSON:Sd,ParseURL:Cd,RemoveConnection:xd,RenameFile:fo,ResizeLocalShell:Ed,ResizeSSH:Ld,SaveBinaryFile:Dd,SavePassword:Md,SearchDirectories:po,SelectDownloadDirectory:_o,SelectImportFile:Td,SelectSSHKeyFile:Bd,SelectUploadFiles:go,SendLocalShellData:Ad,SendLocalShellDataBinary:Rd,SendSSHData:Od,SendSSHDataBinary:Pd,ShowAboutDialog:Id,ShowErrorDialog:Hd,ShowMessageDialog:Fd,ShowQuestionDialog:zd,TestConnection:jd,TestDatabaseConnection:Wd,TimestampToDateTime:Nd,TimestampToDateTimeMs:Ud,URLDecode:Vd,URLEncode:Kd,UpdateConnection:qd,UpdateCurrentPath:Gd,UpdateFileManagerSettings:Jd,UpdateSettings:Yd,UploadFiles:mo,ValidateJSON:Xd},Symbol.toStringTag,{value:"Module"})),Zd={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:Qd,set:$d,update:ir}=ur(Zd),Hr={subscribe:Qd,set:$d,addTransfer:r=>ir(e=>{const t=e.transfers.filter(a=>a.status!=="running");let n=e.transfers;if(t.length>=e.maxHistory){const a=t.length-e.maxHistory+1,b=t.slice(0,a).map(d=>d.id);n=e.transfers.filter(d=>!b.includes(d.id))}return{...e,transfers:[r,...n]}}),updateTransfer:(r,e)=>ir(t=>({...t,transfers:t.transfers.map(n=>n.id===r?{...n,...e}:n)})),cancelTransfer:r=>ir(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>ir(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>ir(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>ir(r=>({...r,transfers:[]})),togglePanel:()=>ir(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>ir(e=>({...e,isPanelOpen:r})),setActiveTab:r=>ir(e=>({...e,activeTab:r}))};function sr(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function gs(r){return r?`${sr(r)}/s`:"0 B/s"}function Br(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const eh=rr(Hr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),th=rr(Hr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));rr(Hr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(b=>b.status==="running");if(e.length===0)return 0;let t=0,n=0;return e.forEach(b=>{const d=b.totalBytes||0,i=b.bytesSent||0;t+=d,n+=i}),t>0?n/t*100:e.reduce((b,d)=>d.totalBytes?b+d.bytesSent/d.totalBytes*100:b+(d.percentage||0),0)/e.length});const qt=Hr,{Map:Fr}=Zn;function ms(r,e,t){const n=r.slice();return n[113]=e[t],n[115]=t,n}function bs(r,e,t){const n=r.slice();return n[116]=e[t],n[115]=t,n}function vs(r,e,t){const n=r.slice();return n[118]=e[t],n[115]=t,n}function ys(r,e,t){const n=r.slice();return n[113]=e[t],n[115]=t,n}function ws(r){let e,t,n,a,b,d,i=r[4]?"跟踪中":"已暂停",o,u,m,f;return{c(){e=C("button"),t=de("svg"),n=de("path"),a=de("path"),b=A(),d=C("span"),o=G(i),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(t,"class","w-3 h-3"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[6],s(e,"class",u=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${r[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`),s(e,"title","切换目录跟踪")},m(g,v){U(g,e,v),l(e,t),l(t,n),l(t,a),l(e,b),l(e,d),l(d,o),m||(f=Y(e,"click",r[65]),m=!0)},p(g,v){v[0]&16&&i!==(i=g[4]?"跟踪中":"已暂停")&&he(o,i),v[0]&64&&(e.disabled=g[6]),v[0]&16&&u!==(u=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${g[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`)&&s(e,"class",u)},d(g){g&&N(e),m=!1,f()}}}function rh(r){let e,t,n;function a(i,o){return i[3]==="/"?nh:sh}let b=a(r),d=b(r);return{c(){e=C("span"),d.c(),s(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),s(e,"title","点击编辑路径")},m(i,o){U(i,e,o),d.m(e,null),t||(n=Y(e,"click",r[51]),t=!0)},p(i,o){b===(b=a(i))&&d?d.p(i,o):(d.d(1),d=b(i),d&&(d.c(),d.m(e,null)))},d(i){i&&N(e),d.d(),t=!1,n()}}}function ih(r){let e,t,n,a,b;return{c(){e=C("span"),e.textContent="/",t=A(),n=C("input"),s(e,"class","text-gray-400 dark:text-gray-500"),s(n,"type","text"),s(n,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(d,i){U(d,e,i),U(d,t,i),U(d,n,i),Me(n,r[21]),a||(b=[Y(n,"input",r[68]),Y(n,"keydown",r[69]),Y(n,"blur",r[52]),Xn(vo.call(null,n))],a=!0)},p(d,i){i[0]&2097152&&n.value!==d[21]&&Me(n,d[21])},d(d){d&&(N(e),N(t),N(n)),a=!1,et(b)}}}function sh(r){let e=r[3].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=G(e)},m(n,a){U(n,t,a)},p(n,a){a[0]&8&&e!==(e=n[3].split("/").filter(Boolean).join(" / ")+"")&&he(t,e)},d(n){n&&N(t)}}}function nh(r){let e;return{c(){e=G("/")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function ks(r){let e,t,n,a,b,d;function i(m,f){return m[28].length>0?lh:oh}let o=i(r),u=o(r);return{c(){e=C("div"),t=C("div"),n=C("input"),a=A(),u.c(),s(n,"type","text"),s(n,"placeholder","搜索历史..."),s(n,"class","w-full px-2 py-1 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"),s(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg w-64 max-h-64 overflow-y-auto z-10")},m(m,f){U(m,e,f),l(e,t),l(t,n),Me(n,r[2]),l(e,a),u.m(e,null),b||(d=Y(n,"input",r[71]),b=!0)},p(m,f){f[0]&4&&n.value!==m[2]&&Me(n,m[2]),o===(o=i(m))&&u?u.p(m,f):(u.d(1),u=o(m),u&&(u.c(),u.m(e,null)))},d(m){m&&N(e),u.d(),b=!1,d()}}}function oh(r){let e,t=r[2]?"无匹配的历史":"暂无历史记录",n;return{c(){e=C("div"),n=G(t),s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&4&&t!==(t=a[2]?"无匹配的历史":"暂无历史记录")&&he(n,t)},d(a){a&&N(e)}}}function lh(r){let e=[],t=new Fr,n,a=Ue(r[28]);const b=d=>d[113];for(let d=0;d<a.length;d+=1){let i=ys(r,a,d),o=b(i);t.set(o,e[d]=Ss(o,i))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();n=It()},m(d,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(d,i);U(d,n,i)},p(d,i){i[0]&268435972|i[1]&131072&&(a=Ue(d[28]),e=Jt(e,i,b,1,d,a,t,n.parentNode,Xt,Ss,n,ys))},d(d){d&&N(n);for(let i=0;i<e.length;i+=1)e[i].d(d)}}}function Ss(r,e){let t,n=e[113]+"",a,b,d,i;function o(){return e[72](e[113])}return{key:r,first:null,c(){t=C("button"),a=G(n),b=A(),s(t,"class","w-full text-left px-3 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-purple-50 dark:hover:bg-purple-900/30 truncate"),this.first=t},m(u,m){U(u,t,m),l(t,a),l(t,b),d||(i=Y(t,"click",o),d=!0)},p(u,m){e=u,m[0]&268435456&&n!==(n=e[113]+"")&&he(a,n)},d(u){u&&N(t),d=!1,i()}}}function Cs(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c=r[13]&&xs();function p(w,L){if(L[0]&10240&&(f=null),w[12].length>0)return ch;if(f==null&&(f=!!(w[11].trim()&&!w[13])),f)return ah}let h=p(r,[-1,-1,-1,-1]),_=h&&h(r);return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("div"),b=C("input"),d=A(),i=de("svg"),o=de("path"),u=A(),c&&c.c(),m=A(),_&&_.c(),g=A(),v=C("button"),v.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',s(b,"type","text"),s(b,"placeholder","搜索文件夹名称..."),s(b,"class","w-full px-3 py-2 pl-9 text-xs bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(i,"class","w-4 h-4 text-amber-500 absolute left-3 top-1/2 transform -translate-y-1/2"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(a,"class","relative"),s(n,"class","relative flex-1"),s(v,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(v,"title","取消"),s(t,"class","flex items-center gap-2"),s(e,"class","mt-2 relative")},m(w,L){U(w,e,L),l(e,t),l(t,n),l(n,a),l(a,b),Me(b,r[11]),l(a,d),l(a,i),l(i,o),l(a,u),c&&c.m(a,null),l(n,m),_&&_.m(n,null),l(t,g),l(t,v),k||(y=[Y(b,"input",r[73]),Y(b,"keydown",r[55]),Y(b,"input",r[54]),Xn(vo.call(null,b)),Y(v,"click",r[56])],k=!0)},p(w,L){L[0]&2048&&b.value!==w[11]&&Me(b,w[11]),w[13]?c||(c=xs(),c.c(),c.m(a,null)):c&&(c.d(1),c=null),h===(h=p(w,L))&&_?_.p(w,L):(_&&_.d(1),_=h&&h(w),_&&(_.c(),_.m(n,null)))},d(w){w&&N(e),c&&c.d(),_&&_.d(),k=!1,et(y)}}}function xs(r){let e,t,n;return{c(){e=de("svg"),t=de("circle"),n=de("path"),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(n,"class","opacity-75"),s(n,"fill","currentColor"),s(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","w-4 h-4 text-amber-500 absolute right-3 top-1/2 transform -translate-y-1/2 animate-spin"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(a,b){U(a,e,b),l(e,t),l(e,n)},d(a){a&&N(e)}}}function ah(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center">未找到匹配的文件夹</div>',s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function ch(r){let e,t,n,a=r[12].length+"",b,d,i,o=[],u=new Fr,m=Ue(r[12]);const f=g=>g[118].path;for(let g=0;g<m.length;g+=1){let v=vs(r,m,g),k=f(v);u.set(k,o[g]=Es(k,v))}return{c(){e=C("div"),t=C("div"),n=G("找到 "),b=G(a),d=G(" 个文件夹"),i=A();for(let g=0;g<o.length;g+=1)o[g].c();s(t,"class","px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"),s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto z-10")},m(g,v){U(g,e,v),l(e,t),l(t,n),l(t,b),l(t,d),l(e,i);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(e,null)},p(g,v){v[0]&4096&&a!==(a=g[12].length+"")&&he(b,a),v[0]&22528|v[1]&33685504&&(m=Ue(g[12]),o=Jt(o,v,f,1,g,m,u,e,Xt,Es,null,vs))},d(g){g&&N(e);for(let v=0;v<o.length;v+=1)o[v].d()}}}function Es(r,e){let t,n,a,b,d,i,o,u=Rs(e[118].name,e[11])+"",m,f,g=e[118].path+"",v,k,y,c,p;function h(){return e[74](e[118])}function _(){return e[75](e[115])}return{key:r,first:null,c(){t=C("button"),n=C("div"),a=de("svg"),b=de("path"),d=A(),i=C("div"),o=C("div"),m=A(),f=C("div"),v=G(g),k=A(),s(b,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(a,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(a,"fill","currentColor"),s(a,"viewBox","0 0 24 24"),s(o,"class","text-gray-900 dark:text-white font-medium truncate"),s(f,"class","text-gray-400 dark:text-gray-500 text-[10px] truncate"),s(i,"class","flex-1 min-w-0"),s(n,"class","flex items-center gap-2"),s(t,"class",y=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`),this.first=t},m(w,L){U(w,t,L),l(t,n),l(n,a),l(a,b),l(n,d),l(n,i),l(i,o),o.innerHTML=u,l(i,m),l(i,f),l(f,v),l(t,k),c||(p=[Y(t,"click",h),Y(t,"mouseenter",_)],c=!0)},p(w,L){e=w,L[0]&6144&&u!==(u=Rs(e[118].name,e[11])+"")&&(o.innerHTML=u),L[0]&4096&&g!==(g=e[118].path+"")&&he(v,g),L[0]&20480&&y!==(y=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`)&&s(t,"class",y)},d(w){w&&N(t),c=!1,et(p)}}}function dh(r){let e=[],t=new Fr,n,a=Ue(r[29]);const b=d=>d[116].path;for(let d=0;d<a.length;d+=1){let i=bs(r,a,d),o=b(i);t.set(o,e[d]=Ls(o,i))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();n=It()},m(d,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(d,i);U(d,n,i)},p(d,i){i[0]&537165824|i[1]&131312&&(a=Ue(d[29]),e=Jt(e,i,b,1,d,a,t,n.parentNode,Xt,Ls,n,bs))},d(d){d&&N(n);for(let i=0;i<e.length;i+=1)e[i].d(d)}}}function hh(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function uh(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function fh(r){let e,t,n,a,b,d,i,o,u,m;return{c(){e=C("div"),t=de("svg"),n=de("path"),a=A(),b=C("span"),d=G(r[17]),i=A(),o=C("button"),o.textContent="重试",s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(t,"class","w-6 h-6"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(b,"class","text-center px-4"),s(o,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),s(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(f,g){U(f,e,g),l(e,t),l(t,n),l(e,a),l(e,b),l(b,d),l(e,i),l(e,o),u||(m=Y(o,"click",r[33]),u=!0)},p(f,g){g[0]&131072&&he(d,f[17])},d(f){f&&N(e),u=!1,m()}}}function ph(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function _h(r){let e,t,n,a,b,d,i,o=r[116].name+"",u,m,f,g,v=sr(r[116].size)+"",k,y,c,p,h,_=r[116].modified+"",w,L,x,E=r[116].mode+"",S;return{c(){e=C("div"),t=A(),n=de("svg"),a=de("path"),b=A(),d=C("div"),i=C("div"),u=G(o),m=A(),f=C("div"),g=C("span"),k=G(v),y=A(),c=C("span"),c.textContent="•",p=A(),h=C("span"),w=G(_),L=A(),x=C("span"),S=G(E),s(e,"class","w-3"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),s(n,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(f,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),s(d,"class","flex-1 min-w-0"),s(x,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(D,B){U(D,e,B),U(D,t,B),U(D,n,B),l(n,a),U(D,b,B),U(D,d,B),l(d,i),l(i,u),l(d,m),l(d,f),l(f,g),l(g,k),l(f,y),l(f,c),l(f,p),l(f,h),l(h,w),U(D,L,B),U(D,x,B),l(x,S)},p(D,B){B[0]&536870912&&o!==(o=D[116].name+"")&&he(u,o),B[0]&536870912&&v!==(v=sr(D[116].size)+"")&&he(k,v),B[0]&536870912&&_!==(_=D[116].modified+"")&&he(w,_),B[0]&536870912&&E!==(E=D[116].mode+"")&&he(S,E)},d(D){D&&(N(e),N(t),N(n),N(b),N(d),N(L),N(x))}}}function gh(r){let e,t,n,a,b,d,i,o=r[116].name+"",u;function m(v,k){return k[0]&536903680&&(e=null),e==null&&(e=!!v[15].has(v[116].path)),e?vh:bh}let f=m(r,[-1,-1,-1,-1]),g=f(r);return{c(){g.c(),t=A(),n=de("svg"),a=de("path"),b=A(),d=C("div"),i=C("div"),u=G(o),s(a,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(n,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(n,"fill","currentColor"),s(n,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","flex-1 min-w-0")},m(v,k){g.m(v,k),U(v,t,k),U(v,n,k),l(n,a),U(v,b,k),U(v,d,k),l(d,i),l(i,u)},p(v,k){f!==(f=m(v,k))&&(g.d(1),g=f(v),g&&(g.c(),g.m(t.parentNode,t))),k[0]&536870912&&o!==(o=v[116].name+"")&&he(u,o)},d(v){v&&(N(t),N(n),N(b),N(d)),g.d(v)}}}function mh(r){let e,t,n,a,b,d=r[116].name+"",i,o,u;return{c(){e=de("svg"),t=de("path"),n=A(),a=C("div"),b=C("div"),i=G(d),o=A(),u=C("div"),u.textContent="返回上一层",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),s(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24"),s(b,"class","text-gray-600 dark:text-gray-300"),s(u,"class","text-gray-400 dark:text-gray-500 text-[10px]"),s(a,"class","flex-1 min-w-0")},m(m,f){U(m,e,f),l(e,t),U(m,n,f),U(m,a,f),l(a,b),l(b,i),l(a,o),l(a,u)},p(m,f){f[0]&536870912&&d!==(d=m[116].name+"")&&he(i,d)},d(m){m&&(N(e),N(n),N(a))}}}function bh(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function vh(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function Ls(r,e){let t,n,a,b,d;function i(v,k){return v[116].is_parent?mh:v[116].is_dir?gh:_h}let o=i(e),u=o(e);function m(){return e[76](e[116])}function f(){return e[77](e[116])}function g(...v){return e[78](e[116],...v)}return{key:r,first:null,c(){t=C("div"),u.c(),n=A(),s(t,"class",a="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(v,k){U(v,t,k),u.m(t,null),l(t,n),b||(d=[Y(t,"click",m),Y(t,"dblclick",f),Y(t,"contextmenu",g)],b=!0)},p(v,k){e=v,o===(o=i(e))&&u?u.p(e,k):(u.d(1),u=o(e),u&&(u.c(),u.m(t,n))),k[0]&537133056&&a!==(a="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&s(t,"class",a)},d(v){v&&N(t),u.d(),b=!1,et(d)}}}function Ds(r){let e,t,n,a,b,d,i,o,u,m,f;return{c(){var g;e=C("div"),t=C("button"),n=G("下载"),b=A(),d=C("button"),d.textContent="重命名",i=A(),o=C("button"),o.textContent="删除",s(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=a=(g=r[19].file)==null?void 0:g.is_dir,s(d,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),s(o,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),s(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),s(e,"style",u=`left: ${r[19].x}px; top: ${r[19].y}px;`)},m(g,v){U(g,e,v),l(e,t),l(t,n),l(e,b),l(e,d),l(e,i),l(e,o),m||(f=[Y(t,"click",r[44]),Y(d,"click",r[45]),Y(o,"click",r[43])],m=!0)},p(g,v){var k;v[0]&524288&&a!==(a=(k=g[19].file)==null?void 0:k.is_dir)&&(t.disabled=a),v[0]&524288&&u!==(u=`left: ${g[19].x}px; top: ${g[19].y}px;`)&&s(e,"style",u)},d(g){g&&N(e),m=!1,et(f)}}}function Ms(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z=r[0].historyEnabled&&Ts(r),F=r[0].historyEnabled&&r[0].history.length>0&&Bs(r);return{c(){e=C("div"),t=C("div"),n=A(),a=C("div"),b=C("div"),d=C("div"),i=C("div"),i.innerHTML='<div class="p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div><h3 class="text-lg font-semibold tracking-tight bg-clip-text text-transparent" style="background-image: linear-gradient(90deg, var(--text-primary), var(--accent-primary));">文件管理设置</h3> <div class="text-[11px] uppercase tracking-[0.15em] text-slate-400 dark:text-slate-500 mt-0.5">Preferences</div></div>',o=A(),u=C("button"),u.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=A(),f=C("div"),g=C("div"),v=C("div"),v.innerHTML='<svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">功能设置</span>',k=A(),y=C("div"),c=C("div"),c.innerHTML='<div class="p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">目录跟踪</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">实时同步终端目录变化</div></div>',p=A(),h=C("button"),_=C("span"),x=A(),E=C("div"),S=C("div"),S.innerHTML='<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">历史记录</span>',D=A(),B=C("div"),O=C("div"),O.innerHTML='<div class="p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">启用历史记录</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">自动记录访问过的目录</div></div>',I=A(),R=C("button"),j=C("span"),te=A(),Z&&Z.c(),W=A(),F&&F.c(),M=A(),P=C("div"),H=C("button"),H.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            恢复默认`,z=A(),$=C("button"),$.textContent="完成",s(t,"class","fixed inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(i,"class","flex items-center gap-3"),s(u,"class","p-2 rounded-xl transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(u,"title","关闭"),s(d,"class","flex items-center justify-between"),s(b,"class","px-5 py-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-b border-slate-200/70 dark:border-slate-800/80"),s(v,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(c,"class","flex items-center gap-3"),s(_,"class",w=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].directoryTracking?"translate-x-6":"translate-x-1"}`),s(h,"class",L=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(y,"class","flex items-center justify-between py-2"),s(g,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(S,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(O,"class","flex items-center gap-3"),s(j,"class",K=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].historyEnabled?"translate-x-6":"translate-x-1"}`),s(R,"class",J=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].historyEnabled?"accent-gradient shadow-lg":"bg-slate-200 dark:bg-slate-600"}`),s(B,"class","flex items-center justify-between py-2 mb-4"),s(E,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(f,"class","flex-1 overflow-y-auto p-5 space-y-4 bg-slate-50/50 dark:bg-slate-950/30"),s(H,"class","px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all duration-200 flex items-center gap-1.5"),s($,"class","px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"),s(P,"class","p-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-t border-slate-200/70 dark:border-slate-800/80 flex justify-between items-center"),s(a,"class","relative bg-white/95 dark:bg-slate-900/90 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] w-[420px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(T,Q){U(T,e,Q),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),l(d,i),l(d,o),l(d,u),l(a,m),l(a,f),l(f,g),l(g,v),l(g,k),l(g,y),l(y,c),l(y,p),l(y,h),l(h,_),l(f,x),l(f,E),l(E,S),l(E,D),l(E,B),l(B,O),l(B,I),l(B,R),l(R,j),l(E,te),Z&&Z.m(E,null),l(f,W),F&&F.m(f,null),l(a,M),l(a,P),l(P,H),l(P,z),l(P,$),V||(X=[Y(t,"click",r[82]),Y(u,"click",r[83]),Y(h,"click",r[84]),Y(R,"click",r[85]),Y(H,"click",r[89]),Y($,"click",r[90])],V=!0)},p(T,Q){Q[0]&1&&w!==(w=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].directoryTracking?"translate-x-6":"translate-x-1"}`)&&s(_,"class",w),Q[0]&1&&L!==(L=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(h,"class",L),Q[0]&1&&K!==(K=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].historyEnabled?"translate-x-6":"translate-x-1"}`)&&s(j,"class",K),Q[0]&1&&J!==(J=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].historyEnabled?"accent-gradient shadow-lg":"bg-slate-200 dark:bg-slate-600"}`)&&s(R,"class",J),T[0].historyEnabled?Z?Z.p(T,Q):(Z=Ts(T),Z.c(),Z.m(E,null)):Z&&(Z.d(1),Z=null),T[0].historyEnabled&&T[0].history.length>0?F?F.p(T,Q):(F=Bs(T),F.c(),F.m(f,null)):F&&(F.d(1),F=null)},d(T){T&&N(e),Z&&Z.d(),F&&F.d(),V=!1,et(X)}}}function Ts(r){let e,t,n,a,b,d=r[0].historyLimit+"",i,o,u,m,f,g,v,k;return{c(){e=C("div"),t=C("div"),n=C("div"),n.innerHTML='<svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="text-xs font-medium text-slate-600 dark:text-slate-400">历史记录数量</span>',a=A(),b=C("span"),i=G(d),o=A(),u=C("div"),m=C("input"),f=A(),g=C("div"),g.innerHTML="<span>5</span> <span>50</span>",s(n,"class","flex items-center gap-2"),s(b,"class","text-sm font-bold text-purple-600 dark:text-purple-400 min-w-[2rem] text-center"),s(t,"class","flex items-center justify-between mb-3"),s(m,"type","range"),s(m,"min","5"),s(m,"max","50"),s(m,"step","5"),s(m,"class","w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500/30"),s(g,"class","flex justify-between text-[10px] text-slate-400 mt-1.5"),s(u,"class","relative"),s(e,"class","py-3 px-3 bg-slate-50/80 dark:bg-slate-800/50 rounded-xl")},m(y,c){U(y,e,c),l(e,t),l(t,n),l(t,a),l(t,b),l(b,i),l(e,o),l(e,u),l(u,m),Me(m,r[0].historyLimit),l(u,f),l(u,g),v||(k=[Y(m,"change",r[86]),Y(m,"input",r[86]),Y(m,"change",r[30])],v=!0)},p(y,c){c[0]&1&&d!==(d=y[0].historyLimit+"")&&he(i,d),c[0]&1&&Me(m,y[0].historyLimit)},d(y){y&&N(e),v=!1,et(k)}}}function Bs(r){let e,t,n,a,b,d,i,o,u,m=r[0].history.length+"",f,g,v,k,y,c=[],p=new Fr,h,_,w=Ue(r[0].history.slice().reverse());const L=x=>x[115];for(let x=0;x<w.length;x+=1){let E=ms(r,w,x),S=L(E);p.set(S,c[x]=As(S,E))}return{c(){e=C("div"),t=C("div"),n=C("div"),a=de("svg"),b=de("path"),d=A(),i=C("span"),o=G(`当前历史记录
                    `),u=C("span"),f=G(m),g=A(),v=C("button"),v.innerHTML=`<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                  清空`,k=A(),y=C("div");for(let x=0;x<c.length;x+=1)c[x].c();s(b,"stroke-linecap","round"),s(b,"stroke-linejoin","round"),s(b,"stroke-width","2"),s(b,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),s(a,"class","w-4 h-4 text-emerald-500"),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(u,"class","ml-1.5 text-xs px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-full"),s(i,"class","text-sm font-semibold text-slate-700 dark:text-slate-200"),s(n,"class","flex items-center gap-2"),s(v,"class","text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1"),s(t,"class","flex items-center justify-between mb-3 pb-2 border-b border-slate-100 dark:border-slate-800/60"),s(y,"class","space-y-1.5 max-h-40 overflow-y-auto pr-1 scrollbar-thin"),s(e,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm")},m(x,E){U(x,e,E),l(e,t),l(t,n),l(n,a),l(a,b),l(n,d),l(n,i),l(i,o),l(i,u),l(u,f),l(t,g),l(t,v),l(e,k),l(e,y);for(let S=0;S<c.length;S+=1)c[S]&&c[S].m(y,null);h||(_=Y(v,"click",r[87]),h=!0)},p(x,E){E[0]&1&&m!==(m=x[0].history.length+"")&&he(f,m),E[0]&1073741825&&(w=Ue(x[0].history.slice().reverse()),c=Jt(c,E,L,1,x,w,p,y,Xt,As,null,ms))},d(x){x&&N(e);for(let E=0;E<c.length;E+=1)c[E].d();h=!1,_()}}}function As(r,e){let t,n,a,b=e[0].history.length-e[115]+"",d,i,o,u=e[113]+"",m,f,g,v,k,y;function c(){return e[88](e[113])}return{key:r,first:null,c(){t=C("div"),n=C("div"),a=C("div"),d=G(b),i=A(),o=C("span"),m=G(u),f=A(),g=C("button"),g.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',v=A(),s(a,"class","w-5 h-5 flex items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 font-bold text-[10px]"),s(o,"class","truncate text-slate-700 dark:text-slate-300 font-medium"),s(n,"class","flex items-center gap-2 flex-1 min-w-0"),s(g,"class","ml-2 p-1 rounded-md text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100"),s(g,"title","删除记录"),s(t,"class","group flex items-center justify-between text-xs py-2 px-3 bg-slate-50 dark:bg-slate-800/60 rounded-lg border border-slate-100 dark:border-slate-700/50 hover:border-purple-300 dark:hover:border-purple-700/50 transition-all duration-200"),this.first=t},m(p,h){U(p,t,h),l(t,n),l(n,a),l(a,d),l(n,i),l(n,o),l(o,m),l(t,f),l(t,g),l(t,v),k||(y=Y(g,"click",c),k=!0)},p(p,h){e=p,h[0]&1&&b!==(b=e[0].history.length-e[115]+"")&&he(d,b),h[0]&1&&u!==(u=e[113]+"")&&he(m,u)},d(p){p&&N(t),k=!1,y()}}}function yh(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe=r[0].directoryTracking&&ws(r);function ye(Ee,We){return Ee[20]?ih:rh}let Ke=ye(r),Le=Ke(r),Se=r[9]&&r[0].historyEnabled&&ks(r),ke=r[10]&&Cs(r);function se(Ee,We){return Ee[16]?ph:Ee[17]?fh:Ee[29].length===0?uh:Ee[6]?hh:dh}let _e=se(r),ue=_e(r),Ce=r[19].open&&Ds(r);function Qe(Ee){r[79](Ee)}let ut={title:"删除文件",message:r[23],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[41],onCancel:r[42]};r[22]!==void 0&&(ut.isOpen=r[22]),V=new hr({props:ut}),gt.push(()=>St(V,"isOpen",Qe));function ze(Ee){r[80](Ee)}let it={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[31],onCancel:r[32]};r[24]!==void 0&&(it.isOpen=r[24]),F=new hr({props:it}),gt.push(()=>St(F,"isOpen",ze));function qe(Ee){r[81](Ee)}let nt={title:r[26],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[27],confirmText:"重命名",cancelText:"取消",onConfirm:r[46],onCancel:r[47]};r[25]!==void 0&&(nt.isOpen=r[25]),q=new br({props:nt}),gt.push(()=>St(q,"isOpen",qe));let je=r[8]&&Ms(r);return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("h3"),a.textContent="文件管理",b=A(),d=C("div"),i=C("button"),o=de("svg"),u=de("path"),m=A(),pe&&pe.c(),f=A(),g=C("button"),v=de("svg"),k=de("path"),y=A(),c=C("button"),c.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',p=A(),h=C("button"),_=de("svg"),w=de("path"),x=A(),E=C("button"),E.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',S=A(),D=C("div"),B=C("div"),O=C("button"),O.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',I=A(),Le.c(),R=A(),j=C("button"),j.innerHTML='<svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>',K=A(),J=C("div"),te=C("button"),te.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',W=A(),Se&&Se.c(),M=A(),ke&&ke.c(),P=A(),H=C("div"),ue.c(),z=A(),Ce&&Ce.c(),$=A(),ct(V.$$.fragment),Z=A(),ct(F.$$.fragment),Q=A(),ct(q.$$.fragment),ie=A(),je&&je.c(),s(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","2"),s(u,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),s(o,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),s(o,"fill","none"),s(o,"stroke","currentColor"),s(o,"viewBox","0 0 24 24"),i.disabled=r[6],s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(i,"title","刷新"),s(k,"stroke-linecap","round"),s(k,"stroke-linejoin","round"),s(k,"stroke-width","2"),s(k,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(v,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),s(v,"fill","none"),s(v,"stroke","currentColor"),s(v,"viewBox","0 0 24 24"),g.disabled=r[6],s(g,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(g,"title","上传到服务器"),s(c,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(c,"title","下载到本地"),s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),s(_,"class","w-4 h-4 text-red-500 dark:text-red-400"),s(_,"fill","none"),s(_,"stroke","currentColor"),s(_,"viewBox","0 0 24 24"),h.disabled=L=r[6]||r[18].size===0,s(h,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(h,"title","删除选中"),s(E,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(E,"title","文件管理设置"),s(d,"class","flex items-center gap-1"),s(n,"class","flex items-center justify-between mb-2"),s(O,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(O,"title","根目录"),s(B,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),s(j,"class","p-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors"),s(j,"title","模糊搜索文件夹"),s(te,"class","p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors"),s(te,"title","路径历史"),s(J,"class","relative"),s(D,"class","flex items-center gap-2"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(H,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(Ee,We){U(Ee,e,We),l(e,t),l(t,n),l(n,a),l(n,b),l(n,d),l(d,i),l(i,o),l(o,u),l(d,m),pe&&pe.m(d,null),l(d,f),l(d,g),l(g,v),l(v,k),l(d,y),l(d,c),l(d,p),l(d,h),l(h,_),l(_,w),l(d,x),l(d,E),l(t,S),l(t,D),l(D,B),l(B,O),l(B,I),Le.m(B,null),l(D,R),l(D,j),l(D,K),l(D,J),l(J,te),l(J,W),Se&&Se.m(J,null),l(t,M),ke&&ke.m(t,null),l(e,P),l(e,H),ue.m(H,null),l(e,z),Ce&&Ce.m(e,null),l(e,$),lt(V,e,null),l(e,Z),lt(F,e,null),l(e,Q),lt(q,e,null),l(e,ie),je&&je.m(e,null),ce=!0,fe||(ge=[Y(i,"click",r[33]),Y(g,"click",r[34]),Y(h,"click",r[40]),Y(E,"click",r[66]),Y(O,"click",r[67]),Y(j,"click",r[57]),Y(te,"click",r[70]),Y(H,"click",r[39])],fe=!0)},p(Ee,We){(!ce||We[0]&64)&&(i.disabled=Ee[6]),Ee[0].directoryTracking?pe?pe.p(Ee,We):(pe=ws(Ee),pe.c(),pe.m(d,f)):pe&&(pe.d(1),pe=null),(!ce||We[0]&64)&&(g.disabled=Ee[6]),(!ce||We[0]&262208&&L!==(L=Ee[6]||Ee[18].size===0))&&(h.disabled=L),Ke===(Ke=ye(Ee))&&Le?Le.p(Ee,We):(Le.d(1),Le=Ke(Ee),Le&&(Le.c(),Le.m(B,null))),Ee[9]&&Ee[0].historyEnabled?Se?Se.p(Ee,We):(Se=ks(Ee),Se.c(),Se.m(J,null)):Se&&(Se.d(1),Se=null),Ee[10]?ke?ke.p(Ee,We):(ke=Cs(Ee),ke.c(),ke.m(t,null)):ke&&(ke.d(1),ke=null),_e===(_e=se(Ee))&&ue?ue.p(Ee,We):(ue.d(1),ue=_e(Ee),ue&&(ue.c(),ue.m(H,null))),Ee[19].open?Ce?Ce.p(Ee,We):(Ce=Ds(Ee),Ce.c(),Ce.m(e,$)):Ce&&(Ce.d(1),Ce=null);const mt={};We[0]&8388608&&(mt.message=Ee[23]),!X&&We[0]&4194304&&(X=!0,mt.isOpen=Ee[22],kt(()=>X=!1)),V.$set(mt);const ht={};!T&&We[0]&16777216&&(T=!0,ht.isOpen=Ee[24],kt(()=>T=!1)),F.$set(ht);const re={};We[0]&67108864&&(re.title=Ee[26]),We[0]&134217728&&(re.defaultValue=Ee[27]),!ne&&We[0]&33554432&&(ne=!0,re.isOpen=Ee[25],kt(()=>ne=!1)),q.$set(re),Ee[8]?je?je.p(Ee,We):(je=Ms(Ee),je.c(),je.m(e,null)):je&&(je.d(1),je=null)},i(Ee){ce||(Ge(V.$$.fragment,Ee),Ge(F.$$.fragment,Ee),Ge(q.$$.fragment,Ee),ce=!0)},o(Ee){Ze(V.$$.fragment,Ee),Ze(F.$$.fragment,Ee),Ze(q.$$.fragment,Ee),ce=!1},d(Ee){Ee&&N(e),pe&&pe.d(),Le.d(),Se&&Se.d(),ke&&ke.d(),ue.d(),Ce&&Ce.d(),at(V),at(F),at(q),je&&je.d(),fe=!1,et(ge)}}}function vo(r){return r.focus(),{destroy(){}}}function wh(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function Rs(r,e){if(!e)return r;const t=new RegExp(`(${kh(e)})`,"gi");return r.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100 px-0.5 rounded">$1</mark>')}function kh(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sh(r,e,t){let n,a,b,d,i,o,u,m,f,g,v,k;Pt(r,Kt,oe=>t(63,g=oe)),Pt(r,Vt,oe=>t(64,v=oe)),Pt(r,qt,oe=>t(98,k=oe));let y=new Map,c={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]},p=new Map,h=null,_=!1,w=!1,L=!1,x="",E=!1,S="",D=[],B=!1,O=-1,I=null,R=new Set([]),j=[],K=!1,J=null,te=new Set,W=[],M={open:!1,x:0,y:0,file:null},P=!1,H="",z=!1,$="",V=[],X=!1,Z=null,F=!1,T="",Q="",q=null;async function ne(oe){try{const{GetFileManagerSettings:He}=window.wailsBindings;if(typeof He!="function")return;const ft=await He(oe);if(t(0,c={directoryTracking:(ft==null?void 0:ft.directory_tracking)??!1,historyEnabled:(ft==null?void 0:ft.history_enabled)??!0,historyLimit:(ft==null?void 0:ft.history_limit)??5,history:(ft==null?void 0:ft.history)??[]}),!p.has(oe)){const wt=new Map(p);wt.set(oe,c.directoryTracking||!1),t(1,p=wt)}}catch(He){console.error("Failed to load file manager config:",He)}}async function ie(){try{const{UpdateFileManagerSettings:oe}=window.wailsBindings;if(typeof oe!="function"||!m)return;await oe(m,{directory_tracking:c.directoryTracking,history_enabled:c.historyEnabled,history_limit:c.historyLimit,history:c.history})}catch(oe){console.error("Failed to save file manager settings:",oe)}}let ce="/";function fe(oe){return oe&&y.get(oe)||"/"}function ge(oe,He){if(!oe)return;const ft=new Map(y);ft.set(oe,He),t(58,y=ft)}async function pe(oe){if(!(!v||!a)&&!b){t(16,K=!0),t(17,J=null);try{const He=await uo(v,oe);t(59,j=He||[]),ge(v,oe),t(3,ce=oe)}catch(He){console.error("Failed to load directory:",He),t(17,J=He.message||"加载目录失败")}finally{t(16,K=!1)}}}async function ye(){t(24,X=!1);const oe=Z;if(Z=null,oe)try{await Yr(oe.id)}catch(He){console.error("Cancel transfer failed:",He)}qt.cancelTransfer(oe.id)}function Ke(){t(24,X=!1),Z=null}async function Le(){await pe(ce)}async function Se(){if(!(!v||!a||b))try{const oe=await go();if(!oe||oe.length===0)return;(await mo(v,oe,ce)).forEach(ft=>mt(ft,"upload")),setTimeout(()=>pe(ce),2e3)}catch(oe){console.error("Upload failed:",oe),t(17,J=oe.message||"上传失败")}}async function ke(oe){if(!(!v||!a||b||oe.is_dir))try{const He=await _o();if(!He)return;(await ho(v,[oe.path],He)).forEach(wt=>mt(wt,"download"))}catch(He){console.error("Download failed:",He),t(17,J=He.message||"下载失败")}}function se(oe){!oe||oe.is_parent||t(18,te=new Set([oe.path]))}function _e(oe){!oe||oe.is_parent||se(oe)}function ue(oe){!oe||!oe.is_parent||ht(oe.path,!0)}function Ce(oe,He){He!=null&&He.is_parent||(oe.preventDefault(),se(He),t(19,M={open:!0,x:oe.clientX,y:oe.clientY,file:He}))}function Qe(){M.open&&t(19,M={...M,open:!1})}async function ut(){if(!v||!a||b||te.size===0)return;V=Array.from(te);const oe=V.length;t(23,$=oe===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${oe} 个文件/文件夹吗？`),t(22,z=!0)}async function ze(){t(22,z=!1);try{await co(v,V),t(18,te=new Set),V=[],await pe(ce)}catch(oe){console.error("Delete failed:",oe),t(17,J=oe.message||"删除失败")}}function it(){t(22,z=!1),V=[]}async function qe(){const oe=M.file;oe&&(Qe(),V=[oe.path],t(23,$=`确定要删除 "${oe.name}" 吗？`),t(22,z=!0))}async function nt(){const oe=M.file;Qe(),oe&&!oe.is_dir&&await ke(oe)}async function je(){const oe=M.file;Qe(),oe&&(q=oe,t(26,T="重命名"),t(27,Q=oe.name),t(25,F=!0))}async function Ee(oe){t(25,F=!1);const He=q;if(q=null,!(!He||!oe||oe.trim()===He.name))try{const wt=`${ce.endsWith("/")?ce:`${ce}/`}${oe.trim()}`;await fo(v,He.path,wt),await pe(ce)}catch(ft){console.error("Rename failed:",ft),t(17,J=ft.message||"重命名失败")}}function We(){t(25,F=!1),q=null}function mt(oe,He){const ft=`sftp:progress:${oe}`,wt=Lr(ft,vt=>{if(He==="upload"){const Bt={id:oe,filename:vt.filename||vt.fileName||"unknown",bytesSent:vt.bytes_sent??vt.bytesSent??0,totalBytes:vt.total_bytes??vt.totalBytes??0,percentage:vt.percentage??0,speed:vt.speed??0,status:vt.status||"running",error:vt.error||""};k.transfers.find(fr=>fr.id===oe)?qt.updateTransfer(oe,Bt):qt.addTransfer(Bt)}});W.push(wt)}function ht(oe,He=!1){if(He&&f&&m){const ft=new Map(p);ft.set(m,!1),t(1,p=ft),t(7,_=!0)}if(c.historyEnabled&&oe!==ce){const ft=c.historyLimit||5,wt=[...c.history||[]],vt=wt.indexOf(oe);vt!==-1&&wt.splice(vt,1),wt.unshift(oe);const Bt=wt.slice(0,ft);t(0,c.history=Bt,c),ie()}pe(oe)}async function re(){if(v)try{const{GetCurrentPath:oe}=window.wailsBindings;if(typeof oe!="function")return;const He=await oe(v);He&&He!==ce&&(t(7,_=!1),ht(He,!1))}catch(oe){console.error("Failed to sync directory from server:",oe)}}function ve(){if(!c.directoryTracking||!f||h)return;const oe=v;oe&&(h=Lr(`ssh:cwd:${oe}`,He=>{He&&He!==ce&&!_&&ht(He,!1)}))}function we(){h&&(h(),h=null)}function Be(oe){if(oe===-1)ht("/",!0);else{const He="/"+o.slice(0,oe+1).join("/");ht(He,!0)}}function Fe(){t(21,H=ce),t(20,P=!0)}function Ae(){H.trim()&&ht(H.trim(),!0),t(20,P=!1)}function Ne(){t(20,P=!1),t(21,H="")}async function be(){if(!(!S.trim()||!v)){I&&I.abort(),I=new AbortController,t(13,B=!0),t(12,D=[]),t(14,O=-1);try{const oe=await po(v,ce,S.trim(),3,50);if(I.signal.aborted)return;t(12,D=oe||[])}catch(oe){console.error("Directory search failed:",oe),t(17,J=oe.message||"搜索失败")}finally{t(13,B=!1)}}}let dt;function rt(){clearTimeout(dt),S.trim().length>=1?dt=setTimeout(()=>{be()},300):t(12,D=[])}function Ye(oe){oe.key==="Enter"?(oe.preventDefault(),O>=0&&D[O]?(ht(D[O].path,!0),ee()):be()):oe.key==="Escape"?ee():oe.key==="ArrowDown"?(oe.preventDefault(),O<D.length-1&&t(14,O++,O)):oe.key==="ArrowUp"&&(oe.preventDefault(),O>0&&t(14,O--,O))}function ee(){t(10,E=!1),t(11,S=""),t(12,D=[]),t(14,O=-1),I&&(I.abort(),I=null)}function le(){t(10,E=!0),t(11,S=""),t(12,D=[]),t(14,O=-1)}ar(()=>{}),Ir(()=>{W.forEach(oe=>oe()),we(),clearTimeout(dt),I&&I.abort()});const De=async()=>{if(m){const oe=!f,He=new Map(p);He.set(m,oe),t(1,p=He),oe&&(t(7,_=!1),await re())}},Pe=()=>t(8,w=!0),Je=()=>Be(-1);function st(){H=this.value,t(21,H)}const Te=oe=>{oe.key==="Enter"?Ae():oe.key==="Escape"&&Ne()},Xe=()=>t(9,L=!L);function Ft(){x=this.value,t(2,x)}const ae=oe=>{ht(oe,!0),t(9,L=!1),t(2,x="")};function xe(){S=this.value,t(11,S)}const Ie=oe=>{ht(oe.path,!0),ee()},pt=oe=>t(14,O=oe),_t=oe=>oe.is_parent?ue(oe):_e(oe),At=oe=>{oe.is_dir&&!oe.is_parent?ht(oe.path,!0):oe.is_dir||ke(oe)},Lt=(oe,He)=>Ce(He,oe);function $e(oe){z=oe,t(22,z)}function bt(oe){X=oe,t(24,X)}function tt(oe){F=oe,t(25,F)}const me=()=>t(8,w=!1),Ve=()=>t(8,w=!1),Ut=()=>{t(0,c.directoryTracking=!c.directoryTracking,c),ie()},Qt=()=>{t(0,c.historyEnabled=!c.historyEnabled,c),c.historyEnabled||t(0,c.history=[],c),ie()};function Rt(){c.historyLimit=xr(this.value),t(0,c),t(64,v),t(60,d),t(62,a),t(6,b),t(61,n),t(63,g)}const jt=()=>{t(0,c.history=[],c),ie()},Tt=oe=>{t(0,c.history=c.history.filter(He=>He!==oe),c),ie()},Ht=()=>{t(0,c={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),ie()},Dt=()=>t(8,w=!1);return r.$$.update=()=>{var oe;if(r.$$.dirty[2]&6&&t(61,n=v?g.get(v):null),r.$$.dirty[1]&1073741824&&t(62,a=(n==null?void 0:n.connected)||!1),r.$$.dirty[1]&1073741824&&t(6,b=(n==null?void 0:n.type)==="local"),r.$$.dirty[0]&64|r.$$.dirty[2]&1&&t(60,d=a&&!b),r.$$.dirty[1]&1073741824&&t(5,m=((oe=n==null?void 0:n.connection)==null?void 0:oe.id)||null),r.$$.dirty[0]&32|r.$$.dirty[2]&4&&v&&m&&ne(m),r.$$.dirty[0]&8|r.$$.dirty[2]&4)if(v){const He=fe(v);He&&He!==ce&&t(3,ce=He)}else t(3,ce="/");if(r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(!v||!d)&&(t(59,j=[]),t(17,J=null),t(18,te=new Set),t(15,R=new Set),t(3,ce="/"),t(58,y=new Map),t(1,p=new Map),t(0,c={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),t(8,w=!1),t(9,L=!1),t(10,E=!1),t(19,M={open:!1,x:0,y:0,file:null})),r.$$.dirty[0]&8|r.$$.dirty[1]&268435456&&t(29,i=(()=>{const He=wh(j);return ce==="/"?He:[{name:"..",path:ce.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...He]})()),r.$$.dirty[0]&8&&(o=ce.split("/").filter(He=>He)),r.$$.dirty[0]&5&&t(28,u=c.historyEnabled&&x?c.history.filter(He=>He.toLowerCase().includes(x.toLowerCase())):c.history||[]),r.$$.dirty[0]&34&&t(4,f=m&&p.get(m)||!1),r.$$.dirty[0]&40|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(v&&d&&m?(ne(m),pe(ce),ve()):we()),r.$$.dirty[0]&17|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(v&&d&&c.directoryTracking&&f?ve():we()),r.$$.dirty[1]&134217728|r.$$.dirty[2]&2&&g){const He=new Set(g.keys()),ft=new Map(y);for(const wt of ft.keys())He.has(wt)||ft.delete(wt);t(58,y=ft)}},[c,p,x,ce,f,m,b,_,w,L,E,S,D,B,O,R,K,J,te,M,P,H,z,$,X,F,T,Q,u,i,ie,ye,Ke,Le,Se,ke,_e,ue,Ce,Qe,ut,ze,it,qe,nt,je,Ee,We,ht,re,Be,Fe,Ae,Ne,rt,Ye,ee,le,y,j,d,n,a,g,v,De,Pe,Je,st,Te,Xe,Ft,ae,xe,Ie,pt,_t,At,Lt,$e,bt,tt,me,Ve,Ut,Qt,Rt,jt,Tt,Ht,Dt]}class Ch extends Et{constructor(e){super(),xt(this,e,Sh,yh,Ct,{},null,[-1,-1,-1,-1])}}function Os(r,e,t){const n=r.slice();return n[37]=e[t],n[39]=t,n}function xh(r){let e;return{c(){e=G("请先连接到服务器")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Eh(r){let e;return{c(){e=G("实时数据获取中...")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Lh(r){let e;return{c(){e=G("本地终端不支持服务器监控")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Ps(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',s(e,"class","p-3 space-y-3")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Is(r){let e,t,n,a,b,d=r[8]["1min"].toFixed(2)+"",i,o,u,m=r[8]["5min"].toFixed(2)+"",f,g,v,k=r[8]["15min"].toFixed(2)+"",y;return{c(){e=C("div"),t=C("span"),t.textContent="负载:",n=A(),a=C("div"),b=C("span"),i=G(d),o=A(),u=C("span"),f=G(m),g=A(),v=C("span"),y=G(k),s(t,"class","text-[9px] text-gray-600 dark:text-gray-400"),s(b,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Re(b,"color",Ot(r[8]["1min"]*100)),s(u,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Re(u,"color",Ot(r[8]["5min"]*100)),s(v,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Re(v,"color",Ot(r[8]["15min"]*100)),s(a,"class","flex gap-2 text-[9px]"),s(e,"class","flex items-center gap-2 mb-2")},m(c,p){U(c,e,p),l(e,t),l(e,n),l(e,a),l(a,b),l(b,i),l(a,o),l(a,u),l(u,f),l(a,g),l(a,v),l(v,y)},p(c,p){p[0]&256&&d!==(d=c[8]["1min"].toFixed(2)+"")&&he(i,d),p[0]&256&&Re(b,"color",Ot(c[8]["1min"]*100)),p[0]&256&&m!==(m=c[8]["5min"].toFixed(2)+"")&&he(f,m),p[0]&256&&Re(u,"color",Ot(c[8]["5min"]*100)),p[0]&256&&k!==(k=c[8]["15min"].toFixed(2)+"")&&he(y,k),p[0]&256&&Re(v,"color",Ot(c[8]["15min"]*100))},d(c){c&&N(e)}}}function Dh(r){let e;return{c(){e=C("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Mh(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c;return{c(){e=de("svg"),t=de("defs"),n=de("linearGradient"),a=de("stop"),b=de("stop"),d=de("line"),i=de("line"),o=de("line"),u=de("path"),f=de("path"),v=A(),k=C("div"),k.textContent="100%",y=A(),c=C("div"),c.textContent="0%",s(a,"offset","0%"),Re(a,"stop-color","rgb(139, 92, 246)"),Re(a,"stop-opacity","0.3"),s(b,"offset","100%"),Re(b,"stop-color","rgb(139, 92, 246)"),Re(b,"stop-opacity","0.05"),s(n,"id","cpuGradient"),s(n,"x1","0%"),s(n,"y1","0%"),s(n,"x2","0%"),s(n,"y2","100%"),s(d,"x1","0"),s(d,"y1","25%"),s(d,"x2","100%"),s(d,"y2","25%"),s(d,"stroke","currentColor"),s(d,"stroke-width","0.5"),s(d,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(o,"x1","0"),s(o,"y1","75%"),s(o,"x2","100%"),s(o,"y2","75%"),s(o,"stroke","currentColor"),s(o,"stroke-width","0.5"),s(o,"class","text-gray-200 dark:text-gray-700"),s(u,"d",m=r[2].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),s(u,"fill","url(#cpuGradient)"),s(u,"transform","scale(1, 0.8) translate(0, 10)"),s(f,"d",g=r[2].map(r[16]).join(" ")),s(f,"fill","none"),s(f,"stroke","rgb(139, 92, 246)"),s(f,"stroke-width","2"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(c,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(p,h){U(p,e,h),l(e,t),l(t,n),l(n,a),l(n,b),l(e,d),l(e,i),l(e,o),l(e,u),l(e,f),U(p,v,h),U(p,k,h),U(p,y,h),U(p,c,h)},p(p,h){h[0]&4&&m!==(m=p[2].map(p[15]).join(" ")+" L 100 100 L 0 100 Z")&&s(u,"d",m),h[0]&4&&g!==(g=p[2].map(p[16]).join(" "))&&s(f,"d",g)},d(p){p&&(N(e),N(v),N(k),N(y),N(c))}}}function Hs(r){let e,t=Ue(r[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Fs(Os(r,t,a));return{c(){e=C("div");for(let a=0;a<n.length;a+=1)n[a].c();s(e,"class","mt-2 flex flex-wrap gap-1")},m(a,b){U(a,e,b);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(a,b){if(b[0]&16){t=Ue(a[4]);let d;for(d=0;d<t.length;d+=1){const i=Os(a,t,d);n[d]?n[d].p(i,b):(n[d]=Fs(i),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=t.length}},d(a){a&&N(e),Mt(n,a)}}}function Fs(r){let e,t,n,a,b,d;return{c(){e=C("div"),t=C("div"),n=C("div"),a=A(),b=C("span"),b.textContent=`C${r[39]+1}`,d=A(),s(n,"class","h-full rounded-full transition-all duration-300"),Re(n,"width",r[37]+"%"),Re(n,"background-color",Ot(r[37])),s(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),s(b,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),s(e,"class","flex flex-col items-center")},m(i,o){U(i,e,o),l(e,t),l(t,n),l(e,a),l(e,b),l(e,d)},p(i,o){o[0]&16&&Re(n,"width",i[37]+"%"),o[0]&16&&Re(n,"background-color",Ot(i[37]))},d(i){i&&N(e)}}}function Th(r){let e;return{c(){e=C("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Bh(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c;return{c(){e=de("svg"),t=de("defs"),n=de("linearGradient"),a=de("stop"),b=de("stop"),d=de("line"),i=de("line"),o=de("line"),u=de("path"),f=de("path"),v=A(),k=C("div"),k.textContent="100%",y=A(),c=C("div"),c.textContent="0%",s(a,"offset","0%"),Re(a,"stop-color","rgb(16, 185, 129)"),Re(a,"stop-opacity","0.3"),s(b,"offset","100%"),Re(b,"stop-color","rgb(16, 185, 129)"),Re(b,"stop-opacity","0.05"),s(n,"id","memoryGradient"),s(n,"x1","0%"),s(n,"y1","0%"),s(n,"x2","0%"),s(n,"y2","100%"),s(d,"x1","0"),s(d,"y1","25%"),s(d,"x2","100%"),s(d,"y2","25%"),s(d,"stroke","currentColor"),s(d,"stroke-width","0.5"),s(d,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(o,"x1","0"),s(o,"y1","75%"),s(o,"x2","100%"),s(o,"y2","75%"),s(o,"stroke","currentColor"),s(o,"stroke-width","0.5"),s(o,"class","text-gray-200 dark:text-gray-700"),s(u,"d",m=r[3].map(r[17]).join(" ")+" L 100 100 L 0 100 Z"),s(u,"fill","url(#memoryGradient)"),s(u,"transform","scale(1, 0.8) translate(0, 10)"),s(f,"d",g=r[3].map(r[18]).join(" ")),s(f,"fill","none"),s(f,"stroke","rgb(16, 185, 129)"),s(f,"stroke-width","2"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(c,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(p,h){U(p,e,h),l(e,t),l(t,n),l(n,a),l(n,b),l(e,d),l(e,i),l(e,o),l(e,u),l(e,f),U(p,v,h),U(p,k,h),U(p,y,h),U(p,c,h)},p(p,h){h[0]&8&&m!==(m=p[3].map(p[17]).join(" ")+" L 100 100 L 0 100 Z")&&s(u,"d",m),h[0]&8&&g!==(g=p[3].map(p[18]).join(" "))&&s(f,"d",g)},d(p){p&&(N(e),N(v),N(k),N(y),N(c))}}}function Ah(r){var Zr,Qr;let e,t,n,a,b,d,i,o,u,m,f,g,v,k=r[5].cpu.toFixed(1)+"",y,c,p,h,_,w,L,x,E,S,D,B,O,I=r[9].used+"",R,j,K=r[9].total+"",J,te,W,M=r[5].memory.toFixed(2)+"",P,H,z,$,V,X,Z,F,T,Q,q=r[5].disk+"",ne,ie,ce,fe,ge,pe,ye,Ke,Le,Se=r[7].used+"",ke,se,_e,ue,Ce=r[7].total+"",Qe,ut,ze,it,qe,nt,je,Ee,We,mt,ht=Ar(((Zr=r[5].network)==null?void 0:Zr.in)||0)+"",re,ve,we,Be,Fe,Ae,Ne=Ar(((Qr=r[5].network)==null?void 0:Qr.out)||0)+"",be,dt,rt,Ye,ee,le,De,Pe,Je,st,Te=(r[6].os||"Unknown")+"",Xe,Ft,ae,xe,Ie,pt,_t=(r[6].kernel||"Unknown")+"",At,Lt,$e,bt,tt,me,Ve=(r[6].uptime||"Unknown")+"",Ut,Qt,Rt,jt,Tt,Ht,Dt=(r[6].processes||"N/A")+"",oe;function He(ot,yt){return ot[0]?Lh:ot[1]?Eh:xh}let ft=He(r),wt=ft(r),vt=r[0]&&Ps(),Bt=r[8]["1min"]>0&&Is(r);function zr(ot,yt){return ot[2].length>1?Mh:Dh}let fr=zr(r),$t=fr(r),zt=r[4].length>0&&Hs(r);function Xr(ot,yt){return ot[3].length>1?Bh:Th}let Dr=Xr(r),er=Dr(r);return{c(){e=C("div"),t=C("div"),n=C("h3"),n.textContent="服务器监控",a=A(),b=C("div"),wt.c(),d=A(),vt&&vt.c(),i=A(),o=C("div"),u=C("div"),m=C("div"),f=C("div"),f.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',g=A(),v=C("span"),y=G(k),c=G("%"),p=A(),Bt&&Bt.c(),h=A(),_=C("div"),$t.c(),w=A(),zt&&zt.c(),L=A(),x=C("div"),E=C("div"),S=C("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',D=A(),B=C("div"),O=C("span"),R=G(I),j=G(" / "),J=G(K),te=A(),W=C("span"),P=G(M),H=G("%"),z=A(),$=C("div"),er.c(),V=A(),X=C("div"),Z=C("div"),F=C("div"),F.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',T=A(),Q=C("span"),ne=G(q),ie=G("%"),ce=A(),fe=C("div"),ge=C("div"),pe=A(),ye=C("div"),Ke=C("span"),Le=G("已用 "),ke=G(Se),se=A(),_e=C("span"),ue=G("总计 "),Qe=G(Ce),ut=A(),ze=C("div"),it=C("div"),it.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',qe=A(),nt=C("div"),je=C("div"),Ee=C("div"),Ee.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',We=A(),mt=C("span"),re=G(ht),ve=A(),we=C("div"),Be=C("div"),Be.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',Fe=A(),Ae=C("span"),be=G(Ne),dt=A(),rt=C("div"),Ye=C("div"),Ye.textContent="系统信息",ee=A(),le=C("div"),De=C("div"),Pe=C("span"),Pe.textContent="操作系统",Je=A(),st=C("span"),Xe=G(Te),Ft=A(),ae=C("div"),xe=C("span"),xe.textContent="内核版本",Ie=A(),pt=C("span"),At=G(_t),Lt=A(),$e=C("div"),bt=C("span"),bt.textContent="运行时间",tt=A(),me=C("span"),Ut=G(Ve),Qt=A(),Rt=C("div"),jt=C("span"),jt.textContent="进程数",Tt=A(),Ht=C("span"),oe=G(Dt),s(n,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(f,"class","flex items-center gap-2"),s(v,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Re(v,"color",Ot(r[5].cpu)),s(m,"class","flex items-center justify-between mb-2"),s(_,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(u,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),s(S,"class","flex items-center gap-2"),s(O,"class","text-[10px] text-gray-600 dark:text-gray-400"),s(W,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Re(W,"color",Ot(r[5].memory)),s(B,"class","flex items-center gap-2"),s(E,"class","flex items-center justify-between mb-2"),s($,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(x,"class","rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),Re(x,"background","linear-gradient(135deg, var(--accent-soft), transparent)"),s(F,"class","flex items-center gap-2"),s(Q,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Re(Q,"color",Ot(r[5].disk)),s(Z,"class","flex items-center justify-between mb-2"),s(ge,"class","h-2 rounded-full transition-all duration-300"),Re(ge,"width",r[5].disk+"%"),Re(ge,"background-color",Ot(r[5].disk)),s(fe,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),s(ye,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),s(X,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),s(it,"class","flex items-center gap-2 mb-3"),s(Ee,"class","flex items-center gap-2"),s(mt,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(je,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(Be,"class","flex items-center gap-2"),s(Ae,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(we,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(nt,"class","space-y-2"),s(ze,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),s(Ye,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),s(Pe,"class","text-gray-600 dark:text-gray-400"),s(st,"class","text-gray-900 dark:text-white font-medium"),s(De,"class","flex justify-between py-1"),s(xe,"class","text-gray-600 dark:text-gray-400"),s(pt,"class","text-gray-900 dark:text-white font-medium"),s(ae,"class","flex justify-between py-1"),s(bt,"class","text-gray-600 dark:text-gray-400"),s(me,"class","text-gray-900 dark:text-white font-medium"),s($e,"class","flex justify-between py-1"),s(jt,"class","text-gray-600 dark:text-gray-400"),s(Ht,"class","text-gray-900 dark:text-white font-medium"),s(Rt,"class","flex justify-between py-1"),s(le,"class","space-y-1.5 text-[10px]"),s(rt,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),s(o,"class","p-3 space-y-3"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(ot,yt){U(ot,e,yt),l(e,t),l(t,n),l(t,a),l(t,b),wt.m(b,null),l(e,d),vt&&vt.m(e,null),l(e,i),l(e,o),l(o,u),l(u,m),l(m,f),l(m,g),l(m,v),l(v,y),l(v,c),l(u,p),Bt&&Bt.m(u,null),l(u,h),l(u,_),$t.m(_,null),l(u,w),zt&&zt.m(u,null),l(o,L),l(o,x),l(x,E),l(E,S),l(E,D),l(E,B),l(B,O),l(O,R),l(O,j),l(O,J),l(B,te),l(B,W),l(W,P),l(W,H),l(x,z),l(x,$),er.m($,null),l(o,V),l(o,X),l(X,Z),l(Z,F),l(Z,T),l(Z,Q),l(Q,ne),l(Q,ie),l(X,ce),l(X,fe),l(fe,ge),l(X,pe),l(X,ye),l(ye,Ke),l(Ke,Le),l(Ke,ke),l(ye,se),l(ye,_e),l(_e,ue),l(_e,Qe),l(o,ut),l(o,ze),l(ze,it),l(ze,qe),l(ze,nt),l(nt,je),l(je,Ee),l(je,We),l(je,mt),l(mt,re),l(nt,ve),l(nt,we),l(we,Be),l(we,Fe),l(we,Ae),l(Ae,be),l(o,dt),l(o,rt),l(rt,Ye),l(rt,ee),l(rt,le),l(le,De),l(De,Pe),l(De,Je),l(De,st),l(st,Xe),l(le,Ft),l(le,ae),l(ae,xe),l(ae,Ie),l(ae,pt),l(pt,At),l(le,Lt),l(le,$e),l($e,bt),l($e,tt),l($e,me),l(me,Ut),l(le,Qt),l(le,Rt),l(Rt,jt),l(Rt,Tt),l(Rt,Ht),l(Ht,oe)},p(ot,yt){var $r,ei;ft!==(ft=He(ot))&&(wt.d(1),wt=ft(ot),wt&&(wt.c(),wt.m(b,null))),ot[0]?vt||(vt=Ps(),vt.c(),vt.m(e,i)):vt&&(vt.d(1),vt=null),yt[0]&32&&k!==(k=ot[5].cpu.toFixed(1)+"")&&he(y,k),yt[0]&32&&Re(v,"color",Ot(ot[5].cpu)),ot[8]["1min"]>0?Bt?Bt.p(ot,yt):(Bt=Is(ot),Bt.c(),Bt.m(u,h)):Bt&&(Bt.d(1),Bt=null),fr===(fr=zr(ot))&&$t?$t.p(ot,yt):($t.d(1),$t=fr(ot),$t&&($t.c(),$t.m(_,null))),ot[4].length>0?zt?zt.p(ot,yt):(zt=Hs(ot),zt.c(),zt.m(u,null)):zt&&(zt.d(1),zt=null),yt[0]&512&&I!==(I=ot[9].used+"")&&he(R,I),yt[0]&512&&K!==(K=ot[9].total+"")&&he(J,K),yt[0]&32&&M!==(M=ot[5].memory.toFixed(2)+"")&&he(P,M),yt[0]&32&&Re(W,"color",Ot(ot[5].memory)),Dr===(Dr=Xr(ot))&&er?er.p(ot,yt):(er.d(1),er=Dr(ot),er&&(er.c(),er.m($,null))),yt[0]&32&&q!==(q=ot[5].disk+"")&&he(ne,q),yt[0]&32&&Re(Q,"color",Ot(ot[5].disk)),yt[0]&32&&Re(ge,"width",ot[5].disk+"%"),yt[0]&32&&Re(ge,"background-color",Ot(ot[5].disk)),yt[0]&128&&Se!==(Se=ot[7].used+"")&&he(ke,Se),yt[0]&128&&Ce!==(Ce=ot[7].total+"")&&he(Qe,Ce),yt[0]&32&&ht!==(ht=Ar((($r=ot[5].network)==null?void 0:$r.in)||0)+"")&&he(re,ht),yt[0]&32&&Ne!==(Ne=Ar(((ei=ot[5].network)==null?void 0:ei.out)||0)+"")&&he(be,Ne),yt[0]&64&&Te!==(Te=(ot[6].os||"Unknown")+"")&&he(Xe,Te),yt[0]&64&&_t!==(_t=(ot[6].kernel||"Unknown")+"")&&he(At,_t),yt[0]&64&&Ve!==(Ve=(ot[6].uptime||"Unknown")+"")&&he(Ut,Ve),yt[0]&64&&Dt!==(Dt=(ot[6].processes||"N/A")+"")&&he(oe,Dt)},i:Oe,o:Oe,d(ot){ot&&N(e),wt.d(),vt&&vt.d(),Bt&&Bt.d(),$t.d(),zt&&zt.d(),er.d()}}}function Ot(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function Ar(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,n=r;for(;n>=1024&&t<e.length-1;)n/=1024,t++;return`${n.toFixed(1)} ${e[t]}`}function zs(r){if(r===0)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0,n=r;for(;n>=1024&&t<e.length-1;)n/=1024,t++;return`${n.toFixed(1)} ${e[t]}`}function Rh(r,e,t){let n,a,b,d,i,o;Pt(r,Vt,V=>t(13,i=V)),Pt(r,Kt,V=>t(14,o=V));const u={cpu:0,memory:0,disk:0,network:{in:0,out:0}},m={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},f={used:"0 GB",total:"0 GB"},g={"1min":0,"5min":0,"15min":0},v={used:"0 GB",total:"0 GB"};let k=[],y=[],c=[],p={...u},h={...m},_={...f},w={...g},L={...v},x=new Map,E=new Map,S=new Map,D=new Map,B=new Map,O=new Map,I=new Map,R=new Map,j=null,K=null;function J(V){if(!V){t(2,k=[]),t(3,y=[]),t(4,c=[]),t(5,p={...u}),t(6,h={...m}),t(7,_={...f}),t(8,w={...g}),t(9,L={...v});return}t(2,k=x.get(V)||[]),t(3,y=E.get(V)||[]),t(4,c=S.get(V)||[]),t(5,p=D.get(V)||{...u}),t(6,h=B.get(V)||{...m}),t(7,_=O.get(V)||{...f}),t(8,w=I.get(V)||{...g}),t(9,L=R.get(V)||{...v})}function te(V){V&&(x=new Map(x).set(V,k),E=new Map(E).set(V,y),S=new Map(S).set(V,c),D=new Map(D).set(V,p),B=new Map(B).set(V,h),O=new Map(O).set(V,_),I=new Map(I).set(V,w),R=new Map(R).set(V,L))}function W(V){var ne,ie,ce,fe,ge,pe,ye,Ke,Le,Se,ke,se,_e,ue,Ce;if(!V)return null;const X=(ne=V.cpu)!=null&&ne.per_core&&Array.isArray(V.cpu.per_core)?V.cpu.per_core:null,Z={cpu:typeof V.cpu=="number"?V.cpu:((ie=V.cpu)==null?void 0:ie.overall)||0,memory:typeof V.memory=="number"?V.memory:((ce=V.memory)==null?void 0:ce.used_percent)||0,disk:typeof V.disk=="number"?V.disk:((pe=(ge=(fe=V.disk)==null?void 0:fe.partitions)==null?void 0:ge[0])==null?void 0:pe.used_percent)||0,network:{in:typeof((ye=V.network)==null?void 0:ye.in)=="number"?V.network.in*(1024*1024):typeof((Ke=V.network)==null?void 0:Ke.rx_rate)=="number"?V.network.rx_rate:0,out:typeof((Le=V.network)==null?void 0:Le.out)=="number"?V.network.out*(1024*1024):typeof((Se=V.network)==null?void 0:Se.tx_rate)=="number"?V.network.tx_rate:0}},F=V.system?{os:V.system.os||m.os,kernel:V.system.kernel||m.kernel,uptime:V.system.uptime||m.uptime,processes:V.system.processes||m.processes}:null;let T=null;if((se=(ke=V.disk)==null?void 0:ke.partitions)!=null&&se[0]){const Qe=V.disk.partitions[0],ut=(Qe.used/(1024*1024*1024)).toFixed(1),ze=(Qe.total/(1024*1024*1024)).toFixed(1);T={used:`${ut} GB`,total:`${ze} GB`}}let Q=null;(_e=V.cpu)!=null&&_e.load_average&&Array.isArray(V.cpu.load_average)&&V.cpu.load_average.length>=3&&(Q={"1min":V.cpu.load_average[0]||0,"5min":V.cpu.load_average[1]||0,"15min":V.cpu.load_average[2]||0});let q=null;if(((ue=V.memory)==null?void 0:ue.used)!==void 0&&((Ce=V.memory)==null?void 0:Ce.total)!==void 0){const Qe=V.memory.used,ut=V.memory.total;q={used:zs(Qe),total:zs(ut)}}return{stats:Z,cpuPerCore:X,systemInfo:F,diskInfo:T,loadInfo:Q,memoryDetail:q}}async function M(){const V=i;if(!V||!a||b)return;const{GetMonitoringData:X}=window.wailsBindings||{};if(typeof X=="function")try{const Z=await X(V),F=W(Z);if(F){const T=[...x.get(V)||[],F.stats.cpu].slice(-60),Q=[...E.get(V)||[],F.stats.memory].slice(-60),q=F.cpuPerCore||S.get(V)||[],ne=F.systemInfo||B.get(V)||{...m},ie=F.diskInfo||O.get(V)||{...f},ce=F.loadInfo||I.get(V)||{...g},fe=F.memoryDetail||R.get(V)||{...v},ge=F.stats;x=new Map(x).set(V,T),E=new Map(E).set(V,Q),S=new Map(S).set(V,q),D=new Map(D).set(V,ge),B=new Map(B).set(V,ne),O=new Map(O).set(V,ie),I=new Map(I).set(V,ce),R=new Map(R).set(V,fe),V===i&&(t(5,p=ge),t(2,k=T),t(3,y=Q),t(4,c=q),t(6,h=ne),t(7,_=ie),t(8,w=ce),t(9,L=fe))}}catch(Z){console.error("Failed to fetch monitoring data:",Z)}}ar(()=>(j=setInterval(M,2e3),()=>{clearInterval(j)})),Ir(()=>{j&&clearInterval(j)});const P=(V,X)=>{const Z=X/(k.length-1)*100,F=100-V;return`${X===0?"M":"L"} ${Z} ${F}`},H=(V,X)=>{const Z=X/(k.length-1)*100,F=100-V;return`${X===0?"M":"L"} ${Z} ${F}`},z=(V,X)=>{const Z=X/(y.length-1)*100,F=100-V;return`${X===0?"M":"L"} ${Z} ${F}`},$=(V,X)=>{const Z=X/(y.length-1)*100,F=100-V;return`${X===0?"M":"L"} ${Z} ${F}`};return r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,n=i?o.get(i):null),r.$$.dirty[0]&4096&&t(1,a=(n==null?void 0:n.connected)||!1),r.$$.dirty[0]&4096&&t(0,b=(n==null?void 0:n.type)==="local"),r.$$.dirty[0]&3&&t(11,d=a&&!b),r.$$.dirty[0]&8192&&t(10,K=i),r.$$.dirty[0]&9216&&K!==i&&(K&&te(K),J(i)),r.$$.dirty[0]&10240&&i&&d&&M(),r.$$.dirty[0]&10240&&(!i||!d)&&(t(2,k=[]),t(3,y=[]),t(4,c=[]),t(5,p={...u}),t(6,h={...m}),t(7,_={...f}),t(8,w={...g}),t(9,L={...v}))},[b,a,k,y,c,p,h,_,w,L,K,d,n,i,o,P,H,z,$]}class Oh extends Et{constructor(e){super(),xt(this,e,Rh,Ah,Ct,{},null,[-1,-1])}}function Ph(r){let e;return{c(){e=C("span"),e.textContent="✗ 无效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Ih(r){let e;return{c(){e=C("span"),e.textContent="✓ 有效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function js(r){let e,t,n,a,b;return{c(){e=C("div"),t=de("svg"),n=de("path"),a=A(),b=G(r[3]),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),s(t,"class","w-4 h-4"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(d,i){U(d,e,i),l(e,t),l(t,n),l(e,a),l(e,b)},p(d,i){i&8&&he(b,d[3])},d(d){d&&N(e)}}}function Ws(r){let e,t,n;return{c(){e=C("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(a,b){U(a,e,b),t||(n=Y(e,"click",r[9]),t=!0)},p:Oe,d(a){a&&N(e),t=!1,n()}}}function Hh(r){let e,t,n,a,b,d,i,o,u=r[5].chars+"",m,f,g=r[5].lines+"",v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe;function ye(se,_e){if(se[4])return Ih;if(se[3])return Ph}let Ke=ye(r),Le=Ke&&Ke(r),Se=r[3]&&js(r),ke=r[1]&&Ws(r);return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("label"),b=C("span"),b.textContent="输入 JSON",d=A(),Le&&Le.c(),i=A(),o=C("div"),m=G(u),f=G(" 字符 · "),v=G(g),k=G(" 行"),y=A(),c=C("textarea"),h=A(),Se&&Se.c(),_=A(),w=C("div"),L=C("button"),x=de("svg"),E=de("path"),S=A(),D=C("span"),D.textContent="格式化",O=A(),I=C("button"),R=de("svg"),j=de("path"),K=A(),J=C("span"),J.textContent="压缩",W=A(),M=C("button"),P=de("svg"),H=de("path"),z=A(),$=C("span"),$.textContent="转义",X=A(),Z=C("div"),F=C("div"),T=C("label"),T.textContent="输出",Q=A(),ke&&ke.c(),q=A(),ne=C("textarea"),ie=A(),ce=C("div"),fe=C("button"),fe.textContent="清空全部",s(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(o,"class","text-xs text-gray-500 dark:text-gray-400"),s(n,"class","flex items-center justify-between mb-2"),s(c,"placeholder","输入 JSON..."),s(c,"class",p="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),s(t,"class","relative"),s(E,"stroke-linecap","round"),s(E,"stroke-linejoin","round"),s(E,"stroke-width","2"),s(E,"d","M4 6h16M4 12h16m-7 6h7"),s(x,"class","w-4 h-4"),s(x,"fill","none"),s(x,"stroke","currentColor"),s(x,"viewBox","0 0 24 24"),s(D,"class","text-sm"),L.disabled=B=r[2]||!r[0].trim(),s(L,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(j,"stroke-linecap","round"),s(j,"stroke-linejoin","round"),s(j,"stroke-width","2"),s(j,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),s(R,"class","w-4 h-4"),s(R,"fill","none"),s(R,"stroke","currentColor"),s(R,"viewBox","0 0 24 24"),s(J,"class","text-sm"),I.disabled=te=r[2]||!r[0].trim(),s(I,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(H,"stroke-linecap","round"),s(H,"stroke-linejoin","round"),s(H,"stroke-width","2"),s(H,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),s(P,"class","w-4 h-4"),s(P,"fill","none"),s(P,"stroke","currentColor"),s(P,"viewBox","0 0 24 24"),s($,"class","text-sm"),M.disabled=V=r[2]||!r[0].trim(),s(M,"class","flex items-center justify-center gap-2 px-4 py-3 accent-gradient hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(w,"class","grid grid-cols-3 gap-3"),s(T,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(F,"class","flex items-center justify-between mb-2"),ne.readOnly=!0,s(ne,"placeholder","格式化后的 JSON 将显示在这里..."),s(ne,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(fe,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(ce,"class","flex justify-end"),s(e,"class","space-y-6")},m(se,_e){U(se,e,_e),l(e,t),l(t,n),l(n,a),l(a,b),l(a,d),Le&&Le.m(a,null),l(n,i),l(n,o),l(o,m),l(o,f),l(o,v),l(o,k),l(t,y),l(t,c),Me(c,r[0]),l(t,h),Se&&Se.m(t,null),l(e,_),l(e,w),l(w,L),l(L,x),l(x,E),l(L,S),l(L,D),l(w,O),l(w,I),l(I,R),l(R,j),l(I,K),l(I,J),l(w,W),l(w,M),l(M,P),l(P,H),l(M,z),l(M,$),l(e,X),l(e,Z),l(Z,F),l(F,T),l(F,Q),ke&&ke.m(F,null),l(Z,q),l(Z,ne),Me(ne,r[1]),l(e,ie),l(e,ce),l(ce,fe),ge||(pe=[Y(c,"input",r[13]),Y(c,"keydown",r[11]),Y(L,"click",r[6]),Y(I,"click",r[7]),Y(M,"click",r[8]),Y(ne,"input",r[14]),Y(fe,"click",r[10])],ge=!0)},p(se,[_e]){Ke!==(Ke=ye(se))&&(Le&&Le.d(1),Le=Ke&&Ke(se),Le&&(Le.c(),Le.m(a,null))),_e&32&&u!==(u=se[5].chars+"")&&he(m,u),_e&32&&g!==(g=se[5].lines+"")&&he(v,g),_e&8&&p!==(p="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(se[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&s(c,"class",p),_e&1&&Me(c,se[0]),se[3]?Se?Se.p(se,_e):(Se=js(se),Se.c(),Se.m(t,null)):Se&&(Se.d(1),Se=null),_e&5&&B!==(B=se[2]||!se[0].trim())&&(L.disabled=B),_e&5&&te!==(te=se[2]||!se[0].trim())&&(I.disabled=te),_e&5&&V!==(V=se[2]||!se[0].trim())&&(M.disabled=V),se[1]?ke?ke.p(se,_e):(ke=Ws(se),ke.c(),ke.m(F,null)):ke&&(ke.d(1),ke=null),_e&2&&Me(ne,se[1])},i:Oe,o:Oe,d(se){se&&N(e),Le&&Le.d(),Se&&Se.d(),ke&&ke.d(),ge=!1,et(pe)}}}function Fh(r,e,t){let{themeStore:n}=e,a="",b="",d=!1,i="",o=!1,u={chars:0,lines:0};async function m(){if(!a.trim()){t(4,o=!1),t(3,i="");return}if(!window.wailsBindings){t(4,o=!1),t(3,i="Wails 绑定未加载");return}try{const w=await window.wailsBindings.ValidateJSON(a);t(4,o=w.valid),t(3,i=w.error||"")}catch(w){t(4,o=!1),t(3,i=w.message)}}function f(){t(5,u.chars=a.length,u),t(5,u.lines=a.split(`
`).length,u)}async function g(){if(!(!a.trim()||d||!window.wailsBindings)){t(2,d=!0),t(3,i="");try{t(1,b=await window.wailsBindings.FormatJSON(a)),t(4,o=!0),t(3,i="")}catch(w){t(3,i=w.message||"格式化失败")}finally{t(2,d=!1)}}}async function v(){if(!(!a.trim()||d||!window.wailsBindings)){t(2,d=!0),t(3,i="");try{t(1,b=await window.wailsBindings.MinifyJSON(a)),t(4,o=!0),t(3,i="")}catch(w){t(3,i=w.message||"压缩失败")}finally{t(2,d=!1)}}}async function k(){if(!(!a.trim()||d||!window.wailsBindings)){t(2,d=!0),t(3,i="");try{t(1,b=await window.wailsBindings.EscapeJSON(a)),t(4,o=!0),t(3,i="")}catch(w){t(3,i=w.message||"转义失败")}finally{t(2,d=!1)}}}async function y(){if(b)try{await navigator.clipboard.writeText(b)}catch(w){console.error("复制失败:",w)}}function c(){t(0,a=""),t(1,b=""),t(4,o=!1)}function p(w){(w.ctrlKey||w.metaKey)&&w.key.toLowerCase()==="enter"&&!d&&a.trim()&&(w.preventDefault(),g())}function h(){a=this.value,t(0,a)}function _(){b=this.value,t(1,b)}return r.$$set=w=>{"themeStore"in w&&t(12,n=w.themeStore)},m(),f(),[a,b,d,i,o,u,g,v,k,y,c,p,n,h,_]}class Ns extends Et{constructor(e){super(),xt(this,e,Fh,Hh,Ct,{themeStore:12})}}function zh(r){let e,t,n,a=r[2]==="encode"?"编码":"解码",b;return{c(){e=de("svg"),t=de("path"),n=A(),b=G(a),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(d,i){U(d,e,i),l(e,t),U(d,n,i),U(d,b,i)},p(d,i){i&4&&a!==(a=d[2]==="encode"?"编码":"解码")&&he(b,a)},d(d){d&&(N(e),N(n),N(b))}}}function jh(r){let e,t,n,a;return{c(){e=de("svg"),t=de("circle"),n=de("path"),a=G(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(n,"class","opacity-75"),s(n,"fill","currentColor"),s(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(b,d){U(b,e,d),l(e,t),l(e,n),U(b,a,d)},p:Oe,d(b){b&&(N(e),N(a))}}}function Us(r){let e,t,n;return{c(){e=C("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(a,b){U(a,e,b),t||(n=Y(e,"click",r[5]),t=!0)},p:Oe,d(a){a&&N(e),t=!1,n()}}}function Wh(r){let e,t,n,a,b,d,i,o,u,m,f,g,v=r[2]==="encode"?"输入文本":"输入 Base64",k,y,c,p,h,_,w,L,x,E,S,D,B=r[2]==="encode"?"Base64 输出":"解码结果",O,I,R,j,K,J,te,W,M,P,H,z;function $(F,T){return F[3]?jh:zh}let V=$(r),X=V(r),Z=r[1]&&Us(r);return{c(){e=C("div"),t=C("div"),n=C("button"),a=G("编码"),d=A(),i=C("button"),o=G("解码"),m=A(),f=C("div"),g=C("label"),k=G(v),y=A(),c=C("textarea"),h=A(),_=C("div"),w=C("button"),X.c(),x=A(),E=C("div"),S=C("div"),D=C("label"),O=G(B),I=A(),Z&&Z.c(),R=A(),j=C("textarea"),J=A(),te=C("div"),W=C("button"),W.textContent="清空全部",M=A(),P=C("button"),P.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,s(n,"class",b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(c,"placeholder",p=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),s(c,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),w.disabled=L=r[3]||!r[0].trim(),s(w,"class","flex items-center justify-center gap-2 px-6 py-3 accent-gradient hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(_,"class","flex items-center justify-center"),s(D,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(S,"class","flex items-center justify-between mb-2"),j.readOnly=!0,s(j,"placeholder",K=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(j,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(W,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(P,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(te,"class","flex justify-between items-center"),s(e,"class","space-y-6")},m(F,T){U(F,e,T),l(e,t),l(t,n),l(n,a),l(t,d),l(t,i),l(i,o),l(e,m),l(e,f),l(f,g),l(g,k),l(f,y),l(f,c),Me(c,r[0]),l(e,h),l(e,_),l(_,w),X.m(w,null),l(e,x),l(e,E),l(E,S),l(S,D),l(D,O),l(S,I),Z&&Z.m(S,null),l(E,R),l(E,j),Me(j,r[1]),l(e,J),l(e,te),l(te,W),l(te,M),l(te,P),H||(z=[Y(n,"click",r[10]),Y(i,"click",r[11]),Y(c,"input",r[12]),Y(c,"keydown",r[8]),Y(w,"click",r[4]),Y(j,"input",r[13]),Y(W,"click",r[6]),Y(P,"click",r[7])],H=!0)},p(F,[T]){T&4&&b!==(b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(F[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(n,"class",b),T&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(F[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",u),T&4&&v!==(v=F[2]==="encode"?"输入文本":"输入 Base64")&&he(k,v),T&4&&p!==(p=F[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&s(c,"placeholder",p),T&1&&Me(c,F[0]),V===(V=$(F))&&X?X.p(F,T):(X.d(1),X=V(F),X&&(X.c(),X.m(w,null))),T&9&&L!==(L=F[3]||!F[0].trim())&&(w.disabled=L),T&4&&B!==(B=F[2]==="encode"?"Base64 输出":"解码结果")&&he(O,B),F[1]?Z?Z.p(F,T):(Z=Us(F),Z.c(),Z.m(S,null)):Z&&(Z.d(1),Z=null),T&4&&K!==(K=F[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(j,"placeholder",K),T&2&&Me(j,F[1])},i:Oe,o:Oe,d(F){F&&N(e),X.d(),Z&&Z.d(),H=!1,et(z)}}}function Nh(r,e,t){let{themeStore:n}=e,a="",b="",d="encode",i=!1;async function o(){if(!(!a.trim()||i||!window.wailsBindings)){t(3,i=!0);try{d==="encode"?t(1,b=await window.wailsBindings.EncodeBase64(a)):t(1,b=await window.wailsBindings.DecodeBase64(a))}catch(p){t(1,b=""),console.error("处理失败:",p),alert("处理失败: "+(p.message||p))}finally{t(3,i=!1)}}}async function u(){if(b)try{await navigator.clipboard.writeText(b)}catch(p){console.error("复制失败:",p)}}function m(){t(0,a=""),t(1,b="")}function f(){t(2,d=d==="encode"?"decode":"encode"),t(0,a=""),t(1,b="")}function g(p){(p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="enter"&&!i&&a.trim()&&(p.preventDefault(),o())}const v=()=>t(2,d="encode"),k=()=>t(2,d="decode");function y(){a=this.value,t(0,a)}function c(){b=this.value,t(1,b)}return r.$$set=p=>{"themeStore"in p&&t(9,n=p.themeStore)},[a,b,d,i,o,u,m,f,g,n,v,k,y,c]}class Vs extends Et{constructor(e){super(),xt(this,e,Nh,Wh,Ct,{themeStore:9})}}function Ks(r,e,t){const n=r.slice();return n[29]=e[t],n}function qs(r,e,t){const n=r.slice();return n[29]=e[t],n}function Gs(r){let e,t=r[29].name+"",n;return{c(){e=C("option"),n=G(t),e.__value=r[29].id,Me(e,e.__value)},m(a,b){U(a,e,b),l(e,n)},p:Oe,d(a){a&&N(e)}}}function Js(r){let e,t=r[29].name+"",n;return{c(){e=C("option"),n=G(t),e.__value=r[29].id,Me(e,e.__value)},m(a,b){U(a,e,b),l(e,n)},p:Oe,d(a){a&&N(e)}}}function Ys(r){let e,t,n,a,b,d,i,o,u,m;return{c(){e=C("div"),t=C("button"),n=G("加密"),b=A(),d=C("button"),i=G("解密"),s(t,"class",a="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(d,"class",o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(f,g){U(f,e,g),l(e,t),l(t,n),l(e,b),l(e,d),l(d,i),u||(m=[Y(t,"click",r[24]),Y(d,"click",r[25])],u=!0)},p(f,g){g[0]&2&&a!==(a="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(f[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(t,"class",a),g[0]&2&&o!==(o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(f[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(d,"class",o)},d(f){f&&N(e),u=!1,et(m)}}}function Xs(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j;return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("label"),a.textContent="密钥（Hex）",b=A(),d=C("button"),d.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,i=A(),o=C("input"),u=A(),m=C("div"),f=G("密钥长度: "),g=G(r[9]),v=A(),k=C("div"),y=C("div"),c=C("label"),p=G(r[11]),h=G("（Hex）"),_=A(),w=C("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,L=A(),x=C("input"),S=A(),D=C("div"),B=G(r[11]),O=G("长度: "),I=G(r[10]),s(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(d,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(n,"class","flex items-center justify-between mb-2"),s(o,"type","text"),s(o,"placeholder","例如: 00112233445566778899aabbccddeeff"),s(o,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(c,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(w,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(y,"class","flex items-center justify-between mb-2"),s(x,"type","text"),s(x,"placeholder",E=r[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),s(x,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(D,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(K,J){U(K,e,J),l(e,t),l(t,n),l(n,a),l(n,b),l(n,d),l(t,i),l(t,o),Me(o,r[5]),l(t,u),l(t,m),l(m,f),l(m,g),l(e,v),l(e,k),l(k,y),l(y,c),l(c,p),l(c,h),l(y,_),l(y,w),l(k,L),l(k,x),Me(x,r[6]),l(k,S),l(k,D),l(D,B),l(D,O),l(D,I),R||(j=[Y(d,"click",r[19]),Y(o,"input",r[26]),Y(w,"click",r[20]),Y(x,"input",r[27])],R=!0)},p(K,J){J[0]&32&&o.value!==K[5]&&Me(o,K[5]),J[0]&512&&he(g,K[9]),J[0]&2048&&he(p,K[11]),J[0]&2048&&E!==(E=K[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10")&&s(x,"placeholder",E),J[0]&64&&x.value!==K[6]&&Me(x,K[6]),J[0]&2048&&he(B,K[11]),J[0]&1024&&he(I,K[10])},d(K){K&&N(e),R=!1,et(j)}}}function Uh(r){let e,t,n,a=r[2]?"计算哈希":r[1]==="decrypt"?"解密":"加密",b;return{c(){e=de("svg"),t=de("path"),n=A(),b=G(a),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(d,i){U(d,e,i),l(e,t),U(d,n,i),U(d,b,i)},p(d,i){i[0]&6&&a!==(a=d[2]?"计算哈希":d[1]==="decrypt"?"解密":"加密")&&he(b,a)},d(d){d&&(N(e),N(n),N(b))}}}function Vh(r){let e,t,n,a;return{c(){e=de("svg"),t=de("circle"),n=de("path"),a=G(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(n,"class","opacity-75"),s(n,"fill","currentColor"),s(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(b,d){U(b,e,d),l(e,t),l(e,n),U(b,a,d)},p:Oe,d(b){b&&(N(e),N(a))}}}function Zs(r){let e,t,n,a,b,d,i,o=r[2]?"哈希值":r[1]==="decrypt"?"明文":"Base64 密文",u,m,f,g,v,k,y,c,p,h,_=r[4].length+"",w,L,x,E;return{c(){e=C("div"),t=C("div"),n=C("label"),a=C("span"),b=G(r[12]),d=A(),i=C("span"),u=G(o),m=A(),f=C("button"),f.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,g=A(),v=C("div"),k=C("code"),y=G(r[4]),c=A(),p=C("div"),h=G("长度: "),w=G(_),L=G(" 字符"),s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(f,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),s(v,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),s(p,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(S,D){U(S,e,D),l(e,t),l(t,n),l(n,a),l(a,b),l(n,d),l(n,i),l(i,u),l(t,m),l(t,f),l(e,g),l(e,v),l(v,k),l(k,y),l(e,c),l(e,p),l(p,h),l(p,w),l(p,L),x||(E=Y(f,"click",r[15]),x=!0)},p(S,D){D[0]&4096&&he(b,S[12]),D[0]&6&&o!==(o=S[2]?"哈希值":S[1]==="decrypt"?"明文":"Base64 密文")&&he(u,o),D[0]&16&&he(y,S[4]),D[0]&16&&_!==(_=S[4].length+"")&&he(w,_)},d(S){S&&N(e),x=!1,E()}}}function Kh(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y=r[2]?"输入文本":r[1]==="decrypt"?"输入 Base64 密文":"输入明文",c,p,h,_,w,L=r[3].length+"",x,E,S,D,B,O,I,R,j,K,J,te,W=Ue(r[13].filter(Qs)),M=[];for(let T=0;T<W.length;T+=1)M[T]=Gs(qs(r,W,T));let P=Ue(r[13].filter($s)),H=[];for(let T=0;T<P.length;T+=1)H[T]=Js(Ks(r,P,T));let z=!r[2]&&Ys(r),$=!r[2]&&Xs(r);function V(T,Q){return T[7]?Vh:Uh}let X=V(r),Z=X(r),F=r[4]&&Zs(r);return{c(){e=C("div"),t=C("div"),n=C("label"),n.textContent="选择算法",a=A(),b=C("div"),d=C("div"),i=C("select"),o=C("optgroup");for(let T=0;T<M.length;T+=1)M[T].c();u=C("optgroup");for(let T=0;T<H.length;T+=1)H[T].c();m=A(),z&&z.c(),f=A(),$&&$.c(),g=A(),v=C("div"),k=C("label"),c=G(y),p=A(),h=C("textarea"),_=A(),w=C("div"),x=G(L),E=G(" 字符"),S=A(),D=C("div"),B=C("button"),Z.c(),I=A(),F&&F.c(),R=A(),j=C("div"),K=C("button"),K.textContent="清空全部",s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(o,"label","Hash"),s(u,"label","加密解密"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[0]===void 0&&dr(()=>r[22].call(i)),s(d,"class","flex-1"),s(b,"class","flex flex-col md:flex-row gap-3"),s(k,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(h,"placeholder",r[8]),s(h,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(w,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),B.disabled=O=r[7]||!r[3].trim()||!r[2]&&(!r[5].trim()||!r[6].trim()),s(B,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(D,"class","flex justify-center"),s(K,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(j,"class","flex justify-end"),s(e,"class","space-y-6")},m(T,Q){U(T,e,Q),l(e,t),l(t,n),l(t,a),l(t,b),l(b,d),l(d,i),l(i,o);for(let q=0;q<M.length;q+=1)M[q]&&M[q].m(o,null);l(i,u);for(let q=0;q<H.length;q+=1)H[q]&&H[q].m(u,null);nr(i,r[0],!0),l(b,m),z&&z.m(b,null),l(e,f),$&&$.m(e,null),l(e,g),l(e,v),l(v,k),l(k,c),l(v,p),l(v,h),Me(h,r[3]),l(v,_),l(v,w),l(w,x),l(w,E),l(e,S),l(e,D),l(D,B),Z.m(B,null),l(e,I),F&&F.m(e,null),l(e,R),l(e,j),l(j,K),J||(te=[Y(i,"change",r[22]),Y(i,"change",r[23]),Y(h,"input",r[28]),Y(h,"keydown",r[18]),Y(B,"click",r[14]),Y(K,"click",r[16])],J=!0)},p(T,Q){if(Q[0]&8192){W=Ue(T[13].filter(Qs));let q;for(q=0;q<W.length;q+=1){const ne=qs(T,W,q);M[q]?M[q].p(ne,Q):(M[q]=Gs(ne),M[q].c(),M[q].m(o,null))}for(;q<M.length;q+=1)M[q].d(1);M.length=W.length}if(Q[0]&8192){P=Ue(T[13].filter($s));let q;for(q=0;q<P.length;q+=1){const ne=Ks(T,P,q);H[q]?H[q].p(ne,Q):(H[q]=Js(ne),H[q].c(),H[q].m(u,null))}for(;q<H.length;q+=1)H[q].d(1);H.length=P.length}Q[0]&8193&&nr(i,T[0]),T[2]?z&&(z.d(1),z=null):z?z.p(T,Q):(z=Ys(T),z.c(),z.m(b,null)),T[2]?$&&($.d(1),$=null):$?$.p(T,Q):($=Xs(T),$.c(),$.m(e,g)),Q[0]&6&&y!==(y=T[2]?"输入文本":T[1]==="decrypt"?"输入 Base64 密文":"输入明文")&&he(c,y),Q[0]&256&&s(h,"placeholder",T[8]),Q[0]&8&&Me(h,T[3]),Q[0]&8&&L!==(L=T[3].length+"")&&he(x,L),X===(X=V(T))&&Z?Z.p(T,Q):(Z.d(1),Z=X(T),Z&&(Z.c(),Z.m(B,null))),Q[0]&236&&O!==(O=T[7]||!T[3].trim()||!T[2]&&(!T[5].trim()||!T[6].trim()))&&(B.disabled=O),T[4]?F?F.p(T,Q):(F=Zs(T),F.c(),F.m(e,R)):F&&(F.d(1),F=null)},i:Oe,o:Oe,d(T){T&&N(e),Mt(M,T),Mt(H,T),z&&z.d(),$&&$.d(),Z.d(),F&&F.d(),J=!1,et(te)}}}const Qs=r=>r.type==="hash",$s=r=>r.type==="crypto";function qh(r,e,t){let n,a,b,d,i,o,{themeStore:u}=e,m="",f="",g="md5",v="encrypt",k="",y="",c=!1;const p=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];async function h(){if(!(!m.trim()||c||!window.wailsBindings)&&!(!n&&(!k.trim()||!y.trim()))){t(7,c=!0),t(4,f="");try{n?t(4,f=await window.wailsBindings.CalculateHash(m,g)):v==="encrypt"?t(4,f=await window.wailsBindings.EncryptText(m,g,k,y)):t(4,f=await window.wailsBindings.DecryptText(m,g,k,y))}catch(J){t(4,f=""),console.error("操作失败:",J),alert("操作失败: "+(J.message||J))}finally{t(7,c=!1)}}}async function _(){if(f)try{await navigator.clipboard.writeText(f)}catch(J){console.error("复制失败:",J)}}function w(){t(3,m=""),t(4,f=""),t(5,k=""),t(6,y="")}function L(){t(3,m=""),t(4,f="")}function x(J){(J.ctrlKey||J.metaKey)&&J.key.toLowerCase()==="enter"&&!c&&m.trim()&&(J.preventDefault(),h())}function E(){let J;g==="sm4-cbc"?J=16:J=32;const te=new Uint8Array(J);crypto.getRandomValues(te),t(5,k=Array.from(te).map(W=>W.toString(16).padStart(2,"0")).join(""))}function S(){const J=g==="aes-gcm"?12:16,te=new Uint8Array(J);crypto.getRandomValues(te),t(6,y=Array.from(te).map(W=>W.toString(16).padStart(2,"0")).join(""))}function D(){g=Pr(this),t(0,g),t(13,p)}const B=()=>{w()},O=()=>{t(1,v="encrypt"),L()},I=()=>{t(1,v="decrypt"),L()};function R(){k=this.value,t(5,k)}function j(){y=this.value,t(6,y)}function K(){m=this.value,t(3,m)}return r.$$set=J=>{"themeStore"in J&&t(21,u=J.themeStore)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,n=(()=>{const J=p.find(te=>te.id===g);return(J==null?void 0:J.type)==="hash"})()),r.$$.dirty[0]&1&&t(12,a=(()=>{var J;return((J=p.find(te=>te.id===g))==null?void 0:J.name)||""})()),r.$$.dirty[0]&1&&t(11,b=g==="aes-gcm"?"Nonce":"IV"),r.$$.dirty[0]&1&&t(10,d=g==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"),r.$$.dirty[0]&1&&t(9,i=g==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"),r.$$.dirty[0]&6&&t(8,o=n?"输入要计算哈希的文本...":v==="decrypt"?"输入 Base64 密文...":"输入要加密的明文...")},[g,v,n,m,f,k,y,c,o,i,d,b,a,p,h,_,w,L,x,E,S,u,D,B,O,I,R,j,K]}class en extends Et{constructor(e){super(),xt(this,e,qh,Kh,Ct,{themeStore:21},null,[-1,-1])}}function Gh(r){let e,t,n,a,b,d,i,o,u,m,f,g=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",v,k,y;return{c(){e=C("div"),t=C("div"),n=C("label"),n.textContent="输入日期时间",a=A(),b=C("button"),b.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,d=A(),i=C("input"),u=A(),m=C("div"),f=G("格式: "),v=G(g),s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(b,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),s(t,"class","flex items-center justify-between mb-2"),s(i,"type","text"),s(i,"placeholder",o=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(c,p){U(c,e,p),l(e,t),l(t,n),l(t,a),l(t,b),l(e,d),l(e,i),Me(i,r[3]),l(e,u),l(e,m),l(m,f),l(m,v),k||(y=[Y(b,"click",r[9]),Y(i,"input",r[19]),Y(i,"keydown",r[12])],k=!0)},p(c,p){p&2&&o!==(o=c[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&s(i,"placeholder",o),p&8&&i.value!==c[3]&&Me(i,c[3]),p&2&&g!==(g=c[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&he(v,g)},d(c){c&&N(e),k=!1,et(y)}}}function Jh(r){let e,t,n,a,b=r[1]==="milliseconds"?"毫秒":"秒",d,i,o,u,m,f,g,v,k;return{c(){e=C("div"),t=C("div"),n=C("label"),a=G("输入 Unix 时间戳（"),d=G(b),i=G("）"),o=A(),u=C("button"),u.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,m=A(),f=C("input"),s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(u,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),s(t,"class","flex items-center justify-between mb-2"),s(f,"type","number"),s(f,"placeholder",g=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),s(f,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(y,c){U(y,e,c),l(e,t),l(t,n),l(n,a),l(n,d),l(n,i),l(t,o),l(t,u),l(e,m),l(e,f),Me(f,r[2]),v||(k=[Y(u,"click",r[8]),Y(f,"input",r[18]),Y(f,"keydown",r[12])],v=!0)},p(y,c){c&2&&b!==(b=y[1]==="milliseconds"?"毫秒":"秒")&&he(d,b),c&2&&g!==(g=y[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&s(f,"placeholder",g),c&4&&xr(f.value)!==y[2]&&Me(f,y[2])},d(y){y&&N(e),v=!1,et(k)}}}function Yh(r){let e,t,n;return{c(){e=de("svg"),t=de("path"),n=G(`
        转换`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,b){U(a,e,b),l(e,t),U(a,n,b)},d(a){a&&(N(e),N(n))}}}function Xh(r){let e,t,n,a;return{c(){e=de("svg"),t=de("circle"),n=de("path"),a=G(`
        转换中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(n,"class","opacity-75"),s(n,"fill","currentColor"),s(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(b,d){U(b,e,d),l(e,t),l(e,n),U(b,a,d)},d(b){b&&(N(e),N(a))}}}function tn(r){let e,t,n,a=r[0]==="toDateTime"?"日期时间":"时间戳",b,d,i,o,u,m,f,g,v;return{c(){e=C("div"),t=C("div"),n=C("label"),b=G(a),d=A(),i=C("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,o=A(),u=C("div"),m=C("code"),f=G(r[4]),s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(m,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),s(u,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,y){U(k,e,y),l(e,t),l(t,n),l(n,b),l(t,d),l(t,i),l(e,o),l(e,u),l(u,m),l(m,f),g||(v=Y(i,"click",r[10]),g=!0)},p(k,y){y&1&&a!==(a=k[0]==="toDateTime"?"日期时间":"时间戳")&&he(b,a),y&16&&he(f,k[4])},d(k){k&&N(e),g=!1,v()}}}function Zh(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I=r[1]==="milliseconds"?"毫秒":"秒",R,j,K,J,te,W,M,P,H,z,$,V,X,Z,F;function T(ge,pe){return ge[0]==="toDateTime"?Jh:Gh}let Q=T(r),q=Q(r);function ne(ge,pe){return ge[5]?Xh:Yh}let ie=ne(r),ce=ie(r),fe=r[4]&&tn(r);return{c(){e=C("div"),t=C("div"),n=C("button"),a=G("时间戳 → 日期时间"),d=A(),i=C("button"),o=G("日期时间 → 时间戳"),m=A(),f=C("div"),g=C("div"),v=C("button"),k=G("秒"),c=A(),p=C("button"),h=G("毫秒"),w=A(),L=C("div"),x=C("div"),E=de("svg"),S=de("path"),D=A(),B=C("span"),O=G("当前时间戳（"),R=G(I),j=G("）: "),K=C("strong"),J=G(r[6]),te=A(),q.c(),W=A(),M=C("div"),P=C("button"),ce.c(),z=A(),fe&&fe.c(),$=A(),V=C("div"),X=C("button"),X.textContent="清空全部",s(n,"class",b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(v,"class",y="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(p,"class",_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(g,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(f,"class","flex justify-end"),s(S,"stroke-linecap","round"),s(S,"stroke-linejoin","round"),s(S,"stroke-width","2"),s(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(E,"class","w-5 h-5"),s(E,"fill","none"),s(E,"stroke","currentColor"),s(E,"viewBox","0 0 24 24"),s(K,"class","font-mono"),s(x,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),s(L,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),P.disabled=H=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),s(P,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(M,"class","flex justify-center"),s(X,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(V,"class","flex justify-end"),s(e,"class","space-y-6")},m(ge,pe){U(ge,e,pe),l(e,t),l(t,n),l(n,a),l(t,d),l(t,i),l(i,o),l(e,m),l(e,f),l(f,g),l(g,v),l(v,k),l(g,c),l(g,p),l(p,h),l(e,w),l(e,L),l(L,x),l(x,E),l(E,S),l(x,D),l(x,B),l(B,O),l(B,R),l(B,j),l(B,K),l(K,J),l(e,te),q.m(e,null),l(e,W),l(e,M),l(M,P),ce.m(P,null),l(e,z),fe&&fe.m(e,null),l(e,$),l(e,V),l(V,X),Z||(F=[Y(n,"click",r[14]),Y(i,"click",r[15]),Y(v,"click",r[16]),Y(p,"click",r[17]),Y(P,"click",r[7]),Y(X,"click",r[11])],Z=!0)},p(ge,[pe]){pe&1&&b!==(b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ge[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(n,"class",b),pe&1&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ge[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",u),pe&2&&y!==(y="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ge[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(v,"class",y),pe&2&&_!==(_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ge[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(p,"class",_),pe&2&&I!==(I=ge[1]==="milliseconds"?"毫秒":"秒")&&he(R,I),pe&64&&he(J,ge[6]),Q===(Q=T(ge))&&q?q.p(ge,pe):(q.d(1),q=Q(ge),q&&(q.c(),q.m(e,W))),ie!==(ie=ne(ge))&&(ce.d(1),ce=ie(ge),ce&&(ce.c(),ce.m(P,null))),pe&45&&H!==(H=ge[5]||(ge[0]==="toDateTime"?!ge[2].trim():!ge[3].trim()))&&(P.disabled=H),ge[4]?fe?fe.p(ge,pe):(fe=tn(ge),fe.c(),fe.m(e,$)):fe&&(fe.d(1),fe=null)},i:Oe,o:Oe,d(ge){ge&&N(e),q.d(),ce.d(),fe&&fe.d(),Z=!1,et(F)}}}const Qh="2006-01-02 15:04:05",$h="2006-01-02 15:04:05.000";function eu(r,e,t){let{themeStore:n}=e,a="toDateTime",b="seconds",d="",i="",o="",u=!1,m=0;function f(){const D=Date.now();t(6,m=b==="milliseconds"?D:Math.floor(D/1e3))}function g(){return b==="milliseconds"?$h:Qh}async function v(){if(window.wailsBindings){t(5,u=!0),t(4,o="");try{if(a==="toDateTime"){const D=parseInt(d.trim());if(isNaN(D))throw new Error("请输入有效的时间戳");b==="milliseconds"?t(4,o=await window.wailsBindings.TimestampToDateTimeMs(D,g())):t(4,o=await window.wailsBindings.TimestampToDateTime(D,g()))}else{if(!i.trim())throw new Error("请输入日期时间");if(b==="milliseconds"){const D=await window.wailsBindings.DateTimeToTimestampMs(i,g());t(4,o=D.toString())}else{const D=await window.wailsBindings.DateTimeToTimestamp(i,g());t(4,o=D.toString())}}}catch(D){t(4,o=""),console.error("转换失败:",D),alert("转换失败: "+(D.message||D))}finally{t(5,u=!1)}}}async function k(){if(window.wailsBindings)try{const D=b==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,d=D.toString())}catch(D){console.error("获取当前时间戳失败:",D)}}async function y(){if(window.wailsBindings)try{const D=b==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),B=b==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(D,g()):await window.wailsBindings.TimestampToDateTime(D,g());t(3,i=B)}catch(D){console.error("获取当前时间失败:",D)}}async function c(){if(o)try{await navigator.clipboard.writeText(o)}catch(D){console.error("复制失败:",D)}}function p(){t(2,d=""),t(3,i=""),t(4,o="")}function h(D){(D.ctrlKey||D.metaKey)&&D.key.toLowerCase()==="enter"&&!u&&(a==="toDateTime"&&d.trim()||a==="toTimestamp"&&i.trim())&&(D.preventDefault(),v())}const _=()=>{t(0,a="toDateTime"),p()},w=()=>{t(0,a="toTimestamp"),p()},L=()=>{t(1,b="seconds"),p()},x=()=>{t(1,b="milliseconds"),p()};function E(){d=xr(this.value),t(2,d)}function S(){i=this.value,t(3,i)}return r.$$set=D=>{"themeStore"in D&&t(13,n=D.themeStore)},f(),[a,b,d,i,o,u,m,v,k,y,c,p,h,n,_,w,L,x,E,S]}class rn extends Et{constructor(e){super(),xt(this,e,eu,Zh,Ct,{themeStore:13})}}function sn(r,e,t){const n=r.slice();return n[12]=e[t],n[14]=t,n}function tu(r){let e,t,n,a;return{c(){e=de("svg"),t=de("path"),n=A(),a=C("span"),a.textContent="生成 UUID v4",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),s(e,"class","w-6 h-6"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(b,d){U(b,e,d),l(e,t),U(b,n,d),U(b,a,d)},d(b){b&&(N(e),N(n),N(a))}}}function ru(r){let e,t,n,a;return{c(){e=de("svg"),t=de("circle"),n=de("path"),a=G(`
        生成中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(n,"class","opacity-75"),s(n,"fill","currentColor"),s(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-6 h-6"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(b,d){U(b,e,d),l(e,t),l(e,n),U(b,a,d)},d(b){b&&(N(e),N(a))}}}function nn(r){let e,t,n,a,b,d,i,o,u,m,f;function g(y,c){return y[3]===y[0]?su:iu}let v=g(r),k=v(r);return{c(){e=C("div"),t=C("div"),n=C("label"),n.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,a=A(),b=C("button"),k.c(),d=A(),i=C("div"),o=C("code"),u=G(r[0]),s(n,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(b,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),s(t,"class","flex items-center justify-between mb-3"),s(o,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),s(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(y,c){U(y,e,c),l(e,t),l(t,n),l(t,a),l(t,b),k.m(b,null),l(e,d),l(e,i),l(i,o),l(o,u),m||(f=Y(b,"click",r[9]),m=!0)},p(y,c){v!==(v=g(y))&&(k.d(1),k=v(y),k&&(k.c(),k.m(b,null))),c&1&&he(u,y[0])},d(y){y&&N(e),k.d(),m=!1,f()}}}function iu(r){let e,t,n;return{c(){e=de("svg"),t=de("path"),n=G(`
            复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,b){U(a,e,b),l(e,t),U(a,n,b)},d(a){a&&(N(e),N(n))}}}function su(r){let e,t,n;return{c(){e=de("svg"),t=de("path"),n=G(`
            已复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,b){U(a,e,b),l(e,t),U(a,n,b)},d(a){a&&(N(e),N(n))}}}function on(r){let e,t,n,a,b,d,i,o,u=r[1].length+"",m,f,g,v,k,y,c,p,h=Ue(r[1]),_=[];for(let w=0;w<h.length;w+=1)_[w]=ln(sn(r,h,w));return{c(){e=C("div"),t=C("div"),n=C("label"),a=de("svg"),b=de("path"),d=G(`
          历史记录
          `),i=C("span"),o=G("("),m=G(u),f=G("/10)"),g=A(),v=C("button"),v.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=A(),y=C("div");for(let w=0;w<_.length;w+=1)_[w].c();s(b,"stroke-linecap","round"),s(b,"stroke-linejoin","round"),s(b,"stroke-width","2"),s(b,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(a,"class","w-4 h-4"),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),s(n,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(v,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),s(t,"class","flex items-center justify-between mb-3"),s(y,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(w,L){U(w,e,L),l(e,t),l(t,n),l(n,a),l(a,b),l(n,d),l(n,i),l(i,o),l(i,m),l(i,f),l(t,g),l(t,v),l(e,k),l(e,y);for(let x=0;x<_.length;x+=1)_[x]&&_[x].m(y,null);c||(p=Y(v,"click",r[6]),c=!0)},p(w,L){if(L&2&&u!==(u=w[1].length+"")&&he(m,u),L&170){h=Ue(w[1]);let x;for(x=0;x<h.length;x+=1){const E=sn(w,h,x);_[x]?_[x].p(E,L):(_[x]=ln(E),_[x].c(),_[x].m(y,null))}for(;x<_.length;x+=1)_[x].d(1);_.length=h.length}},d(w){w&&N(e),Mt(_,w),c=!1,p()}}}function nu(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function ou(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function ln(r){let e,t,n=r[12]+"",a,b,d,i,o,u,m,f,g;function v(){return r[10](r[12])}function k(h,_){return h[3]===h[12]?ou:nu}let y=k(r),c=y(r);function p(){return r[11](r[12])}return{c(){e=C("div"),t=C("code"),a=G(n),b=A(),d=C("div"),i=C("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',o=A(),u=C("button"),c.c(),m=A(),s(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),s(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(i,"title","使用此 UUID"),s(u,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(u,"title","复制"),s(d,"class","flex items-center gap-2 shrink-0"),s(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(h,_){U(h,e,_),l(e,t),l(t,a),l(e,b),l(e,d),l(d,i),l(d,o),l(d,u),c.m(u,null),l(e,m),f||(g=[Y(i,"click",v),Y(u,"click",p)],f=!0)},p(h,_){r=h,_&2&&n!==(n=r[12]+"")&&he(a,n),y!==(y=k(r))&&(c.d(1),c=y(r),c&&(c.c(),c.m(u,null)))},d(h){h&&N(e),c.d(),f=!1,et(g)}}}function an(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',s(e,"class","text-center py-8")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function lu(r){let e,t,n,a,b,d,i,o,u,m;function f(p,h){return p[2]?ru:tu}let g=f(r),v=g(r),k=r[0]&&nn(r),y=r[1].length>0&&on(r),c=!r[0]&&an();return{c(){e=C("div"),t=C("div"),n=C("button"),v.c(),a=A(),b=C("div"),d=A(),k&&k.c(),i=A(),y&&y.c(),o=A(),c&&c.c(),s(b,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),n.disabled=r[2],s(n,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),s(t,"class","text-center"),s(e,"class","space-y-6")},m(p,h){U(p,e,h),l(e,t),l(t,n),v.m(n,null),l(n,a),l(n,b),l(e,d),k&&k.m(e,null),l(e,i),y&&y.m(e,null),l(e,o),c&&c.m(e,null),u||(m=Y(n,"click",r[4]),u=!0)},p(p,[h]){g!==(g=f(p))&&(v.d(1),v=g(p),v&&(v.c(),v.m(n,a))),h&4&&(n.disabled=p[2]),p[0]?k?k.p(p,h):(k=nn(p),k.c(),k.m(e,i)):k&&(k.d(1),k=null),p[1].length>0?y?y.p(p,h):(y=on(p),y.c(),y.m(e,o)):y&&(y.d(1),y=null),p[0]?c&&(c.d(1),c=null):c||(c=an(),c.c(),c.m(e,null))},i:Oe,o:Oe,d(p){p&&N(e),v.d(),k&&k.d(),y&&y.d(),c&&c.d(),u=!1,m()}}}function au(r,e,t){let{themeStore:n}=e,a="",b=[],d=!1,i=null;async function o(){if(window.wailsBindings){t(2,d=!0);try{const y=await window.wailsBindings.GenerateUUIDv4();t(0,a=y),b.length<10?t(1,b=[y,...b]):t(1,b=[y,...b.slice(0,9)])}catch(y){console.error("UUID 生成失败:",y),alert("UUID 生成失败: "+(y.message||y))}finally{t(2,d=!1)}}}async function u(y){try{await navigator.clipboard.writeText(y),t(3,i=y),setTimeout(()=>t(3,i=null),2e3)}catch(c){console.error("复制失败:",c)}}function m(){t(1,b=[])}function f(y){t(0,a=y)}const g=()=>u(a),v=y=>f(y),k=y=>u(y);return r.$$set=y=>{"themeStore"in y&&t(8,n=y.themeStore)},[a,b,d,i,o,u,m,f,n,g,v,k]}class cn extends Et{constructor(e){super(),xt(this,e,au,lu,Ct,{themeStore:8})}}function dn(r,e,t){const n=r.slice();return n[19]=e[t][0],n[20]=e[t][1],n}function hn(r,e,t){const n=r.slice();return n[23]=e[t],n}function un(r){let e,t,n=r[23].label+"",a,b,d,i,o,u,m,f;function g(){return r[16](r[23])}return{c(){e=C("button"),t=C("div"),a=G(n),d=A(),i=C("div"),i.textContent=`${r[23].desc}`,o=A(),s(t,"class",b="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300")),s(i,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(e,"class",u="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))},m(v,k){U(v,e,k),l(e,t),l(t,a),l(e,d),l(e,i),l(e,o),m||(f=Y(e,"click",g),m=!0)},p(v,k){r=v,k&8&&b!==(b="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"))&&s(t,"class",b),k&8&&u!==(u="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))&&s(e,"class",u)},d(v){v&&N(e),m=!1,f()}}}function cu(r){let e,t,n,a=r[2]==="encode"?"编码":"解码",b;return{c(){e=de("svg"),t=de("path"),n=A(),b=G(a),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(d,i){U(d,e,i),l(e,t),U(d,n,i),U(d,b,i)},p(d,i){i&4&&a!==(a=d[2]==="encode"?"编码":"解码")&&he(b,a)},d(d){d&&(N(e),N(n),N(b))}}}function du(r){let e,t,n,a;return{c(){e=de("svg"),t=de("circle"),n=de("path"),a=G(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(n,"class","opacity-75"),s(n,"fill","currentColor"),s(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(b,d){U(b,e,d),l(e,t),l(e,n),U(b,a,d)},p:Oe,d(b){b&&(N(e),N(a))}}}function fn(r){let e,t,n;return{c(){e=C("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(a,b){U(a,e,b),t||(n=Y(e,"click",r[9]),t=!0)},p:Oe,d(a){a&&N(e),t=!1,n()}}}function pn(r){let e,t,n,a,b=Ue(Object.entries(r[5])),d=[];for(let i=0;i<b.length;i+=1)d[i]=_n(dn(r,b,i));return{c(){e=C("div"),t=C("h4"),t.textContent="查询参数",n=A(),a=C("div");for(let i=0;i<d.length;i+=1)d[i].c();s(t,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),s(a,"class","space-y-2 max-h-40 overflow-y-auto"),s(e,"class","border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-800/50")},m(i,o){U(i,e,o),l(e,t),l(e,n),l(e,a);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(a,null)},p(i,o){if(o&32){b=Ue(Object.entries(i[5]));let u;for(u=0;u<b.length;u+=1){const m=dn(i,b,u);d[u]?d[u].p(m,o):(d[u]=_n(m),d[u].c(),d[u].m(a,null))}for(;u<d.length;u+=1)d[u].d(1);d.length=b.length}},d(i){i&&N(e),Mt(d,i)}}}function _n(r){let e,t,n=r[19]+"",a,b,d,i,o,u=r[20]+"",m,f;return{c(){e=C("div"),t=C("span"),a=G(n),b=A(),d=C("span"),d.textContent="=",i=A(),o=C("span"),m=G(u),f=A(),s(t,"class","px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg font-medium"),s(d,"class","text-gray-400"),s(o,"class","text-gray-700 dark:text-gray-300 font-mono break-all"),s(e,"class","flex items-center gap-2 text-sm")},m(g,v){U(g,e,v),l(e,t),l(t,a),l(e,b),l(e,d),l(e,i),l(e,o),l(o,m),l(e,f)},p(g,v){v&32&&n!==(n=g[19]+"")&&he(a,n),v&32&&u!==(u=g[20]+"")&&he(m,u)},d(g){g&&N(e)}}}function hu(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_=r[2]==="encode"?"输入文本":"输入 URL 编码",w,L,x,E,S,D,B,O,I,R,j,K,J,te,W=r[2]==="encode"?"URL 编码结果":"解码结果",M,P,H,z,$,V,X=r[5]&&Object.keys(r[5]).length>0,Z,F,T,Q,q,ne,ie,ce,fe,ge=Ue(r[6]),pe=[];for(let se=0;se<ge.length;se+=1)pe[se]=un(hn(r,ge,se));function ye(se,_e){return se[4]?du:cu}let Ke=ye(r),Le=Ke(r),Se=r[1]&&fn(r),ke=X&&pn(r);return{c(){e=C("div"),t=C("div"),n=C("button"),a=G("编码"),d=A(),i=C("button"),o=G("解码"),m=A(),f=C("div"),g=C("label"),g.textContent="编码/解码模式",v=A(),k=C("div");for(let se=0;se<pe.length;se+=1)pe[se].c();y=A(),c=C("div"),p=C("div"),h=C("label"),w=G(_),L=A(),x=C("button"),x.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
        解析 URL`,E=A(),S=C("textarea"),B=A(),O=C("div"),I=C("button"),Le.c(),j=A(),K=C("div"),J=C("div"),te=C("label"),M=G(W),P=A(),Se&&Se.c(),H=A(),z=C("textarea"),V=A(),ke&&ke.c(),Z=A(),F=C("div"),T=C("button"),T.textContent="清空全部",Q=A(),q=C("button"),q.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,ne=A(),ie=C("div"),ie.innerHTML='<p class="font-semibold mb-1">💡 提示:</p> <ul class="space-y-1 ml-4 list-disc"><li><b>Query 参数</b>：编码空格为 +，适合表单数据</li> <li><b>路径</b>：保留斜杠，适合 URL 路径部分</li> <li><b>完整 URL</b>：解析并显示 URL 各组成部分</li> <li>按 <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded">Ctrl+Enter</kbd> 快速执行</li></ul>',s(n,"class",b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(k,"class","grid grid-cols-3 gap-2"),s(h,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(x,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300"),s(p,"class","flex items-center justify-between mb-2"),s(S,"placeholder",D=r[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串..."),s(S,"class","w-full h-28 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),I.disabled=R=r[4]||!r[0].trim(),s(I,"class","flex items-center justify-center gap-2 px-6 py-3 accent-gradient hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(O,"class","flex items-center justify-center"),s(te,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(J,"class","flex items-center justify-between mb-2"),z.readOnly=!0,s(z,"placeholder",$=r[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(z,"class","w-full h-28 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(T,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(q,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(F,"class","flex justify-between items-center"),s(ie,"class","text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg"),s(e,"class","space-y-6")},m(se,_e){U(se,e,_e),l(e,t),l(t,n),l(n,a),l(t,d),l(t,i),l(i,o),l(e,m),l(e,f),l(f,g),l(f,v),l(f,k);for(let ue=0;ue<pe.length;ue+=1)pe[ue]&&pe[ue].m(k,null);l(e,y),l(e,c),l(c,p),l(p,h),l(h,w),l(p,L),l(p,x),l(c,E),l(c,S),Me(S,r[0]),l(e,B),l(e,O),l(O,I),Le.m(I,null),l(e,j),l(e,K),l(K,J),l(J,te),l(te,M),l(J,P),Se&&Se.m(J,null),l(K,H),l(K,z),Me(z,r[1]),l(e,V),ke&&ke.m(e,null),l(e,Z),l(e,F),l(F,T),l(F,Q),l(F,q),l(e,ne),l(e,ie),ce||(fe=[Y(n,"click",r[14]),Y(i,"click",r[15]),Y(x,"click",r[8]),Y(S,"input",r[17]),Y(S,"keydown",r[12]),Y(I,"click",r[7]),Y(z,"input",r[18]),Y(T,"click",r[10]),Y(q,"click",r[11])],ce=!0)},p(se,[_e]){if(_e&4&&b!==(b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(se[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(n,"class",b),_e&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(se[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",u),_e&72){ge=Ue(se[6]);let ue;for(ue=0;ue<ge.length;ue+=1){const Ce=hn(se,ge,ue);pe[ue]?pe[ue].p(Ce,_e):(pe[ue]=un(Ce),pe[ue].c(),pe[ue].m(k,null))}for(;ue<pe.length;ue+=1)pe[ue].d(1);pe.length=ge.length}_e&4&&_!==(_=se[2]==="encode"?"输入文本":"输入 URL 编码")&&he(w,_),_e&4&&D!==(D=se[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串...")&&s(S,"placeholder",D),_e&1&&Me(S,se[0]),Ke===(Ke=ye(se))&&Le?Le.p(se,_e):(Le.d(1),Le=Ke(se),Le&&(Le.c(),Le.m(I,null))),_e&17&&R!==(R=se[4]||!se[0].trim())&&(I.disabled=R),_e&4&&W!==(W=se[2]==="encode"?"URL 编码结果":"解码结果")&&he(M,W),se[1]?Se?Se.p(se,_e):(Se=fn(se),Se.c(),Se.m(J,null)):Se&&(Se.d(1),Se=null),_e&4&&$!==($=se[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(z,"placeholder",$),_e&2&&Me(z,se[1]),_e&32&&(X=se[5]&&Object.keys(se[5]).length>0),X?ke?ke.p(se,_e):(ke=pn(se),ke.c(),ke.m(e,Z)):ke&&(ke.d(1),ke=null)},i:Oe,o:Oe,d(se){se&&N(e),Mt(pe,se),Le.d(),Se&&Se.d(),ke&&ke.d(),ce=!1,et(fe)}}}function uu(r,e,t){let{themeStore:n}=e,a="",b="",d="encode",i="query",o=!1,u=null;const m=[{value:"query",label:"Query 参数",desc:"空格转为 +"},{value:"path",label:"路径",desc:"保留斜杠"},{value:"full",label:"完整 URL",desc:"解析并编码"}];async function f(){if(!(!a.trim()||o||!window.wailsBindings)){t(4,o=!0),t(5,u=null);try{if(d==="encode"){const x=await window.wailsBindings.URLEncode(a,i);t(1,b=x.encoded)}else{const x=await window.wailsBindings.URLDecode(a,i);t(1,b=x.decoded),x.params&&t(5,u=x.params)}}catch(x){t(1,b=""),console.error("处理失败:",x),alert("处理失败: "+(x.message||x))}finally{t(4,o=!1)}}}async function g(){if(!(!a.trim()||!window.wailsBindings))try{const x=await window.wailsBindings.ParseURL(a);if(t(1,b=JSON.stringify(x,null,2)),x.queryParams){t(5,u={});for(const[E,S]of Object.entries(x.queryParams))t(5,u[E]=Array.isArray(S)?S[0]:S,u)}}catch(x){console.error("解析失败:",x),alert("URL解析失败: "+(x.message||x))}}async function v(){if(b)try{await navigator.clipboard.writeText(b)}catch(x){console.error("复制失败:",x)}}function k(){t(0,a=""),t(1,b=""),t(5,u=null)}function y(){t(2,d=d==="encode"?"decode":"encode"),t(0,a=""),t(1,b=""),t(5,u=null)}function c(x){(x.ctrlKey||x.metaKey)&&x.key.toLowerCase()==="enter"&&!o&&a.trim()&&(x.preventDefault(),f())}const p=()=>t(2,d="encode"),h=()=>t(2,d="decode"),_=x=>t(3,i=x.value);function w(){a=this.value,t(0,a)}function L(){b=this.value,t(1,b)}return r.$$set=x=>{"themeStore"in x&&t(13,n=x.themeStore)},[a,b,d,i,o,u,m,f,g,v,k,y,c,n,p,h,_,w,L]}class gn extends Et{constructor(e){super(),xt(this,e,uu,hu,Ct,{themeStore:13})}}function mn(r,e,t){const n=r.slice();return n[12]=e[t],n}function bn(r){let e,t,n,a,b,d,i,o,u,m,f,g=[],v=new Map,k,y,c,p,h,_,w,L,x,E=Ue(r[4]);const S=I=>I[12].id;for(let I=0;I<E.length;I+=1){let R=mn(r,E,I),j=S(R);v.set(j,g[I]=yn(j,R))}const D=[pu,fu],B=[];function O(I,R){return I[3]?0:1}return h=O(r),_=B[h]=D[h](r),{c(){e=C("div"),t=C("div"),n=A(),a=C("div"),b=C("div"),d=C("div"),i=C("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-clip-text text-transparent" style="background-image: linear-gradient(90deg, var(--text-primary), var(--accent-primary));">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',o=A(),u=C("button"),u.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=A(),f=C("div");for(let I=0;I<g.length;I+=1)g[I].c();k=A(),y=C("div"),y.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',c=A(),p=C("div"),_.c(),s(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(u,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(u,"title","关闭"),s(d,"class","flex items-center justify-between mb-6"),s(f,"class","space-y-2 flex-1 overflow-y-auto"),s(y,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),s(b,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),s(p,"class","flex-1 flex flex-col overflow-hidden"),s(a,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),s(e,"role","dialog"),s(e,"aria-modal","true"),s(e,"tabindex","-1")},m(I,R){U(I,e,R),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),l(d,i),l(d,o),l(d,u),l(b,m),l(b,f);for(let j=0;j<g.length;j+=1)g[j]&&g[j].m(f,null);l(b,k),l(b,y),l(a,c),l(a,p),B[h].m(p,null),r[11](e),w=!0,L||(x=[Y(u,"click",r[9]),Y(e,"click",r[5]),Y(e,"keydown",r[8])],L=!0)},p(I,R){R&88&&(E=Ue(I[4]),g=Jt(g,R,S,1,I,E,v,f,Xt,yn,null,mn));let j=h;h=O(I),h===j?B[h].p(I,R):(Wt(),Ze(B[j],1,1,()=>{B[j]=null}),Nt(),_=B[h],_?_.p(I,R):(_=B[h]=D[h](I),_.c()),Ge(_,1),_.m(p,null))},i(I){w||(Ge(_),w=!0)},o(I){Ze(_),w=!1},d(I){I&&N(e);for(let R=0;R<g.length;R+=1)g[R].d();B[h].d(),r[11](null),L=!1,et(x)}}}function vn(r){let e;return{c(){e=C("span"),s(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full"),Re(e,"background","linear-gradient(180deg, var(--accent-primary), var(--accent-hover))")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function yn(r,e){let t,n,a,b=e[12].icon+"",d,i,o,u=e[12].name+"",m,f,g,v,k,y,c=e[3]===e[12].id&&vn();function p(){return e[10](e[12])}return{key:r,first:null,c(){t=C("button"),c&&c.c(),n=A(),a=C("span"),d=G(b),i=A(),o=C("span"),m=G(u),g=A(),s(a,"class",`text-2xl ${e[12].color}`),s(o,"class",f=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),s(t,"class",v="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(h,_){U(h,t,_),c&&c.m(t,null),l(t,n),l(t,a),l(a,d),l(t,i),l(t,o),l(o,m),l(t,g),k||(y=Y(t,"click",p),k=!0)},p(h,_){e=h,e[3]===e[12].id?c||(c=vn(),c.c(),c.m(t,n)):c&&(c.d(1),c=null),_&8&&f!==(f=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&s(o,"class",f),_&8&&v!==(v="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&s(t,"class",v)},d(h){h&&N(t),c&&c.d(),k=!1,y()}}}function fu(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',s(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,n){U(t,e,n)},p:Oe,i:Oe,o:Oe,d(t){t&&N(e)}}}function pu(r){var h,_;let e,t,n,a=((h=r[7]())==null?void 0:h.icon)+"",b,d,i=((_=r[7]())==null?void 0:_.name)+"",o,u,m,f,g,v,k;const y=[yu,vu,bu,mu,gu,_u],c=[];function p(w,L){return w[3]==="json"?0:w[3]==="base64"?1:w[3]==="url"?2:w[3]==="hash"?3:w[3]==="timestamp"?4:w[3]==="uuid"?5:-1}return~(g=p(r))&&(v=c[g]=y[g](r)),{c(){var w;e=C("div"),t=C("h2"),n=C("span"),b=G(a),d=A(),o=G(i),u=A(),m=C("div"),f=C("div"),v&&v.c(),s(n,"class",`text-2xl ${(w=r[7]())==null?void 0:w.color}`),s(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),s(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),s(f,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),s(m,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(w,L){U(w,e,L),l(e,t),l(t,n),l(n,b),l(t,d),l(t,o),U(w,u,L),U(w,m,L),l(m,f),~g&&c[g].m(f,null),k=!0},p(w,L){let x=g;g=p(w),g===x?~g&&c[g].p(w,L):(v&&(Wt(),Ze(c[x],1,1,()=>{c[x]=null}),Nt()),~g?(v=c[g],v?v.p(w,L):(v=c[g]=y[g](w),v.c()),Ge(v,1),v.m(f,null)):v=null)},i(w){k||(Ge(v),k=!0)},o(w){Ze(v),k=!1},d(w){w&&(N(e),N(u),N(m)),~g&&c[g].d()}}}function _u(r){let e,t,n;var a=cn;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&ct(e.$$.fragment),t=It()},m(d,i){e&&lt(e,d,i),U(d,t,i),n=!0},p(d,i){if(a!==(a=cn)){if(e){Wt();const o=e;Ze(o.$$.fragment,1,0,()=>{at(o,1)}),Nt()}a?(e=Gt(a,b(d)),ct(e.$$.fragment),Ge(e.$$.fragment,1),lt(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){n||(e&&Ge(e.$$.fragment,d),n=!0)},o(d){e&&Ze(e.$$.fragment,d),n=!1},d(d){d&&N(t),e&&at(e,d)}}}function gu(r){let e,t,n;var a=rn;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&ct(e.$$.fragment),t=It()},m(d,i){e&&lt(e,d,i),U(d,t,i),n=!0},p(d,i){if(a!==(a=rn)){if(e){Wt();const o=e;Ze(o.$$.fragment,1,0,()=>{at(o,1)}),Nt()}a?(e=Gt(a,b(d)),ct(e.$$.fragment),Ge(e.$$.fragment,1),lt(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){n||(e&&Ge(e.$$.fragment,d),n=!0)},o(d){e&&Ze(e.$$.fragment,d),n=!1},d(d){d&&N(t),e&&at(e,d)}}}function mu(r){let e,t,n;var a=en;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&ct(e.$$.fragment),t=It()},m(d,i){e&&lt(e,d,i),U(d,t,i),n=!0},p(d,i){if(a!==(a=en)){if(e){Wt();const o=e;Ze(o.$$.fragment,1,0,()=>{at(o,1)}),Nt()}a?(e=Gt(a,b(d)),ct(e.$$.fragment),Ge(e.$$.fragment,1),lt(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){n||(e&&Ge(e.$$.fragment,d),n=!0)},o(d){e&&Ze(e.$$.fragment,d),n=!1},d(d){d&&N(t),e&&at(e,d)}}}function bu(r){let e,t,n;var a=gn;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&ct(e.$$.fragment),t=It()},m(d,i){e&&lt(e,d,i),U(d,t,i),n=!0},p(d,i){if(a!==(a=gn)){if(e){Wt();const o=e;Ze(o.$$.fragment,1,0,()=>{at(o,1)}),Nt()}a?(e=Gt(a,b(d)),ct(e.$$.fragment),Ge(e.$$.fragment,1),lt(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){n||(e&&Ge(e.$$.fragment,d),n=!0)},o(d){e&&Ze(e.$$.fragment,d),n=!1},d(d){d&&N(t),e&&at(e,d)}}}function vu(r){let e,t,n;var a=Vs;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&ct(e.$$.fragment),t=It()},m(d,i){e&&lt(e,d,i),U(d,t,i),n=!0},p(d,i){if(a!==(a=Vs)){if(e){Wt();const o=e;Ze(o.$$.fragment,1,0,()=>{at(o,1)}),Nt()}a?(e=Gt(a,b(d)),ct(e.$$.fragment),Ge(e.$$.fragment,1),lt(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){n||(e&&Ge(e.$$.fragment,d),n=!0)},o(d){e&&Ze(e.$$.fragment,d),n=!1},d(d){d&&N(t),e&&at(e,d)}}}function yu(r){let e,t,n;var a=Ns;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&ct(e.$$.fragment),t=It()},m(d,i){e&&lt(e,d,i),U(d,t,i),n=!0},p(d,i){if(a!==(a=Ns)){if(e){Wt();const o=e;Ze(o.$$.fragment,1,0,()=>{at(o,1)}),Nt()}a?(e=Gt(a,b(d)),ct(e.$$.fragment),Ge(e.$$.fragment,1),lt(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){n||(e&&Ge(e.$$.fragment,d),n=!0)},o(d){e&&Ze(e.$$.fragment,d),n=!1},d(d){d&&N(t),e&&at(e,d)}}}function wu(r){let e,t,n=r[0]&&bn(r);return{c(){n&&n.c(),e=It()},m(a,b){n&&n.m(a,b),U(a,e,b),t=!0},p(a,[b]){a[0]?n?(n.p(a,b),b&1&&Ge(n,1)):(n=bn(a),n.c(),Ge(n,1),n.m(e.parentNode,e)):n&&(Wt(),Ze(n,1,1,()=>{n=null}),Nt())},i(a){t||(Ge(n),t=!0)},o(a){Ze(n),t=!1},d(a){a&&N(e),n&&n.d(a)}}}function ku(r,e,t){let{isOpen:n=!1}=e,{themeStore:a}=e,b=null,d;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"url",name:"URL 编解码",icon:"🔗",color:"text-orange-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function o(y){y.target===y.currentTarget&&t(0,n=!1)}function u(y){t(3,b=y)}function m(){return i.find(y=>y.id===b)}function f(y){y.key==="Escape"&&n&&(y.preventDefault(),t(0,n=!1))}const g=()=>t(0,n=!1),v=y=>u(y.id);function k(y){gt[y?"unshift":"push"](()=>{d=y,t(2,d)})}return r.$$set=y=>{"isOpen"in y&&t(0,n=y.isOpen),"themeStore"in y&&t(1,a=y.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&n&&Rr().then(()=>{d&&d.focus()})},[n,a,d,b,i,o,u,m,f,g,v,k]}class Su extends Et{constructor(e){super(),xt(this,e,ku,wu,Ct,{isOpen:0,themeStore:1})}}function wn(r,e,t){const n=r.slice();return n[57]=e[t],n[59]=t,n}function kn(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p;return{c(){e=C("div"),t=C("label"),t.textContent="认证方式",n=A(),a=C("div"),b=C("button"),d=C("div"),i=G("密码"),m=A(),f=C("button"),g=C("div"),v=G("SSH 密钥"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(d,"class",o=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(b,"type","button"),s(b,"class",u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(g,"class",k=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(f,"type","button"),s(f,"class",y=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(a,"class","flex gap-2")},m(h,_){U(h,e,_),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),l(d,i),l(a,m),l(a,f),l(f,g),l(g,v),c||(p=[Y(b,"click",r[33]),Y(f,"click",r[34])],c=!0)},p(h,_){_[0]&8&&o!==(o=`text-xs font-medium ${h[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(d,"class",o),_[0]&8&&u!==(u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${h[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(b,"class",u),_[0]&8&&k!==(k=`text-xs font-medium ${h[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(g,"class",k),_[0]&8&&y!==(y=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${h[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(f,"class",y)},d(h){h&&N(e),c=!1,et(p)}}}function Sn(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h;function _(D,B){return D[11]?xu:Cu}let w=_(r),L=w(r);function x(D,B){return D[11]?Lu:Eu}let E=x(r),S=E(r);return{c(){e=C("div"),t=C("label"),t.textContent="SSH 私钥文件",n=A(),a=C("div"),b=C("input"),d=A(),i=C("button"),i.textContent="选择文件",o=A(),u=C("div"),m=C("label"),m.textContent="Passphrase（可选）",f=A(),g=C("div"),L.c(),v=A(),k=C("button"),S.c(),y=A(),c=C("p"),c.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(b,"type","text"),s(b,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),b.readOnly=!0,s(b,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),s(i,"type","button"),s(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),s(a,"class","flex gap-1.5"),s(m,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(k,"type","button"),s(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(g,"class","relative"),s(c,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(D,B){U(D,e,B),l(e,t),l(e,n),l(e,a),l(a,b),Me(b,r[5].keyPath),l(a,d),l(a,i),U(D,o,B),U(D,u,B),l(u,m),l(u,f),l(u,g),L.m(g,null),l(g,v),l(g,k),S.m(k,null),l(u,y),l(u,c),p||(h=[Y(b,"input",r[35]),Y(i,"click",r[16]),Y(k,"click",r[38])],p=!0)},p(D,B){B[0]&32&&b.value!==D[5].keyPath&&Me(b,D[5].keyPath),w===(w=_(D))&&L?L.p(D,B):(L.d(1),L=w(D),L&&(L.c(),L.m(g,v))),E!==(E=x(D))&&(S.d(1),S=E(D),S&&(S.c(),S.m(k,null)))},d(D){D&&(N(e),N(o),N(u)),L.d(),S.d(),p=!1,et(h)}}}function Cu(r){let e,t,n;return{c(){e=C("input"),s(e,"type","password"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){U(a,e,b),Me(e,r[5].passphrase),t||(n=Y(e,"input",r[37]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].passphrase&&Me(e,a[5].passphrase)},d(a){a&&N(e),t=!1,n()}}}function xu(r){let e,t,n;return{c(){e=C("input"),s(e,"type","text"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){U(a,e,b),Me(e,r[5].passphrase),t||(n=Y(e,"input",r[36]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].passphrase&&Me(e,a[5].passphrase)},d(a){a&&N(e),t=!1,n()}}}function Eu(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function Lu(r){let e,t,n;return{c(){e=de("svg"),t=de("path"),n=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,b){U(a,e,b),l(e,t),l(e,n)},d(a){a&&N(e)}}}function Cn(r){let e,t,n;return{c(){e=C("div"),t=G(r[8]),s(e,"class",n=`p-2 rounded-md text-xs ${r[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(a,b){U(a,e,b),l(e,t)},p(a,b){b[0]&256&&he(t,a[8]),b[0]&256&&n!==(n=`p-2 rounded-md text-xs ${a[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&s(e,"class",n)},d(a){a&&N(e)}}}function xn(r){let e,t,n,a,b,d,i,o;return{c(){e=C("div"),t=C("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',n=A(),a=C("select"),b=C("option"),b.textContent="MySQL",d=C("option"),d.textContent="PostgreSQL",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),b.__value="mysql",Me(b,b.__value),d.__value="postgresql",Me(d,d.__value),s(a,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[5].dbType===void 0&&dr(()=>r[39].call(a))},m(u,m){U(u,e,m),l(e,t),l(e,n),l(e,a),l(a,b),l(a,d),nr(a,r[5].dbType,!0),i||(o=Y(a,"change",r[39]),i=!0)},p(u,m){m[0]&32&&nr(a,u[5].dbType)},d(u){u&&N(e),i=!1,o()}}}function En(r){let e,t,n,a,b,d;return{c(){e=C("div"),t=C("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',n=A(),a=C("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(a,"type","text"),a.required=!0,s(a,"placeholder","root"),s(a,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){U(i,e,o),l(e,t),l(e,n),l(e,a),Me(a,r[5].username),b||(d=Y(a,"input",r[42]),b=!0)},p(i,o){o[0]&32&&a.value!==i[5].username&&Me(a,i[5].username)},d(i){i&&N(e),b=!1,d()}}}function Ln(r){let e,t,n,a,b,d,i,o,u,m,f,g,v;function k(w,L){return w[10]?Mu:Du}let y=k(r),c=y(r);function p(w,L){return w[10]?Bu:Tu}let h=p(r),_=h(r);return{c(){e=C("div"),t=C("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',n=A(),a=C("div"),c.c(),b=A(),d=C("button"),_.c(),i=A(),o=C("div"),u=C("input"),m=A(),f=C("span"),f.textContent="保存密码",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(d,"type","button"),s(d,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(a,"class","relative"),s(u,"type","checkbox"),s(u,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),s(f,"class","text-xs text-gray-700 dark:text-gray-300"),s(o,"class","flex items-center gap-1.5 cursor-pointer")},m(w,L){U(w,e,L),l(e,t),l(e,n),l(e,a),c.m(a,null),l(a,b),l(a,d),_.m(d,null),U(w,i,L),U(w,o,L),l(o,u),u.checked=r[5].savePassword,l(o,m),l(o,f),g||(v=[Y(d,"click",r[45]),Y(u,"change",r[46])],g=!0)},p(w,L){y===(y=k(w))&&c?c.p(w,L):(c.d(1),c=y(w),c&&(c.c(),c.m(a,b))),h!==(h=p(w))&&(_.d(1),_=h(w),_&&(_.c(),_.m(d,null))),L[0]&32&&(u.checked=w[5].savePassword)},d(w){w&&(N(e),N(i),N(o)),c.d(),_.d(),g=!1,et(v)}}}function Du(r){let e,t,n;return{c(){e=C("input"),s(e,"type","password"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){U(a,e,b),Me(e,r[5].password),t||(n=Y(e,"input",r[44]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].password&&Me(e,a[5].password)},d(a){a&&N(e),t=!1,n()}}}function Mu(r){let e,t,n;return{c(){e=C("input"),s(e,"type","text"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){U(a,e,b),Me(e,r[5].password),t||(n=Y(e,"input",r[43]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].password&&Me(e,a[5].password)},d(a){a&&N(e),t=!1,n()}}}function Tu(r){let e,t;return{c(){e=de("svg"),t=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(n,a){U(n,e,a),l(e,t)},d(n){n&&N(e)}}}function Bu(r){let e,t,n;return{c(){e=de("svg"),t=de("path"),n=de("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,b){U(a,e,b),l(e,t),l(e,n)},d(a){a&&N(e)}}}function Dn(r){let e,t,n,a,b,d;return{c(){e=C("div"),t=C("label"),t.textContent="数据库名",n=A(),a=C("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(a,"type","text"),s(a,"placeholder","例如：production_db"),s(a,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){U(i,e,o),l(e,t),l(e,n),l(e,a),Me(a,r[5].database),b||(d=Y(a,"input",r[47]),b=!0)},p(i,o){o[0]&32&&a.value!==i[5].database&&Me(a,i[5].database)},d(i){i&&N(e),b=!1,d()}}}function Mn(r){let e,t=[],n=new Map,a,b=Ue(r[14]);const d=o=>o[57];for(let o=0;o<b.length;o+=1){let u=wn(r,b,o),m=d(u);n.set(m,t[o]=Tn(m,u))}let i=r[14].length===0&&Bn();return{c(){e=C("div");for(let o=0;o<t.length;o+=1)t[o].c();a=A(),i&&i.c(),s(e,"class","absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg max-h-48 overflow-y-auto")},m(o,u){U(o,e,u);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);l(e,a),i&&i.m(e,null)},p(o,u){u[0]&2121728&&(b=Ue(o[14]),t=Jt(t,u,d,1,o,b,n,e,Xt,Tn,a,wn)),o[14].length===0?i||(i=Bn(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&N(e);for(let u=0;u<t.length;u+=1)t[u].d();i&&i.d()}}}function Tn(r,e){let t,n=e[57]+"",a,b,d,i;function o(){return e[49](e[57])}function u(){return e[50](e[59])}return{key:r,first:null,c(){t=C("div"),a=G(n),s(t,"class",b=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`),this.first=t},m(m,f){U(m,t,f),l(t,a),d||(i=[Y(t,"click",o),Y(t,"mouseover",u)],d=!0)},p(m,f){e=m,f[0]&16384&&n!==(n=e[57]+"")&&he(a,n),f[0]&24576&&b!==(b=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`)&&s(t,"class",b)},d(m){m&&N(t),d=!1,et(i)}}}function Bn(r){let e;return{c(){e=C("div"),e.textContent="没有匹配的分组",s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Au(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe,ye,Ke,Le,Se,ke,se,_e,ue,Ce,Qe,ut,ze,it,qe,nt,je,Ee,We,mt,ht,re,ve=r[7]?"测试中...":"测试连接",we,Be,Fe,Ae=r[9]?"保存中...":r[1]?"更新连接":"添加连接",Ne,be,dt,rt=r[2]==="ssh"&&kn(r),Ye=r[3]==="key"&&Sn(r),ee=r[8]&&Cn(r),le=r[2]==="database"&&xn(r),De=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&En(r),Pe=r[3]==="password"&&Ln(r),Je=r[2]==="database"&&Dn(r),st=r[12]&&r[6].length>0&&Mn(r);return{c(){e=C("div"),t=C("label"),t.textContent="连接类型",n=A(),a=C("div"),b=C("button"),d=C("div"),i=de("svg"),o=de("path"),m=A(),f=C("span"),g=G("SSH"),y=A(),c=C("button"),p=C("div"),h=de("svg"),_=de("path"),L=A(),x=C("span"),E=G("数据库"),B=A(),O=C("button"),I=C("div"),R=de("svg"),j=de("path"),J=A(),te=C("span"),W=G("Docker"),H=A(),z=C("form"),$=C("div"),V=C("label"),V.innerHTML='连接名称 <span class="text-red-500">*</span>',X=A(),Z=C("input"),F=A(),rt&&rt.c(),T=A(),Ye&&Ye.c(),Q=A(),ee&&ee.c(),q=A(),le&&le.c(),ne=A(),ie=C("div"),ce=C("div"),fe=C("label"),fe.innerHTML='主机地址 <span class="text-red-500">*</span>',ge=A(),pe=C("input"),ye=A(),Ke=C("div"),Le=C("label"),Le.innerHTML='端口 <span class="text-red-500">*</span>',Se=A(),ke=C("input"),se=A(),De&&De.c(),_e=A(),Pe&&Pe.c(),ue=A(),Je&&Je.c(),Ce=A(),Qe=C("div"),ut=C("label"),ut.textContent="分组",ze=A(),it=C("div"),qe=C("input"),je=A(),st&&st.c(),Ee=A(),We=C("div"),mt=C("button"),mt.textContent="取消",ht=A(),re=C("button"),we=G(ve),Be=A(),Fe=C("button"),Ne=G(Ae),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),s(i,"class",u=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(f,"class",v=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(d,"class","flex items-center justify-center gap-1"),s(b,"type","button"),s(b,"class",k=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),s(h,"class",w=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(h,"fill","none"),s(h,"stroke","currentColor"),s(h,"viewBox","0 0 24 24"),s(x,"class",S=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(p,"class","flex items-center justify-center gap-1"),s(c,"type","button"),s(c,"class",D=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(j,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),s(R,"class",K=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(R,"fill","currentColor"),s(R,"viewBox","0 0 24 24"),s(te,"class",M=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(I,"class","flex items-center justify-center gap-1"),s(O,"type","button"),s(O,"class",P=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(a,"class","grid grid-cols-3 gap-2"),s(e,"class","mb-4"),s(V,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(Z,"type","text"),Z.required=!0,s(Z,"placeholder","例如：生产服务器-01"),s(Z,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(fe,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(pe,"type","text"),pe.required=!0,s(pe,"placeholder","192.168.1.10 或 example.com"),s(pe,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ce,"class","col-span-2"),s(Le,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(ke,"type","text"),ke.required=!0,s(ke,"placeholder",r[18]()),s(ke,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ie,"class","grid grid-cols-3 gap-2"),s(ut,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(qe,"type","text"),s(qe,"placeholder","例如：生产环境"),s(qe,"class",nt=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${r[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`),s(it,"class","relative"),s(mt,"type","button"),s(mt,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(re,"type","button"),re.disabled=r[7],s(re,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(Fe,"type","submit"),Fe.disabled=r[9],s(Fe,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(We,"class","flex gap-2 pt-3"),s(z,"class","space-y-3")},m(Te,Xe){U(Te,e,Xe),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),l(d,i),l(i,o),l(d,m),l(d,f),l(f,g),l(a,y),l(a,c),l(c,p),l(p,h),l(h,_),l(p,L),l(p,x),l(x,E),l(a,B),l(a,O),l(O,I),l(I,R),l(R,j),l(I,J),l(I,te),l(te,W),U(Te,H,Xe),U(Te,z,Xe),l(z,$),l($,V),l($,X),l($,Z),Me(Z,r[5].name),l(z,F),rt&&rt.m(z,null),l(z,T),Ye&&Ye.m(z,null),l(z,Q),ee&&ee.m(z,null),l(z,q),le&&le.m(z,null),l(z,ne),l(z,ie),l(ie,ce),l(ce,fe),l(ce,ge),l(ce,pe),Me(pe,r[5].host),l(ie,ye),l(ie,Ke),l(Ke,Le),l(Ke,Se),l(Ke,ke),Me(ke,r[5].port),l(z,se),De&&De.m(z,null),l(z,_e),Pe&&Pe.m(z,null),l(z,ue),Je&&Je.m(z,null),l(z,Ce),l(z,Qe),l(Qe,ut),l(Qe,ze),l(Qe,it),l(it,qe),Me(qe,r[4]),l(it,je),st&&st.m(it,null),l(z,Ee),l(z,We),l(We,mt),l(We,ht),l(We,re),l(re,we),l(We,Be),l(We,Fe),l(Fe,Ne),be||(dt=[Y(b,"click",r[29]),Y(c,"click",r[30]),Y(O,"click",r[31]),Y(Z,"input",r[32]),Y(pe,"input",r[40]),Y(ke,"input",r[41]),Y(qe,"input",r[48]),Y(qe,"focus",r[19]),Y(qe,"input",r[20]),Y(qe,"keydown",r[22]),Y(qe,"blur",r[23]),Y(mt,"click",r[51]),Y(re,"click",r[15]),Y(z,"submit",Ro(r[17]))],be=!0)},p(Te,Xe){Xe[0]&4&&u!==(u=`w-4 h-4 ${Te[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(i,"class",u),Xe[0]&4&&v!==(v=`text-xs font-medium ${Te[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(f,"class",v),Xe[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${Te[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(b,"class",k),Xe[0]&4&&w!==(w=`w-4 h-4 ${Te[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(h,"class",w),Xe[0]&4&&S!==(S=`text-xs font-medium ${Te[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(x,"class",S),Xe[0]&4&&D!==(D=`p-2 rounded-lg border-2 transition-all ${Te[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(c,"class",D),Xe[0]&4&&K!==(K=`w-4 h-4 ${Te[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(R,"class",K),Xe[0]&4&&M!==(M=`text-xs font-medium ${Te[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(te,"class",M),Xe[0]&4&&P!==(P=`p-2 rounded-lg border-2 transition-all ${Te[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(O,"class",P),Xe[0]&32&&Z.value!==Te[5].name&&Me(Z,Te[5].name),Te[2]==="ssh"?rt?rt.p(Te,Xe):(rt=kn(Te),rt.c(),rt.m(z,T)):rt&&(rt.d(1),rt=null),Te[3]==="key"?Ye?Ye.p(Te,Xe):(Ye=Sn(Te),Ye.c(),Ye.m(z,Q)):Ye&&(Ye.d(1),Ye=null),Te[8]?ee?ee.p(Te,Xe):(ee=Cn(Te),ee.c(),ee.m(z,q)):ee&&(ee.d(1),ee=null),Te[2]==="database"?le?le.p(Te,Xe):(le=xn(Te),le.c(),le.m(z,ne)):le&&(le.d(1),le=null),Xe[0]&32&&pe.value!==Te[5].host&&Me(pe,Te[5].host),Xe[0]&32&&ke.value!==Te[5].port&&Me(ke,Te[5].port),Te[3]==="password"||Te[2]==="database"||Te[2]==="docker"?De?De.p(Te,Xe):(De=En(Te),De.c(),De.m(z,_e)):De&&(De.d(1),De=null),Te[3]==="password"?Pe?Pe.p(Te,Xe):(Pe=Ln(Te),Pe.c(),Pe.m(z,ue)):Pe&&(Pe.d(1),Pe=null),Te[2]==="database"?Je?Je.p(Te,Xe):(Je=Dn(Te),Je.c(),Je.m(z,Ce)):Je&&(Je.d(1),Je=null),Xe[0]&4096&&nt!==(nt=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${Te[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`)&&s(qe,"class",nt),Xe[0]&16&&qe.value!==Te[4]&&Me(qe,Te[4]),Te[12]&&Te[6].length>0?st?st.p(Te,Xe):(st=Mn(Te),st.c(),st.m(it,null)):st&&(st.d(1),st=null),Xe[0]&128&&ve!==(ve=Te[7]?"测试中...":"测试连接")&&he(we,ve),Xe[0]&128&&(re.disabled=Te[7]),Xe[0]&514&&Ae!==(Ae=Te[9]?"保存中...":Te[1]?"更新连接":"添加连接")&&he(Ne,Ae),Xe[0]&512&&(Fe.disabled=Te[9])},d(Te){Te&&(N(e),N(H),N(z)),rt&&rt.d(),Ye&&Ye.d(),ee&&ee.d(),le&&le.d(),De&&De.d(),Pe&&Pe.d(),Je&&Je.d(),st&&st.d(),be=!1,et(dt)}}}function Ru(r){let e,t,n;function a(d){r[53](d)}let b={onClose:r[52],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[Au]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),gt.push(()=>St(e,"isOpen",a)),{c(){ct(e.$$.fragment)},m(d,i){lt(e,d,i),n=!0},p(d,i){const o={};i[0]&1&&(o.onClose=d[52]),i[0]&2&&(o.title=d[1]?"编辑连接":"添加连接"),i[0]&32767|i[1]&536870912&&(o.$$scope={dirty:i,ctx:d}),!t&&i[0]&1&&(t=!0,o.isOpen=d[0],kt(()=>t=!1)),e.$set(o)},i(d){n||(Ge(e.$$.fragment,d),n=!0)},o(d){Ze(e.$$.fragment,d),n=!1},d(d){at(e,d)}}}function Ou(r,e,t){let n,a,b,d;Pt(r,Yt,ue=>t(28,d=ue));let{isOpen:i=!1}=e,{onAdd:o=()=>{}}=e,{onUpdate:u=()=>{}}=e,{editingAsset:m=null}=e,f="ssh",g="password",v=!1,k="",y=!1,c=!1,p=!1,h=!1,_=!1,w=!1,L="",x=-1,E={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function S(){if(!window.wailsBindings){t(8,k="Wails 绑定未加载");return}if(!E.host){t(8,k="请填写主机地址");return}if(g==="password"&&!E.password){t(8,k="请输入密码以测试连接");return}if(g==="password"&&!E.username){t(8,k="请填写用户名");return}if(g==="key"&&!E.keyPath){t(8,k="请选择 SSH 密钥文件");return}t(7,v=!0),t(8,k="");try{if(f==="database")await window.wailsBindings.TestDatabaseConnection(E.host,parseInt(E.port),E.username,E.password,E.dbType,E.database);else{const ue=g==="key"?E.keyPath:E.password;await window.wailsBindings.TestConnection(E.host,parseInt(E.port),E.username,g,ue,E.passphrase||"")}t(8,k="✓ 连接成功")}catch(ue){console.error("Connection test failed:",ue),t(8,k="✗ 连接失败: "+ue)}finally{t(7,v=!1)}}async function D(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const ue=await window.wailsBindings.SelectSSHKeyFile();ue&&t(5,E.keyPath=ue,E)}catch(ue){console.error("Failed to select key file:",ue),t(8,k="选择密钥文件失败: "+ue)}}async function B(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!E.name||!E.host){alert("请填写必填字段（连接名称、主机地址）");return}if(g==="password"&&!E.username){alert("密码认证需要填写用户名");return}if(g==="password"&&!E.password){alert("密码认证需要输入密码");return}if(g==="key"&&!E.keyPath){alert("密钥认证需要选择密钥文件");return}t(9,y=!0);try{const ue=!!E.id,Ce={id:ue?E.id:`conn_${Date.now()}`,name:E.name,host:E.host,port:parseInt(E.port),user:E.username,auth_type:g,key_path:g==="key"?E.keyPath:"",tags:[E.group||"默认分组"],type:f,metadata:{database:E.database||void 0,db_type:E.dbType}};ue?(await window.wailsBindings.UpdateConnection(Ce),g==="password"&&E.password&&E.savePassword?await window.wailsBindings.SavePassword(Ce.id,E.password):g==="password"&&!E.savePassword&&await window.wailsBindings.DeletePassword(Ce.id),u(Ce)):(o(Ce),g==="password"&&E.password&&E.savePassword&&await window.wailsBindings.SavePassword(Ce.id,E.password)),t(0,i=!1)}catch(ue){console.error("Failed to save connection:",ue),alert("保存连接失败: "+ue)}finally{t(9,y=!1)}}function O(){t(5,E={id:"",name:"",host:"",port:I(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(8,k=""),t(10,c=!1),t(11,p=!1),t(12,w=!1),t(4,L=""),t(13,x=-1)}function I(){switch(f){case"ssh":return"22";case"docker":return"2375";case"database":switch(E.dbType){case"mysql":return"3306";case"postgresql":return"5432";default:return""}default:return""}}async function R(){var ue,Ce,Qe,ut;if(!(!m||!i||h))try{const ze=await window.wailsBindings.GetConnection(m.id);if(ze){t(5,E={id:ze.id,name:ze.name||"",host:ze.host||"",port:((ue=ze.port)==null?void 0:ue.toString())||"",username:ze.user||"",password:"",savePassword:!1,keyPath:ze.key_path||"",passphrase:"",group:((Ce=ze.tags)==null?void 0:Ce[0])||"",dbType:((Qe=ze.metadata)==null?void 0:Qe.db_type)||"mysql",database:((ut=ze.metadata)==null?void 0:ut.database)||""}),t(2,f=ze.type||"ssh"),t(3,g=ze.auth_type||"password"),h=!0;try{if(await window.wailsBindings.HasPassword(ze.id)){t(5,E.savePassword=!0,E);const qe=await window.wailsBindings.GetPassword(ze.id);t(5,E.password=qe||"",E)}}catch(it){console.warn("Failed to load password:",it)}}}catch(ze){console.error("Failed to load connection:",ze)}}function j(){t(12,w=!w),w&&(t(4,L=E.group||""),t(13,x=b.indexOf(E.group)))}function K(ue){t(4,L=ue.target.value),t(5,E.group=ue.target.value,E),t(12,w=!0),t(13,x=-1)}function J(ue){t(5,E.group=ue,E),t(4,L=ue),t(12,w=!1),t(13,x=b.indexOf(ue))}function te(ue){const Ce=b;if(!w){(ue.key==="ArrowDown"||ue.key==="ArrowUp"||ue.key==="Enter")&&(ue.preventDefault(),t(12,w=!0),t(4,L=E.group||""),t(13,x=Ce.indexOf(E.group)));return}switch(ue.key){case"ArrowDown":ue.preventDefault(),t(13,x=Math.min(x+1,Ce.length-1));break;case"ArrowUp":ue.preventDefault(),t(13,x=Math.max(x-1,0));break;case"Enter":ue.preventDefault(),x>=0&&x<Ce.length?J(Ce[x]):t(12,w=!1);break;case"Escape":ue.preventDefault(),t(12,w=!1),t(4,L=E.group||"");break;case"Tab":ue.preventDefault(),t(12,w=!1);break}}function W(){setTimeout(()=>{t(12,w=!1)},150)}const M=()=>t(2,f="ssh"),P=()=>t(2,f="database"),H=()=>t(2,f="docker");function z(){E.name=this.value,t(5,E),t(0,i),t(1,m)}const $=()=>{t(3,g="password"),t(8,k="")},V=()=>{t(3,g="key"),t(8,k="")};function X(){E.keyPath=this.value,t(5,E),t(0,i),t(1,m)}function Z(){E.passphrase=this.value,t(5,E),t(0,i),t(1,m)}function F(){E.passphrase=this.value,t(5,E),t(0,i),t(1,m)}const T=()=>t(11,p=!p);function Q(){E.dbType=Pr(this),t(5,E),t(0,i),t(1,m)}function q(){E.host=this.value,t(5,E),t(0,i),t(1,m)}function ne(){E.port=this.value,t(5,E),t(0,i),t(1,m)}function ie(){E.username=this.value,t(5,E),t(0,i),t(1,m)}function ce(){E.password=this.value,t(5,E),t(0,i),t(1,m)}function fe(){E.password=this.value,t(5,E),t(0,i),t(1,m)}const ge=()=>t(10,c=!c);function pe(){E.savePassword=this.checked,t(5,E),t(0,i),t(1,m)}function ye(){E.database=this.value,t(5,E),t(0,i),t(1,m)}function Ke(){L=this.value,t(4,L)}const Le=ue=>J(ue),Se=ue=>t(13,x=ue),ke=()=>t(0,i=!1),se=()=>{t(0,i=!1)};function _e(ue){i=ue,t(0,i)}return r.$$set=ue=>{"isOpen"in ue&&t(0,i=ue.isOpen),"onAdd"in ue&&t(24,o=ue.onAdd),"onUpdate"in ue&&t(25,u=ue.onUpdate),"editingAsset"in ue&&t(1,m=ue.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&268435456&&t(27,n=d.reduce((ue,Ce)=>(Ce.group&&!ue.includes(Ce.group)&&ue.push(Ce.group),ue),[])),r.$$.dirty[0]&134217744&&t(6,a=n.filter(ue=>ue.toLowerCase().includes(L.toLowerCase()))),r.$$.dirty[0]&35&&i&&!m&&!E.id&&(E.port||t(5,E.port=I(),E)),r.$$.dirty[0]&32&&E.port===""&&t(5,E.port=I(),E),r.$$.dirty[0]&96&&t(14,b=E.group&&!a.includes(E.group)?[...a,E.group]:a),r.$$.dirty[0]&1&&t(26,_=i),r.$$.dirty[0]&67108865&&_&&!i&&O(),r.$$.dirty[0]&12&&(f==="ssh"?g!=="password"&&g!=="key"&&t(3,g="password"):t(3,g="password")),r.$$.dirty[0]&3&&i&&m&&R(),r.$$.dirty[0]&34&&m&&E.id!==m.id&&(h=!1),r.$$.dirty[0]&67108867&&!_&&i&&m&&(h=!1)},[i,m,f,g,L,E,a,v,k,y,c,p,w,x,b,S,D,B,I,j,K,J,te,W,o,u,_,n,d,M,P,H,z,$,V,X,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe,ye,Ke,Le,Se,ke,se,_e]}class Pu extends Et{constructor(e){super(),xt(this,e,Ou,Ru,Ct,{isOpen:0,onAdd:24,onUpdate:25,editingAsset:1},null,[-1,-1])}}function Iu(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te;return{c(){e=C("div"),t=C("div"),t.textContent="哈",n=A(),a=C("div"),b=C("h3"),d=G("AHaSSHTools"),o=A(),u=C("p"),m=G("啊哈 SSH 连接工具"),g=A(),v=C("p"),k=G("版本 "),y=G(r[3]),p=A(),h=C("p"),_=G("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),L=A(),x=C("button"),E=de("svg"),S=de("path"),D=A(),B=C("span"),B.textContent="访问 GitHub",I=A(),R=C("p"),j=G("© 2026 AHaSSHTools. All rights reserved."),s(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),s(b,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),s(u,"class",f="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),s(v,"class",c="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),s(a,"class","text-center space-y-1"),s(h,"class",w="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),s(S,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),s(E,"class","w-5 h-5"),s(E,"viewBox","0 0 24 24"),s(E,"fill","currentColor"),s(x,"class",O="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),s(R,"class",K="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),s(e,"class","flex flex-col items-center gap-5 py-4")},m(W,M){U(W,e,M),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),l(a,o),l(a,u),l(u,m),l(a,g),l(a,v),l(v,k),l(v,y),l(e,p),l(e,h),l(h,_),l(e,L),l(e,x),l(x,E),l(E,S),l(x,D),l(x,B),l(e,I),l(e,R),l(R,j),J||(te=Y(x,"click",Fu),J=!0)},p(W,M){M&4&&i!==(i="text-xl font-bold "+(W[2]==="dark"?"text-white":"text-gray-900"))&&s(b,"class",i),M&4&&f!==(f="text-sm "+(W[2]==="dark"?"text-gray-400":"text-gray-500"))&&s(u,"class",f),M&8&&he(y,W[3]),M&4&&c!==(c="text-xs "+(W[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&s(v,"class",c),M&4&&w!==(w="text-sm text-center max-w-xs "+(W[2]==="dark"?"text-gray-400":"text-gray-600"))&&s(h,"class",w),M&4&&O!==(O="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(W[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&s(x,"class",O),M&4&&K!==(K="text-xs "+(W[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&s(R,"class",K)},d(W){W&&N(e),J=!1,te()}}}function Hu(r){let e,t,n;function a(d){r[5](d)}let b={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[Iu]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),gt.push(()=>St(e,"isOpen",a)),{c(){ct(e.$$.fragment)},m(d,i){lt(e,d,i),n=!0},p(d,[i]){const o={};i&2&&(o.onClose=d[1]),i&140&&(o.$$scope={dirty:i,ctx:d}),!t&&i&1&&(t=!0,o.isOpen=d[0],kt(()=>t=!1)),e.$set(o)},i(d){n||(Ge(e.$$.fragment,d),n=!0)},o(d){Ze(e.$$.fragment,d),n=!1},d(d){at(e,d)}}}async function Fu(){try{await(await Cr(()=>Promise.resolve().then(()=>lo),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function zu(r,e,t){let{isOpen:n=!1}=e,{onClose:a=()=>{}}=e,{themeStore:b={subscribe:()=>()=>{}}}=e,d="light",i="loading...";const o=b.subscribe(m=>{t(2,d=m)});ar(async()=>{try{const{GetVersion:m}=await Cr(async()=>{const{GetVersion:f}=await Promise.resolve().then(()=>bo);return{GetVersion:f}},void 0);t(3,i=await m())}catch(m){console.error("Failed to get version:",m),t(3,i="unknown")}return()=>{o()}});function u(m){n=m,t(0,n)}return r.$$set=m=>{"isOpen"in m&&t(0,n=m.isOpen),"onClose"in m&&t(1,a=m.onClose),"themeStore"in m&&t(4,b=m.themeStore)},[n,a,d,i,b,u]}class ju extends Et{constructor(e){super(),xt(this,e,zu,Hu,Ct,{isOpen:0,onClose:1,themeStore:4})}}const yo=[{id:"system-ui",label:"System UI",value:'"Avenir Next", "SF Pro Text", "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif'},{id:"inter",label:"Inter",value:'Inter, "Avenir Next", "Segoe UI", sans-serif'},{id:"source-han",label:"Source Han Sans",value:'"Source Han Sans SC", "PingFang SC", "Microsoft YaHei", sans-serif'},{id:"noto",label:"Noto Sans",value:'"Noto Sans SC", "Segoe UI", sans-serif'}],wo=[{id:"menlo",label:"Menlo",value:'Menlo, Monaco, "Courier New", monospace'},{id:"jetbrains-mono",label:"JetBrains Mono",value:'"JetBrains Mono", Menlo, Monaco, "Courier New", monospace'},{id:"fira-code",label:"Fira Code",value:'"Fira Code", Menlo, Monaco, "Courier New", monospace'}],or={teal:{label:"青绿",light:{accentPrimary:"#0f766e",accentHover:"#115e59",accentSoft:"#ccfbf1",focusRing:"#14b8a6",glow1:"rgba(20, 184, 166, 0.08)",glow2:"rgba(56, 189, 248, 0.08)"},dark:{accentPrimary:"#14b8a6",accentHover:"#2dd4bf",accentSoft:"#123a3a",focusRing:"#2dd4bf",glow1:"rgba(20, 184, 166, 0.12)",glow2:"rgba(56, 189, 248, 0.12)"}},blue:{label:"科技蓝",light:{accentPrimary:"#2563eb",accentHover:"#1d4ed8",accentSoft:"#dbeafe",focusRing:"#3b82f6",glow1:"rgba(37, 99, 235, 0.08)",glow2:"rgba(14, 165, 233, 0.08)"},dark:{accentPrimary:"#60a5fa",accentHover:"#93c5fd",accentSoft:"#1e3a8a",focusRing:"#60a5fa",glow1:"rgba(59, 130, 246, 0.12)",glow2:"rgba(14, 165, 233, 0.12)"}},emerald:{label:"翡翠绿",light:{accentPrimary:"#059669",accentHover:"#047857",accentSoft:"#d1fae5",focusRing:"#10b981",glow1:"rgba(16, 185, 129, 0.08)",glow2:"rgba(110, 231, 183, 0.08)"},dark:{accentPrimary:"#34d399",accentHover:"#6ee7b7",accentSoft:"#064e3b",focusRing:"#34d399",glow1:"rgba(16, 185, 129, 0.12)",glow2:"rgba(110, 231, 183, 0.12)"}},amber:{label:"琥珀橙",light:{accentPrimary:"#d97706",accentHover:"#b45309",accentSoft:"#fef3c7",focusRing:"#f59e0b",glow1:"rgba(245, 158, 11, 0.08)",glow2:"rgba(251, 191, 36, 0.08)"},dark:{accentPrimary:"#f59e0b",accentHover:"#fbbf24",accentSoft:"#78350f",focusRing:"#fbbf24",glow1:"rgba(245, 158, 11, 0.12)",glow2:"rgba(251, 191, 36, 0.12)"}},purple:{label:"星夜紫",light:{accentPrimary:"#7c3aed",accentHover:"#6d28d9",accentSoft:"#ede9fe",focusRing:"#8b5cf6",glow1:"rgba(124, 58, 237, 0.08)",glow2:"rgba(139, 92, 246, 0.08)"},dark:{accentPrimary:"#a78bfa",accentHover:"#c4b5fd",accentSoft:"#3b2a67",focusRing:"#a78bfa",glow1:"rgba(167, 139, 250, 0.14)",glow2:"rgba(196, 181, 253, 0.12)"}}};function An(r,e){return r==="light"||r==="dark"?r:r==="system"?typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e==="light"||e==="dark"?e:"light":e==="light"||e==="dark"?e:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Rn(r){if(typeof document>"u")return;const e=document.documentElement,t=or[r.accent_color]||or.teal,n=r.theme==="dark"?"dark":"light",a=t[n];e.style.setProperty("--accent-primary",a.accentPrimary),e.style.setProperty("--accent-hover",a.accentHover),e.style.setProperty("--accent-soft",a.accentSoft),e.style.setProperty("--focus-ring",a.focusRing),e.style.setProperty("--bg-glow-1",a.glow1),e.style.setProperty("--bg-glow-2",a.glow2);const b=Number(r.font_size)||14,d=Number(r.terminal_font_size)||14;e.style.setProperty("--app-font-family",r.font_family||'"Avenir Next", "SF Pro Text", sans-serif'),e.style.setProperty("--app-font-size",`${b}px`),e.style.setProperty("--terminal-font-family",r.terminal_font_family||'Menlo, Monaco, "Courier New", monospace'),e.style.setProperty("--terminal-font-size",`${d}px`),e.style.fontSize=`${b}px`,e.setAttribute("data-compact",r.compact_mode?"true":"false"),e.setAttribute("data-reduced-motion",r.reduced_motion?"true":"false"),window.dispatchEvent(new CustomEvent("app:appearance-updated",{detail:r}))}function lr(){return{theme:"light",theme_mode:"system",use_system_theme:!0,font_family:yo[0].value,font_size:14,terminal_theme:"default",terminal_font_family:wo[0].value,terminal_font_size:14,accent_color:"teal",compact_mode:!1,reduced_motion:!1,sidebar_width:300}}function Wu(r,e,t){const n=r.slice();return n[24]=e[t],n}function Nu(r,e,t){const n=r.slice();return n[24]=e[t],n}function On(r,e,t){const n=r.slice();return n[29]=e[t][0],n[30]=e[t][1],n}function Pn(r){let e,t,n,a,b=r[30].label+"",d,i,o,u,m,f;function g(){return r[15](r[29])}return{c(){e=C("button"),t=C("span"),n=C("span"),a=A(),d=G(b),i=A(),s(n,"class","w-2.5 h-2.5 rounded-full border border-white/30"),s(n,"style",`background: ${r[4](r[29])};`),s(t,"class","inline-flex items-center gap-1.5"),s(e,"type","button"),s(e,"class",o="px-2 py-2 rounded-lg border text-xs transition-colors "+(r[2].accent_color===r[29]?"text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300")),s(e,"style",u=r[2].accent_color===r[29]?`background: linear-gradient(90deg, ${r[4](r[29])}, ${r[5](r[29])}); border-color: ${r[4](r[29])};`:`border-color: ${r[4](r[29])}66;`)},m(v,k){U(v,e,k),l(e,t),l(t,n),l(t,a),l(t,d),l(e,i),m||(f=Y(e,"click",g),m=!0)},p(v,k){r=v,k[0]&4&&o!==(o="px-2 py-2 rounded-lg border text-xs transition-colors "+(r[2].accent_color===r[29]?"text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"))&&s(e,"class",o),k[0]&4&&u!==(u=r[2].accent_color===r[29]?`background: linear-gradient(90deg, ${r[4](r[29])}, ${r[5](r[29])}); border-color: ${r[4](r[29])};`:`border-color: ${r[4](r[29])}66;`)&&s(e,"style",u)},d(v){v&&N(e),m=!1,f()}}}function Uu(r){let e;return{c(){e=C("option"),e.textContent=`${r[24].label}`,e.__value=r[24].value,Me(e,e.__value)},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Vu(r){let e;return{c(){e=C("option"),e.textContent=`${r[24].label}`,e.__value=r[24].value,Me(e,e.__value)},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Ku(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe,ye,Ke,Le=r[2].font_size+"",Se,ke,se,_e,ue,Ce,Qe,ut,ze,it,qe=r[2].terminal_font_size+"",nt,je,Ee,We,mt,ht,re,ve,we,Be,Fe,Ae,Ne,be,dt,rt,Ye,ee,le,De,Pe,Je,st,Te,Xe,Ft,ae,xe=Ue(Object.entries(or)),Ie=[];for(let $e=0;$e<xe.length;$e+=1)Ie[$e]=Pn(On(r,xe,$e));let pt=Ue(yo),_t=[];for(let $e=0;$e<pt.length;$e+=1)_t[$e]=Uu(Nu(r,pt,$e));let At=Ue(wo),Lt=[];for(let $e=0;$e<At.length;$e+=1)Lt[$e]=Vu(Wu(r,At,$e));return{c(){e=C("div"),t=C("div"),n=C("div"),n.textContent="实时预览",a=A(),b=C("div"),d=C("div"),i=C("div"),i.innerHTML='<div class="text-base font-semibold text-slate-900 dark:text-slate-100">AHa SSH Manager</div> <div class="text-xs text-slate-500 dark:text-slate-400">主题色、字体和字号实时生效</div>',o=A(),u=C("button"),m=G("预览按钮"),g=A(),v=C("div"),k=C("div"),y=C("div"),y.textContent="主题模式",c=A(),p=C("div"),h=C("button"),_=G("浅色"),x=A(),E=C("button"),S=G("深色"),O=A(),I=C("button"),R=G("跟随系统"),J=A(),te=C("div"),W=C("div"),W.textContent="主题色",M=A(),P=C("div");for(let $e=0;$e<Ie.length;$e+=1)Ie[$e].c();H=A(),z=C("div"),$=C("label"),V=C("div"),V.textContent="界面字体",X=A(),Z=C("select");for(let $e=0;$e<_t.length;$e+=1)_t[$e].c();F=A(),T=C("label"),Q=C("div"),Q.textContent="终端字体",q=A(),ne=C("select");for(let $e=0;$e<Lt.length;$e+=1)Lt[$e].c();ie=A(),ce=C("div"),fe=C("div"),ge=C("div"),pe=C("span"),pe.textContent="界面字号",ye=A(),Ke=C("span"),Se=G(Le),ke=G("px"),se=A(),_e=C("input"),ue=A(),Ce=C("div"),Qe=C("div"),ut=C("span"),ut.textContent="终端字号",ze=A(),it=C("span"),nt=G(qe),je=G("px"),Ee=A(),We=C("input"),mt=A(),ht=C("div"),re=C("div"),re.textContent="扩展设置",ve=A(),we=C("label"),Be=C("span"),Be.textContent="紧凑模式（预留）",Fe=A(),Ae=C("input"),Ne=A(),be=C("label"),dt=C("span"),dt.textContent="减少动画（预留）",rt=A(),Ye=C("input"),ee=A(),le=C("div"),De=C("button"),De.textContent="恢复默认",Pe=A(),Je=C("div"),st=C("button"),st.textContent="取消",Te=A(),Xe=C("button"),Xe.textContent="保存设置",s(n,"class","text-sm font-semibold text-slate-900 dark:text-slate-100 mb-3"),s(u,"type","button"),s(u,"class","px-3 py-2 rounded-lg text-white text-xs font-medium shadow-sm"),s(u,"style",f=`background: linear-gradient(135deg, ${r[4](r[2].accent_color)}, ${r[5](r[2].accent_color)});`),s(d,"class","flex items-center justify-between"),s(b,"class","rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4"),s(t,"class","rounded-xl border border-slate-200 dark:border-slate-700 p-4 bg-slate-50/70 dark:bg-slate-900/50"),s(y,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),s(h,"type","button"),s(h,"class",w="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="light"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200")),s(h,"style",L=r[2].theme_mode==="light"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":""),s(E,"type","button"),s(E,"class",D="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="dark"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200")),s(E,"style",B=r[2].theme_mode==="dark"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":""),s(I,"type","button"),s(I,"class",j="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="system"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200")),s(I,"style",K=r[2].theme_mode==="system"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":""),s(p,"class","grid grid-cols-3 gap-2"),s(k,"class","space-y-2"),s(W,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),s(P,"class","grid grid-cols-4 gap-2"),s(te,"class","space-y-2"),s(v,"class","grid grid-cols-1 xl:grid-cols-2 gap-5"),s(V,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),s(Z,"class","w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-sm"),r[2].font_family===void 0&&dr(()=>r[16].call(Z)),s($,"class","space-y-2 block"),s(Q,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),s(ne,"class","w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-sm"),r[2].terminal_font_family===void 0&&dr(()=>r[17].call(ne)),s(T,"class","space-y-2 block"),s(z,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),Re(Ke,"color","var(--accent-primary)"),s(ge,"class","flex items-center justify-between text-sm font-semibold text-slate-900 dark:text-slate-100"),s(_e,"type","range"),s(_e,"min","12"),s(_e,"max","18"),s(_e,"step","1"),s(_e,"class","w-full"),Re(_e,"accent-color","var(--accent-primary)"),s(fe,"class","space-y-2"),Re(it,"color","var(--accent-primary)"),s(Qe,"class","flex items-center justify-between text-sm font-semibold text-slate-900 dark:text-slate-100"),s(We,"type","range"),s(We,"min","12"),s(We,"max","20"),s(We,"step","1"),s(We,"class","w-full"),Re(We,"accent-color","var(--accent-primary)"),s(Ce,"class","space-y-2"),s(ce,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),s(re,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),s(Ae,"type","checkbox"),s(Ae,"class","w-4 h-4"),Re(Ae,"accent-color","var(--accent-primary)"),s(we,"class","flex items-center justify-between text-sm text-slate-700 dark:text-slate-300"),s(Ye,"type","checkbox"),s(Ye,"class","w-4 h-4"),Re(Ye,"accent-color","var(--accent-primary)"),s(be,"class","flex items-center justify-between text-sm text-slate-700 dark:text-slate-300"),s(ht,"class","rounded-lg border border-slate-200 dark:border-slate-700 p-3 space-y-3"),s(De,"type","button"),s(De,"class","px-3 py-2 text-xs rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"),s(st,"type","button"),s(st,"class","px-3 py-2 text-xs rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"),s(Xe,"type","button"),s(Xe,"class","px-3 py-2 text-xs rounded-lg text-white"),Re(Xe,"background","linear-gradient(90deg, var(--accent-primary), var(--accent-hover))"),s(Je,"class","flex gap-2"),s(le,"class","flex items-center justify-between pt-2"),s(e,"class","space-y-6")},m($e,bt){U($e,e,bt),l(e,t),l(t,n),l(t,a),l(t,b),l(b,d),l(d,i),l(d,o),l(d,u),l(u,m),l(e,g),l(e,v),l(v,k),l(k,y),l(k,c),l(k,p),l(p,h),l(h,_),l(p,x),l(p,E),l(E,S),l(p,O),l(p,I),l(I,R),l(v,J),l(v,te),l(te,W),l(te,M),l(te,P);for(let tt=0;tt<Ie.length;tt+=1)Ie[tt]&&Ie[tt].m(P,null);l(e,H),l(e,z),l(z,$),l($,V),l($,X),l($,Z);for(let tt=0;tt<_t.length;tt+=1)_t[tt]&&_t[tt].m(Z,null);nr(Z,r[2].font_family,!0),l(z,F),l(z,T),l(T,Q),l(T,q),l(T,ne);for(let tt=0;tt<Lt.length;tt+=1)Lt[tt]&&Lt[tt].m(ne,null);nr(ne,r[2].terminal_font_family,!0),l(e,ie),l(e,ce),l(ce,fe),l(fe,ge),l(ge,pe),l(ge,ye),l(ge,Ke),l(Ke,Se),l(Ke,ke),l(fe,se),l(fe,_e),Me(_e,r[2].font_size),l(ce,ue),l(ce,Ce),l(Ce,Qe),l(Qe,ut),l(Qe,ze),l(Qe,it),l(it,nt),l(it,je),l(Ce,Ee),l(Ce,We),Me(We,r[2].terminal_font_size),l(e,mt),l(e,ht),l(ht,re),l(ht,ve),l(ht,we),l(we,Be),l(we,Fe),l(we,Ae),Ae.checked=r[2].compact_mode,l(ht,Ne),l(ht,be),l(be,dt),l(be,rt),l(be,Ye),Ye.checked=r[2].reduced_motion,l(e,ee),l(e,le),l(le,De),l(le,Pe),l(le,Je),l(Je,st),l(Je,Te),l(Je,Xe),Ft||(ae=[Y(h,"click",r[12]),Y(E,"click",r[13]),Y(I,"click",r[14]),Y(Z,"change",r[16]),Y(Z,"change",r[6]),Y(ne,"change",r[17]),Y(ne,"change",r[6]),Y(_e,"change",r[18]),Y(_e,"input",r[18]),Y(_e,"input",r[6]),Y(We,"change",r[19]),Y(We,"input",r[19]),Y(We,"input",r[6]),Y(Ae,"change",r[20]),Y(Ae,"change",r[6]),Y(Ye,"change",r[21]),Y(Ye,"change",r[6]),Y(De,"click",r[7]),Y(st,"click",function(){tr(r[1])&&r[1].apply(this,arguments)}),Y(Xe,"click",r[3])],Ft=!0)},p($e,bt){if(r=$e,bt[0]&4&&f!==(f=`background: linear-gradient(135deg, ${r[4](r[2].accent_color)}, ${r[5](r[2].accent_color)});`)&&s(u,"style",f),bt[0]&4&&w!==(w="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="light"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"))&&s(h,"class",w),bt[0]&4&&L!==(L=r[2].theme_mode==="light"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":"")&&s(h,"style",L),bt[0]&4&&D!==(D="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="dark"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"))&&s(E,"class",D),bt[0]&4&&B!==(B=r[2].theme_mode==="dark"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":"")&&s(E,"style",B),bt[0]&4&&j!==(j="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="system"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"))&&s(I,"class",j),bt[0]&4&&K!==(K=r[2].theme_mode==="system"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":"")&&s(I,"style",K),bt[0]&116){xe=Ue(Object.entries(or));let tt;for(tt=0;tt<xe.length;tt+=1){const me=On(r,xe,tt);Ie[tt]?Ie[tt].p(me,bt):(Ie[tt]=Pn(me),Ie[tt].c(),Ie[tt].m(P,null))}for(;tt<Ie.length;tt+=1)Ie[tt].d(1);Ie.length=xe.length}bt[0]&4&&nr(Z,r[2].font_family),bt[0]&4&&nr(ne,r[2].terminal_font_family),bt[0]&4&&Le!==(Le=r[2].font_size+"")&&he(Se,Le),bt[0]&4&&Me(_e,r[2].font_size),bt[0]&4&&qe!==(qe=r[2].terminal_font_size+"")&&he(nt,qe),bt[0]&4&&Me(We,r[2].terminal_font_size),bt[0]&4&&(Ae.checked=r[2].compact_mode),bt[0]&4&&(Ye.checked=r[2].reduced_motion)},d($e){$e&&N(e),Mt(Ie,$e),Mt(_t,$e),Mt(Lt,$e),Ft=!1,et(ae)}}}function qu(r){let e,t,n;function a(d){r[22](d)}let b={onClose:r[1],title:"全局设置",size:"xl",$$slots:{default:[Ku]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),gt.push(()=>St(e,"isOpen",a)),{c(){ct(e.$$.fragment)},m(d,i){lt(e,d,i),n=!0},p(d,i){const o={};i[0]&2&&(o.onClose=d[1]),i[0]&6|i[1]&4&&(o.$$scope={dirty:i,ctx:d}),!t&&i[0]&1&&(t=!0,o.isOpen=d[0],kt(()=>t=!1)),e.$set(o)},i(d){n||(Ge(e.$$.fragment,d),n=!0)},o(d){Ze(e.$$.fragment,d),n=!1},d(d){at(e,d)}}}function Nr(r){return{...r,font_size:Number(r.font_size)||14,terminal_font_size:Number(r.terminal_font_size)||14}}function Gu(r,e,t){let{isOpen:n=!1}=e,{value:a=lr()}=e,{onSave:b=()=>{}}=e,{onCancel:d=()=>{}}=e,{onPreview:i=()=>{}}=e,o=lr(),u=!1;function m(){b(Nr(o))}function f(){return o.theme_mode==="dark"||o.theme_mode==="light"?o.theme_mode:typeof document<"u"&&document.documentElement.classList.contains("dark")?"dark":"light"}function g(O){const I=or[O]||or.teal;return f()==="dark"?I.dark.accentPrimary:I.light.accentPrimary}function v(O){const I=or[O]||or.teal;return f()==="dark"?I.dark.accentHover:I.light.accentHover}function k(){queueMicrotask(()=>{i(Nr(o))})}function y(){t(2,o=lr()),k()}const c=()=>{t(2,o.theme_mode="light",o),k()},p=()=>{t(2,o.theme_mode="dark",o),k()},h=()=>{t(2,o.theme_mode="system",o),k()},_=O=>{t(2,o.accent_color=O,o),k()};function w(){o.font_family=Pr(this),t(2,o),t(0,n),t(11,u),t(8,a)}function L(){o.terminal_font_family=Pr(this),t(2,o),t(0,n),t(11,u),t(8,a)}function x(){o.font_size=xr(this.value),t(2,o),t(0,n),t(11,u),t(8,a)}function E(){o.terminal_font_size=xr(this.value),t(2,o),t(0,n),t(11,u),t(8,a)}function S(){o.compact_mode=this.checked,t(2,o),t(0,n),t(11,u),t(8,a)}function D(){o.reduced_motion=this.checked,t(2,o),t(0,n),t(11,u),t(8,a)}function B(O){n=O,t(0,n)}return r.$$set=O=>{"isOpen"in O&&t(0,n=O.isOpen),"value"in O&&t(8,a=O.value),"onSave"in O&&t(9,b=O.onSave),"onCancel"in O&&t(1,d=O.onCancel),"onPreview"in O&&t(10,i=O.onPreview)},r.$$.update=()=>{r.$$.dirty[0]&2305&&n&&!u&&(t(2,o=Nr({...lr(),...a})),t(11,u=!0)),r.$$.dirty[0]&2049&&!n&&u&&t(11,u=!1)},[n,d,o,m,g,v,k,y,a,b,i,u,c,p,h,_,w,L,x,E,S,D,B]}class Ju extends Et{constructor(e){super(),xt(this,e,Gu,qu,Ct,{isOpen:0,value:8,onSave:9,onCancel:1,onPreview:10},null,[-1,-1])}}function In(r,e,t){const n=r.slice();return n[90]=e[t],n}function Hn(r,e,t){const n=r.slice();return n[90]=e[t],n}function Fn(r){let e,t=r[26].length+"",n;return{c(){e=C("span"),n=G(t),s(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(a,b){U(a,e,b),l(e,n)},p(a,b){b[0]&67108864&&t!==(t=a[26].length+"")&&he(n,t)},d(a){a&&N(e)}}}function zn(r){let e,t,n,a,b,d;return{c(){e=C("button"),t=de("svg"),n=de("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M9 5l7 7-7 7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",a="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开资产列表")},m(i,o){U(i,e,o),l(e,t),l(t,n),b||(d=Y(e,"click",r[34]),b=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&a!==(a="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",a)},d(i){i&&N(e),b=!1,d()}}}function jn(r){let e,t,n,a,b,d,i,o,u;return{c(){e=C("div"),t=C("div"),n=A(),a=C("button"),b=de("svg"),d=de("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"stroke-width","2"),s(d,"d","M15 19l-7-7 7-7"),s(b,"class","w-4 h-4"),s(b,"fill","none"),s(b,"stroke","currentColor"),s(b,"viewBox","0 0 24 24"),a.disabled=r[2],s(a,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(a,"title","折叠资产列表"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Re(e,"cursor",r[2]?"default":"col-resize"),Re(e,"height","100%"),Re(e,"padding","0 2px"),Re(e,"pointer-events",r[2]?"none":"auto")},m(m,f){U(m,e,f),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),o||(u=[Y(a,"click",r[34]),Y(e,"mousedown",r[36])],o=!0)},p(m,f){f[0]&4&&(a.disabled=m[2]),f[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(m[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(a,"class",i),f[0]&4&&Re(e,"cursor",m[2]?"default":"col-resize"),f[0]&4&&Re(e,"pointer-events",m[2]?"none":"auto")},d(m){m&&N(e),o=!1,et(u)}}}function Wn(r){let e,t,n,a,b,d,i,o,u;return{c(){e=C("div"),t=C("div"),n=A(),a=C("button"),b=de("svg"),d=de("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"stroke-width","2"),s(d,"d","M9 5l7 7-7 7"),s(b,"class","w-4 h-4"),s(b,"fill","none"),s(b,"stroke","currentColor"),s(b,"viewBox","0 0 24 24"),a.disabled=r[2],s(a,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(a,"title","折叠右侧面板"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Re(e,"cursor",r[2]?"default":"col-resize"),Re(e,"height","100%"),Re(e,"padding","0 2px"),Re(e,"pointer-events",r[2]?"none":"auto")},m(m,f){U(m,e,f),l(e,t),l(e,n),l(e,a),l(a,b),l(b,d),o||(u=[Y(a,"click",r[35]),Y(e,"mousedown",r[37])],o=!0)},p(m,f){f[0]&4&&(a.disabled=m[2]),f[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(m[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(a,"class",i),f[0]&4&&Re(e,"cursor",m[2]?"default":"col-resize"),f[0]&4&&Re(e,"pointer-events",m[2]?"none":"auto")},d(m){m&&N(e),o=!1,et(u)}}}function Nn(r){let e,t,n,a,b,d;return{c(){e=C("button"),t=de("svg"),n=de("path"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M15 19l-7-7 7-7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",a="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开右侧面板")},m(i,o){U(i,e,o),l(e,t),l(t,n),b||(d=Y(e,"click",r[35]),b=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&a!==(a="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",a)},d(i){i&&N(e),b=!1,d()}}}function Un(r){let e,t,n,a,b,d,i,o,u,m,f=r[26].length+"",g,v,k,y,c,p,h=r[28].length+"",_,w,L,x,E,S,D,B;function O(j,K){if(j[27].activeTab==="active"&&j[26].length===0)return Qu;if(j[27].activeTab==="active")return Zu;if(j[27].activeTab==="history"&&j[28].length===0)return Xu;if(j[27].activeTab==="history")return Yu}let I=O(r),R=I&&I(r);return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("h3"),a.textContent="上传任务",b=A(),d=C("button"),d.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=A(),o=C("div"),u=C("button"),m=G("进行中 ("),g=G(f),v=G(")"),y=A(),c=C("button"),p=G("历史 ("),_=G(h),w=G(")"),E=A(),R&&R.c(),s(a,"class","font-semibold text-sm"),s(d,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),s(n,"class","flex items-center justify-between mb-3"),s(u,"class",k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[27].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(c,"class",L="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[27].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(o,"class","flex gap-2"),s(t,"class",x="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(e,"class",S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),Re(e,"height","calc(100vh - 3.5rem)")},m(j,K){U(j,e,K),l(e,t),l(t,n),l(n,a),l(n,b),l(n,d),l(t,i),l(t,o),l(o,u),l(u,m),l(u,g),l(u,v),l(o,y),l(o,c),l(c,p),l(c,_),l(c,w),l(e,E),R&&R.m(e,null),D||(B=[Y(d,"click",r[62]),Y(u,"click",r[63]),Y(c,"click",r[64])],D=!0)},p(j,K){K[0]&67108864&&f!==(f=j[26].length+"")&&he(g,f),K[0]&134217729&&k!==(k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(j[27].activeTab==="active"?(j[0]==="dark","bg-blue-600 text-white"):j[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(u,"class",k),K[0]&268435456&&h!==(h=j[28].length+"")&&he(_,h),K[0]&134217729&&L!==(L="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(j[27].activeTab==="history"?(j[0]==="dark","bg-blue-600 text-white"):j[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(c,"class",L),K[0]&1&&x!==(x="p-4 border-b "+(j[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",x),I===(I=O(j))&&R?R.p(j,K):(R&&R.d(1),R=I&&I(j),R&&(R.c(),R.m(e,null))),K[0]&1&&S!==(S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(j[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&s(e,"class",S)},d(j){j&&N(e),R&&R.d(),D=!1,et(B)}}}function Yu(r){let e,t,n,a,b,d,i,o,u=[],m=new Map,f,g,v=Ue(r[28]);const k=y=>y[90].id;for(let y=0;y<v.length;y+=1){let c=In(r,v,y),p=k(c);m.set(p,u[y]=Kn(p,c))}return{c(){e=C("div"),t=C("div"),n=C("button"),a=G("清空历史记录"),i=A(),o=C("div");for(let y=0;y<u.length;y+=1)u[y].c();s(n,"class",b="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),s(t,"class",d="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(o,"class","flex-1 overflow-y-auto p-4 space-y-3"),s(e,"class","flex-1 flex flex-col")},m(y,c){U(y,e,c),l(e,t),l(t,n),l(n,a),l(e,i),l(e,o);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(o,null);f||(g=Y(n,"click",r[66]),f=!0)},p(y,c){c[0]&1&&b!==(b="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(y[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&s(n,"class",b),c[0]&1&&d!==(d="p-3 border-b "+(y[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",d),c[0]&268435457&&(v=Ue(y[28]),u=Jt(u,c,k,1,y,v,m,o,Xt,Kn,null,In))},d(y){y&&N(e);for(let c=0;c<u.length;c+=1)u[c].d();f=!1,g()}}}function Xu(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function Zu(r){let e,t=[],n=new Map,a=Ue(r[26]);const b=d=>d[90].id;for(let d=0;d<a.length;d+=1){let i=Hn(r,a,d),o=b(i);n.set(o,t[d]=Gn(o,i))}return{c(){e=C("div");for(let d=0;d<t.length;d+=1)t[d].c();s(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(d,i){U(d,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(d,i){i[0]&67108865&&(a=Ue(d[26]),t=Jt(t,i,b,1,d,a,n,e,Xt,Gn,null,Hn))},d(d){d&&N(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Qu(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,n){U(t,e,n)},p:Oe,d(t){t&&N(e)}}}function $u(r){let e;return{c(){e=C("span"),e.textContent="已取消",s(e,"class","text-gray-500")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function ef(r){let e;return{c(){e=C("span"),e.textContent="失败",s(e,"class","text-red-500")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function tf(r){let e;return{c(){e=C("span"),e.textContent="完成",s(e,"class","text-green-500")},m(t,n){U(t,e,n)},d(t){t&&N(e)}}}function Vn(r){let e,t=r[90].error+"",n,a;return{c(){e=C("div"),n=G(t),s(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),s(e,"title",a=r[90].error)},m(b,d){U(b,e,d),l(e,n)},p(b,d){d[0]&268435456&&t!==(t=b[90].error+"")&&he(n,t),d[0]&268435456&&a!==(a=b[90].error)&&s(e,"title",a)},d(b){b&&N(e)}}}function Kn(r,e){let t,n,a,b,d=e[90].filename+"",i,o,u,m,f,g,v,k,y=sr(e[90].totalBytes)+"",c,p,h,_,w,L,x,E;function S(R,j){if(R[90].status==="completed")return tf;if(R[90].status==="failed")return ef;if(R[90].status==="cancelled")return $u}let D=S(e),B=D&&D(e),O=e[90].status==="failed"&&e[90].error&&Vn(e);function I(){return e[67](e[90])}return{key:r,first:null,c(){t=C("div"),n=C("div"),a=C("div"),b=C("div"),i=G(d),u=A(),m=C("div"),B&&B.c(),f=A(),g=C("span"),g.textContent="•",v=A(),k=C("span"),c=G(y),p=A(),O&&O.c(),h=A(),_=C("button"),_.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',w=A(),s(b,"class","text-sm font-medium truncate"),s(b,"title",o=e[90].filename),s(m,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),s(a,"class","flex-1 min-w-0"),s(_,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),s(_,"title","删除记录"),s(n,"class","flex items-center justify-between"),s(t,"class",L="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(R,j){U(R,t,j),l(t,n),l(n,a),l(a,b),l(b,i),l(a,u),l(a,m),B&&B.m(m,null),l(m,f),l(m,g),l(m,v),l(m,k),l(k,c),l(a,p),O&&O.m(a,null),l(n,h),l(n,_),l(t,w),x||(E=Y(_,"click",I),x=!0)},p(R,j){e=R,j[0]&268435456&&d!==(d=e[90].filename+"")&&he(i,d),j[0]&268435456&&o!==(o=e[90].filename)&&s(b,"title",o),D!==(D=S(e))&&(B&&B.d(1),B=D&&D(e),B&&(B.c(),B.m(m,f))),j[0]&268435456&&y!==(y=sr(e[90].totalBytes)+"")&&he(c,y),e[90].status==="failed"&&e[90].error?O?O.p(e,j):(O=Vn(e),O.c(),O.m(a,null)):O&&(O.d(1),O=null),j[0]&1&&L!==(L="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",L)},d(R){R&&N(t),B&&B.d(),O&&O.d(),x=!1,E()}}}function qn(r){let e,t=gs(r[90].speed)+"",n;return{c(){e=G("• "),n=G(t)},m(a,b){U(a,e,b),U(a,n,b)},p(a,b){b[0]&67108864&&t!==(t=gs(a[90].speed)+"")&&he(n,t)},d(a){a&&(N(e),N(n))}}}function Gn(r,e){let t,n,a,b,d=e[90].filename+"",i,o,u,m,f=sr(e[90].bytesSent)+"",g,v,k=sr(e[90].totalBytes)+"",y,c,p,h,_,w=Math.round(Br(e[90]))+"",L,x,E,S,D,B,O,I,R,j,K,J,te,W=e[90].speed&&qn(e);function M(){return e[65](e[90])}return{key:r,first:null,c(){t=C("div"),n=C("div"),a=C("div"),b=C("div"),i=G(d),u=A(),m=C("div"),g=G(f),v=G(" / "),y=G(k),c=A(),W&&W.c(),p=A(),h=C("div"),_=C("span"),L=G(w),x=G("%"),E=A(),S=C("button"),S.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',D=A(),B=C("div"),O=C("div"),j=A(),s(b,"class","text-sm font-medium truncate"),s(b,"title",o=e[90].filename),s(m,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),s(a,"class","flex-1 min-w-0"),s(_,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),s(S,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),s(S,"title","取消上传"),s(h,"class","flex items-center gap-2 ml-3"),s(n,"class","flex items-center justify-between mb-2"),s(O,"class","h-full bg-blue-500 transition-all duration-300"),s(O,"style",I=`width: ${Math.min(100,Math.max(0,Br(e[90])))}%`),s(B,"class",R="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),s(t,"class",K="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(P,H){U(P,t,H),l(t,n),l(n,a),l(a,b),l(b,i),l(a,u),l(a,m),l(m,g),l(m,v),l(m,y),l(m,c),W&&W.m(m,null),l(n,p),l(n,h),l(h,_),l(_,L),l(_,x),l(h,E),l(h,S),l(t,D),l(t,B),l(B,O),l(t,j),J||(te=Y(S,"click",M),J=!0)},p(P,H){e=P,H[0]&67108864&&d!==(d=e[90].filename+"")&&he(i,d),H[0]&67108864&&o!==(o=e[90].filename)&&s(b,"title",o),H[0]&67108864&&f!==(f=sr(e[90].bytesSent)+"")&&he(g,f),H[0]&67108864&&k!==(k=sr(e[90].totalBytes)+"")&&he(y,k),e[90].speed?W?W.p(e,H):(W=qn(e),W.c(),W.m(m,null)):W&&(W.d(1),W=null),H[0]&67108864&&w!==(w=Math.round(Br(e[90]))+"")&&he(L,w),H[0]&67108864&&I!==(I=`width: ${Math.min(100,Math.max(0,Br(e[90])))}%`)&&s(O,"style",I),H[0]&1&&R!==(R="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&s(B,"class",R),H[0]&1&&K!==(K="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",K)},d(P){P&&N(t),W&&W.d(),J=!1,te()}}}function rf(r){let e,t,n,a,b,d,i,o,u,m,f,g,v,k,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,K,J,te,W,M,P,H,z,$,V,X,Z,F,T,Q,q,ne,ie,ce,fe,ge,pe,ye,Ke,Le,Se,ke,se,_e,ue,Ce,Qe,ut,ze,it,qe,nt,je,Ee,We,mt,ht,re,ve,we,Be,Fe,Ae,Ne,be,dt,rt,Ye=r[26].length>0&&Fn(r),ee=r[5]&&zn(r);$=new Ll({props:{onConnect:r[39],onAddClick:r[52],onEdit:r[45]}});let le=!r[5]&&jn(r),De={};T=new Dc({props:De}),r[53](T);let Pe=!r[6]&&Wn(r);fe=new Ch({}),Se=new Oh({});let Je=r[6]&&Nn(r);function st(me){r[54](me)}function Te(me){r[55](me)}let Xe={onAdd:r[44],onUpdate:r[46]};r[2]!==void 0&&(Xe.isOpen=r[2]),r[7]!==void 0&&(Xe.editingAsset=r[7]),ue=new Pu({props:Xe}),gt.push(()=>St(ue,"isOpen",st)),gt.push(()=>St(ue,"editingAsset",Te));function Ft(me){r[56](me)}let ae={themeStore:yr};r[1]!==void 0&&(ae.isOpen=r[1]),ze=new Su({props:ae}),gt.push(()=>St(ze,"isOpen",Ft));function xe(me){r[58](me)}let Ie={onClose:r[57],themeStore:yr};r[3]!==void 0&&(Ie.isOpen=r[3]),nt=new ju({props:Ie}),gt.push(()=>St(nt,"isOpen",xe));function pt(me){r[59](me)}let _t={value:r[21],onPreview:r[30],onSave:r[29],onCancel:r[32]};r[4]!==void 0&&(_t.isOpen=r[4]),We=new Ju({props:_t}),gt.push(()=>St(We,"isOpen",pt));function At(me){r[60](me)}let Lt={title:r[10],message:r[11],placeholder:r[12],defaultValue:r[13],inputType:r[14],allowEmpty:r[15],trimValue:r[16],confirmText:"确定",cancelText:"取消",onConfirm:r[40],onCancel:r[41]};r[9]!==void 0&&(Lt.isOpen=r[9]),re=new br({props:Lt}),gt.push(()=>St(re,"isOpen",At));function $e(me){r[61](me)}let bt={title:r[18],message:r[19],type:r[20],confirmText:"确定",cancelText:"取消",onConfirm:r[42],onCancel:r[43]};r[17]!==void 0&&(bt.isOpen=r[17]),Be=new hr({props:bt}),gt.push(()=>St(Be,"isOpen",$e));let tt=r[27].isPanelOpen&&Un(r);return{c(){e=C("div"),t=C("header"),n=C("div"),a=C("div"),a.textContent="哈",b=A(),d=C("div"),i=C("div"),o=G("啊哈 SSH 连接工具"),m=A(),f=C("div"),g=G("AHa SSH Manager"),k=A(),y=C("div"),c=C("div"),p=C("button"),h=de("svg"),_=de("path"),L=A(),Ye&&Ye.c(),x=A(),E=C("button"),S=de("svg"),D=de("path"),B=de("path"),I=A(),R=C("button"),j=de("svg"),K=de("path"),J=A(),te=C("span"),te.textContent="开发工具",M=A(),P=C("div"),ee&&ee.c(),H=A(),z=C("div"),ct($.$$.fragment),X=A(),le&&le.c(),Z=A(),F=C("div"),ct(T.$$.fragment),q=A(),Pe&&Pe.c(),ne=A(),ie=C("div"),ce=C("div"),ct(fe.$$.fragment),ge=A(),pe=C("div"),ye=C("div"),Ke=A(),Le=C("div"),ct(Se.$$.fragment),se=A(),Je&&Je.c(),_e=A(),ct(ue.$$.fragment),ut=A(),ct(ze.$$.fragment),qe=A(),ct(nt.$$.fragment),Ee=A(),ct(We.$$.fragment),ht=A(),ct(re.$$.fragment),we=A(),ct(Be.$$.fragment),Ae=A(),tt&&tt.c(),s(a,"class","w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),Re(a,"background","linear-gradient(135deg, var(--accent-primary), var(--accent-hover))"),s(i,"class",u="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),s(f,"class",v="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),s(n,"class","flex items-center gap-3"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(h,"class","w-5 h-5"),s(h,"fill","none"),s(h,"stroke","currentColor"),s(h,"viewBox","0 0 24 24"),s(p,"class",w="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(p,"title","上传任务"),s(c,"class","relative"),s(D,"stroke-linecap","round"),s(D,"stroke-linejoin","round"),s(D,"stroke-width","2"),s(D,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),s(B,"stroke-linecap","round"),s(B,"stroke-linejoin","round"),s(B,"stroke-width","2"),s(B,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(S,"class","w-5 h-5"),s(S,"fill","none"),s(S,"stroke","currentColor"),s(S,"viewBox","0 0 24 24"),E.disabled=r[2],s(E,"class",O="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")),Re(E,"color","var(--accent-primary)"),s(E,"title","全局设置"),s(K,"stroke-linecap","round"),s(K,"stroke-linejoin","round"),s(K,"stroke-width","2"),s(K,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),s(j,"class","w-4 h-4"),s(j,"fill","none"),s(j,"stroke","currentColor"),s(j,"viewBox","0 0 24 24"),s(te,"class","text-sm"),R.disabled=r[2],s(R,"class","flex items-center gap-2 px-4 py-2 text-white rounded-lg font-medium transition-all shadow-sm hover:brightness-95 focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"),Re(R,"background","linear-gradient(90deg, var(--accent-primary), var(--accent-hover))"),s(y,"class","ml-auto flex items-center gap-3"),s(t,"class",W="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),Re(t,"pointer-events",r[2]?"none":"auto"),s(z,"class",V="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),Re(z,"width",(r[5]?"0":r[24])+"px"),Re(z,"min-width",(r[5]?"0":r[24])+"px"),Mr(z,"collapsed",r[5]),s(F,"class",Q="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),s(ce,"class","overflow-hidden"),Re(ce,"height",r[22]+"%"),Re(ce,"min-height","0"),s(ye,"class","w-full h-full rounded svelte-m8xeqv"),s(pe,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),s(pe,"role","separator"),s(pe,"aria-hidden","true"),Re(pe,"cursor",r[2]?"default":"row-resize"),Re(pe,"width","100%"),Re(pe,"padding","2px 0"),Re(pe,"pointer-events",r[2]?"none":"auto"),s(Le,"class","overflow-hidden"),Re(Le,"height",100-r[22]+"%"),Re(Le,"min-height","0"),s(ie,"data-right-panel","true"),s(ie,"class",ke="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),Re(ie,"width",(r[6]?"0":r[23])+"px"),Re(ie,"min-width",r[6]?"0":"300px"),Re(ie,"max-width","600px"),Mr(ie,"collapsed",r[6]),s(P,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),s(e,"class",Ne="h-screen w-full flex flex-col "+r[25]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(me,Ve){U(me,e,Ve),l(e,t),l(t,n),l(n,a),l(n,b),l(n,d),l(d,i),l(i,o),l(d,m),l(d,f),l(f,g),l(t,k),l(t,y),l(y,c),l(c,p),l(p,h),l(h,_),l(c,L),Ye&&Ye.m(c,null),l(y,x),l(y,E),l(E,S),l(S,D),l(S,B),l(y,I),l(y,R),l(R,j),l(j,K),l(R,J),l(R,te),l(e,M),l(e,P),ee&&ee.m(P,null),l(P,H),l(P,z),lt($,z,null),l(P,X),le&&le.m(P,null),l(P,Z),l(P,F),lt(T,F,null),l(P,q),Pe&&Pe.m(P,null),l(P,ne),l(P,ie),l(ie,ce),lt(fe,ce,null),l(ie,ge),l(ie,pe),l(pe,ye),l(ie,Ke),l(ie,Le),lt(Se,Le,null),l(P,se),Je&&Je.m(P,null),l(e,_e),lt(ue,e,null),l(e,ut),lt(ze,e,null),l(e,qe),lt(nt,e,null),l(e,Ee),lt(We,e,null),l(e,ht),lt(re,e,null),l(e,we),lt(Be,e,null),l(e,Ae),tt&&tt.m(e,null),be=!0,dt||(rt=[Y(p,"click",r[51]),Y(E,"click",r[31]),Y(R,"click",r[33]),Y(pe,"mousedown",r[38])],dt=!0)},p(me,Ve){(!be||Ve[0]&1&&u!==(u="font-semibold text-sm "+(me[0]==="dark"?"text-white":"text-gray-900")))&&s(i,"class",u),(!be||Ve[0]&1&&v!==(v="text-xs "+(me[0]==="dark"?"text-gray-400":"text-gray-500")))&&s(f,"class",v),(!be||Ve[0]&1&&w!==(w="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(me[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(p,"class",w),me[26].length>0?Ye?Ye.p(me,Ve):(Ye=Fn(me),Ye.c(),Ye.m(c,null)):Ye&&(Ye.d(1),Ye=null),(!be||Ve[0]&4)&&(E.disabled=me[2]),(!be||Ve[0]&1&&O!==(O="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(me[0]==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")))&&s(E,"class",O),(!be||Ve[0]&4)&&(R.disabled=me[2]),(!be||Ve[0]&1&&W!==(W="h-14 flex-shrink-0 "+(me[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&s(t,"class",W),(!be||Ve[0]&4)&&Re(t,"pointer-events",me[2]?"none":"auto"),me[5]?ee?ee.p(me,Ve):(ee=zn(me),ee.c(),ee.m(P,H)):ee&&(ee.d(1),ee=null);const Ut={};Ve[0]&132&&(Ut.onAddClick=me[52]),$.$set(Ut),(!be||Ve[0]&1&&V!==(V="flex-shrink-0 transition-all duration-200 "+(me[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&s(z,"class",V),(!be||Ve[0]&16777248)&&Re(z,"width",(me[5]?"0":me[24])+"px"),(!be||Ve[0]&16777248)&&Re(z,"min-width",(me[5]?"0":me[24])+"px"),(!be||Ve[0]&33)&&Mr(z,"collapsed",me[5]),me[5]?le&&(le.d(1),le=null):le?le.p(me,Ve):(le=jn(me),le.c(),le.m(P,Z));const Qt={};T.$set(Qt),(!be||Ve[0]&1&&Q!==(Q="flex-1 min-w-0 min-h-0 flex flex-col "+(me[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&s(F,"class",Q),me[6]?Pe&&(Pe.d(1),Pe=null):Pe?Pe.p(me,Ve):(Pe=Wn(me),Pe.c(),Pe.m(P,ne)),(!be||Ve[0]&4194304)&&Re(ce,"height",me[22]+"%"),(!be||Ve[0]&4)&&Re(pe,"cursor",me[2]?"default":"row-resize"),(!be||Ve[0]&4)&&Re(pe,"pointer-events",me[2]?"none":"auto"),(!be||Ve[0]&4194304)&&Re(Le,"height",100-me[22]+"%"),(!be||Ve[0]&1&&ke!==(ke="flex-shrink-0 flex flex-col overflow-hidden "+(me[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&s(ie,"class",ke),(!be||Ve[0]&8388672)&&Re(ie,"width",(me[6]?"0":me[23])+"px"),(!be||Ve[0]&64)&&Re(ie,"min-width",me[6]?"0":"300px"),(!be||Ve[0]&65)&&Mr(ie,"collapsed",me[6]),me[6]?Je?Je.p(me,Ve):(Je=Nn(me),Je.c(),Je.m(P,null)):Je&&(Je.d(1),Je=null);const Rt={};!Ce&&Ve[0]&4&&(Ce=!0,Rt.isOpen=me[2],kt(()=>Ce=!1)),!Qe&&Ve[0]&128&&(Qe=!0,Rt.editingAsset=me[7],kt(()=>Qe=!1)),ue.$set(Rt);const jt={};!it&&Ve[0]&2&&(it=!0,jt.isOpen=me[1],kt(()=>it=!1)),ze.$set(jt);const Tt={};Ve[0]&8&&(Tt.onClose=me[57]),!je&&Ve[0]&8&&(je=!0,Tt.isOpen=me[3],kt(()=>je=!1)),nt.$set(Tt);const Ht={};Ve[0]&2097152&&(Ht.value=me[21]),!mt&&Ve[0]&16&&(mt=!0,Ht.isOpen=me[4],kt(()=>mt=!1)),We.$set(Ht);const Dt={};Ve[0]&1024&&(Dt.title=me[10]),Ve[0]&2048&&(Dt.message=me[11]),Ve[0]&4096&&(Dt.placeholder=me[12]),Ve[0]&8192&&(Dt.defaultValue=me[13]),Ve[0]&16384&&(Dt.inputType=me[14]),Ve[0]&32768&&(Dt.allowEmpty=me[15]),Ve[0]&65536&&(Dt.trimValue=me[16]),!ve&&Ve[0]&512&&(ve=!0,Dt.isOpen=me[9],kt(()=>ve=!1)),re.$set(Dt);const oe={};Ve[0]&262144&&(oe.title=me[18]),Ve[0]&524288&&(oe.message=me[19]),Ve[0]&1048576&&(oe.type=me[20]),!Fe&&Ve[0]&131072&&(Fe=!0,oe.isOpen=me[17],kt(()=>Fe=!1)),Be.$set(oe),me[27].isPanelOpen?tt?tt.p(me,Ve):(tt=Un(me),tt.c(),tt.m(e,null)):tt&&(tt.d(1),tt=null),(!be||Ve[0]&33554433&&Ne!==(Ne="h-screen w-full flex flex-col "+me[25]+" "+(me[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&s(e,"class",Ne)},i(me){be||(Ge($.$$.fragment,me),Ge(T.$$.fragment,me),Ge(fe.$$.fragment,me),Ge(Se.$$.fragment,me),Ge(ue.$$.fragment,me),Ge(ze.$$.fragment,me),Ge(nt.$$.fragment,me),Ge(We.$$.fragment,me),Ge(re.$$.fragment,me),Ge(Be.$$.fragment,me),be=!0)},o(me){Ze($.$$.fragment,me),Ze(T.$$.fragment,me),Ze(fe.$$.fragment,me),Ze(Se.$$.fragment,me),Ze(ue.$$.fragment,me),Ze(ze.$$.fragment,me),Ze(nt.$$.fragment,me),Ze(We.$$.fragment,me),Ze(re.$$.fragment,me),Ze(Be.$$.fragment,me),be=!1},d(me){me&&N(e),Ye&&Ye.d(),ee&&ee.d(),at($),le&&le.d(),r[53](null),at(T),Pe&&Pe.d(),at(fe),at(Se),Je&&Je.d(),at(ue),at(ze),at(nt),at(We),at(re),at(Be),tt&&tt.d(),dt=!1,et(rt)}}}function Ur(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function sf(r,e,t){let n,a,b,d,i,o,u,m,f,g,v,k;Pt(r,Zt,ae=>t(49,u=ae)),Pt(r,yr,ae=>t(0,m=ae)),Pt(r,Kt,ae=>t(50,f=ae)),Pt(r,eh,ae=>t(26,g=ae)),Pt(r,qt,ae=>t(27,v=ae)),Pt(r,th,ae=>t(28,k=ae));let y=!1,c=!1,p=!1,h=!1,_=!1,w=!0,L=null,x,E=!1,S="",D="",B="",O="",I="text",R=!1,j=!0,K=null,J=!1,te="",W="",M="warning",P=null,H=lr(),z=null,$=!1,V=!1,X=!1;function Z(ae){const xe=An(ae.theme_mode,ae.theme);si(xe),t(21,H={...H,...ae,theme:xe,use_system_theme:ae.theme_mode==="system"}),Rn(H)}async function F(){if(!window.wailsBindings||typeof window.wailsBindings.GetSettings!="function"){Z({...H,theme_mode:"system"});return}try{const ae=await window.wailsBindings.GetSettings(),xe={...lr(),...ae,theme_mode:(ae==null?void 0:ae.theme_mode)||(ae!=null&&ae.use_system_theme?"system":(ae==null?void 0:ae.theme)||"dark")};Z(xe),xe.sidebar_width&&ni(xe.sidebar_width)}catch(ae){console.error("Failed to load app settings:",ae),Z({...lr(),theme_mode:"system"})}}async function T(ae){if(Z(ae),z=null,t(4,h=!1),!window.wailsBindings||typeof window.wailsBindings.UpdateSettings!="function")return;const xe={theme:H.theme,theme_mode:H.theme_mode,use_system_theme:H.use_system_theme,font_family:H.font_family,font_size:H.font_size,accent_color:H.accent_color,terminal_font_family:H.terminal_font_family,terminal_font_size:H.terminal_font_size,compact_mode:H.compact_mode,reduced_motion:H.reduced_motion,sidebar_width:u.sidebarWidth};try{await window.wailsBindings.UpdateSettings(xe)}catch(Ie){console.error("Failed to update app settings:",Ie)}}function Q(ae){const xe={...H,...ae},Ie=An(xe.theme_mode,xe.theme);si(Ie),Rn({...xe,theme:Ie,use_system_theme:xe.theme_mode==="system"})}function q(){z={...H},t(4,h=!0)}function ne(){t(4,h=!1),z&&(Z(z),z=null)}function ie(){c||t(1,y=!y)}function ce(){c||t(5,_=!_)}function fe(){c||t(6,w=!w)}function ge(ae){ae.preventDefault(),!(_||c)&&($=!0,document.addEventListener("mousemove",pe),document.addEventListener("mouseup",ye))}function pe(ae){if(!$)return;const xe=Math.max(200,Math.min(500,ae.clientX));ni(xe)}function ye(){$=!1,document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",ye)}function Ke(ae){ae.preventDefault(),!c&&(V=!0,document.addEventListener("mousemove",Le),document.addEventListener("mouseup",Se))}function Le(ae){if(!V)return;const xe=window.innerWidth,Ie=Math.max(300,Math.min(600,xe-ae.clientX));Xo(Ie)}function Se(){V=!1,document.removeEventListener("mousemove",Le),document.removeEventListener("mouseup",Se)}function ke(ae){if(ae.preventDefault(),c)return;X=!0;const xe=document.querySelector("[data-right-panel]");if(xe){const Ie=xe.getBoundingClientRect();se=ae.clientY,_e=o,ue=Ie.height}document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",Qe)}let se=0,_e=50,ue=0;function Ce(ae){if(!X)return;const Ie=(ae.clientY-se)/ue*100,pt=Math.max(20,Math.min(80,_e+Ie));Zo(pt)}function Qe(){X=!1,document.removeEventListener("mousemove",Ce),document.removeEventListener("mouseup",Qe)}function ut(ae){if(ae.type==="database"){t(6,w=!0),it({asset:ae,openPanel:!0});return}ae.type==="ssh"?t(6,w=!1):t(6,w=!0),x&&typeof x.handleConnect=="function"?x.handleConnect(ae):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}function ze(ae,xe){if(x&&typeof x.openDatabaseSession=="function"){x.openDatabaseSession({asset:ae,sessionId:xe});return}console.error("TerminalPanel database session API not available"),alert("数据库面板未初始化")}async function it(ae){var pt,_t;const xe=(ae==null?void 0:ae.asset)||ae,Ie=(ae==null?void 0:ae.openPanel)!==!1;if(xe){if(xe.dbConnected&&xe.dbSessionId&&Ie){ze(xe,xe.dbSessionId);return}if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载");return}try{const{ConnectDatabase:At,TestDatabaseConnection:Lt,HasPassword:$e,GetPassword:bt,SavePassword:tt}=window.wailsBindings,me=xe.dbSessionId||`db-${xe.id}`,Ve=xe.host,Ut=xe.port,Qt=xe.username,Rt=((pt=xe.metadata)==null?void 0:pt.db_type)||xe.dbType||"mysql",jt=((_t=xe.metadata)==null?void 0:_t.database)||"";let Tt="";try{if(typeof $e=="function"&&await $e(xe.id))Tt=await bt(xe.id);else{if(Tt=await qe({title:`连接到 ${xe.name}`,message:"请输入数据库密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Tt===null)return;Tt&&await Ee("保存密码","是否保存密码以便下次自动连接？","warning")&&typeof tt=="function"&&await tt(xe.id,Tt)}}catch(Ht){if(console.error("Failed to get saved password:",Ht),Tt=await qe({title:`连接到 ${xe.name}`,message:"请输入数据库密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Tt===null)return}if(!Tt){console.log("Database connection cancelled - no password provided");return}console.log("Connecting to database:",{sessionId:me,host:Ve,port:Ut,user:Qt,dbType:Rt,database:jt}),typeof Lt=="function"&&await Lt(Ve,Ut,Qt,Tt,Rt,jt),await At(me,Ve,Ut,Qt,Tt,Rt,jt),Yt.update(Ht=>Ht.map(Dt=>Dt.id===xe.id?{...Dt,dbConnected:!0,dbSessionId:me}:Dt)),Ie&&ze(xe,me)}catch(At){console.error("Database connection failed:",At),alert(`数据库连接失败: ${At.message||At}`)}}}function qe({title:ae,message:xe,placeholder:Ie,inputType:pt="text",defaultValue:_t="",allowEmpty:At=!1,trimValue:Lt=!0}){return new Promise($e=>{t(10,S=ae),t(11,D=xe),t(12,B=Ie),t(13,O=_t),t(14,I=pt),t(15,R=At),t(16,j=Lt),K=$e,t(9,E=!0)})}function nt(ae){t(9,E=!1),K&&(K(ae),K=null)}function je(){t(9,E=!1),K&&(K(null),K=null)}function Ee(ae,xe,Ie="warning"){return new Promise(pt=>{t(18,te=ae),t(19,W=xe),t(20,M=Ie),P=pt,t(17,J=!0)})}function We(){t(17,J=!1),P&&(P(!0),P=null)}function mt(){t(17,J=!1),P&&(P(!1),P=null)}async function ht(ae){var xe,Ie;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(ae);const pt={id:ae.id,name:ae.name,host:ae.host,port:ae.port,username:ae.user,group:((xe=ae.tags)==null?void 0:xe[0])||"默认分组",status:"online",type:ae.type||"ssh",auth_type:ae.auth_type,key_path:ae.key_path,tags:ae.tags||[],metadata:ae.metadata||{},dbType:(Ie=ae.metadata)==null?void 0:Ie.db_type,dbConnected:!1,dbSessionId:null};Yt.update(_t=>[..._t,pt])}catch(pt){throw console.error("Failed to add asset:",pt),pt}}function re(ae){t(7,L=ae),t(2,c=!0)}async function ve(ae){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Yt.update(xe=>xe.map(Ie=>{var pt,_t;return Ie.id===ae.id?{...Ie,id:ae.id,name:ae.name,host:ae.host,port:ae.port,username:ae.user,group:((pt=ae.tags)==null?void 0:pt[0])||"默认分组",type:ae.type||"ssh",auth_type:ae.auth_type,key_path:ae.key_path,tags:ae.tags||[],metadata:ae.metadata||{},dbType:(_t=ae.metadata)==null?void 0:_t.db_type,dbConnected:!1,dbSessionId:null}:Ie}))}catch(xe){throw console.error("Failed to update asset:",xe),xe}}async function we(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const ae=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",ae);const xe=ae.map(Ie=>{var pt,_t;return{id:Ie.id,name:Ie.name,host:Ie.host,port:Ie.port,username:Ie.user,group:((pt=Ie.tags)==null?void 0:pt[0])||"默认分组",status:"online",type:Ie.type||"ssh",auth_type:Ie.auth_type,key_path:Ie.key_path,tags:Ie.tags||[],metadata:Ie.metadata||{},dbType:(_t=Ie.metadata)==null?void 0:_t.db_type,dbConnected:!1,dbSessionId:null}});Yt.set(xe)}catch(ae){console.error("Failed to load connections:",ae)}}ar(async()=>{let ae=null,xe=null;try{const Ie=await Cr(()=>Promise.resolve().then(()=>bo),void 0);window.wailsBindings=Ie,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(Ie.default||Ie).join(", ")})),await F(),await we(),xe=_t=>{it(_t.detail)},window.addEventListener("database:connect",xe),ae=(await Cr(()=>Promise.resolve().then(()=>lo),void 0)).EventsOn("app:show-about",()=>{t(3,p=!0)}),window.addEventListener("assets-changed",we)}catch(Ie){console.warn("Wails bindings not available yet:",Ie.message),Z({...lr(),theme_mode:"system"})}return Ur(),window.addEventListener("resize",Ur),()=>{window.removeEventListener("resize",Ur),window.removeEventListener("assets-changed",we),xe&&window.removeEventListener("database:connect",xe),ae&&ae()}});const Be=()=>qt.togglePanel(),Fe=()=>{t(7,L=null),t(2,c=!0)};function Ae(ae){gt[ae?"unshift":"push"](()=>{x=ae,t(8,x)})}function Ne(ae){c=ae,t(2,c)}function be(ae){L=ae,t(7,L)}function dt(ae){y=ae,t(1,y)}const rt=()=>t(3,p=!1);function Ye(ae){p=ae,t(3,p)}function ee(ae){h=ae,t(4,h)}function le(ae){E=ae,t(9,E)}function De(ae){J=ae,t(17,J)}const Pe=()=>qt.setPanelOpen(!1),Je=()=>qt.setActiveTab("active"),st=()=>qt.setActiveTab("history"),Te=async ae=>{await Yr(ae.id),qt.cancelTransfer(ae.id)},Xe=()=>qt.clearCompleted(),Ft=ae=>qt.removeTransfer(ae.id);return r.$$.update=()=>{r.$$.dirty[1]&524288&&t(48,n=f?Array.from(f.values()):[]),r.$$.dirty[1]&131072&&t(47,a=n.some(ae=>{var xe;return((xe=ae==null?void 0:ae.connection)==null?void 0:xe.type)==="ssh"})),r.$$.dirty[0]&1&&t(25,b=m==="dark"?"dark":""),r.$$.dirty[1]&65536&&(a||t(6,w=!0)),r.$$.dirty[1]&262144&&t(24,d=u.sidebarWidth),r.$$.dirty[1]&262144&&t(23,i=u.rightPanelWidth),r.$$.dirty[1]&262144&&t(22,o=u.fileManagerHeight)},[m,y,c,p,h,_,w,L,x,E,S,D,B,O,I,R,j,J,te,W,M,H,o,i,d,b,g,v,k,T,Q,q,ne,ie,ce,fe,ge,Ke,ke,ut,nt,je,We,mt,ht,re,ve,a,n,u,f,Be,Fe,Ae,Ne,be,dt,rt,Ye,ee,le,De,Pe,Je,st,Te,Xe,Ft]}class nf extends Et{constructor(e){super(),xt(this,e,sf,rf,Ct,{},null,[-1,-1,-1,-1])}}new nf({target:document.getElementById("app")});
