var wo=Object.defineProperty;var ko=(r,e,t)=>e in r?wo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var jr=(r,e,t)=>ko(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const b of a)if(b.type==="childList")for(const d of b.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const b={};return a.integrity&&(b.integrity=a.integrity),a.referrerPolicy&&(b.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?b.credentials="include":a.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function s(a){if(a.ep)return;a.ep=!0;const b=t(a);fetch(a.href,b)}})();const So="modulepreload",Co=function(r){return"/"+r},ti={},Cr=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),i=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(t.map(o=>{if(o=Co(o),o in ti)return;ti[o]=!0;const u=o.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${g}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":So,u||(f.as="script"),f.crossOrigin="",f.href=o,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${o}`)))})}))}function b(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return a.then(d=>{for(const i of d||[])i.status==="rejected"&&b(i.reason);return e().catch(b)})};function Oe(){}function xo(r,e){for(const t in e)r[t]=e[t];return r}function Gn(r){return r()}function ri(){return Object.create(null)}function Qe(r){r.forEach(Gn)}function tr(r){return typeof r=="function"}function St(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Eo(r){return Object.keys(r).length===0}function Gr(r,...e){if(r==null){for(const s of e)s(void 0);return Oe}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Lo(r){let e;return Gr(r,t=>e=t)(),e}function Pt(r,e,t){r.$$.on_destroy.push(Gr(e,t))}function Do(r,e,t,s){if(r){const a=Jn(r,e,t,s);return r[0](a)}}function Jn(r,e,t,s){return r[1]&&s?xo(t.ctx.slice(),r[1](s(e))):t.ctx}function Mo(r,e,t,s){return r[2],e.dirty}function To(r,e,t,s,a,b){if(a){const d=Jn(e,t,s,b);r.p(d,a)}}function Bo(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function ii(r){return r??""}function Yn(r){return r&&tr(r.destroy)?r.destroy:Oe}const Xn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function l(r,e){r.appendChild(e)}function N(r,e,t){r.insertBefore(e,t||null)}function W(r){r.parentNode&&r.parentNode.removeChild(r)}function Mt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function C(r){return document.createElement(r)}function de(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function J(r){return document.createTextNode(r)}function O(){return J(" ")}function Ht(){return J("")}function X(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function Ao(r){return function(e){return e.preventDefault(),r.call(this,e)}}function vr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function n(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function xr(r){return r===""?null:+r}function Ro(r){return Array.from(r.childNodes)}function he(r,e){e=""+e,r.data!==e&&(r.data=e)}function Re(r,e){r.value=e??""}function Ae(r,e,t,s){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function nr(r,e,t){for(let s=0;s<r.options.length;s+=1){const a=r.options[s];if(a.__value===e){a.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Pr(r){const e=r.querySelector(":checked");return e&&e.__value}function Mr(r,e,t){r.classList.toggle(e,!!t)}function Gt(r,e){return new r(e)}let Er;function Sr(r){Er=r}function Zn(){if(!Er)throw new Error("Function called outside component initialization");return Er}function ar(r){Zn().$$.on_mount.push(r)}function Ir(r){Zn().$$.on_destroy.push(r)}const gr=[],_t=[];let mr=[];const Vr=[],Qn=Promise.resolve();let Kr=!1;function $n(){Kr||(Kr=!0,Qn.then(eo))}function Rr(){return $n(),Qn}function dr(r){mr.push(r)}function wt(r){Vr.push(r)}const Wr=new Set;let pr=0;function eo(){if(pr!==0)return;const r=Er;do{try{for(;pr<gr.length;){const e=gr[pr];pr++,Sr(e),Oo(e.$$)}}catch(e){throw gr.length=0,pr=0,e}for(Sr(null),gr.length=0,pr=0;_t.length;)_t.pop()();for(let e=0;e<mr.length;e+=1){const t=mr[e];Wr.has(t)||(Wr.add(t),t())}mr.length=0}while(gr.length);for(;Vr.length;)Vr.pop()();Kr=!1,Wr.clear(),Sr(r)}function Oo(r){if(r.fragment!==null){r.update(),Qe(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(dr)}}function Po(r){const e=[],t=[];mr.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),mr=e}const Or=new Set;let cr;function Wt(){cr={r:0,c:[],p:cr}}function Nt(){cr.r||Qe(cr.c),cr=cr.p}function Ue(r,e){r&&r.i&&(Or.delete(r),r.i(e))}function qe(r,e,t,s){if(r&&r.o){if(Or.has(r))return;Or.add(r),cr.c.push(()=>{Or.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}function ze(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Xt(r,e){r.d(1),e.delete(r.key)}function Io(r,e){qe(r,1,1,()=>{e.delete(r.key)})}function Jt(r,e,t,s,a,b,d,i,o,u,g,f){let m=r.length,v=b.length,k=m;const y={};for(;k--;)y[r[k].key]=k;const c=[],p=new Map,h=new Map,_=[];for(k=v;k--;){const E=f(a,b,k),S=t(E);let D=d.get(S);D?_.push(()=>D.p(E,e)):(D=u(S,E),D.c()),p.set(S,c[k]=D),S in y&&h.set(S,Math.abs(k-y[S]))}const w=new Set,L=new Set;function x(E){Ue(E,1),E.m(i,g),d.set(E.key,E),g=E.first,v--}for(;m&&v;){const E=c[v-1],S=r[m-1],D=E.key,B=S.key;E===S?(g=E.first,m--,v--):p.has(B)?!d.has(D)||w.has(D)?x(E):L.has(B)?m--:h.get(D)>h.get(B)?(L.add(D),x(E)):(w.add(B),m--):(o(S,d),m--)}for(;m--;){const E=r[m];p.has(E.key)||o(E,d)}for(;v;)x(c[v-1]);return Qe(_),c}function kt(r,e,t){const s=r.$$.props[e];s!==void 0&&(r.$$.bound[s]=t,t(r.$$.ctx[s]))}function nt(r){r&&r.c()}function it(r,e,t){const{fragment:s,after_update:a}=r.$$;s&&s.m(e,t),dr(()=>{const b=r.$$.on_mount.map(Gn).filter(tr);r.$$.on_destroy?r.$$.on_destroy.push(...b):Qe(b),r.$$.on_mount=[]}),a.forEach(dr)}function st(r,e){const t=r.$$;t.fragment!==null&&(Po(t.after_update),Qe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ho(r,e){r.$$.dirty[0]===-1&&(gr.push(r),$n(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function xt(r,e,t,s,a,b,d=null,i=[-1]){const o=Er;Sr(r);const u=r.$$={fragment:null,ctx:[],props:b,update:Oe,not_equal:a,bound:ri(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:ri(),dirty:i,skip_bound:!1,root:e.target||o.$$.root};d&&d(u.root);let g=!1;if(u.ctx=t?t(r,e.props||{},(f,m,...v)=>{const k=v.length?v[0]:m;return u.ctx&&a(u.ctx[f],u.ctx[f]=k)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](k),g&&Ho(r,f)),m}):[],u.update(),g=!0,Qe(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const f=Ro(e.target);u.fragment&&u.fragment.l(f),f.forEach(W)}else u.fragment&&u.fragment.c();e.intro&&Ue(r.$$.fragment),it(r,e.target,e.anchor),eo()}Sr(o)}class Et{constructor(){jr(this,"$$");jr(this,"$$set")}$destroy(){st(this,1),this.$destroy=Oe}$on(e,t){if(!tr(t))return Oe;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}$set(e){this.$$set&&!Eo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fo);const _r=[];function zo(r,e){return{subscribe:ur(r,e).subscribe}}function ur(r,e=Oe){let t;const s=new Set;function a(i){if(St(r,i)&&(r=i,t)){const o=!_r.length;for(const u of s)u[1](),_r.push(u,r);if(o){for(let u=0;u<_r.length;u+=2)_r[u][0](_r[u+1]);_r.length=0}}}function b(i){a(i(r))}function d(i,o=Oe){const u=[i,o];return s.add(u),s.size===1&&(t=e(a,b)||Oe),i(r),()=>{s.delete(u),s.size===0&&t&&(t(),t=null)}}return{set:a,update:b,subscribe:d}}function rr(r,e,t){const s=!Array.isArray(r),a=s?[r]:r;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const b=e.length<2;return zo(t,(d,i)=>{let o=!1;const u=[];let g=0,f=Oe;const m=()=>{if(g)return;f();const k=e(s?u[0]:u,d,i);b?d(k):f=tr(k)?k:Oe},v=a.map((k,y)=>Gr(k,c=>{u[y]=c,g&=~(1<<y),o&&m()},()=>{g|=1<<y}));return o=!0,m(),function(){Qe(v),f(),o=!1}})}const Yt=ur([]),jo=rr(Yt,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{})),Kt=ur(new Map),Vt=ur(null),to="ssh-tools-theme";function Wo(){if(typeof window>"u")return null;try{return localStorage.getItem(to)}catch{return null}}function No(r){if(!(typeof window>"u"))try{localStorage.setItem(to,r)}catch{}}const Uo=Wo(),Vo=Uo||"light",yr=ur(Vo);function si(r){yr.set(r),No(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Ko(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const qo={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},Go=Ko(),Zt=ur({...qo,...Go});Zt.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});rr(Zt,r=>r.isDevToolsOpen);rr(Zt,r=>r.isFileManagerOpen);rr(Zt,r=>r.isMonitorOpen);rr(Zt,r=>r.sidebarWidth);rr(Zt,r=>r.rightPanelWidth);rr(Zt,r=>r.fileManagerHeight);function ni(r){Zt.update(e=>({...e,sidebarWidth:r}))}function Jo(r){Zt.update(e=>({...e,rightPanelWidth:r}))}function Yo(r){Zt.update(e=>({...e,fileManagerHeight:r}))}function oi(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y;const c=r[7].default,p=Do(c,r,r[6],null);return{c(){e=C("div"),t=C("div"),s=O(),a=C("div"),b=C("div"),d=C("h2"),i=J(r[2]),o=O(),u=C("button"),u.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',g=O(),f=C("div"),p&&p.c(),n(t,"class","absolute inset-0 bg-slate-900/35 dark:bg-black/45 backdrop-blur-sm transition-opacity pointer-events-auto"),n(d,"class","text-base font-semibold text-slate-900 dark:text-white"),n(u,"class","p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2"),n(b,"class","flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-700"),n(f,"class","flex-1 overflow-y-auto p-6"),n(a,"class",m=`relative w-full ${r[3]} bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 m-4 max-h-[92vh] overflow-hidden flex flex-col transform transition-all`),n(e,"class","fixed inset-0 z-50 flex items-center justify-center"),n(e,"role","dialog"),n(e,"aria-modal","true")},m(h,_){N(h,e,_),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),l(d,i),l(b,o),l(b,u),l(a,g),l(a,f),p&&p.m(f,null),v=!0,k||(y=[X(u,"click",function(){tr(r[1])&&r[1].apply(this,arguments)}),X(e,"click",r[4])],k=!0)},p(h,_){r=h,(!v||_&4)&&he(i,r[2]),p&&p.p&&(!v||_&64)&&To(p,c,r,r[6],v?Mo(c,r[6],_,null):Bo(r[6]),null),(!v||_&8&&m!==(m=`relative w-full ${r[3]} bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 m-4 max-h-[92vh] overflow-hidden flex flex-col transform transition-all`))&&n(a,"class",m)},i(h){v||(Ue(p,h),v=!0)},o(h){qe(p,h),v=!1},d(h){h&&W(e),p&&p.d(h),k=!1,Qe(y)}}}function Xo(r){let e,t,s=r[0]&&oi(r);return{c(){s&&s.c(),e=Ht()},m(a,b){s&&s.m(a,b),N(a,e,b),t=!0},p(a,[b]){a[0]?s?(s.p(a,b),b&1&&Ue(s,1)):(s=oi(a),s.c(),Ue(s,1),s.m(e.parentNode,e)):s&&(Wt(),qe(s,1,1,()=>{s=null}),Nt())},i(a){t||(Ue(s),t=!0)},o(a){qe(s),t=!1},d(a){a&&W(e),s&&s.d(a)}}}function Zo(r,e,t){let s,{$$slots:a={},$$scope:b}=e,{isOpen:d=!1}=e,{onClose:i=()=>{}}=e,{title:o=""}=e,{size:u="md"}=e;const g={sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-5xl"};function f(v){v.target===v.currentTarget&&i()}function m(v){v.key==="Escape"&&d&&i()}return r.$$set=v=>{"isOpen"in v&&t(0,d=v.isOpen),"onClose"in v&&t(1,i=v.onClose),"title"in v&&t(2,o=v.title),"size"in v&&t(5,u=v.size),"$$scope"in v&&t(6,b=v.$$scope)},r.$$.update=()=>{r.$$.dirty&32&&t(3,s=g[u]||g.md),r.$$.dirty&1&&(d?document.addEventListener("keydown",m):document.removeEventListener("keydown",m))},[d,i,o,s,f,u,b,a]}class wr extends Et{constructor(e){super(),xt(this,e,Zo,Xo,St,{isOpen:0,onClose:1,title:2,size:5})}}function Qo(r){let e,t,s,a,b,d,i,o,u,g,f,m,v;return{c(){e=C("div"),t=C("p"),s=J(r[2]),a=O(),b=C("div"),d=C("button"),i=J(r[4]),o=O(),u=C("button"),g=J(r[3]),n(t,"class","text-sm text-slate-700 dark:text-slate-300 leading-relaxed"),n(d,"type","button"),n(d,"class","px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2"),n(u,"type","button"),n(u,"class",f="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":r[7]==="warning"?"bg-amber-500 hover:bg-amber-600 text-white":"accent-bg accent-bg-hover text-white")),n(b,"class","flex gap-2 pt-2"),n(e,"class","space-y-4")},m(k,y){N(k,e,y),l(e,t),l(t,s),l(e,a),l(e,b),l(b,d),l(d,i),l(b,o),l(b,u),l(u,g),m||(v=[X(d,"click",function(){tr(r[6])&&r[6].apply(this,arguments)}),X(u,"click",function(){tr(r[5])&&r[5].apply(this,arguments)})],m=!0)},p(k,y){r=k,y&4&&he(s,r[2]),y&16&&he(i,r[4]),y&8&&he(g,r[3]),y&128&&f!==(f="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-rose-600 hover:bg-rose-700 text-white":r[7]==="warning"?"bg-amber-500 hover:bg-amber-600 text-white":"accent-bg accent-bg-hover text-white"))&&n(u,"class",f)},d(k){k&&W(e),m=!1,Qe(v)}}}function $o(r){let e,t,s;function a(d){r[8](d)}let b={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[Qo]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),_t.push(()=>kt(e,"isOpen",a)),{c(){nt(e.$$.fragment)},m(d,i){it(e,d,i),s=!0},p(d,[i]){const o={};i&64&&(o.onClose=d[6]),i&2&&(o.title=d[1]),i&764&&(o.$$scope={dirty:i,ctx:d}),!t&&i&1&&(t=!0,o.isOpen=d[0],wt(()=>t=!1)),e.$set(o)},i(d){s||(Ue(e.$$.fragment,d),s=!0)},o(d){qe(e.$$.fragment,d),s=!1},d(d){st(e,d)}}}function el(r,e,t){let{isOpen:s=!1}=e,{title:a=""}=e,{message:b=""}=e,{confirmText:d="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:o=()=>{}}=e,{onCancel:u=()=>{}}=e,{type:g="default"}=e;function f(m){s=m,t(0,s)}return r.$$set=m=>{"isOpen"in m&&t(0,s=m.isOpen),"title"in m&&t(1,a=m.title),"message"in m&&t(2,b=m.message),"confirmText"in m&&t(3,d=m.confirmText),"cancelText"in m&&t(4,i=m.cancelText),"onConfirm"in m&&t(5,o=m.onConfirm),"onCancel"in m&&t(6,u=m.onCancel),"type"in m&&t(7,g=m.type)},[s,a,b,d,i,o,u,g,f]}class hr extends Et{constructor(e){super(),xt(this,e,el,$o,St,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function li(r){let e,t;return{c(){e=C("p"),t=J(r[2]),n(e,"class","text-sm text-slate-700 dark:text-slate-300 leading-relaxed")},m(s,a){N(s,e,a),l(e,t)},p(s,a){a&4&&he(t,s[2])},d(s){s&&W(e)}}}function tl(r){let e,t,s;return{c(){e=C("input"),n(e,"type","text"),n(e,"placeholder",r[3]),n(e,"class","w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus-visible:ring-2 focus:border-transparent transition-all")},m(a,b){N(a,e,b),r[18](e),Re(e,r[10]),t||(s=[X(e,"input",r[19]),X(e,"keydown",r[12])],t=!0)},p(a,b){b&8&&n(e,"placeholder",a[3]),b&1024&&e.value!==a[10]&&Re(e,a[10])},d(a){a&&W(e),r[18](null),t=!1,Qe(s)}}}function rl(r){let e,t,s;return{c(){e=C("input"),n(e,"type","password"),n(e,"placeholder",r[3]),n(e,"class","w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus-visible:ring-2 focus:border-transparent transition-all")},m(a,b){N(a,e,b),r[16](e),Re(e,r[10]),t||(s=[X(e,"input",r[17]),X(e,"keydown",r[12])],t=!0)},p(a,b){b&8&&n(e,"placeholder",a[3]),b&1024&&e.value!==a[10]&&Re(e,a[10])},d(a){a&&W(e),r[16](null),t=!1,Qe(s)}}}function il(r){let e,t,s,a,b,d,i,o,u,g,f,m,v=r[2]&&li(r);function k(p,h){return p[4]==="password"?rl:tl}let y=k(r),c=y(r);return{c(){e=C("div"),v&&v.c(),t=O(),c.c(),s=O(),a=C("div"),b=C("button"),d=J(r[7]),i=O(),o=C("button"),u=J(r[6]),n(b,"type","button"),n(b,"class","px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2"),n(o,"type","button"),o.disabled=g=!r[5]&&!r[10].trim(),n(o,"class","px-3 py-1.5 accent-bg accent-bg-hover text-white rounded-md text-xs font-medium transition-all shadow-sm focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"),n(a,"class","flex gap-2 pt-2"),n(e,"class","space-y-4")},m(p,h){N(p,e,h),v&&v.m(e,null),l(e,t),c.m(e,null),l(e,s),l(e,a),l(a,b),l(b,d),l(a,i),l(a,o),l(o,u),f||(m=[X(b,"click",function(){tr(r[8])&&r[8].apply(this,arguments)}),X(o,"click",r[11])],f=!0)},p(p,h){r=p,r[2]?v?v.p(r,h):(v=li(r),v.c(),v.m(e,t)):v&&(v.d(1),v=null),y===(y=k(r))&&c?c.p(r,h):(c.d(1),c=y(r),c&&(c.c(),c.m(e,s))),h&128&&he(d,r[7]),h&64&&he(u,r[6]),h&1056&&g!==(g=!r[5]&&!r[10].trim())&&(o.disabled=g)},d(p){p&&W(e),v&&v.d(),c.d(),f=!1,Qe(m)}}}function sl(r){let e,t,s;function a(d){r[20](d)}let b={onClose:r[8],title:r[1],size:"sm",$$slots:{default:[il]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),_t.push(()=>kt(e,"isOpen",a)),{c(){nt(e.$$.fragment)},m(d,i){it(e,d,i),s=!0},p(d,[i]){const o={};i&256&&(o.onClose=d[8]),i&2&&(o.title=d[1]),i&2099196&&(o.$$scope={dirty:i,ctx:d}),!t&&i&1&&(t=!0,o.isOpen=d[0],wt(()=>t=!1)),e.$set(o)},i(d){s||(Ue(e.$$.fragment,d),s=!0)},o(d){qe(e.$$.fragment,d),s=!1},d(d){st(e,d)}}}function nl(r,e,t){let{isOpen:s=!1}=e,{title:a=""}=e,{message:b=""}=e,{defaultValue:d=""}=e,{placeholder:i=""}=e,{inputType:o="text"}=e,{allowEmpty:u=!1}=e,{trimValue:g=!0}=e,{confirmText:f="确定"}=e,{cancelText:m="取消"}=e,{onConfirm:v=()=>{}}=e,{onCancel:k=()=>{}}=e,y="",c;function p(){if(u){v(g?y.trim():y);return}const S=g?y.trim():y;S&&v(S)}function h(S){S.key==="Enter"&&p()}function _(S){_t[S?"unshift":"push"](()=>{c=S,t(9,c)})}function w(){y=this.value,t(10,y),t(0,s),t(13,d)}function L(S){_t[S?"unshift":"push"](()=>{c=S,t(9,c)})}function x(){y=this.value,t(10,y),t(0,s),t(13,d)}function E(S){s=S,t(0,s)}return r.$$set=S=>{"isOpen"in S&&t(0,s=S.isOpen),"title"in S&&t(1,a=S.title),"message"in S&&t(2,b=S.message),"defaultValue"in S&&t(13,d=S.defaultValue),"placeholder"in S&&t(3,i=S.placeholder),"inputType"in S&&t(4,o=S.inputType),"allowEmpty"in S&&t(5,u=S.allowEmpty),"trimValue"in S&&t(14,g=S.trimValue),"confirmText"in S&&t(6,f=S.confirmText),"cancelText"in S&&t(7,m=S.cancelText),"onConfirm"in S&&t(15,v=S.onConfirm),"onCancel"in S&&t(8,k=S.onCancel)},r.$$.update=()=>{r.$$.dirty&8193&&s&&t(10,y=d),r.$$.dirty&513&&s&&c&&setTimeout(()=>{c==null||c.focus(),c==null||c.select()},0)},[s,a,b,i,o,u,f,m,k,c,y,p,h,d,g,v,_,w,L,x,E]}class br extends Et{constructor(e){super(),xt(this,e,nl,sl,St,{isOpen:0,title:1,message:2,defaultValue:13,placeholder:3,inputType:4,allowEmpty:5,trimValue:14,confirmText:6,cancelText:7,onConfirm:15,onCancel:8})}}function ai(r,e,t){const s=r.slice();return s[81]=e[t][0],s[82]=e[t][1],s}function ci(r,e,t){const s=r.slice();return s[85]=e[t],s}function di(r,e,t){const s=r.slice();return s[81]=e[t][0],s[82]=e[t][1],s}function hi(r,e,t){const s=r.slice();return s[85]=e[t],s}function ui(r,e,t){const s=r.slice();return s[92]=e[t],s}function fi(r,e,t){const s=r.slice();return s[95]=e[t],s}function pi(r){let e,t,s,a,b,d,i,o,u,g,f,m;return{c(){e=C("div"),t=C("button"),t.innerHTML='<svg class="w-4 h-4 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(加密)</span>',s=O(),a=C("button"),a.innerHTML='<svg class="w-4 h-4 accent-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(跨设备加密)</span>',b=O(),d=C("button"),d.innerHTML='<svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导出(明文)</span>',i=O(),o=C("div"),u=O(),g=C("button"),g.innerHTML='<svg class="w-4 h-4 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导入连接</span>',n(t,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),n(a,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),n(d,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),n(o,"class","border-t border-gray-200 dark:border-gray-700 my-1"),n(g,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),n(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10 py-1 min-w-[160px]")},m(v,k){N(v,e,k),l(e,t),l(e,s),l(e,a),l(e,b),l(e,d),l(e,i),l(e,o),l(e,u),l(e,g),f||(m=[X(t,"click",r[55]),X(a,"click",r[56]),X(d,"click",r[57]),X(g,"click",r[42])],f=!0)},p:Oe,d(v){v&&W(e),f=!1,Qe(m)}}}function ol(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M9 5l7 7-7 7"),n(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function ll(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M19 9l-7 7-7-7"),n(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function _i(r){let e,t=[],s=new Map,a=ze(r[82]);const b=d=>d[85].id;for(let d=0;d<a.length;d+=1){let i=hi(r,a,d),o=b(i);s.set(o,t[d]=Si(o,i))}return{c(){e=C("div");for(let d=0;d<t.length;d+=1)t[d].c();n(e,"class","ml-4")},m(d,i){N(d,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(d,i){i[0]&1955528709|i[1]&131072&&(a=ze(d[82]),t=Jt(t,i,b,1,d,a,s,e,Xt,Si,null,hi))},d(d){d&&W(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function gi(r){let e,t,s,a,b;function d(g,f){return f[0]&8454144&&(t=null),t==null&&(t=!!g[16].has(g[85].id)),t?cl:al}let i=d(r,[-1,-1,-1,-1]),o=i(r);function u(){return r[60](r[85])}return{c(){e=C("button"),o.c(),n(e,"type","button"),n(e,"class","absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 flex items-center justify-center rounded opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-100 dark:hover:bg-gray-700"),n(e,"title",s=r[85].dbConnected?"展开数据库":"连接后展开")},m(g,f){N(g,e,f),o.m(e,null),a||(b=X(e,"click",vr(u)),a=!0)},p(g,f){r=g,i!==(i=d(r,f))&&(o.d(1),o=i(r),o&&(o.c(),o.m(e,null))),f[0]&8388608&&s!==(s=r[85].dbConnected?"展开数据库":"连接后展开")&&n(e,"title",s)},d(g){g&&W(e),o.d(),a=!1,b()}}}function al(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M9 5l7 7-7 7"),n(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function cl(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M19 9l-7 7-7-7"),n(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function mi(r){let e,t=r[85].dbConnected?"已连接":"未连接",s,a;return{c(){e=C("span"),s=J(t),n(e,"class",a=`text-[10px] px-1.5 py-0.5 rounded ${r[85].dbConnected?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300"}`)},m(b,d){N(b,e,d),l(e,s)},p(b,d){d[0]&8388608&&t!==(t=b[85].dbConnected?"已连接":"未连接")&&he(s,t),d[0]&8388608&&a!==(a=`text-[10px] px-1.5 py-0.5 rounded ${b[85].dbConnected?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300"}`)&&n(e,"class",a)},d(b){b&&W(e)}}}function bi(r){let e,t=r[85].dbType.toUpperCase()+"",s;return{c(){e=J("• "),s=J(t)},m(a,b){N(a,e,b),N(a,s,b)},p(a,b){b[0]&8388608&&t!==(t=a[85].dbType.toUpperCase()+"")&&he(s,t)},d(a){a&&(W(e),W(s))}}}function vi(r){let e,t,s,a,b,d,i,o;function u(){return r[66](r[85])}function g(v,k){var y,c,p,h;return(y=v[18][v[85].id])!=null&&y.loading?fl:(c=v[18][v[85].id])!=null&&c.error?ul:(h=(p=v[18][v[85].id])==null?void 0:p.items)!=null&&h.length?hl:dl}let f=g(r),m=f(r);return{c(){e=C("div"),t=C("div"),s=C("span"),s.textContent="数据库",a=O(),b=C("button"),b.textContent="刷新",d=O(),m.c(),n(b,"type","button"),n(b,"class","px-2 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700"),n(t,"class","flex items-center justify-between text-xs text-gray-600 dark:text-gray-300 mb-2"),n(e,"class","ml-8 mr-2 mb-2 rounded-md border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 p-2")},m(v,k){N(v,e,k),l(e,t),l(t,s),l(t,a),l(t,b),l(e,d),m.m(e,null),i||(o=X(b,"click",vr(u)),i=!0)},p(v,k){r=v,f===(f=g(r))&&m?m.p(r,k):(m.d(1),m=f(r),m&&(m.c(),m.m(e,null)))},d(v){v&&W(e),m.d(),i=!1,o()}}}function dl(r){let e;return{c(){e=C("div"),e.textContent="暂无数据库",n(e,"class","text-xs text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function hl(r){let e,t=ze(r[18][r[85].id].items),s=[];for(let a=0;a<t.length;a+=1)s[a]=ki(ui(r,t,a));return{c(){e=C("div");for(let a=0;a<s.length;a+=1)s[a].c();n(e,"class","space-y-1")},m(a,b){N(a,e,b);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(e,null)},p(a,b){if(b[0]&1083047936){t=ze(a[18][a[85].id].items);let d;for(d=0;d<t.length;d+=1){const i=ui(a,t,d);s[d]?s[d].p(i,b):(s[d]=ki(i),s[d].c(),s[d].m(e,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=t.length}},d(a){a&&W(e),Mt(s,a)}}}function ul(r){let e,t=r[18][r[85].id].error+"",s;return{c(){e=C("div"),s=J(t),n(e,"class","text-xs text-red-500")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&8650752&&t!==(t=a[18][a[85].id].error+"")&&he(s,t)},d(a){a&&W(e)}}}function fl(r){let e;return{c(){e=C("div"),e.textContent="加载中...",n(e,"class","text-xs text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function pl(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M9 5l7 7-7 7"),n(e,"class","w-3 h-3 text-gray-500"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function _l(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M19 9l-7 7-7-7"),n(e,"class","w-3 h-3 text-gray-500"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function yi(r){let e;function t(b,d){var i,o,u,g;return(i=b[19][`${b[85].id}:${b[92]}`])!=null&&i.loading?vl:(o=b[19][`${b[85].id}:${b[92]}`])!=null&&o.error?bl:(g=(u=b[19][`${b[85].id}:${b[92]}`])==null?void 0:u.items)!=null&&g.length?ml:gl}let s=t(r),a=s(r);return{c(){e=C("div"),a.c(),n(e,"class","ml-5 mt-1 space-y-1")},m(b,d){N(b,e,d),a.m(e,null)},p(b,d){s===(s=t(b))&&a?a.p(b,d):(a.d(1),a=s(b),a&&(a.c(),a.m(e,null)))},d(b){b&&W(e),a.d()}}}function gl(r){let e;return{c(){e=C("div"),e.textContent="暂无表",n(e,"class","text-xs text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function ml(r){let e,t=ze(r[19][`${r[85].id}:${r[92]}`].items),s=[];for(let a=0;a<t.length;a+=1)s[a]=wi(fi(r,t,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ht()},m(a,b){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(a,b);N(a,e,b)},p(a,b){if(b[0]&9175040){t=ze(a[19][`${a[85].id}:${a[92]}`].items);let d;for(d=0;d<t.length;d+=1){const i=fi(a,t,d);s[d]?s[d].p(i,b):(s[d]=wi(i),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=t.length}},d(a){a&&W(e),Mt(s,a)}}}function bl(r){let e,t=r[19][`${r[85].id}:${r[92]}`].error+"",s;return{c(){e=C("div"),s=J(t),n(e,"class","text-xs text-red-500")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&9175040&&t!==(t=a[19][`${a[85].id}:${a[92]}`].error+"")&&he(s,t)},d(a){a&&W(e)}}}function vl(r){let e;return{c(){e=C("div"),e.textContent="加载表中...",n(e,"class","text-xs text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function wi(r){let e,t=r[95]+"",s,a,b,d;function i(){return r[68](r[85],r[92],r[95])}return{c(){e=C("button"),s=J(t),a=O(),n(e,"type","button"),n(e,"class","w-full text-left text-xs px-2 py-1 rounded accent-soft-hover")},m(o,u){N(o,e,u),l(e,s),l(e,a),b||(d=X(e,"click",vr(i)),b=!0)},p(o,u){r=o,u[0]&9175040&&t!==(t=r[95]+"")&&he(s,t)},d(o){o&&W(e),b=!1,d()}}}function ki(r){var h;let e,t,s,a,b,d=r[92]+"",i,o,u=(h=r[17][r[85].id])==null?void 0:h.has(r[92]),g,f,m;function v(_,w){var L;return w[0]&8781824&&(s=null),s==null&&(s=!!((L=_[17][_[85].id])!=null&&L.has(_[92]))),s?_l:pl}let k=v(r,[-1,-1,-1,-1]),y=k(r);function c(){return r[67](r[85],r[92])}let p=u&&yi(r);return{c(){e=C("div"),t=C("button"),y.c(),a=O(),b=C("span"),i=J(d),o=O(),p&&p.c(),g=O(),n(b,"class","flex-1 text-left truncate"),n(t,"type","button"),n(t,"class","w-full flex items-center gap-2 text-xs px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700")},m(_,w){N(_,e,w),l(e,t),y.m(t,null),l(t,a),l(t,b),l(b,i),l(e,o),p&&p.m(e,null),l(e,g),f||(m=X(t,"click",vr(c)),f=!0)},p(_,w){var L;r=_,k!==(k=v(r,w))&&(y.d(1),y=k(r),y&&(y.c(),y.m(t,a))),w[0]&8650752&&d!==(d=r[92]+"")&&he(i,d),w[0]&8781824&&(u=(L=r[17][r[85].id])==null?void 0:L.has(r[92])),u?p?p.p(r,w):(p=yi(r),p.c(),p.m(e,g)):p&&(p.d(1),p=null)},d(_){_&&W(e),y.d(),p&&p.d(),f=!1,m()}}}function Si(r,e){let t,s,a,b,d=Mi(e[85].type)+"",i,o,u,g,f=e[85].name+"",m,v,k,y,c,p,h,_=e[85].username+"",w,L,x=e[85].host+"",E,S,D=e[85].port+"",B,R,P,A,j,K,V,$,U,M,I=e[85].type==="database"&&e[16].has(e[85].id),H,z,ee,q=e[85].type==="database"&&gi(e),Z=e[85].type==="database"&&mi(e),Y=e[85].type==="database"&&e[85].dbType&&bi(e);function F(){return e[61](e[85])}function T(){return e[62](e[85])}function Q(...ce){return e[63](e[85],...ce)}function G(){return e[64](e[85])}function ne(...ce){return e[65](e[85],...ce)}let ie=I&&vi(e);return{key:r,first:null,c(){t=C("div"),s=C("div"),q&&q.c(),a=O(),b=C("div"),i=O(),o=C("div"),u=C("div"),g=C("span"),m=J(f),v=O(),k=C("div"),c=O(),Z&&Z.c(),p=O(),h=C("div"),w=J(_),L=J("@"),E=J(x),S=J(":"),B=J(D),R=O(),Y&&Y.c(),P=O(),A=C("div"),j=C("button"),j.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',K=O(),V=C("button"),V.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',$=O(),U=C("button"),U.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',M=O(),ie&&ie.c(),H=O(),n(b,"class","flex-shrink-0"),n(g,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),n(k,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[85].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),n(u,"class","flex items-center gap-2"),n(h,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),n(o,"class","flex-1 min-w-0"),n(j,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),n(j,"title","连接"),n(V,"class","p-1 accent-soft-hover rounded"),n(U,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),n(A,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),n(s,"class","group relative flex items-center gap-2 px-3 py-2.5 accent-soft-hover rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(ce,ue){N(ce,t,ue),l(t,s),q&&q.m(s,null),l(s,a),l(s,b),b.innerHTML=d,l(s,i),l(s,o),l(o,u),l(u,g),l(g,m),l(u,v),l(u,k),l(u,c),Z&&Z.m(u,null),l(o,p),l(o,h),l(h,w),l(h,L),l(h,E),l(h,S),l(h,B),l(h,R),Y&&Y.m(h,null),l(s,P),l(s,A),l(A,j),l(A,K),l(A,V),l(A,$),l(A,U),l(t,M),ie&&ie.m(t,null),l(t,H),z||(ee=[X(j,"click",vr(F)),X(V,"click",vr(T)),X(U,"click",Q),X(s,"click",G),X(s,"contextmenu",ne)],z=!0)},p(ce,ue){e=ce,e[85].type==="database"?q?q.p(e,ue):(q=gi(e),q.c(),q.m(s,a)):q&&(q.d(1),q=null),ue[0]&8388608&&d!==(d=Mi(e[85].type)+"")&&(b.innerHTML=d),ue[0]&8388608&&f!==(f=e[85].name+"")&&he(m,f),ue[0]&8388608&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[85].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&n(k,"class",y),e[85].type==="database"?Z?Z.p(e,ue):(Z=mi(e),Z.c(),Z.m(u,null)):Z&&(Z.d(1),Z=null),ue[0]&8388608&&_!==(_=e[85].username+"")&&he(w,_),ue[0]&8388608&&x!==(x=e[85].host+"")&&he(E,x),ue[0]&8388608&&D!==(D=e[85].port+"")&&he(B,D),e[85].type==="database"&&e[85].dbType?Y?Y.p(e,ue):(Y=bi(e),Y.c(),Y.m(h,null)):Y&&(Y.d(1),Y=null),ue[0]&8454144&&(I=e[85].type==="database"&&e[16].has(e[85].id)),I?ie?ie.p(e,ue):(ie=vi(e),ie.c(),ie.m(t,H)):ie&&(ie.d(1),ie=null)},d(ce){ce&&W(t),q&&q.d(),Z&&Z.d(),Y&&Y.d(),ie&&ie.d(),z=!1,Qe(ee)}}}function Ci(r){let e,t,s,a,b,d,i,o,u=r[81]+"",g,f,m,v,k=r[82].length+"",y,c,p,h=r[5].has(r[81]),_,w,L;function x(R,P){return P[0]&8388640&&(s=null),s==null&&(s=!!R[5].has(R[81])),s?ll:ol}let E=x(r,[-1,-1,-1,-1]),S=E(r);function D(){return r[59](r[81])}let B=h&&_i(r);return{c(){e=C("div"),t=C("div"),S.c(),a=O(),b=de("svg"),d=de("path"),i=O(),o=C("span"),g=J(u),f=O(),m=C("span"),v=J("("),y=J(k),c=J(")"),p=O(),B&&B.c(),_=O(),n(d,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),n(b,"class","w-4 h-4 text-amber-500"),n(b,"fill","currentColor"),n(b,"viewBox","0 0 24 24"),n(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),n(m,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),n(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),n(e,"class","mb-1")},m(R,P){N(R,e,P),l(e,t),S.m(t,null),l(t,a),l(t,b),l(b,d),l(t,i),l(t,o),l(o,g),l(t,f),l(t,m),l(m,v),l(m,y),l(m,c),l(e,p),B&&B.m(e,null),l(e,_),w||(L=X(t,"click",D),w=!0)},p(R,P){r=R,E!==(E=x(r,P))&&(S.d(1),S=E(r),S&&(S.c(),S.m(t,a))),P[0]&8388608&&u!==(u=r[81]+"")&&he(g,u),P[0]&8388608&&k!==(k=r[82].length+"")&&he(y,k),P[0]&8388640&&(h=r[5].has(r[81])),h?B?B.p(r,P):(B=_i(r),B.c(),B.m(e,_)):B&&(B.d(1),B=null)},d(R){R&&W(e),S.d(),B&&B.d(),w=!1,L()}}}function xi(r){let e,t,s,a,b;return{c(){e=C("div"),t=C("button"),t.innerHTML='<svg class="w-4 h-4 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> <span>断开连接</span>',n(t,"type","button"),n(t,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),n(e,"class","fixed z-[120] w-40 rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-lg"),n(e,"style",s=`top: ${r[22].y}px; left: ${r[22].x}px;`)},m(d,i){N(d,e,i),l(e,t),a||(b=X(t,"click",r[27]),a=!0)},p(d,i){i[0]&4194304&&s!==(s=`top: ${d[22].y}px; left: ${d[22].x}px;`)&&n(e,"style",s)},d(d){d&&W(e),a=!1,b()}}}function Ei(r,e){let t,s,a,b,d,i=e[85].name+"",o,u,g,f=e[85].username+"",m,v,k=e[85].host+"",y,c,p,h;function _(){return e[72](e[85])}return{key:r,first:null,c(){t=C("label"),s=C("input"),b=O(),d=C("span"),o=J(i),u=O(),g=C("span"),m=J(f),v=J("@"),y=J(k),c=O(),n(s,"type","checkbox"),s.checked=a=e[12].has(e[85].id),n(s,"class","w-4 h-4 accent-control"),n(d,"class","truncate"),n(g,"class","text-xs text-gray-400 dark:text-gray-500 truncate"),n(t,"class","flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"),this.first=t},m(w,L){N(w,t,L),l(t,s),l(t,b),l(t,d),l(d,o),l(t,u),l(t,g),l(g,m),l(g,v),l(g,y),l(t,c),p||(h=X(s,"change",_),p=!0)},p(w,L){e=w,L[0]&16781312&&a!==(a=e[12].has(e[85].id))&&(s.checked=a),L[0]&16777216&&i!==(i=e[85].name+"")&&he(o,i),L[0]&16777216&&f!==(f=e[85].username+"")&&he(m,f),L[0]&16777216&&k!==(k=e[85].host+"")&&he(y,k)},d(w){w&&W(t),p=!1,h()}}}function Li(r){let e,t,s,a,b,d,i=r[81]+"",o,u,g,f,m=r[82].length+"",v,k,y,c,p=[],h=new Map,_,w,L;function x(){return r[71](r[82])}let E=ze(r[82]);const S=D=>D[85].id;for(let D=0;D<E.length;D+=1){let B=ci(r,E,D),R=S(B);h.set(R,p[D]=Ei(R,B))}return{c(){e=C("div"),t=C("div"),s=C("input"),b=O(),d=C("span"),o=J(i),u=O(),g=C("span"),f=J("("),v=J(m),k=J(")"),y=O(),c=C("div");for(let D=0;D<p.length;D+=1)p[D].c();_=O(),n(s,"type","checkbox"),s.checked=a=r[41](r[82]),n(s,"class","w-4 h-4 accent-control"),n(d,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),n(g,"class","text-xs text-gray-400 dark:text-gray-500"),n(t,"class","flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700/40"),n(c,"class","px-3 py-2 space-y-1"),n(e,"class","rounded-lg border border-gray-200 dark:border-gray-700")},m(D,B){N(D,e,B),l(e,t),l(t,s),l(t,b),l(t,d),l(d,o),l(t,u),l(t,g),l(g,f),l(g,v),l(g,k),l(e,y),l(e,c);for(let R=0;R<p.length;R+=1)p[R]&&p[R].m(c,null);l(e,_),w||(L=X(s,"change",x),w=!0)},p(D,B){r=D,B[0]&16777216&&a!==(a=r[41](r[82]))&&(s.checked=a),B[0]&16777216&&i!==(i=r[81]+"")&&he(o,i),B[0]&16777216&&m!==(m=r[82].length+"")&&he(v,m),B[0]&16781312|B[1]&128&&(E=ze(r[82]),p=Jt(p,B,S,1,r,E,h,c,Xt,Ei,null,ci))},d(D){D&&W(e);for(let B=0;B<p.length;B+=1)p[B].d();w=!1,L()}}}function yl(r){let e,t,s,a,b=r[12].size+"",d,i,o=r[4].length+"",u,g,f,m=r[12].size===r[4].length?"取消全选":"全选",v,k,y,c,p,h,_,w,L,x,E,S,D=ze(Object.entries(r[24])),B=[];for(let R=0;R<D.length;R+=1)B[R]=Li(ai(r,D,R));return{c(){e=C("div"),t=C("div"),s=C("div"),a=J("已选 "),d=J(b),i=J(" / "),u=J(o),g=O(),f=C("button"),v=J(m),k=O(),y=C("div");for(let R=0;R<B.length;R+=1)B[R].c();c=O(),p=C("div"),h=C("button"),h.textContent="取消",_=O(),w=C("button"),L=J("导出"),n(s,"class","text-xs text-gray-500 dark:text-gray-400"),n(f,"type","button"),n(f,"class","text-xs accent-text hover:underline"),n(t,"class","flex items-center justify-between"),n(y,"class","max-h-64 overflow-y-auto space-y-2"),n(h,"type","button"),n(h,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),n(w,"type","button"),w.disabled=x=r[12].size===0,n(w,"class","px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm accent-bg accent-bg-hover text-white focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"),n(p,"class","flex gap-2 justify-end"),n(e,"class","space-y-4")},m(R,P){N(R,e,P),l(e,t),l(t,s),l(s,a),l(s,d),l(s,i),l(s,u),l(t,g),l(t,f),l(f,v),l(e,k),l(e,y);for(let A=0;A<B.length;A+=1)B[A]&&B[A].m(y,null);l(e,c),l(e,p),l(p,h),l(p,_),l(p,w),l(w,L),E||(S=[X(f,"click",r[40]),X(h,"click",r[33]),X(w,"click",r[32])],E=!0)},p(R,P){if(P[0]&4096&&b!==(b=R[12].size+"")&&he(d,b),P[0]&16&&o!==(o=R[4].length+"")&&he(u,o),P[0]&4112&&m!==(m=R[12].size===R[4].length?"取消全选":"全选")&&he(v,m),P[0]&16781312|P[1]&1408){D=ze(Object.entries(R[24]));let A;for(A=0;A<D.length;A+=1){const j=ai(R,D,A);B[A]?B[A].p(j,P):(B[A]=Li(j),B[A].c(),B[A].m(y,null))}for(;A<B.length;A+=1)B[A].d(1);B.length=D.length}P[0]&4096&&x!==(x=R[12].size===0)&&(w.disabled=x)},d(R){R&&W(e),Mt(B,R),E=!1,Qe(S)}}}function wl(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y=r[6]&&pi(r),F=ze(Object.entries(r[23])),T=[];for(let se=0;se<F.length;se+=1)T[se]=Ci(di(r,F,se));let Q=r[20]&&r[21]&&xi(r);function G(se){r[69](se)}let ne={title:"删除连接",message:r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？",type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[49],onCancel:r[50]};r[7]!==void 0&&(ne.isOpen=r[7]),x=new hr({props:ne}),_t.push(()=>kt(x,"isOpen",G));function ie(se){r[70](se)}let ce={title:"导入连接",message:"确定要导入连接配置吗？导入后会合并到现有连接中。",type:"warning",confirmText:"导入",cancelText:"取消",onConfirm:r[43],onCancel:r[46]};r[9]!==void 0&&(ce.isOpen=r[9]),D=new hr({props:ce}),_t.push(()=>kt(D,"isOpen",ie));function ue(se){r[73](se)}let be={onClose:r[33],title:r[11]==="plain"?"导出连接（明文）":r[11]==="passphrase"?"导出连接（跨设备加密）":"导出连接（加密）",size:"md",$$slots:{default:[yl]},$$scope:{ctx:r}};r[10]!==void 0&&(be.isOpen=r[10]),P=new wr({props:be}),_t.push(()=>kt(P,"isOpen",ue));function _e(se){r[74](se)}let ke={title:"导出加密",message:"请输入导出密码（用于跨设备解密）",placeholder:"导出密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"下一步",cancelText:"取消",onConfirm:r[34],onCancel:r[35]};r[13]!==void 0&&(ke.isOpen=r[13]),K=new br({props:ke}),_t.push(()=>kt(K,"isOpen",_e));function Ne(se){r[75](se)}let De={title:"确认导出密码",message:"请再次输入导出密码",placeholder:"确认导出密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"导出",cancelText:"取消",onConfirm:r[36],onCancel:r[37]};r[14]!==void 0&&(De.isOpen=r[14]),U=new br({props:De}),_t.push(()=>kt(U,"isOpen",Ne));function xe(se){r[76](se)}let Ce={title:"导入解密",message:"该文件需要导入密码，请输入",placeholder:"导入密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"导入",cancelText:"取消",onConfirm:r[44],onCancel:r[45]};return r[15]!==void 0&&(Ce.isOpen=r[15]),H=new br({props:Ce}),_t.push(()=>kt(H,"isOpen",xe)),{c(){e=C("div"),t=C("div"),s=C("div"),a=C("h2"),a.textContent="服务器资产",b=O(),d=C("div"),i=C("button"),i.innerHTML='<svg class="w-4 h-4 accent-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',o=O(),u=C("div"),g=C("button"),g.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>',f=O(),Y&&Y.c(),m=O(),v=C("div"),k=de("svg"),y=de("path"),c=O(),p=C("input"),h=O(),_=C("div");for(let se=0;se<T.length;se+=1)T[se].c();w=O(),Q&&Q.c(),L=O(),nt(x.$$.fragment),S=O(),nt(D.$$.fragment),R=O(),nt(P.$$.fragment),j=O(),nt(K.$$.fragment),$=O(),nt(U.$$.fragment),I=O(),nt(H.$$.fragment),n(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),n(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),n(i,"title","添加连接"),n(g,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),n(g,"title","导出/导入"),n(u,"class","relative"),n(d,"class","flex gap-1"),n(s,"class","flex items-center justify-between mb-3"),n(y,"stroke-linecap","round"),n(y,"stroke-linejoin","round"),n(y,"stroke-width","2"),n(y,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),n(k,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),n(k,"fill","none"),n(k,"stroke","currentColor"),n(k,"viewBox","0 0 24 24"),n(p,"type","text"),n(p,"placeholder","搜索服务器..."),n(p,"class","w-full pl-9 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus-visible:ring-2 focus:border-transparent transition-all"),n(v,"class","relative"),n(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),n(_,"class","flex-1 overflow-y-auto scrollbar-thin"),n(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(se,ge){N(se,e,ge),l(e,t),l(t,s),l(s,a),l(s,b),l(s,d),l(d,i),l(d,o),l(d,u),l(u,g),l(u,f),Y&&Y.m(u,null),l(t,m),l(t,v),l(v,k),l(k,y),l(v,c),l(v,p),Re(p,r[3]),l(e,h),l(e,_);for(let fe=0;fe<T.length;fe+=1)T[fe]&&T[fe].m(_,null);N(se,w,ge),Q&&Q.m(se,ge),N(se,L,ge),it(x,se,ge),N(se,S,ge),it(D,se,ge),N(se,R,ge),it(P,se,ge),N(se,j,ge),it(K,se,ge),N(se,$,ge),it(U,se,ge),N(se,I,ge),it(H,se,ge),ee=!0,q||(Z=[X(i,"click",function(){tr(r[1])&&r[1].apply(this,arguments)}),X(g,"click",r[54]),X(p,"input",r[58]),X(e,"click",r[25])],q=!0)},p(se,ge){if(r=se,r[6]?Y?Y.p(r,ge):(Y=pi(r),Y.c(),Y.m(u,null)):Y&&(Y.d(1),Y=null),ge[0]&8&&p.value!==r[3]&&Re(p,r[3]),ge[0]&1955528741|ge[1]&196608){F=ze(Object.entries(r[23]));let re;for(re=0;re<F.length;re+=1){const me=di(r,F,re);T[re]?T[re].p(me,ge):(T[re]=Ci(me),T[re].c(),T[re].m(_,null))}for(;re<T.length;re+=1)T[re].d(1);T.length=F.length}r[20]&&r[21]?Q?Q.p(r,ge):(Q=xi(r),Q.c(),Q.m(L.parentNode,L)):Q&&(Q.d(1),Q=null);const fe={};ge[0]&256&&(fe.message=r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？"),!E&&ge[0]&128&&(E=!0,fe.isOpen=r[7],wt(()=>E=!1)),x.$set(fe);const Ee={};!B&&ge[0]&512&&(B=!0,Ee.isOpen=r[9],wt(()=>B=!1)),D.$set(Ee);const Ge={};ge[0]&2048&&(Ge.title=r[11]==="plain"?"导出连接（明文）":r[11]==="passphrase"?"导出连接（跨设备加密）":"导出连接（加密）"),ge[0]&16781328|ge[3]&32&&(Ge.$$scope={dirty:ge,ctx:r}),!A&&ge[0]&1024&&(A=!0,Ge.isOpen=r[10],wt(()=>A=!1)),P.$set(Ge);const at={};!V&&ge[0]&8192&&(V=!0,at.isOpen=r[13],wt(()=>V=!1)),K.$set(at);const Fe={};!M&&ge[0]&16384&&(M=!0,Fe.isOpen=r[14],wt(()=>M=!1)),U.$set(Fe);const $e={};!z&&ge[0]&32768&&(z=!0,$e.isOpen=r[15],wt(()=>z=!1)),H.$set($e)},i(se){ee||(Ue(x.$$.fragment,se),Ue(D.$$.fragment,se),Ue(P.$$.fragment,se),Ue(K.$$.fragment,se),Ue(U.$$.fragment,se),Ue(H.$$.fragment,se),ee=!0)},o(se){qe(x.$$.fragment,se),qe(D.$$.fragment,se),qe(P.$$.fragment,se),qe(K.$$.fragment,se),qe(U.$$.fragment,se),qe(H.$$.fragment,se),ee=!1},d(se){se&&(W(e),W(w),W(L),W(S),W(R),W(j),W($),W(I)),Y&&Y.d(),Mt(T,se),Q&&Q.d(se),st(x,se),st(D,se),st(P,se),st(K,se),st(U,se),st(H,se),q=!1,Qe(Z)}}}function Di(r,e){var s;const t=(s=window.wailsBindings)==null?void 0:s.ShowMessageDialog;if(typeof t=="function"){t(r,e);return}alert(e)}function kr(r,e){var s;const t=(s=window.wailsBindings)==null?void 0:s.ShowErrorDialog;if(typeof t=="function"){t(r,e);return}alert(e)}function kl(r,e){window.dispatchEvent(new CustomEvent("database:connect",{detail:{asset:r,openPanel:e}}))}function Sl(r,e,t){window.dispatchEvent(new CustomEvent("database:table-select",{detail:{sessionId:r.dbSessionId,databaseName:e,tableName:t}}))}function Mi(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 accent-text flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 accent-text flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function Cl(r,e,t){let s,a,b,d;Pt(r,Yt,te=>t(4,b=te)),Pt(r,jo,te=>t(24,d=te));let{onConnect:i}=e,{onAddClick:o}=e,{onDelete:u}=e,{onEdit:g}=e,f="",m=new Set(["生产环境","开发环境"]),v=!1,k=!1,y=null,c=!1,p="",h=!1,_="machine",w=new Set,L=!1,x=!1,E="",S=!1,D=new Set,B={},R={},P={},A=null,j=!1,K=null,V={x:0,y:0};function $(te){t(6,v=!1),t(20,j=!1),te.stopPropagation()}function U(te,ae){te.type==="database"&&(ae.preventDefault(),ae.stopPropagation(),t(21,K=te),t(22,V={x:ae.clientX,y:ae.clientY}),t(20,j=!0))}async function M(){if(!K||!K.dbSessionId){t(20,j=!1);return}if(!window.wailsBindings||typeof window.wailsBindings.CloseDatabase!="function"){kr("断开失败","断开数据库功能不可用"),t(20,j=!1);return}try{await window.wailsBindings.CloseDatabase(K.dbSessionId),Yt.update(te=>te.map(ae=>ae.id===K.id?{...ae,dbConnected:!1,dbSessionId:null}:ae)),D.delete(K.id),t(16,D=new Set(D)),delete R[K.id],Object.keys(P).forEach(te=>{te.startsWith(`${K.id}:`)&&delete P[te]}),t(17,B={...B,[K.id]:new Set})}catch(te){kr("断开失败",te.message||"断开数据库失败")}finally{t(20,j=!1)}}function I(te){if(!te.dbConnected){t(52,A=te.id),kl(te,!1);return}D.has(te.id)?D.delete(te.id):(D.add(te.id),H(te,!1)),t(16,D=new Set(D))}async function H(te,ae){var je,He,Ve;if(!(!window.wailsBindings||!te.dbSessionId)&&!(!ae&&((je=R[te.id])!=null&&je.items))){t(18,R={...R,[te.id]:{items:((He=R[te.id])==null?void 0:He.items)||[],loading:!0,error:""}});try{const{ListDatabases:et}=window.wailsBindings;if(typeof et!="function")throw new Error("数据库列表接口不可用");const Te=await et(te.dbSessionId);t(18,R={...R,[te.id]:{items:(Te||[]).slice().sort(),loading:!1,error:""}})}catch(et){t(18,R={...R,[te.id]:{items:((Ve=R[te.id])==null?void 0:Ve.items)||[],loading:!1,error:et.message||"加载失败"}})}}}function z(te,ae){B[te.id]||t(17,B={...B,[te.id]:new Set});const je=B[te.id];je.has(ae)?je.delete(ae):(je.add(ae),ee(te,ae)),t(17,B={...B,[te.id]:new Set(je)})}async function ee(te,ae,je){var Ve,et,Te;if(!window.wailsBindings||!te.dbSessionId)return;const He=`${te.id}:${ae}`;if(!((Ve=P[He])!=null&&Ve.items)){t(19,P={...P,[He]:{items:((et=P[He])==null?void 0:et.items)||[],loading:!0,error:""}});try{const{ListDatabaseTablesInDatabase:Ke}=window.wailsBindings;if(typeof Ke!="function")throw new Error("表列表接口不可用");const Ft=await Ke(te.dbSessionId,ae);t(19,P={...P,[He]:{items:(Ft||[]).slice().sort(),loading:!1,error:""}})}catch(Ke){t(19,P={...P,[He]:{items:((Te=P[He])==null?void 0:Te.items)||[],loading:!1,error:Ke.message||"加载失败"}})}}}function q(te,ae){if(ae.stopPropagation(),t(6,v=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}t(11,_=te),t(12,w=new Set(b.map(je=>je.id))),t(10,h=!0)}async function Z(te,ae=""){const{ExportConnectionsByIDs:je,ExportConnectionsByIDsWithPassphrase:He,SaveBinaryFile:Ve}=window.wailsBindings;if(te==="passphrase"){if(typeof He!="function")throw new Error("导出功能不可用，请升级应用");return He(Array.from(w),ae).then(Ke=>Ve("ssh-connections.json",btoa(unescape(encodeURIComponent(Ke)))))}if(typeof je!="function")throw new Error("导出功能不可用，请升级应用");const et=await je(Array.from(w),te),Te=btoa(unescape(encodeURIComponent(et)));return Ve("ssh-connections.json",Te)}function Y(){if(!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}if(w.size===0){alert("请至少选择一个连接");return}if(_==="passphrase"){t(13,L=!0);return}Z(_==="machine").then(()=>{t(10,h=!1)}).catch(ae=>{console.error("导出失败:",ae),alert("导出失败: "+ae.message)})}function F(){t(10,h=!1)}function T(te){E=te,t(13,L=!1),t(14,x=!0)}function Q(){E="",t(13,L=!1)}function G(te){if(t(14,x=!1),te!==E){alert("两次输入的密码不一致"),E="",t(13,L=!0);return}Z("passphrase",E).then(()=>{t(10,h=!1),E=""}).catch(ae=>{console.error("导出失败:",ae),alert("导出失败: "+ae.message)})}function ne(){E="",t(14,x=!1)}function ie(te){const ae=new Set(w);ae.has(te)?ae.delete(te):ae.add(te),t(12,w=ae)}function ce(te){const ae=new Set(w);te.every(He=>ae.has(He.id))?te.forEach(He=>ae.delete(He.id)):te.forEach(He=>ae.add(He.id)),t(12,w=ae)}function ue(){if(w.size===b.length){t(12,w=new Set);return}t(12,w=new Set(b.map(te=>te.id)))}function be(te){return te.length>0&&te.every(ae=>w.has(ae.id))}async function _e(te){if(te.stopPropagation(),t(6,v=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}try{const ae=await window.wailsBindings.SelectImportFile();if(!ae)return;p=ae,t(9,c=!0)}catch(ae){console.error("导入失败:",ae),alert("导入失败: "+ae.message)}}async function ke(){if(!p){t(9,c=!1);return}let te=!1;try{const{ImportConnectionsFromFileWithPassphrase:ae,ImportConnectionsFromFile:je}=window.wailsBindings;let He=0;if(typeof ae=="function")try{He=await ae(p,"")}catch(Ve){const et=(Ve==null?void 0:Ve.message)||String(Ve);if(et.includes("passphrase required")||et.includes("invalid passphrase")){t(9,c=!1),t(15,S=!0),te=!0;return}throw Ve}else if(typeof je=="function")He=await je(p);else throw new Error("导入功能不可用");Di("导入完成",`成功导入 ${He} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed"))}catch(ae){console.error("导入失败:",ae),kr("导入失败",(ae==null?void 0:ae.message)||ae)}finally{t(9,c=!1),te||(p="")}}async function Ne(te){if(!p){t(15,S=!1);return}try{const{ImportConnectionsFromFileWithPassphrase:ae}=window.wailsBindings;if(typeof ae!="function")throw new Error("导入功能不可用");const je=await ae(p,te);Di("导入完成",`成功导入 ${je} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed")),t(15,S=!1),p=""}catch(ae){const je=(ae==null?void 0:ae.message)||String(ae);if(je.includes("invalid passphrase")){kr("导入失败","导入密码不正确，请重试"),t(15,S=!0);return}console.error("导入失败:",ae),kr("导入失败",je),t(15,S=!1),p=""}}function De(){t(15,S=!1),p=""}function xe(){t(9,c=!1),p=""}function Ce(te){const ae=new Set(m);ae.has(te)?ae.delete(te):ae.add(te),t(5,m=ae)}async function se(te,ae){if(ae.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Yt.update(je=>je.filter(He=>He.id!==te.id));return}t(8,y=te),t(7,k=!0)}async function ge(){if(y)try{await window.wailsBindings.RemoveConnection(y.id),Yt.update(te=>te.filter(ae=>ae.id!==y.id))}catch(te){console.error("Failed to delete asset:",te),alert("删除连接失败: "+((te==null?void 0:te.message)||te))}finally{t(7,k=!1),t(8,y=null)}}function fe(){t(7,k=!1),t(8,y=null)}const Ee=te=>{te.stopPropagation(),t(6,v=!v)},Ge=te=>q("machine",te),at=te=>q("passphrase",te),Fe=te=>q("plain",te);function $e(){f=this.value,t(3,f)}const re=te=>Ce(te),me=te=>I(te),ve=te=>i(te),pe=te=>g(te),we=(te,ae)=>se(te,ae),Be=te=>i(te),Me=(te,ae)=>U(te,ae),Se=te=>H(te,!0),ot=(te,ae)=>z(te,ae),rt=(te,ae,je)=>Sl(te,ae,je);function dt(te){k=te,t(7,k)}function vt(te){c=te,t(9,c)}const ut=te=>ce(te),lt=te=>ie(te.id);function Ye(te){h=te,t(10,h)}function Ct(te){L=te,t(13,L)}function ht(te){x=te,t(14,x)}function Xe(te){S=te,t(15,S)}return r.$$set=te=>{"onConnect"in te&&t(0,i=te.onConnect),"onAddClick"in te&&t(1,o=te.onAddClick),"onDelete"in te&&t(51,u=te.onDelete),"onEdit"in te&&t(2,g=te.onEdit)},r.$$.update=()=>{if(r.$$.dirty[0]&16|r.$$.dirty[1]&2097152&&A){const te=b.find(ae=>ae.id===A);te!=null&&te.dbConnected&&(I(te),t(52,A=null))}r.$$.dirty[0]&24&&t(53,s=b.filter(te=>{const ae=f.toLowerCase();return te.name.toLowerCase().includes(ae)||te.host.toLowerCase().includes(ae)||te.group.toLowerCase().includes(ae)||te.username.toLowerCase().includes(ae)})),r.$$.dirty[1]&4194304&&t(23,a=s.reduce((te,ae)=>(te[ae.group]||(te[ae.group]=[]),te[ae.group].push(ae),te),{}))},[i,o,g,f,b,m,v,k,y,c,h,_,w,L,x,S,D,B,R,P,j,K,V,a,d,$,U,M,I,H,z,q,Y,F,T,Q,G,ne,ie,ce,ue,be,_e,ke,Ne,De,xe,Ce,se,ge,fe,u,A,s,Ee,Ge,at,Fe,$e,re,me,ve,pe,we,Be,Me,Se,ot,rt,dt,vt,ut,lt,Ye,Ct,ht,Xe]}class xl extends Et{constructor(e){super(),xt(this,e,Cl,wl,St,{onConnect:0,onAddClick:1,onDelete:51,onEdit:2},null,[-1,-1,-1,-1])}}var ro={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(globalThis,()=>(()=>{var t={4567:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},g=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const f=o(9042),m=o(9924),v=o(844),k=o(4725),y=o(2585),c=o(3656);let p=i.AccessibilityManager=class extends v.Disposable{constructor(h,_,w,L){super(),this._terminal=h,this._coreBrowserService=w,this._renderService=L,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(x=>this._handleResize(x.rows))),this.register(this._terminal.onRender(x=>this._refreshRows(x.start,x.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(x=>this._handleChar(x))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(x=>this._handleTab(x))),this.register(this._terminal.onKey(x=>this._handleKey(x.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,c.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,v.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let _=0;_<h;_++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,_){this._liveRegionDebouncer.refresh(h,_,this._terminal.rows)}_renderRows(h,_){const w=this._terminal.buffer,L=w.lines.length.toString();for(let x=h;x<=_;x++){const E=w.lines.get(w.ydisp+x),S=[],D=(E==null?void 0:E.translateToString(!0,void 0,void 0,S))||"",B=(w.ydisp+x+1).toString(),R=this._rowElements[x];R&&(D.length===0?(R.innerText=" ",this._rowColumns.set(R,[0,1])):(R.textContent=D,this._rowColumns.set(R,S)),R.setAttribute("aria-posinset",B),R.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,_){const w=h.target,L=this._rowElements[_===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==L)return;let x,E;if(_===0?(x=w,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(x=this._rowElements.shift(),E=w,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleSelectionChange(){var D;if(this._rowElements.length===0)return;const h=document.getSelection();if(!h)return;if(h.isCollapsed)return void(this._rowContainer.contains(h.anchorNode)&&this._terminal.clearSelection());if(!h.anchorNode||!h.focusNode)return void console.error("anchorNode and/or focusNode are null");let _={node:h.anchorNode,offset:h.anchorOffset},w={node:h.focusNode,offset:h.focusOffset};if((_.node.compareDocumentPosition(w.node)&Node.DOCUMENT_POSITION_PRECEDING||_.node===w.node&&_.offset>w.offset)&&([_,w]=[w,_]),_.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(_={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(_.node))return;const L=this._rowElements.slice(-1)[0];if(w.node.compareDocumentPosition(L)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(w={node:L,offset:((D=L.textContent)==null?void 0:D.length)??0}),!this._rowContainer.contains(w.node))return;const x=({node:B,offset:R})=>{const P=B instanceof Text?B.parentNode:B;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(P);if(!j)return console.warn("columns is null. Race condition?"),null;let K=R<j.length?j[R]:j.slice(-1)[0]+1;return K>=this._terminal.cols&&(++A,K=0),{row:A,column:K}},E=x(_),S=x(w);if(E&&S){if(E.row>S.row||E.row===S.row&&E.column>=S.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(S.row-E.row)*this._terminal.cols-E.column+S.column)}}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=this._coreBrowserService.mainDocument.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=p=u([g(1,y.IInstantiationService),g(2,k.ICoreBrowserService),g(3,k.IRenderService)],p)},3614:(d,i)=>{function o(m){return m.replace(/\r?\n/g,"\r")}function u(m,v){return v?"\x1B[200~"+m+"\x1B[201~":m}function g(m,v,k,y){m=u(m=o(m),k.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(m,!0),v.value=""}function f(m,v,k){const y=k.getBoundingClientRect(),c=m.clientX-y.left-10,p=m.clientY-y.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${c}px`,v.style.top=`${p}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=u,i.copyHandler=function(m,v){m.clipboardData&&m.clipboardData.setData("text/plain",v.selectionText),m.preventDefault()},i.handlePasteEvent=function(m,v,k,y){m.stopPropagation(),m.clipboardData&&g(m.clipboardData.getData("text/plain"),v,k,y)},i.paste=g,i.moveTextAreaUnderMouseCursor=f,i.rightClickHandler=function(m,v,k,y,c){f(m,v,k),c&&y.rightClickSelect(m),v.value=y.selectionText,v.select()}},7239:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=o(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(g,f,m){this._css.set(g,f,m)}getCss(g,f){return this._css.get(g,f)}setColor(g,f,m){this._color.set(g,f,m)}getColor(g,f){return this._color.get(g,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,u,g,f){o.addEventListener(u,g,f);let m=!1;return{dispose:()=>{m||(m=!0,o.removeEventListener(u,g,f))}}}},3551:function(d,i,o){var u=this&&this.__decorate||function(p,h,_,w){var L,x=arguments.length,E=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,h,_,w);else for(var S=p.length-1;S>=0;S--)(L=p[S])&&(E=(x<3?L(E):x>3?L(h,_,E):L(h,_))||E);return x>3&&E&&Object.defineProperty(h,_,E),E},g=this&&this.__param||function(p,h){return function(_,w){h(_,w,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const f=o(3656),m=o(8460),v=o(844),k=o(2585),y=o(4725);let c=i.Linkifier=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(p,h,_,w,L){super(),this._element=p,this._mouseService=h,this._renderService=_,this._bufferService=w,this._linkProviderService=L,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{var x;this._lastMouseEvent=void 0,(x=this._activeProviderReplies)==null||x.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const h=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;const _=p.composedPath();for(let w=0;w<_.length;w++){const L=_[w];if(L.classList.contains("xterm"))break;if(L.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,h){var w,L;this._activeProviderReplies&&h||((w=this._activeProviderReplies)==null||w.forEach(x=>{x==null||x.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=p.y);let _=!1;for(const[x,E]of this._linkProviderService.linkProviders.entries())h?(L=this._activeProviderReplies)!=null&&L.get(x)&&(_=this._checkLinkProviderResult(x,p,_)):E.provideLinks(p.y,S=>{var B,R;if(this._isMouseOut)return;const D=S==null?void 0:S.map(P=>({link:P}));(B=this._activeProviderReplies)==null||B.set(x,D),_=this._checkLinkProviderResult(x,p,_),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)})}_removeIntersectingLinks(p,h){const _=new Set;for(let w=0;w<h.size;w++){const L=h.get(w);if(L)for(let x=0;x<L.length;x++){const E=L[x],S=E.link.range.start.y<p?0:E.link.range.start.x,D=E.link.range.end.y>p?this._bufferService.cols:E.link.range.end.x;for(let B=S;B<=D;B++){if(_.has(B)){L.splice(x--,1);break}_.add(B)}}}}_checkLinkProviderResult(p,h,_){var x;if(!this._activeProviderReplies)return _;const w=this._activeProviderReplies.get(p);let L=!1;for(let E=0;E<p;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(L=!0);if(!L&&w){const E=w.find(S=>this._linkAtPosition(S.link,h));E&&(_=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!_)for(let E=0;E<this._activeProviderReplies.size;E++){const S=(x=this._activeProviderReplies.get(E))==null?void 0:x.find(D=>this._linkAtPosition(D.link,h));if(S){_=!0,this._handleNewLink(S);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const h=this._positionFromMouseEvent(p,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,h){this._currentLink&&this._lastMouseEvent&&(!p||!h||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(p.link,h)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var _,w;return(w=(_=this._currentLink)==null?void 0:_.state)==null?void 0:w.decorations.pointerCursor},set:_=>{var w;(w=this._currentLink)!=null&&w.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",_))}},underline:{get:()=>{var _,w;return(w=(_=this._currentLink)==null?void 0:_.state)==null?void 0:w.decorations.underline},set:_=>{var w,L,x;(w=this._currentLink)!=null&&w.state&&((x=(L=this._currentLink)==null?void 0:L.state)==null?void 0:x.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,_))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;const w=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=w&&this._currentLink.link.range.end.y<=L&&(this._clearCurrentLink(w,L),this._lastMouseEvent)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}})))}_linkHover(p,h,_){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(_,h.text)}_fireUnderlineEvent(p,h){const _=p.range,w=this._bufferService.buffer.ydisp,L=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-w-1,_.end.x,_.end.y-w-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(L)}_linkLeave(p,h,_){var w;(w=this._currentLink)!=null&&w.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(_,h.text)}_linkAtPosition(p,h){const _=p.range.start.y*this._bufferService.cols+p.range.start.x,w=p.range.end.y*this._bufferService.cols+p.range.end.x,L=h.y*this._bufferService.cols+h.x;return _<=L&&L<=w}_positionFromMouseEvent(p,h,_){const w=_.getCoords(p,h,this._bufferService.cols,this._bufferService.rows);if(w)return{x:w[0],y:w[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,h,_,w,L){return{x1:p,y1:h,x2:_,y2:w,cols:this._bufferService.cols,fg:L}}};i.Linkifier=c=u([g(1,y.IMouseService),g(2,y.IRenderService),g(3,k.IBufferService),g(4,y.ILinkProviderService)],c)},9042:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(d,i,o){var u=this&&this.__decorate||function(y,c,p,h){var _,w=arguments.length,L=w<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,c,p,h);else for(var x=y.length-1;x>=0;x--)(_=y[x])&&(L=(w<3?_(L):w>3?_(c,p,L):_(c,p))||L);return w>3&&L&&Object.defineProperty(c,p,L),L},g=this&&this.__param||function(y,c){return function(p,h){c(p,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const f=o(511),m=o(2585);let v=i.OscLinkProvider=class{constructor(y,c,p){this._bufferService=y,this._optionsService=c,this._oscLinkService=p}provideLinks(y,c){var D;const p=this._bufferService.buffer.lines.get(y-1);if(!p)return void c(void 0);const h=[],_=this._optionsService.rawOptions.linkHandler,w=new f.CellData,L=p.getTrimmedLength();let x=-1,E=-1,S=!1;for(let B=0;B<L;B++)if(E!==-1||p.hasContent(B)){if(p.loadCell(B,w),w.hasExtendedAttrs()&&w.extended.urlId){if(E===-1){E=B,x=w.extended.urlId;continue}S=w.extended.urlId!==x}else E!==-1&&(S=!0);if(S||E!==-1&&B===L-1){const R=(D=this._oscLinkService.getLinkData(x))==null?void 0:D.uri;if(R){const P={start:{x:E+1,y},end:{x:B+(S||B!==L-1?0:1),y}};let A=!1;if(!(_!=null&&_.allowNonHttpProtocols))try{const j=new URL(R);["http:","https:"].includes(j.protocol)||(A=!0)}catch{A=!0}A||h.push({text:R,range:P,activate:(j,K)=>_?_.activate(j,K,P):k(0,K),hover:(j,K)=>{var V;return(V=_==null?void 0:_.hover)==null?void 0:V.call(_,j,K,P)},leave:(j,K)=>{var V;return(V=_==null?void 0:_.leave)==null?void 0:V.call(_,j,K,P)}})}S=!1,w.hasExtendedAttrs()&&w.extended.urlId?(E=B,x=w.extended.urlId):(E=-1,x=-1)}}c(h)}};function k(y,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=v=u([g(0,m.IBufferService),g(1,m.IOptionsService),g(2,m.IOscLinkService)],v)},6193:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,u){this._renderCallback=o,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,u,g){this._rowCount=g,o=o!==void 0?o:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=o(3614),g=o(3656),f=o(3551),m=o(9042),v=o(3730),k=o(1680),y=o(3107),c=o(5744),p=o(2950),h=o(1296),_=o(428),w=o(4269),L=o(5114),x=o(8934),E=o(3230),S=o(9312),D=o(4725),B=o(6731),R=o(8055),P=o(8969),A=o(8460),j=o(844),K=o(6114),V=o(8437),$=o(2584),U=o(7399),M=o(5941),I=o(9074),H=o(2585),z=o(5435),ee=o(4567),q=o(779);class Z extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=K,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(q.LinkProviderService),this._instantiationService.setService(D.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((T,Q)=>this.refresh(T,Q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(T=>this._reportWindowsOptions(T))),this.register(this._inputHandler.onColor(T=>this._handleColorEvent(T))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(T=>this._afterResize(T.cols,T.rows))),this.register((0,j.toDisposable)(()=>{var T,Q;this._customKeyEventHandler=void 0,(Q=(T=this.element)==null?void 0:T.parentNode)==null||Q.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(const T of F){let Q,G="";switch(T.index){case 256:Q="foreground",G="10";break;case 257:Q="background",G="11";break;case 258:Q="cursor",G="12";break;default:Q="ansi",G="4;"+T.index}switch(T.type){case 0:const ne=R.color.toColorRGB(Q==="ansi"?this._themeService.colors.ansi[T.index]:this._themeService.colors[Q]);this.coreService.triggerDataEvent(`${$.C0.ESC}]${G};${(0,M.toRgbString)(ne)}${$.C1_ESCAPED.ST}`);break;case 1:if(Q==="ansi")this._themeService.modifyColors(ie=>ie.ansi[T.index]=R.channels.toColor(...T.color));else{const ie=Q;this._themeService.modifyColors(ce=>ce[ie]=R.channels.toColor(...T.color))}break;case 2:this._themeService.restoreColor(T.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent($.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)==null?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent($.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const F=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(F);if(!T)return;const Q=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.css.cell.height,ne=T.getWidth(Q),ie=this._renderService.dimensions.css.cell.width*ne,ce=this.buffer.y*this._renderService.dimensions.css.cell.height,ue=Q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ue+"px",this.textarea.style.top=ce+"px",this.textarea.style.width=ie+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,g.addDisposableDomListener)(this.element,"copy",T=>{this.hasSelection()&&(0,u.copyHandler)(T,this._selectionService)}));const F=T=>(0,u.handlePasteEvent)(T,this.textarea,this.coreService,this.optionsService);this.register((0,g.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,g.addDisposableDomListener)(this.element,"paste",F)),K.isFirefox?this.register((0,g.addDisposableDomListener)(this.element,"mousedown",T=>{T.button===2&&(0,u.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,g.addDisposableDomListener)(this.element,"contextmenu",T=>{(0,u.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),K.isLinux&&this.register((0,g.addDisposableDomListener)(this.element,"auxclick",T=>{T.button===1&&(0,u.moveTextAreaUnderMouseCursor)(T,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,g.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,g.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var Q;if(!F)throw new Error("Terminal requires a parent element.");if(F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((Q=this.element)==null?void 0:Q.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=F.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);const T=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,g.addDisposableDomListener)(this.screenElement,"mousemove",G=>this.updateCursorStyle(G))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),K.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(L.CoreBrowserService,this.textarea,F.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(D.ICoreBrowserService,this._coreBrowserService),this.register((0,g.addDisposableDomListener)(this.textarea,"focus",G=>this._handleTextAreaFocus(G))),this.register((0,g.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(D.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(D.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(w.CharacterJoinerService),this._instantiationService.setService(D.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(D.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(G=>this._onRender.fire(G))),this.onResize(G=>this._renderService.resize(G.cols,G.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(D.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(f.Linkifier,this.screenElement)),this.element.appendChild(T);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(G=>this.scrollLines(G.amount,G.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(D.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(G=>this.scrollLines(G.amount,G.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(G=>this._renderService.handleSelectionChanged(G.start,G.end,G.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(G=>{this.textarea.value=G,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(G=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,g.addDisposableDomListener)(this.element,"mousedown",G=>this._selectionService.handleMouseDown(G))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",G=>this._handleScreenReaderModeOptionChange(G))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",G=>{!this._overviewRulerRenderer&&G&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const F=this,T=this.element;function Q(ie){const ce=F._mouseService.getMouseReportCoords(ie,F.screenElement);if(!ce)return!1;let ue,be;switch(ie.overrideType||ie.type){case"mousemove":be=32,ie.buttons===void 0?(ue=3,ie.button!==void 0&&(ue=ie.button<3?ie.button:3)):ue=1&ie.buttons?0:4&ie.buttons?1:2&ie.buttons?2:3;break;case"mouseup":be=0,ue=ie.button<3?ie.button:3;break;case"mousedown":be=1,ue=ie.button<3?ie.button:3;break;case"wheel":if(F._customWheelEventHandler&&F._customWheelEventHandler(ie)===!1||F.viewport.getLinesScrolled(ie)===0)return!1;be=ie.deltaY<0?0:1,ue=4;break;default:return!1}return!(be===void 0||ue===void 0||ue>4)&&F.coreMouseService.triggerMouseEvent({col:ce.col,row:ce.row,x:ce.x,y:ce.y,button:ue,action:be,ctrl:ie.ctrlKey,alt:ie.altKey,shift:ie.shiftKey})}const G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:ie=>(Q(ie),ie.buttons||(this._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.removeEventListener("mousemove",G.mousedrag)),this.cancel(ie)),wheel:ie=>(Q(ie),this.cancel(ie,!0)),mousedrag:ie=>{ie.buttons&&Q(ie)},mousemove:ie=>{ie.buttons||Q(ie)}};this.register(this.coreMouseService.onProtocolChange(ie=>{ie?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ie)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ie?G.mousemove||(T.addEventListener("mousemove",ne.mousemove),G.mousemove=ne.mousemove):(T.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&ie?G.wheel||(T.addEventListener("wheel",ne.wheel,{passive:!1}),G.wheel=ne.wheel):(T.removeEventListener("wheel",G.wheel),G.wheel=null),2&ie?G.mouseup||(G.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&ie?G.mousedrag||(G.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,g.addDisposableDomListener)(T,"mousedown",ie=>{if(ie.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ie))return Q(ie),G.mouseup&&this._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.addEventListener("mousemove",G.mousedrag),this.cancel(ie)})),this.register((0,g.addDisposableDomListener)(T,"wheel",ie=>{if(!G.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ie)===!1)return!1;if(!this.buffer.hasScrollback){const ce=this.viewport.getLinesScrolled(ie);if(ce===0)return;const ue=$.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ie.deltaY<0?"A":"B");let be="";for(let _e=0;_e<Math.abs(ce);_e++)be+=ue;return this.coreService.triggerDataEvent(be,!0),this.cancel(ie,!0)}return this.viewport.handleWheel(ie)?this.cancel(ie):void 0}},{passive:!1})),this.register((0,g.addDisposableDomListener)(T,"touchstart",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ie),this.cancel(ie)},{passive:!0})),this.register((0,g.addDisposableDomListener)(T,"touchmove",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ie)?void 0:this.cancel(ie)},{passive:!1}))}refresh(F,T){var Q;(Q=this._renderService)==null||Q.refreshRows(F,T)}updateCursorStyle(F){var T;(T=this._selectionService)!=null&&T.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,T,Q=0){var G;Q===1?(super.scrollLines(F,T,Q),this.refresh(0,this.rows-1)):(G=this.viewport)==null||G.scrollLines(F)}paste(F){(0,u.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}attachCustomWheelEventHandler(F){this._customWheelEventHandler=F}registerLinkProvider(F){return this._linkProviderService.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const T=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),T}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,T,Q){this._selectionService.setSelection(F,T,Q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)==null||F.clearSelection()}selectAll(){var F;(F=this._selectionService)==null||F.selectAll()}selectLines(F,T){var Q;(Q=this._selectionService)==null||Q.selectLines(F,T)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;const T=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!T&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;T||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Q=(0,U.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),Q.type===3||Q.type===2){const G=this.rows-1;return this.scrollLines(Q.type===2?-G:G),this.cancel(F,!0)}return Q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(Q.cancel&&this.cancel(F,!0),!Q.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Q.key!==$.C0.ETX&&Q.key!==$.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Q.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(Q.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,T){const Q=F.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||F.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey||F.isWindows&&T.getModifierState("AltGraph");return T.type==="keypress"?Q:Q&&(!T.keyCode||T.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let T;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)T=F.charCode;else if(F.which===null||F.which===void 0)T=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;T=F.which}return!(!T||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(T,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const T=F.data;return this.coreService.triggerDataEvent(T,!0),this.cancel(F),!0}return!1}resize(F,T){F!==this.cols||T!==this.rows?super.resize(F,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,T){var Q,G;(Q=this._charSizeService)==null||Q.measure(),(G=this.viewport)==null||G.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let T=1;T<this.rows;T++)this.buffer.lines.push(this.buffer.getBlankLine(V.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)==null||F.reset(),this.refresh(0,this.rows-1)}}reset(){var T,Q;this.options.rows=this.rows,this.options.cols=this.cols;const F=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)==null||T.reset(),this._decorationService.reset(),(Q=this.viewport)==null||Q.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)==null||F.clearTextureAtlas()}_reportFocus(){var F;(F=this.element)!=null&&F.classList.contains("focus")?this.coreService.triggerDataEvent($.C0.ESC+"[I"):this.coreService.triggerDataEvent($.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const T=this._renderService.dimensions.css.canvas.width.toFixed(0),Q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${$.C0.ESC}[4;${Q};${T}t`);break;case z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const G=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${$.C0.ESC}[6;${ne};${G}t`)}}cancel(F,T){if(this.options.cancelEvents||T)return F.preventDefault(),F.stopPropagation(),!1}}i.Terminal=Z},9924:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,u=1e3){this._renderCallback=o,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,u,g){this._rowCount=g,o=o!==void 0?o:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=f-this._lastRefreshMs,v=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,u)}}},1680:function(d,i,o){var u=this&&this.__decorate||function(p,h,_,w){var L,x=arguments.length,E=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,h,_,w);else for(var S=p.length-1;S>=0;S--)(L=p[S])&&(E=(x<3?L(E):x>3?L(h,_,E):L(h,_))||E);return x>3&&E&&Object.defineProperty(h,_,E),E},g=this&&this.__param||function(p,h){return function(_,w){h(_,w,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const f=o(3656),m=o(4725),v=o(8460),k=o(844),y=o(2585);let c=i.Viewport=class extends k.Disposable{constructor(p,h,_,w,L,x,E,S){super(),this._viewportElement=p,this._scrollArea=h,this._bufferService=_,this._optionsService=w,this._charSizeService=L,this._renderService=x,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(D=>this._renderDimensions=D)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(D=>this._handleThemeChange(D))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,h){const _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(h<0&&this._viewportElement.scrollTop!==0||h>0&&_<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const h=this._getPixelsScrolled(p);return h!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(p,h))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const h=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let h=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getBufferElements(p,h){var S;let _,w="";const L=[],x=h??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let D=p;D<x;D++){const B=E.get(D);if(!B)continue;const R=(S=E.get(D+1))==null?void 0:S.isWrapped;if(w+=B.translateToString(!R),!R||D===E.length-1){const P=document.createElement("div");P.textContent=w,L.push(P),w.length>0&&(_=P),w=""}}return{bufferElements:L,cursorElement:_}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let h=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(p,h){const _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&h.altKey||_==="ctrl"&&h.ctrlKey||_==="shift"&&h.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const h=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,h!==0&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(p,h))}};i.Viewport=c=u([g(2,y.IBufferService),g(3,y.IOptionsService),g(4,m.ICharSizeService),g(5,m.IRenderService),g(6,m.ICoreBrowserService),g(7,m.IThemeService)],c)},3107:function(d,i,o){var u=this&&this.__decorate||function(y,c,p,h){var _,w=arguments.length,L=w<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,c,p,h);else for(var x=y.length-1;x>=0;x--)(_=y[x])&&(L=(w<3?_(L):w>3?_(c,p,L):_(c,p))||L);return w>3&&L&&Object.defineProperty(c,p,L),L},g=this&&this.__param||function(y,c){return function(p,h){c(p,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const f=o(4725),m=o(844),v=o(2585);let k=i.BufferDecorationRenderer=class extends m.Disposable{constructor(y,c,p,h,_){super(),this._screenElement=y,this._bufferService=c,this._coreBrowserService=p,this._decorationService=h,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(w=>this._removeDecoration(w))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const y of this._decorationService.decorations)this._renderDecoration(y);this._dimensionsChanged=!1}_renderDecoration(y){this._refreshStyle(y),this._dimensionsChanged&&this._refreshXPosition(y)}_createElement(y){var h;const c=this._coreBrowserService.mainDocument.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((h=y==null?void 0:y.options)==null?void 0:h.layer)==="top"),c.style.width=`${Math.round((y.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(y.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(y.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=y.options.x??0;return p&&p>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(y,c),c}_refreshStyle(y){const c=y.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)y.element&&(y.element.style.display="none",y.onRenderEmitter.fire(y.element));else{let p=this._decorationElements.get(y);p||(p=this._createElement(y),y.element=p,this._decorationElements.set(y,p),this._container.appendChild(p),y.onDispose(()=>{this._decorationElements.delete(y),p.remove()})),p.style.top=c*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",y.onRenderEmitter.fire(p)}}_refreshXPosition(y,c=y.element){if(!c)return;const p=y.options.x??0;(y.options.anchor||"left")==="right"?c.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(y){var c;(c=this._decorationElements.get(y))==null||c.remove(),this._decorationElements.delete(y),y.dispose()}};i.BufferDecorationRenderer=k=u([g(1,v.IBufferService),g(2,f.ICoreBrowserService),g(3,v.IDecorationService),g(4,f.IRenderService)],k)},5871:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const u of this._zones)if(u.color===o.options.overviewRulerOptions.color&&u.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,o.marker.line))return;if(this._lineAdjacentToZone(u,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(u,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,u){return u>=o.startBufferLine&&u<=o.endBufferLine}_lineAdjacentToZone(o,u,g){return u>=o.startBufferLine-this._linePadding[g||"full"]&&u<=o.endBufferLine+this._linePadding[g||"full"]}_addLineToZone(o,u){o.startBufferLine=Math.min(o.startBufferLine,u),o.endBufferLine=Math.max(o.endBufferLine,u)}}},5744:function(d,i,o){var u=this&&this.__decorate||function(_,w,L,x){var E,S=arguments.length,D=S<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,L):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,w,L,x);else for(var B=_.length-1;B>=0;B--)(E=_[B])&&(D=(S<3?E(D):S>3?E(w,L,D):E(w,L))||D);return S>3&&D&&Object.defineProperty(w,L,D),D},g=this&&this.__param||function(_,w){return function(L,x){w(L,x,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const f=o(5871),m=o(4725),v=o(844),k=o(2585),y={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let h=i.OverviewRulerRenderer=class extends v.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,w,L,x,E,S,D){var R;super(),this._viewportElement=_,this._screenElement=w,this._bufferService=L,this._decorationService=x,this._renderService=E,this._optionsService=S,this._coreBrowserService=D,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=_,c.center=w,c.right=_,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=c.left,p.right=c.left+c.center}_refreshDrawHeightConstants(){y.full=Math.round(2*this._coreBrowserService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowserService.dpr);y.left=w,y.center=w,y.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const w of _)w.position!=="full"&&this._renderColorZone(w);for(const w of _)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(p[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-y[_.position||"full"]/2),c[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+y[_.position||"full"]))}_queueRefresh(_,w){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=h=u([g(2,k.IBufferService),g(3,k.IDecorationService),g(4,m.IRenderService),g(5,k.IOptionsService),g(6,m.ICoreBrowserService)],h)},2950:function(d,i,o){var u=this&&this.__decorate||function(y,c,p,h){var _,w=arguments.length,L=w<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,p):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,c,p,h);else for(var x=y.length-1;x>=0;x--)(_=y[x])&&(L=(w<3?_(L):w>3?_(c,p,L):_(c,p))||L);return w>3&&L&&Object.defineProperty(c,p,L),L},g=this&&this.__param||function(y,c){return function(p,h){c(p,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const f=o(4725),m=o(2585),v=o(2584);let k=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,c,p,h,_,w){this._textarea=y,this._compositionView=c,this._bufferService=p,this._optionsService=h,this._coreService=_,this._renderService=w,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,p=c.replace(y,"");this._dataAlreadySent=p,c.length>y.length?this._coreService.triggerDataEvent(p,!0):c.length<y.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):c.length===y.length&&c!==y&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,h=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=h+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const w=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=h+"px",this._textarea.style.width=Math.max(w.width,1)+"px",this._textarea.style.height=Math.max(w.height,1)+"px",this._textarea.style.lineHeight=w.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=k=u([g(2,m.IBufferService),g(3,m.IOptionsService),g(4,m.ICoreService),g(5,f.IRenderService)],k)},9806:(d,i)=>{function o(u,g,f){const m=f.getBoundingClientRect(),v=u.getComputedStyle(f),k=parseInt(v.getPropertyValue("padding-left")),y=parseInt(v.getPropertyValue("padding-top"));return[g.clientX-m.left-k,g.clientY-m.top-y]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(u,g,f,m,v,k,y,c,p){if(!k)return;const h=o(u,g,f);return h?(h[0]=Math.ceil((h[0]+(p?y/2:0))/y),h[1]=Math.ceil(h[1]/c),h[0]=Math.min(Math.max(h[0],1),m+(p?1:0)),h[1]=Math.min(Math.max(h[1],1),v),h):void 0}},9504:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=o(2584);function g(c,p,h,_){const w=c-f(c,h),L=p-f(p,h),x=Math.abs(w-L)-function(E,S,D){let B=0;const R=E-f(E,D),P=S-f(S,D);for(let A=0;A<Math.abs(R-P);A++){const j=m(E,S)==="A"?-1:1,K=D.buffer.lines.get(R+j*A);K!=null&&K.isWrapped&&B++}return B}(c,p,h);return y(x,k(m(c,p),_))}function f(c,p){let h=0,_=p.buffer.lines.get(c),w=_==null?void 0:_.isWrapped;for(;w&&c>=0&&c<p.rows;)h++,_=p.buffer.lines.get(--c),w=_==null?void 0:_.isWrapped;return h}function m(c,p){return c>p?"A":"B"}function v(c,p,h,_,w,L){let x=c,E=p,S="";for(;x!==h||E!==_;)x+=w?1:-1,w&&x>L.cols-1?(S+=L.buffer.translateBufferLineToString(E,!1,c,x),x=0,c=0,E++):!w&&x<0&&(S+=L.buffer.translateBufferLineToString(E,!1,0,c+1),x=L.cols-1,c=x,E--);return S+L.buffer.translateBufferLineToString(E,!1,c,x)}function k(c,p){const h=p?"O":"[";return u.C0.ESC+h+c}function y(c,p){c=Math.floor(c);let h="";for(let _=0;_<c;_++)h+=p;return h}i.moveToCellSequence=function(c,p,h,_){const w=h.buffer.x,L=h.buffer.y;if(!h.buffer.hasScrollback)return function(S,D,B,R,P,A){return g(D,R,P,A).length===0?"":y(v(S,D,S,D-f(D,P),!1,P).length,k("D",A))}(w,L,0,p,h,_)+g(L,p,h,_)+function(S,D,B,R,P,A){let j;j=g(D,R,P,A).length>0?R-f(R,P):D;const K=R,V=function($,U,M,I,H,z){let ee;return ee=g(M,I,H,z).length>0?I-f(I,H):U,$<M&&ee<=I||$>=M&&ee<I?"C":"D"}(S,D,B,R,P,A);return y(v(S,j,B,K,V==="C",P).length,k(V,A))}(w,L,c,p,h,_);let x;if(L===p)return x=w>c?"D":"C",y(Math.abs(w-c),k(x,_));x=L>p?"D":"C";const E=Math.abs(L-p);return y(function(S,D){return D.cols-S}(L>p?c:w,h)+(E-1)*h.cols+1+((L>p?w:c)-1),k(x,_))}},1296:function(d,i,o){var u=this&&this.__decorate||function(A,j,K,V){var $,U=arguments.length,M=U<3?j:V===null?V=Object.getOwnPropertyDescriptor(j,K):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(A,j,K,V);else for(var I=A.length-1;I>=0;I--)($=A[I])&&(M=(U<3?$(M):U>3?$(j,K,M):$(j,K))||M);return U>3&&M&&Object.defineProperty(j,K,M),M},g=this&&this.__param||function(A,j){return function(K,V){j(K,V,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const f=o(3787),m=o(2550),v=o(2223),k=o(6171),y=o(6052),c=o(4725),p=o(8055),h=o(8460),_=o(844),w=o(2585),L="xterm-dom-renderer-owner-",x="xterm-rows",E="xterm-fg-",S="xterm-bg-",D="xterm-focus",B="xterm-selection";let R=1,P=i.DomRenderer=class extends _.Disposable{constructor(A,j,K,V,$,U,M,I,H,z,ee,q,Z){super(),this._terminal=A,this._document=j,this._element=K,this._screenElement=V,this._viewportElement=$,this._helperContainer=U,this._linkifier2=M,this._charSizeService=H,this._optionsService=z,this._bufferService=ee,this._coreBrowserService=q,this._themeService=Z,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,y.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Y=>this._injectCss(Y))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(L+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Y=>this._handleLinkHover(Y))),this.register(this._linkifier2.onHideLinkUnderline(Y=>this._handleLinkLeave(Y))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(L+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const K of this._rowElements)K.style.width=`${this.dimensions.css.canvas.width}px`,K.style.height=`${this.dimensions.css.cell.height}px`,K.style.lineHeight=`${this.dimensions.css.cell.height}px`,K.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${x} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${x} .xterm-dim { color: ${p.color.multiplyOpacity(A.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const K=`blink_underline_${this._terminalClass}`,V=`blink_bar_${this._terminalClass}`,$=`blink_block_${this._terminalClass}`;j+=`@keyframes ${K} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${V} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${$} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,j+=`${this._terminalSelector} .${x}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${x}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${x}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[U,M]of A.ansi.entries())j+=`${this._terminalSelector} .${E}${U} { color: ${M.css}; }${this._terminalSelector} .${E}${U}.xterm-dim { color: ${p.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${S}${U} { background-color: ${M.css}; }`;j+=`${this._terminalSelector} .${E}${v.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(A.background).css}; }${this._terminalSelector} .${E}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${S}${v.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,j){for(let K=this._rowElements.length;K<=j;K++){const V=this._document.createElement("div");this._rowContainer.appendChild(V),this._rowElements.push(V)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,j){this._refreshRowElements(A,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(D),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(D),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,j,K){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,j,K),this.renderRows(0,this._bufferService.rows-1),!A||!j)return;this._selectionRenderModel.update(this._terminal,A,j,K);const V=this._selectionRenderModel.viewportStartRow,$=this._selectionRenderModel.viewportEndRow,U=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(U>=this._bufferService.rows||M<0)return;const I=this._document.createDocumentFragment();if(K){const H=A[0]>j[0];I.appendChild(this._createSelectionElement(U,H?j[0]:A[0],H?A[0]:j[0],M-U+1))}else{const H=V===U?A[0]:0,z=U===$?j[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(U,H,z));const ee=M-U-1;if(I.appendChild(this._createSelectionElement(U+1,0,this._bufferService.cols,ee)),U!==M){const q=$===M?j[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(M,0,q))}}this._selectionContainer.appendChild(I)}_createSelectionElement(A,j,K,V=1){const $=this._document.createElement("div"),U=j*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(K-j);return U+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-U),$.style.height=V*this.dimensions.css.cell.height+"px",$.style.top=A*this.dimensions.css.cell.height+"px",$.style.left=`${U}px`,$.style.width=`${M}px`,$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,j){const K=this._bufferService.buffer,V=K.ybase+K.y,$=Math.min(K.x,this._bufferService.cols-1),U=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=A;H<=j;H++){const z=H+K.ydisp,ee=this._rowElements[H],q=K.lines.get(z);if(!ee||!q)break;ee.replaceChildren(...this._rowFactory.createRow(q,z,z===V,M,I,$,U,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${L}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,j,K,V,$,U){K<0&&(A=0),V<0&&(j=0);const M=this._bufferService.rows-1;K=Math.max(Math.min(K,M),0),V=Math.max(Math.min(V,M),0),$=Math.min($,this._bufferService.cols);const I=this._bufferService.buffer,H=I.ybase+I.y,z=Math.min(I.x,$-1),ee=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=K;Y<=V;++Y){const F=Y+I.ydisp,T=this._rowElements[Y],Q=I.lines.get(F);if(!T||!Q)break;T.replaceChildren(...this._rowFactory.createRow(Q,F,F===H,q,Z,z,ee,this.dimensions.css.cell.width,this._widthCache,U?Y===K?A:0:-1,U?(Y===V?j:$)-1:-1))}}};i.DomRenderer=P=u([g(7,w.IInstantiationService),g(8,c.ICharSizeService),g(9,w.IOptionsService),g(10,w.IBufferService),g(11,c.ICoreBrowserService),g(12,c.IThemeService)],P)},3787:function(d,i,o){var u=this&&this.__decorate||function(x,E,S,D){var B,R=arguments.length,P=R<3?E:D===null?D=Object.getOwnPropertyDescriptor(E,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,E,S,D);else for(var A=x.length-1;A>=0;A--)(B=x[A])&&(P=(R<3?B(P):R>3?B(E,S,P):B(E,S))||P);return R>3&&P&&Object.defineProperty(E,S,P),P},g=this&&this.__param||function(x,E){return function(S,D){E(S,D,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const f=o(2223),m=o(643),v=o(511),k=o(2585),y=o(8055),c=o(4725),p=o(4269),h=o(6171),_=o(3734);let w=i.DomRendererRowFactory=class{constructor(x,E,S,D,B,R,P){this._document=x,this._characterJoinerService=E,this._optionsService=S,this._coreBrowserService=D,this._coreService=B,this._decorationService=R,this._themeService=P,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,E,S){this._selectionStart=x,this._selectionEnd=E,this._columnSelectMode=S}createRow(x,E,S,D,B,R,P,A,j,K,V){const $=[],U=this._characterJoinerService.getJoinedCharacters(E),M=this._themeService.colors;let I,H=x.getNoBgTrimmedLength();S&&H<R+1&&(H=R+1);let z=0,ee="",q=0,Z=0,Y=0,F=!1,T=0,Q=!1,G=0;const ne=[],ie=K!==-1&&V!==-1;for(let ce=0;ce<H;ce++){x.loadCell(ce,this._workCell);let ue=this._workCell.getWidth();if(ue===0)continue;let be=!1,_e=ce,ke=this._workCell;if(U.length>0&&ce===U[0][0]){be=!0;const ve=U.shift();ke=new p.JoinedCellData(this._workCell,x.translateToString(!0,ve[0],ve[1]),ve[1]-ve[0]),_e=ve[1]-1,ue=ke.getWidth()}const Ne=this._isCellInSelection(ce,E),De=S&&ce===R,xe=ie&&ce>=K&&ce<=V;let Ce=!1;this._decorationService.forEachDecorationAtCell(ce,E,void 0,ve=>{Ce=!0});let se=ke.getChars()||m.WHITESPACE_CELL_CHAR;if(se===" "&&(ke.isUnderline()||ke.isOverline())&&(se=" "),G=ue*A-j.get(se,ke.isBold(),ke.isItalic()),I){if(z&&(Ne&&Q||!Ne&&!Q&&ke.bg===q)&&(Ne&&Q&&M.selectionForeground||ke.fg===Z)&&ke.extended.ext===Y&&xe===F&&G===T&&!De&&!be&&!Ce){ke.isInvisible()?ee+=m.WHITESPACE_CELL_CHAR:ee+=se,z++;continue}z&&(I.textContent=ee),I=this._document.createElement("span"),z=0,ee=""}else I=this._document.createElement("span");if(q=ke.bg,Z=ke.fg,Y=ke.extended.ext,F=xe,T=G,Q=Ne,be&&R>=ce&&R<=_e&&(R=ce),!this._coreService.isCursorHidden&&De&&this._coreService.isCursorInitialized){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&ne.push("xterm-cursor-blink"),ne.push(D==="bar"?"xterm-cursor-bar":D==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(ke.isBold()&&ne.push("xterm-bold"),ke.isItalic()&&ne.push("xterm-italic"),ke.isDim()&&ne.push("xterm-dim"),ee=ke.isInvisible()?m.WHITESPACE_CELL_CHAR:ke.getChars()||m.WHITESPACE_CELL_CHAR,ke.isUnderline()&&(ne.push(`xterm-underline-${ke.extended.underlineStyle}`),ee===" "&&(ee=" "),!ke.isUnderlineColorDefault()))if(ke.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB(ke.getUnderlineColor()).join(",")})`;else{let ve=ke.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ke.isBold()&&ve<8&&(ve+=8),I.style.textDecorationColor=M.ansi[ve].css}ke.isOverline()&&(ne.push("xterm-overline"),ee===" "&&(ee=" ")),ke.isStrikethrough()&&ne.push("xterm-strikethrough"),xe&&(I.style.textDecoration="underline");let ge=ke.getFgColor(),fe=ke.getFgColorMode(),Ee=ke.getBgColor(),Ge=ke.getBgColorMode();const at=!!ke.isInverse();if(at){const ve=ge;ge=Ee,Ee=ve;const pe=fe;fe=Ge,Ge=pe}let Fe,$e,re,me=!1;switch(this._decorationService.forEachDecorationAtCell(ce,E,void 0,ve=>{ve.options.layer!=="top"&&me||(ve.backgroundColorRGB&&(Ge=50331648,Ee=ve.backgroundColorRGB.rgba>>8&16777215,Fe=ve.backgroundColorRGB),ve.foregroundColorRGB&&(fe=50331648,ge=ve.foregroundColorRGB.rgba>>8&16777215,$e=ve.foregroundColorRGB),me=ve.options.layer==="top")}),!me&&Ne&&(Fe=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,Ee=Fe.rgba>>8&16777215,Ge=50331648,me=!0,M.selectionForeground&&(fe=50331648,ge=M.selectionForeground.rgba>>8&16777215,$e=M.selectionForeground)),me&&ne.push("xterm-decoration-top"),Ge){case 16777216:case 33554432:re=M.ansi[Ee],ne.push(`xterm-bg-${Ee}`);break;case 50331648:re=y.channels.toColor(Ee>>16,Ee>>8&255,255&Ee),this._addStyle(I,`background-color:#${L((Ee>>>0).toString(16),"0",6)}`);break;default:at?(re=M.foreground,ne.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):re=M.background}switch(Fe||ke.isDim()&&(Fe=y.color.multiplyOpacity(re,.5)),fe){case 16777216:case 33554432:ke.isBold()&&ge<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ge+=8),this._applyMinimumContrast(I,re,M.ansi[ge],ke,Fe,void 0)||ne.push(`xterm-fg-${ge}`);break;case 50331648:const ve=y.channels.toColor(ge>>16&255,ge>>8&255,255&ge);this._applyMinimumContrast(I,re,ve,ke,Fe,$e)||this._addStyle(I,`color:#${L(ge.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,re,M.foreground,ke,Fe,$e)||at&&ne.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}ne.length&&(I.className=ne.join(" "),ne.length=0),De||be||Ce?I.textContent=ee:z++,G!==this.defaultSpacing&&(I.style.letterSpacing=`${G}px`),$.push(I),ce=_e}return I&&z&&(I.textContent=ee),$}_applyMinimumContrast(x,E,S,D,B,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,h.treatGlyphAsBackgroundColor)(D.getCode()))return!1;const P=this._getContrastCache(D);let A;if(B||R||(A=P.getColor(E.rgba,S.rgba)),A===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(D.isDim()?2:1);A=y.color.ensureContrastRatio(B||E,R||S,j),P.setColor((B||E).rgba,(R||S).rgba,A??null)}return!!A&&(this._addStyle(x,`color:${A.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,E){x.setAttribute("style",`${x.getAttribute("style")||""}${E};`)}_isCellInSelection(x,E){const S=this._selectionStart,D=this._selectionEnd;return!(!S||!D)&&(this._columnSelectMode?S[0]<=D[0]?x>=S[0]&&E>=S[1]&&x<D[0]&&E<=D[1]:x<S[0]&&E>=S[1]&&x>=D[0]&&E<=D[1]:E>S[1]&&E<D[1]||S[1]===D[1]&&E===S[1]&&x>=S[0]&&x<D[0]||S[1]<D[1]&&E===D[1]&&x<D[0]||S[1]<D[1]&&E===S[1]&&x>=S[0])}};function L(x,E,S){for(;x.length<S;)x=E+x;return x}i.DomRendererRowFactory=w=u([g(1,c.ICharacterJoinerService),g(2,k.IOptionsService),g(3,c.ICoreBrowserService),g(4,k.ICoreService),g(5,k.IDecorationService),g(6,c.IThemeService)],w)},2550:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const g=o.createElement("span");g.classList.add("xterm-char-measure-element");const f=o.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold";const m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const v=o.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[g,f,m,v],this._container.appendChild(g),this._container.appendChild(f),this._container.appendChild(m),this._container.appendChild(v),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,u,g,f){o===this._font&&u===this._fontSize&&g===this._weight&&f===this._weightBold||(this._font=o,this._fontSize=u,this._weight=g,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${g}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${g}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(o,u,g){let f=0;if(!u&&!g&&o.length===1&&(f=o.charCodeAt(0))<256){if(this._flat[f]!==-9999)return this._flat[f];const k=this._measure(o,0);return k>0&&(this._flat[f]=k),k}let m=o;u&&(m+="B"),g&&(m+="I");let v=this._holey.get(m);if(v===void 0){let k=0;u&&(k|=1),g&&(k|=2),v=this._measure(o,k),v>0&&this._holey.set(m,v)}return v}_measure(o,u){const g=this._measureElements[u];return g.textContent=o.repeat(32),g.offsetWidth/32}}},2223:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(d,i)=>{function o(g){return 57508<=g&&g<=57558}function u(g){return g>=128512&&g<=128591||g>=127744&&g<=128511||g>=128640&&g<=128767||g>=9728&&g<=9983||g>=9984&&g<=10175||g>=65024&&g<=65039||g>=129280&&g<=129535||g>=127462&&g<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(g){return 57520<=g&&g<=57527},i.isEmoji=u,i.allowRescaling=function(g,f,m,v){return f===1&&m>Math.ceil(1.5*v)&&g!==void 0&&g>255&&!u(g)&&!o(g)&&!function(k){return 57344<=k&&k<=63743}(g)},i.treatGlyphAsBackgroundColor=function(g){return o(g)||function(f){return 9472<=f&&f<=9631}(g)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(g,f,m=0){return(g-(2*Math.round(f)-m))%(2*Math.round(f))}},6052:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(g,f,m,v=!1){if(this.selectionStart=f,this.selectionEnd=m,!f||!m||f[0]===m[0]&&f[1]===m[1])return void this.clear();const k=g.buffers.active.ydisp,y=f[1]-k,c=m[1]-k,p=Math.max(y,0),h=Math.min(c,g.rows-1);p>=g.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=v,this.viewportStartRow=y,this.viewportEndRow=c,this.viewportCappedStartRow=p,this.viewportCappedEndRow=h,this.startCol=f[0],this.endCol=m[0])}isCellSelected(g,f,m){return!!this.hasSelection&&(m-=g.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?f>=this.startCol&&m>=this.viewportCappedStartRow&&f<this.endCol&&m<=this.viewportCappedEndRow:f<this.startCol&&m>=this.viewportCappedStartRow&&f>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&f>=this.startCol&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&f>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,u=this.selectionEnd;return!(!o||!u)&&(o[1]>u[1]||o[1]===u[1]&&o[0]>u[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},g=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const f=o(2585),m=o(8460),v=o(844);let k=i.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(h,_,w){super(),this._optionsService=w,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new c(h,_,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())}};i.CharSizeService=k=u([g(2,f.IOptionsService)],k);class y extends v.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(_,w){_!==void 0&&_>0&&w!==void 0&&w>0&&(this._result.width=_,this._result.height=w)}}class c extends y{constructor(_,w,L){super(),this._document=_,this._parentElement=w,this._optionsService=L,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends y{constructor(_){super(),this._optionsService=_,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const w=this._ctx.measureText("W");if(!("width"in w&&"fontBoundingBoxAscent"in w&&"fontBoundingBoxDescent"in w))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const _=this._ctx.measureText("W");return this._validateAndSet(_.width,_.fontBoundingBoxAscent+_.fontBoundingBoxDescent),this._result}}},4269:function(d,i,o){var u=this&&this.__decorate||function(p,h,_,w){var L,x=arguments.length,E=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,h,_,w);else for(var S=p.length-1;S>=0;S--)(L=p[S])&&(E=(x<3?L(E):x>3?L(h,_,E):L(h,_))||E);return x>3&&E&&Object.defineProperty(h,_,E),E},g=this&&this.__param||function(p,h){return function(_,w){h(_,w,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const f=o(3734),m=o(643),v=o(511),k=o(2585);class y extends f.AttributeData{constructor(h,_,w){super(),this.content=0,this.combinedData="",this.fg=h.fg,this.bg=h.bg,this.combinedData=_,this._width=w}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(h){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=y;let c=i.CharacterJoinerService=class io{constructor(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(h){const _={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(_),_.id}deregister(h){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===h)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(h){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(h);if(!_||_.length===0)return[];const w=[],L=_.translateToString(!0);let x=0,E=0,S=0,D=_.getFg(0),B=_.getBg(0);for(let R=0;R<_.getTrimmedLength();R++)if(_.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==D||this._workCell.bg!==B){if(R-x>1){const P=this._getJoinedRanges(L,S,E,_,x);for(let A=0;A<P.length;A++)w.push(P[A])}x=R,S=E,D=this._workCell.fg,B=this._workCell.bg}E+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const R=this._getJoinedRanges(L,S,E,_,x);for(let P=0;P<R.length;P++)w.push(R[P])}return w}_getJoinedRanges(h,_,w,L,x){const E=h.substring(_,w);let S=[];try{S=this._characterJoiners[0].handler(E)}catch(D){console.error(D)}for(let D=1;D<this._characterJoiners.length;D++)try{const B=this._characterJoiners[D].handler(E);for(let R=0;R<B.length;R++)io._mergeRanges(S,B[R])}catch(B){console.error(B)}return this._stringRangesToCellRanges(S,L,x),S}_stringRangesToCellRanges(h,_,w){let L=0,x=!1,E=0,S=h[L];if(S){for(let D=w;D<this._bufferService.cols;D++){const B=_.getWidth(D),R=_.getString(D).length||m.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!x&&S[0]<=E&&(S[0]=D,x=!0),S[1]<=E){if(S[1]=D,S=h[++L],!S)break;S[0]<=E?(S[0]=D,x=!0):x=!1}E+=R}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(h,_){let w=!1;for(let L=0;L<h.length;L++){const x=h[L];if(w){if(_[1]<=x[0])return h[L-1][1]=_[1],h;if(_[1]<=x[1])return h[L-1][1]=Math.max(_[1],x[1]),h.splice(L,1),h;h.splice(L,1),L--}else{if(_[1]<=x[0])return h.splice(L,0,_),h;if(_[1]<=x[1])return x[0]=Math.min(_[0],x[0]),h;_[0]<x[1]&&(x[0]=Math.min(_[0],x[0]),w=!0)}}return w?h[h.length-1][1]=_[1]:h.push(_),h}};i.CharacterJoinerService=c=u([g(0,k.IBufferService)],c)},5114:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const u=o(844),g=o(8460),f=o(3656);class m extends u.Disposable{constructor(y,c,p){super(),this._textarea=y,this._window=c,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new v(this._window),this._onDprChange=this.register(new g.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new g.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(h=>this._screenDprMonitor.setWindow(h))),this.register((0,g.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(y){this._window!==y&&(this._window=y,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=m;class v extends u.Disposable{constructor(y){super(),this._parentWindow=y,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new g.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(y){this._parentWindow=y,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,f.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)==null||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const u=o(844);class g extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const v=this.linkProviders.indexOf(m);v!==-1&&this.linkProviders.splice(v,1)}}}}i.LinkProviderService=g},8934:function(d,i,o){var u=this&&this.__decorate||function(k,y,c,p){var h,_=arguments.length,w=_<3?y:p===null?p=Object.getOwnPropertyDescriptor(y,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(k,y,c,p);else for(var L=k.length-1;L>=0;L--)(h=k[L])&&(w=(_<3?h(w):_>3?h(y,c,w):h(y,c))||w);return _>3&&w&&Object.defineProperty(y,c,w),w},g=this&&this.__param||function(k,y){return function(c,p){y(c,p,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const f=o(4725),m=o(9806);let v=i.MouseService=class{constructor(k,y){this._renderService=k,this._charSizeService=y}getCoords(k,y,c,p,h){return(0,m.getCoords)(window,k,y,c,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(k,y){const c=(0,m.getCoordsRelativeToElement)(window,k,y);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};i.MouseService=v=u([g(0,f.IRenderService),g(1,f.ICharSizeService)],v)},3230:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},g=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const f=o(6193),m=o(4725),v=o(8460),k=o(844),y=o(7226),c=o(2585);let p=i.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(h,_,w,L,x,E,S,D){super(),this._rowCount=h,this._charSizeService=L,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new y.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new f.RenderDebouncer((B,R)=>this._renderRows(B,R),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)==null?void 0:B.clear()})),this.register(w.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(w.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(w.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register(D.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,_),this.register(S.onWindowChange(B=>this._registerIntersectionObserver(B,_)))}_registerIntersectionObserver(h,_){if("IntersectionObserver"in h){const w=new h.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});w.observe(_),this._observerDisposable.value=(0,k.toDisposable)(()=>w.disconnect())}}_handleIntersectionChange(h){this._isPaused=h.isIntersecting===void 0?h.intersectionRatio===0:!h.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(h,_,w=!1){this._isPaused?this._needsFullRefresh=!0:(w||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(h,_,this._rowCount))}_renderRows(h,_){this._renderer.value&&(h=Math.min(h,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(h,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:h,end:_}),this._onRender.fire({start:h,end:_}),this._isNextRenderRedrawOnly=!0)}resize(h,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(h){this._renderer.value=h,this._renderer.value&&(this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(h){return this._renderDebouncer.addRefreshCallback(h)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var h,_;this._renderer.value&&((_=(h=this._renderer.value).clearTextureAtlas)==null||_.call(h),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(h,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var w;return(w=this._renderer.value)==null?void 0:w.handleResize(h,_)}):this._renderer.value.handleResize(h,_),this._fullRefresh())}handleCharSizeChanged(){var h;(h=this._renderer.value)==null||h.handleCharSizeChanged()}handleBlur(){var h;(h=this._renderer.value)==null||h.handleBlur()}handleFocus(){var h;(h=this._renderer.value)==null||h.handleFocus()}handleSelectionChanged(h,_,w){var L;this._selectionState.start=h,this._selectionState.end=_,this._selectionState.columnSelectMode=w,(L=this._renderer.value)==null||L.handleSelectionChanged(h,_,w)}handleCursorMove(){var h;(h=this._renderer.value)==null||h.handleCursorMove()}clear(){var h;(h=this._renderer.value)==null||h.clear()}};i.RenderService=p=u([g(2,c.IOptionsService),g(3,m.ICharSizeService),g(4,c.IDecorationService),g(5,c.IBufferService),g(6,m.ICoreBrowserService),g(7,m.IThemeService)],p)},9312:function(d,i,o){var u=this&&this.__decorate||function(S,D,B,R){var P,A=arguments.length,j=A<3?D:R===null?R=Object.getOwnPropertyDescriptor(D,B):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(S,D,B,R);else for(var K=S.length-1;K>=0;K--)(P=S[K])&&(j=(A<3?P(j):A>3?P(D,B,j):P(D,B))||j);return A>3&&j&&Object.defineProperty(D,B,j),j},g=this&&this.__param||function(S,D){return function(B,R){D(B,R,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const f=o(9806),m=o(9504),v=o(456),k=o(4725),y=o(8460),c=o(844),p=o(6114),h=o(4841),_=o(511),w=o(2585),L=" ",x=new RegExp(L,"g");let E=i.SelectionService=class extends c.Disposable{constructor(S,D,B,R,P,A,j,K,V){super(),this._element=S,this._screenElement=D,this._linkifier=B,this._bufferService=R,this._coreService=P,this._mouseService=A,this._optionsService=j,this._renderService=K,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=$=>this._handleMouseMove($),this._mouseUpListener=$=>this._handleMouseUp($),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim($=>this._handleTrim($)),this.register(this._bufferService.buffers.onBufferActivate($=>this._handleBufferActivate($))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!(!S||!D||S[0]===D[0]&&S[1]===D[1])}get selectionText(){const S=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;if(!S||!D)return"";const B=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(S[0]===D[0])return"";const P=S[0]<D[0]?S[0]:D[0],A=S[0]<D[0]?D[0]:S[0];for(let j=S[1];j<=D[1];j++){const K=B.translateBufferLineToString(j,!0,P,A);R.push(K)}}else{const P=S[1]===D[1]?D[0]:void 0;R.push(B.translateBufferLineToString(S[1],!0,S[0],P));for(let A=S[1]+1;A<=D[1]-1;A++){const j=B.lines.get(A),K=B.translateBufferLineToString(A,!0);j!=null&&j.isWrapped?R[R.length-1]+=K:R.push(K)}if(S[1]!==D[1]){const A=B.lines.get(D[1]),j=B.translateBufferLineToString(D[1],!0,0,D[0]);A&&A.isWrapped?R[R.length-1]+=j:R.push(j)}}return R.map(P=>P.replace(x," ")).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),p.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const D=this._getMouseBufferCoords(S),B=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(B&&R&&D)&&this._areCoordsInSelection(D,B,R)}isCellInSelection(S,D){const B=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!B||!R)&&this._areCoordsInSelection([S,D],B,R)}_areCoordsInSelection(S,D,B){return S[1]>D[1]&&S[1]<B[1]||D[1]===B[1]&&S[1]===D[1]&&S[0]>=D[0]&&S[0]<B[0]||D[1]<B[1]&&S[1]===B[1]&&S[0]<B[0]||D[1]<B[1]&&S[1]===D[1]&&S[0]>=D[0]}_selectWordAtCursor(S,D){var P,A;const B=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,h.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(S);return!!R&&(this._selectWordAt(R,D),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,D){this._model.clearSelection(),S=Math.max(S,0),D=Math.min(D,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,D],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const D=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(D)return D[0]--,D[1]--,D[1]+=this._bufferService.buffer.ydisp,D}_getMouseEventScrollAmount(S){let D=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return D>=0&&D<=B?0:(D>B&&(D-=B),D=Math.min(Math.max(D,-50),50),D/=50,D/Math.abs(D)+Math.round(14*D))}shouldForceSelection(S){return p.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const D=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);D&&D.length!==this._model.selectionStart[0]&&D.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const D=this._getMouseBufferCoords(S);D&&(this._activeSelectionMode=2,this._selectLineAt(D[1]))}shouldColumnSelect(S){return S.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const D=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const R=B.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}D&&D[0]===this._model.selectionEnd[0]&&D[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const D=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&D<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const R=(0,m.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,D=this._model.finalSelectionEnd,B=!(!S||!D||S[0]===D[0]&&S[1]===D[1]);B?S&&D&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&D[0]===this._oldSelectionEnd[0]&&D[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,D,B)):this._oldHasSelection&&this._fireOnSelectionChange(S,D,B)}_fireOnSelectionChange(S,D,B){this._oldSelectionStart=S,this._oldSelectionEnd=D,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(D=>this._handleTrim(D))}_convertViewportColToCharacterIndex(S,D){let B=D;for(let R=0;D>=R;R++){const P=S.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:P>1&&D!==R&&(B+=P-1)}return B}setSelection(S,D,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,D],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,D,B=!0,R=!0){if(S[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(S[1]);if(!A)return;const j=P.translateBufferLineToString(S[1],!1);let K=this._convertViewportColToCharacterIndex(A,S[0]),V=K;const $=S[0]-K;let U=0,M=0,I=0,H=0;if(j.charAt(K)===" "){for(;K>0&&j.charAt(K-1)===" ";)K--;for(;V<j.length&&j.charAt(V+1)===" ";)V++}else{let q=S[0],Z=S[0];A.getWidth(q)===0&&(U++,q--),A.getWidth(Z)===2&&(M++,Z++);const Y=A.getString(Z).length;for(Y>1&&(H+=Y-1,V+=Y-1);q>0&&K>0&&!this._isCharWordSeparator(A.loadCell(q-1,this._workCell));){A.loadCell(q-1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===0?(U++,q--):F>1&&(I+=F-1,K-=F-1),K--,q--}for(;Z<A.length&&V+1<j.length&&!this._isCharWordSeparator(A.loadCell(Z+1,this._workCell));){A.loadCell(Z+1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,Z++):F>1&&(H+=F-1,V+=F-1),V++,Z++}}V++;let z=K+$-U+I,ee=Math.min(this._bufferService.cols,V-K+U+M-I-H);if(D||j.slice(K,V).trim()!==""){if(B&&z===0&&A.getCodePoint(0)!==32){const q=P.lines.get(S[1]-1);if(q&&A.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){const Z=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(Z){const Y=this._bufferService.cols-Z.start;z-=Y,ee+=Y}}}if(R&&z+ee===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const q=P.lines.get(S[1]+1);if(q!=null&&q.isWrapped&&q.getCodePoint(0)!==32){const Z=this._getWordAt([0,S[1]+1],!1,!1,!0);Z&&(ee+=Z.length)}}return{start:z,length:ee}}}_selectWordAt(S,D){const B=this._getWordAt(S,D);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[B.start,S[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(S){const D=this._getWordAt(S,!0);if(D){let B=S[1];for(;D.start<0;)D.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;D.start+D.length>this._bufferService.cols;)D.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?D.start:D.start+D.length,B]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const D=this._bufferService.buffer.getWrappedRangeForLine(S),B={start:{x:0,y:D.first},end:{x:this._bufferService.cols-1,y:D.last}};this._model.selectionStart=[0,D.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,h.getRangeLength)(B,this._bufferService.cols)}};i.SelectionService=E=u([g(3,w.IBufferService),g(4,w.ICoreService),g(5,k.IMouseService),g(6,w.IOptionsService),g(7,k.IRenderService),g(8,k.ICoreBrowserService)],E)},4725:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=o(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService"),i.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(d,i,o){var u=this&&this.__decorate||function(E,S,D,B){var R,P=arguments.length,A=P<3?S:B===null?B=Object.getOwnPropertyDescriptor(S,D):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,S,D,B);else for(var j=E.length-1;j>=0;j--)(R=E[j])&&(A=(P<3?R(A):P>3?R(S,D,A):R(S,D))||A);return P>3&&A&&Object.defineProperty(S,D,A),A},g=this&&this.__param||function(E,S){return function(D,B){S(D,B,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const f=o(7239),m=o(8055),v=o(8460),k=o(844),y=o(2585),c=m.css.toColor("#ffffff"),p=m.css.toColor("#000000"),h=m.css.toColor("#ffffff"),_=m.css.toColor("#000000"),w={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let D=0;D<216;D++){const B=S[D/36%6|0],R=S[D/6%6|0],P=S[D%6];E.push({css:m.channels.toCss(B,R,P),rgba:m.channels.toRgba(B,R,P)})}for(let D=0;D<24;D++){const B=8+10*D;E.push({css:m.channels.toCss(B,B,B),rgba:m.channels.toRgba(B,B,B)})}return E})());let L=i.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:p,cursor:h,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:w,selectionBackgroundOpaque:m.color.blend(p,w),selectionInactiveBackgroundTransparent:w,selectionInactiveBackgroundOpaque:m.color.blend(p,w),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const S=this._colors;if(S.foreground=x(E.foreground,c),S.background=x(E.background,p),S.cursor=x(E.cursor,h),S.cursorAccent=x(E.cursorAccent,_),S.selectionBackgroundTransparent=x(E.selectionBackground,w),S.selectionBackgroundOpaque=m.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=x(E.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=m.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=E.selectionForeground?x(E.selectionForeground,m.NULL_COLOR):void 0,S.selectionForeground===m.NULL_COLOR&&(S.selectionForeground=void 0),m.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=m.color.opacity(S.selectionBackgroundTransparent,.3)),m.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=m.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=x(E.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=x(E.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=x(E.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=x(E.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=x(E.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=x(E.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=x(E.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=x(E.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=x(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=x(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=x(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=x(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=x(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=x(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=x(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=x(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const D=Math.min(S.ansi.length-16,E.extendedAnsi.length);for(let B=0;B<D;B++)S.ansi[B+16]=x(E.extendedAnsi[B],i.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(E,S){if(E!==void 0)try{return m.css.toColor(E)}catch{}return S}i.ThemeService=L=u([g(0,y.IOptionsService)],L)},6349:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=o(8460),g=o(844);class f extends g.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const k=new Array(v);for(let y=0;y<Math.min(v,this.length);y++)k[y]=this._array[this._getCyclicIndex(y)];this._array=k,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let k=this._length;k<v;k++)this._array[k]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,k){this._array[this._getCyclicIndex(v)]=k}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,k,...y){if(k){for(let c=v;c<this._length-k;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+k)];this._length-=k,this.onDeleteEmitter.fire({index:v,amount:k})}for(let c=this._length-1;c>=v;c--)this._array[this._getCyclicIndex(c+y.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<y.length;c++)this._array[this._getCyclicIndex(v+c)]=y[c];if(y.length&&this.onInsertEmitter.fire({index:v,amount:y.length}),this._length+y.length>this._maxLength){const c=this._length+y.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=y.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,k,y){if(!(k<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let p=k-1;p>=0;p--)this.set(v+p+y,this.get(v+p));const c=v+k+y-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<k;c++)this.set(v+c+y,this.get(v+c))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}i.CircularList=f},1439:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(u,g=5){if(typeof u!="object")return u;const f=Array.isArray(u)?[]:{};for(const m in u)f[m]=g<=1?u[m]:u[m]&&o(u[m],g-1);return f}},8055:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,u=0,g=0,f=0;var m,v,k,y,c;function p(_){const w=_.toString(16);return w.length<2?"0"+w:w}function h(_,w){return _<w?(w+.05)/(_+.05):(_+.05)/(w+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(w,L,x,E){return E!==void 0?`#${p(w)}${p(L)}${p(x)}${p(E)}`:`#${p(w)}${p(L)}${p(x)}`},_.toRgba=function(w,L,x,E=255){return(w<<24|L<<16|x<<8|E)>>>0},_.toColor=function(w,L,x,E){return{css:_.toCss(w,L,x,E),rgba:_.toRgba(w,L,x,E)}}}(m||(i.channels=m={})),function(_){function w(L,x){return f=Math.round(255*x),[o,u,g]=c.toChannels(L.rgba),{css:m.toCss(o,u,g,f),rgba:m.toRgba(o,u,g,f)}}_.blend=function(L,x){if(f=(255&x.rgba)/255,f===1)return{css:x.css,rgba:x.rgba};const E=x.rgba>>24&255,S=x.rgba>>16&255,D=x.rgba>>8&255,B=L.rgba>>24&255,R=L.rgba>>16&255,P=L.rgba>>8&255;return o=B+Math.round((E-B)*f),u=R+Math.round((S-R)*f),g=P+Math.round((D-P)*f),{css:m.toCss(o,u,g),rgba:m.toRgba(o,u,g)}},_.isOpaque=function(L){return(255&L.rgba)==255},_.ensureContrastRatio=function(L,x,E){const S=c.ensureContrastRatio(L.rgba,x.rgba,E);if(S)return m.toColor(S>>24&255,S>>16&255,S>>8&255)},_.opaque=function(L){const x=(255|L.rgba)>>>0;return[o,u,g]=c.toChannels(x),{css:m.toCss(o,u,g),rgba:x}},_.opacity=w,_.multiplyOpacity=function(L,x){return f=255&L.rgba,w(L,f*x/255)},_.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(v||(i.color=v={})),function(_){let w,L;try{const x=document.createElement("canvas");x.width=1,x.height=1;const E=x.getContext("2d",{willReadFrequently:!0});E&&(w=E,w.globalCompositeOperation="copy",L=w.createLinearGradient(0,0,1,1))}catch{}_.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return o=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),g=parseInt(x.slice(3,4).repeat(2),16),m.toColor(o,u,g);case 5:return o=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),g=parseInt(x.slice(3,4).repeat(2),16),f=parseInt(x.slice(4,5).repeat(2),16),m.toColor(o,u,g,f);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const E=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return o=parseInt(E[1]),u=parseInt(E[2]),g=parseInt(E[3]),f=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),m.toColor(o,u,g,f);if(!w||!L)throw new Error("css.toColor: Unsupported css format");if(w.fillStyle=L,w.fillStyle=x,typeof w.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(w.fillRect(0,0,1,1),[o,u,g,f]=w.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(o,u,g,f),css:x}}}(k||(i.css=k={})),function(_){function w(L,x,E){const S=L/255,D=x/255,B=E/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}_.relativeLuminance=function(L){return w(L>>16&255,L>>8&255,255&L)},_.relativeLuminance2=w}(y||(i.rgb=y={})),function(_){function w(x,E,S){const D=x>>24&255,B=x>>16&255,R=x>>8&255;let P=E>>24&255,A=E>>16&255,j=E>>8&255,K=h(y.relativeLuminance2(P,A,j),y.relativeLuminance2(D,B,R));for(;K<S&&(P>0||A>0||j>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),j-=Math.max(0,Math.ceil(.1*j)),K=h(y.relativeLuminance2(P,A,j),y.relativeLuminance2(D,B,R));return(P<<24|A<<16|j<<8|255)>>>0}function L(x,E,S){const D=x>>24&255,B=x>>16&255,R=x>>8&255;let P=E>>24&255,A=E>>16&255,j=E>>8&255,K=h(y.relativeLuminance2(P,A,j),y.relativeLuminance2(D,B,R));for(;K<S&&(P<255||A<255||j<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),j=Math.min(255,j+Math.ceil(.1*(255-j))),K=h(y.relativeLuminance2(P,A,j),y.relativeLuminance2(D,B,R));return(P<<24|A<<16|j<<8|255)>>>0}_.blend=function(x,E){if(f=(255&E)/255,f===1)return E;const S=E>>24&255,D=E>>16&255,B=E>>8&255,R=x>>24&255,P=x>>16&255,A=x>>8&255;return o=R+Math.round((S-R)*f),u=P+Math.round((D-P)*f),g=A+Math.round((B-A)*f),m.toRgba(o,u,g)},_.ensureContrastRatio=function(x,E,S){const D=y.relativeLuminance(x>>8),B=y.relativeLuminance(E>>8);if(h(D,B)<S){if(B<D){const A=w(x,E,S),j=h(D,y.relativeLuminance(A>>8));if(j<S){const K=L(x,E,S);return j>h(D,y.relativeLuminance(K>>8))?A:K}return A}const R=L(x,E,S),P=h(D,y.relativeLuminance(R>>8));if(P<S){const A=w(x,E,S);return P>h(D,y.relativeLuminance(A>>8))?R:A}return R}},_.reduceLuminance=w,_.increaseLuminance=L,_.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}}(c||(i.rgba=c={})),i.toPaddedHex=p,i.contrastRatio=h},8969:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=o(844),g=o(2585),f=o(4348),m=o(7866),v=o(744),k=o(7302),y=o(6975),c=o(8460),p=o(1753),h=o(1480),_=o(7994),w=o(9282),L=o(5435),x=o(5981),E=o(2660);let S=!1;class D extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(R=>{var P;(P=this._onScrollApi)==null||P.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const P in R)this.optionsService.options[P]=R[P]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new k.OptionsService(R)),this._instantiationService.setService(g.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(g.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(g.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(g.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(g.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(h.UnicodeService)),this._instantiationService.setService(g.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(g.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(g.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new L.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,P){this._writeBuffer.write(R,P)}writeSync(R,P){this._logService.logLevel<=g.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(R,P)}input(R,P=!0){this.coreService.triggerDataEvent(R,P)}resize(R,P){isNaN(R)||isNaN(P)||(R=Math.max(R,v.MINIMUM_COLS),P=Math.max(P,v.MINIMUM_ROWS),this._bufferService.resize(R,P))}scroll(R,P=!1){this._bufferService.scroll(R,P)}scrollLines(R,P,A){this._bufferService.scrollLines(R,P,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const P=R-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(R,P){return this._inputHandler.registerEscHandler(R,P)}registerDcsHandler(R,P){return this._inputHandler.registerDcsHandler(R,P)}registerCsiHandler(R,P){return this._inputHandler.registerCsiHandler(R,P)}registerOscHandler(R,P){return this._inputHandler.registerOscHandler(R,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?R=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(w.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,w.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const P of R)P.dispose()})}}}i.CoreTerminal=D},8460:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===o)return void this._listeners.splice(u,1)}}})),this._event}fire(o,u){const g=[];for(let f=0;f<this._listeners.length;f++)g.push(this._listeners[f]);for(let f=0;f<g.length;f++)g[f].call(void 0,o,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,u){return o(g=>u.fire(g))},i.runAndSubscribe=function(o,u){return u(void 0),o(g=>u(g))}},5435:function(d,i,o){var u=this&&this.__decorate||function(U,M,I,H){var z,ee=arguments.length,q=ee<3?M:H===null?H=Object.getOwnPropertyDescriptor(M,I):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(U,M,I,H);else for(var Z=U.length-1;Z>=0;Z--)(z=U[Z])&&(q=(ee<3?z(q):ee>3?z(M,I,q):z(M,I))||q);return ee>3&&q&&Object.defineProperty(M,I,q),q},g=this&&this.__param||function(U,M){return function(I,H){M(I,H,U)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const f=o(2584),m=o(7116),v=o(2015),k=o(844),y=o(482),c=o(8437),p=o(8460),h=o(643),_=o(511),w=o(3734),L=o(2585),x=o(1480),E=o(6242),S=o(6351),D=o(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function P(U,M){if(U>24)return M.setWinLines||!1;switch(U){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var A;(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let j=0;class K extends k.Disposable{getAttrData(){return this._curAttrData}constructor(M,I,H,z,ee,q,Z,Y,F=new v.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=I,this._coreService=H,this._logService=z,this._optionsService=ee,this._oscLinkService=q,this._coreMouseService=Z,this._unicodeService=Y,this._parser=F,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new V(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,Q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:Q.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,Q,G)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:Q,data:G})}),this._parser.setDcsHandlerFallback((T,Q,G)=>{Q==="HOOK"&&(G=G.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:Q,payload:G})}),this._parser.setPrintHandler((T,Q,G)=>this.print(T,Q,G)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new E.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new E.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new E.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new E.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new E.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new E.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new E.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new E.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new E.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new E.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new E.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((T,Q)=>this.requestStatusString(T,Q)))}_preserveStack(M,I,H,z){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=H,this._parseStack.position=z}_logSlowResolvingAsync(M){this._logService.logLevel<=L.LogLevelEnum.WARN&&Promise.race([M,new Promise((I,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,I){let H,z=this._activeBuffer.x,ee=this._activeBuffer.y,q=0;const Z=this._parseStack.paused;if(Z){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(H),H;z=this._parseStack.cursorStartX,ee=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>R&&(q=this._parseStack.position+R)}if(this._logService.logLevel<=L.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,T=>String.fromCharCode(T)).join("")}"`),typeof M=="string"?M.split("").map(T=>T.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(M.length,R))),Z||this._dirtyRowTracker.clearRange(),M.length>R)for(let T=q;T<M.length;T+=R){const Q=T+R<M.length?T+R:M.length,G=typeof M=="string"?this._stringDecoder.decode(M.substring(T,Q),this._parseBuffer):this._utf8Decoder.decode(M.subarray(T,Q),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,G))return this._preserveStack(z,ee,G,T),this._logSlowResolvingAsync(H),H}else if(!Z){const T=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,T))return this._preserveStack(z,ee,T,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===z&&this._activeBuffer.y===ee||this._onCursorMove.fire();const Y=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),F=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);F<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(F,this._bufferService.rows-1),Math.min(Y,this._bufferService.rows-1))}print(M,I,H){let z,ee;const q=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,F=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,Q=this._curAttrData;let G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-I>0&&G.getWidth(this._activeBuffer.x-1)===2&&G.setCellFromCodepoint(this._activeBuffer.x-1,0,1,Q);let ne=this._parser.precedingJoinState;for(let ie=I;ie<H;++ie){if(z=M[ie],z<127&&q){const _e=q[String.fromCharCode(z)];_e&&(z=_e.charCodeAt(0))}const ce=this._unicodeService.charProperties(z,ne);ee=x.UnicodeService.extractWidth(ce);const ue=x.UnicodeService.extractShouldJoin(ce),be=ue?x.UnicodeService.extractWidth(ne):0;if(ne=ce,Z&&this._onA11yChar.fire((0,y.stringFromCodePoint)(z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+ee-be>Y){if(F){const _e=G;let ke=this._activeBuffer.x-be;for(this._activeBuffer.x=be,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),be>0&&G instanceof c.BufferLine&&G.copyCellsFrom(_e,ke,0,be,!1);ke<Y;)_e.setCellFromCodepoint(ke++,0,1,Q)}else if(this._activeBuffer.x=Y-1,ee===2)continue}if(ue&&this._activeBuffer.x){const _e=G.getWidth(this._activeBuffer.x-1)?1:2;G.addCodepointToCell(this._activeBuffer.x-_e,z,ee);for(let ke=ee-be;--ke>=0;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}else if(T&&(G.insertCells(this._activeBuffer.x,ee-be,this._activeBuffer.getNullCell(Q)),G.getWidth(Y-1)===2&&G.setCellFromCodepoint(Y-1,h.NULL_CELL_CODE,h.NULL_CELL_WIDTH,Q)),G.setCellFromCodepoint(this._activeBuffer.x++,z,ee,Q),ee>0)for(;--ee;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}this._parser.precedingJoinState=ne,this._activeBuffer.x<Y&&H-I>0&&G.getWidth(this._activeBuffer.x)===0&&!G.hasContent(this._activeBuffer.x)&&G.setCellFromCodepoint(this._activeBuffer.x,0,1,Q),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,I){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,I):this._parser.registerCsiHandler(M,H=>!P(H.params[0],this._optionsService.rawOptions.windowOptions)||I(H))}registerDcsHandler(M,I){return this._parser.registerDcsHandler(M,new S.DcsHandler(I))}registerEscHandler(M,I){return this._parser.registerEscHandler(M,I)}registerOscHandler(M,I){return this._parser.registerOscHandler(M,new E.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=M,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+I)}cursorUp(M){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const I=M.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=M.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=M.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const I=M.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,I,H,z=!1,ee=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);q.replaceCells(I,H,this._activeBuffer.getNullCell(this._eraseAttrData()),ee),z&&(q.isWrapped=!1)}_resetBufferLine(M,I=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),H.isWrapped=!1)}eraseInDisplay(M,I=!1){let H;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);H<this._bufferService.rows;H++)this._resetBufferLine(H,I);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,I);this._dirtyRowTracker.markDirty(0);break;case 3:const z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0}eraseInLine(M,I=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let I=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ee=this._bufferService.rows-1+this._activeBuffer.ybase-z+1;for(;I--;)this._activeBuffer.lines.splice(ee-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let I=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let z;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;I--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let I=M.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let I=M.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const I=this._parser.precedingJoinState;if(!I)return!0;const H=M.params[0]||1,z=x.UnicodeService.extractWidth(I),ee=this._activeBuffer.x-z,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(ee),Z=new Uint32Array(q.length*H);let Y=0;for(let T=0;T<q.length;){const Q=q.codePointAt(T)||0;Z[Y++]=Q,T+=Q>65535?2:1}let F=Y;for(let T=1;T<H;++T)Z.copyWithin(F,0,Y),F+=Y;return this.print(Z,0,F),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let I=0;I<M.length;I++)switch(M.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,I){const H=this._coreService.decPrivateModes,{activeProtocol:z,activeEncoding:ee}=this._coreMouseService,q=this._coreService,{buffers:Z,cols:Y}=this._bufferService,{active:F,alt:T}=Z,Q=this._optionsService.rawOptions,G=ue=>ue?1:2,ne=M.params[0];return ie=ne,ce=I?ne===2?4:ne===4?G(q.modes.insertMode):ne===12?3:ne===20?G(Q.convertEol):0:ne===1?G(H.applicationCursorKeys):ne===3?Q.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:ne===6?G(H.origin):ne===7?G(H.wraparound):ne===8?3:ne===9?G(z==="X10"):ne===12?G(Q.cursorBlink):ne===25?G(!q.isCursorHidden):ne===45?G(H.reverseWraparound):ne===66?G(H.applicationKeypad):ne===67?4:ne===1e3?G(z==="VT200"):ne===1002?G(z==="DRAG"):ne===1003?G(z==="ANY"):ne===1004?G(H.sendFocus):ne===1005?4:ne===1006?G(ee==="SGR"):ne===1015?4:ne===1016?G(ee==="SGR_PIXELS"):ne===1048?1:ne===47||ne===1047||ne===1049?G(F===T):ne===2004?G(H.bracketedPasteMode):0,q.triggerDataEvent(`${f.C0.ESC}[${I?"":"?"}${ie};${ce}$y`),!0;var ie,ce}_updateAttrColor(M,I,H,z,ee){return I===2?(M|=50331648,M&=-16777216,M|=w.AttributeData.fromColorRGB([H,z,ee])):I===5&&(M&=-50331904,M|=33554432|255&H),M}_extractColor(M,I,H){const z=[0,0,-1,0,0,0];let ee=0,q=0;do{if(z[q+ee]=M.params[I+q],M.hasSubParams(I+q)){const Z=M.getSubParams(I+q);let Y=0;do z[1]===5&&(ee=1),z[q+Y+1+ee]=Z[Y];while(++Y<Z.length&&Y+q+1+ee<z.length);break}if(z[1]===5&&q+ee>=2||z[1]===2&&q+ee>=5)break;z[1]&&(ee=1)}while(++q+I<M.length&&q+ee<z.length);for(let Z=2;Z<z.length;++Z)z[Z]===-1&&(z[Z]=0);switch(z[0]){case 38:H.fg=this._updateAttrColor(H.fg,z[1],z[3],z[4],z[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,z[1],z[3],z[4],z[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,z[1],z[3],z[4],z[5])}return q}_processUnderline(M,I){I.extended=I.extended.clone(),(!~M||M>5)&&(M=1),I.extended.underlineStyle=M,I.fg|=268435456,M===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(M){M.fg=c.DEFAULT_ATTR_DATA.fg,M.bg=c.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=M.length;let H;const z=this._curAttrData;for(let ee=0;ee<I;ee++)H=M.params[ee],H>=30&&H<=37?(z.fg&=-50331904,z.fg|=16777216|H-30):H>=40&&H<=47?(z.bg&=-50331904,z.bg|=16777216|H-40):H>=90&&H<=97?(z.fg&=-50331904,z.fg|=16777224|H-90):H>=100&&H<=107?(z.bg&=-50331904,z.bg|=16777224|H-100):H===0?this._processSGR0(z):H===1?z.fg|=134217728:H===3?z.bg|=67108864:H===4?(z.fg|=268435456,this._processUnderline(M.hasSubParams(ee)?M.getSubParams(ee)[0]:1,z)):H===5?z.fg|=536870912:H===7?z.fg|=67108864:H===8?z.fg|=1073741824:H===9?z.fg|=2147483648:H===2?z.bg|=134217728:H===21?this._processUnderline(2,z):H===22?(z.fg&=-134217729,z.bg&=-134217729):H===23?z.bg&=-67108865:H===24?(z.fg&=-268435457,this._processUnderline(0,z)):H===25?z.fg&=-536870913:H===27?z.fg&=-67108865:H===28?z.fg&=-1073741825:H===29?z.fg&=2147483647:H===39?(z.fg&=-67108864,z.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):H===49?(z.bg&=-67108864,z.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?ee+=this._extractColor(M,ee,z):H===53?z.bg|=1073741824:H===55?z.bg&=-1073741825:H===59?(z.extended=z.extended.clone(),z.extended.underlineColor=-1,z.updateExtended()):H===100?(z.fg&=-67108864,z.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,z.bg&=-67108864,z.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${I};${H}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const I=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${I};${H}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const I=M.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=I%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion(M){const I=M.params[0]||1;let H;return(M.length<2||(H=M.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions(M){if(!P(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const I=[],H=M.split(";");for(;H.length>1;){const z=H.shift(),ee=H.shift();if(/^\d+$/.exec(z)){const q=parseInt(z);if($(q))if(ee==="?")I.push({type:0,index:q});else{const Z=(0,D.parseColor)(ee);Z&&I.push({type:1,index:q,color:Z})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(M){const I=M.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(M,I){this._getCurrentLinkId()&&this._finishHyperlink();const H=M.split(":");let z;const ee=H.findIndex(q=>q.startsWith("id="));return ee!==-1&&(z=H[ee].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:z,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,I){const H=M.split(";");for(let z=0;z<H.length&&!(I>=this._specialColors.length);++z,++I)if(H[z]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const ee=(0,D.parseColor)(H[z]);ee&&this._onColor.fire([{type:1,index:this._specialColors[I],color:ee}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const I=[],H=M.split(";");for(let z=0;z<H.length;++z)if(/^\d+$/.exec(H[z])){const ee=parseInt(H[z]);$(ee)&&I.push({type:2,index:ee})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(B[M[0]],m.CHARSETS[M[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new _.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const H=this._activeBuffer.ybase+this._activeBuffer.y+I,z=this._activeBuffer.lines.get(H);z&&(z.fill(M),z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,I){const H=this._bufferService.buffer,z=this._optionsService.rawOptions;return(ee=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${ee}${f.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[z.cursorStyle]-(z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,I){this._dirtyRowTracker.markRangeDirty(M,I)}}i.InputHandler=K;let V=class{constructor(U){this._bufferService=U,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(U){U<this.start?this.start=U:U>this.end&&(this.end=U)}markRangeDirty(U,M){U>M&&(j=U,U=M,M=j),U<this.start&&(this.start=U),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(U){return 0<=U&&U<256}V=u([g(0,L.IBufferService)],V)},844:(d,i)=>{function o(u){for(const g of u)g.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const g=this._disposables.indexOf(u);g!==-1&&this._disposables.splice(g,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var g;this._isDisposed||u===this._value||((g=this._value)==null||g.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=o,i.getDisposeArrayDisposable=function(u){return{dispose:()=>o(u)}}},1505:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(g,f,m){this._data[g]||(this._data[g]={}),this._data[g][f]=m}get(g,f){return this._data[g]?this._data[g][f]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(u,g,f,m,v){this._data.get(u,g)||this._data.set(u,g,new o),this._data.get(u,g).set(f,m,v)}get(u,g,f,m){var v;return(v=this._data.get(u,g))==null?void 0:v.get(f,m)}clear(){this._data.clear()}}},6114:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const g=o.match(/Version\/(\d+)/);return g===null||g.length<2?0:parseInt(g[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(o=this._search(this._getKey(u)),this._array.splice(o,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const g=this._getKey(u);if(g===void 0||(o=this._search(g),o===-1)||this._getKey(this._array[o])!==g)return!1;do if(this._array[o]===u)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===g);return!1}*getKeyIterator(u){if(this._array.length!==0&&(o=this._search(u),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===u))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===u)}forEachByKey(u,g){if(this._array.length!==0&&(o=this._search(u),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===u))do g(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===u)}values(){return[...this._array].values()}_search(u){let g=0,f=this._array.length-1;for(;f>=g;){let m=g+f>>1;const v=this._getKey(this._array[m]);if(v>u)f=m-1;else{if(!(v<u)){for(;m>0&&this._getKey(this._array[m-1])===u;)m--;return m}g=m+1}}return g}}},7226:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=o(6114);class g{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let k=0,y=0,c=v.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),y=Math.max(k,y),p=v.timeRemaining(),1.5*y>p)return c-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-k))}ms`),void this._start();c=p}this.clear()}}class f extends g{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const k=Date.now()+v;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}i.PriorityTaskQueue=f,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends g{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:f,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=o(643);i.updateWindowsModeWrappedState=function(g){const f=g.buffer.lines.get(g.buffer.ybase+g.buffer.y-1),m=f==null?void 0:f.get(g.cols-1),v=g.buffer.lines.get(g.buffer.ybase+g.buffer.y);v&&m&&(v.isWrapped=m[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&m[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new o;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}get underlineVariantOffset(){const f=(3758096384&this._ext)>>29;return f<0?4294967288^f:f}set underlineVariantOffset(f){this._ext&=536870911,this._ext|=f<<29&3758096384}constructor(f=0,m=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=m}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=o(6349),g=o(7226),f=o(3734),m=o(8437),v=o(4634),k=o(511),y=o(643),c=o(4863),p=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(h,_,w){this._hasScrollback=h,this._optionsService=_,this._bufferService=w,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new g.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,_){return new m.BufferLine(this._bufferService.cols,this.getNullCell(h),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;const _=h+this._optionsService.rawOptions.scrollback;return _>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:_}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=m.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,_){const w=this.getNullCell(m.DEFAULT_ATTR_DATA);let L=0;const x=this._getCorrectBufferLength(_);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<h)for(let S=0;S<this.lines.length;S++)L+=+this.lines.get(S).resize(h,w);let E=0;if(this._rows<_)for(let S=this._rows;S<_;S++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(h,w)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(h,w)));else for(let S=this._rows;S>_;S--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const S=this.lines.length-x;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=x}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,_-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(h,_),this._cols>h))for(let E=0;E<this.lines.length;E++)L+=+this.lines.get(E).resize(h,w);this._cols=h,this._rows=_,this._memoryCleanupQueue.clear(),L>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return h}get _isReflowEnabled(){const h=this._optionsService.rawOptions.windowsPty;return h&&h.buildNumber?this._hasScrollback&&h.backend==="conpty"&&h.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,_){this._cols!==h&&(h>this._cols?this._reflowLarger(h,_):this._reflowSmaller(h,_))}_reflowLarger(h,_){const w=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(w.length>0){const L=(0,v.reflowLargerCreateNewLayout)(this.lines,w);(0,v.reflowLargerApplyNewLayout)(this.lines,L.layout),this._reflowLargerAdjustViewport(h,_,L.countRemoved)}}_reflowLargerAdjustViewport(h,_,w){const L=this.getNullCell(m.DEFAULT_ATTR_DATA);let x=w;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new m.BufferLine(h,L))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-w,0)}_reflowSmaller(h,_){const w=this.getNullCell(m.DEFAULT_ATTR_DATA),L=[];let x=0;for(let E=this.lines.length-1;E>=0;E--){let S=this.lines.get(E);if(!S||!S.isWrapped&&S.getTrimmedLength()<=h)continue;const D=[S];for(;S.isWrapped&&E>0;)S=this.lines.get(--E),D.unshift(S);const B=this.ybase+this.y;if(B>=E&&B<E+D.length)continue;const R=D[D.length-1].getTrimmedLength(),P=(0,v.reflowSmallerGetNewLineLengths)(D,this._cols,h),A=P.length-D.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const K=[];for(let H=0;H<A;H++){const z=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);K.push(z)}K.length>0&&(L.push({start:E+D.length+x,newLines:K}),x+=K.length),D.push(...K);let V=P.length-1,$=P[V];$===0&&(V--,$=P[V]);let U=D.length-A-1,M=R;for(;U>=0;){const H=Math.min(M,$);if(D[V]===void 0)break;if(D[V].copyCellsFrom(D[U],M-H,$-H,H,!0),$-=H,$===0&&(V--,$=P[V]),M-=H,M===0){U--;const z=Math.max(U,0);M=(0,v.getWrappedLineTrimmedLength)(D,z,this._cols)}}for(let H=0;H<D.length;H++)P[H]<h&&D[H].setCell(P[H],w);let I=A-j;for(;I-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+_-1)}if(L.length>0){const E=[],S=[];for(let V=0;V<this.lines.length;V++)S.push(this.lines.get(V));const D=this.lines.length;let B=D-1,R=0,P=L[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let A=0;for(let V=Math.min(this.lines.maxLength-1,D+x-1);V>=0;V--)if(P&&P.start>B+A){for(let $=P.newLines.length-1;$>=0;$--)this.lines.set(V--,P.newLines[$]);V++,E.push({index:B+1,amount:P.newLines.length}),A+=P.newLines.length,P=L[++R]}else this.lines.set(V,S[B--]);let j=0;for(let V=E.length-1;V>=0;V--)E[V].index+=j,this.lines.onInsertEmitter.fire(E[V]),j+=E[V].amount;const K=Math.max(0,D+x-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}}translateBufferLineToString(h,_,w=0,L){const x=this.lines.get(h);return x?x.translateToString(_,w,L):""}getWrappedRangeForLine(h){let _=h,w=h;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;w+1<this.lines.length&&this.lines.get(w+1).isWrapped;)w++;return{first:_,last:w}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===h&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){const _=new c.Marker(h);return this.markers.push(_),_.register(this.lines.onTrim(w=>{_.line-=w,_.line<0&&_.dispose()})),_.register(this.lines.onInsert(w=>{_.line>=w.index&&(_.line+=w.amount)})),_.register(this.lines.onDelete(w=>{_.line>=w.index&&_.line<w.index+w.amount&&_.dispose(),_.line>w.index&&(_.line-=w.amount)})),_.register(_.onDispose(()=>this._removeMarker(_))),_}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}}},8437:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=o(3734),g=o(511),f=o(643),m=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let v=0;class k{constructor(c,p,h=!1){this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const _=p||g.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let w=0;w<c;++w)this.setCell(w,_);this.length=c}get(c){const p=this._data[3*c+0],h=2097151&p;return[this._data[3*c+1],2097152&p?this._combined[c]:h?(0,m.stringFromCodePoint)(h):"",p>>22,2097152&p?this._combined[c].charCodeAt(this._combined[c].length-1):h]}set(c,p){this._data[3*c+1]=p[f.CHAR_DATA_ATTR_INDEX],p[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=p[1],this._data[3*c+0]=2097152|c|p[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=p[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const p=this._data[3*c+0];return 2097152&p?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&p}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const p=this._data[3*c+0];return 2097152&p?this._combined[c]:2097151&p?(0,m.stringFromCodePoint)(2097151&p):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,p){return v=3*c,p.content=this._data[v+0],p.fg=this._data[v+1],p.bg=this._data[v+2],2097152&p.content&&(p.combinedData=this._combined[c]),268435456&p.bg&&(p.extended=this._extendedAttrs[c]),p}setCell(c,p){2097152&p.content&&(this._combined[c]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[c]=p.extended),this._data[3*c+0]=p.content,this._data[3*c+1]=p.fg,this._data[3*c+2]=p.bg}setCellFromCodepoint(c,p,h,_){268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=p|h<<22,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}addCodepointToCell(c,p,h){let _=this._data[3*c+0];2097152&_?this._combined[c]+=(0,m.stringFromCodePoint)(p):2097151&_?(this._combined[c]=(0,m.stringFromCodePoint)(2097151&_)+(0,m.stringFromCodePoint)(p),_&=-2097152,_|=2097152):_=p|4194304,h&&(_&=-12582913,_|=h<<22),this._data[3*c+0]=_}insertCells(c,p,h){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,h),p<this.length-c){const _=new g.CellData;for(let w=this.length-c-p-1;w>=0;--w)this.setCell(c+p+w,this.loadCell(c+w,_));for(let w=0;w<p;++w)this.setCell(c+w,h)}else for(let _=c;_<this.length;++_)this.setCell(_,h);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,h)}deleteCells(c,p,h){if(c%=this.length,p<this.length-c){const _=new g.CellData;for(let w=0;w<this.length-c-p;++w)this.setCell(c+w,this.loadCell(c+p+w,_));for(let w=this.length-p;w<this.length;++w)this.setCell(w,h)}else for(let _=c;_<this.length;++_)this.setCell(_,h);c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,h),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodepoint(c,0,1,h)}replaceCells(c,p,h,_=!1){if(_)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodepoint(c-1,0,1,h),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,h);c<p&&c<this.length;)this.isProtected(c)||this.setCell(c,h),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c-1,0,1,h),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,h);c<p&&c<this.length;)this.setCell(c++,h)}resize(c,p){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const h=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*h)this._data=new Uint32Array(this._data.buffer,0,h);else{const _=new Uint32Array(h);_.set(this._data),this._data=_}for(let _=this.length;_<c;++_)this.setCell(_,p)}else{this._data=this._data.subarray(0,h);const _=Object.keys(this._combined);for(let L=0;L<_.length;L++){const x=parseInt(_[L],10);x>=c&&delete this._combined[x]}const w=Object.keys(this._extendedAttrs);for(let L=0;L<w.length;L++){const x=parseInt(w[L],10);x>=c&&delete this._extendedAttrs[x]}}return this.length=c,4*h*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,p=!1){if(p)for(let h=0;h<this.length;++h)this.isProtected(h)||this.setCell(h,c);else{this._combined={},this._extendedAttrs={};for(let h=0;h<this.length;++h)this.setCell(h,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const p in c._combined)this._combined[p]=c._combined[p];this._extendedAttrs={};for(const p in c._extendedAttrs)this._extendedAttrs[p]=c._extendedAttrs[p];this.isWrapped=c.isWrapped}clone(){const c=new k(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const p in this._combined)c._combined[p]=this._combined[p];for(const p in this._extendedAttrs)c._extendedAttrs[p]=this._extendedAttrs[p];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,p,h,_,w){const L=c._data;if(w)for(let E=_-1;E>=0;E--){for(let S=0;S<3;S++)this._data[3*(h+E)+S]=L[3*(p+E)+S];268435456&L[3*(p+E)+2]&&(this._extendedAttrs[h+E]=c._extendedAttrs[p+E])}else for(let E=0;E<_;E++){for(let S=0;S<3;S++)this._data[3*(h+E)+S]=L[3*(p+E)+S];268435456&L[3*(p+E)+2]&&(this._extendedAttrs[h+E]=c._extendedAttrs[p+E])}const x=Object.keys(c._combined);for(let E=0;E<x.length;E++){const S=parseInt(x[E],10);S>=p&&(this._combined[S-p+h]=c._combined[S])}}translateToString(c,p,h,_){p=p??0,h=h??this.length,c&&(h=Math.min(h,this.getTrimmedLength())),_&&(_.length=0);let w="";for(;p<h;){const L=this._data[3*p+0],x=2097151&L,E=2097152&L?this._combined[p]:x?(0,m.stringFromCodePoint)(x):f.WHITESPACE_CELL_CHAR;if(w+=E,_)for(let S=0;S<E.length;++S)_.push(p);p+=L>>22||1}return _&&_.push(p),w}}i.BufferLine=k},4841:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,u){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return u*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(d,i)=>{function o(u,g,f){if(g===u.length-1)return u[g].getTrimmedLength();const m=!u[g].hasContent(f-1)&&u[g].getWidth(f-1)===1,v=u[g+1].getWidth(0)===2;return m&&v?f-1:f}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,g,f,m,v){const k=[];for(let y=0;y<u.length-1;y++){let c=y,p=u.get(++c);if(!p.isWrapped)continue;const h=[u.get(y)];for(;c<u.length&&p.isWrapped;)h.push(p),p=u.get(++c);if(m>=y&&m<c){y+=h.length-1;continue}let _=0,w=o(h,_,g),L=1,x=0;for(;L<h.length;){const S=o(h,L,g),D=S-x,B=f-w,R=Math.min(D,B);h[_].copyCellsFrom(h[L],x,w,R,!1),w+=R,w===f&&(_++,w=0),x+=R,x===S&&(L++,x=0),w===0&&_!==0&&h[_-1].getWidth(f-1)===2&&(h[_].copyCellsFrom(h[_-1],f-1,w++,1,!1),h[_-1].setCell(f-1,v))}h[_].replaceCells(w,f,v);let E=0;for(let S=h.length-1;S>0&&(S>_||h[S].getTrimmedLength()===0);S--)E++;E>0&&(k.push(y+h.length-E),k.push(E)),y+=h.length-1}return k},i.reflowLargerCreateNewLayout=function(u,g){const f=[];let m=0,v=g[m],k=0;for(let y=0;y<u.length;y++)if(v===y){const c=g[++m];u.onDeleteEmitter.fire({index:y-k,amount:c}),y+=c-1,k+=c,v=g[++m]}else f.push(y);return{layout:f,countRemoved:k}},i.reflowLargerApplyNewLayout=function(u,g){const f=[];for(let m=0;m<g.length;m++)f.push(u.get(g[m]));for(let m=0;m<f.length;m++)u.set(m,f[m]);u.length=g.length},i.reflowSmallerGetNewLineLengths=function(u,g,f){const m=[],v=u.map((p,h)=>o(u,h,g)).reduce((p,h)=>p+h);let k=0,y=0,c=0;for(;c<v;){if(v-c<f){m.push(v-c);break}k+=f;const p=o(u,y,g);k>p&&(k-=p,y++);const h=u[y].getWidth(k-1)===2;h&&k--;const _=h?f-1:f;m.push(_),c+=_}return m},i.getWrappedLineTrimmedLength=o},5295:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=o(8460),g=o(844),f=o(9092);class m extends g.Disposable{constructor(k,y){super(),this._optionsService=k,this._bufferService=y,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,y){this._normal.resize(k,y),this._alt.resize(k,y),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}i.BufferSet=m},511:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=o(482),g=o(643),f=o(3734);class m extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const y=new m;return y.setFromCharData(k),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[g.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(k[g.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(k[g.CHAR_DATA_CHAR_INDEX].length===2){const c=k[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const p=k[g.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(c-55296)+p-56320+65536|k[g.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=k[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[g.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=k[g.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[g.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=m},643:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=o(8460),g=o(844);class f{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,g.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}i.Marker=f,f._nextId=1},7116:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(d,i)=>{var o,u,g;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(o||(i.C0=o={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(u||(i.C1=u={})),function(f){f.ST=`${o.ESC}\\`}(g||(i.C1_ESCAPED=g={}))},7399:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=o(2584),g={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(f,m,v,k){const y={type:0,cancel:!1,key:void 0},c=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?y.key=m?u.C0.ESC+"OA":u.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?y.key=m?u.C0.ESC+"OD":u.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?y.key=m?u.C0.ESC+"OC":u.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(y.key=m?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:y.key=f.ctrlKey?"\b":u.C0.DEL,f.altKey&&(y.key=u.C0.ESC+y.key);break;case 9:if(f.shiftKey){y.key=u.C0.ESC+"[Z";break}y.key=u.C0.HT,y.cancel=!0;break;case 13:y.key=f.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,y.cancel=!0;break;case 27:y.key=u.C0.ESC,f.altKey&&(y.key=u.C0.ESC+u.C0.ESC),y.cancel=!0;break;case 37:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"D",y.key===u.C0.ESC+"[1;3D"&&(y.key=u.C0.ESC+(v?"b":"[1;5D"))):y.key=m?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"C",y.key===u.C0.ESC+"[1;3C"&&(y.key=u.C0.ESC+(v?"f":"[1;5C"))):y.key=m?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"A",v||y.key!==u.C0.ESC+"[1;3A"||(y.key=u.C0.ESC+"[1;5A")):y.key=m?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(f.metaKey)break;c?(y.key=u.C0.ESC+"[1;"+(c+1)+"B",v||y.key!==u.C0.ESC+"[1;3B"||(y.key=u.C0.ESC+"[1;5B")):y.key=m?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(y.key=u.C0.ESC+"[2~");break;case 46:y.key=c?u.C0.ESC+"[3;"+(c+1)+"~":u.C0.ESC+"[3~";break;case 36:y.key=c?u.C0.ESC+"[1;"+(c+1)+"H":m?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:y.key=c?u.C0.ESC+"[1;"+(c+1)+"F":m?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:f.shiftKey?y.type=2:f.ctrlKey?y.key=u.C0.ESC+"[5;"+(c+1)+"~":y.key=u.C0.ESC+"[5~";break;case 34:f.shiftKey?y.type=3:f.ctrlKey?y.key=u.C0.ESC+"[6;"+(c+1)+"~":y.key=u.C0.ESC+"[6~";break;case 112:y.key=c?u.C0.ESC+"[1;"+(c+1)+"P":u.C0.ESC+"OP";break;case 113:y.key=c?u.C0.ESC+"[1;"+(c+1)+"Q":u.C0.ESC+"OQ";break;case 114:y.key=c?u.C0.ESC+"[1;"+(c+1)+"R":u.C0.ESC+"OR";break;case 115:y.key=c?u.C0.ESC+"[1;"+(c+1)+"S":u.C0.ESC+"OS";break;case 116:y.key=c?u.C0.ESC+"[15;"+(c+1)+"~":u.C0.ESC+"[15~";break;case 117:y.key=c?u.C0.ESC+"[17;"+(c+1)+"~":u.C0.ESC+"[17~";break;case 118:y.key=c?u.C0.ESC+"[18;"+(c+1)+"~":u.C0.ESC+"[18~";break;case 119:y.key=c?u.C0.ESC+"[19;"+(c+1)+"~":u.C0.ESC+"[19~";break;case 120:y.key=c?u.C0.ESC+"[20;"+(c+1)+"~":u.C0.ESC+"[20~";break;case 121:y.key=c?u.C0.ESC+"[21;"+(c+1)+"~":u.C0.ESC+"[21~";break;case 122:y.key=c?u.C0.ESC+"[23;"+(c+1)+"~":u.C0.ESC+"[23~";break;case 123:y.key=c?u.C0.ESC+"[24;"+(c+1)+"~":u.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(v&&!k||!f.altKey||f.metaKey)!v||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?y.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(y.key=u.C0.US),f.key==="@"&&(y.key=u.C0.NUL)):f.keyCode===65&&(y.type=1);else{const p=g[f.keyCode],h=p==null?void 0:p[f.shiftKey?1:0];if(h)y.key=u.C0.ESC+h;else if(f.keyCode>=65&&f.keyCode<=90){const _=f.ctrlKey?f.keyCode-64:f.keyCode+32;let w=String.fromCharCode(_);f.shiftKey&&(w=w.toUpperCase()),y.key=u.C0.ESC+w}else if(f.keyCode===32)y.key=u.C0.ESC+(f.ctrlKey?u.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let _=f.code.slice(3,4);f.shiftKey||(_=_.toLowerCase()),y.key=u.C0.ESC+_,y.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?y.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?y.key=u.C0.NUL:f.keyCode>=51&&f.keyCode<=55?y.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?y.key=u.C0.DEL:f.keyCode===219?y.key=u.C0.ESC:f.keyCode===220?y.key=u.C0.FS:f.keyCode===221&&(y.key=u.C0.GS)}return y}},482:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,u=0,g=o.length){let f="";for(let m=u;m<g;++m){let v=o[m];v>65535?(v-=65536,f+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):f+=String.fromCharCode(v)}return f},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,u){const g=o.length;if(!g)return 0;let f=0,m=0;if(this._interim){const v=o.charCodeAt(m++);56320<=v&&v<=57343?u[f++]=1024*(this._interim-55296)+v-56320+65536:(u[f++]=this._interim,u[f++]=v),this._interim=0}for(let v=m;v<g;++v){const k=o.charCodeAt(v);if(55296<=k&&k<=56319){if(++v>=g)return this._interim=k,f;const y=o.charCodeAt(v);56320<=y&&y<=57343?u[f++]=1024*(k-55296)+y-56320+65536:(u[f++]=k,u[f++]=y)}else k!==65279&&(u[f++]=k)}return f}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,u){const g=o.length;if(!g)return 0;let f,m,v,k,y=0,c=0,p=0;if(this.interim[0]){let w=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let x,E=0;for(;(x=63&this.interim[++E])&&E<4;)L<<=6,L|=x;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,D=S-E;for(;p<D;){if(p>=g)return 0;if(x=o[p++],(192&x)!=128){p--,w=!0;break}this.interim[E++]=x,L<<=6,L|=63&x}w||(S===2?L<128?p--:u[y++]=L:S===3?L<2048||L>=55296&&L<=57343||L===65279||(u[y++]=L):L<65536||L>1114111||(u[y++]=L)),this.interim.fill(0)}const h=g-4;let _=p;for(;_<g;){for(;!(!(_<h)||128&(f=o[_])||128&(m=o[_+1])||128&(v=o[_+2])||128&(k=o[_+3]));)u[y++]=f,u[y++]=m,u[y++]=v,u[y++]=k,_+=4;if(f=o[_++],f<128)u[y++]=f;else if((224&f)==192){if(_>=g)return this.interim[0]=f,y;if(m=o[_++],(192&m)!=128){_--;continue}if(c=(31&f)<<6|63&m,c<128){_--;continue}u[y++]=c}else if((240&f)==224){if(_>=g)return this.interim[0]=f,y;if(m=o[_++],(192&m)!=128){_--;continue}if(_>=g)return this.interim[0]=f,this.interim[1]=m,y;if(v=o[_++],(192&v)!=128){_--;continue}if(c=(15&f)<<12|(63&m)<<6|63&v,c<2048||c>=55296&&c<=57343||c===65279)continue;u[y++]=c}else if((248&f)==240){if(_>=g)return this.interim[0]=f,y;if(m=o[_++],(192&m)!=128){_--;continue}if(_>=g)return this.interim[0]=f,this.interim[1]=m,y;if(v=o[_++],(192&v)!=128){_--;continue}if(_>=g)return this.interim[0]=f,this.interim[1]=m,this.interim[2]=v,y;if(k=o[_++],(192&k)!=128){_--;continue}if(c=(7&f)<<18|(63&m)<<12|(63&v)<<6|63&k,c<65536||c>1114111)continue;u[y++]=c}}return y}}},225:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const u=o(1480),g=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;i.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let v=0;v<g.length;++v)m.fill(0,g[v][0],g[v][1]+1)}}wcwidth(v){return v<32?0:v<127?1:v<65536?m[v]:function(k,y){let c,p=0,h=y.length-1;if(k<y[0][0]||k>y[h][1])return!1;for(;h>=p;)if(c=p+h>>1,k>y[c][1])p=c+1;else{if(!(k<y[c][0]))return!0;h=c-1}return!1}(v,f)?0:v>=131072&&v<=196605||v>=196608&&v<=262141?2:1}charProperties(v,k){let y=this.wcwidth(v),c=y===0&&k!==0;if(c){const p=u.UnicodeService.extractWidth(k);p===0?c=!1:p>y&&(y=p)}return u.UnicodeService.createPropertyValue(0,y,c)}}},5981:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=o(8460),g=o(844);class f extends g.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(k)}_innerWrite(v=0,k=!0){const y=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],p=this._action(c,k);if(p){const _=w=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,w)):this._innerWrite(y,w);return void p.catch(w=>(queueMicrotask(()=>{throw w}),Promise.resolve(!1))).then(_)}const h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=f},5941:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function g(f,m){const v=f.toString(16),k=v.length<2?"0"+v:v;switch(m){case 4:return v[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}i.parseColor=function(f){if(!f)return;let m=f.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const v=o.exec(m);if(v){const k=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/k*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/k*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/k*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),u.exec(m)&&[3,6,9,12].includes(m.length))){const v=m.length/3,k=[0,0,0];for(let y=0;y<3;++y){const c=parseInt(m.slice(v*y,v*y+v),16);k[y]=v===1?c<<4:v===2?c:v===3?c>>4:c>>8}return k}},i.toRgbString=function(f,m=16){const[v,k,y]=f;return`rgb:${g(v,m)}/${g(k,m)}/${g(y,m)}`}},5770:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=o(482),g=o(8742),f=o(5770),m=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(k,y){this._handlers[k]===void 0&&(this._handlers[k]=[]);const c=this._handlers[k];return c.push(y),{dispose:()=>{const p=c.indexOf(y);p!==-1&&c.splice(p,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(k,y){if(this.reset(),this._ident=k,this._active=this._handlers[k]||m,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(k,y,c){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(k,y,c);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(k,y,c))}unhook(k,y=!0){if(this._active.length){let c=!1,p=this._active.length-1,h=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,c=y,h=this._stack.fallThrough,this._stack.paused=!1),!h&&c===!1){for(;p>=0&&(c=this._active[p].unhook(k),c!==!0);p--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,c;p--}for(;p>=0;p--)if(c=this._active[p].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",k);this._active=m,this._ident=0}};const v=new g.Params;v.addParam(0),i.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=v,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():v,this._data="",this._hitLimit=!1}put(k,y,c){this._hitLimit||(this._data+=(0,u.utf32ToString)(k,y,c),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let y=!1;if(this._hitLimit)y=!1;else if(k&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(c=>(this._params=v,this._data="",this._hitLimit=!1,c));return this._params=v,this._data="",this._hitLimit=!1,y}}},2015:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=o(844),g=o(8742),f=o(6242),m=o(6351);class v{constructor(p){this.table=new Uint8Array(p)}setDefault(p,h){this.table.fill(p<<4|h)}add(p,h,_,w){this.table[h<<8|p]=_<<4|w}addMany(p,h,_,w){for(let L=0;L<p.length;L++)this.table[h<<8|p[L]]=_<<4|w}}i.TransitionTable=v;const k=160;i.VT500_TRANSITION_TABLE=function(){const c=new v(4095),p=Array.apply(null,Array(256)).map((E,S)=>S),h=(E,S)=>p.slice(E,S),_=h(32,127),w=h(0,24);w.push(25),w.push.apply(w,h(28,32));const L=h(0,14);let x;for(x in c.setDefault(1,0),c.addMany(_,0,2,0),L)c.addMany([24,26,153,154],x,3,0),c.addMany(h(128,144),x,3,0),c.addMany(h(144,152),x,3,0),c.add(156,x,0,0),c.add(27,x,11,1),c.add(157,x,4,8),c.addMany([152,158,159],x,0,7),c.add(155,x,11,3),c.add(144,x,11,9);return c.addMany(w,0,3,0),c.addMany(w,1,3,1),c.add(127,1,0,1),c.addMany(w,8,0,8),c.addMany(w,3,3,3),c.add(127,3,0,3),c.addMany(w,4,3,4),c.add(127,4,0,4),c.addMany(w,6,3,6),c.addMany(w,5,3,5),c.add(127,5,0,5),c.addMany(w,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(_,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(h(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(_,7,0,7),c.addMany(w,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(h(64,127),3,7,0),c.addMany(h(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(h(48,60),4,8,4),c.addMany(h(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(h(32,64),6,0,6),c.add(127,6,0,6),c.addMany(h(64,127),6,0,0),c.addMany(h(32,48),3,9,5),c.addMany(h(32,48),5,9,5),c.addMany(h(48,64),5,0,6),c.addMany(h(64,127),5,7,0),c.addMany(h(32,48),4,9,5),c.addMany(h(32,48),1,9,2),c.addMany(h(32,48),2,9,2),c.addMany(h(48,127),2,10,0),c.addMany(h(48,80),1,10,0),c.addMany(h(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(h(96,127),1,10,0),c.add(80,1,11,9),c.addMany(w,9,0,9),c.add(127,9,0,9),c.addMany(h(28,32),9,0,9),c.addMany(h(32,48),9,9,12),c.addMany(h(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(w,11,0,11),c.addMany(h(32,128),11,0,11),c.addMany(h(28,32),11,0,11),c.addMany(w,10,0,10),c.add(127,10,0,10),c.addMany(h(28,32),10,0,10),c.addMany(h(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(h(32,48),10,9,12),c.addMany(w,12,0,12),c.add(127,12,0,12),c.addMany(h(28,32),12,0,12),c.addMany(h(32,48),12,9,12),c.addMany(h(48,64),12,0,11),c.addMany(h(64,127),12,12,13),c.addMany(h(64,127),10,12,13),c.addMany(h(64,127),9,12,13),c.addMany(w,13,13,13),c.addMany(_,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(k,0,2,0),c.add(k,8,5,8),c.add(k,6,0,6),c.add(k,11,0,11),c.add(k,13,13,13),c}();class y extends u.Disposable{constructor(p=i.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new g.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(h,_,w)=>{},this._executeHandlerFb=h=>{},this._csiHandlerFb=(h,_)=>{},this._escHandlerFb=h=>{},this._errorHandlerFb=h=>h,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(p,h=[64,126]){let _=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=p.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let L=0;L<p.intermediates.length;++L){const x=p.intermediates.charCodeAt(L);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=x}}if(p.final.length!==1)throw new Error("final must be a single byte");const w=p.final.charCodeAt(0);if(h[0]>w||w>h[1])throw new Error(`final must be in range ${h[0]} .. ${h[1]}`);return _<<=8,_|=w,_}identToString(p){const h=[];for(;p;)h.push(String.fromCharCode(255&p)),p>>=8;return h.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,h){const _=this._identifier(p,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);const w=this._escHandlers[_];return w.push(h),{dispose:()=>{const L=w.indexOf(h);L!==-1&&w.splice(L,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,h){this._executeHandlers[p.charCodeAt(0)]=h}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,h){const _=this._identifier(p);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);const w=this._csiHandlers[_];return w.push(h),{dispose:()=>{const L=w.indexOf(h);L!==-1&&w.splice(L,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,h){return this._dcsParser.registerHandler(this._identifier(p),h)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,h){return this._oscParser.registerHandler(p,h)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,h,_,w,L){this._parseStack.state=p,this._parseStack.handlers=h,this._parseStack.handlerPos=_,this._parseStack.transition=w,this._parseStack.chunkPos=L}parse(p,h,_){let w,L=0,x=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let D=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&D>-1){for(;D>=0&&(w=S[D](this._params),w!==!0);D--)if(w instanceof Promise)return this._parseStack.handlerPos=D,w}this._parseStack.handlers=[];break;case 4:if(_===!1&&D>-1){for(;D>=0&&(w=S[D](),w!==!0);D--)if(w instanceof Promise)return this._parseStack.handlerPos=D,w}this._parseStack.handlers=[];break;case 6:if(L=p[this._parseStack.chunkPos],w=this._dcsParser.unhook(L!==24&&L!==26,_),w)return w;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(L=p[this._parseStack.chunkPos],w=this._oscParser.end(L!==24&&L!==26,_),w)return w;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=E;S<h;++S){switch(L=p[S],x=this._transitions.table[this.currentState<<8|(L<160?L:k)],x>>4){case 2:for(let A=S+1;;++A){if(A>=h||(L=p[A])<32||L>126&&L<k){this._printHandler(p,S,A),S=A-1;break}if(++A>=h||(L=p[A])<32||L>126&&L<k){this._printHandler(p,S,A),S=A-1;break}if(++A>=h||(L=p[A])<32||L>126&&L<k){this._printHandler(p,S,A),S=A-1;break}if(++A>=h||(L=p[A])<32||L>126&&L<k){this._printHandler(p,S,A),S=A-1;break}}break;case 3:this._executeHandlers[L]?this._executeHandlers[L]():this._executeHandlerFb(L),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:L,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const D=this._csiHandlers[this._collect<<8|L];let B=D?D.length-1:-1;for(;B>=0&&(w=D[B](this._params),w!==!0);B--)if(w instanceof Promise)return this._preserveStack(3,D,B,x,S),w;B<0&&this._csiHandlerFb(this._collect<<8|L,this._params),this.precedingJoinState=0;break;case 8:do switch(L){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(L-48)}while(++S<h&&(L=p[S])>47&&L<60);S--;break;case 9:this._collect<<=8,this._collect|=L;break;case 10:const R=this._escHandlers[this._collect<<8|L];let P=R?R.length-1:-1;for(;P>=0&&(w=R[P](),w!==!0);P--)if(w instanceof Promise)return this._preserveStack(4,R,P,x,S),w;P<0&&this._escHandlerFb(this._collect<<8|L),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|L,this._params);break;case 13:for(let A=S+1;;++A)if(A>=h||(L=p[A])===24||L===26||L===27||L>127&&L<k){this._dcsParser.put(p,S,A),S=A-1;break}break;case 14:if(w=this._dcsParser.unhook(L!==24&&L!==26),w)return this._preserveStack(6,[],0,x,S),w;L===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=S+1;;A++)if(A>=h||(L=p[A])<32||L>127&&L<k){this._oscParser.put(p,S,A),S=A-1;break}break;case 6:if(w=this._oscParser.end(L!==24&&L!==26),w)return this._preserveStack(5,[],0,x,S),w;L===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}i.EscapeSequenceParser=y},6242:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=o(5770),g=o(482),f=[];i.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,v){this._handlers[m]===void 0&&(this._handlers[m]=[]);const k=this._handlers[m];return k.push(v),{dispose:()=>{const y=k.indexOf(v);y!==-1&&k.splice(y,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,v,k){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(m,v,k);else this._handlerFb(this._id,"PUT",(0,g.utf32ToString)(m,v,k))}start(){this.reset(),this._state=1}put(m,v,k){if(this._state!==3){if(this._state===1)for(;v<k;){const y=m[v++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&k-v>0&&this._put(m,v,k)}}end(m,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,y=this._active.length-1,c=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,k=v,c=this._stack.fallThrough,this._stack.paused=!1),!c&&k===!1){for(;y>=0&&(k=this._active[y].end(m),k!==!0);y--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,k;y--}for(;y>=0;y--)if(k=this._active[y].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",m);this._active=f,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,v,k){this._hitLimit||(this._data+=(0,g.utf32ToString)(m,v,k),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let v=!1;if(this._hitLimit)v=!1;else if(m&&(v=this._handler(this._data),v instanceof Promise))return v.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,v}}},8742:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class u{static fromArray(f){const m=new u;if(!f.length)return m;for(let v=Array.isArray(f[0])?1:0;v<f.length;++v){const k=f[v];if(Array.isArray(k))for(let y=0;y<k.length;++y)m.addSubParam(k[y]);else m.addParam(k)}return m}constructor(f=32,m=32){if(this.maxLength=f,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new u(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let m=0;m<this.length;++m){f.push(this.params[m]);const v=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];k-v>0&&f.push(Array.prototype.slice.call(this._subParams,v,k))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>o?o:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>o?o:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const m=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];return v-m>0?this._subParams.subarray(m,v):null}getSubParamsAll(){const f={};for(let m=0;m<this.length;++m){const v=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];k-v>0&&(f[m]=this._subParams.slice(v,k))}return f}addDigit(f){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,k=v[m-1];v[m-1]=~k?Math.min(10*k+f,o):f}}i.Params=u},5741:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,u){const g={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(g),u.dispose=()=>this._wrappedAddonDispose(g),u.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let u=-1;for(let g=0;g<this._addons.length;g++)if(this._addons[g]===o){u=g;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(u,1)}}},8771:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=o(3785),g=o(511);i.BufferApiView=class{constructor(f,m){this._buffer=f,this.type=m}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const m=this._buffer.lines.get(f);if(m)return new u.BufferLineApiView(m)}getNullCell(){return new g.CellData}}},3785:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=o(511);i.BufferLineApiView=class{constructor(g){this._line=g}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(g,f){if(!(g<0||g>=this._line.length))return f?(this._line.loadCell(g,f),f):this._line.loadCell(g,new u.CellData)}translateToString(g,f,m){return this._line.translateToString(g,f,m)}}},8285:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=o(8771),g=o(8460),f=o(844);class m extends f.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new g.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=m},7975:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,u){return this._core.registerCsiHandler(o,g=>u(g.toArray()))}addCsiHandler(o,u){return this.registerCsiHandler(o,u)}registerDcsHandler(o,u){return this._core.registerDcsHandler(o,(g,f)=>u(g,f.toArray()))}addDcsHandler(o,u){return this.registerDcsHandler(o,u)}registerEscHandler(o,u){return this._core.registerEscHandler(o,u)}addEscHandler(o,u){return this.registerEscHandler(o,u)}registerOscHandler(o,u){return this._core.registerOscHandler(o,u)}addOscHandler(o,u){return this.registerOscHandler(o,u)}}},7090:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(d,i,o){var u=this&&this.__decorate||function(c,p,h,_){var w,L=arguments.length,x=L<3?p:_===null?_=Object.getOwnPropertyDescriptor(p,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,p,h,_);else for(var E=c.length-1;E>=0;E--)(w=c[E])&&(x=(L<3?w(x):L>3?w(p,h,x):w(p,h))||x);return L>3&&x&&Object.defineProperty(p,h,x),x},g=this&&this.__param||function(c,p){return function(h,_){p(h,_,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const f=o(8460),m=o(844),v=o(5295),k=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let y=i.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(c,this))}resize(c,p){this.cols=c,this.rows=p,this.buffers.resize(c,p),this._onResize.fire({cols:c,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,p=!1){const h=this.buffer;let _;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===c.fg&&_.getBg(0)===c.bg||(_=h.getBlankLine(c,p),this._cachedBlankLine=_),_.isWrapped=p;const w=h.ybase+h.scrollTop,L=h.ybase+h.scrollBottom;if(h.scrollTop===0){const x=h.lines.isFull;L===h.lines.length-1?x?h.lines.recycle().copyFrom(_):h.lines.push(_.clone()):h.lines.splice(L+1,0,_.clone()),x?this.isUserScrolling&&(h.ydisp=Math.max(h.ydisp-1,0)):(h.ybase++,this.isUserScrolling||h.ydisp++)}else{const x=L-w+1;h.lines.shiftElements(w+1,x-1,-1),h.lines.set(L,_.clone())}this.isUserScrolling||(h.ydisp=h.ybase),this._onScroll.fire(h.ydisp)}scrollLines(c,p,h){const _=this.buffer;if(c<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else c+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);const w=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+c,_.ybase),0),w!==_.ydisp&&(p||this._onScroll.fire(_.ydisp))}};i.BufferService=y=u([g(0,k.IOptionsService)],y)},7994:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,u){this._charsets[o]=u,this.glevel===o&&(this.charset=u)}}},1753:function(d,i,o){var u=this&&this.__decorate||function(_,w,L,x){var E,S=arguments.length,D=S<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,L):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,w,L,x);else for(var B=_.length-1;B>=0;B--)(E=_[B])&&(D=(S<3?E(D):S>3?E(w,L,D):E(w,L))||D);return S>3&&D&&Object.defineProperty(w,L,D),D},g=this&&this.__param||function(_,w){return function(L,x){w(L,x,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const f=o(2585),m=o(8460),v=o(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function y(_,w){let L=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(L|=64,L|=_.action):(L|=3&_.button,4&_.button&&(L|=64),8&_.button&&(L|=128),_.action===32?L|=32:_.action!==0||w||(L|=3)),L}const c=String.fromCharCode,p={DEFAULT:_=>{const w=[y(_,!1)+32,_.col+32,_.row+32];return w[0]>255||w[1]>255||w[2]>255?"":`\x1B[M${c(w[0])}${c(w[1])}${c(w[2])}`},SGR:_=>{const w=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${y(_,!0)};${_.col};${_.row}${w}`},SGR_PIXELS:_=>{const w=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${y(_,!0)};${_.x};${_.y}${w}`}};let h=i.CoreMouseService=class extends v.Disposable{constructor(_,w){super(),this._bufferService=_,this._coreService=w,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const L of Object.keys(k))this.addProtocol(L,k[L]);for(const L of Object.keys(p))this.addEncoding(L,p[L]);this.reset()}addProtocol(_,w){this._protocols[_]=w}addEncoding(_,w){this._encodings[_]=w}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;const w=this._encodings[this._activeEncoding](_);return w&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(w):this._coreService.triggerDataEvent(w,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,w,L){if(L){if(_.x!==w.x||_.y!==w.y)return!1}else if(_.col!==w.col||_.row!==w.row)return!1;return _.button===w.button&&_.action===w.action&&_.ctrl===w.ctrl&&_.alt===w.alt&&_.shift===w.shift}};i.CoreMouseService=h=u([g(0,f.IBufferService),g(1,f.ICoreService)],h)},6975:function(d,i,o){var u=this&&this.__decorate||function(h,_,w,L){var x,E=arguments.length,S=E<3?_:L===null?L=Object.getOwnPropertyDescriptor(_,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,_,w,L);else for(var D=h.length-1;D>=0;D--)(x=h[D])&&(S=(E<3?x(S):E>3?x(_,w,S):x(_,w))||S);return E>3&&S&&Object.defineProperty(_,w,S),S},g=this&&this.__param||function(h,_){return function(w,L){_(w,L,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const f=o(1439),m=o(8460),v=o(844),k=o(2585),y=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=i.CoreService=class extends v.Disposable{constructor(h,_,w){super(),this._bufferService=h,this._logService=_,this._optionsService=w,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(y),this.decPrivateModes=(0,f.clone)(c)}reset(){this.modes=(0,f.clone)(y),this.decPrivateModes=(0,f.clone)(c)}triggerDataEvent(h,_=!1){if(this._optionsService.rawOptions.disableStdin)return;const w=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&w.ybase!==w.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${h}"`,()=>h.split("").map(L=>L.charCodeAt(0))),this._onData.fire(h)}triggerBinaryEvent(h){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${h}"`,()=>h.split("").map(_=>_.charCodeAt(0))),this._onBinary.fire(h))}};i.CoreService=p=u([g(0,k.IBufferService),g(1,k.ILogService),g(2,k.IOptionsService)],p)},9074:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=o(8055),g=o(8460),f=o(844),m=o(6106);let v=0,k=0;class y extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(h=>h==null?void 0:h.marker.line),this._onDecorationRegistered=this.register(new g.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new g.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(h){if(h.marker.isDisposed)return;const _=new c(h);if(_){const w=_.marker.onDispose(()=>_.dispose());_.onDispose(()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),w.dispose())}),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(const h of this._decorations.values())h.dispose();this._decorations.clear()}*getDecorationsAtCell(h,_,w){let L=0,x=0;for(const E of this._decorations.getKeyIterator(_))L=E.options.x??0,x=L+(E.options.width??1),h>=L&&h<x&&(!w||(E.options.layer??"bottom")===w)&&(yield E)}forEachDecorationAtCell(h,_,w,L){this._decorations.forEachByKey(_,x=>{v=x.options.x??0,k=v+(x.options.width??1),h>=v&&h<k&&(!w||(x.options.layer??"bottom")===w)&&L(x)})}}i.DecorationService=y;class c extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(h){super(),this.options=h,this.onRenderEmitter=this.register(new g.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new g.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=h.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=o(2585),g=o(8343);class f{constructor(...v){this._entries=new Map;for(const[k,y]of v)this.set(k,y)}set(v,k){const y=this._entries.get(v);return this._entries.set(v,k),y}forEach(v){for(const[k,y]of this._entries.entries())v(k,y)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}i.ServiceCollection=f,i.InstantiationService=class{constructor(){this._services=new f,this._services.set(u.IInstantiationService,this)}setService(m,v){this._services.set(m,v)}getService(m){return this._services.get(m)}createInstance(m,...v){const k=(0,g.getServiceDependencies)(m).sort((p,h)=>p.index-h.index),y=[];for(const p of k){const h=this._services.get(p.id);if(!h)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${p.id}.`);y.push(h)}const c=k.length>0?k[0].index:v.length;if(v.length!==c)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${c+1} conflicts with ${v.length} static arguments`);return new m(...v,...y)}}},7866:function(d,i,o){var u=this&&this.__decorate||function(c,p,h,_){var w,L=arguments.length,x=L<3?p:_===null?_=Object.getOwnPropertyDescriptor(p,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,p,h,_);else for(var E=c.length-1;E>=0;E--)(w=c[E])&&(x=(L<3?w(x):L>3?w(p,h,x):w(p,h))||x);return L>3&&x&&Object.defineProperty(p,h,x),x},g=this&&this.__param||function(c,p){return function(h,_){p(h,_,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const f=o(844),m=o(2585),v={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let k,y=i.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let p=0;p<c.length;p++)typeof c[p]=="function"&&(c[p]=c[p]())}_log(c,p,h){this._evalLazyOptionalParams(h),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...h)}trace(c,...p){var h;this._logLevel<=m.LogLevelEnum.TRACE&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.trace.bind(this._optionsService.options.logger))??console.log,c,p)}debug(c,...p){var h;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.debug.bind(this._optionsService.options.logger))??console.log,c,p)}info(c,...p){var h;this._logLevel<=m.LogLevelEnum.INFO&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.info.bind(this._optionsService.options.logger))??console.info,c,p)}warn(c,...p){var h;this._logLevel<=m.LogLevelEnum.WARN&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.warn.bind(this._optionsService.options.logger))??console.warn,c,p)}error(c,...p){var h;this._logLevel<=m.LogLevelEnum.ERROR&&this._log(((h=this._optionsService.options.logger)==null?void 0:h.error.bind(this._optionsService.options.logger))??console.error,c,p)}};i.LogService=y=u([g(0,m.IOptionsService)],y),i.setTraceLogger=function(c){k=c},i.traceCall=function(c,p,h){if(typeof h.value!="function")throw new Error("not supported");const _=h.value;h.value=function(...w){if(k.logLevel!==m.LogLevelEnum.TRACE)return _.apply(this,w);k.trace(`GlyphRenderer#${_.name}(${w.map(x=>JSON.stringify(x)).join(", ")})`);const L=_.apply(this,w);return k.trace(`GlyphRenderer#${_.name} return`,L),L}}},7302:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=o(8460),g=o(844),f=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends g.Disposable{constructor(y){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c={...i.DEFAULT_OPTIONS};for(const p in y)if(p in c)try{const h=y[p];c[p]=this._sanitizeAndValidateOption(p,h)}catch(h){console.error(h)}this.rawOptions=c,this.options={...c},this._setupOptions(),this.register((0,g.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(y,c){return this.onOptionChange(p=>{p===y&&c(this.rawOptions[y])})}onMultipleOptionChange(y,c){return this.onOptionChange(p=>{y.indexOf(p)!==-1&&c()})}_setupOptions(){const y=p=>{if(!(p in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},c=(p,h)=>{if(!(p in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);h=this._sanitizeAndValidateOption(p,h),this.rawOptions[p]!==h&&(this.rawOptions[p]=h,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const h={get:y.bind(this,p),set:c.bind(this,p)};Object.defineProperty(this.options,p,h)}}_sanitizeAndValidateOption(y,c){switch(y){case"cursorStyle":if(c||(c=i.DEFAULT_OPTIONS[y]),!function(p){return p==="block"||p==="underline"||p==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${y}`);break;case"wordSeparator":c||(c=i.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=m.includes(c)?c:i.DEFAULT_OPTIONS[y];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${y} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${y} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}i.OptionsService=v},2660:function(d,i,o){var u=this&&this.__decorate||function(v,k,y,c){var p,h=arguments.length,_=h<3?k:c===null?c=Object.getOwnPropertyDescriptor(k,y):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,k,y,c);else for(var w=v.length-1;w>=0;w--)(p=v[w])&&(_=(h<3?p(_):h>3?p(k,y,_):p(k,y))||_);return h>3&&_&&Object.defineProperty(k,y,_),_},g=this&&this.__param||function(v,k){return function(y,c){k(y,c,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const f=o(2585);let m=i.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const k=this._bufferService.buffer;if(v.id===void 0){const w=k.addMarker(k.ybase+k.y),L={data:v,id:this._nextId++,lines:[w]};return w.onDispose(()=>this._removeMarkerFromLink(L,w)),this._dataByLinkId.set(L.id,L),L.id}const y=v,c=this._getEntryIdKey(y),p=this._entriesWithId.get(c);if(p)return this.addLineToLink(p.id,k.ybase+k.y),p.id;const h=k.addMarker(k.ybase+k.y),_={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(_,h)),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(v,k){const y=this._dataByLinkId.get(v);if(y&&y.lines.every(c=>c.line!==k)){const c=this._bufferService.buffer.addMarker(k);y.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(y,c))}}getLinkData(v){var k;return(k=this._dataByLinkId.get(v))==null?void 0:k.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,k){const y=v.lines.indexOf(k);y!==-1&&(v.lines.splice(y,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};i.OscLinkService=m=u([g(0,f.IBufferService)],m)},8343:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(g){return g[u]||[]},i.createDecorator=function(g){if(i.serviceRegistry.has(g))return i.serviceRegistry.get(g);const f=function(m,v,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,c,p){c[o]===c?c[u].push({id:y,index:p}):(c[u]=[{id:y,index:p}],c[o]=c)})(f,m,k)};return f.toString=()=>g,i.serviceRegistry.set(g,f),f}},2585:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=o(8343);var g;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(g||(i.LogLevelEnum=g={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(d,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=o(8460),g=o(225);class f{static extractShouldJoin(v){return(1&v)!=0}static extractWidth(v){return v>>1&3}static extractCharKind(v){return v>>3}static createPropertyValue(v,k,y=!1){return(16777215&v)<<3|(3&k)<<1|(y?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const v=new g.UnicodeV6;this.register(v),this._active=v.version,this._activeProvider=v}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(v){if(!this._providers[v])throw new Error(`unknown Unicode version "${v}"`);this._active=v,this._activeProvider=this._providers[v],this._onChange.fire(v)}register(v){this._providers[v.version]=v}wcwidth(v){return this._activeProvider.wcwidth(v)}getStringCellWidth(v){let k=0,y=0;const c=v.length;for(let p=0;p<c;++p){let h=v.charCodeAt(p);if(55296<=h&&h<=56319){if(++p>=c)return k+this.wcwidth(h);const L=v.charCodeAt(p);56320<=L&&L<=57343?h=1024*(h-55296)+L-56320+65536:k+=this.wcwidth(L)}const _=this.charProperties(h,y);let w=f.extractWidth(_);f.extractShouldJoin(_)&&(w-=f.extractWidth(y)),k+=w,y=_}return k}charProperties(v,k){return this._activeProvider.charProperties(v,k)}}i.UnicodeService=f}},s={};function a(d){var i=s[d];if(i!==void 0)return i.exports;var o=s[d]={exports:{}};return t[d].call(o.exports,o,o.exports,a),o.exports}var b={};return(()=>{var d=b;Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;const i=a(9042),o=a(3236),u=a(844),g=a(5741),f=a(8285),m=a(7975),v=a(7090),k=["cols","rows"];class y extends u.Disposable{constructor(p){super(),this._core=this.register(new o.Terminal(p)),this._addonManager=this.register(new g.AddonManager),this._publicOptions={...this._core.options};const h=w=>this._core.options[w],_=(w,L)=>{this._checkReadonlyOptions(w),this._core.options[w]=L};for(const w in this._core.options){const L={get:h.bind(this,w),set:_.bind(this,w)};Object.defineProperty(this._publicOptions,w,L)}}_checkReadonlyOptions(p){if(k.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let h="none";switch(this._core.coreMouseService.activeProtocol){case"X10":h="x10";break;case"VT200":h="vt200";break;case"DRAG":h="drag";break;case"ANY":h="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:h,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const h in p)this._publicOptions[h]=p[h]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,h=!0){this._core.input(p,h)}resize(p,h){this._verifyIntegers(p,h),this._core.resize(p,h)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,h,_){this._verifyIntegers(p,h,_),this._core.select(p,h,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,h){this._verifyIntegers(p,h),this._core.selectLines(p,h)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,h){this._core.write(p,h)}writeln(p,h){this._core.write(p),this._core.write(`\r
`,h)}paste(p){this._core.paste(p)}refresh(p,h){this._verifyIntegers(p,h),this._core.refresh(p,h)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return i}_verifyIntegers(...p){for(const h of p)if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const h of p)if(h&&(h===1/0||isNaN(h)||h%1!=0||h<0))throw new Error("This API only accepts positive integers")}}d.Terminal=y})(),b})())})(ro);var El=ro.exports,so={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(self,()=>(()=>{var t={};return(()=>{var s=t;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const b=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(b._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,b=a._renderService.dimensions;if(b.css.cell.width===0||b.css.cell.height===0)return;const d=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),u=Math.max(0,parseInt(i.getPropertyValue("width"))),g=window.getComputedStyle(this._terminal.element),f=o-(parseInt(g.getPropertyValue("padding-top"))+parseInt(g.getPropertyValue("padding-bottom"))),m=u-(parseInt(g.getPropertyValue("padding-right"))+parseInt(g.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(m/b.css.cell.width)),rows:Math.max(1,Math.floor(f/b.css.cell.height))}}}})(),t})())})(so);var Ll=so.exports,no={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(self,()=>(()=>{var t={6:(d,i)=>{function o(g){try{const f=new URL(g),m=f.password&&f.username?`${f.protocol}//${f.username}:${f.password}@${f.host}`:f.username?`${f.protocol}//${f.username}@${f.host}`:`${f.protocol}//${f.host}`;return g.toLocaleLowerCase().startsWith(m.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(g,f,m,v={}){this._terminal=g,this._regex=f,this._handler=m,this._options=v}provideLinks(g,f){const m=u.computeLink(g,this._regex,this._terminal,this._handler);f(this._addCallbacks(m))}_addCallbacks(g){return g.map(f=>(f.leave=this._options.leave,f.hover=(m,v)=>{if(this._options.hover){const{range:k}=f;this._options.hover(m,v,k)}},f))}};class u{static computeLink(f,m,v,k){const y=new RegExp(m.source,(m.flags||"")+"g"),[c,p]=u._getWindowedLineStrings(f-1,v),h=c.join("");let _;const w=[];for(;_=y.exec(h);){const L=_[0];if(!o(L))continue;const[x,E]=u._mapStrIdx(v,p,0,_.index),[S,D]=u._mapStrIdx(v,x,E,L.length);if(x===-1||E===-1||S===-1||D===-1)continue;const B={start:{x:E+1,y:x+1},end:{x:D,y:S+1}};w.push({range:B,text:L,activate:k})}return w}static _getWindowedLineStrings(f,m){let v,k=f,y=f,c=0,p="";const h=[];if(v=m.buffer.active.getLine(f)){const _=v.translateToString(!0);if(v.isWrapped&&_[0]!==" "){for(c=0;(v=m.buffer.active.getLine(--k))&&c<2048&&(p=v.translateToString(!0),c+=p.length,h.push(p),v.isWrapped&&p.indexOf(" ")===-1););h.reverse()}for(h.push(_),c=0;(v=m.buffer.active.getLine(++y))&&v.isWrapped&&c<2048&&(p=v.translateToString(!0),c+=p.length,h.push(p),p.indexOf(" ")===-1););}return[h,k]}static _mapStrIdx(f,m,v,k){const y=f.buffer.active,c=y.getNullCell();let p=v;for(;k;){const h=y.getLine(m);if(!h)return[-1,-1];for(let _=p;_<h.length;++_){h.getCell(_,c);const w=c.getChars();if(c.getWidth()&&(k-=w.length||1,_===h.length-1&&w==="")){const L=y.getLine(m+1);L&&L.isWrapped&&(L.getCell(0,c),c.getWidth()===2&&(k+=1))}if(k<0)return[m,_]}m++,p=0}return[m,p]}}i.LinkComputer=u}},s={};function a(d){var i=s[d];if(i!==void 0)return i.exports;var o=s[d]={exports:{}};return t[d](o,o.exports,a),o.exports}var b={};return(()=>{var d=b;Object.defineProperty(d,"__esModule",{value:!0}),d.WebLinksAddon=void 0;const i=a(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(g,f){const m=window.open();if(m){try{m.opener=null}catch{}m.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}d.WebLinksAddon=class{constructor(g=u,f={}){this._handler=g,this._options=f}activate(g){this._terminal=g;const f=this._options,m=f.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,m,this._handler,f))}dispose(){var g;(g=this._linkProvider)==null||g.dispose()}}})(),b})())})(no);var Dl=no.exports;function Ti(r){let e,t,s,a,b,d,i,o,u,g,f,m=r[1].name+"",v,k,y,c=Ii(r[1].size)+"",p,h,_,w,L,x,E,S=r[3]&&Bi(r),D=r[2]==="pending"&&Ai(r),B=r[2]==="accepting"&&Ri(),R=r[2]==="completed"&&Oi(r);return{c(){e=C("div"),t=C("div"),s=C("div"),s.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',a=O(),b=C("div"),d=C("div"),i=C("div"),o=C("span"),o.textContent="📄",u=O(),g=C("div"),f=C("span"),v=J(m),k=O(),y=C("span"),p=J(c),h=J(" 字节"),_=O(),w=C("div"),S&&S.c(),L=O(),D&&D.c(),x=O(),B&&B.c(),E=O(),R&&R.c(),n(s,"class","zmodem-download-header"),n(o,"class","zmodem-download-icon"),n(f,"class","zmodem-download-name"),n(y,"class","zmodem-download-size"),n(g,"class","zmodem-download-details"),n(i,"class","zmodem-download-file"),n(d,"class","zmodem-download-info"),n(w,"class","zmodem-download-actions"),n(b,"class","zmodem-download-body"),n(t,"class","zmodem-download-content"),n(e,"class","zmodem-download-modal")},m(P,A){N(P,e,A),l(e,t),l(t,s),l(t,a),l(t,b),l(b,d),l(d,i),l(i,o),l(i,u),l(i,g),l(g,f),l(f,v),l(g,k),l(g,y),l(y,p),l(y,h),l(b,_),l(b,w),S&&S.m(w,null),l(w,L),D&&D.m(w,null),l(w,x),B&&B.m(w,null),l(w,E),R&&R.m(w,null)},p(P,A){A[0]&2&&m!==(m=P[1].name+"")&&he(v,m),A[0]&2&&c!==(c=Ii(P[1].size)+"")&&he(p,c),P[3]?S?S.p(P,A):(S=Bi(P),S.c(),S.m(w,L)):S&&(S.d(1),S=null),P[2]==="pending"?D?D.p(P,A):(D=Ai(P),D.c(),D.m(w,x)):D&&(D.d(1),D=null),P[2]==="accepting"?B||(B=Ri(),B.c(),B.m(w,E)):B&&(B.d(1),B=null),P[2]==="completed"?R?R.p(P,A):(R=Oi(P),R.c(),R.m(w,null)):R&&(R.d(1),R=null)},d(P){P&&W(e),S&&S.d(),D&&D.d(),B&&B.d(),R&&R.d()}}}function Bi(r){let e,t,s;return{c(){e=C("div"),t=J("❌ "),s=J(r[3]),n(e,"class","zmodem-error-message")},m(a,b){N(a,e,b),l(e,t),l(e,s)},p(a,b){b[0]&8&&he(s,a[3])},d(a){a&&W(e)}}}function Ai(r){let e,t,s,a,b,d,i,o;return{c(){e=C("p"),e.textContent="服务器正在发送文件，是否接收？",t=O(),s=C("div"),a=C("button"),a.textContent="拒绝",b=O(),d=C("button"),d.textContent="接收文件",n(e,"class","zmodem-download-prompt"),n(a,"class","zmodem-download-btn zmodem-btn-reject"),n(d,"class","zmodem-download-btn zmodem-btn-accept"),n(s,"class","zmodem-download-buttons")},m(u,g){N(u,e,g),N(u,t,g),N(u,s,g),l(s,a),l(s,b),l(s,d),i||(o=[X(a,"click",r[6]),X(d,"click",r[5])],i=!0)},p:Oe,d(u){u&&(W(e),W(t),W(s)),i=!1,Qe(o)}}}function Ri(r){let e;return{c(){e=C("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',n(e,"class","zmodem-downloading")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Oi(r){let e,t,s,a,b,d=(r[4]||r[1].name)+"",i;return{c(){e=C("div"),t=C("span"),t.textContent="✓",s=O(),a=C("span"),b=J("文件接收完成，已保存到："),i=J(d),n(t,"class","zmodem-success-icon"),n(e,"class","zmodem-completed")},m(o,u){N(o,e,u),l(e,t),l(e,s),l(e,a),l(a,b),l(a,i)},p(o,u){u[0]&18&&d!==(d=(o[4]||o[1].name)+"")&&he(i,d)},d(o){o&&W(e)}}}function Ml(r){let e,t,s,a=r[1]&&Ti(r);return{c(){e=C("div"),e.innerHTML="",t=O(),a&&a.c(),s=Ht(),n(e,"class","terminal-container svelte-14g4vw6")},m(b,d){N(b,e,d),r[16](e),N(b,t,d),a&&a.m(b,d),N(b,s,d)},p(b,d){b[1]?a?a.p(b,d):(a=Ti(b),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i:Oe,o:Oe,d(b){b&&(W(e),W(t),W(s)),r[16](null),a&&a.d(b)}}}function Pi(){if(typeof document>"u")return{fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace'};const r=getComputedStyle(document.documentElement),e=Number.parseInt(r.getPropertyValue("--terminal-font-size"),10),t=r.getPropertyValue("--terminal-font-family").trim();return{fontSize:Number.isFinite(e)?e:14,fontFamily:t||'Menlo, Monaco, "Courier New", monospace'}}function Tl(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function Bl(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function Al(r){const e=[];let t=0;for await(const b of r)e.push(b),t+=b.length;const s=new Uint8Array(t);let a=0;for(const b of e)s.set(b,a),a+=b.length;return s}async function Rl(r,e){const t=await Al(r),{SaveBinaryFile:s}=window.wailsBindings||{};if(typeof s=="function"){const a=btoa(Bl(t));return await s(e,a)}return Tl(t,e),null}function Ii(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function Ol(r,e,t){let{sessionId:s=null}=e,{onData:a=null}=e,{onResize:b=null}=e,{onZModemTransfer:d=null}=e,i,o,u,g=null,f=null,m=null,v=!1,k=null,y=!1,c=null,p="pending",h=null,_=null,w=null,L=null,x=Lo(yr);const E={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},S={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},D=yr.subscribe(Z=>{x=Z,o&&(o.options.theme=x==="light"?S:E)});function B(){if(!o)return;const Z=Pi();o.options.fontSize=Z.fontSize,o.options.fontFamily=Z.fontFamily,u==null||u.fit()}ar(async()=>{const Z=Pi();o=new El.Terminal({cursorBlink:!0,fontSize:Z.fontSize,fontFamily:Z.fontFamily,theme:x==="light"?S:E,allowProposedApi:!0,scrollback:1e3,convertEol:!0,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),u=new Ll.FitAddon,o.loadAddon(u),o.loadAddon(new Dl.WebLinksAddon),o.open(i),u.fit(),o.attachCustomKeyEventHandler(F=>{if(F.metaKey&&F.key.toLowerCase()==="c"&&!F.shiftKey&&!F.ctrlKey){if(o.hasSelection()){const T=o.getSelection();return navigator.clipboard.writeText(T).catch(Q=>{console.error("Failed to copy:",Q)}),!1}return!0}if(F.ctrlKey&&!F.metaKey&&F.key.toLowerCase()==="c"&&!F.shiftKey){if(o.hasSelection()){const T=o.getSelection();return navigator.clipboard.writeText(T).catch(Q=>{console.error("Failed to copy:",Q)}),!1}return!0}return F.metaKey&&F.key.toLowerCase()==="v"&&!F.shiftKey&&!F.ctrlKey?(F.preventDefault(),navigator.clipboard.readText().then(T=>{T&&a&&s&&a(s,T)}).catch(T=>{console.error("Failed to read clipboard:",T)}),!1):F.ctrlKey&&!F.metaKey&&F.key.toLowerCase()==="v"&&!F.shiftKey?(F.preventDefault(),navigator.clipboard.readText().then(T=>{T&&a&&s&&a(s,T)}).catch(T=>{console.error("Failed to read clipboard:",T)}),!1):!0});try{const F=await Cr(()=>import("./index2.js").then(T=>T.i),[]);g=F.default||F,f=new g.Sentry({to_terminal:T=>{o&&o.write(new Uint8Array(T))},sender:T=>{if(s){if(d){d(s,new Uint8Array(T));return}if(a){let Q="";for(let G=0;G<T.length;G++)Q+=String.fromCharCode(T[G]);a(s,Q)}}},on_detect:T=>{if(console.log("ZMODEM detected:",T.type),console.log("Detection object:",T),m=T.confirm(),console.log("ZMODEM confirmed, type:",m.type,"has zsession:",!!m),!m){console.error("ERROR: zsession is null after confirm()");return}y=!0,o&&(o.options.disableStdin=!0),m.type==="receive"?(console.log("Calling handleZModemReceive for download"),j(m)):(console.log("Calling handleZModemSend for upload"),$(m))},on_retract:()=>{console.log("ZMODEM retracted"),m=null,y=!1,o&&(o.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(F){console.error("Failed to initialize ZMODEM:",F)}o.onData(F=>{a&&s&&a(s,F)}),o.onResize(({cols:F,rows:T})=>{b&&s&&b(s,F,T)});const Y=new ResizeObserver(()=>{u.fit()});return Y.observe(i),L=()=>{B()},window.addEventListener("app:appearance-updated",L),()=>{Y.disconnect(),L&&window.removeEventListener("app:appearance-updated",L)}}),Ir(()=>{D&&D(),o&&o.dispose()});function R(Z){w||(w=document.createElement("div"),w.className="zmodem-progress-modal",w.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${Z}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(w))}function P(Z,Y,F,T,Q){if(!w)return;const G=Math.min(100,Math.round(T/Q*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${F}`,document.getElementById("zmodem-progress-bar").style.width=`${G}%`,document.getElementById("zmodem-progress-text").textContent=`${G}%`,document.getElementById("zmodem-files-progress").textContent=`${Z+1} / ${Y}`}function A(){w&&(document.body.removeChild(w),w=null)}function j(Z){t(1,c=null),k=null,t(2,p="pending"),t(3,h=null),t(4,_=null),Z.on("offer",Y=>{const F=Y.get_details();k=Y,t(1,c=F),t(2,p="pending"),t(3,h=null),t(4,_=null)}),Z.on("session_end",()=>{k=null,m=null,y=!1,o&&(o.options.disableStdin=!1),p==="accepting"?(t(2,p="completed"),setTimeout(()=>{t(1,c=null),t(2,p="pending"),t(4,_=null)},1500)):(t(1,c=null),t(2,p="pending"),t(4,_=null))}),Z.start()}async function K(){if(k){t(2,p="accepting"),t(3,h=null);try{await k.accept();const Z=k.get_payloads(),Y=k.get_details().name;t(4,_=await Rl(Z,Y)),k=null,t(2,p="completed")}catch(Z){console.error("接收文件失败:",Z),t(3,h=Z.message||String(Z)),t(2,p="pending")}}}function V(){k&&k.skip(),k=null,t(1,c=null),t(2,p="pending"),t(3,h=null),t(4,_=null)}async function $(Z){console.log("handleZModemSend called, session:",Z);const Y=document.createElement("input");return Y.type="file",Y.multiple=!0,new Promise(F=>{Y.onchange=async T=>{const Q=Array.from(T.target.files);if(console.log("Files selected:",Q.length,Q.map(G=>G.name)),Q.length===0){console.log("No files selected, closing session"),Z.close(),v=!1,y=!1,o&&(o.options.disableStdin=!1),F();return}try{R(Q.length),console.log("Starting to send files...");for(let G=0;G<Q.length;G++){const ne=Q[G],ie={name:ne.name,size:ne.size,mtime:new Date(ne.lastModified)};console.log(`Sending file ${G+1}/${Q.length}:`,ne.name,ne.size),await U(Z,ne,ie,G,Q.length)}console.log("All files sent, closing session"),await Z.close(),setTimeout(()=>{v=!1,A(),y=!1,o&&(o.options.disableStdin=!1),F()},500)}catch(G){console.error("发送文件失败:",G),console.error("Error details:",G.stack),Z.close(),v=!1,A(),y=!1,o&&(o.options.disableStdin=!1),F()}},Y.click()})}async function U(Z,Y,F,T,Q){return new Promise((G,ne)=>{Z.send_offer(F).then(ie=>{if(!ie){G();return}const ce=new FileReader,ue=8192;ce.onload=be=>{const _e=be.target.result;let ke=0,Ne=0;function De(){if(ke<_e.byteLength){const xe=new Uint8Array(_e,ke,Math.min(ue,_e.byteLength-ke));ie.send(xe),ke+=ue,Ne+=xe.byteLength,P(T,Q,Y.name,Ne,Y.size),setTimeout(De,0)}else ie.end().then(G).catch(ne)}De()},ce.onerror=()=>{ne(new Error("读取文件失败"))},ce.readAsArrayBuffer(Y)})})}function M(Z){if(!o)return;let Y;if(typeof Z=="string"?Y=new Uint8Array(Z.split("").map(F=>F.charCodeAt(0))):Z instanceof Uint8Array?Y=Z:Y=new Uint8Array(Z),f&&!v)try{f.consume(Y);return}catch(F){console.warn("ZMODEM consume failed:",F),m=null,k=null,y=!1,v=!1,o&&(o.options.disableStdin=!1)}o.write(Y)}function I(Z){o&&o.writeln(Z)}function H(){o&&o.clear()}function z(){o&&o.focus()}function ee(){return o?{cols:o.cols,rows:o.rows}:{cols:80,rows:24}}function q(Z){_t[Z?"unshift":"push"](()=>{i=Z,t(0,i)})}return r.$$set=Z=>{"sessionId"in Z&&t(7,s=Z.sessionId),"onData"in Z&&t(8,a=Z.onData),"onResize"in Z&&t(9,b=Z.onResize),"onZModemTransfer"in Z&&t(10,d=Z.onZModemTransfer)},[i,c,p,h,_,K,V,s,a,b,d,M,I,H,z,ee,q]}class Pl extends Et{constructor(e){super(),xt(this,e,Ol,Ml,St,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function Hi(r,e,t){const s=r.slice();return s[31]=e[t],s}function Fi(r,e,t){const s=r.slice();return s[34]=e[t],s}function zi(r,e,t){const s=r.slice();return s[37]=e[t],s}function Il(r){let e,t=ze(r[12]),s=[];for(let a=0;a<t.length;a+=1)s[a]=ji(zi(r,t,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ht()},m(a,b){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(a,b);N(a,e,b)},p(a,b){if(b[0]&135170){t=ze(a[12]);let d;for(d=0;d<t.length;d+=1){const i=zi(a,t,d);s[d]?s[d].p(i,b):(s[d]=ji(i),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=t.length}},d(a){a&&W(e),Mt(s,a)}}}function Hl(r){let e;return{c(){e=C("div"),e.textContent="未匹配到数据库",n(e,"class","text-xs text-gray-500 dark:text-gray-400 p-2")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Fl(r){let e;return{c(){e=C("div"),e.textContent="暂无数据库",n(e,"class","text-xs text-gray-500 dark:text-gray-400 p-2")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function zl(r){let e;return{c(){e=C("div"),e.textContent="加载中...",n(e,"class","text-xs text-gray-500 dark:text-gray-400 p-2")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function ji(r){let e,t=r[37]+"",s,a,b,d,i;function o(){return r[25](r[37])}return{c(){e=C("button"),s=J(t),a=O(),n(e,"type","button"),n(e,"class",b="w-full text-left text-sm px-3 py-2 rounded mb-1 transition-colors "+(r[1]===r[37]?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"))},m(u,g){N(u,e,g),l(e,s),l(e,a),d||(i=X(e,"click",o),d=!0)},p(u,g){r=u,g[0]&4096&&t!==(t=r[37]+"")&&he(s,t),g[0]&4098&&b!==(b="w-full text-left text-sm px-3 py-2 rounded mb-1 transition-colors "+(r[1]===r[37]?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"))&&n(e,"class",b)},d(u){u&&W(e),d=!1,i()}}}function Wi(r){let e,t,s;return{c(){e=C("button"),e.textContent="刷新",n(e,"class","text-xs px-2 py-1 rounded bg-gray-100 dark:bg-gray-700")},m(a,b){N(a,e,b),t||(s=X(e,"click",r[26]),t=!0)},p:Oe,d(a){a&&W(e),t=!1,s()}}}function Ni(r){let e,t,s,a;return{c(){e=C("div"),t=C("input"),n(t,"type","text"),n(t,"placeholder","搜索表名或注释..."),n(t,"class","w-full text-xs px-3 py-2 rounded border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100"),n(e,"class","px-4 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800")},m(b,d){N(b,e,d),l(e,t),Re(t,r[3]),s||(a=X(t,"input",r[27]),s=!0)},p(b,d){d[0]&8&&t.value!==b[3]&&Re(t,b[3])},d(b){b&&W(e),s=!1,a()}}}function Ui(r){let e,t;return{c(){e=C("div"),t=J(r[10]),n(e,"class","mb-2 text-xs text-red-500")},m(s,a){N(s,e,a),l(e,t)},p(s,a){a[0]&1024&&he(t,s[10])},d(s){s&&W(e)}}}function jl(r){let e,t,s,a,b,d,i=ze(r[13]),o=[];for(let f=0;f<i.length;f+=1)o[f]=Ki(Fi(r,i,f));let u=ze(r[11]),g=[];for(let f=0;f<u.length;f+=1)g[f]=qi(Hi(r,u,f));return{c(){e=C("div"),t=C("table"),s=C("thead"),a=C("tr");for(let f=0;f<o.length;f+=1)o[f].c();b=O(),d=C("tbody");for(let f=0;f<g.length;f+=1)g[f].c();n(s,"class","bg-gray-50 dark:bg-gray-700/60"),n(t,"class","w-full text-xs border-collapse"),n(e,"class","overflow-auto border border-gray-200 dark:border-gray-700 rounded")},m(f,m){N(f,e,m),l(e,t),l(t,s),l(s,a);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(a,null);l(t,b),l(t,d);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(d,null)},p(f,m){if(m[0]&41008){i=ze(f[13]);let v;for(v=0;v<i.length;v+=1){const k=Fi(f,i,v);o[v]?o[v].p(k,m):(o[v]=Ki(k),o[v].c(),o[v].m(a,null))}for(;v<o.length;v+=1)o[v].d(1);o.length=i.length}if(m[0]&264192){u=ze(f[11]);let v;for(v=0;v<u.length;v+=1){const k=Hi(f,u,v);g[v]?g[v].p(k,m):(g[v]=qi(k),g[v].c(),g[v].m(d,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=u.length}},d(f){f&&W(e),Mt(o,f),Mt(g,f)}}}function Wl(r){let e;return{c(){e=C("div"),e.textContent="未匹配到表，请调整搜索关键词",n(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Nl(r){let e;return{c(){e=C("div"),e.textContent="暂无表",n(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Ul(r){let e;return{c(){e=C("div"),e.textContent="表加载中...",n(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Vl(r){let e;return{c(){e=C("div"),e.textContent="请选择一个数据库",n(e,"class","text-sm text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Vi(r){let e,t=r[5]==="asc"?"↑":"↓",s;return{c(){e=C("span"),s=J(t),n(e,"aria-hidden","true")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&32&&t!==(t=a[5]==="asc"?"↑":"↓")&&he(s,t)},d(a){a&&W(e)}}}function Ki(r){let e,t,s,a,b,d,i,o,u=r[4]===r[34].key&&Vi(r);function g(){return r[28](r[34])}return{c(){e=C("th"),t=C("button"),s=C("span"),s.textContent=`${r[34].label}`,a=O(),u&&u.c(),d=O(),n(t,"type","button"),n(t,"class",b="inline-flex items-center gap-1 select-none hover:text-blue-600 dark:hover:text-blue-300 "+(r[4]===r[34].key?"text-blue-600 dark:text-blue-300":"")),n(e,"class","text-left px-3 py-2 border-b border-gray-200 dark:border-gray-700")},m(f,m){N(f,e,m),l(e,t),l(t,s),l(t,a),u&&u.m(t,null),l(e,d),i||(o=X(t,"click",g),i=!0)},p(f,m){r=f,r[4]===r[34].key?u?u.p(r,m):(u=Vi(r),u.c(),u.m(t,null)):u&&(u.d(1),u=null),m[0]&16&&b!==(b="inline-flex items-center gap-1 select-none hover:text-blue-600 dark:hover:text-blue-300 "+(r[4]===r[34].key?"text-blue-600 dark:text-blue-300":""))&&n(t,"class",b)},d(f){f&&W(e),u&&u.d(),i=!1,o()}}}function qi(r){let e,t,s=r[31].tableName+"",a,b,d,i=Gi(r[31].rowCount)+"",o,u,g,f=Ji(r[31].dataLength)+"",m,v,k,y=(r[31].engine||"-")+"",c,p,h,_=Tr(r[31].createTime)+"",w,L,x,E=Tr(r[31].updateTime)+"",S,D,B,R=(r[31].collation||"-")+"",P,A,j,K=(r[31].comment||"-")+"",V,$,U,M;function I(){return r[29](r[31])}return{c(){e=C("tr"),t=C("td"),a=J(s),b=O(),d=C("td"),o=J(i),u=O(),g=C("td"),m=J(f),v=O(),k=C("td"),c=J(y),p=O(),h=C("td"),w=J(_),L=O(),x=C("td"),S=J(E),D=O(),B=C("td"),P=J(R),A=O(),j=C("td"),V=J(K),$=O(),n(t,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700 text-blue-700 dark:text-blue-300"),n(d,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(g,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(k,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(h,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(x,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(B,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(j,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700"),n(e,"class","hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer")},m(H,z){N(H,e,z),l(e,t),l(t,a),l(e,b),l(e,d),l(d,o),l(e,u),l(e,g),l(g,m),l(e,v),l(e,k),l(k,c),l(e,p),l(e,h),l(h,w),l(e,L),l(e,x),l(x,S),l(e,D),l(e,B),l(B,P),l(e,A),l(e,j),l(j,V),l(e,$),U||(M=X(e,"click",I),U=!0)},p(H,z){r=H,z[0]&2048&&s!==(s=r[31].tableName+"")&&he(a,s),z[0]&2048&&i!==(i=Gi(r[31].rowCount)+"")&&he(o,i),z[0]&2048&&f!==(f=Ji(r[31].dataLength)+"")&&he(m,f),z[0]&2048&&y!==(y=(r[31].engine||"-")+"")&&he(c,y),z[0]&2048&&_!==(_=Tr(r[31].createTime)+"")&&he(w,_),z[0]&2048&&E!==(E=Tr(r[31].updateTime)+"")&&he(S,E),z[0]&2048&&R!==(R=(r[31].collation||"-")+"")&&he(P,R),z[0]&2048&&K!==(K=(r[31].comment||"-")+"")&&he(V,K)},d(H){H&&W(e),U=!1,M()}}}function Kl(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p=r[1]?`(${r[1]})`:"",h,_,w,L,x,E,S,D;function B(M,I){return M[8]?zl:M[0].length===0?Fl:M[12].length===0?Hl:Il}let R=B(r),P=R(r),A=r[1]&&Wi(r),j=r[1]&&Ni(r),K=r[10]&&Ui(r);function V(M,I){return M[1]?M[9]?Ul:M[7].length===0?Nl:M[6].length===0?Wl:jl:Vl}let $=V(r),U=$(r);return{c(){e=C("div"),t=C("aside"),s=C("div"),a=C("h3"),a.textContent="数据库",b=O(),d=C("button"),d.textContent="刷新",i=O(),o=C("div"),u=C("input"),g=O(),f=C("div"),P.c(),m=O(),v=C("section"),k=C("div"),y=C("h3"),c=J("表信息列表 "),h=J(p),_=O(),A&&A.c(),w=O(),j&&j.c(),L=O(),x=C("div"),K&&K.c(),E=O(),U.c(),n(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),n(d,"class","text-xs px-2 py-1 rounded bg-gray-100 dark:bg-gray-700"),n(s,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"),n(u,"type","text"),n(u,"placeholder","搜索数据库..."),n(u,"class","w-full text-xs px-3 py-2 rounded border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100"),n(o,"class","px-2 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),n(f,"class","flex-1 overflow-y-auto p-2"),n(t,"class","w-64 border-r border-gray-200 dark:border-gray-700 flex flex-col"),n(y,"class","text-sm font-semibold text-gray-900 dark:text-white"),n(k,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"),n(x,"class","flex-1 overflow-y-auto p-3"),n(v,"class","flex-1 min-w-0 flex flex-col"),n(e,"class","h-full flex bg-white dark:bg-gray-800")},m(M,I){N(M,e,I),l(e,t),l(t,s),l(s,a),l(s,b),l(s,d),l(t,i),l(t,o),l(o,u),Re(u,r[2]),l(t,g),l(t,f),P.m(f,null),l(e,m),l(e,v),l(v,k),l(k,y),l(y,c),l(y,h),l(k,_),A&&A.m(k,null),l(v,w),j&&j.m(v,null),l(v,L),l(v,x),K&&K.m(x,null),l(x,E),U.m(x,null),S||(D=[X(d,"click",r[14]),X(u,"input",r[24])],S=!0)},p(M,I){I[0]&4&&u.value!==M[2]&&Re(u,M[2]),R===(R=B(M))&&P?P.p(M,I):(P.d(1),P=R(M),P&&(P.c(),P.m(f,null))),I[0]&2&&p!==(p=M[1]?`(${M[1]})`:"")&&he(h,p),M[1]?A?A.p(M,I):(A=Wi(M),A.c(),A.m(k,null)):A&&(A.d(1),A=null),M[1]?j?j.p(M,I):(j=Ni(M),j.c(),j.m(v,L)):j&&(j.d(1),j=null),M[10]?K?K.p(M,I):(K=Ui(M),K.c(),K.m(x,E)):K&&(K.d(1),K=null),$===($=V(M))&&U?U.p(M,I):(U.d(1),U=$(M),U&&(U.c(),U.m(x,null)))},i:Oe,o:Oe,d(M){M&&W(e),P.d(),A&&A.d(),j&&j.d(),K&&K.d(),U.d(),S=!1,Qe(D)}}}function ql(r){return String(r||"").replace(/'/g,"''")}function Gl(r,e){const t={};return r.forEach((s,a)=>{t[String(s||"").toLowerCase()]=e[a]}),{tableName:String(t.table_name||""),rowCount:t.table_rows,dataLength:t.data_length,engine:t.engine||"-",createTime:t.create_time||"-",updateTime:t.update_time||"-",collation:t.table_collation||"-",comment:t.table_comment||"-"}}function Gi(r){const e=Number(r);return Number.isNaN(e)?"-":e.toLocaleString("en-US")}function Ji(r){const e=Number(r);return Number.isNaN(e)||e<0?"-":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(1)} GB`}function Tr(r){if(!r||r==="-")return"-";const e=new Date(r);return Number.isNaN(e.getTime())?String(r):e.toLocaleString("zh-CN")}function Yi(r){const e=Number(r);return Number.isNaN(e)?null:e}function Xi(r){if(!r||r==="-")return null;const e=Date.parse(r);return Number.isNaN(e)?null:e}function Zi(r,e){return e==="tableName"?String(r.tableName||"").toLowerCase():e==="rowCount"?Yi(r.rowCount):e==="dataLength"?Yi(r.dataLength):e==="createTime"?Xi(r.createTime):e==="updateTime"?Xi(r.updateTime):e==="engine"?String(r.engine||"").toLowerCase():e==="collation"?String(r.collation||"").toLowerCase():e==="comment"?String(r.comment||"").toLowerCase():null}function Jl(r,e,t){let s,a,b,d,i,o,{sessionId:u=null}=e,{dbConfig:g=null}=e,f=[],m={},v="",k="",y="",c="tableName",p="desc";const h=[{key:"tableName",label:"表名"},{key:"rowCount",label:"行数"},{key:"dataLength",label:"数据长度"},{key:"engine",label:"引擎"},{key:"createTime",label:"创建时间"},{key:"updateTime",label:"修改时间"},{key:"collation",label:"排序规则"},{key:"comment",label:"注释"}];let _=!1,w=!1,L="";ar(async()=>{await x()});async function x(){var U;if(!(!window.wailsBindings||!u)){t(8,_=!0),t(10,L="");try{const M=await window.wailsBindings.ListDatabases(u);t(0,f=(M||[]).slice().sort()),!v&&f.length>0&&t(1,v=((U=g==null?void 0:g.metadata)==null?void 0:U.database)||f[0]),v&&await D(v)}catch(M){t(10,L=`加载数据库失败: ${M.message||"未知错误"}`)}finally{t(8,_=!1)}}}function E(U){var H;const M=(((H=g==null?void 0:g.metadata)==null?void 0:H.db_type)||(g==null?void 0:g.dbType)||"").toLowerCase(),I=ql(U);return M==="postgresql"?`
        SELECT
          c.relname AS table_name,
          c.reltuples::bigint AS table_rows,
          pg_total_relation_size(c.oid) AS data_length,
          '' AS engine,
          NULL::text AS create_time,
          NULL::text AS update_time,
          pg_catalog.obj_description(c.oid, 'pg_class') AS table_comment,
          '' AS table_collation
        FROM pg_catalog.pg_class c
        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
        WHERE c.relkind = 'r'
          AND n.nspname = 'public'
        ORDER BY c.relname;
      `:`
      SELECT
        TABLE_NAME AS table_name,
        TABLE_ROWS AS table_rows,
        DATA_LENGTH AS data_length,
        ENGINE AS engine,
        CREATE_TIME AS create_time,
        UPDATE_TIME AS update_time,
        TABLE_COLLATION AS table_collation,
        TABLE_COMMENT AS table_comment
      FROM information_schema.tables
      WHERE TABLE_SCHEMA = '${I}'
      ORDER BY TABLE_NAME;
    `}function S(U){if(c===U){t(5,p=p==="asc"?"desc":"asc");return}t(4,c=U),t(5,p="desc")}async function D(U){if(!(!window.wailsBindings||!u||!U)){t(9,w=!0),t(10,L="");try{const M=E(U),I=await window.wailsBindings.ExecuteDatabaseQuery(u,M),H=JSON.parse(I||"{}"),z=(H==null?void 0:H.columns)||[],q=((H==null?void 0:H.rows)||[]).map(Z=>Gl(z,Z)).filter(Z=>Z.tableName);t(21,m={...m,[U]:q})}catch(M){t(10,L=`加载表失败: ${M.message||"未知错误"}`)}finally{t(9,w=!1)}}}async function B(U){t(1,v=U),t(3,y=""),m[U]||await D(U)}function R(U){window.dispatchEvent(new CustomEvent("database:table-select",{detail:{sessionId:u,databaseName:v,tableName:U}}))}function P(){k=this.value,t(2,k)}const A=U=>B(U),j=()=>D(v);function K(){y=this.value,t(3,y)}const V=U=>S(U.key),$=U=>R(U.tableName);return r.$$set=U=>{"sessionId"in U&&t(19,u=U.sessionId),"dbConfig"in U&&t(20,g=U.dbConfig)},r.$$.update=()=>{r.$$.dirty[0]&2097154&&t(7,s=v?m[v]||[]:[]),r.$$.dirty[0]&4&&t(23,a=k.trim().toLowerCase()),r.$$.dirty[0]&8388609&&t(12,b=a?f.filter(U=>String(U||"").toLowerCase().includes(a)):f),r.$$.dirty[0]&8&&t(22,d=y.trim().toLowerCase()),r.$$.dirty[0]&4194432&&t(6,i=d?s.filter(U=>{const M=String(U.tableName||"").toLowerCase(),I=String(U.comment||"").toLowerCase();return M.includes(d)||I.includes(d)}):s),r.$$.dirty[0]&112&&t(11,o=i.slice().sort((U,M)=>{const I=Zi(U,c),H=Zi(M,c);if(I===null&&H===null)return 0;if(I===null)return 1;if(H===null)return-1;if(typeof I=="string"&&typeof H=="string"){const ee=I.localeCompare(H);return p==="asc"?ee:-ee}const z=Number(I)-Number(H);return p==="asc"?z:-z}))},[f,v,k,y,c,p,i,s,_,w,L,o,b,h,x,S,D,B,R,u,g,m,d,a,P,A,j,K,V,$]}class Yl extends Et{constructor(e){super(),xt(this,e,Jl,Kl,St,{sessionId:19,dbConfig:20},null,[-1,-1])}}function Qi(r,e,t){const s=r.slice();return s[31]=e[t],s}function $i(r,e,t){const s=r.slice();return s[34]=e[t],s}function es(r,e,t){const s=r.slice();return s[37]=e[t],s}function ts(r,e,t){const s=r.slice();return s[40]=e[t],s}function rs(r){let e,t;return{c(){e=C("div"),t=J(r[3]),n(e,"class","px-4 py-2 text-xs text-red-600 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800")},m(s,a){N(s,e,a),l(e,t)},p(s,a){a[0]&8&&he(t,s[3])},d(s){s&&W(e)}}}function is(r){let e,t;return{c(){e=C("div"),t=J(r[4]),n(e,"class","px-4 py-2 text-xs text-amber-700 bg-amber-50 dark:bg-amber-900/20 border-b border-amber-100 dark:border-amber-800")},m(s,a){N(s,e,a),l(e,t)},p(s,a){a[0]&16&&he(t,s[4])},d(s){s&&W(e)}}}function Xl(r){let e;return{c(){e=C("div"),e.textContent="暂无结果，执行查询后显示数据",n(e,"class","h-full flex items-center justify-center text-sm text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Zl(r){let e,t,s,a,b,d=ze(r[0].columns),i=[];for(let g=0;g<d.length;g+=1)i[g]=ns(ts(r,d,g));let o=ze(r[8]),u=[];for(let g=0;g<o.length;g+=1)u[g]=ls($i(r,o,g));return{c(){e=C("table"),t=C("thead"),s=C("tr");for(let g=0;g<i.length;g+=1)i[g].c();a=O(),b=C("tbody");for(let g=0;g<u.length;g+=1)u[g].c();n(t,"class","sticky top-0 z-10 bg-gray-100 dark:bg-gray-700"),n(e,"class","w-full text-xs border-collapse")},m(g,f){N(g,e,f),l(e,t),l(t,s);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(s,null);l(e,a),l(e,b);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(b,null)},p(g,f){if(f[0]&2241){d=ze(g[0].columns);let m;for(m=0;m<d.length;m+=1){const v=ts(g,d,m);i[m]?i[m].p(v,f):(i[m]=ns(v),i[m].c(),i[m].m(s,null))}for(;m<i.length;m+=1)i[m].d(1);i.length=d.length}if(f[0]&256){o=ze(g[8]);let m;for(m=0;m<o.length;m+=1){const v=$i(g,o,m);u[m]?u[m].p(v,f):(u[m]=ls(v),u[m].c(),u[m].m(b,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=o.length}},d(g){g&&W(e),Mt(i,g),Mt(u,g)}}}function ss(r){let e,t=r[6]==="asc"?"↑":"↓",s;return{c(){e=C("span"),s=J(t),n(e,"aria-hidden","true")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&64&&t!==(t=a[6]==="asc"?"↑":"↓")&&he(s,t)},d(a){a&&W(e)}}}function ns(r){let e,t,s,a=r[40]+"",b,d,i,o,u,g,f=r[7]===r[40]&&ss(r);function m(){return r[26](r[40])}return{c(){e=C("th"),t=C("button"),s=C("span"),b=J(a),d=O(),f&&f.c(),o=O(),n(t,"type","button"),n(t,"class",i="inline-flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-300 "+(r[7]===r[40]?"text-blue-600 dark:text-blue-300":"")),n(e,"class","text-left px-3 py-2 border-b border-gray-200 dark:border-gray-600 font-semibold text-gray-700 dark:text-gray-200")},m(v,k){N(v,e,k),l(e,t),l(t,s),l(s,b),l(t,d),f&&f.m(t,null),l(e,o),u||(g=X(t,"click",m),u=!0)},p(v,k){r=v,k[0]&1&&a!==(a=r[40]+"")&&he(b,a),r[7]===r[40]?f?f.p(r,k):(f=ss(r),f.c(),f.m(t,null)):f&&(f.d(1),f=null),k[0]&129&&i!==(i="inline-flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-300 "+(r[7]===r[40]?"text-blue-600 dark:text-blue-300":""))&&n(t,"class",i)},d(v){v&&W(e),f&&f.d(),u=!1,g()}}}function os(r){let e,t=r[37]+"",s;return{c(){e=C("td"),s=J(t),n(e,"class","px-3 py-2 border-b border-gray-100 dark:border-gray-700 text-gray-800 dark:text-gray-100 align-top")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&256&&t!==(t=a[37]+"")&&he(s,t)},d(a){a&&W(e)}}}function ls(r){let e,t,s=ze(r[34]),a=[];for(let b=0;b<s.length;b+=1)a[b]=os(es(r,s,b));return{c(){e=C("tr");for(let b=0;b<a.length;b+=1)a[b].c();t=O(),n(e,"class","hover:bg-gray-50 dark:hover:bg-gray-700/40")},m(b,d){N(b,e,d);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null);l(e,t)},p(b,d){if(d[0]&256){s=ze(b[34]);let i;for(i=0;i<s.length;i+=1){const o=es(b,s,i);a[i]?a[i].p(o,d):(a[i]=os(o),a[i].c(),a[i].m(e,t))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}},d(b){b&&W(e),Mt(a,b)}}}function Ql(r){let e,t=ze(r[5]),s=[];for(let a=0;a<t.length;a+=1)s[a]=as(Qi(r,t,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ht()},m(a,b){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(a,b);N(a,e,b)},p(a,b){if(b[0]&16416){t=ze(a[5]);let d;for(d=0;d<t.length;d+=1){const i=Qi(a,t,d);s[d]?s[d].p(i,b):(s[d]=as(i),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=t.length}},d(a){a&&W(e),Mt(s,a)}}}function $l(r){let e;return{c(){e=C("div"),e.textContent="暂无历史",n(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function as(r){let e,t=r[31]+"",s,a,b,d;function i(){return r[27](r[31])}return{c(){e=C("button"),s=J(t),a=O(),n(e,"type","button"),n(e,"class","w-full text-left mb-1 px-2 py-1.5 rounded text-xs bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200")},m(o,u){N(o,e,u),l(e,s),l(e,a),b||(d=X(e,"click",i),b=!0)},p(o,u){r=o,u[0]&32&&t!==(t=r[31]+"")&&he(s,t)},d(o){o&&W(e),b=!1,d()}}}function ea(r){var ie,ce;let e,t,s,a,b=(r[10]||"表数据")+"",d,i,o,u=r[9]?`${r[9]} · `:"",g,f,m,v,k,y=r[2]?"执行中...":"执行",c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I=(((ce=(ie=r[0])==null?void 0:ie.rows)==null?void 0:ce.length)||0)+"",H,z,ee,q=r[3]&&rs(r),Z=r[4]&&is(r);function Y(ue,be){var _e,ke;return(ke=(_e=ue[0])==null?void 0:_e.columns)!=null&&ke.length?Zl:Xl}let F=Y(r),T=F(r);function Q(ue,be){return ue[5].length===0?$l:Ql}let G=Q(r),ne=G(r);return{c(){e=C("div"),t=C("div"),s=C("div"),a=C("div"),d=J(b),i=O(),o=C("div"),g=J(u),f=J("默认查询 LIMIT 100"),m=O(),v=C("div"),k=C("button"),c=J(y),p=O(),h=C("button"),h.textContent="清空",_=O(),w=C("button"),w.textContent="重置100条",L=O(),x=C("div"),E=C("textarea"),S=O(),q&&q.c(),D=O(),Z&&Z.c(),B=O(),R=C("div"),P=C("div"),T.c(),A=O(),j=C("aside"),K=C("div"),K.textContent="查询历史",V=O(),ne.c(),$=O(),U=C("div"),M=J("行数："),H=J(I),n(a,"class","text-sm font-semibold text-gray-900 dark:text-white truncate"),n(o,"class","text-xs text-gray-500 dark:text-gray-400"),n(s,"class","min-w-0"),n(k,"class","px-3 py-1.5 text-xs rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50"),k.disabled=r[2],n(h,"class","px-3 py-1.5 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"),n(w,"class","px-3 py-1.5 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"),n(v,"class","flex items-center gap-2"),n(t,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3"),n(E,"class","w-full h-28 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm font-mono px-3 py-2 text-gray-900 dark:text-gray-100"),n(E,"placeholder","输入 SQL，Ctrl+Enter 执行"),n(x,"class","px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40"),n(P,"class","flex-1 min-w-0 overflow-auto"),n(K,"class","text-xs font-semibold text-gray-600 dark:text-gray-300 mb-2"),n(j,"class","w-64 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-3 hidden lg:block"),n(R,"class","flex-1 min-h-0 flex"),n(U,"class","px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400"),n(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(ue,be){N(ue,e,be),l(e,t),l(t,s),l(s,a),l(a,d),l(s,i),l(s,o),l(o,g),l(o,f),l(t,m),l(t,v),l(v,k),l(k,c),l(v,p),l(v,h),l(v,_),l(v,w),l(e,L),l(e,x),l(x,E),Re(E,r[1]),l(e,S),q&&q.m(e,null),l(e,D),Z&&Z.m(e,null),l(e,B),l(e,R),l(R,P),T.m(P,null),l(R,A),l(R,j),l(j,K),l(j,V),ne.m(j,null),l(e,$),l(e,U),l(U,M),l(U,H),z||(ee=[X(k,"click",r[12]),X(h,"click",r[13]),X(w,"click",r[15]),X(E,"input",r[24]),X(E,"keydown",r[25])],z=!0)},p(ue,be){var _e,ke;be[0]&1024&&b!==(b=(ue[10]||"表数据")+"")&&he(d,b),be[0]&512&&u!==(u=ue[9]?`${ue[9]} · `:"")&&he(g,u),be[0]&4&&y!==(y=ue[2]?"执行中...":"执行")&&he(c,y),be[0]&4&&(k.disabled=ue[2]),be[0]&2&&Re(E,ue[1]),ue[3]?q?q.p(ue,be):(q=rs(ue),q.c(),q.m(e,D)):q&&(q.d(1),q=null),ue[4]?Z?Z.p(ue,be):(Z=is(ue),Z.c(),Z.m(e,B)):Z&&(Z.d(1),Z=null),F===(F=Y(ue))&&T?T.p(ue,be):(T.d(1),T=F(ue),T&&(T.c(),T.m(P,null))),G===(G=Q(ue))&&ne?ne.p(ue,be):(ne.d(1),ne=G(ue),ne&&(ne.c(),ne.m(j,null))),be[0]&1&&I!==(I=(((ke=(_e=ue[0])==null?void 0:_e.rows)==null?void 0:ke.length)||0)+"")&&he(H,I)},i:Oe,o:Oe,d(ue){ue&&W(e),q&&q.d(),Z&&Z.d(),T.d(),ne.d(),z=!1,Qe(ee)}}}const ta=50;function ra(r){return/\border\s+by\b/i.test(r)}function cs(r){if(r==null||r==="")return null;if(typeof r=="number")return r;const e=String(r).trim();if(!e)return null;const t=Number(e);if(!Number.isNaN(t)&&/^[-+]?\d+(\.\d+)?$/.test(e))return t;const s=Date.parse(e);return!Number.isNaN(s)&&/[-/:T]/.test(e)?s:e.toLowerCase()}function ia(r,e){return r===null&&e===null?0:r===null?1:e===null?-1:typeof r=="number"&&typeof e=="number"?r-e:String(r).localeCompare(String(e),void 0,{numeric:!0,sensitivity:"base"})}function sa(r,e,t){let s,a,b,d,i,o,u,g,{sessionId:f=null}=e,{dbConfig:m=null}=e,{databaseName:v=""}=e,{tableName:k=""}=e,y="",c=null,p=!1,h="",_="",w=[],L={key:"",direction:"desc"};function x(){return k?v?`${v}.${k}`:k:""}function E(){const U=x();return U?`SELECT * FROM ${U} LIMIT 100;`:""}function S(U){const M=U.trim();M&&t(5,w=[M,...w.filter(I=>I!==M)].slice(0,ta))}function D(U){if(L.key===U){t(20,L={key:L.key,direction:L.direction==="asc"?"desc":"asc"});return}t(20,L={key:U,direction:"desc"})}async function B(){var U;if(y.trim()&&!(!window.wailsBindings||!f)){t(2,p=!0),t(3,h=""),t(4,_="");try{const M=y.trim(),I=await window.wailsBindings.ExecuteDatabaseQuery(f,M),H=JSON.parse(I);t(0,c=H),S(M),((U=H==null?void 0:H.rows)==null?void 0:U.length)>0&&!ra(M)&&/^\s*select\b/i.test(M)&&t(4,_="提示：当前查询未包含 ORDER BY，结果行顺序可能不稳定。")}catch(M){console.error("Query execution failed:",M),t(3,h=`查询执行失败: ${M.message||"未知错误"}`)}finally{t(2,p=!1)}}}function R(){t(1,y=""),t(0,c=null),t(3,h=""),t(4,_="")}function P(U){t(1,y=U)}async function A(){t(1,y=E()),y&&await B()}ar(async()=>{await A()});function j(){y=this.value,t(1,y)}const K=U=>{U.ctrlKey&&U.key==="Enter"&&(U.preventDefault(),B())},V=U=>D(U),$=U=>P(U);return r.$$set=U=>{"sessionId"in U&&t(16,f=U.sessionId),"dbConfig"in U&&t(17,m=U.dbConfig),"databaseName"in U&&t(18,v=U.databaseName),"tableName"in U&&t(19,k=U.tableName)},r.$$.update=()=>{var U,M;r.$$.dirty[0]&131072&&t(9,a=(U=m==null?void 0:m.metadata)!=null&&U.db_type?m.metadata.db_type.toUpperCase():""),r.$$.dirty[0]&1048576&&t(23,b=L.key),r.$$.dirty[0]&1048576&&t(21,d=L.direction),r.$$.dirty[0]&8388609&&t(22,i=((M=c==null?void 0:c.columns)==null?void 0:M.findIndex(I=>I===b))??-1),r.$$.dirty[0]&6291457&&t(8,o=c!=null&&c.rows?i<0?c.rows:c.rows.slice().sort((I,H)=>{const z=cs(I==null?void 0:I[i]),ee=cs(H==null?void 0:H[i]),q=ia(z,ee);return d==="asc"?q:-q}):[]),r.$$.dirty[0]&1048576&&t(7,u=L.key),r.$$.dirty[0]&1048576&&t(6,g=L.direction)},t(10,s=x()),[c,y,p,h,_,w,g,u,o,a,s,D,B,R,P,A,f,m,v,k,L,d,i,b,j,K,V,$]}class na extends Et{constructor(e){super(),xt(this,e,sa,ea,St,{sessionId:16,dbConfig:17,databaseName:18,tableName:19},null,[-1,-1])}}function oa(r){window.runtime.LogPrint(r)}function la(r){window.runtime.LogTrace(r)}function aa(r){window.runtime.LogDebug(r)}function ca(r){window.runtime.LogInfo(r)}function da(r){window.runtime.LogWarning(r)}function ha(r){window.runtime.LogError(r)}function ua(r){window.runtime.LogFatal(r)}function Jr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function Lr(r,e){return Jr(r,e,-1)}function fa(r,...e){return window.runtime.EventsOff(r,...e)}function pa(){return window.runtime.EventsOffAll()}function _a(r,e){return Jr(r,e,1)}function ga(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function ma(){window.runtime.WindowReload()}function ba(){window.runtime.WindowReloadApp()}function va(r){window.runtime.WindowSetAlwaysOnTop(r)}function ya(){window.runtime.WindowSetSystemDefaultTheme()}function wa(){window.runtime.WindowSetLightTheme()}function ka(){window.runtime.WindowSetDarkTheme()}function Sa(){window.runtime.WindowCenter()}function Ca(r){window.runtime.WindowSetTitle(r)}function xa(){window.runtime.WindowFullscreen()}function Ea(){window.runtime.WindowUnfullscreen()}function La(){return window.runtime.WindowIsFullscreen()}function Da(){return window.runtime.WindowGetSize()}function Ma(r,e){window.runtime.WindowSetSize(r,e)}function Ta(r,e){window.runtime.WindowSetMaxSize(r,e)}function Ba(r,e){window.runtime.WindowSetMinSize(r,e)}function Aa(r,e){window.runtime.WindowSetPosition(r,e)}function Ra(){return window.runtime.WindowGetPosition()}function Oa(){window.runtime.WindowHide()}function Pa(){window.runtime.WindowShow()}function Ia(){window.runtime.WindowMaximise()}function Ha(){window.runtime.WindowToggleMaximise()}function Fa(){window.runtime.WindowUnmaximise()}function za(){return window.runtime.WindowIsMaximised()}function ja(){window.runtime.WindowMinimise()}function Wa(){window.runtime.WindowUnminimise()}function Na(r,e,t,s){window.runtime.WindowSetBackgroundColour(r,e,t,s)}function Ua(){return window.runtime.ScreenGetAll()}function Va(){return window.runtime.WindowIsMinimised()}function Ka(){return window.runtime.WindowIsNormal()}function qa(r){window.runtime.BrowserOpenURL(r)}function Ga(){return window.runtime.Environment()}function Ja(){window.runtime.Quit()}function Ya(){window.runtime.Hide()}function Xa(){window.runtime.Show()}function Za(){return window.runtime.ClipboardGetText()}function Qa(r){return window.runtime.ClipboardSetText(r)}function $a(r,e){return window.runtime.OnFileDrop(r,e)}function ec(){return window.runtime.OnFileDropOff()}function tc(){return window.runtime.CanResolveFilePaths()}function rc(r){return window.runtime.ResolveFilePaths(r)}const oo=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:qa,CanResolveFilePaths:tc,ClipboardGetText:Za,ClipboardSetText:Qa,Environment:Ga,EventsEmit:ga,EventsOff:fa,EventsOffAll:pa,EventsOn:Lr,EventsOnMultiple:Jr,EventsOnce:_a,Hide:Ya,LogDebug:aa,LogError:ha,LogFatal:ua,LogInfo:ca,LogPrint:oa,LogTrace:la,LogWarning:da,OnFileDrop:$a,OnFileDropOff:ec,Quit:Ja,ResolveFilePaths:rc,ScreenGetAll:Ua,Show:Xa,WindowCenter:Sa,WindowFullscreen:xa,WindowGetPosition:Ra,WindowGetSize:Da,WindowHide:Oa,WindowIsFullscreen:La,WindowIsMaximised:za,WindowIsMinimised:Va,WindowIsNormal:Ka,WindowMaximise:Ia,WindowMinimise:ja,WindowReload:ma,WindowReloadApp:ba,WindowSetAlwaysOnTop:va,WindowSetBackgroundColour:Na,WindowSetDarkTheme:ka,WindowSetLightTheme:wa,WindowSetMaxSize:Ta,WindowSetMinSize:Ba,WindowSetPosition:Aa,WindowSetSize:Ma,WindowSetSystemDefaultTheme:ya,WindowSetTitle:Ca,WindowShow:Pa,WindowToggleMaximise:Ha,WindowUnfullscreen:Ea,WindowUnmaximise:Fa,WindowUnminimise:Wa},Symbol.toStringTag,{value:"Module"})),{Map:lo}=Xn;function ds(r,e,t){const s=r.slice();return s[63]=e[t],s[64]=e,s[65]=t,s}function hs(r,e,t){const s=r.slice();return s[63]=e[t],s}function ic(r){let e=[],t=new lo,s,a=ze(r[1]);const b=d=>d[63].sessionId;for(let d=0;d<a.length;d+=1){let i=hs(r,a,d),o=b(i);t.set(o,e[d]=us(o,i))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();s=Ht()},m(d,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(d,i);N(d,s,i)},p(d,i){i[0]&482574338&&(a=ze(d[1]),e=Jt(e,i,b,1,d,a,t,s.parentNode,Xt,us,s,hs))},d(d){d&&W(s);for(let i=0;i<e.length;i+=1)e[i].d(d)}}}function sc(r){let e;return{c(){e=C("div"),e.textContent="没有活动连接",n(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function nc(r){let e,t=(r[63].tabName||r[63].connection.name)+"",s;return{c(){e=C("span"),s=J(t),n(e,"class","text-sm font-medium truncate flex-1")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&2&&t!==(t=(a[63].tabName||a[63].connection.name)+"")&&he(s,t)},d(a){a&&W(e)}}}function oc(r){let e,t,s;return{c(){e=C("input"),n(e,"type","text"),n(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),n(e,"focus","")},m(a,b){N(a,e,b),Re(e,r[16]),t||(s=[X(e,"input",r[37]),X(e,"blur",r[27]),X(e,"keydown",r[28])],t=!0)},p(a,b){b[0]&65536&&e.value!==a[16]&&Re(e,a[16])},d(a){a&&W(e),t=!1,Qe(s)}}}function us(r,e){let t,s,a,b,d,i,o,u,g,f;function m(_,w){return _[15]===_[63].sessionId?oc:nc}let v=m(e),k=v(e);function y(..._){return e[38](e[63],..._)}function c(){return e[39](e[63])}function p(){return e[40](e[63])}function h(..._){return e[41](e[63],..._)}return{key:r,first:null,c(){t=C("div"),s=C("div"),b=O(),k.c(),d=O(),i=C("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=O(),n(s,"class",a=ii(`w-2 h-2 rounded-full flex-shrink-0 ${e[63].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),n(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),n(t,"class",u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[17]===e[63].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 accent-border":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),n(t,"role","button"),n(t,"tabindex","0"),this.first=t},m(_,w){N(_,t,w),l(t,s),l(t,b),k.m(t,null),l(t,d),l(t,i),l(t,o),g||(f=[X(i,"click",y),X(t,"click",c),X(t,"dblclick",p),X(t,"keydown",h)],g=!0)},p(_,w){e=_,w[0]&2&&a!==(a=ii(`w-2 h-2 rounded-full flex-shrink-0 ${e[63].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&n(s,"class",a),v===(v=m(e))&&k?k.p(e,w):(k.d(1),k=v(e),k&&(k.c(),k.m(t,d))),w[0]&131074&&u!==(u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[17]===e[63].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 accent-border":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&n(t,"class",u)},d(_){_&&W(t),k.d(),g=!1,Qe(f)}}}function lc(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',n(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,s){N(t,e,s)},p:Oe,i:Oe,o:Oe,d(t){t&&W(e)}}}function ac(r){let e,t=[],s=new lo,a,b=ze(r[1]);const d=i=>i[63].sessionId;for(let i=0;i<b.length;i+=1){let o=ds(r,b,i),u=d(o);s.set(u,t[i]=fs(u,o))}return{c(){e=C("div");for(let i=0;i<t.length;i+=1)t[i].c();n(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,o){N(i,e,o);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);a=!0},p(i,o){o[0]&1073872899|o[1]&3&&(b=ze(i[1]),Wt(),t=Jt(t,o,d,1,i,b,s,e,Io,fs,null,ds),Nt())},i(i){if(!a){for(let o=0;o<b.length;o+=1)Ue(t[o]);a=!0}},o(i){for(let o=0;o<t.length;o+=1)qe(t[o]);a=!1},d(i){i&&W(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function cc(r){let e=r[63].connection.username+"",t,s,a=r[63].connection.host+"",b,d,i=r[63].connection.port+"",o;return{c(){t=J(e),s=J("@"),b=J(a),d=J(":"),o=J(i)},m(u,g){N(u,t,g),N(u,s,g),N(u,b,g),N(u,d,g),N(u,o,g)},p(u,g){g[0]&2&&e!==(e=u[63].connection.username+"")&&he(t,e),g[0]&2&&a!==(a=u[63].connection.host+"")&&he(b,a),g[0]&2&&i!==(i=u[63].connection.port+"")&&he(o,i)},d(u){u&&(W(t),W(s),W(b),W(d),W(o))}}}function dc(r){let e,t=r[63].databaseName?`${r[63].databaseName}.`:"",s,a=r[63].tableName+"",b;return{c(){e=J("表数据 · "),s=J(t),b=J(a)},m(d,i){N(d,e,i),N(d,s,i),N(d,b,i)},p(d,i){i[0]&2&&t!==(t=d[63].databaseName?`${d[63].databaseName}.`:"")&&he(s,t),i[0]&2&&a!==(a=d[63].tableName+"")&&he(b,a)},d(d){d&&(W(e),W(s),W(b))}}}function hc(r){let e,t=r[63].connection.name+"",s;return{c(){e=J("数据库列表 · "),s=J(t)},m(a,b){N(a,e,b),N(a,s,b)},p(a,b){b[0]&2&&t!==(t=a[63].connection.name+"")&&he(s,t)},d(a){a&&(W(e),W(s))}}}function uc(r){let e,t=r[63].connection.name!=="Local Shell"?` (${r[63].connection.name})`:"",s;return{c(){e=J("本地终端"),s=J(t)},m(a,b){N(a,e,b),N(a,s,b)},p(a,b){b[0]&2&&t!==(t=a[63].connection.name!=="Local Shell"?` (${a[63].connection.name})`:"")&&he(s,t)},d(a){a&&(W(e),W(s))}}}function fc(r){let e,t=r[63],s;const a=()=>r[42](e,t),b=()=>r[42](null,t);let d={sessionId:r[63].sessionId,onData:r[30],onResize:r[32],onZModemTransfer:r[31]};return e=new Pl({props:d}),a(),{c(){nt(e.$$.fragment)},m(i,o){it(e,i,o),s=!0},p(i,o){t!==i[63]&&(b(),t=i[63],a());const u={};o[0]&2&&(u.sessionId=i[63].sessionId),e.$set(u)},i(i){s||(Ue(e.$$.fragment,i),s=!0)},o(i){qe(e.$$.fragment,i),s=!1},d(i){b(),st(e,i)}}}function pc(r){let e,t;return e=new na({props:{sessionId:r[63].dbSessionId,dbConfig:r[63].connection,databaseName:r[63].databaseName,tableName:r[63].tableName}}),{c(){nt(e.$$.fragment)},m(s,a){it(e,s,a),t=!0},p(s,a){const b={};a[0]&2&&(b.sessionId=s[63].dbSessionId),a[0]&2&&(b.dbConfig=s[63].connection),a[0]&2&&(b.databaseName=s[63].databaseName),a[0]&2&&(b.tableName=s[63].tableName),e.$set(b)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){qe(e.$$.fragment,s),t=!1},d(s){st(e,s)}}}function _c(r){let e,t;return e=new Yl({props:{sessionId:r[63].sessionId,dbConfig:r[63].connection}}),{c(){nt(e.$$.fragment)},m(s,a){it(e,s,a),t=!0},p(s,a){const b={};a[0]&2&&(b.sessionId=s[63].sessionId),a[0]&2&&(b.dbConfig=s[63].connection),e.$set(b)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){qe(e.$$.fragment,s),t=!1},d(s){st(e,s)}}}function fs(r,e){let t,s,a,b,d,i,o,u,g,f,m,v;function k(w,L){return w[63].type==="local"?uc:w[63].type==="database"&&w[63].panelType==="database-list"?hc:w[63].type==="database"&&w[63].panelType==="database-table"?dc:cc}let y=k(e),c=y(e);const p=[_c,pc,fc],h=[];function _(w,L){return w[63].type==="database"&&w[63].panelType==="database-list"?0:w[63].type==="database"&&w[63].panelType==="database-table"?1:2}return u=_(e),g=h[u]=p[u](e),{key:r,first:null,c(){t=C("div"),s=C("div"),a=C("div"),c.c(),b=O(),d=C("div"),d.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=O(),o=C("div"),g.c(),f=O(),n(a,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),n(d,"class","flex items-center gap-1"),n(s,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),n(o,"class","flex-1 overflow-hidden"),n(t,"class",m="terminal-wrapper "+(e[17]===e[63].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(w,L){N(w,t,L),l(t,s),l(s,a),c.m(a,null),l(s,b),l(s,d),l(t,i),l(t,o),h[u].m(o,null),l(t,f),v=!0},p(w,L){e=w,y===(y=k(e))&&c?c.p(e,L):(c.d(1),c=y(e),c&&(c.c(),c.m(a,null)));let x=u;u=_(e),u===x?h[u].p(e,L):(Wt(),qe(h[x],1,1,()=>{h[x]=null}),Nt(),g=h[u],g?g.p(e,L):(g=h[u]=p[u](e),g.c()),Ue(g,1),g.m(o,null)),(!v||L[0]&131074&&m!==(m="terminal-wrapper "+(e[17]===e[63].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&n(t,"class",m)},i(w){v||(Ue(g),v=!0)},o(w){qe(g),v=!1},d(w){w&&W(t),c.d(),h[u].d()}}}function gc(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_;function w(V,$){return V[1].length===0?sc:ic}let L=w(r),x=L(r);const E=[ac,lc],S=[];function D(V,$){return V[1].length>0?0:1}d=D(r),i=S[d]=E[d](r);function B(V){r[43](V)}let R={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[24],onCancel:r[25]};r[2]!==void 0&&(R.isOpen=r[2]),u=new hr({props:R}),_t.push(()=>kt(u,"isOpen",B));function P(V){r[44](V)}let A={title:r[12],message:r[13],type:r[14],confirmText:"确定",cancelText:"取消",onConfirm:r[20],onCancel:r[21]};r[11]!==void 0&&(A.isOpen=r[11]),m=new hr({props:A}),_t.push(()=>kt(m,"isOpen",P));function j(V){r[45](V)}let K={title:r[4],message:r[5],placeholder:r[6],defaultValue:r[7],inputType:r[8],allowEmpty:r[9],trimValue:r[10],confirmText:"确定",cancelText:"取消",onConfirm:r[18],onCancel:r[19]};return r[3]!==void 0&&(K.isOpen=r[3]),y=new br({props:K}),_t.push(()=>kt(y,"isOpen",j)),{c(){e=C("div"),t=C("div"),x.c(),s=O(),a=C("button"),a.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',b=O(),i.c(),o=O(),nt(u.$$.fragment),f=O(),nt(m.$$.fragment),k=O(),nt(y.$$.fragment),n(a,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),n(a,"title","打开本地终端"),n(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),n(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(V,$){N(V,e,$),l(e,t),x.m(t,null),l(t,s),l(t,a),l(e,b),S[d].m(e,null),N(V,o,$),it(u,V,$),N(V,f,$),it(m,V,$),N(V,k,$),it(y,V,$),p=!0,h||(_=X(a,"click",r[29]),h=!0)},p(V,$){L===(L=w(V))&&x?x.p(V,$):(x.d(1),x=L(V),x&&(x.c(),x.m(t,s)));let U=d;d=D(V),d===U?S[d].p(V,$):(Wt(),qe(S[U],1,1,()=>{S[U]=null}),Nt(),i=S[d],i?i.p(V,$):(i=S[d]=E[d](V),i.c()),Ue(i,1),i.m(e,null));const M={};!g&&$[0]&4&&(g=!0,M.isOpen=V[2],wt(()=>g=!1)),u.$set(M);const I={};$[0]&4096&&(I.title=V[12]),$[0]&8192&&(I.message=V[13]),$[0]&16384&&(I.type=V[14]),!v&&$[0]&2048&&(v=!0,I.isOpen=V[11],wt(()=>v=!1)),m.$set(I);const H={};$[0]&16&&(H.title=V[4]),$[0]&32&&(H.message=V[5]),$[0]&64&&(H.placeholder=V[6]),$[0]&128&&(H.defaultValue=V[7]),$[0]&256&&(H.inputType=V[8]),$[0]&512&&(H.allowEmpty=V[9]),$[0]&1024&&(H.trimValue=V[10]),!c&&$[0]&8&&(c=!0,H.isOpen=V[3],wt(()=>c=!1)),y.$set(H)},i(V){p||(Ue(i),Ue(u.$$.fragment,V),Ue(m.$$.fragment,V),Ue(y.$$.fragment,V),p=!0)},o(V){qe(i),qe(u.$$.fragment,V),qe(m.$$.fragment,V),qe(y.$$.fragment,V),p=!1},d(V){V&&(W(e),W(o),W(f),W(k)),x.d(),S[d].d(),st(u,V),st(m,V),st(y,V),h=!1,_()}}}function mc(r,e){return{sessionId:e,connection:r,connected:!0,createdAt:Date.now(),lastActivity:Date.now(),type:"database",panelType:"database-list",dbSessionId:e,tabName:`${r.name} · 数据库`}}function bc(r,e,t){return`dbtable_${r}_${e||"__default__"}_${t}`}function vc(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r,0),t.set(e,r.length),t}function yc(r){const e=[27,93,55,59];let t=-1;for(let a=r.length-e.length;a>=0;a--)if(r[a]===e[0]&&r[a+1]===e[1]&&r[a+2]===e[2]&&r[a+3]===e[3]){t=a;break}return t===-1?r.slice(Math.max(0,r.length-(e.length-1))):wc(r,t+e.length)===-1?r.slice(t):r.slice(Math.max(0,r.length-(e.length-1)))}function wc(r,e){for(let t=e;t<r.length;t++)if(r[t]===7||r[t]===27&&t+1<r.length&&r[t+1]===92)return t;return-1}function kc(r){const e=[],t=[27,93,55,59];let s=0;for(;s<=r.length-t.length;){if(r[s]===t[0]&&r[s+1]===t[1]&&r[s+2]===t[2]&&r[s+3]===t[3]){s+=t.length;const a=s;let b=-1;for(;s<r.length;){if(r[s]===7){b=s,s+=1;break}if(r[s]===27&&s+1<r.length&&r[s+1]===92){b=s,s+=2;break}s+=1}if(b>a){const d=Sc(r.slice(a,b)),i=Cc(d);i&&e.push(i)}continue}s+=1}return e}function Sc(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Cc(r){if(!r)return"";let e=r;if(e.startsWith("file://")){e=e.slice(7);const t=e.indexOf("/");if(t===-1)return"/";e=e.slice(t)}else e.startsWith("file:")&&(e=e.slice(5));try{e=decodeURIComponent(e)}catch{return e}return e}function qr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function ps(r){return btoa(qr(r))}function xc(r,e,t){let s,a;Pt(r,Vt,re=>t(17,s=re)),Pt(r,Kt,re=>t(36,a=re));let b={},d=[],i=new Map,o=new Map,u=null,g=!1,f=null,m=!1,v="",k="",y="",c="",p="text",h=!1,_=!0,w=null,L=!1,x=null;function E(re,me){re&&Yt.update(ve=>ve.map(pe=>pe.dbSessionId===re?{...pe,dbConnected:me,dbSessionId:null}:pe))}function S({asset:re,sessionId:me}){if(!re||!me)return;if(a.get(me)){Vt.set(me);return}const pe=mc(re,me);Kt.update(we=>(we.set(me,pe),we)),Vt.set(me)}function D({sessionId:re,databaseName:me,tableName:ve}){if(!re||!ve)return;const pe=a.get(re);if(!pe)return;const we=bc(re,me,ve);if(a.get(we)){Vt.set(we);return}const Me=me?`${me}.`:"",Se={sessionId:we,connection:pe.connection,connected:!0,createdAt:Date.now(),lastActivity:Date.now(),type:"database",panelType:"database-table",dbSessionId:re,databaseName:me,tableName:ve,tabName:`${Me}${ve}`};Kt.update(ot=>(ot.set(we,Se),ot)),Vt.set(we)}async function B(re){var ut;if(console.log("Connecting to:",re),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:me,GetPassword:ve,HasPassword:pe,SavePassword:we}=window.wailsBindings;if(typeof me!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let Be="",Me="";if(re.auth_type==="key"){if(Me=await R({title:`连接到 ${re.name}`,message:"如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：",placeholder:"Passphrase（可留空）",inputType:"password",allowEmpty:!0,trimValue:!1}),Me===null)return;Be=re.key_path||""}else try{if(typeof pe=="function"&&await pe(re.id))Be=await ve(re.id),console.log("Using saved password");else{if(Be=await R({title:`连接到 ${re.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Be===null)return;if(Be&&await j("保存密码","是否保存密码以便下次自动连接？","warning")&&typeof we=="function")try{await we(re.id,Be),console.log("Password saved successfully")}catch(Ye){console.error("Failed to save password:",Ye)}}}catch(lt){if(console.error("Failed to get saved password:",lt),Be=await R({title:`连接到 ${re.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Be===null)return}if(!Be){console.log("Connection cancelled - no auth value provided");return}const Se=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",re.host,re.port,re.username,"auth_type:",re.auth_type);const ot={sessionId:Se,connection:re,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};Kt.update(lt=>(lt.set(Se,ot),lt)),Vt.set(Se),await Rr(),await new Promise(lt=>setTimeout(lt,50));let rt=(ut=b[Se])==null?void 0:ut.getSize();if(rt||(rt={cols:80,rows:24},console.warn("Terminal not ready, using default size:",rt)),console.log("Subscribing to events for session:",Se),xe(Se),await new Promise(lt=>setTimeout(lt,100)),!b[Se]){console.error("Terminal component not ready after delay");return}const dt=b[Se];if(!dt){console.error("Failed to get terminal reference for session:",Se);return}console.log("Terminal ready, attempting to connect...");const vt=re.auth_type==="key"?"SSH key":"password";dt.writeln(`正在连接 ${re.username}@${re.host}:${re.port} (${vt})...`),dt.writeln("");try{await me(Se,re.host,re.port,re.username,re.auth_type||"password",Be,Me,rt.cols,rt.rows),ot.connected=!0,Kt.update(lt=>(lt.set(Se,ot),lt)),setTimeout(()=>{dt.focus()},100)}catch(lt){console.error("Failed to connect:",lt),dt&&dt.writeln(`\r
连接失败: ${lt.message||lt}`),await I(Se)}}function R({title:re,message:me,placeholder:ve,defaultValue:pe,inputType:we,allowEmpty:Be,trimValue:Me}){return new Promise(Se=>{t(4,v=re||""),t(5,k=me||""),t(6,y=ve||""),t(7,c=pe||""),t(8,p=we),t(9,h=!!Be),t(10,_=Me!==!1),w=Se,t(3,m=!0)})}function P(re){t(3,m=!1),w&&(w(re),w=null)}function A(){t(3,m=!1),w&&(w(null),w=null)}function j(re,me,ve="default"){return new Promise(pe=>{t(12,K=re),t(13,V=me),t(14,$=ve),x=pe,t(11,L=!0)})}let K="",V="",$="default";function U(){t(11,L=!1),x&&(x(!0),x=null)}function M(){t(11,L=!1),x&&(x(!1),x=null)}async function I(re){const me=a.get(re),ve=(me==null?void 0:me.type)==="database"&&(me==null?void 0:me.panelType)==="database-list",pe=(me==null?void 0:me.type)==="database"&&(me==null?void 0:me.panelType)==="database-table",we=i.get(re);if(we&&(we(),i.delete(re)),delete b[re],ve){const{CloseDatabase:Me}=window.wailsBindings||{};if(typeof Me=="function")try{await Me(re)}catch(Se){console.error("Failed to close database session:",Se)}E(re,!1)}else if(!pe){const{CloseSSH:Me}=window.wailsBindings||{};if(typeof Me=="function")try{await Me(re)}catch(Se){console.error("Failed to close session:",Se)}}Kt.update(Me=>(Me.delete(re),ve&&Array.from(Me.entries()).filter(([ot,rt])=>(rt==null?void 0:rt.type)==="database"&&(rt==null?void 0:rt.dbSessionId)===re).map(([ot])=>ot).forEach(ot=>Me.delete(ot)),Me));const Be=Array.from(a.keys());s===re&&(Be.length>0?Vt.set(Be[0]):Vt.set(null))}function H(re){a.has(re)&&(Vt.set(re),setTimeout(()=>{const me=b[re];if(me){me.focus();const ve=me.getSize(),{ResizeSSH:pe}=window.wailsBindings||{};typeof pe=="function"&&pe(re,ve.cols,ve.rows).catch(console.error)}},50))}function z(re,me){me.stopPropagation();const ve=a.get(re);ve&&(ve.type!=="database"&&ve.connected?(f=re,t(2,g=!0)):I(re))}function ee(){f&&(I(f),f=null),t(2,g=!1)}function q(){f=null,t(2,g=!1)}function Z(re,me){const ve=a.get(re);ve&&(ve.tabName=me.trim(),Kt.update(pe=>(pe.set(re,ve),pe)))}let Y=null,F="";function T(re){const me=a.get(re);me&&(t(15,Y=re),t(16,F=me.tabName||me.connection.name))}function Q(){Y&&F.trim()&&Z(Y,F.trim()),t(15,Y=null),t(16,F="")}function G(){t(15,Y=null),t(16,F="")}function ne(re){re.key==="Enter"?Q():re.key==="Escape"&&G()}async function ie(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}await ce("")}async function ce(re){var Me;const{ConnectLocalShell:me}=window.wailsBindings,ve=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,pe={sessionId:ve,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};Kt.update(Se=>(Se.set(ve,pe),Se)),Vt.set(ve),await Rr(),await new Promise(Se=>setTimeout(Se,50));let we=(Me=b[ve])==null?void 0:Me.getSize();if(we||(we={cols:80,rows:24},console.warn("Terminal not ready, using default size:",we)),console.log("Subscribing to local events for session:",ve),ue(ve),await new Promise(Se=>setTimeout(Se,100)),!b[ve]){console.error("Terminal component not ready after delay");return}const Be=b[ve];if(!Be){console.error("Failed to get terminal reference for session:",ve);return}console.log("Terminal ready, starting local shell..."),Be.writeln("正在启动本地终端..."),Be.writeln("");try{await me(ve,re,we.cols,we.rows),pe.connected=!0,Kt.update(Se=>(Se.set(ve,pe),Se)),setTimeout(()=>{Be.focus()},100)}catch(Se){console.error("Failed to start local shell:",Se),Be&&Be.writeln(`\r
启动本地终端失败: ${Se.message||Se}`),await I(ve)}}function ue(re){const me=`local:output:${re}`,ve=Lr(me,pe=>{const we=b[re];if(we){const Be=atob(pe),Me=new Uint8Array(Be.length);for(let Se=0;Se<Be.length;Se++)Me[Se]=Be.charCodeAt(Se);be(re,Me,!0),we.write(Me)}});i.set(re,ve)}function be(re,me,ve){if(!re||!me||me.length===0||ve)return;const{paths:pe,pending:we}=_e(re,me);if(o.set(re,we),pe.length===0)return;const Be=pe[pe.length-1];if(!Be)return;const{UpdateCurrentPath:Me}=window.wailsBindings||{};typeof Me=="function"&&Me(re,Be).catch(Se=>{console.error("Failed to update current path:",Se)})}function _e(re,me){const ve=o.get(re),pe=ve&&ve.length>0?vc(ve,me):me,we=kc(pe),Be=yc(pe);return{paths:we,pending:Be}}function ke(re,me){if(!a.has(re))return;const ve=a.get(re),{SendSSHData:pe,SendLocalShellData:we}=window.wailsBindings||{};ve&&ve.type==="local"?typeof we=="function"&&we(re,me).catch(Be=>{console.error("Failed to send local shell data:",Be)}):typeof pe=="function"&&pe(re,me).catch(Be=>{console.error("Failed to send SSH data:",Be)})}function Ne(re,me){if(!a.has(re))return;const ve=a.get(re),{SendSSHData:pe,SendSSHDataBinary:we,SendLocalShellData:Be,SendLocalShellDataBinary:Me}=window.wailsBindings||{};if(ve&&ve.type==="local"){if(typeof Me=="function"){const Se=ps(me);Me(re,Se).catch(ot=>{console.error("Failed to send local shell binary data:",ot)})}else if(typeof Be=="function"){const Se=qr(me);Be(re,Se).catch(ot=>{console.error("Failed to send local shell data:",ot)})}}else if(typeof we=="function"){const Se=ps(me);we(re,Se).catch(ot=>{console.error("Failed to send SSH binary data:",ot)})}else if(typeof pe=="function"){const Se=qr(me);pe(re,Se).catch(ot=>{console.error("Failed to send SSH data:",ot)})}}function De(re,me,ve){if(!a.has(re))return;const pe=a.get(re),{ResizeSSH:we,ResizeLocalShell:Be}=window.wailsBindings||{};pe&&pe.type==="local"?typeof Be=="function"&&Be(re,me,ve).catch(Me=>{console.error("Failed to resize local terminal:",Me)}):typeof we=="function"&&we(re,me,ve).catch(Me=>{console.error("Failed to resize SSH terminal:",Me)})}function xe(re){const me=`ssh:output:${re}`,ve=Lr(me,pe=>{const we=b[re];if(we){const Be=atob(pe),Me=new Uint8Array(Be.length);for(let Se=0;Se<Be.length;Se++)Me[Se]=Be.charCodeAt(Se);be(re,Me,!1),we.write(Me)}});i.set(re,ve)}Ir(()=>{i.forEach(re=>{re()}),u&&window.removeEventListener("database:table-select",u)}),ar(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=b,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",d),u=re=>{const me=re==null?void 0:re.detail;me&&D(me)},window.addEventListener("database:table-select",u),await Rr(),s&&b[s]&&setTimeout(()=>{b[s].focus()},100)});function Ce(){F=this.value,t(16,F)}const se=(re,me)=>z(re.sessionId,me),ge=re=>H(re.sessionId),fe=re=>T(re.sessionId),Ee=(re,me)=>{(me.key==="Enter"||me.key===" ")&&(me.preventDefault(),H(re.sessionId))};function Ge(re,me){_t[re?"unshift":"push"](()=>{b[me.sessionId]=re,t(0,b)})}function at(re){g=re,t(2,g)}function Fe(re){L=re,t(11,L)}function $e(re){m=re,t(3,m)}return r.$$.update=()=>{r.$$.dirty[1]&32&&t(1,d=a?Array.from(a.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=b)},[b,d,g,m,v,k,y,c,p,h,_,L,K,V,$,Y,F,s,P,A,U,M,H,z,ee,q,T,Q,ne,ie,ke,Ne,De,S,B,xe,a,Ce,se,ge,fe,Ee,Ge,at,Fe,$e]}class Ec extends Et{constructor(e){super(),xt(this,e,xc,gc,St,{openDatabaseSession:33,handleConnect:34,subscribeToOutput:35},null,[-1,-1,-1])}get openDatabaseSession(){return this.$$.ctx[33]}get handleConnect(){return this.$$.ctx[34]}get subscribeToOutput(){return this.$$.ctx[35]}}function Lc(r){return window.go.main.App.AddConnection(r)}function Dc(r,e){return window.go.main.App.CalculateHash(r,e)}function Yr(r){return window.go.main.App.CancelTransfer(r)}function Mc(r,e){return window.go.main.App.ChangeDirectory(r,e)}function Tc(r){return window.go.main.App.CloseDatabase(r)}function Bc(r){return window.go.main.App.CloseSSH(r)}function Ac(r,e,t,s,a,b,d){return window.go.main.App.ConnectDatabase(r,e,t,s,a,b,d)}function Rc(r,e,t,s){return window.go.main.App.ConnectLocalShell(r,e,t,s)}function Oc(r,e,t,s,a,b,d,i,o){return window.go.main.App.ConnectSSH(r,e,t,s,a,b,d,i,o)}function Pc(r,e){return window.go.main.App.CreateDirectory(r,e)}function Ic(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function Hc(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function Fc(r){return window.go.main.App.DecodeBase64(r)}function zc(r,e,t,s){return window.go.main.App.DecryptText(r,e,t,s)}function jc(r,e){return window.go.main.App.DeleteFile(r,e)}function ao(r,e){return window.go.main.App.DeleteFiles(r,e)}function Wc(r){return window.go.main.App.DeletePassword(r)}function Nc(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function co(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function Uc(r){return window.go.main.App.EncodeBase64(r)}function Vc(r,e,t,s){return window.go.main.App.EncryptText(r,e,t,s)}function Kc(r){return window.go.main.App.EscapeJSON(r)}function qc(r,e){return window.go.main.App.ExecuteDatabaseQuery(r,e)}function Gc(r){return window.go.main.App.ExportConnections(r)}function Jc(r,e){return window.go.main.App.ExportConnectionsByIDs(r,e)}function Yc(r,e){return window.go.main.App.ExportConnectionsByIDsWithPassphrase(r,e)}function Xc(r){return window.go.main.App.FormatJSON(r)}function Zc(){return window.go.main.App.GenerateUUIDv4()}function Qc(r){return window.go.main.App.GetConnection(r)}function $c(){return window.go.main.App.GetConnections()}function ed(r){return window.go.main.App.GetCurrentPath(r)}function td(){return window.go.main.App.GetCurrentTimestamp()}function rd(){return window.go.main.App.GetCurrentTimestampMs()}function id(r,e){return window.go.main.App.GetFileInfo(r,e)}function sd(r){return window.go.main.App.GetFileManagerSettings(r)}function nd(r){return window.go.main.App.GetMonitoringData(r)}function od(r){return window.go.main.App.GetPassword(r)}function ld(){return window.go.main.App.GetSettings()}function ad(r,e){return window.go.main.App.GetTableColumns(r,e)}function cd(r){return window.go.main.App.GetTransferStatus(r)}function dd(){return window.go.main.App.GetVersion()}function hd(r){return window.go.main.App.Greet(r)}function ud(r){return window.go.main.App.HasPassword(r)}function fd(r){return window.go.main.App.ImportConnections(r)}function pd(r){return window.go.main.App.ImportConnectionsFromFile(r)}function _d(r,e){return window.go.main.App.ImportConnectionsFromFileWithPassphrase(r,e)}function gd(r,e){return window.go.main.App.ImportConnectionsWithPassphrase(r,e)}function md(r){return window.go.main.App.ListDatabaseTables(r)}function bd(r,e){return window.go.main.App.ListDatabaseTablesInDatabase(r,e)}function vd(r){return window.go.main.App.ListDatabases(r)}function ho(r,e){return window.go.main.App.ListFiles(r,e)}function yd(){return window.go.main.App.ListSSHSessions()}function wd(r){return window.go.main.App.MinifyJSON(r)}function kd(r){return window.go.main.App.ParseURL(r)}function Sd(r){return window.go.main.App.RemoveConnection(r)}function uo(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function Cd(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function xd(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function Ed(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function Ld(r,e){return window.go.main.App.SavePassword(r,e)}function fo(r,e,t,s,a){return window.go.main.App.SearchDirectories(r,e,t,s,a)}function po(){return window.go.main.App.SelectDownloadDirectory()}function Dd(){return window.go.main.App.SelectImportFile()}function Md(){return window.go.main.App.SelectSSHKeyFile()}function _o(){return window.go.main.App.SelectUploadFiles()}function Td(r,e){return window.go.main.App.SendLocalShellData(r,e)}function Bd(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function Ad(r,e){return window.go.main.App.SendSSHData(r,e)}function Rd(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function Od(){return window.go.main.App.ShowAboutDialog()}function Pd(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function Id(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function Hd(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function Fd(r,e,t,s,a,b){return window.go.main.App.TestConnection(r,e,t,s,a,b)}function zd(r,e,t,s,a,b){return window.go.main.App.TestDatabaseConnection(r,e,t,s,a,b)}function jd(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function Wd(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function Nd(r,e){return window.go.main.App.URLDecode(r,e)}function Ud(r,e){return window.go.main.App.URLEncode(r,e)}function Vd(r){return window.go.main.App.UpdateConnection(r)}function Kd(r,e){return window.go.main.App.UpdateCurrentPath(r,e)}function qd(r,e){return window.go.main.App.UpdateFileManagerSettings(r,e)}function Gd(r){return window.go.main.App.UpdateSettings(r)}function go(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function Jd(r){return window.go.main.App.ValidateJSON(r)}const mo=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:Lc,CalculateHash:Dc,CancelTransfer:Yr,ChangeDirectory:Mc,CloseDatabase:Tc,CloseSSH:Bc,ConnectDatabase:Ac,ConnectLocalShell:Rc,ConnectSSH:Oc,CreateDirectory:Pc,DateTimeToTimestamp:Ic,DateTimeToTimestampMs:Hc,DecodeBase64:Fc,DecryptText:zc,DeleteFile:jc,DeleteFiles:ao,DeletePassword:Wc,DownloadFile:Nc,DownloadFiles:co,EncodeBase64:Uc,EncryptText:Vc,EscapeJSON:Kc,ExecuteDatabaseQuery:qc,ExportConnections:Gc,ExportConnectionsByIDs:Jc,ExportConnectionsByIDsWithPassphrase:Yc,FormatJSON:Xc,GenerateUUIDv4:Zc,GetConnection:Qc,GetConnections:$c,GetCurrentPath:ed,GetCurrentTimestamp:td,GetCurrentTimestampMs:rd,GetFileInfo:id,GetFileManagerSettings:sd,GetMonitoringData:nd,GetPassword:od,GetSettings:ld,GetTableColumns:ad,GetTransferStatus:cd,GetVersion:dd,Greet:hd,HasPassword:ud,ImportConnections:fd,ImportConnectionsFromFile:pd,ImportConnectionsFromFileWithPassphrase:_d,ImportConnectionsWithPassphrase:gd,ListDatabaseTables:md,ListDatabaseTablesInDatabase:bd,ListDatabases:vd,ListFiles:ho,ListSSHSessions:yd,MinifyJSON:wd,ParseURL:kd,RemoveConnection:Sd,RenameFile:uo,ResizeLocalShell:Cd,ResizeSSH:xd,SaveBinaryFile:Ed,SavePassword:Ld,SearchDirectories:fo,SelectDownloadDirectory:po,SelectImportFile:Dd,SelectSSHKeyFile:Md,SelectUploadFiles:_o,SendLocalShellData:Td,SendLocalShellDataBinary:Bd,SendSSHData:Ad,SendSSHDataBinary:Rd,ShowAboutDialog:Od,ShowErrorDialog:Pd,ShowMessageDialog:Id,ShowQuestionDialog:Hd,TestConnection:Fd,TestDatabaseConnection:zd,TimestampToDateTime:jd,TimestampToDateTimeMs:Wd,URLDecode:Nd,URLEncode:Ud,UpdateConnection:Vd,UpdateCurrentPath:Kd,UpdateFileManagerSettings:qd,UpdateSettings:Gd,UploadFiles:go,ValidateJSON:Jd},Symbol.toStringTag,{value:"Module"})),Yd={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:Xd,set:Zd,update:ir}=ur(Yd),Hr={subscribe:Xd,set:Zd,addTransfer:r=>ir(e=>{const t=e.transfers.filter(a=>a.status!=="running");let s=e.transfers;if(t.length>=e.maxHistory){const a=t.length-e.maxHistory+1,b=t.slice(0,a).map(d=>d.id);s=e.transfers.filter(d=>!b.includes(d.id))}return{...e,transfers:[r,...s]}}),updateTransfer:(r,e)=>ir(t=>({...t,transfers:t.transfers.map(s=>s.id===r?{...s,...e}:s)})),cancelTransfer:r=>ir(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>ir(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>ir(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>ir(r=>({...r,transfers:[]})),togglePanel:()=>ir(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>ir(e=>({...e,isPanelOpen:r})),setActiveTab:r=>ir(e=>({...e,activeTab:r}))};function sr(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function _s(r){return r?`${sr(r)}/s`:"0 B/s"}function Br(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const Qd=rr(Hr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),$d=rr(Hr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));rr(Hr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(b=>b.status==="running");if(e.length===0)return 0;let t=0,s=0;return e.forEach(b=>{const d=b.totalBytes||0,i=b.bytesSent||0;t+=d,s+=i}),t>0?s/t*100:e.reduce((b,d)=>d.totalBytes?b+d.bytesSent/d.totalBytes*100:b+(d.percentage||0),0)/e.length});const qt=Hr,{Map:Fr}=Xn;function gs(r,e,t){const s=r.slice();return s[113]=e[t],s[115]=t,s}function ms(r,e,t){const s=r.slice();return s[116]=e[t],s[115]=t,s}function bs(r,e,t){const s=r.slice();return s[118]=e[t],s[115]=t,s}function vs(r,e,t){const s=r.slice();return s[113]=e[t],s[115]=t,s}function ys(r){let e,t,s,a,b,d,i=r[4]?"跟踪中":"已暂停",o,u,g,f;return{c(){e=C("button"),t=de("svg"),s=de("path"),a=de("path"),b=O(),d=C("span"),o=J(i),n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),n(a,"stroke-linecap","round"),n(a,"stroke-linejoin","round"),n(a,"stroke-width","2"),n(a,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),n(t,"class","w-3 h-3"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"viewBox","0 0 24 24"),e.disabled=r[6],n(e,"class",u=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${r[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`),n(e,"title","切换目录跟踪")},m(m,v){N(m,e,v),l(e,t),l(t,s),l(t,a),l(e,b),l(e,d),l(d,o),g||(f=X(e,"click",r[65]),g=!0)},p(m,v){v[0]&16&&i!==(i=m[4]?"跟踪中":"已暂停")&&he(o,i),v[0]&64&&(e.disabled=m[6]),v[0]&16&&u!==(u=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${m[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`)&&n(e,"class",u)},d(m){m&&W(e),g=!1,f()}}}function eh(r){let e,t,s;function a(i,o){return i[3]==="/"?ih:rh}let b=a(r),d=b(r);return{c(){e=C("span"),d.c(),n(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),n(e,"title","点击编辑路径")},m(i,o){N(i,e,o),d.m(e,null),t||(s=X(e,"click",r[51]),t=!0)},p(i,o){b===(b=a(i))&&d?d.p(i,o):(d.d(1),d=b(i),d&&(d.c(),d.m(e,null)))},d(i){i&&W(e),d.d(),t=!1,s()}}}function th(r){let e,t,s,a,b;return{c(){e=C("span"),e.textContent="/",t=O(),s=C("input"),n(e,"class","text-gray-400 dark:text-gray-500"),n(s,"type","text"),n(s,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(d,i){N(d,e,i),N(d,t,i),N(d,s,i),Re(s,r[21]),a||(b=[X(s,"input",r[68]),X(s,"keydown",r[69]),X(s,"blur",r[52]),Yn(bo.call(null,s))],a=!0)},p(d,i){i[0]&2097152&&s.value!==d[21]&&Re(s,d[21])},d(d){d&&(W(e),W(t),W(s)),a=!1,Qe(b)}}}function rh(r){let e=r[3].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=J(e)},m(s,a){N(s,t,a)},p(s,a){a[0]&8&&e!==(e=s[3].split("/").filter(Boolean).join(" / ")+"")&&he(t,e)},d(s){s&&W(t)}}}function ih(r){let e;return{c(){e=J("/")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function ws(r){let e,t,s,a,b,d;function i(g,f){return g[28].length>0?nh:sh}let o=i(r),u=o(r);return{c(){e=C("div"),t=C("div"),s=C("input"),a=O(),u.c(),n(s,"type","text"),n(s,"placeholder","搜索历史..."),n(s,"class","w-full px-2 py-1 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"),n(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),n(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg w-64 max-h-64 overflow-y-auto z-10")},m(g,f){N(g,e,f),l(e,t),l(t,s),Re(s,r[2]),l(e,a),u.m(e,null),b||(d=X(s,"input",r[71]),b=!0)},p(g,f){f[0]&4&&s.value!==g[2]&&Re(s,g[2]),o===(o=i(g))&&u?u.p(g,f):(u.d(1),u=o(g),u&&(u.c(),u.m(e,null)))},d(g){g&&W(e),u.d(),b=!1,d()}}}function sh(r){let e,t=r[2]?"无匹配的历史":"暂无历史记录",s;return{c(){e=C("div"),s=J(t),n(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&4&&t!==(t=a[2]?"无匹配的历史":"暂无历史记录")&&he(s,t)},d(a){a&&W(e)}}}function nh(r){let e=[],t=new Fr,s,a=ze(r[28]);const b=d=>d[113];for(let d=0;d<a.length;d+=1){let i=vs(r,a,d),o=b(i);t.set(o,e[d]=ks(o,i))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();s=Ht()},m(d,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(d,i);N(d,s,i)},p(d,i){i[0]&268435972|i[1]&131072&&(a=ze(d[28]),e=Jt(e,i,b,1,d,a,t,s.parentNode,Xt,ks,s,vs))},d(d){d&&W(s);for(let i=0;i<e.length;i+=1)e[i].d(d)}}}function ks(r,e){let t,s=e[113]+"",a,b,d,i;function o(){return e[72](e[113])}return{key:r,first:null,c(){t=C("button"),a=J(s),b=O(),n(t,"class","w-full text-left px-3 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-purple-50 dark:hover:bg-purple-900/30 truncate"),this.first=t},m(u,g){N(u,t,g),l(t,a),l(t,b),d||(i=X(t,"click",o),d=!0)},p(u,g){e=u,g[0]&268435456&&s!==(s=e[113]+"")&&he(a,s)},d(u){u&&W(t),d=!1,i()}}}function Ss(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c=r[13]&&Cs();function p(w,L){if(L[0]&10240&&(f=null),w[12].length>0)return lh;if(f==null&&(f=!!(w[11].trim()&&!w[13])),f)return oh}let h=p(r,[-1,-1,-1,-1]),_=h&&h(r);return{c(){e=C("div"),t=C("div"),s=C("div"),a=C("div"),b=C("input"),d=O(),i=de("svg"),o=de("path"),u=O(),c&&c.c(),g=O(),_&&_.c(),m=O(),v=C("button"),v.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',n(b,"type","text"),n(b,"placeholder","搜索文件夹名称..."),n(b,"class","w-full px-3 py-2 pl-9 text-xs bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"),n(o,"stroke-linecap","round"),n(o,"stroke-linejoin","round"),n(o,"stroke-width","2"),n(o,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),n(i,"class","w-4 h-4 text-amber-500 absolute left-3 top-1/2 transform -translate-y-1/2"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"viewBox","0 0 24 24"),n(a,"class","relative"),n(s,"class","relative flex-1"),n(v,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),n(v,"title","取消"),n(t,"class","flex items-center gap-2"),n(e,"class","mt-2 relative")},m(w,L){N(w,e,L),l(e,t),l(t,s),l(s,a),l(a,b),Re(b,r[11]),l(a,d),l(a,i),l(i,o),l(a,u),c&&c.m(a,null),l(s,g),_&&_.m(s,null),l(t,m),l(t,v),k||(y=[X(b,"input",r[73]),X(b,"keydown",r[55]),X(b,"input",r[54]),Yn(bo.call(null,b)),X(v,"click",r[56])],k=!0)},p(w,L){L[0]&2048&&b.value!==w[11]&&Re(b,w[11]),w[13]?c||(c=Cs(),c.c(),c.m(a,null)):c&&(c.d(1),c=null),h===(h=p(w,L))&&_?_.p(w,L):(_&&_.d(1),_=h&&h(w),_&&(_.c(),_.m(s,null)))},d(w){w&&W(e),c&&c.d(),_&&_.d(),k=!1,Qe(y)}}}function Cs(r){let e,t,s;return{c(){e=de("svg"),t=de("circle"),s=de("path"),n(t,"class","opacity-25"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(t,"stroke","currentColor"),n(t,"stroke-width","4"),n(s,"class","opacity-75"),n(s,"fill","currentColor"),n(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),n(e,"class","w-4 h-4 text-amber-500 absolute right-3 top-1/2 transform -translate-y-1/2 animate-spin"),n(e,"fill","none"),n(e,"viewBox","0 0 24 24")},m(a,b){N(a,e,b),l(e,t),l(e,s)},d(a){a&&W(e)}}}function oh(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center">未找到匹配的文件夹</div>',n(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function lh(r){let e,t,s,a=r[12].length+"",b,d,i,o=[],u=new Fr,g=ze(r[12]);const f=m=>m[118].path;for(let m=0;m<g.length;m+=1){let v=bs(r,g,m),k=f(v);u.set(k,o[m]=xs(k,v))}return{c(){e=C("div"),t=C("div"),s=J("找到 "),b=J(a),d=J(" 个文件夹"),i=O();for(let m=0;m<o.length;m+=1)o[m].c();n(t,"class","px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"),n(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto z-10")},m(m,v){N(m,e,v),l(e,t),l(t,s),l(t,b),l(t,d),l(e,i);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(e,null)},p(m,v){v[0]&4096&&a!==(a=m[12].length+"")&&he(b,a),v[0]&22528|v[1]&33685504&&(g=ze(m[12]),o=Jt(o,v,f,1,m,g,u,e,Xt,xs,null,bs))},d(m){m&&W(e);for(let v=0;v<o.length;v+=1)o[v].d()}}}function xs(r,e){let t,s,a,b,d,i,o,u=As(e[118].name,e[11])+"",g,f,m=e[118].path+"",v,k,y,c,p;function h(){return e[74](e[118])}function _(){return e[75](e[115])}return{key:r,first:null,c(){t=C("button"),s=C("div"),a=de("svg"),b=de("path"),d=O(),i=C("div"),o=C("div"),g=O(),f=C("div"),v=J(m),k=O(),n(b,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),n(a,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),n(a,"fill","currentColor"),n(a,"viewBox","0 0 24 24"),n(o,"class","text-gray-900 dark:text-white font-medium truncate"),n(f,"class","text-gray-400 dark:text-gray-500 text-[10px] truncate"),n(i,"class","flex-1 min-w-0"),n(s,"class","flex items-center gap-2"),n(t,"class",y=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`),this.first=t},m(w,L){N(w,t,L),l(t,s),l(s,a),l(a,b),l(s,d),l(s,i),l(i,o),o.innerHTML=u,l(i,g),l(i,f),l(f,v),l(t,k),c||(p=[X(t,"click",h),X(t,"mouseenter",_)],c=!0)},p(w,L){e=w,L[0]&6144&&u!==(u=As(e[118].name,e[11])+"")&&(o.innerHTML=u),L[0]&4096&&m!==(m=e[118].path+"")&&he(v,m),L[0]&20480&&y!==(y=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`)&&n(t,"class",y)},d(w){w&&W(t),c=!1,Qe(p)}}}function ah(r){let e=[],t=new Fr,s,a=ze(r[29]);const b=d=>d[116].path;for(let d=0;d<a.length;d+=1){let i=ms(r,a,d),o=b(i);t.set(o,e[d]=Es(o,i))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();s=Ht()},m(d,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(d,i);N(d,s,i)},p(d,i){i[0]&537165824|i[1]&131312&&(a=ze(d[29]),e=Jt(e,i,b,1,d,a,t,s.parentNode,Xt,Es,s,ms))},d(d){d&&W(s);for(let i=0;i<e.length;i+=1)e[i].d(d)}}}function ch(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',n(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function dh(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',n(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function hh(r){let e,t,s,a,b,d,i,o,u,g;return{c(){e=C("div"),t=de("svg"),s=de("path"),a=O(),b=C("span"),d=J(r[17]),i=O(),o=C("button"),o.textContent="重试",n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),n(t,"class","w-6 h-6"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"viewBox","0 0 24 24"),n(b,"class","text-center px-4"),n(o,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),n(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(f,m){N(f,e,m),l(e,t),l(t,s),l(e,a),l(e,b),l(b,d),l(e,i),l(e,o),u||(g=X(o,"click",r[33]),u=!0)},p(f,m){m[0]&131072&&he(d,f[17])},d(f){f&&W(e),u=!1,g()}}}function uh(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',n(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function fh(r){let e,t,s,a,b,d,i,o=r[116].name+"",u,g,f,m,v=sr(r[116].size)+"",k,y,c,p,h,_=r[116].modified+"",w,L,x,E=r[116].mode+"",S;return{c(){e=C("div"),t=O(),s=de("svg"),a=de("path"),b=O(),d=C("div"),i=C("div"),u=J(o),g=O(),f=C("div"),m=C("span"),k=J(v),y=O(),c=C("span"),c.textContent="•",p=O(),h=C("span"),w=J(_),L=O(),x=C("span"),S=J(E),n(e,"class","w-3"),n(a,"stroke-linecap","round"),n(a,"stroke-linejoin","round"),n(a,"stroke-width","2"),n(a,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),n(s,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),n(s,"fill","none"),n(s,"stroke","currentColor"),n(s,"viewBox","0 0 24 24"),n(i,"class","text-gray-900 dark:text-white font-medium truncate"),n(f,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),n(d,"class","flex-1 min-w-0"),n(x,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(D,B){N(D,e,B),N(D,t,B),N(D,s,B),l(s,a),N(D,b,B),N(D,d,B),l(d,i),l(i,u),l(d,g),l(d,f),l(f,m),l(m,k),l(f,y),l(f,c),l(f,p),l(f,h),l(h,w),N(D,L,B),N(D,x,B),l(x,S)},p(D,B){B[0]&536870912&&o!==(o=D[116].name+"")&&he(u,o),B[0]&536870912&&v!==(v=sr(D[116].size)+"")&&he(k,v),B[0]&536870912&&_!==(_=D[116].modified+"")&&he(w,_),B[0]&536870912&&E!==(E=D[116].mode+"")&&he(S,E)},d(D){D&&(W(e),W(t),W(s),W(b),W(d),W(L),W(x))}}}function ph(r){let e,t,s,a,b,d,i,o=r[116].name+"",u;function g(v,k){return k[0]&536903680&&(e=null),e==null&&(e=!!v[15].has(v[116].path)),e?mh:gh}let f=g(r,[-1,-1,-1,-1]),m=f(r);return{c(){m.c(),t=O(),s=de("svg"),a=de("path"),b=O(),d=C("div"),i=C("div"),u=J(o),n(a,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),n(s,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),n(s,"fill","currentColor"),n(s,"viewBox","0 0 24 24"),n(i,"class","text-gray-900 dark:text-white font-medium truncate"),n(d,"class","flex-1 min-w-0")},m(v,k){m.m(v,k),N(v,t,k),N(v,s,k),l(s,a),N(v,b,k),N(v,d,k),l(d,i),l(i,u)},p(v,k){f!==(f=g(v,k))&&(m.d(1),m=f(v),m&&(m.c(),m.m(t.parentNode,t))),k[0]&536870912&&o!==(o=v[116].name+"")&&he(u,o)},d(v){v&&(W(t),W(s),W(b),W(d)),m.d(v)}}}function _h(r){let e,t,s,a,b,d=r[116].name+"",i,o,u;return{c(){e=de("svg"),t=de("path"),s=O(),a=C("div"),b=C("div"),i=J(d),o=O(),u=C("div"),u.textContent="返回上一层",n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),n(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24"),n(b,"class","text-gray-600 dark:text-gray-300"),n(u,"class","text-gray-400 dark:text-gray-500 text-[10px]"),n(a,"class","flex-1 min-w-0")},m(g,f){N(g,e,f),l(e,t),N(g,s,f),N(g,a,f),l(a,b),l(b,i),l(a,o),l(a,u)},p(g,f){f[0]&536870912&&d!==(d=g[116].name+"")&&he(i,d)},d(g){g&&(W(e),W(s),W(a))}}}function gh(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M9 5l7 7-7 7"),n(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function mh(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M19 9l-7 7-7-7"),n(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function Es(r,e){let t,s,a,b,d;function i(v,k){return v[116].is_parent?_h:v[116].is_dir?ph:fh}let o=i(e),u=o(e);function g(){return e[76](e[116])}function f(){return e[77](e[116])}function m(...v){return e[78](e[116],...v)}return{key:r,first:null,c(){t=C("div"),u.c(),s=O(),n(t,"class",a="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(v,k){N(v,t,k),u.m(t,null),l(t,s),b||(d=[X(t,"click",g),X(t,"dblclick",f),X(t,"contextmenu",m)],b=!0)},p(v,k){e=v,o===(o=i(e))&&u?u.p(e,k):(u.d(1),u=o(e),u&&(u.c(),u.m(t,s))),k[0]&537133056&&a!==(a="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&n(t,"class",a)},d(v){v&&W(t),u.d(),b=!1,Qe(d)}}}function Ls(r){let e,t,s,a,b,d,i,o,u,g,f;return{c(){var m;e=C("div"),t=C("button"),s=J("下载"),b=O(),d=C("button"),d.textContent="重命名",i=O(),o=C("button"),o.textContent="删除",n(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=a=(m=r[19].file)==null?void 0:m.is_dir,n(d,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),n(o,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),n(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),n(e,"style",u=`left: ${r[19].x}px; top: ${r[19].y}px;`)},m(m,v){N(m,e,v),l(e,t),l(t,s),l(e,b),l(e,d),l(e,i),l(e,o),g||(f=[X(t,"click",r[44]),X(d,"click",r[45]),X(o,"click",r[43])],g=!0)},p(m,v){var k;v[0]&524288&&a!==(a=(k=m[19].file)==null?void 0:k.is_dir)&&(t.disabled=a),v[0]&524288&&u!==(u=`left: ${m[19].x}px; top: ${m[19].y}px;`)&&n(e,"style",u)},d(m){m&&W(e),g=!1,Qe(f)}}}function Ds(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y=r[0].historyEnabled&&Ms(r),F=r[0].historyEnabled&&r[0].history.length>0&&Ts(r);return{c(){e=C("div"),t=C("div"),s=O(),a=C("div"),b=C("div"),d=C("div"),i=C("div"),i.innerHTML='<div class="p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div><h3 class="text-lg font-semibold tracking-tight bg-clip-text text-transparent" style="background-image: linear-gradient(90deg, var(--text-primary), var(--accent-primary));">文件管理设置</h3> <div class="text-[11px] uppercase tracking-[0.15em] text-slate-400 dark:text-slate-500 mt-0.5">Preferences</div></div>',o=O(),u=C("button"),u.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',g=O(),f=C("div"),m=C("div"),v=C("div"),v.innerHTML='<svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">功能设置</span>',k=O(),y=C("div"),c=C("div"),c.innerHTML='<div class="p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">目录跟踪</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">实时同步终端目录变化</div></div>',p=O(),h=C("button"),_=C("span"),x=O(),E=C("div"),S=C("div"),S.innerHTML='<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">历史记录</span>',D=O(),B=C("div"),R=C("div"),R.innerHTML='<div class="p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">启用历史记录</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">自动记录访问过的目录</div></div>',P=O(),A=C("button"),j=C("span"),$=O(),Y&&Y.c(),U=O(),F&&F.c(),M=O(),I=C("div"),H=C("button"),H.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            恢复默认`,z=O(),ee=C("button"),ee.textContent="完成",n(t,"class","fixed inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),n(i,"class","flex items-center gap-3"),n(u,"class","p-2 rounded-xl transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),n(u,"title","关闭"),n(d,"class","flex items-center justify-between"),n(b,"class","px-5 py-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-b border-slate-200/70 dark:border-slate-800/80"),n(v,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),n(c,"class","flex items-center gap-3"),n(_,"class",w=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].directoryTracking?"translate-x-6":"translate-x-1"}`),n(h,"class",L=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`),n(y,"class","flex items-center justify-between py-2"),n(m,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),n(S,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),n(R,"class","flex items-center gap-3"),n(j,"class",K=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].historyEnabled?"translate-x-6":"translate-x-1"}`),n(A,"class",V=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].historyEnabled?"accent-gradient shadow-lg":"bg-slate-200 dark:bg-slate-600"}`),n(B,"class","flex items-center justify-between py-2 mb-4"),n(E,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),n(f,"class","flex-1 overflow-y-auto p-5 space-y-4 bg-slate-50/50 dark:bg-slate-950/30"),n(H,"class","px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all duration-200 flex items-center gap-1.5"),n(ee,"class","px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"),n(I,"class","p-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-t border-slate-200/70 dark:border-slate-800/80 flex justify-between items-center"),n(a,"class","relative bg-white/95 dark:bg-slate-900/90 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] w-[420px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),n(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(T,Q){N(T,e,Q),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),l(d,i),l(d,o),l(d,u),l(a,g),l(a,f),l(f,m),l(m,v),l(m,k),l(m,y),l(y,c),l(y,p),l(y,h),l(h,_),l(f,x),l(f,E),l(E,S),l(E,D),l(E,B),l(B,R),l(B,P),l(B,A),l(A,j),l(E,$),Y&&Y.m(E,null),l(f,U),F&&F.m(f,null),l(a,M),l(a,I),l(I,H),l(I,z),l(I,ee),q||(Z=[X(t,"click",r[82]),X(u,"click",r[83]),X(h,"click",r[84]),X(A,"click",r[85]),X(H,"click",r[89]),X(ee,"click",r[90])],q=!0)},p(T,Q){Q[0]&1&&w!==(w=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].directoryTracking?"translate-x-6":"translate-x-1"}`)&&n(_,"class",w),Q[0]&1&&L!==(L=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&n(h,"class",L),Q[0]&1&&K!==(K=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].historyEnabled?"translate-x-6":"translate-x-1"}`)&&n(j,"class",K),Q[0]&1&&V!==(V=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].historyEnabled?"accent-gradient shadow-lg":"bg-slate-200 dark:bg-slate-600"}`)&&n(A,"class",V),T[0].historyEnabled?Y?Y.p(T,Q):(Y=Ms(T),Y.c(),Y.m(E,null)):Y&&(Y.d(1),Y=null),T[0].historyEnabled&&T[0].history.length>0?F?F.p(T,Q):(F=Ts(T),F.c(),F.m(f,null)):F&&(F.d(1),F=null)},d(T){T&&W(e),Y&&Y.d(),F&&F.d(),q=!1,Qe(Z)}}}function Ms(r){let e,t,s,a,b,d=r[0].historyLimit+"",i,o,u,g,f,m,v,k;return{c(){e=C("div"),t=C("div"),s=C("div"),s.innerHTML='<svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="text-xs font-medium text-slate-600 dark:text-slate-400">历史记录数量</span>',a=O(),b=C("span"),i=J(d),o=O(),u=C("div"),g=C("input"),f=O(),m=C("div"),m.innerHTML="<span>5</span> <span>50</span>",n(s,"class","flex items-center gap-2"),n(b,"class","text-sm font-bold text-purple-600 dark:text-purple-400 min-w-[2rem] text-center"),n(t,"class","flex items-center justify-between mb-3"),n(g,"type","range"),n(g,"min","5"),n(g,"max","50"),n(g,"step","5"),n(g,"class","w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500/30"),n(m,"class","flex justify-between text-[10px] text-slate-400 mt-1.5"),n(u,"class","relative"),n(e,"class","py-3 px-3 bg-slate-50/80 dark:bg-slate-800/50 rounded-xl")},m(y,c){N(y,e,c),l(e,t),l(t,s),l(t,a),l(t,b),l(b,i),l(e,o),l(e,u),l(u,g),Re(g,r[0].historyLimit),l(u,f),l(u,m),v||(k=[X(g,"change",r[86]),X(g,"input",r[86]),X(g,"change",r[30])],v=!0)},p(y,c){c[0]&1&&d!==(d=y[0].historyLimit+"")&&he(i,d),c[0]&1&&Re(g,y[0].historyLimit)},d(y){y&&W(e),v=!1,Qe(k)}}}function Ts(r){let e,t,s,a,b,d,i,o,u,g=r[0].history.length+"",f,m,v,k,y,c=[],p=new Fr,h,_,w=ze(r[0].history.slice().reverse());const L=x=>x[115];for(let x=0;x<w.length;x+=1){let E=gs(r,w,x),S=L(E);p.set(S,c[x]=Bs(S,E))}return{c(){e=C("div"),t=C("div"),s=C("div"),a=de("svg"),b=de("path"),d=O(),i=C("span"),o=J(`当前历史记录\r
                    `),u=C("span"),f=J(g),m=O(),v=C("button"),v.innerHTML=`<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                  清空`,k=O(),y=C("div");for(let x=0;x<c.length;x+=1)c[x].c();n(b,"stroke-linecap","round"),n(b,"stroke-linejoin","round"),n(b,"stroke-width","2"),n(b,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),n(a,"class","w-4 h-4 text-emerald-500"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"viewBox","0 0 24 24"),n(u,"class","ml-1.5 text-xs px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-full"),n(i,"class","text-sm font-semibold text-slate-700 dark:text-slate-200"),n(s,"class","flex items-center gap-2"),n(v,"class","text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1"),n(t,"class","flex items-center justify-between mb-3 pb-2 border-b border-slate-100 dark:border-slate-800/60"),n(y,"class","space-y-1.5 max-h-40 overflow-y-auto pr-1 scrollbar-thin"),n(e,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm")},m(x,E){N(x,e,E),l(e,t),l(t,s),l(s,a),l(a,b),l(s,d),l(s,i),l(i,o),l(i,u),l(u,f),l(t,m),l(t,v),l(e,k),l(e,y);for(let S=0;S<c.length;S+=1)c[S]&&c[S].m(y,null);h||(_=X(v,"click",r[87]),h=!0)},p(x,E){E[0]&1&&g!==(g=x[0].history.length+"")&&he(f,g),E[0]&1073741825&&(w=ze(x[0].history.slice().reverse()),c=Jt(c,E,L,1,x,w,p,y,Xt,Bs,null,gs))},d(x){x&&W(e);for(let E=0;E<c.length;E+=1)c[E].d();h=!1,_()}}}function Bs(r,e){let t,s,a,b=e[0].history.length-e[115]+"",d,i,o,u=e[113]+"",g,f,m,v,k,y;function c(){return e[88](e[113])}return{key:r,first:null,c(){t=C("div"),s=C("div"),a=C("div"),d=J(b),i=O(),o=C("span"),g=J(u),f=O(),m=C("button"),m.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',v=O(),n(a,"class","w-5 h-5 flex items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 font-bold text-[10px]"),n(o,"class","truncate text-slate-700 dark:text-slate-300 font-medium"),n(s,"class","flex items-center gap-2 flex-1 min-w-0"),n(m,"class","ml-2 p-1 rounded-md text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100"),n(m,"title","删除记录"),n(t,"class","group flex items-center justify-between text-xs py-2 px-3 bg-slate-50 dark:bg-slate-800/60 rounded-lg border border-slate-100 dark:border-slate-700/50 hover:border-purple-300 dark:hover:border-purple-700/50 transition-all duration-200"),this.first=t},m(p,h){N(p,t,h),l(t,s),l(s,a),l(a,d),l(s,i),l(s,o),l(o,g),l(t,f),l(t,m),l(t,v),k||(y=X(m,"click",c),k=!0)},p(p,h){e=p,h[0]&1&&b!==(b=e[0].history.length-e[115]+"")&&he(d,b),h[0]&1&&u!==(u=e[113]+"")&&he(g,u)},d(p){p&&W(t),k=!1,y()}}}function bh(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y,F,T,Q,G,ne,ie,ce,ue,be,_e=r[0].directoryTracking&&ys(r);function ke(pe,we){return pe[20]?th:eh}let Ne=ke(r),De=Ne(r),xe=r[9]&&r[0].historyEnabled&&ws(r),Ce=r[10]&&Ss(r);function se(pe,we){return pe[16]?uh:pe[17]?hh:pe[29].length===0?dh:pe[6]?ch:ah}let ge=se(r),fe=ge(r),Ee=r[19].open&&Ls(r);function Ge(pe){r[79](pe)}let at={title:"删除文件",message:r[23],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[41],onCancel:r[42]};r[22]!==void 0&&(at.isOpen=r[22]),q=new hr({props:at}),_t.push(()=>kt(q,"isOpen",Ge));function Fe(pe){r[80](pe)}let $e={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[31],onCancel:r[32]};r[24]!==void 0&&($e.isOpen=r[24]),F=new hr({props:$e}),_t.push(()=>kt(F,"isOpen",Fe));function re(pe){r[81](pe)}let me={title:r[26],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[27],confirmText:"重命名",cancelText:"取消",onConfirm:r[46],onCancel:r[47]};r[25]!==void 0&&(me.isOpen=r[25]),G=new br({props:me}),_t.push(()=>kt(G,"isOpen",re));let ve=r[8]&&Ds(r);return{c(){e=C("div"),t=C("div"),s=C("div"),a=C("h3"),a.textContent="文件管理",b=O(),d=C("div"),i=C("button"),o=de("svg"),u=de("path"),g=O(),_e&&_e.c(),f=O(),m=C("button"),v=de("svg"),k=de("path"),y=O(),c=C("button"),c.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',p=O(),h=C("button"),_=de("svg"),w=de("path"),x=O(),E=C("button"),E.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',S=O(),D=C("div"),B=C("div"),R=C("button"),R.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',P=O(),De.c(),A=O(),j=C("button"),j.innerHTML='<svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>',K=O(),V=C("div"),$=C("button"),$.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',U=O(),xe&&xe.c(),M=O(),Ce&&Ce.c(),I=O(),H=C("div"),fe.c(),z=O(),Ee&&Ee.c(),ee=O(),nt(q.$$.fragment),Y=O(),nt(F.$$.fragment),Q=O(),nt(G.$$.fragment),ie=O(),ve&&ve.c(),n(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),n(u,"stroke-linecap","round"),n(u,"stroke-linejoin","round"),n(u,"stroke-width","2"),n(u,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),n(o,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),n(o,"fill","none"),n(o,"stroke","currentColor"),n(o,"viewBox","0 0 24 24"),i.disabled=r[6],n(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),n(i,"title","刷新"),n(k,"stroke-linecap","round"),n(k,"stroke-linejoin","round"),n(k,"stroke-width","2"),n(k,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),n(v,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),n(v,"fill","none"),n(v,"stroke","currentColor"),n(v,"viewBox","0 0 24 24"),m.disabled=r[6],n(m,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),n(m,"title","上传到服务器"),n(c,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),n(c,"title","下载到本地"),n(w,"stroke-linecap","round"),n(w,"stroke-linejoin","round"),n(w,"stroke-width","2"),n(w,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),n(_,"class","w-4 h-4 text-red-500 dark:text-red-400"),n(_,"fill","none"),n(_,"stroke","currentColor"),n(_,"viewBox","0 0 24 24"),h.disabled=L=r[6]||r[18].size===0,n(h,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),n(h,"title","删除选中"),n(E,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),n(E,"title","文件管理设置"),n(d,"class","flex items-center gap-1"),n(s,"class","flex items-center justify-between mb-2"),n(R,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),n(R,"title","根目录"),n(B,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),n(j,"class","p-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors"),n(j,"title","模糊搜索文件夹"),n($,"class","p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors"),n($,"title","路径历史"),n(V,"class","relative"),n(D,"class","flex items-center gap-2"),n(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),n(H,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),n(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(pe,we){N(pe,e,we),l(e,t),l(t,s),l(s,a),l(s,b),l(s,d),l(d,i),l(i,o),l(o,u),l(d,g),_e&&_e.m(d,null),l(d,f),l(d,m),l(m,v),l(v,k),l(d,y),l(d,c),l(d,p),l(d,h),l(h,_),l(_,w),l(d,x),l(d,E),l(t,S),l(t,D),l(D,B),l(B,R),l(B,P),De.m(B,null),l(D,A),l(D,j),l(D,K),l(D,V),l(V,$),l(V,U),xe&&xe.m(V,null),l(t,M),Ce&&Ce.m(t,null),l(e,I),l(e,H),fe.m(H,null),l(e,z),Ee&&Ee.m(e,null),l(e,ee),it(q,e,null),l(e,Y),it(F,e,null),l(e,Q),it(G,e,null),l(e,ie),ve&&ve.m(e,null),ce=!0,ue||(be=[X(i,"click",r[33]),X(m,"click",r[34]),X(h,"click",r[40]),X(E,"click",r[66]),X(R,"click",r[67]),X(j,"click",r[57]),X($,"click",r[70]),X(H,"click",r[39])],ue=!0)},p(pe,we){(!ce||we[0]&64)&&(i.disabled=pe[6]),pe[0].directoryTracking?_e?_e.p(pe,we):(_e=ys(pe),_e.c(),_e.m(d,f)):_e&&(_e.d(1),_e=null),(!ce||we[0]&64)&&(m.disabled=pe[6]),(!ce||we[0]&262208&&L!==(L=pe[6]||pe[18].size===0))&&(h.disabled=L),Ne===(Ne=ke(pe))&&De?De.p(pe,we):(De.d(1),De=Ne(pe),De&&(De.c(),De.m(B,null))),pe[9]&&pe[0].historyEnabled?xe?xe.p(pe,we):(xe=ws(pe),xe.c(),xe.m(V,null)):xe&&(xe.d(1),xe=null),pe[10]?Ce?Ce.p(pe,we):(Ce=Ss(pe),Ce.c(),Ce.m(t,null)):Ce&&(Ce.d(1),Ce=null),ge===(ge=se(pe))&&fe?fe.p(pe,we):(fe.d(1),fe=ge(pe),fe&&(fe.c(),fe.m(H,null))),pe[19].open?Ee?Ee.p(pe,we):(Ee=Ls(pe),Ee.c(),Ee.m(e,ee)):Ee&&(Ee.d(1),Ee=null);const Be={};we[0]&8388608&&(Be.message=pe[23]),!Z&&we[0]&4194304&&(Z=!0,Be.isOpen=pe[22],wt(()=>Z=!1)),q.$set(Be);const Me={};!T&&we[0]&16777216&&(T=!0,Me.isOpen=pe[24],wt(()=>T=!1)),F.$set(Me);const Se={};we[0]&67108864&&(Se.title=pe[26]),we[0]&134217728&&(Se.defaultValue=pe[27]),!ne&&we[0]&33554432&&(ne=!0,Se.isOpen=pe[25],wt(()=>ne=!1)),G.$set(Se),pe[8]?ve?ve.p(pe,we):(ve=Ds(pe),ve.c(),ve.m(e,null)):ve&&(ve.d(1),ve=null)},i(pe){ce||(Ue(q.$$.fragment,pe),Ue(F.$$.fragment,pe),Ue(G.$$.fragment,pe),ce=!0)},o(pe){qe(q.$$.fragment,pe),qe(F.$$.fragment,pe),qe(G.$$.fragment,pe),ce=!1},d(pe){pe&&W(e),_e&&_e.d(),De.d(),xe&&xe.d(),Ce&&Ce.d(),fe.d(),Ee&&Ee.d(),st(q),st(F),st(G),ve&&ve.d(),ue=!1,Qe(be)}}}function bo(r){return r.focus(),{destroy(){}}}function vh(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function As(r,e){if(!e)return r;const t=new RegExp(`(${yh(e)})`,"gi");return r.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100 px-0.5 rounded">$1</mark>')}function yh(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wh(r,e,t){let s,a,b,d,i,o,u,g,f,m,v,k;Pt(r,Kt,oe=>t(63,m=oe)),Pt(r,Vt,oe=>t(64,v=oe)),Pt(r,qt,oe=>t(98,k=oe));let y=new Map,c={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]},p=new Map,h=null,_=!1,w=!1,L=!1,x="",E=!1,S="",D=[],B=!1,R=-1,P=null,A=new Set([]),j=[],K=!1,V=null,$=new Set,U=[],M={open:!1,x:0,y:0,file:null},I=!1,H="",z=!1,ee="",q=[],Z=!1,Y=null,F=!1,T="",Q="",G=null;async function ne(oe){try{const{GetFileManagerSettings:Ie}=window.wailsBindings;if(typeof Ie!="function")return;const ct=await Ie(oe);if(t(0,c={directoryTracking:(ct==null?void 0:ct.directory_tracking)??!1,historyEnabled:(ct==null?void 0:ct.history_enabled)??!0,historyLimit:(ct==null?void 0:ct.history_limit)??5,history:(ct==null?void 0:ct.history)??[]}),!p.has(oe)){const yt=new Map(p);yt.set(oe,c.directoryTracking||!1),t(1,p=yt)}}catch(Ie){console.error("Failed to load file manager config:",Ie)}}async function ie(){try{const{UpdateFileManagerSettings:oe}=window.wailsBindings;if(typeof oe!="function"||!g)return;await oe(g,{directory_tracking:c.directoryTracking,history_enabled:c.historyEnabled,history_limit:c.historyLimit,history:c.history})}catch(oe){console.error("Failed to save file manager settings:",oe)}}let ce="/";function ue(oe){return oe&&y.get(oe)||"/"}function be(oe,Ie){if(!oe)return;const ct=new Map(y);ct.set(oe,Ie),t(58,y=ct)}async function _e(oe){if(!(!v||!a)&&!b){t(16,K=!0),t(17,V=null);try{const Ie=await ho(v,oe);t(59,j=Ie||[]),be(v,oe),t(3,ce=oe)}catch(Ie){console.error("Failed to load directory:",Ie),t(17,V=Ie.message||"加载目录失败")}finally{t(16,K=!1)}}}async function ke(){t(24,Z=!1);const oe=Y;if(Y=null,oe)try{await Yr(oe.id)}catch(Ie){console.error("Cancel transfer failed:",Ie)}qt.cancelTransfer(oe.id)}function Ne(){t(24,Z=!1),Y=null}async function De(){await _e(ce)}async function xe(){if(!(!v||!a||b))try{const oe=await _o();if(!oe||oe.length===0)return;(await go(v,oe,ce)).forEach(ct=>Be(ct,"upload")),setTimeout(()=>_e(ce),2e3)}catch(oe){console.error("Upload failed:",oe),t(17,V=oe.message||"上传失败")}}async function Ce(oe){if(!(!v||!a||b||oe.is_dir))try{const Ie=await po();if(!Ie)return;(await co(v,[oe.path],Ie)).forEach(yt=>Be(yt,"download"))}catch(Ie){console.error("Download failed:",Ie),t(17,V=Ie.message||"下载失败")}}function se(oe){!oe||oe.is_parent||t(18,$=new Set([oe.path]))}function ge(oe){!oe||oe.is_parent||se(oe)}function fe(oe){!oe||!oe.is_parent||Me(oe.path,!0)}function Ee(oe,Ie){Ie!=null&&Ie.is_parent||(oe.preventDefault(),se(Ie),t(19,M={open:!0,x:oe.clientX,y:oe.clientY,file:Ie}))}function Ge(){M.open&&t(19,M={...M,open:!1})}async function at(){if(!v||!a||b||$.size===0)return;q=Array.from($);const oe=q.length;t(23,ee=oe===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${oe} 个文件/文件夹吗？`),t(22,z=!0)}async function Fe(){t(22,z=!1);try{await ao(v,q),t(18,$=new Set),q=[],await _e(ce)}catch(oe){console.error("Delete failed:",oe),t(17,V=oe.message||"删除失败")}}function $e(){t(22,z=!1),q=[]}async function re(){const oe=M.file;oe&&(Ge(),q=[oe.path],t(23,ee=`确定要删除 "${oe.name}" 吗？`),t(22,z=!0))}async function me(){const oe=M.file;Ge(),oe&&!oe.is_dir&&await Ce(oe)}async function ve(){const oe=M.file;Ge(),oe&&(G=oe,t(26,T="重命名"),t(27,Q=oe.name),t(25,F=!0))}async function pe(oe){t(25,F=!1);const Ie=G;if(G=null,!(!Ie||!oe||oe.trim()===Ie.name))try{const yt=`${ce.endsWith("/")?ce:`${ce}/`}${oe.trim()}`;await uo(v,Ie.path,yt),await _e(ce)}catch(ct){console.error("Rename failed:",ct),t(17,V=ct.message||"重命名失败")}}function we(){t(25,F=!1),G=null}function Be(oe,Ie){const ct=`sftp:progress:${oe}`,yt=Lr(ct,mt=>{if(Ie==="upload"){const Bt={id:oe,filename:mt.filename||mt.fileName||"unknown",bytesSent:mt.bytes_sent??mt.bytesSent??0,totalBytes:mt.total_bytes??mt.totalBytes??0,percentage:mt.percentage??0,speed:mt.speed??0,status:mt.status||"running",error:mt.error||""};k.transfers.find(fr=>fr.id===oe)?qt.updateTransfer(oe,Bt):qt.addTransfer(Bt)}});U.push(yt)}function Me(oe,Ie=!1){if(Ie&&f&&g){const ct=new Map(p);ct.set(g,!1),t(1,p=ct),t(7,_=!0)}if(c.historyEnabled&&oe!==ce){const ct=c.historyLimit||5,yt=[...c.history||[]],mt=yt.indexOf(oe);mt!==-1&&yt.splice(mt,1),yt.unshift(oe);const Bt=yt.slice(0,ct);t(0,c.history=Bt,c),ie()}_e(oe)}async function Se(){if(v)try{const{GetCurrentPath:oe}=window.wailsBindings;if(typeof oe!="function")return;const Ie=await oe(v);Ie&&Ie!==ce&&(t(7,_=!1),Me(Ie,!1))}catch(oe){console.error("Failed to sync directory from server:",oe)}}function ot(){if(!c.directoryTracking||!f||h)return;const oe=v;oe&&(h=Lr(`ssh:cwd:${oe}`,Ie=>{Ie&&Ie!==ce&&!_&&Me(Ie,!1)}))}function rt(){h&&(h(),h=null)}function dt(oe){if(oe===-1)Me("/",!0);else{const Ie="/"+o.slice(0,oe+1).join("/");Me(Ie,!0)}}function vt(){t(21,H=ce),t(20,I=!0)}function ut(){H.trim()&&Me(H.trim(),!0),t(20,I=!1)}function lt(){t(20,I=!1),t(21,H="")}async function Ye(){if(!(!S.trim()||!v)){P&&P.abort(),P=new AbortController,t(13,B=!0),t(12,D=[]),t(14,R=-1);try{const oe=await fo(v,ce,S.trim(),3,50);if(P.signal.aborted)return;t(12,D=oe||[])}catch(oe){console.error("Directory search failed:",oe),t(17,V=oe.message||"搜索失败")}finally{t(13,B=!1)}}}let Ct;function ht(){clearTimeout(Ct),S.trim().length>=1?Ct=setTimeout(()=>{Ye()},300):t(12,D=[])}function Xe(oe){oe.key==="Enter"?(oe.preventDefault(),R>=0&&D[R]?(Me(D[R].path,!0),te()):Ye()):oe.key==="Escape"?te():oe.key==="ArrowDown"?(oe.preventDefault(),R<D.length-1&&t(14,R++,R)):oe.key==="ArrowUp"&&(oe.preventDefault(),R>0&&t(14,R--,R))}function te(){t(10,E=!1),t(11,S=""),t(12,D=[]),t(14,R=-1),P&&(P.abort(),P=null)}function ae(){t(10,E=!0),t(11,S=""),t(12,D=[]),t(14,R=-1)}ar(()=>{}),Ir(()=>{U.forEach(oe=>oe()),rt(),clearTimeout(Ct),P&&P.abort()});const je=async()=>{if(g){const oe=!f,Ie=new Map(p);Ie.set(g,oe),t(1,p=Ie),oe&&(t(7,_=!1),await Se())}},He=()=>t(8,w=!0),Ve=()=>dt(-1);function et(){H=this.value,t(21,H)}const Te=oe=>{oe.key==="Enter"?ut():oe.key==="Escape"&&lt()},Ke=()=>t(9,L=!L);function Ft(){x=this.value,t(2,x)}const le=oe=>{Me(oe,!0),t(9,L=!1),t(2,x="")};function Le(){S=this.value,t(11,S)}const Pe=oe=>{Me(oe.path,!0),te()},ft=oe=>t(14,R=oe),pt=oe=>oe.is_parent?fe(oe):ge(oe),At=oe=>{oe.is_dir&&!oe.is_parent?Me(oe.path,!0):oe.is_dir||Ce(oe)},Lt=(oe,Ie)=>Ee(Ie,oe);function Je(oe){z=oe,t(22,z)}function gt(oe){Z=oe,t(24,Z)}function Ze(oe){F=oe,t(25,F)}const ye=()=>t(8,w=!1),We=()=>t(8,w=!1),Ut=()=>{t(0,c.directoryTracking=!c.directoryTracking,c),ie()},Qt=()=>{t(0,c.historyEnabled=!c.historyEnabled,c),c.historyEnabled||t(0,c.history=[],c),ie()};function Rt(){c.historyLimit=xr(this.value),t(0,c),t(64,v),t(60,d),t(62,a),t(6,b),t(61,s),t(63,m)}const jt=()=>{t(0,c.history=[],c),ie()},Tt=oe=>{t(0,c.history=c.history.filter(Ie=>Ie!==oe),c),ie()},It=()=>{t(0,c={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),ie()},Dt=()=>t(8,w=!1);return r.$$.update=()=>{var oe;if(r.$$.dirty[2]&6&&t(61,s=v?m.get(v):null),r.$$.dirty[1]&1073741824&&t(62,a=(s==null?void 0:s.connected)||!1),r.$$.dirty[1]&1073741824&&t(6,b=(s==null?void 0:s.type)==="local"),r.$$.dirty[0]&64|r.$$.dirty[2]&1&&t(60,d=a&&!b),r.$$.dirty[1]&1073741824&&t(5,g=((oe=s==null?void 0:s.connection)==null?void 0:oe.id)||null),r.$$.dirty[0]&32|r.$$.dirty[2]&4&&v&&g&&ne(g),r.$$.dirty[0]&8|r.$$.dirty[2]&4)if(v){const Ie=ue(v);Ie&&Ie!==ce&&t(3,ce=Ie)}else t(3,ce="/");if(r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(!v||!d)&&(t(59,j=[]),t(17,V=null),t(18,$=new Set),t(15,A=new Set),t(3,ce="/"),t(58,y=new Map),t(1,p=new Map),t(0,c={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),t(8,w=!1),t(9,L=!1),t(10,E=!1),t(19,M={open:!1,x:0,y:0,file:null})),r.$$.dirty[0]&8|r.$$.dirty[1]&268435456&&t(29,i=(()=>{const Ie=vh(j);return ce==="/"?Ie:[{name:"..",path:ce.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...Ie]})()),r.$$.dirty[0]&8&&(o=ce.split("/").filter(Ie=>Ie)),r.$$.dirty[0]&5&&t(28,u=c.historyEnabled&&x?c.history.filter(Ie=>Ie.toLowerCase().includes(x.toLowerCase())):c.history||[]),r.$$.dirty[0]&34&&t(4,f=g&&p.get(g)||!1),r.$$.dirty[0]&40|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(v&&d&&g?(ne(g),_e(ce),ot()):rt()),r.$$.dirty[0]&17|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(v&&d&&c.directoryTracking&&f?ot():rt()),r.$$.dirty[1]&134217728|r.$$.dirty[2]&2&&m){const Ie=new Set(m.keys()),ct=new Map(y);for(const yt of ct.keys())Ie.has(yt)||ct.delete(yt);t(58,y=ct)}},[c,p,x,ce,f,g,b,_,w,L,E,S,D,B,R,A,K,V,$,M,I,H,z,ee,Z,F,T,Q,u,i,ie,ke,Ne,De,xe,Ce,ge,fe,Ee,Ge,at,Fe,$e,re,me,ve,pe,we,Me,Se,dt,vt,ut,lt,ht,Xe,te,ae,y,j,d,s,a,m,v,je,He,Ve,et,Te,Ke,Ft,le,Le,Pe,ft,pt,At,Lt,Je,gt,Ze,ye,We,Ut,Qt,Rt,jt,Tt,It,Dt]}class kh extends Et{constructor(e){super(),xt(this,e,wh,bh,St,{},null,[-1,-1,-1,-1])}}function Rs(r,e,t){const s=r.slice();return s[37]=e[t],s[39]=t,s}function Sh(r){let e;return{c(){e=J("请先连接到服务器")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Ch(r){let e;return{c(){e=J("实时数据获取中...")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function xh(r){let e;return{c(){e=J("本地终端不支持服务器监控")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Os(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',n(e,"class","p-3 space-y-3")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Ps(r){let e,t,s,a,b,d=r[8]["1min"].toFixed(2)+"",i,o,u,g=r[8]["5min"].toFixed(2)+"",f,m,v,k=r[8]["15min"].toFixed(2)+"",y;return{c(){e=C("div"),t=C("span"),t.textContent="负载:",s=O(),a=C("div"),b=C("span"),i=J(d),o=O(),u=C("span"),f=J(g),m=O(),v=C("span"),y=J(k),n(t,"class","text-[9px] text-gray-600 dark:text-gray-400"),n(b,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Ae(b,"color",Ot(r[8]["1min"]*100)),n(u,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Ae(u,"color",Ot(r[8]["5min"]*100)),n(v,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Ae(v,"color",Ot(r[8]["15min"]*100)),n(a,"class","flex gap-2 text-[9px]"),n(e,"class","flex items-center gap-2 mb-2")},m(c,p){N(c,e,p),l(e,t),l(e,s),l(e,a),l(a,b),l(b,i),l(a,o),l(a,u),l(u,f),l(a,m),l(a,v),l(v,y)},p(c,p){p[0]&256&&d!==(d=c[8]["1min"].toFixed(2)+"")&&he(i,d),p[0]&256&&Ae(b,"color",Ot(c[8]["1min"]*100)),p[0]&256&&g!==(g=c[8]["5min"].toFixed(2)+"")&&he(f,g),p[0]&256&&Ae(u,"color",Ot(c[8]["5min"]*100)),p[0]&256&&k!==(k=c[8]["15min"].toFixed(2)+"")&&he(y,k),p[0]&256&&Ae(v,"color",Ot(c[8]["15min"]*100))},d(c){c&&W(e)}}}function Eh(r){let e;return{c(){e=C("div"),e.textContent="等待数据...",n(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Lh(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c;return{c(){e=de("svg"),t=de("defs"),s=de("linearGradient"),a=de("stop"),b=de("stop"),d=de("line"),i=de("line"),o=de("line"),u=de("path"),f=de("path"),v=O(),k=C("div"),k.textContent="100%",y=O(),c=C("div"),c.textContent="0%",n(a,"offset","0%"),Ae(a,"stop-color","rgb(139, 92, 246)"),Ae(a,"stop-opacity","0.3"),n(b,"offset","100%"),Ae(b,"stop-color","rgb(139, 92, 246)"),Ae(b,"stop-opacity","0.05"),n(s,"id","cpuGradient"),n(s,"x1","0%"),n(s,"y1","0%"),n(s,"x2","0%"),n(s,"y2","100%"),n(d,"x1","0"),n(d,"y1","25%"),n(d,"x2","100%"),n(d,"y2","25%"),n(d,"stroke","currentColor"),n(d,"stroke-width","0.5"),n(d,"class","text-gray-200 dark:text-gray-700"),n(i,"x1","0"),n(i,"y1","50%"),n(i,"x2","100%"),n(i,"y2","50%"),n(i,"stroke","currentColor"),n(i,"stroke-width","0.5"),n(i,"class","text-gray-200 dark:text-gray-700"),n(o,"x1","0"),n(o,"y1","75%"),n(o,"x2","100%"),n(o,"y2","75%"),n(o,"stroke","currentColor"),n(o,"stroke-width","0.5"),n(o,"class","text-gray-200 dark:text-gray-700"),n(u,"d",g=r[2].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),n(u,"fill","url(#cpuGradient)"),n(u,"transform","scale(1, 0.8) translate(0, 10)"),n(f,"d",m=r[2].map(r[16]).join(" ")),n(f,"fill","none"),n(f,"stroke","rgb(139, 92, 246)"),n(f,"stroke-width","2"),n(f,"stroke-linecap","round"),n(f,"stroke-linejoin","round"),n(f,"transform","scale(1, 0.8) translate(0, 10)"),n(e,"class","w-full h-full"),n(e,"preserveAspectRatio","none"),n(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),n(c,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(p,h){N(p,e,h),l(e,t),l(t,s),l(s,a),l(s,b),l(e,d),l(e,i),l(e,o),l(e,u),l(e,f),N(p,v,h),N(p,k,h),N(p,y,h),N(p,c,h)},p(p,h){h[0]&4&&g!==(g=p[2].map(p[15]).join(" ")+" L 100 100 L 0 100 Z")&&n(u,"d",g),h[0]&4&&m!==(m=p[2].map(p[16]).join(" "))&&n(f,"d",m)},d(p){p&&(W(e),W(v),W(k),W(y),W(c))}}}function Is(r){let e,t=ze(r[4]),s=[];for(let a=0;a<t.length;a+=1)s[a]=Hs(Rs(r,t,a));return{c(){e=C("div");for(let a=0;a<s.length;a+=1)s[a].c();n(e,"class","mt-2 flex flex-wrap gap-1")},m(a,b){N(a,e,b);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(e,null)},p(a,b){if(b[0]&16){t=ze(a[4]);let d;for(d=0;d<t.length;d+=1){const i=Rs(a,t,d);s[d]?s[d].p(i,b):(s[d]=Hs(i),s[d].c(),s[d].m(e,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=t.length}},d(a){a&&W(e),Mt(s,a)}}}function Hs(r){let e,t,s,a,b,d;return{c(){e=C("div"),t=C("div"),s=C("div"),a=O(),b=C("span"),b.textContent=`C${r[39]+1}`,d=O(),n(s,"class","h-full rounded-full transition-all duration-300"),Ae(s,"width",r[37]+"%"),Ae(s,"background-color",Ot(r[37])),n(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),n(b,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),n(e,"class","flex flex-col items-center")},m(i,o){N(i,e,o),l(e,t),l(t,s),l(e,a),l(e,b),l(e,d)},p(i,o){o[0]&16&&Ae(s,"width",i[37]+"%"),o[0]&16&&Ae(s,"background-color",Ot(i[37]))},d(i){i&&W(e)}}}function Dh(r){let e;return{c(){e=C("div"),e.textContent="等待数据...",n(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Mh(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c;return{c(){e=de("svg"),t=de("defs"),s=de("linearGradient"),a=de("stop"),b=de("stop"),d=de("line"),i=de("line"),o=de("line"),u=de("path"),f=de("path"),v=O(),k=C("div"),k.textContent="100%",y=O(),c=C("div"),c.textContent="0%",n(a,"offset","0%"),Ae(a,"stop-color","rgb(16, 185, 129)"),Ae(a,"stop-opacity","0.3"),n(b,"offset","100%"),Ae(b,"stop-color","rgb(16, 185, 129)"),Ae(b,"stop-opacity","0.05"),n(s,"id","memoryGradient"),n(s,"x1","0%"),n(s,"y1","0%"),n(s,"x2","0%"),n(s,"y2","100%"),n(d,"x1","0"),n(d,"y1","25%"),n(d,"x2","100%"),n(d,"y2","25%"),n(d,"stroke","currentColor"),n(d,"stroke-width","0.5"),n(d,"class","text-gray-200 dark:text-gray-700"),n(i,"x1","0"),n(i,"y1","50%"),n(i,"x2","100%"),n(i,"y2","50%"),n(i,"stroke","currentColor"),n(i,"stroke-width","0.5"),n(i,"class","text-gray-200 dark:text-gray-700"),n(o,"x1","0"),n(o,"y1","75%"),n(o,"x2","100%"),n(o,"y2","75%"),n(o,"stroke","currentColor"),n(o,"stroke-width","0.5"),n(o,"class","text-gray-200 dark:text-gray-700"),n(u,"d",g=r[3].map(r[17]).join(" ")+" L 100 100 L 0 100 Z"),n(u,"fill","url(#memoryGradient)"),n(u,"transform","scale(1, 0.8) translate(0, 10)"),n(f,"d",m=r[3].map(r[18]).join(" ")),n(f,"fill","none"),n(f,"stroke","rgb(16, 185, 129)"),n(f,"stroke-width","2"),n(f,"stroke-linecap","round"),n(f,"stroke-linejoin","round"),n(f,"transform","scale(1, 0.8) translate(0, 10)"),n(e,"class","w-full h-full"),n(e,"preserveAspectRatio","none"),n(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),n(c,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(p,h){N(p,e,h),l(e,t),l(t,s),l(s,a),l(s,b),l(e,d),l(e,i),l(e,o),l(e,u),l(e,f),N(p,v,h),N(p,k,h),N(p,y,h),N(p,c,h)},p(p,h){h[0]&8&&g!==(g=p[3].map(p[17]).join(" ")+" L 100 100 L 0 100 Z")&&n(u,"d",g),h[0]&8&&m!==(m=p[3].map(p[18]).join(" "))&&n(f,"d",m)},d(p){p&&(W(e),W(v),W(k),W(y),W(c))}}}function Th(r){var Zr,Qr;let e,t,s,a,b,d,i,o,u,g,f,m,v,k=r[5].cpu.toFixed(1)+"",y,c,p,h,_,w,L,x,E,S,D,B,R,P=r[9].used+"",A,j,K=r[9].total+"",V,$,U,M=r[5].memory.toFixed(2)+"",I,H,z,ee,q,Z,Y,F,T,Q,G=r[5].disk+"",ne,ie,ce,ue,be,_e,ke,Ne,De,xe=r[7].used+"",Ce,se,ge,fe,Ee=r[7].total+"",Ge,at,Fe,$e,re,me,ve,pe,we,Be,Me=Ar(((Zr=r[5].network)==null?void 0:Zr.in)||0)+"",Se,ot,rt,dt,vt,ut,lt=Ar(((Qr=r[5].network)==null?void 0:Qr.out)||0)+"",Ye,Ct,ht,Xe,te,ae,je,He,Ve,et,Te=(r[6].os||"Unknown")+"",Ke,Ft,le,Le,Pe,ft,pt=(r[6].kernel||"Unknown")+"",At,Lt,Je,gt,Ze,ye,We=(r[6].uptime||"Unknown")+"",Ut,Qt,Rt,jt,Tt,It,Dt=(r[6].processes||"N/A")+"",oe;function Ie(tt,bt){return tt[0]?xh:tt[1]?Ch:Sh}let ct=Ie(r),yt=ct(r),mt=r[0]&&Os(),Bt=r[8]["1min"]>0&&Ps(r);function zr(tt,bt){return tt[2].length>1?Lh:Eh}let fr=zr(r),$t=fr(r),zt=r[4].length>0&&Is(r);function Xr(tt,bt){return tt[3].length>1?Mh:Dh}let Dr=Xr(r),er=Dr(r);return{c(){e=C("div"),t=C("div"),s=C("h3"),s.textContent="服务器监控",a=O(),b=C("div"),yt.c(),d=O(),mt&&mt.c(),i=O(),o=C("div"),u=C("div"),g=C("div"),f=C("div"),f.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',m=O(),v=C("span"),y=J(k),c=J("%"),p=O(),Bt&&Bt.c(),h=O(),_=C("div"),$t.c(),w=O(),zt&&zt.c(),L=O(),x=C("div"),E=C("div"),S=C("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',D=O(),B=C("div"),R=C("span"),A=J(P),j=J(" / "),V=J(K),$=O(),U=C("span"),I=J(M),H=J("%"),z=O(),ee=C("div"),er.c(),q=O(),Z=C("div"),Y=C("div"),F=C("div"),F.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',T=O(),Q=C("span"),ne=J(G),ie=J("%"),ce=O(),ue=C("div"),be=C("div"),_e=O(),ke=C("div"),Ne=C("span"),De=J("已用 "),Ce=J(xe),se=O(),ge=C("span"),fe=J("总计 "),Ge=J(Ee),at=O(),Fe=C("div"),$e=C("div"),$e.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',re=O(),me=C("div"),ve=C("div"),pe=C("div"),pe.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',we=O(),Be=C("span"),Se=J(Me),ot=O(),rt=C("div"),dt=C("div"),dt.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',vt=O(),ut=C("span"),Ye=J(lt),Ct=O(),ht=C("div"),Xe=C("div"),Xe.textContent="系统信息",te=O(),ae=C("div"),je=C("div"),He=C("span"),He.textContent="操作系统",Ve=O(),et=C("span"),Ke=J(Te),Ft=O(),le=C("div"),Le=C("span"),Le.textContent="内核版本",Pe=O(),ft=C("span"),At=J(pt),Lt=O(),Je=C("div"),gt=C("span"),gt.textContent="运行时间",Ze=O(),ye=C("span"),Ut=J(We),Qt=O(),Rt=C("div"),jt=C("span"),jt.textContent="进程数",Tt=O(),It=C("span"),oe=J(Dt),n(s,"class","text-sm font-semibold text-gray-900 dark:text-white"),n(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),n(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),n(f,"class","flex items-center gap-2"),n(v,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Ae(v,"color",Ot(r[5].cpu)),n(g,"class","flex items-center justify-between mb-2"),n(_,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),n(u,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),n(S,"class","flex items-center gap-2"),n(R,"class","text-[10px] text-gray-600 dark:text-gray-400"),n(U,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Ae(U,"color",Ot(r[5].memory)),n(B,"class","flex items-center gap-2"),n(E,"class","flex items-center justify-between mb-2"),n(ee,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),n(x,"class","rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),Ae(x,"background","linear-gradient(135deg, var(--accent-soft), transparent)"),n(F,"class","flex items-center gap-2"),n(Q,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Ae(Q,"color",Ot(r[5].disk)),n(Y,"class","flex items-center justify-between mb-2"),n(be,"class","h-2 rounded-full transition-all duration-300"),Ae(be,"width",r[5].disk+"%"),Ae(be,"background-color",Ot(r[5].disk)),n(ue,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),n(ke,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),n(Z,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),n($e,"class","flex items-center gap-2 mb-3"),n(pe,"class","flex items-center gap-2"),n(Be,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),n(ve,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),n(dt,"class","flex items-center gap-2"),n(ut,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),n(rt,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),n(me,"class","space-y-2"),n(Fe,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),n(Xe,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),n(He,"class","text-gray-600 dark:text-gray-400"),n(et,"class","text-gray-900 dark:text-white font-medium"),n(je,"class","flex justify-between py-1"),n(Le,"class","text-gray-600 dark:text-gray-400"),n(ft,"class","text-gray-900 dark:text-white font-medium"),n(le,"class","flex justify-between py-1"),n(gt,"class","text-gray-600 dark:text-gray-400"),n(ye,"class","text-gray-900 dark:text-white font-medium"),n(Je,"class","flex justify-between py-1"),n(jt,"class","text-gray-600 dark:text-gray-400"),n(It,"class","text-gray-900 dark:text-white font-medium"),n(Rt,"class","flex justify-between py-1"),n(ae,"class","space-y-1.5 text-[10px]"),n(ht,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),n(o,"class","p-3 space-y-3"),n(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(tt,bt){N(tt,e,bt),l(e,t),l(t,s),l(t,a),l(t,b),yt.m(b,null),l(e,d),mt&&mt.m(e,null),l(e,i),l(e,o),l(o,u),l(u,g),l(g,f),l(g,m),l(g,v),l(v,y),l(v,c),l(u,p),Bt&&Bt.m(u,null),l(u,h),l(u,_),$t.m(_,null),l(u,w),zt&&zt.m(u,null),l(o,L),l(o,x),l(x,E),l(E,S),l(E,D),l(E,B),l(B,R),l(R,A),l(R,j),l(R,V),l(B,$),l(B,U),l(U,I),l(U,H),l(x,z),l(x,ee),er.m(ee,null),l(o,q),l(o,Z),l(Z,Y),l(Y,F),l(Y,T),l(Y,Q),l(Q,ne),l(Q,ie),l(Z,ce),l(Z,ue),l(ue,be),l(Z,_e),l(Z,ke),l(ke,Ne),l(Ne,De),l(Ne,Ce),l(ke,se),l(ke,ge),l(ge,fe),l(ge,Ge),l(o,at),l(o,Fe),l(Fe,$e),l(Fe,re),l(Fe,me),l(me,ve),l(ve,pe),l(ve,we),l(ve,Be),l(Be,Se),l(me,ot),l(me,rt),l(rt,dt),l(rt,vt),l(rt,ut),l(ut,Ye),l(o,Ct),l(o,ht),l(ht,Xe),l(ht,te),l(ht,ae),l(ae,je),l(je,He),l(je,Ve),l(je,et),l(et,Ke),l(ae,Ft),l(ae,le),l(le,Le),l(le,Pe),l(le,ft),l(ft,At),l(ae,Lt),l(ae,Je),l(Je,gt),l(Je,Ze),l(Je,ye),l(ye,Ut),l(ae,Qt),l(ae,Rt),l(Rt,jt),l(Rt,Tt),l(Rt,It),l(It,oe)},p(tt,bt){var $r,ei;ct!==(ct=Ie(tt))&&(yt.d(1),yt=ct(tt),yt&&(yt.c(),yt.m(b,null))),tt[0]?mt||(mt=Os(),mt.c(),mt.m(e,i)):mt&&(mt.d(1),mt=null),bt[0]&32&&k!==(k=tt[5].cpu.toFixed(1)+"")&&he(y,k),bt[0]&32&&Ae(v,"color",Ot(tt[5].cpu)),tt[8]["1min"]>0?Bt?Bt.p(tt,bt):(Bt=Ps(tt),Bt.c(),Bt.m(u,h)):Bt&&(Bt.d(1),Bt=null),fr===(fr=zr(tt))&&$t?$t.p(tt,bt):($t.d(1),$t=fr(tt),$t&&($t.c(),$t.m(_,null))),tt[4].length>0?zt?zt.p(tt,bt):(zt=Is(tt),zt.c(),zt.m(u,null)):zt&&(zt.d(1),zt=null),bt[0]&512&&P!==(P=tt[9].used+"")&&he(A,P),bt[0]&512&&K!==(K=tt[9].total+"")&&he(V,K),bt[0]&32&&M!==(M=tt[5].memory.toFixed(2)+"")&&he(I,M),bt[0]&32&&Ae(U,"color",Ot(tt[5].memory)),Dr===(Dr=Xr(tt))&&er?er.p(tt,bt):(er.d(1),er=Dr(tt),er&&(er.c(),er.m(ee,null))),bt[0]&32&&G!==(G=tt[5].disk+"")&&he(ne,G),bt[0]&32&&Ae(Q,"color",Ot(tt[5].disk)),bt[0]&32&&Ae(be,"width",tt[5].disk+"%"),bt[0]&32&&Ae(be,"background-color",Ot(tt[5].disk)),bt[0]&128&&xe!==(xe=tt[7].used+"")&&he(Ce,xe),bt[0]&128&&Ee!==(Ee=tt[7].total+"")&&he(Ge,Ee),bt[0]&32&&Me!==(Me=Ar((($r=tt[5].network)==null?void 0:$r.in)||0)+"")&&he(Se,Me),bt[0]&32&&lt!==(lt=Ar(((ei=tt[5].network)==null?void 0:ei.out)||0)+"")&&he(Ye,lt),bt[0]&64&&Te!==(Te=(tt[6].os||"Unknown")+"")&&he(Ke,Te),bt[0]&64&&pt!==(pt=(tt[6].kernel||"Unknown")+"")&&he(At,pt),bt[0]&64&&We!==(We=(tt[6].uptime||"Unknown")+"")&&he(Ut,We),bt[0]&64&&Dt!==(Dt=(tt[6].processes||"N/A")+"")&&he(oe,Dt)},i:Oe,o:Oe,d(tt){tt&&W(e),yt.d(),mt&&mt.d(),Bt&&Bt.d(),$t.d(),zt&&zt.d(),er.d()}}}function Ot(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function Ar(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,s=r;for(;s>=1024&&t<e.length-1;)s/=1024,t++;return`${s.toFixed(1)} ${e[t]}`}function Fs(r){if(r===0)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0,s=r;for(;s>=1024&&t<e.length-1;)s/=1024,t++;return`${s.toFixed(1)} ${e[t]}`}function Bh(r,e,t){let s,a,b,d,i,o;Pt(r,Vt,q=>t(13,i=q)),Pt(r,Kt,q=>t(14,o=q));const u={cpu:0,memory:0,disk:0,network:{in:0,out:0}},g={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},f={used:"0 GB",total:"0 GB"},m={"1min":0,"5min":0,"15min":0},v={used:"0 GB",total:"0 GB"};let k=[],y=[],c=[],p={...u},h={...g},_={...f},w={...m},L={...v},x=new Map,E=new Map,S=new Map,D=new Map,B=new Map,R=new Map,P=new Map,A=new Map,j=null,K=null;function V(q){if(!q){t(2,k=[]),t(3,y=[]),t(4,c=[]),t(5,p={...u}),t(6,h={...g}),t(7,_={...f}),t(8,w={...m}),t(9,L={...v});return}t(2,k=x.get(q)||[]),t(3,y=E.get(q)||[]),t(4,c=S.get(q)||[]),t(5,p=D.get(q)||{...u}),t(6,h=B.get(q)||{...g}),t(7,_=R.get(q)||{...f}),t(8,w=P.get(q)||{...m}),t(9,L=A.get(q)||{...v})}function $(q){q&&(x=new Map(x).set(q,k),E=new Map(E).set(q,y),S=new Map(S).set(q,c),D=new Map(D).set(q,p),B=new Map(B).set(q,h),R=new Map(R).set(q,_),P=new Map(P).set(q,w),A=new Map(A).set(q,L))}function U(q){var ne,ie,ce,ue,be,_e,ke,Ne,De,xe,Ce,se,ge,fe,Ee;if(!q)return null;const Z=(ne=q.cpu)!=null&&ne.per_core&&Array.isArray(q.cpu.per_core)?q.cpu.per_core:null,Y={cpu:typeof q.cpu=="number"?q.cpu:((ie=q.cpu)==null?void 0:ie.overall)||0,memory:typeof q.memory=="number"?q.memory:((ce=q.memory)==null?void 0:ce.used_percent)||0,disk:typeof q.disk=="number"?q.disk:((_e=(be=(ue=q.disk)==null?void 0:ue.partitions)==null?void 0:be[0])==null?void 0:_e.used_percent)||0,network:{in:typeof((ke=q.network)==null?void 0:ke.in)=="number"?q.network.in*(1024*1024):typeof((Ne=q.network)==null?void 0:Ne.rx_rate)=="number"?q.network.rx_rate:0,out:typeof((De=q.network)==null?void 0:De.out)=="number"?q.network.out*(1024*1024):typeof((xe=q.network)==null?void 0:xe.tx_rate)=="number"?q.network.tx_rate:0}},F=q.system?{os:q.system.os||g.os,kernel:q.system.kernel||g.kernel,uptime:q.system.uptime||g.uptime,processes:q.system.processes||g.processes}:null;let T=null;if((se=(Ce=q.disk)==null?void 0:Ce.partitions)!=null&&se[0]){const Ge=q.disk.partitions[0],at=(Ge.used/(1024*1024*1024)).toFixed(1),Fe=(Ge.total/(1024*1024*1024)).toFixed(1);T={used:`${at} GB`,total:`${Fe} GB`}}let Q=null;(ge=q.cpu)!=null&&ge.load_average&&Array.isArray(q.cpu.load_average)&&q.cpu.load_average.length>=3&&(Q={"1min":q.cpu.load_average[0]||0,"5min":q.cpu.load_average[1]||0,"15min":q.cpu.load_average[2]||0});let G=null;if(((fe=q.memory)==null?void 0:fe.used)!==void 0&&((Ee=q.memory)==null?void 0:Ee.total)!==void 0){const Ge=q.memory.used,at=q.memory.total;G={used:Fs(Ge),total:Fs(at)}}return{stats:Y,cpuPerCore:Z,systemInfo:F,diskInfo:T,loadInfo:Q,memoryDetail:G}}async function M(){const q=i;if(!q||!a||b)return;const{GetMonitoringData:Z}=window.wailsBindings||{};if(typeof Z=="function")try{const Y=await Z(q),F=U(Y);if(F){const T=[...x.get(q)||[],F.stats.cpu].slice(-60),Q=[...E.get(q)||[],F.stats.memory].slice(-60),G=F.cpuPerCore||S.get(q)||[],ne=F.systemInfo||B.get(q)||{...g},ie=F.diskInfo||R.get(q)||{...f},ce=F.loadInfo||P.get(q)||{...m},ue=F.memoryDetail||A.get(q)||{...v},be=F.stats;x=new Map(x).set(q,T),E=new Map(E).set(q,Q),S=new Map(S).set(q,G),D=new Map(D).set(q,be),B=new Map(B).set(q,ne),R=new Map(R).set(q,ie),P=new Map(P).set(q,ce),A=new Map(A).set(q,ue),q===i&&(t(5,p=be),t(2,k=T),t(3,y=Q),t(4,c=G),t(6,h=ne),t(7,_=ie),t(8,w=ce),t(9,L=ue))}}catch(Y){console.error("Failed to fetch monitoring data:",Y)}}ar(()=>(j=setInterval(M,2e3),()=>{clearInterval(j)})),Ir(()=>{j&&clearInterval(j)});const I=(q,Z)=>{const Y=Z/(k.length-1)*100,F=100-q;return`${Z===0?"M":"L"} ${Y} ${F}`},H=(q,Z)=>{const Y=Z/(k.length-1)*100,F=100-q;return`${Z===0?"M":"L"} ${Y} ${F}`},z=(q,Z)=>{const Y=Z/(y.length-1)*100,F=100-q;return`${Z===0?"M":"L"} ${Y} ${F}`},ee=(q,Z)=>{const Y=Z/(y.length-1)*100,F=100-q;return`${Z===0?"M":"L"} ${Y} ${F}`};return r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,s=i?o.get(i):null),r.$$.dirty[0]&4096&&t(1,a=(s==null?void 0:s.connected)||!1),r.$$.dirty[0]&4096&&t(0,b=(s==null?void 0:s.type)==="local"),r.$$.dirty[0]&3&&t(11,d=a&&!b),r.$$.dirty[0]&8192&&t(10,K=i),r.$$.dirty[0]&9216&&K!==i&&(K&&$(K),V(i)),r.$$.dirty[0]&10240&&i&&d&&M(),r.$$.dirty[0]&10240&&(!i||!d)&&(t(2,k=[]),t(3,y=[]),t(4,c=[]),t(5,p={...u}),t(6,h={...g}),t(7,_={...f}),t(8,w={...m}),t(9,L={...v}))},[b,a,k,y,c,p,h,_,w,L,K,d,s,i,o,I,H,z,ee]}class Ah extends Et{constructor(e){super(),xt(this,e,Bh,Th,St,{},null,[-1,-1])}}function Rh(r){let e;return{c(){e=C("span"),e.textContent="✗ 无效",n(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Oh(r){let e;return{c(){e=C("span"),e.textContent="✓ 有效",n(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function zs(r){let e,t,s,a,b;return{c(){e=C("div"),t=de("svg"),s=de("path"),a=O(),b=J(r[3]),n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),n(t,"class","w-4 h-4"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"viewBox","0 0 24 24"),n(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(d,i){N(d,e,i),l(e,t),l(t,s),l(e,a),l(e,b)},p(d,i){i&8&&he(b,d[3])},d(d){d&&W(e)}}}function js(r){let e,t,s;return{c(){e=C("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(a,b){N(a,e,b),t||(s=X(e,"click",r[9]),t=!0)},p:Oe,d(a){a&&W(e),t=!1,s()}}}function Ph(r){let e,t,s,a,b,d,i,o,u=r[5].chars+"",g,f,m=r[5].lines+"",v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y,F,T,Q,G,ne,ie,ce,ue,be,_e;function ke(se,ge){if(se[4])return Oh;if(se[3])return Rh}let Ne=ke(r),De=Ne&&Ne(r),xe=r[3]&&zs(r),Ce=r[1]&&js(r);return{c(){e=C("div"),t=C("div"),s=C("div"),a=C("label"),b=C("span"),b.textContent="输入 JSON",d=O(),De&&De.c(),i=O(),o=C("div"),g=J(u),f=J(" 字符 · "),v=J(m),k=J(" 行"),y=O(),c=C("textarea"),h=O(),xe&&xe.c(),_=O(),w=C("div"),L=C("button"),x=de("svg"),E=de("path"),S=O(),D=C("span"),D.textContent="格式化",R=O(),P=C("button"),A=de("svg"),j=de("path"),K=O(),V=C("span"),V.textContent="压缩",U=O(),M=C("button"),I=de("svg"),H=de("path"),z=O(),ee=C("span"),ee.textContent="转义",Z=O(),Y=C("div"),F=C("div"),T=C("label"),T.textContent="输出",Q=O(),Ce&&Ce.c(),G=O(),ne=C("textarea"),ie=O(),ce=C("div"),ue=C("button"),ue.textContent="清空全部",n(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),n(o,"class","text-xs text-gray-500 dark:text-gray-400"),n(s,"class","flex items-center justify-between mb-2"),n(c,"placeholder","输入 JSON..."),n(c,"class",p="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),n(t,"class","relative"),n(E,"stroke-linecap","round"),n(E,"stroke-linejoin","round"),n(E,"stroke-width","2"),n(E,"d","M4 6h16M4 12h16m-7 6h7"),n(x,"class","w-4 h-4"),n(x,"fill","none"),n(x,"stroke","currentColor"),n(x,"viewBox","0 0 24 24"),n(D,"class","text-sm"),L.disabled=B=r[2]||!r[0].trim(),n(L,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(j,"stroke-linecap","round"),n(j,"stroke-linejoin","round"),n(j,"stroke-width","2"),n(j,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),n(A,"class","w-4 h-4"),n(A,"fill","none"),n(A,"stroke","currentColor"),n(A,"viewBox","0 0 24 24"),n(V,"class","text-sm"),P.disabled=$=r[2]||!r[0].trim(),n(P,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(H,"stroke-linecap","round"),n(H,"stroke-linejoin","round"),n(H,"stroke-width","2"),n(H,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),n(I,"class","w-4 h-4"),n(I,"fill","none"),n(I,"stroke","currentColor"),n(I,"viewBox","0 0 24 24"),n(ee,"class","text-sm"),M.disabled=q=r[2]||!r[0].trim(),n(M,"class","flex items-center justify-center gap-2 px-4 py-3 accent-gradient hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(w,"class","grid grid-cols-3 gap-3"),n(T,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),n(F,"class","flex items-center justify-between mb-2"),ne.readOnly=!0,n(ne,"placeholder","格式化后的 JSON 将显示在这里..."),n(ne,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),n(ue,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),n(ce,"class","flex justify-end"),n(e,"class","space-y-6")},m(se,ge){N(se,e,ge),l(e,t),l(t,s),l(s,a),l(a,b),l(a,d),De&&De.m(a,null),l(s,i),l(s,o),l(o,g),l(o,f),l(o,v),l(o,k),l(t,y),l(t,c),Re(c,r[0]),l(t,h),xe&&xe.m(t,null),l(e,_),l(e,w),l(w,L),l(L,x),l(x,E),l(L,S),l(L,D),l(w,R),l(w,P),l(P,A),l(A,j),l(P,K),l(P,V),l(w,U),l(w,M),l(M,I),l(I,H),l(M,z),l(M,ee),l(e,Z),l(e,Y),l(Y,F),l(F,T),l(F,Q),Ce&&Ce.m(F,null),l(Y,G),l(Y,ne),Re(ne,r[1]),l(e,ie),l(e,ce),l(ce,ue),be||(_e=[X(c,"input",r[13]),X(c,"keydown",r[11]),X(L,"click",r[6]),X(P,"click",r[7]),X(M,"click",r[8]),X(ne,"input",r[14]),X(ue,"click",r[10])],be=!0)},p(se,[ge]){Ne!==(Ne=ke(se))&&(De&&De.d(1),De=Ne&&Ne(se),De&&(De.c(),De.m(a,null))),ge&32&&u!==(u=se[5].chars+"")&&he(g,u),ge&32&&m!==(m=se[5].lines+"")&&he(v,m),ge&8&&p!==(p="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(se[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&n(c,"class",p),ge&1&&Re(c,se[0]),se[3]?xe?xe.p(se,ge):(xe=zs(se),xe.c(),xe.m(t,null)):xe&&(xe.d(1),xe=null),ge&5&&B!==(B=se[2]||!se[0].trim())&&(L.disabled=B),ge&5&&$!==($=se[2]||!se[0].trim())&&(P.disabled=$),ge&5&&q!==(q=se[2]||!se[0].trim())&&(M.disabled=q),se[1]?Ce?Ce.p(se,ge):(Ce=js(se),Ce.c(),Ce.m(F,null)):Ce&&(Ce.d(1),Ce=null),ge&2&&Re(ne,se[1])},i:Oe,o:Oe,d(se){se&&W(e),De&&De.d(),xe&&xe.d(),Ce&&Ce.d(),be=!1,Qe(_e)}}}function Ih(r,e,t){let{themeStore:s}=e,a="",b="",d=!1,i="",o=!1,u={chars:0,lines:0};async function g(){if(!a.trim()){t(4,o=!1),t(3,i="");return}if(!window.wailsBindings){t(4,o=!1),t(3,i="Wails 绑定未加载");return}try{const w=await window.wailsBindings.ValidateJSON(a);t(4,o=w.valid),t(3,i=w.error||"")}catch(w){t(4,o=!1),t(3,i=w.message)}}function f(){t(5,u.chars=a.length,u),t(5,u.lines=a.split(`
`).length,u)}async function m(){if(!(!a.trim()||d||!window.wailsBindings)){t(2,d=!0),t(3,i="");try{t(1,b=await window.wailsBindings.FormatJSON(a)),t(4,o=!0),t(3,i="")}catch(w){t(3,i=w.message||"格式化失败")}finally{t(2,d=!1)}}}async function v(){if(!(!a.trim()||d||!window.wailsBindings)){t(2,d=!0),t(3,i="");try{t(1,b=await window.wailsBindings.MinifyJSON(a)),t(4,o=!0),t(3,i="")}catch(w){t(3,i=w.message||"压缩失败")}finally{t(2,d=!1)}}}async function k(){if(!(!a.trim()||d||!window.wailsBindings)){t(2,d=!0),t(3,i="");try{t(1,b=await window.wailsBindings.EscapeJSON(a)),t(4,o=!0),t(3,i="")}catch(w){t(3,i=w.message||"转义失败")}finally{t(2,d=!1)}}}async function y(){if(b)try{await navigator.clipboard.writeText(b)}catch(w){console.error("复制失败:",w)}}function c(){t(0,a=""),t(1,b=""),t(4,o=!1)}function p(w){(w.ctrlKey||w.metaKey)&&w.key.toLowerCase()==="enter"&&!d&&a.trim()&&(w.preventDefault(),m())}function h(){a=this.value,t(0,a)}function _(){b=this.value,t(1,b)}return r.$$set=w=>{"themeStore"in w&&t(12,s=w.themeStore)},g(),f(),[a,b,d,i,o,u,m,v,k,y,c,p,s,h,_]}class Ws extends Et{constructor(e){super(),xt(this,e,Ih,Ph,St,{themeStore:12})}}function Hh(r){let e,t,s,a=r[2]==="encode"?"编码":"解码",b;return{c(){e=de("svg"),t=de("path"),s=O(),b=J(a),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(d,i){N(d,e,i),l(e,t),N(d,s,i),N(d,b,i)},p(d,i){i&4&&a!==(a=d[2]==="encode"?"编码":"解码")&&he(b,a)},d(d){d&&(W(e),W(s),W(b))}}}function Fh(r){let e,t,s,a;return{c(){e=de("svg"),t=de("circle"),s=de("path"),a=J(`\r
        处理中...`),n(t,"class","opacity-25"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(t,"stroke","currentColor"),n(t,"stroke-width","4"),n(s,"class","opacity-75"),n(s,"fill","currentColor"),n(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),n(e,"class","animate-spin w-4 h-4"),n(e,"fill","none"),n(e,"viewBox","0 0 24 24")},m(b,d){N(b,e,d),l(e,t),l(e,s),N(b,a,d)},p:Oe,d(b){b&&(W(e),W(a))}}}function Ns(r){let e,t,s;return{c(){e=C("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(a,b){N(a,e,b),t||(s=X(e,"click",r[5]),t=!0)},p:Oe,d(a){a&&W(e),t=!1,s()}}}function zh(r){let e,t,s,a,b,d,i,o,u,g,f,m,v=r[2]==="encode"?"输入文本":"输入 Base64",k,y,c,p,h,_,w,L,x,E,S,D,B=r[2]==="encode"?"Base64 输出":"解码结果",R,P,A,j,K,V,$,U,M,I,H,z;function ee(F,T){return F[3]?Fh:Hh}let q=ee(r),Z=q(r),Y=r[1]&&Ns(r);return{c(){e=C("div"),t=C("div"),s=C("button"),a=J("编码"),d=O(),i=C("button"),o=J("解码"),g=O(),f=C("div"),m=C("label"),k=J(v),y=O(),c=C("textarea"),h=O(),_=C("div"),w=C("button"),Z.c(),x=O(),E=C("div"),S=C("div"),D=C("label"),R=J(B),P=O(),Y&&Y.c(),A=O(),j=C("textarea"),V=O(),$=C("div"),U=C("button"),U.textContent="清空全部",M=O(),I=C("button"),I.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,n(s,"class",b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),n(m,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),n(c,"placeholder",p=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),n(c,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),w.disabled=L=r[3]||!r[0].trim(),n(w,"class","flex items-center justify-center gap-2 px-6 py-3 accent-gradient hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(_,"class","flex items-center justify-center"),n(D,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(S,"class","flex items-center justify-between mb-2"),j.readOnly=!0,n(j,"placeholder",K=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),n(j,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),n(U,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),n(I,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),n($,"class","flex justify-between items-center"),n(e,"class","space-y-6")},m(F,T){N(F,e,T),l(e,t),l(t,s),l(s,a),l(t,d),l(t,i),l(i,o),l(e,g),l(e,f),l(f,m),l(m,k),l(f,y),l(f,c),Re(c,r[0]),l(e,h),l(e,_),l(_,w),Z.m(w,null),l(e,x),l(e,E),l(E,S),l(S,D),l(D,R),l(S,P),Y&&Y.m(S,null),l(E,A),l(E,j),Re(j,r[1]),l(e,V),l(e,$),l($,U),l($,M),l($,I),H||(z=[X(s,"click",r[10]),X(i,"click",r[11]),X(c,"input",r[12]),X(c,"keydown",r[8]),X(w,"click",r[4]),X(j,"input",r[13]),X(U,"click",r[6]),X(I,"click",r[7])],H=!0)},p(F,[T]){T&4&&b!==(b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(F[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(s,"class",b),T&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(F[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(i,"class",u),T&4&&v!==(v=F[2]==="encode"?"输入文本":"输入 Base64")&&he(k,v),T&4&&p!==(p=F[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&n(c,"placeholder",p),T&1&&Re(c,F[0]),q===(q=ee(F))&&Z?Z.p(F,T):(Z.d(1),Z=q(F),Z&&(Z.c(),Z.m(w,null))),T&9&&L!==(L=F[3]||!F[0].trim())&&(w.disabled=L),T&4&&B!==(B=F[2]==="encode"?"Base64 输出":"解码结果")&&he(R,B),F[1]?Y?Y.p(F,T):(Y=Ns(F),Y.c(),Y.m(S,null)):Y&&(Y.d(1),Y=null),T&4&&K!==(K=F[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&n(j,"placeholder",K),T&2&&Re(j,F[1])},i:Oe,o:Oe,d(F){F&&W(e),Z.d(),Y&&Y.d(),H=!1,Qe(z)}}}function jh(r,e,t){let{themeStore:s}=e,a="",b="",d="encode",i=!1;async function o(){if(!(!a.trim()||i||!window.wailsBindings)){t(3,i=!0);try{d==="encode"?t(1,b=await window.wailsBindings.EncodeBase64(a)):t(1,b=await window.wailsBindings.DecodeBase64(a))}catch(p){t(1,b=""),console.error("处理失败:",p),alert("处理失败: "+(p.message||p))}finally{t(3,i=!1)}}}async function u(){if(b)try{await navigator.clipboard.writeText(b)}catch(p){console.error("复制失败:",p)}}function g(){t(0,a=""),t(1,b="")}function f(){t(2,d=d==="encode"?"decode":"encode"),t(0,a=""),t(1,b="")}function m(p){(p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="enter"&&!i&&a.trim()&&(p.preventDefault(),o())}const v=()=>t(2,d="encode"),k=()=>t(2,d="decode");function y(){a=this.value,t(0,a)}function c(){b=this.value,t(1,b)}return r.$$set=p=>{"themeStore"in p&&t(9,s=p.themeStore)},[a,b,d,i,o,u,g,f,m,s,v,k,y,c]}class Us extends Et{constructor(e){super(),xt(this,e,jh,zh,St,{themeStore:9})}}function Vs(r,e,t){const s=r.slice();return s[29]=e[t],s}function Ks(r,e,t){const s=r.slice();return s[29]=e[t],s}function qs(r){let e,t=r[29].name+"",s;return{c(){e=C("option"),s=J(t),e.__value=r[29].id,Re(e,e.__value)},m(a,b){N(a,e,b),l(e,s)},p:Oe,d(a){a&&W(e)}}}function Gs(r){let e,t=r[29].name+"",s;return{c(){e=C("option"),s=J(t),e.__value=r[29].id,Re(e,e.__value)},m(a,b){N(a,e,b),l(e,s)},p:Oe,d(a){a&&W(e)}}}function Js(r){let e,t,s,a,b,d,i,o,u,g;return{c(){e=C("div"),t=C("button"),s=J("加密"),b=O(),d=C("button"),i=J("解密"),n(t,"class",a="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(d,"class",o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(f,m){N(f,e,m),l(e,t),l(t,s),l(e,b),l(e,d),l(d,i),u||(g=[X(t,"click",r[24]),X(d,"click",r[25])],u=!0)},p(f,m){m[0]&2&&a!==(a="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(f[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(t,"class",a),m[0]&2&&o!==(o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(f[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(d,"class",o)},d(f){f&&W(e),u=!1,Qe(g)}}}function Ys(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j;return{c(){e=C("div"),t=C("div"),s=C("div"),a=C("label"),a.textContent="密钥（Hex）",b=O(),d=C("button"),d.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,i=O(),o=C("input"),u=O(),g=C("div"),f=J("密钥长度: "),m=J(r[9]),v=O(),k=C("div"),y=C("div"),c=C("label"),p=J(r[11]),h=J("（Hex）"),_=O(),w=C("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,L=O(),x=C("input"),S=O(),D=C("div"),B=J(r[11]),R=J("长度: "),P=J(r[10]),n(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(d,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),n(s,"class","flex items-center justify-between mb-2"),n(o,"type","text"),n(o,"placeholder","例如: 00112233445566778899aabbccddeeff"),n(o,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),n(g,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),n(c,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(w,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),n(y,"class","flex items-center justify-between mb-2"),n(x,"type","text"),n(x,"placeholder",E=r[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),n(x,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),n(D,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),n(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(K,V){N(K,e,V),l(e,t),l(t,s),l(s,a),l(s,b),l(s,d),l(t,i),l(t,o),Re(o,r[5]),l(t,u),l(t,g),l(g,f),l(g,m),l(e,v),l(e,k),l(k,y),l(y,c),l(c,p),l(c,h),l(y,_),l(y,w),l(k,L),l(k,x),Re(x,r[6]),l(k,S),l(k,D),l(D,B),l(D,R),l(D,P),A||(j=[X(d,"click",r[19]),X(o,"input",r[26]),X(w,"click",r[20]),X(x,"input",r[27])],A=!0)},p(K,V){V[0]&32&&o.value!==K[5]&&Re(o,K[5]),V[0]&512&&he(m,K[9]),V[0]&2048&&he(p,K[11]),V[0]&2048&&E!==(E=K[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10")&&n(x,"placeholder",E),V[0]&64&&x.value!==K[6]&&Re(x,K[6]),V[0]&2048&&he(B,K[11]),V[0]&1024&&he(P,K[10])},d(K){K&&W(e),A=!1,Qe(j)}}}function Wh(r){let e,t,s,a=r[2]?"计算哈希":r[1]==="decrypt"?"解密":"加密",b;return{c(){e=de("svg"),t=de("path"),s=O(),b=J(a),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(d,i){N(d,e,i),l(e,t),N(d,s,i),N(d,b,i)},p(d,i){i[0]&6&&a!==(a=d[2]?"计算哈希":d[1]==="decrypt"?"解密":"加密")&&he(b,a)},d(d){d&&(W(e),W(s),W(b))}}}function Nh(r){let e,t,s,a;return{c(){e=de("svg"),t=de("circle"),s=de("path"),a=J(`\r
        处理中...`),n(t,"class","opacity-25"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(t,"stroke","currentColor"),n(t,"stroke-width","4"),n(s,"class","opacity-75"),n(s,"fill","currentColor"),n(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),n(e,"class","animate-spin w-4 h-4"),n(e,"fill","none"),n(e,"viewBox","0 0 24 24")},m(b,d){N(b,e,d),l(e,t),l(e,s),N(b,a,d)},p:Oe,d(b){b&&(W(e),W(a))}}}function Xs(r){let e,t,s,a,b,d,i,o=r[2]?"哈希值":r[1]==="decrypt"?"明文":"Base64 密文",u,g,f,m,v,k,y,c,p,h,_=r[4].length+"",w,L,x,E;return{c(){e=C("div"),t=C("div"),s=C("label"),a=C("span"),b=J(r[12]),d=O(),i=C("span"),u=J(o),g=O(),f=C("button"),f.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,m=O(),v=C("div"),k=C("code"),y=J(r[4]),c=O(),p=C("div"),h=J("长度: "),w=J(_),L=J(" 字符"),n(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),n(f,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),n(t,"class","flex items-center justify-between mb-2"),n(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),n(v,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),n(p,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(S,D){N(S,e,D),l(e,t),l(t,s),l(s,a),l(a,b),l(s,d),l(s,i),l(i,u),l(t,g),l(t,f),l(e,m),l(e,v),l(v,k),l(k,y),l(e,c),l(e,p),l(p,h),l(p,w),l(p,L),x||(E=X(f,"click",r[15]),x=!0)},p(S,D){D[0]&4096&&he(b,S[12]),D[0]&6&&o!==(o=S[2]?"哈希值":S[1]==="decrypt"?"明文":"Base64 密文")&&he(u,o),D[0]&16&&he(y,S[4]),D[0]&16&&_!==(_=S[4].length+"")&&he(w,_)},d(S){S&&W(e),x=!1,E()}}}function Uh(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y=r[2]?"输入文本":r[1]==="decrypt"?"输入 Base64 密文":"输入明文",c,p,h,_,w,L=r[3].length+"",x,E,S,D,B,R,P,A,j,K,V,$,U=ze(r[13].filter(Zs)),M=[];for(let T=0;T<U.length;T+=1)M[T]=qs(Ks(r,U,T));let I=ze(r[13].filter(Qs)),H=[];for(let T=0;T<I.length;T+=1)H[T]=Gs(Vs(r,I,T));let z=!r[2]&&Js(r),ee=!r[2]&&Ys(r);function q(T,Q){return T[7]?Nh:Wh}let Z=q(r),Y=Z(r),F=r[4]&&Xs(r);return{c(){e=C("div"),t=C("div"),s=C("label"),s.textContent="选择算法",a=O(),b=C("div"),d=C("div"),i=C("select"),o=C("optgroup");for(let T=0;T<M.length;T+=1)M[T].c();u=C("optgroup");for(let T=0;T<H.length;T+=1)H[T].c();g=O(),z&&z.c(),f=O(),ee&&ee.c(),m=O(),v=C("div"),k=C("label"),c=J(y),p=O(),h=C("textarea"),_=O(),w=C("div"),x=J(L),E=J(" 字符"),S=O(),D=C("div"),B=C("button"),Y.c(),P=O(),F&&F.c(),A=O(),j=C("div"),K=C("button"),K.textContent="清空全部",n(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),n(o,"label","Hash"),n(u,"label","加密解密"),n(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[0]===void 0&&dr(()=>r[22].call(i)),n(d,"class","flex-1"),n(b,"class","flex flex-col md:flex-row gap-3"),n(k,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),n(h,"placeholder",r[8]),n(h,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),n(w,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),B.disabled=R=r[7]||!r[3].trim()||!r[2]&&(!r[5].trim()||!r[6].trim()),n(B,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(D,"class","flex justify-center"),n(K,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),n(j,"class","flex justify-end"),n(e,"class","space-y-6")},m(T,Q){N(T,e,Q),l(e,t),l(t,s),l(t,a),l(t,b),l(b,d),l(d,i),l(i,o);for(let G=0;G<M.length;G+=1)M[G]&&M[G].m(o,null);l(i,u);for(let G=0;G<H.length;G+=1)H[G]&&H[G].m(u,null);nr(i,r[0],!0),l(b,g),z&&z.m(b,null),l(e,f),ee&&ee.m(e,null),l(e,m),l(e,v),l(v,k),l(k,c),l(v,p),l(v,h),Re(h,r[3]),l(v,_),l(v,w),l(w,x),l(w,E),l(e,S),l(e,D),l(D,B),Y.m(B,null),l(e,P),F&&F.m(e,null),l(e,A),l(e,j),l(j,K),V||($=[X(i,"change",r[22]),X(i,"change",r[23]),X(h,"input",r[28]),X(h,"keydown",r[18]),X(B,"click",r[14]),X(K,"click",r[16])],V=!0)},p(T,Q){if(Q[0]&8192){U=ze(T[13].filter(Zs));let G;for(G=0;G<U.length;G+=1){const ne=Ks(T,U,G);M[G]?M[G].p(ne,Q):(M[G]=qs(ne),M[G].c(),M[G].m(o,null))}for(;G<M.length;G+=1)M[G].d(1);M.length=U.length}if(Q[0]&8192){I=ze(T[13].filter(Qs));let G;for(G=0;G<I.length;G+=1){const ne=Vs(T,I,G);H[G]?H[G].p(ne,Q):(H[G]=Gs(ne),H[G].c(),H[G].m(u,null))}for(;G<H.length;G+=1)H[G].d(1);H.length=I.length}Q[0]&8193&&nr(i,T[0]),T[2]?z&&(z.d(1),z=null):z?z.p(T,Q):(z=Js(T),z.c(),z.m(b,null)),T[2]?ee&&(ee.d(1),ee=null):ee?ee.p(T,Q):(ee=Ys(T),ee.c(),ee.m(e,m)),Q[0]&6&&y!==(y=T[2]?"输入文本":T[1]==="decrypt"?"输入 Base64 密文":"输入明文")&&he(c,y),Q[0]&256&&n(h,"placeholder",T[8]),Q[0]&8&&Re(h,T[3]),Q[0]&8&&L!==(L=T[3].length+"")&&he(x,L),Z===(Z=q(T))&&Y?Y.p(T,Q):(Y.d(1),Y=Z(T),Y&&(Y.c(),Y.m(B,null))),Q[0]&236&&R!==(R=T[7]||!T[3].trim()||!T[2]&&(!T[5].trim()||!T[6].trim()))&&(B.disabled=R),T[4]?F?F.p(T,Q):(F=Xs(T),F.c(),F.m(e,A)):F&&(F.d(1),F=null)},i:Oe,o:Oe,d(T){T&&W(e),Mt(M,T),Mt(H,T),z&&z.d(),ee&&ee.d(),Y.d(),F&&F.d(),V=!1,Qe($)}}}const Zs=r=>r.type==="hash",Qs=r=>r.type==="crypto";function Vh(r,e,t){let s,a,b,d,i,o,{themeStore:u}=e,g="",f="",m="md5",v="encrypt",k="",y="",c=!1;const p=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];async function h(){if(!(!g.trim()||c||!window.wailsBindings)&&!(!s&&(!k.trim()||!y.trim()))){t(7,c=!0),t(4,f="");try{s?t(4,f=await window.wailsBindings.CalculateHash(g,m)):v==="encrypt"?t(4,f=await window.wailsBindings.EncryptText(g,m,k,y)):t(4,f=await window.wailsBindings.DecryptText(g,m,k,y))}catch(V){t(4,f=""),console.error("操作失败:",V),alert("操作失败: "+(V.message||V))}finally{t(7,c=!1)}}}async function _(){if(f)try{await navigator.clipboard.writeText(f)}catch(V){console.error("复制失败:",V)}}function w(){t(3,g=""),t(4,f=""),t(5,k=""),t(6,y="")}function L(){t(3,g=""),t(4,f="")}function x(V){(V.ctrlKey||V.metaKey)&&V.key.toLowerCase()==="enter"&&!c&&g.trim()&&(V.preventDefault(),h())}function E(){let V;m==="sm4-cbc"?V=16:V=32;const $=new Uint8Array(V);crypto.getRandomValues($),t(5,k=Array.from($).map(U=>U.toString(16).padStart(2,"0")).join(""))}function S(){const V=m==="aes-gcm"?12:16,$=new Uint8Array(V);crypto.getRandomValues($),t(6,y=Array.from($).map(U=>U.toString(16).padStart(2,"0")).join(""))}function D(){m=Pr(this),t(0,m),t(13,p)}const B=()=>{w()},R=()=>{t(1,v="encrypt"),L()},P=()=>{t(1,v="decrypt"),L()};function A(){k=this.value,t(5,k)}function j(){y=this.value,t(6,y)}function K(){g=this.value,t(3,g)}return r.$$set=V=>{"themeStore"in V&&t(21,u=V.themeStore)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,s=(()=>{const V=p.find($=>$.id===m);return(V==null?void 0:V.type)==="hash"})()),r.$$.dirty[0]&1&&t(12,a=(()=>{var V;return((V=p.find($=>$.id===m))==null?void 0:V.name)||""})()),r.$$.dirty[0]&1&&t(11,b=m==="aes-gcm"?"Nonce":"IV"),r.$$.dirty[0]&1&&t(10,d=m==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"),r.$$.dirty[0]&1&&t(9,i=m==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"),r.$$.dirty[0]&6&&t(8,o=s?"输入要计算哈希的文本...":v==="decrypt"?"输入 Base64 密文...":"输入要加密的明文...")},[m,v,s,g,f,k,y,c,o,i,d,b,a,p,h,_,w,L,x,E,S,u,D,B,R,P,A,j,K]}class $s extends Et{constructor(e){super(),xt(this,e,Vh,Uh,St,{themeStore:21},null,[-1,-1])}}function Kh(r){let e,t,s,a,b,d,i,o,u,g,f,m=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",v,k,y;return{c(){e=C("div"),t=C("div"),s=C("label"),s.textContent="输入日期时间",a=O(),b=C("button"),b.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,d=O(),i=C("input"),u=O(),g=C("div"),f=J("格式: "),v=J(m),n(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(b,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),n(t,"class","flex items-center justify-between mb-2"),n(i,"type","text"),n(i,"placeholder",o=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),n(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),n(g,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(c,p){N(c,e,p),l(e,t),l(t,s),l(t,a),l(t,b),l(e,d),l(e,i),Re(i,r[3]),l(e,u),l(e,g),l(g,f),l(g,v),k||(y=[X(b,"click",r[9]),X(i,"input",r[19]),X(i,"keydown",r[12])],k=!0)},p(c,p){p&2&&o!==(o=c[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&n(i,"placeholder",o),p&8&&i.value!==c[3]&&Re(i,c[3]),p&2&&m!==(m=c[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&he(v,m)},d(c){c&&W(e),k=!1,Qe(y)}}}function qh(r){let e,t,s,a,b=r[1]==="milliseconds"?"毫秒":"秒",d,i,o,u,g,f,m,v,k;return{c(){e=C("div"),t=C("div"),s=C("label"),a=J("输入 Unix 时间戳（"),d=J(b),i=J("）"),o=O(),u=C("button"),u.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,g=O(),f=C("input"),n(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(u,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),n(t,"class","flex items-center justify-between mb-2"),n(f,"type","number"),n(f,"placeholder",m=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),n(f,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(y,c){N(y,e,c),l(e,t),l(t,s),l(s,a),l(s,d),l(s,i),l(t,o),l(t,u),l(e,g),l(e,f),Re(f,r[2]),v||(k=[X(u,"click",r[8]),X(f,"input",r[18]),X(f,"keydown",r[12])],v=!0)},p(y,c){c&2&&b!==(b=y[1]==="milliseconds"?"毫秒":"秒")&&he(d,b),c&2&&m!==(m=y[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&n(f,"placeholder",m),c&4&&xr(f.value)!==y[2]&&Re(f,y[2])},d(y){y&&W(e),v=!1,Qe(k)}}}function Gh(r){let e,t,s;return{c(){e=de("svg"),t=de("path"),s=J(`\r
        转换`),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,b){N(a,e,b),l(e,t),N(a,s,b)},d(a){a&&(W(e),W(s))}}}function Jh(r){let e,t,s,a;return{c(){e=de("svg"),t=de("circle"),s=de("path"),a=J(`\r
        转换中...`),n(t,"class","opacity-25"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(t,"stroke","currentColor"),n(t,"stroke-width","4"),n(s,"class","opacity-75"),n(s,"fill","currentColor"),n(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),n(e,"class","animate-spin w-4 h-4"),n(e,"fill","none"),n(e,"viewBox","0 0 24 24")},m(b,d){N(b,e,d),l(e,t),l(e,s),N(b,a,d)},d(b){b&&(W(e),W(a))}}}function en(r){let e,t,s,a=r[0]==="toDateTime"?"日期时间":"时间戳",b,d,i,o,u,g,f,m,v;return{c(){e=C("div"),t=C("div"),s=C("label"),b=J(a),d=O(),i=C("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,o=O(),u=C("div"),g=C("code"),f=J(r[4]),n(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),n(t,"class","flex items-center justify-between mb-2"),n(g,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),n(u,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,y){N(k,e,y),l(e,t),l(t,s),l(s,b),l(t,d),l(t,i),l(e,o),l(e,u),l(u,g),l(g,f),m||(v=X(i,"click",r[10]),m=!0)},p(k,y){y&1&&a!==(a=k[0]==="toDateTime"?"日期时间":"时间戳")&&he(b,a),y&16&&he(f,k[4])},d(k){k&&W(e),m=!1,v()}}}function Yh(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P=r[1]==="milliseconds"?"毫秒":"秒",A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y,F;function T(be,_e){return be[0]==="toDateTime"?qh:Kh}let Q=T(r),G=Q(r);function ne(be,_e){return be[5]?Jh:Gh}let ie=ne(r),ce=ie(r),ue=r[4]&&en(r);return{c(){e=C("div"),t=C("div"),s=C("button"),a=J("时间戳 → 日期时间"),d=O(),i=C("button"),o=J("日期时间 → 时间戳"),g=O(),f=C("div"),m=C("div"),v=C("button"),k=J("秒"),c=O(),p=C("button"),h=J("毫秒"),w=O(),L=C("div"),x=C("div"),E=de("svg"),S=de("path"),D=O(),B=C("span"),R=J("当前时间戳（"),A=J(P),j=J("）: "),K=C("strong"),V=J(r[6]),$=O(),G.c(),U=O(),M=C("div"),I=C("button"),ce.c(),z=O(),ue&&ue.c(),ee=O(),q=C("div"),Z=C("button"),Z.textContent="清空全部",n(s,"class",b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),n(v,"class",y="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(p,"class",_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(m,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),n(f,"class","flex justify-end"),n(S,"stroke-linecap","round"),n(S,"stroke-linejoin","round"),n(S,"stroke-width","2"),n(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),n(E,"class","w-5 h-5"),n(E,"fill","none"),n(E,"stroke","currentColor"),n(E,"viewBox","0 0 24 24"),n(K,"class","font-mono"),n(x,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),n(L,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),I.disabled=H=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),n(I,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(M,"class","flex justify-center"),n(Z,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),n(q,"class","flex justify-end"),n(e,"class","space-y-6")},m(be,_e){N(be,e,_e),l(e,t),l(t,s),l(s,a),l(t,d),l(t,i),l(i,o),l(e,g),l(e,f),l(f,m),l(m,v),l(v,k),l(m,c),l(m,p),l(p,h),l(e,w),l(e,L),l(L,x),l(x,E),l(E,S),l(x,D),l(x,B),l(B,R),l(B,A),l(B,j),l(B,K),l(K,V),l(e,$),G.m(e,null),l(e,U),l(e,M),l(M,I),ce.m(I,null),l(e,z),ue&&ue.m(e,null),l(e,ee),l(e,q),l(q,Z),Y||(F=[X(s,"click",r[14]),X(i,"click",r[15]),X(v,"click",r[16]),X(p,"click",r[17]),X(I,"click",r[7]),X(Z,"click",r[11])],Y=!0)},p(be,[_e]){_e&1&&b!==(b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(be[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(s,"class",b),_e&1&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(be[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(i,"class",u),_e&2&&y!==(y="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(be[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(v,"class",y),_e&2&&_!==(_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(be[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(p,"class",_),_e&2&&P!==(P=be[1]==="milliseconds"?"毫秒":"秒")&&he(A,P),_e&64&&he(V,be[6]),Q===(Q=T(be))&&G?G.p(be,_e):(G.d(1),G=Q(be),G&&(G.c(),G.m(e,U))),ie!==(ie=ne(be))&&(ce.d(1),ce=ie(be),ce&&(ce.c(),ce.m(I,null))),_e&45&&H!==(H=be[5]||(be[0]==="toDateTime"?!be[2].trim():!be[3].trim()))&&(I.disabled=H),be[4]?ue?ue.p(be,_e):(ue=en(be),ue.c(),ue.m(e,ee)):ue&&(ue.d(1),ue=null)},i:Oe,o:Oe,d(be){be&&W(e),G.d(),ce.d(),ue&&ue.d(),Y=!1,Qe(F)}}}const Xh="2006-01-02 15:04:05",Zh="2006-01-02 15:04:05.000";function Qh(r,e,t){let{themeStore:s}=e,a="toDateTime",b="seconds",d="",i="",o="",u=!1,g=0;function f(){const D=Date.now();t(6,g=b==="milliseconds"?D:Math.floor(D/1e3))}function m(){return b==="milliseconds"?Zh:Xh}async function v(){if(window.wailsBindings){t(5,u=!0),t(4,o="");try{if(a==="toDateTime"){const D=parseInt(d.trim());if(isNaN(D))throw new Error("请输入有效的时间戳");b==="milliseconds"?t(4,o=await window.wailsBindings.TimestampToDateTimeMs(D,m())):t(4,o=await window.wailsBindings.TimestampToDateTime(D,m()))}else{if(!i.trim())throw new Error("请输入日期时间");if(b==="milliseconds"){const D=await window.wailsBindings.DateTimeToTimestampMs(i,m());t(4,o=D.toString())}else{const D=await window.wailsBindings.DateTimeToTimestamp(i,m());t(4,o=D.toString())}}}catch(D){t(4,o=""),console.error("转换失败:",D),alert("转换失败: "+(D.message||D))}finally{t(5,u=!1)}}}async function k(){if(window.wailsBindings)try{const D=b==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,d=D.toString())}catch(D){console.error("获取当前时间戳失败:",D)}}async function y(){if(window.wailsBindings)try{const D=b==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),B=b==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(D,m()):await window.wailsBindings.TimestampToDateTime(D,m());t(3,i=B)}catch(D){console.error("获取当前时间失败:",D)}}async function c(){if(o)try{await navigator.clipboard.writeText(o)}catch(D){console.error("复制失败:",D)}}function p(){t(2,d=""),t(3,i=""),t(4,o="")}function h(D){(D.ctrlKey||D.metaKey)&&D.key.toLowerCase()==="enter"&&!u&&(a==="toDateTime"&&d.trim()||a==="toTimestamp"&&i.trim())&&(D.preventDefault(),v())}const _=()=>{t(0,a="toDateTime"),p()},w=()=>{t(0,a="toTimestamp"),p()},L=()=>{t(1,b="seconds"),p()},x=()=>{t(1,b="milliseconds"),p()};function E(){d=xr(this.value),t(2,d)}function S(){i=this.value,t(3,i)}return r.$$set=D=>{"themeStore"in D&&t(13,s=D.themeStore)},f(),[a,b,d,i,o,u,g,v,k,y,c,p,h,s,_,w,L,x,E,S]}class tn extends Et{constructor(e){super(),xt(this,e,Qh,Yh,St,{themeStore:13})}}function rn(r,e,t){const s=r.slice();return s[12]=e[t],s[14]=t,s}function $h(r){let e,t,s,a;return{c(){e=de("svg"),t=de("path"),s=O(),a=C("span"),a.textContent="生成 UUID v4",n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),n(e,"class","w-6 h-6"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(b,d){N(b,e,d),l(e,t),N(b,s,d),N(b,a,d)},d(b){b&&(W(e),W(s),W(a))}}}function eu(r){let e,t,s,a;return{c(){e=de("svg"),t=de("circle"),s=de("path"),a=J(`\r
        生成中...`),n(t,"class","opacity-25"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(t,"stroke","currentColor"),n(t,"stroke-width","4"),n(s,"class","opacity-75"),n(s,"fill","currentColor"),n(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),n(e,"class","animate-spin w-6 h-6"),n(e,"fill","none"),n(e,"viewBox","0 0 24 24")},m(b,d){N(b,e,d),l(e,t),l(e,s),N(b,a,d)},d(b){b&&(W(e),W(a))}}}function sn(r){let e,t,s,a,b,d,i,o,u,g,f;function m(y,c){return y[3]===y[0]?ru:tu}let v=m(r),k=v(r);return{c(){e=C("div"),t=C("div"),s=C("label"),s.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,a=O(),b=C("button"),k.c(),d=O(),i=C("div"),o=C("code"),u=J(r[0]),n(s,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),n(b,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),n(t,"class","flex items-center justify-between mb-3"),n(o,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),n(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(y,c){N(y,e,c),l(e,t),l(t,s),l(t,a),l(t,b),k.m(b,null),l(e,d),l(e,i),l(i,o),l(o,u),g||(f=X(b,"click",r[9]),g=!0)},p(y,c){v!==(v=m(y))&&(k.d(1),k=v(y),k&&(k.c(),k.m(b,null))),c&1&&he(u,y[0])},d(y){y&&W(e),k.d(),g=!1,f()}}}function tu(r){let e,t,s;return{c(){e=de("svg"),t=de("path"),s=J(`\r
            复制`),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,b){N(a,e,b),l(e,t),N(a,s,b)},d(a){a&&(W(e),W(s))}}}function ru(r){let e,t,s;return{c(){e=de("svg"),t=de("path"),s=J(`\r
            已复制`),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M5 13l4 4L19 7"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,b){N(a,e,b),l(e,t),N(a,s,b)},d(a){a&&(W(e),W(s))}}}function nn(r){let e,t,s,a,b,d,i,o,u=r[1].length+"",g,f,m,v,k,y,c,p,h=ze(r[1]),_=[];for(let w=0;w<h.length;w+=1)_[w]=on(rn(r,h,w));return{c(){e=C("div"),t=C("div"),s=C("label"),a=de("svg"),b=de("path"),d=J(`\r
          历史记录\r
          `),i=C("span"),o=J("("),g=J(u),f=J("/10)"),m=O(),v=C("button"),v.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=O(),y=C("div");for(let w=0;w<_.length;w+=1)_[w].c();n(b,"stroke-linecap","round"),n(b,"stroke-linejoin","round"),n(b,"stroke-width","2"),n(b,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),n(a,"class","w-4 h-4"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"viewBox","0 0 24 24"),n(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),n(s,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),n(v,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),n(t,"class","flex items-center justify-between mb-3"),n(y,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(w,L){N(w,e,L),l(e,t),l(t,s),l(s,a),l(a,b),l(s,d),l(s,i),l(i,o),l(i,g),l(i,f),l(t,m),l(t,v),l(e,k),l(e,y);for(let x=0;x<_.length;x+=1)_[x]&&_[x].m(y,null);c||(p=X(v,"click",r[6]),c=!0)},p(w,L){if(L&2&&u!==(u=w[1].length+"")&&he(g,u),L&170){h=ze(w[1]);let x;for(x=0;x<h.length;x+=1){const E=rn(w,h,x);_[x]?_[x].p(E,L):(_[x]=on(E),_[x].c(),_[x].m(y,null))}for(;x<_.length;x+=1)_[x].d(1);_.length=h.length}},d(w){w&&W(e),Mt(_,w),c=!1,p()}}}function iu(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function su(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M5 13l4 4L19 7"),n(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function on(r){let e,t,s=r[12]+"",a,b,d,i,o,u,g,f,m;function v(){return r[10](r[12])}function k(h,_){return h[3]===h[12]?su:iu}let y=k(r),c=y(r);function p(){return r[11](r[12])}return{c(){e=C("div"),t=C("code"),a=J(s),b=O(),d=C("div"),i=C("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',o=O(),u=C("button"),c.c(),g=O(),n(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),n(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),n(i,"title","使用此 UUID"),n(u,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),n(u,"title","复制"),n(d,"class","flex items-center gap-2 shrink-0"),n(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(h,_){N(h,e,_),l(e,t),l(t,a),l(e,b),l(e,d),l(d,i),l(d,o),l(d,u),c.m(u,null),l(e,g),f||(m=[X(i,"click",v),X(u,"click",p)],f=!0)},p(h,_){r=h,_&2&&s!==(s=r[12]+"")&&he(a,s),y!==(y=k(r))&&(c.d(1),c=y(r),c&&(c.c(),c.m(u,null)))},d(h){h&&W(e),c.d(),f=!1,Qe(m)}}}function ln(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',n(e,"class","text-center py-8")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function nu(r){let e,t,s,a,b,d,i,o,u,g;function f(p,h){return p[2]?eu:$h}let m=f(r),v=m(r),k=r[0]&&sn(r),y=r[1].length>0&&nn(r),c=!r[0]&&ln();return{c(){e=C("div"),t=C("div"),s=C("button"),v.c(),a=O(),b=C("div"),d=O(),k&&k.c(),i=O(),y&&y.c(),o=O(),c&&c.c(),n(b,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),s.disabled=r[2],n(s,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),n(t,"class","text-center"),n(e,"class","space-y-6")},m(p,h){N(p,e,h),l(e,t),l(t,s),v.m(s,null),l(s,a),l(s,b),l(e,d),k&&k.m(e,null),l(e,i),y&&y.m(e,null),l(e,o),c&&c.m(e,null),u||(g=X(s,"click",r[4]),u=!0)},p(p,[h]){m!==(m=f(p))&&(v.d(1),v=m(p),v&&(v.c(),v.m(s,a))),h&4&&(s.disabled=p[2]),p[0]?k?k.p(p,h):(k=sn(p),k.c(),k.m(e,i)):k&&(k.d(1),k=null),p[1].length>0?y?y.p(p,h):(y=nn(p),y.c(),y.m(e,o)):y&&(y.d(1),y=null),p[0]?c&&(c.d(1),c=null):c||(c=ln(),c.c(),c.m(e,null))},i:Oe,o:Oe,d(p){p&&W(e),v.d(),k&&k.d(),y&&y.d(),c&&c.d(),u=!1,g()}}}function ou(r,e,t){let{themeStore:s}=e,a="",b=[],d=!1,i=null;async function o(){if(window.wailsBindings){t(2,d=!0);try{const y=await window.wailsBindings.GenerateUUIDv4();t(0,a=y),b.length<10?t(1,b=[y,...b]):t(1,b=[y,...b.slice(0,9)])}catch(y){console.error("UUID 生成失败:",y),alert("UUID 生成失败: "+(y.message||y))}finally{t(2,d=!1)}}}async function u(y){try{await navigator.clipboard.writeText(y),t(3,i=y),setTimeout(()=>t(3,i=null),2e3)}catch(c){console.error("复制失败:",c)}}function g(){t(1,b=[])}function f(y){t(0,a=y)}const m=()=>u(a),v=y=>f(y),k=y=>u(y);return r.$$set=y=>{"themeStore"in y&&t(8,s=y.themeStore)},[a,b,d,i,o,u,g,f,s,m,v,k]}class an extends Et{constructor(e){super(),xt(this,e,ou,nu,St,{themeStore:8})}}function cn(r,e,t){const s=r.slice();return s[19]=e[t][0],s[20]=e[t][1],s}function dn(r,e,t){const s=r.slice();return s[23]=e[t],s}function hn(r){let e,t,s=r[23].label+"",a,b,d,i,o,u,g,f;function m(){return r[16](r[23])}return{c(){e=C("button"),t=C("div"),a=J(s),d=O(),i=C("div"),i.textContent=`${r[23].desc}`,o=O(),n(t,"class",b="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300")),n(i,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),n(e,"class",u="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))},m(v,k){N(v,e,k),l(e,t),l(t,a),l(e,d),l(e,i),l(e,o),g||(f=X(e,"click",m),g=!0)},p(v,k){r=v,k&8&&b!==(b="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"))&&n(t,"class",b),k&8&&u!==(u="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))&&n(e,"class",u)},d(v){v&&W(e),g=!1,f()}}}function lu(r){let e,t,s,a=r[2]==="encode"?"编码":"解码",b;return{c(){e=de("svg"),t=de("path"),s=O(),b=J(a),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),n(e,"class","w-4 h-4"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(d,i){N(d,e,i),l(e,t),N(d,s,i),N(d,b,i)},p(d,i){i&4&&a!==(a=d[2]==="encode"?"编码":"解码")&&he(b,a)},d(d){d&&(W(e),W(s),W(b))}}}function au(r){let e,t,s,a;return{c(){e=de("svg"),t=de("circle"),s=de("path"),a=J(`\r
        处理中...`),n(t,"class","opacity-25"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(t,"stroke","currentColor"),n(t,"stroke-width","4"),n(s,"class","opacity-75"),n(s,"fill","currentColor"),n(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),n(e,"class","animate-spin w-4 h-4"),n(e,"fill","none"),n(e,"viewBox","0 0 24 24")},m(b,d){N(b,e,d),l(e,t),l(e,s),N(b,a,d)},p:Oe,d(b){b&&(W(e),W(a))}}}function un(r){let e,t,s;return{c(){e=C("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(a,b){N(a,e,b),t||(s=X(e,"click",r[9]),t=!0)},p:Oe,d(a){a&&W(e),t=!1,s()}}}function fn(r){let e,t,s,a,b=ze(Object.entries(r[5])),d=[];for(let i=0;i<b.length;i+=1)d[i]=pn(cn(r,b,i));return{c(){e=C("div"),t=C("h4"),t.textContent="查询参数",s=O(),a=C("div");for(let i=0;i<d.length;i+=1)d[i].c();n(t,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),n(a,"class","space-y-2 max-h-40 overflow-y-auto"),n(e,"class","border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-800/50")},m(i,o){N(i,e,o),l(e,t),l(e,s),l(e,a);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(a,null)},p(i,o){if(o&32){b=ze(Object.entries(i[5]));let u;for(u=0;u<b.length;u+=1){const g=cn(i,b,u);d[u]?d[u].p(g,o):(d[u]=pn(g),d[u].c(),d[u].m(a,null))}for(;u<d.length;u+=1)d[u].d(1);d.length=b.length}},d(i){i&&W(e),Mt(d,i)}}}function pn(r){let e,t,s=r[19]+"",a,b,d,i,o,u=r[20]+"",g,f;return{c(){e=C("div"),t=C("span"),a=J(s),b=O(),d=C("span"),d.textContent="=",i=O(),o=C("span"),g=J(u),f=O(),n(t,"class","px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg font-medium"),n(d,"class","text-gray-400"),n(o,"class","text-gray-700 dark:text-gray-300 font-mono break-all"),n(e,"class","flex items-center gap-2 text-sm")},m(m,v){N(m,e,v),l(e,t),l(t,a),l(e,b),l(e,d),l(e,i),l(e,o),l(o,g),l(e,f)},p(m,v){v&32&&s!==(s=m[19]+"")&&he(a,s),v&32&&u!==(u=m[20]+"")&&he(g,u)},d(m){m&&W(e)}}}function cu(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_=r[2]==="encode"?"输入文本":"输入 URL 编码",w,L,x,E,S,D,B,R,P,A,j,K,V,$,U=r[2]==="encode"?"URL 编码结果":"解码结果",M,I,H,z,ee,q,Z=r[5]&&Object.keys(r[5]).length>0,Y,F,T,Q,G,ne,ie,ce,ue,be=ze(r[6]),_e=[];for(let se=0;se<be.length;se+=1)_e[se]=hn(dn(r,be,se));function ke(se,ge){return se[4]?au:lu}let Ne=ke(r),De=Ne(r),xe=r[1]&&un(r),Ce=Z&&fn(r);return{c(){e=C("div"),t=C("div"),s=C("button"),a=J("编码"),d=O(),i=C("button"),o=J("解码"),g=O(),f=C("div"),m=C("label"),m.textContent="编码/解码模式",v=O(),k=C("div");for(let se=0;se<_e.length;se+=1)_e[se].c();y=O(),c=C("div"),p=C("div"),h=C("label"),w=J(_),L=O(),x=C("button"),x.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
        解析 URL`,E=O(),S=C("textarea"),B=O(),R=C("div"),P=C("button"),De.c(),j=O(),K=C("div"),V=C("div"),$=C("label"),M=J(U),I=O(),xe&&xe.c(),H=O(),z=C("textarea"),q=O(),Ce&&Ce.c(),Y=O(),F=C("div"),T=C("button"),T.textContent="清空全部",Q=O(),G=C("button"),G.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,ne=O(),ie=C("div"),ie.innerHTML='<p class="font-semibold mb-1">💡 提示:</p> <ul class="space-y-1 ml-4 list-disc"><li><b>Query 参数</b>：编码空格为 +，适合表单数据</li> <li><b>路径</b>：保留斜杠，适合 URL 路径部分</li> <li><b>完整 URL</b>：解析并显示 URL 各组成部分</li> <li>按 <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded">Ctrl+Enter</kbd> 快速执行</li></ul>',n(s,"class",b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),n(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),n(m,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),n(k,"class","grid grid-cols-3 gap-2"),n(h,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),n(x,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300"),n(p,"class","flex items-center justify-between mb-2"),n(S,"placeholder",D=r[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串..."),n(S,"class","w-full h-28 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),P.disabled=A=r[4]||!r[0].trim(),n(P,"class","flex items-center justify-center gap-2 px-6 py-3 accent-gradient hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),n(R,"class","flex items-center justify-center"),n($,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),n(V,"class","flex items-center justify-between mb-2"),z.readOnly=!0,n(z,"placeholder",ee=r[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里..."),n(z,"class","w-full h-28 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),n(T,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),n(G,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),n(F,"class","flex justify-between items-center"),n(ie,"class","text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg"),n(e,"class","space-y-6")},m(se,ge){N(se,e,ge),l(e,t),l(t,s),l(s,a),l(t,d),l(t,i),l(i,o),l(e,g),l(e,f),l(f,m),l(f,v),l(f,k);for(let fe=0;fe<_e.length;fe+=1)_e[fe]&&_e[fe].m(k,null);l(e,y),l(e,c),l(c,p),l(p,h),l(h,w),l(p,L),l(p,x),l(c,E),l(c,S),Re(S,r[0]),l(e,B),l(e,R),l(R,P),De.m(P,null),l(e,j),l(e,K),l(K,V),l(V,$),l($,M),l(V,I),xe&&xe.m(V,null),l(K,H),l(K,z),Re(z,r[1]),l(e,q),Ce&&Ce.m(e,null),l(e,Y),l(e,F),l(F,T),l(F,Q),l(F,G),l(e,ne),l(e,ie),ce||(ue=[X(s,"click",r[14]),X(i,"click",r[15]),X(x,"click",r[8]),X(S,"input",r[17]),X(S,"keydown",r[12]),X(P,"click",r[7]),X(z,"input",r[18]),X(T,"click",r[10]),X(G,"click",r[11])],ce=!0)},p(se,[ge]){if(ge&4&&b!==(b="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(se[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(s,"class",b),ge&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(se[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&n(i,"class",u),ge&72){be=ze(se[6]);let fe;for(fe=0;fe<be.length;fe+=1){const Ee=dn(se,be,fe);_e[fe]?_e[fe].p(Ee,ge):(_e[fe]=hn(Ee),_e[fe].c(),_e[fe].m(k,null))}for(;fe<_e.length;fe+=1)_e[fe].d(1);_e.length=be.length}ge&4&&_!==(_=se[2]==="encode"?"输入文本":"输入 URL 编码")&&he(w,_),ge&4&&D!==(D=se[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串...")&&n(S,"placeholder",D),ge&1&&Re(S,se[0]),Ne===(Ne=ke(se))&&De?De.p(se,ge):(De.d(1),De=Ne(se),De&&(De.c(),De.m(P,null))),ge&17&&A!==(A=se[4]||!se[0].trim())&&(P.disabled=A),ge&4&&U!==(U=se[2]==="encode"?"URL 编码结果":"解码结果")&&he(M,U),se[1]?xe?xe.p(se,ge):(xe=un(se),xe.c(),xe.m(V,null)):xe&&(xe.d(1),xe=null),ge&4&&ee!==(ee=se[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&n(z,"placeholder",ee),ge&2&&Re(z,se[1]),ge&32&&(Z=se[5]&&Object.keys(se[5]).length>0),Z?Ce?Ce.p(se,ge):(Ce=fn(se),Ce.c(),Ce.m(e,Y)):Ce&&(Ce.d(1),Ce=null)},i:Oe,o:Oe,d(se){se&&W(e),Mt(_e,se),De.d(),xe&&xe.d(),Ce&&Ce.d(),ce=!1,Qe(ue)}}}function du(r,e,t){let{themeStore:s}=e,a="",b="",d="encode",i="query",o=!1,u=null;const g=[{value:"query",label:"Query 参数",desc:"空格转为 +"},{value:"path",label:"路径",desc:"保留斜杠"},{value:"full",label:"完整 URL",desc:"解析并编码"}];async function f(){if(!(!a.trim()||o||!window.wailsBindings)){t(4,o=!0),t(5,u=null);try{if(d==="encode"){const x=await window.wailsBindings.URLEncode(a,i);t(1,b=x.encoded)}else{const x=await window.wailsBindings.URLDecode(a,i);t(1,b=x.decoded),x.params&&t(5,u=x.params)}}catch(x){t(1,b=""),console.error("处理失败:",x),alert("处理失败: "+(x.message||x))}finally{t(4,o=!1)}}}async function m(){if(!(!a.trim()||!window.wailsBindings))try{const x=await window.wailsBindings.ParseURL(a);if(t(1,b=JSON.stringify(x,null,2)),x.queryParams){t(5,u={});for(const[E,S]of Object.entries(x.queryParams))t(5,u[E]=Array.isArray(S)?S[0]:S,u)}}catch(x){console.error("解析失败:",x),alert("URL解析失败: "+(x.message||x))}}async function v(){if(b)try{await navigator.clipboard.writeText(b)}catch(x){console.error("复制失败:",x)}}function k(){t(0,a=""),t(1,b=""),t(5,u=null)}function y(){t(2,d=d==="encode"?"decode":"encode"),t(0,a=""),t(1,b=""),t(5,u=null)}function c(x){(x.ctrlKey||x.metaKey)&&x.key.toLowerCase()==="enter"&&!o&&a.trim()&&(x.preventDefault(),f())}const p=()=>t(2,d="encode"),h=()=>t(2,d="decode"),_=x=>t(3,i=x.value);function w(){a=this.value,t(0,a)}function L(){b=this.value,t(1,b)}return r.$$set=x=>{"themeStore"in x&&t(13,s=x.themeStore)},[a,b,d,i,o,u,g,f,m,v,k,y,c,s,p,h,_,w,L]}class _n extends Et{constructor(e){super(),xt(this,e,du,cu,St,{themeStore:13})}}function gn(r,e,t){const s=r.slice();return s[12]=e[t],s}function mn(r){let e,t,s,a,b,d,i,o,u,g,f,m=[],v=new Map,k,y,c,p,h,_,w,L,x,E=ze(r[4]);const S=P=>P[12].id;for(let P=0;P<E.length;P+=1){let A=gn(r,E,P),j=S(A);v.set(j,m[P]=vn(j,A))}const D=[uu,hu],B=[];function R(P,A){return P[3]?0:1}return h=R(r),_=B[h]=D[h](r),{c(){e=C("div"),t=C("div"),s=O(),a=C("div"),b=C("div"),d=C("div"),i=C("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-clip-text text-transparent" style="background-image: linear-gradient(90deg, var(--text-primary), var(--accent-primary));">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',o=O(),u=C("button"),u.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',g=O(),f=C("div");for(let P=0;P<m.length;P+=1)m[P].c();k=O(),y=C("div"),y.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',c=O(),p=C("div"),_.c(),n(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),n(u,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),n(u,"title","关闭"),n(d,"class","flex items-center justify-between mb-6"),n(f,"class","space-y-2 flex-1 overflow-y-auto"),n(y,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),n(b,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),n(p,"class","flex-1 flex flex-col overflow-hidden"),n(a,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),n(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),n(e,"role","dialog"),n(e,"aria-modal","true"),n(e,"tabindex","-1")},m(P,A){N(P,e,A),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),l(d,i),l(d,o),l(d,u),l(b,g),l(b,f);for(let j=0;j<m.length;j+=1)m[j]&&m[j].m(f,null);l(b,k),l(b,y),l(a,c),l(a,p),B[h].m(p,null),r[11](e),w=!0,L||(x=[X(u,"click",r[9]),X(e,"click",r[5]),X(e,"keydown",r[8])],L=!0)},p(P,A){A&88&&(E=ze(P[4]),m=Jt(m,A,S,1,P,E,v,f,Xt,vn,null,gn));let j=h;h=R(P),h===j?B[h].p(P,A):(Wt(),qe(B[j],1,1,()=>{B[j]=null}),Nt(),_=B[h],_?_.p(P,A):(_=B[h]=D[h](P),_.c()),Ue(_,1),_.m(p,null))},i(P){w||(Ue(_),w=!0)},o(P){qe(_),w=!1},d(P){P&&W(e);for(let A=0;A<m.length;A+=1)m[A].d();B[h].d(),r[11](null),L=!1,Qe(x)}}}function bn(r){let e;return{c(){e=C("span"),n(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full"),Ae(e,"background","linear-gradient(180deg, var(--accent-primary), var(--accent-hover))")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function vn(r,e){let t,s,a,b=e[12].icon+"",d,i,o,u=e[12].name+"",g,f,m,v,k,y,c=e[3]===e[12].id&&bn();function p(){return e[10](e[12])}return{key:r,first:null,c(){t=C("button"),c&&c.c(),s=O(),a=C("span"),d=J(b),i=O(),o=C("span"),g=J(u),m=O(),n(a,"class",`text-2xl ${e[12].color}`),n(o,"class",f=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),n(t,"class",v="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(h,_){N(h,t,_),c&&c.m(t,null),l(t,s),l(t,a),l(a,d),l(t,i),l(t,o),l(o,g),l(t,m),k||(y=X(t,"click",p),k=!0)},p(h,_){e=h,e[3]===e[12].id?c||(c=bn(),c.c(),c.m(t,s)):c&&(c.d(1),c=null),_&8&&f!==(f=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&n(o,"class",f),_&8&&v!==(v="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&n(t,"class",v)},d(h){h&&W(t),c&&c.d(),k=!1,y()}}}function hu(r){let e;return{c(){e=C("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',n(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,s){N(t,e,s)},p:Oe,i:Oe,o:Oe,d(t){t&&W(e)}}}function uu(r){var h,_;let e,t,s,a=((h=r[7]())==null?void 0:h.icon)+"",b,d,i=((_=r[7]())==null?void 0:_.name)+"",o,u,g,f,m,v,k;const y=[bu,mu,gu,_u,pu,fu],c=[];function p(w,L){return w[3]==="json"?0:w[3]==="base64"?1:w[3]==="url"?2:w[3]==="hash"?3:w[3]==="timestamp"?4:w[3]==="uuid"?5:-1}return~(m=p(r))&&(v=c[m]=y[m](r)),{c(){var w;e=C("div"),t=C("h2"),s=C("span"),b=J(a),d=O(),o=J(i),u=O(),g=C("div"),f=C("div"),v&&v.c(),n(s,"class",`text-2xl ${(w=r[7]())==null?void 0:w.color}`),n(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),n(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),n(f,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),n(g,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(w,L){N(w,e,L),l(e,t),l(t,s),l(s,b),l(t,d),l(t,o),N(w,u,L),N(w,g,L),l(g,f),~m&&c[m].m(f,null),k=!0},p(w,L){let x=m;m=p(w),m===x?~m&&c[m].p(w,L):(v&&(Wt(),qe(c[x],1,1,()=>{c[x]=null}),Nt()),~m?(v=c[m],v?v.p(w,L):(v=c[m]=y[m](w),v.c()),Ue(v,1),v.m(f,null)):v=null)},i(w){k||(Ue(v),k=!0)},o(w){qe(v),k=!1},d(w){w&&(W(e),W(u),W(g)),~m&&c[m].d()}}}function fu(r){let e,t,s;var a=an;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&nt(e.$$.fragment),t=Ht()},m(d,i){e&&it(e,d,i),N(d,t,i),s=!0},p(d,i){if(a!==(a=an)){if(e){Wt();const o=e;qe(o.$$.fragment,1,0,()=>{st(o,1)}),Nt()}a?(e=Gt(a,b(d)),nt(e.$$.fragment),Ue(e.$$.fragment,1),it(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){s||(e&&Ue(e.$$.fragment,d),s=!0)},o(d){e&&qe(e.$$.fragment,d),s=!1},d(d){d&&W(t),e&&st(e,d)}}}function pu(r){let e,t,s;var a=tn;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&nt(e.$$.fragment),t=Ht()},m(d,i){e&&it(e,d,i),N(d,t,i),s=!0},p(d,i){if(a!==(a=tn)){if(e){Wt();const o=e;qe(o.$$.fragment,1,0,()=>{st(o,1)}),Nt()}a?(e=Gt(a,b(d)),nt(e.$$.fragment),Ue(e.$$.fragment,1),it(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){s||(e&&Ue(e.$$.fragment,d),s=!0)},o(d){e&&qe(e.$$.fragment,d),s=!1},d(d){d&&W(t),e&&st(e,d)}}}function _u(r){let e,t,s;var a=$s;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&nt(e.$$.fragment),t=Ht()},m(d,i){e&&it(e,d,i),N(d,t,i),s=!0},p(d,i){if(a!==(a=$s)){if(e){Wt();const o=e;qe(o.$$.fragment,1,0,()=>{st(o,1)}),Nt()}a?(e=Gt(a,b(d)),nt(e.$$.fragment),Ue(e.$$.fragment,1),it(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){s||(e&&Ue(e.$$.fragment,d),s=!0)},o(d){e&&qe(e.$$.fragment,d),s=!1},d(d){d&&W(t),e&&st(e,d)}}}function gu(r){let e,t,s;var a=_n;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&nt(e.$$.fragment),t=Ht()},m(d,i){e&&it(e,d,i),N(d,t,i),s=!0},p(d,i){if(a!==(a=_n)){if(e){Wt();const o=e;qe(o.$$.fragment,1,0,()=>{st(o,1)}),Nt()}a?(e=Gt(a,b(d)),nt(e.$$.fragment),Ue(e.$$.fragment,1),it(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){s||(e&&Ue(e.$$.fragment,d),s=!0)},o(d){e&&qe(e.$$.fragment,d),s=!1},d(d){d&&W(t),e&&st(e,d)}}}function mu(r){let e,t,s;var a=Us;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&nt(e.$$.fragment),t=Ht()},m(d,i){e&&it(e,d,i),N(d,t,i),s=!0},p(d,i){if(a!==(a=Us)){if(e){Wt();const o=e;qe(o.$$.fragment,1,0,()=>{st(o,1)}),Nt()}a?(e=Gt(a,b(d)),nt(e.$$.fragment),Ue(e.$$.fragment,1),it(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){s||(e&&Ue(e.$$.fragment,d),s=!0)},o(d){e&&qe(e.$$.fragment,d),s=!1},d(d){d&&W(t),e&&st(e,d)}}}function bu(r){let e,t,s;var a=Ws;function b(d,i){return{props:{themeStore:d[1]}}}return a&&(e=Gt(a,b(r))),{c(){e&&nt(e.$$.fragment),t=Ht()},m(d,i){e&&it(e,d,i),N(d,t,i),s=!0},p(d,i){if(a!==(a=Ws)){if(e){Wt();const o=e;qe(o.$$.fragment,1,0,()=>{st(o,1)}),Nt()}a?(e=Gt(a,b(d)),nt(e.$$.fragment),Ue(e.$$.fragment,1),it(e,t.parentNode,t)):e=null}else if(a){const o={};i&2&&(o.themeStore=d[1]),e.$set(o)}},i(d){s||(e&&Ue(e.$$.fragment,d),s=!0)},o(d){e&&qe(e.$$.fragment,d),s=!1},d(d){d&&W(t),e&&st(e,d)}}}function vu(r){let e,t,s=r[0]&&mn(r);return{c(){s&&s.c(),e=Ht()},m(a,b){s&&s.m(a,b),N(a,e,b),t=!0},p(a,[b]){a[0]?s?(s.p(a,b),b&1&&Ue(s,1)):(s=mn(a),s.c(),Ue(s,1),s.m(e.parentNode,e)):s&&(Wt(),qe(s,1,1,()=>{s=null}),Nt())},i(a){t||(Ue(s),t=!0)},o(a){qe(s),t=!1},d(a){a&&W(e),s&&s.d(a)}}}function yu(r,e,t){let{isOpen:s=!1}=e,{themeStore:a}=e,b=null,d;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"url",name:"URL 编解码",icon:"🔗",color:"text-orange-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function o(y){y.target===y.currentTarget&&t(0,s=!1)}function u(y){t(3,b=y)}function g(){return i.find(y=>y.id===b)}function f(y){y.key==="Escape"&&s&&(y.preventDefault(),t(0,s=!1))}const m=()=>t(0,s=!1),v=y=>u(y.id);function k(y){_t[y?"unshift":"push"](()=>{d=y,t(2,d)})}return r.$$set=y=>{"isOpen"in y&&t(0,s=y.isOpen),"themeStore"in y&&t(1,a=y.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&s&&Rr().then(()=>{d&&d.focus()})},[s,a,d,b,i,o,u,g,f,m,v,k]}class wu extends Et{constructor(e){super(),xt(this,e,yu,vu,St,{isOpen:0,themeStore:1})}}function yn(r,e,t){const s=r.slice();return s[57]=e[t],s[59]=t,s}function wn(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p;return{c(){e=C("div"),t=C("label"),t.textContent="认证方式",s=O(),a=C("div"),b=C("button"),d=C("div"),i=J("密码"),g=O(),f=C("button"),m=C("div"),v=J("SSH 密钥"),n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(d,"class",o=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),n(b,"type","button"),n(b,"class",u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),n(m,"class",k=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),n(f,"type","button"),n(f,"class",y=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),n(a,"class","flex gap-2")},m(h,_){N(h,e,_),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),l(d,i),l(a,g),l(a,f),l(f,m),l(m,v),c||(p=[X(b,"click",r[33]),X(f,"click",r[34])],c=!0)},p(h,_){_[0]&8&&o!==(o=`text-xs font-medium ${h[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&n(d,"class",o),_[0]&8&&u!==(u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${h[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&n(b,"class",u),_[0]&8&&k!==(k=`text-xs font-medium ${h[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&n(m,"class",k),_[0]&8&&y!==(y=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${h[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&n(f,"class",y)},d(h){h&&W(e),c=!1,Qe(p)}}}function kn(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h;function _(D,B){return D[11]?Su:ku}let w=_(r),L=w(r);function x(D,B){return D[11]?xu:Cu}let E=x(r),S=E(r);return{c(){e=C("div"),t=C("label"),t.textContent="SSH 私钥文件",s=O(),a=C("div"),b=C("input"),d=O(),i=C("button"),i.textContent="选择文件",o=O(),u=C("div"),g=C("label"),g.textContent="Passphrase（可选）",f=O(),m=C("div"),L.c(),v=O(),k=C("button"),S.c(),y=O(),c=C("p"),c.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(b,"type","text"),n(b,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),b.readOnly=!0,n(b,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),n(i,"type","button"),n(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),n(a,"class","flex gap-1.5"),n(g,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(k,"type","button"),n(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),n(m,"class","relative"),n(c,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(D,B){N(D,e,B),l(e,t),l(e,s),l(e,a),l(a,b),Re(b,r[5].keyPath),l(a,d),l(a,i),N(D,o,B),N(D,u,B),l(u,g),l(u,f),l(u,m),L.m(m,null),l(m,v),l(m,k),S.m(k,null),l(u,y),l(u,c),p||(h=[X(b,"input",r[35]),X(i,"click",r[16]),X(k,"click",r[38])],p=!0)},p(D,B){B[0]&32&&b.value!==D[5].keyPath&&Re(b,D[5].keyPath),w===(w=_(D))&&L?L.p(D,B):(L.d(1),L=w(D),L&&(L.c(),L.m(m,v))),E!==(E=x(D))&&(S.d(1),S=E(D),S&&(S.c(),S.m(k,null)))},d(D){D&&(W(e),W(o),W(u)),L.d(),S.d(),p=!1,Qe(h)}}}function ku(r){let e,t,s;return{c(){e=C("input"),n(e,"type","password"),n(e,"placeholder","如果密钥已加密，请输入 passphrase"),n(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){N(a,e,b),Re(e,r[5].passphrase),t||(s=X(e,"input",r[37]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].passphrase&&Re(e,a[5].passphrase)},d(a){a&&W(e),t=!1,s()}}}function Su(r){let e,t,s;return{c(){e=C("input"),n(e,"type","text"),n(e,"placeholder","如果密钥已加密，请输入 passphrase"),n(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){N(a,e,b),Re(e,r[5].passphrase),t||(s=X(e,"input",r[36]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].passphrase&&Re(e,a[5].passphrase)},d(a){a&&W(e),t=!1,s()}}}function Cu(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),n(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function xu(r){let e,t,s;return{c(){e=de("svg"),t=de("path"),s=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),n(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,b){N(a,e,b),l(e,t),l(e,s)},d(a){a&&W(e)}}}function Sn(r){let e,t,s;return{c(){e=C("div"),t=J(r[8]),n(e,"class",s=`p-2 rounded-md text-xs ${r[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(a,b){N(a,e,b),l(e,t)},p(a,b){b[0]&256&&he(t,a[8]),b[0]&256&&s!==(s=`p-2 rounded-md text-xs ${a[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&n(e,"class",s)},d(a){a&&W(e)}}}function Cn(r){let e,t,s,a,b,d,i,o;return{c(){e=C("div"),t=C("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',s=O(),a=C("select"),b=C("option"),b.textContent="MySQL",d=C("option"),d.textContent="PostgreSQL",n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),b.__value="mysql",Re(b,b.__value),d.__value="postgresql",Re(d,d.__value),n(a,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[5].dbType===void 0&&dr(()=>r[39].call(a))},m(u,g){N(u,e,g),l(e,t),l(e,s),l(e,a),l(a,b),l(a,d),nr(a,r[5].dbType,!0),i||(o=X(a,"change",r[39]),i=!0)},p(u,g){g[0]&32&&nr(a,u[5].dbType)},d(u){u&&W(e),i=!1,o()}}}function xn(r){let e,t,s,a,b,d;return{c(){e=C("div"),t=C("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',s=O(),a=C("input"),n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(a,"type","text"),a.required=!0,n(a,"placeholder","root"),n(a,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){N(i,e,o),l(e,t),l(e,s),l(e,a),Re(a,r[5].username),b||(d=X(a,"input",r[42]),b=!0)},p(i,o){o[0]&32&&a.value!==i[5].username&&Re(a,i[5].username)},d(i){i&&W(e),b=!1,d()}}}function En(r){let e,t,s,a,b,d,i,o,u,g,f,m,v;function k(w,L){return w[10]?Lu:Eu}let y=k(r),c=y(r);function p(w,L){return w[10]?Mu:Du}let h=p(r),_=h(r);return{c(){e=C("div"),t=C("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',s=O(),a=C("div"),c.c(),b=O(),d=C("button"),_.c(),i=O(),o=C("div"),u=C("input"),g=O(),f=C("span"),f.textContent="保存密码",n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(d,"type","button"),n(d,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),n(a,"class","relative"),n(u,"type","checkbox"),n(u,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),n(f,"class","text-xs text-gray-700 dark:text-gray-300"),n(o,"class","flex items-center gap-1.5 cursor-pointer")},m(w,L){N(w,e,L),l(e,t),l(e,s),l(e,a),c.m(a,null),l(a,b),l(a,d),_.m(d,null),N(w,i,L),N(w,o,L),l(o,u),u.checked=r[5].savePassword,l(o,g),l(o,f),m||(v=[X(d,"click",r[45]),X(u,"change",r[46])],m=!0)},p(w,L){y===(y=k(w))&&c?c.p(w,L):(c.d(1),c=y(w),c&&(c.c(),c.m(a,b))),h!==(h=p(w))&&(_.d(1),_=h(w),_&&(_.c(),_.m(d,null))),L[0]&32&&(u.checked=w[5].savePassword)},d(w){w&&(W(e),W(i),W(o)),c.d(),_.d(),m=!1,Qe(v)}}}function Eu(r){let e,t,s;return{c(){e=C("input"),n(e,"type","password"),n(e,"placeholder","输入密码"),n(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){N(a,e,b),Re(e,r[5].password),t||(s=X(e,"input",r[44]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].password&&Re(e,a[5].password)},d(a){a&&W(e),t=!1,s()}}}function Lu(r){let e,t,s;return{c(){e=C("input"),n(e,"type","text"),n(e,"placeholder","输入密码"),n(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(a,b){N(a,e,b),Re(e,r[5].password),t||(s=X(e,"input",r[43]),t=!0)},p(a,b){b[0]&32&&e.value!==a[5].password&&Re(e,a[5].password)},d(a){a&&W(e),t=!1,s()}}}function Du(r){let e,t;return{c(){e=de("svg"),t=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),n(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(s,a){N(s,e,a),l(e,t)},d(s){s&&W(e)}}}function Mu(r){let e,t,s;return{c(){e=de("svg"),t=de("path"),s=de("path"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","2"),n(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),n(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"viewBox","0 0 24 24")},m(a,b){N(a,e,b),l(e,t),l(e,s)},d(a){a&&W(e)}}}function Ln(r){let e,t,s,a,b,d;return{c(){e=C("div"),t=C("label"),t.textContent="数据库名",s=O(),a=C("input"),n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(a,"type","text"),n(a,"placeholder","例如：production_db"),n(a,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){N(i,e,o),l(e,t),l(e,s),l(e,a),Re(a,r[5].database),b||(d=X(a,"input",r[47]),b=!0)},p(i,o){o[0]&32&&a.value!==i[5].database&&Re(a,i[5].database)},d(i){i&&W(e),b=!1,d()}}}function Dn(r){let e,t=[],s=new Map,a,b=ze(r[14]);const d=o=>o[57];for(let o=0;o<b.length;o+=1){let u=yn(r,b,o),g=d(u);s.set(g,t[o]=Mn(g,u))}let i=r[14].length===0&&Tn();return{c(){e=C("div");for(let o=0;o<t.length;o+=1)t[o].c();a=O(),i&&i.c(),n(e,"class","absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg max-h-48 overflow-y-auto")},m(o,u){N(o,e,u);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);l(e,a),i&&i.m(e,null)},p(o,u){u[0]&2121728&&(b=ze(o[14]),t=Jt(t,u,d,1,o,b,s,e,Xt,Mn,a,yn)),o[14].length===0?i||(i=Tn(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&W(e);for(let u=0;u<t.length;u+=1)t[u].d();i&&i.d()}}}function Mn(r,e){let t,s=e[57]+"",a,b,d,i;function o(){return e[49](e[57])}function u(){return e[50](e[59])}return{key:r,first:null,c(){t=C("div"),a=J(s),n(t,"class",b=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`),this.first=t},m(g,f){N(g,t,f),l(t,a),d||(i=[X(t,"click",o),X(t,"mouseover",u)],d=!0)},p(g,f){e=g,f[0]&16384&&s!==(s=e[57]+"")&&he(a,s),f[0]&24576&&b!==(b=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`)&&n(t,"class",b)},d(g){g&&W(t),d=!1,Qe(i)}}}function Tn(r){let e;return{c(){e=C("div"),e.textContent="没有匹配的分组",n(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Tu(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y,F,T,Q,G,ne,ie,ce,ue,be,_e,ke,Ne,De,xe,Ce,se,ge,fe,Ee,Ge,at,Fe,$e,re,me,ve,pe,we,Be,Me,Se,ot=r[7]?"测试中...":"测试连接",rt,dt,vt,ut=r[9]?"保存中...":r[1]?"更新连接":"添加连接",lt,Ye,Ct,ht=r[2]==="ssh"&&wn(r),Xe=r[3]==="key"&&kn(r),te=r[8]&&Sn(r),ae=r[2]==="database"&&Cn(r),je=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&xn(r),He=r[3]==="password"&&En(r),Ve=r[2]==="database"&&Ln(r),et=r[12]&&r[6].length>0&&Dn(r);return{c(){e=C("div"),t=C("label"),t.textContent="连接类型",s=O(),a=C("div"),b=C("button"),d=C("div"),i=de("svg"),o=de("path"),g=O(),f=C("span"),m=J("SSH"),y=O(),c=C("button"),p=C("div"),h=de("svg"),_=de("path"),L=O(),x=C("span"),E=J("数据库"),B=O(),R=C("button"),P=C("div"),A=de("svg"),j=de("path"),V=O(),$=C("span"),U=J("Docker"),H=O(),z=C("form"),ee=C("div"),q=C("label"),q.innerHTML='连接名称 <span class="text-red-500">*</span>',Z=O(),Y=C("input"),F=O(),ht&&ht.c(),T=O(),Xe&&Xe.c(),Q=O(),te&&te.c(),G=O(),ae&&ae.c(),ne=O(),ie=C("div"),ce=C("div"),ue=C("label"),ue.innerHTML='主机地址 <span class="text-red-500">*</span>',be=O(),_e=C("input"),ke=O(),Ne=C("div"),De=C("label"),De.innerHTML='端口 <span class="text-red-500">*</span>',xe=O(),Ce=C("input"),se=O(),je&&je.c(),ge=O(),He&&He.c(),fe=O(),Ve&&Ve.c(),Ee=O(),Ge=C("div"),at=C("label"),at.textContent="分组",Fe=O(),$e=C("div"),re=C("input"),ve=O(),et&&et.c(),pe=O(),we=C("div"),Be=C("button"),Be.textContent="取消",Me=O(),Se=C("button"),rt=J(ot),dt=O(),vt=C("button"),lt=J(ut),n(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),n(o,"stroke-linecap","round"),n(o,"stroke-linejoin","round"),n(o,"stroke-width","2"),n(o,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),n(i,"class",u=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"viewBox","0 0 24 24"),n(f,"class",v=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),n(d,"class","flex items-center justify-center gap-1"),n(b,"type","button"),n(b,"class",k=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),n(_,"stroke-linecap","round"),n(_,"stroke-linejoin","round"),n(_,"stroke-width","2"),n(_,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),n(h,"class",w=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),n(h,"fill","none"),n(h,"stroke","currentColor"),n(h,"viewBox","0 0 24 24"),n(x,"class",S=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),n(p,"class","flex items-center justify-center gap-1"),n(c,"type","button"),n(c,"class",D=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),n(j,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),n(A,"class",K=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),n(A,"fill","currentColor"),n(A,"viewBox","0 0 24 24"),n($,"class",M=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),n(P,"class","flex items-center justify-center gap-1"),n(R,"type","button"),n(R,"class",I=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),n(a,"class","grid grid-cols-3 gap-2"),n(e,"class","mb-4"),n(q,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(Y,"type","text"),Y.required=!0,n(Y,"placeholder","例如：生产服务器-01"),n(Y,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),n(ue,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(_e,"type","text"),_e.required=!0,n(_e,"placeholder","192.168.1.10 或 example.com"),n(_e,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),n(ce,"class","col-span-2"),n(De,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(Ce,"type","text"),Ce.required=!0,n(Ce,"placeholder",r[18]()),n(Ce,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),n(ie,"class","grid grid-cols-3 gap-2"),n(at,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),n(re,"type","text"),n(re,"placeholder","例如：生产环境"),n(re,"class",me=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${r[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`),n($e,"class","relative"),n(Be,"type","button"),n(Be,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),n(Se,"type","button"),Se.disabled=r[7],n(Se,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),n(vt,"type","submit"),vt.disabled=r[9],n(vt,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),n(we,"class","flex gap-2 pt-3"),n(z,"class","space-y-3")},m(Te,Ke){N(Te,e,Ke),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),l(d,i),l(i,o),l(d,g),l(d,f),l(f,m),l(a,y),l(a,c),l(c,p),l(p,h),l(h,_),l(p,L),l(p,x),l(x,E),l(a,B),l(a,R),l(R,P),l(P,A),l(A,j),l(P,V),l(P,$),l($,U),N(Te,H,Ke),N(Te,z,Ke),l(z,ee),l(ee,q),l(ee,Z),l(ee,Y),Re(Y,r[5].name),l(z,F),ht&&ht.m(z,null),l(z,T),Xe&&Xe.m(z,null),l(z,Q),te&&te.m(z,null),l(z,G),ae&&ae.m(z,null),l(z,ne),l(z,ie),l(ie,ce),l(ce,ue),l(ce,be),l(ce,_e),Re(_e,r[5].host),l(ie,ke),l(ie,Ne),l(Ne,De),l(Ne,xe),l(Ne,Ce),Re(Ce,r[5].port),l(z,se),je&&je.m(z,null),l(z,ge),He&&He.m(z,null),l(z,fe),Ve&&Ve.m(z,null),l(z,Ee),l(z,Ge),l(Ge,at),l(Ge,Fe),l(Ge,$e),l($e,re),Re(re,r[4]),l($e,ve),et&&et.m($e,null),l(z,pe),l(z,we),l(we,Be),l(we,Me),l(we,Se),l(Se,rt),l(we,dt),l(we,vt),l(vt,lt),Ye||(Ct=[X(b,"click",r[29]),X(c,"click",r[30]),X(R,"click",r[31]),X(Y,"input",r[32]),X(_e,"input",r[40]),X(Ce,"input",r[41]),X(re,"input",r[48]),X(re,"focus",r[19]),X(re,"input",r[20]),X(re,"keydown",r[22]),X(re,"blur",r[23]),X(Be,"click",r[51]),X(Se,"click",r[15]),X(z,"submit",Ao(r[17]))],Ye=!0)},p(Te,Ke){Ke[0]&4&&u!==(u=`w-4 h-4 ${Te[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&n(i,"class",u),Ke[0]&4&&v!==(v=`text-xs font-medium ${Te[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&n(f,"class",v),Ke[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${Te[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&n(b,"class",k),Ke[0]&4&&w!==(w=`w-4 h-4 ${Te[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&n(h,"class",w),Ke[0]&4&&S!==(S=`text-xs font-medium ${Te[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&n(x,"class",S),Ke[0]&4&&D!==(D=`p-2 rounded-lg border-2 transition-all ${Te[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&n(c,"class",D),Ke[0]&4&&K!==(K=`w-4 h-4 ${Te[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&n(A,"class",K),Ke[0]&4&&M!==(M=`text-xs font-medium ${Te[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&n($,"class",M),Ke[0]&4&&I!==(I=`p-2 rounded-lg border-2 transition-all ${Te[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&n(R,"class",I),Ke[0]&32&&Y.value!==Te[5].name&&Re(Y,Te[5].name),Te[2]==="ssh"?ht?ht.p(Te,Ke):(ht=wn(Te),ht.c(),ht.m(z,T)):ht&&(ht.d(1),ht=null),Te[3]==="key"?Xe?Xe.p(Te,Ke):(Xe=kn(Te),Xe.c(),Xe.m(z,Q)):Xe&&(Xe.d(1),Xe=null),Te[8]?te?te.p(Te,Ke):(te=Sn(Te),te.c(),te.m(z,G)):te&&(te.d(1),te=null),Te[2]==="database"?ae?ae.p(Te,Ke):(ae=Cn(Te),ae.c(),ae.m(z,ne)):ae&&(ae.d(1),ae=null),Ke[0]&32&&_e.value!==Te[5].host&&Re(_e,Te[5].host),Ke[0]&32&&Ce.value!==Te[5].port&&Re(Ce,Te[5].port),Te[3]==="password"||Te[2]==="database"||Te[2]==="docker"?je?je.p(Te,Ke):(je=xn(Te),je.c(),je.m(z,ge)):je&&(je.d(1),je=null),Te[3]==="password"?He?He.p(Te,Ke):(He=En(Te),He.c(),He.m(z,fe)):He&&(He.d(1),He=null),Te[2]==="database"?Ve?Ve.p(Te,Ke):(Ve=Ln(Te),Ve.c(),Ve.m(z,Ee)):Ve&&(Ve.d(1),Ve=null),Ke[0]&4096&&me!==(me=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${Te[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`)&&n(re,"class",me),Ke[0]&16&&re.value!==Te[4]&&Re(re,Te[4]),Te[12]&&Te[6].length>0?et?et.p(Te,Ke):(et=Dn(Te),et.c(),et.m($e,null)):et&&(et.d(1),et=null),Ke[0]&128&&ot!==(ot=Te[7]?"测试中...":"测试连接")&&he(rt,ot),Ke[0]&128&&(Se.disabled=Te[7]),Ke[0]&514&&ut!==(ut=Te[9]?"保存中...":Te[1]?"更新连接":"添加连接")&&he(lt,ut),Ke[0]&512&&(vt.disabled=Te[9])},d(Te){Te&&(W(e),W(H),W(z)),ht&&ht.d(),Xe&&Xe.d(),te&&te.d(),ae&&ae.d(),je&&je.d(),He&&He.d(),Ve&&Ve.d(),et&&et.d(),Ye=!1,Qe(Ct)}}}function Bu(r){let e,t,s;function a(d){r[53](d)}let b={onClose:r[52],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[Tu]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),_t.push(()=>kt(e,"isOpen",a)),{c(){nt(e.$$.fragment)},m(d,i){it(e,d,i),s=!0},p(d,i){const o={};i[0]&1&&(o.onClose=d[52]),i[0]&2&&(o.title=d[1]?"编辑连接":"添加连接"),i[0]&32767|i[1]&536870912&&(o.$$scope={dirty:i,ctx:d}),!t&&i[0]&1&&(t=!0,o.isOpen=d[0],wt(()=>t=!1)),e.$set(o)},i(d){s||(Ue(e.$$.fragment,d),s=!0)},o(d){qe(e.$$.fragment,d),s=!1},d(d){st(e,d)}}}function Au(r,e,t){let s,a,b,d;Pt(r,Yt,fe=>t(28,d=fe));let{isOpen:i=!1}=e,{onAdd:o=()=>{}}=e,{onUpdate:u=()=>{}}=e,{editingAsset:g=null}=e,f="ssh",m="password",v=!1,k="",y=!1,c=!1,p=!1,h=!1,_=!1,w=!1,L="",x=-1,E={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function S(){if(!window.wailsBindings){t(8,k="Wails 绑定未加载");return}if(!E.host){t(8,k="请填写主机地址");return}if(m==="password"&&!E.password){t(8,k="请输入密码以测试连接");return}if(m==="password"&&!E.username){t(8,k="请填写用户名");return}if(m==="key"&&!E.keyPath){t(8,k="请选择 SSH 密钥文件");return}t(7,v=!0),t(8,k="");try{if(f==="database")await window.wailsBindings.TestDatabaseConnection(E.host,parseInt(E.port),E.username,E.password,E.dbType,E.database);else{const fe=m==="key"?E.keyPath:E.password;await window.wailsBindings.TestConnection(E.host,parseInt(E.port),E.username,m,fe,E.passphrase||"")}t(8,k="✓ 连接成功")}catch(fe){console.error("Connection test failed:",fe),t(8,k="✗ 连接失败: "+fe)}finally{t(7,v=!1)}}async function D(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const fe=await window.wailsBindings.SelectSSHKeyFile();fe&&t(5,E.keyPath=fe,E)}catch(fe){console.error("Failed to select key file:",fe),t(8,k="选择密钥文件失败: "+fe)}}async function B(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!E.name||!E.host){alert("请填写必填字段（连接名称、主机地址）");return}if(m==="password"&&!E.username){alert("密码认证需要填写用户名");return}if(m==="password"&&!E.password){alert("密码认证需要输入密码");return}if(m==="key"&&!E.keyPath){alert("密钥认证需要选择密钥文件");return}t(9,y=!0);try{const fe=!!E.id,Ee={id:fe?E.id:`conn_${Date.now()}`,name:E.name,host:E.host,port:parseInt(E.port),user:E.username,auth_type:m,key_path:m==="key"?E.keyPath:"",tags:[E.group||"默认分组"],type:f,metadata:{database:E.database||void 0,db_type:E.dbType}};fe?(await window.wailsBindings.UpdateConnection(Ee),m==="password"&&E.password&&E.savePassword?await window.wailsBindings.SavePassword(Ee.id,E.password):m==="password"&&!E.savePassword&&await window.wailsBindings.DeletePassword(Ee.id),u(Ee)):(o(Ee),m==="password"&&E.password&&E.savePassword&&await window.wailsBindings.SavePassword(Ee.id,E.password)),t(0,i=!1)}catch(fe){console.error("Failed to save connection:",fe),alert("保存连接失败: "+fe)}finally{t(9,y=!1)}}function R(){t(5,E={id:"",name:"",host:"",port:P(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(8,k=""),t(10,c=!1),t(11,p=!1),t(12,w=!1),t(4,L=""),t(13,x=-1)}function P(){switch(f){case"ssh":return"22";case"docker":return"2375";case"database":switch(E.dbType){case"mysql":return"3306";case"postgresql":return"5432";default:return""}default:return""}}async function A(){var fe,Ee,Ge,at;if(!(!g||!i||h))try{const Fe=await window.wailsBindings.GetConnection(g.id);if(Fe){t(5,E={id:Fe.id,name:Fe.name||"",host:Fe.host||"",port:((fe=Fe.port)==null?void 0:fe.toString())||"",username:Fe.user||"",password:"",savePassword:!1,keyPath:Fe.key_path||"",passphrase:"",group:((Ee=Fe.tags)==null?void 0:Ee[0])||"",dbType:((Ge=Fe.metadata)==null?void 0:Ge.db_type)||"mysql",database:((at=Fe.metadata)==null?void 0:at.database)||""}),t(2,f=Fe.type||"ssh"),t(3,m=Fe.auth_type||"password"),h=!0;try{if(await window.wailsBindings.HasPassword(Fe.id)){t(5,E.savePassword=!0,E);const re=await window.wailsBindings.GetPassword(Fe.id);t(5,E.password=re||"",E)}}catch($e){console.warn("Failed to load password:",$e)}}}catch(Fe){console.error("Failed to load connection:",Fe)}}function j(){t(12,w=!w),w&&(t(4,L=E.group||""),t(13,x=b.indexOf(E.group)))}function K(fe){t(4,L=fe.target.value),t(5,E.group=fe.target.value,E),t(12,w=!0),t(13,x=-1)}function V(fe){t(5,E.group=fe,E),t(4,L=fe),t(12,w=!1),t(13,x=b.indexOf(fe))}function $(fe){const Ee=b;if(!w){(fe.key==="ArrowDown"||fe.key==="ArrowUp"||fe.key==="Enter")&&(fe.preventDefault(),t(12,w=!0),t(4,L=E.group||""),t(13,x=Ee.indexOf(E.group)));return}switch(fe.key){case"ArrowDown":fe.preventDefault(),t(13,x=Math.min(x+1,Ee.length-1));break;case"ArrowUp":fe.preventDefault(),t(13,x=Math.max(x-1,0));break;case"Enter":fe.preventDefault(),x>=0&&x<Ee.length?V(Ee[x]):t(12,w=!1);break;case"Escape":fe.preventDefault(),t(12,w=!1),t(4,L=E.group||"");break;case"Tab":fe.preventDefault(),t(12,w=!1);break}}function U(){setTimeout(()=>{t(12,w=!1)},150)}const M=()=>t(2,f="ssh"),I=()=>t(2,f="database"),H=()=>t(2,f="docker");function z(){E.name=this.value,t(5,E),t(0,i),t(1,g)}const ee=()=>{t(3,m="password"),t(8,k="")},q=()=>{t(3,m="key"),t(8,k="")};function Z(){E.keyPath=this.value,t(5,E),t(0,i),t(1,g)}function Y(){E.passphrase=this.value,t(5,E),t(0,i),t(1,g)}function F(){E.passphrase=this.value,t(5,E),t(0,i),t(1,g)}const T=()=>t(11,p=!p);function Q(){E.dbType=Pr(this),t(5,E),t(0,i),t(1,g)}function G(){E.host=this.value,t(5,E),t(0,i),t(1,g)}function ne(){E.port=this.value,t(5,E),t(0,i),t(1,g)}function ie(){E.username=this.value,t(5,E),t(0,i),t(1,g)}function ce(){E.password=this.value,t(5,E),t(0,i),t(1,g)}function ue(){E.password=this.value,t(5,E),t(0,i),t(1,g)}const be=()=>t(10,c=!c);function _e(){E.savePassword=this.checked,t(5,E),t(0,i),t(1,g)}function ke(){E.database=this.value,t(5,E),t(0,i),t(1,g)}function Ne(){L=this.value,t(4,L)}const De=fe=>V(fe),xe=fe=>t(13,x=fe),Ce=()=>t(0,i=!1),se=()=>{t(0,i=!1)};function ge(fe){i=fe,t(0,i)}return r.$$set=fe=>{"isOpen"in fe&&t(0,i=fe.isOpen),"onAdd"in fe&&t(24,o=fe.onAdd),"onUpdate"in fe&&t(25,u=fe.onUpdate),"editingAsset"in fe&&t(1,g=fe.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&268435456&&t(27,s=d.reduce((fe,Ee)=>(Ee.group&&!fe.includes(Ee.group)&&fe.push(Ee.group),fe),[])),r.$$.dirty[0]&134217744&&t(6,a=s.filter(fe=>fe.toLowerCase().includes(L.toLowerCase()))),r.$$.dirty[0]&35&&i&&!g&&!E.id&&(E.port||t(5,E.port=P(),E)),r.$$.dirty[0]&32&&E.port===""&&t(5,E.port=P(),E),r.$$.dirty[0]&96&&t(14,b=E.group&&!a.includes(E.group)?[...a,E.group]:a),r.$$.dirty[0]&1&&t(26,_=i),r.$$.dirty[0]&67108865&&_&&!i&&R(),r.$$.dirty[0]&12&&(f==="ssh"?m!=="password"&&m!=="key"&&t(3,m="password"):t(3,m="password")),r.$$.dirty[0]&3&&i&&g&&A(),r.$$.dirty[0]&34&&g&&E.id!==g.id&&(h=!1),r.$$.dirty[0]&67108867&&!_&&i&&g&&(h=!1)},[i,g,f,m,L,E,a,v,k,y,c,p,w,x,b,S,D,B,P,j,K,V,$,U,o,u,_,s,d,M,I,H,z,ee,q,Z,Y,F,T,Q,G,ne,ie,ce,ue,be,_e,ke,Ne,De,xe,Ce,se,ge]}class Ru extends Et{constructor(e){super(),xt(this,e,Au,Bu,St,{isOpen:0,onAdd:24,onUpdate:25,editingAsset:1},null,[-1,-1])}}function Ou(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$;return{c(){e=C("div"),t=C("div"),t.textContent="哈",s=O(),a=C("div"),b=C("h3"),d=J("AHaSSHTools"),o=O(),u=C("p"),g=J("啊哈 SSH 连接工具"),m=O(),v=C("p"),k=J("版本 "),y=J(r[3]),p=O(),h=C("p"),_=J("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),L=O(),x=C("button"),E=de("svg"),S=de("path"),D=O(),B=C("span"),B.textContent="访问 GitHub",P=O(),A=C("p"),j=J("© 2026 AHaSSHTools. All rights reserved."),n(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),n(b,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),n(u,"class",f="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),n(v,"class",c="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),n(a,"class","text-center space-y-1"),n(h,"class",w="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),n(S,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),n(E,"class","w-5 h-5"),n(E,"viewBox","0 0 24 24"),n(E,"fill","currentColor"),n(x,"class",R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),n(A,"class",K="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),n(e,"class","flex flex-col items-center gap-5 py-4")},m(U,M){N(U,e,M),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),l(a,o),l(a,u),l(u,g),l(a,m),l(a,v),l(v,k),l(v,y),l(e,p),l(e,h),l(h,_),l(e,L),l(e,x),l(x,E),l(E,S),l(x,D),l(x,B),l(e,P),l(e,A),l(A,j),V||($=X(x,"click",Iu),V=!0)},p(U,M){M&4&&i!==(i="text-xl font-bold "+(U[2]==="dark"?"text-white":"text-gray-900"))&&n(b,"class",i),M&4&&f!==(f="text-sm "+(U[2]==="dark"?"text-gray-400":"text-gray-500"))&&n(u,"class",f),M&8&&he(y,U[3]),M&4&&c!==(c="text-xs "+(U[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&n(v,"class",c),M&4&&w!==(w="text-sm text-center max-w-xs "+(U[2]==="dark"?"text-gray-400":"text-gray-600"))&&n(h,"class",w),M&4&&R!==(R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(U[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&n(x,"class",R),M&4&&K!==(K="text-xs "+(U[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&n(A,"class",K)},d(U){U&&W(e),V=!1,$()}}}function Pu(r){let e,t,s;function a(d){r[5](d)}let b={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[Ou]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),_t.push(()=>kt(e,"isOpen",a)),{c(){nt(e.$$.fragment)},m(d,i){it(e,d,i),s=!0},p(d,[i]){const o={};i&2&&(o.onClose=d[1]),i&140&&(o.$$scope={dirty:i,ctx:d}),!t&&i&1&&(t=!0,o.isOpen=d[0],wt(()=>t=!1)),e.$set(o)},i(d){s||(Ue(e.$$.fragment,d),s=!0)},o(d){qe(e.$$.fragment,d),s=!1},d(d){st(e,d)}}}async function Iu(){try{await(await Cr(()=>Promise.resolve().then(()=>oo),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function Hu(r,e,t){let{isOpen:s=!1}=e,{onClose:a=()=>{}}=e,{themeStore:b={subscribe:()=>()=>{}}}=e,d="light",i="loading...";const o=b.subscribe(g=>{t(2,d=g)});ar(async()=>{try{const{GetVersion:g}=await Cr(async()=>{const{GetVersion:f}=await Promise.resolve().then(()=>mo);return{GetVersion:f}},void 0);t(3,i=await g())}catch(g){console.error("Failed to get version:",g),t(3,i="unknown")}return()=>{o()}});function u(g){s=g,t(0,s)}return r.$$set=g=>{"isOpen"in g&&t(0,s=g.isOpen),"onClose"in g&&t(1,a=g.onClose),"themeStore"in g&&t(4,b=g.themeStore)},[s,a,d,i,b,u]}class Fu extends Et{constructor(e){super(),xt(this,e,Hu,Pu,St,{isOpen:0,onClose:1,themeStore:4})}}const vo=[{id:"system-ui",label:"System UI",value:'"Avenir Next", "SF Pro Text", "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif'},{id:"inter",label:"Inter",value:'Inter, "Avenir Next", "Segoe UI", sans-serif'},{id:"source-han",label:"Source Han Sans",value:'"Source Han Sans SC", "PingFang SC", "Microsoft YaHei", sans-serif'},{id:"noto",label:"Noto Sans",value:'"Noto Sans SC", "Segoe UI", sans-serif'}],yo=[{id:"menlo",label:"Menlo",value:'Menlo, Monaco, "Courier New", monospace'},{id:"jetbrains-mono",label:"JetBrains Mono",value:'"JetBrains Mono", Menlo, Monaco, "Courier New", monospace'},{id:"fira-code",label:"Fira Code",value:'"Fira Code", Menlo, Monaco, "Courier New", monospace'}],or={teal:{label:"青绿",light:{accentPrimary:"#0f766e",accentHover:"#115e59",accentSoft:"#ccfbf1",focusRing:"#14b8a6",glow1:"rgba(20, 184, 166, 0.08)",glow2:"rgba(56, 189, 248, 0.08)"},dark:{accentPrimary:"#14b8a6",accentHover:"#2dd4bf",accentSoft:"#123a3a",focusRing:"#2dd4bf",glow1:"rgba(20, 184, 166, 0.12)",glow2:"rgba(56, 189, 248, 0.12)"}},blue:{label:"科技蓝",light:{accentPrimary:"#2563eb",accentHover:"#1d4ed8",accentSoft:"#dbeafe",focusRing:"#3b82f6",glow1:"rgba(37, 99, 235, 0.08)",glow2:"rgba(14, 165, 233, 0.08)"},dark:{accentPrimary:"#60a5fa",accentHover:"#93c5fd",accentSoft:"#1e3a8a",focusRing:"#60a5fa",glow1:"rgba(59, 130, 246, 0.12)",glow2:"rgba(14, 165, 233, 0.12)"}},emerald:{label:"翡翠绿",light:{accentPrimary:"#059669",accentHover:"#047857",accentSoft:"#d1fae5",focusRing:"#10b981",glow1:"rgba(16, 185, 129, 0.08)",glow2:"rgba(110, 231, 183, 0.08)"},dark:{accentPrimary:"#34d399",accentHover:"#6ee7b7",accentSoft:"#064e3b",focusRing:"#34d399",glow1:"rgba(16, 185, 129, 0.12)",glow2:"rgba(110, 231, 183, 0.12)"}},amber:{label:"琥珀橙",light:{accentPrimary:"#d97706",accentHover:"#b45309",accentSoft:"#fef3c7",focusRing:"#f59e0b",glow1:"rgba(245, 158, 11, 0.08)",glow2:"rgba(251, 191, 36, 0.08)"},dark:{accentPrimary:"#f59e0b",accentHover:"#fbbf24",accentSoft:"#78350f",focusRing:"#fbbf24",glow1:"rgba(245, 158, 11, 0.12)",glow2:"rgba(251, 191, 36, 0.12)"}},purple:{label:"星夜紫",light:{accentPrimary:"#7c3aed",accentHover:"#6d28d9",accentSoft:"#ede9fe",focusRing:"#8b5cf6",glow1:"rgba(124, 58, 237, 0.08)",glow2:"rgba(139, 92, 246, 0.08)"},dark:{accentPrimary:"#a78bfa",accentHover:"#c4b5fd",accentSoft:"#3b2a67",focusRing:"#a78bfa",glow1:"rgba(167, 139, 250, 0.14)",glow2:"rgba(196, 181, 253, 0.12)"}}};function Bn(r,e){return r==="light"||r==="dark"?r:r==="system"?typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e==="light"||e==="dark"?e:"light":e==="light"||e==="dark"?e:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function An(r){if(typeof document>"u")return;const e=document.documentElement,t=or[r.accent_color]||or.teal,s=r.theme==="dark"?"dark":"light",a=t[s];e.style.setProperty("--accent-primary",a.accentPrimary),e.style.setProperty("--accent-hover",a.accentHover),e.style.setProperty("--accent-soft",a.accentSoft),e.style.setProperty("--focus-ring",a.focusRing),e.style.setProperty("--bg-glow-1",a.glow1),e.style.setProperty("--bg-glow-2",a.glow2);const b=Number(r.font_size)||14,d=Number(r.terminal_font_size)||14;e.style.setProperty("--app-font-family",r.font_family||'"Avenir Next", "SF Pro Text", sans-serif'),e.style.setProperty("--app-font-size",`${b}px`),e.style.setProperty("--terminal-font-family",r.terminal_font_family||'Menlo, Monaco, "Courier New", monospace'),e.style.setProperty("--terminal-font-size",`${d}px`),e.style.fontSize=`${b}px`,e.setAttribute("data-compact",r.compact_mode?"true":"false"),e.setAttribute("data-reduced-motion",r.reduced_motion?"true":"false"),window.dispatchEvent(new CustomEvent("app:appearance-updated",{detail:r}))}function lr(){return{theme:"light",theme_mode:"system",use_system_theme:!0,font_family:vo[0].value,font_size:14,terminal_theme:"default",terminal_font_family:yo[0].value,terminal_font_size:14,accent_color:"teal",compact_mode:!1,reduced_motion:!1,sidebar_width:300}}function zu(r,e,t){const s=r.slice();return s[24]=e[t],s}function ju(r,e,t){const s=r.slice();return s[24]=e[t],s}function Rn(r,e,t){const s=r.slice();return s[29]=e[t][0],s[30]=e[t][1],s}function On(r){let e,t,s,a,b=r[30].label+"",d,i,o,u,g,f;function m(){return r[15](r[29])}return{c(){e=C("button"),t=C("span"),s=C("span"),a=O(),d=J(b),i=O(),n(s,"class","w-2.5 h-2.5 rounded-full border border-white/30"),n(s,"style",`background: ${r[4](r[29])};`),n(t,"class","inline-flex items-center gap-1.5"),n(e,"type","button"),n(e,"class",o="px-2 py-2 rounded-lg border text-xs transition-colors "+(r[2].accent_color===r[29]?"text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300")),n(e,"style",u=r[2].accent_color===r[29]?`background: linear-gradient(90deg, ${r[4](r[29])}, ${r[5](r[29])}); border-color: ${r[4](r[29])};`:`border-color: ${r[4](r[29])}66;`)},m(v,k){N(v,e,k),l(e,t),l(t,s),l(t,a),l(t,d),l(e,i),g||(f=X(e,"click",m),g=!0)},p(v,k){r=v,k[0]&4&&o!==(o="px-2 py-2 rounded-lg border text-xs transition-colors "+(r[2].accent_color===r[29]?"text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"))&&n(e,"class",o),k[0]&4&&u!==(u=r[2].accent_color===r[29]?`background: linear-gradient(90deg, ${r[4](r[29])}, ${r[5](r[29])}); border-color: ${r[4](r[29])};`:`border-color: ${r[4](r[29])}66;`)&&n(e,"style",u)},d(v){v&&W(e),g=!1,f()}}}function Wu(r){let e;return{c(){e=C("option"),e.textContent=`${r[24].label}`,e.__value=r[24].value,Re(e,e.__value)},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Nu(r){let e;return{c(){e=C("option"),e.textContent=`${r[24].label}`,e.__value=r[24].value,Re(e,e.__value)},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Uu(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y,F,T,Q,G,ne,ie,ce,ue,be,_e,ke,Ne,De=r[2].font_size+"",xe,Ce,se,ge,fe,Ee,Ge,at,Fe,$e,re=r[2].terminal_font_size+"",me,ve,pe,we,Be,Me,Se,ot,rt,dt,vt,ut,lt,Ye,Ct,ht,Xe,te,ae,je,He,Ve,et,Te,Ke,Ft,le,Le=ze(Object.entries(or)),Pe=[];for(let Je=0;Je<Le.length;Je+=1)Pe[Je]=On(Rn(r,Le,Je));let ft=ze(vo),pt=[];for(let Je=0;Je<ft.length;Je+=1)pt[Je]=Wu(ju(r,ft,Je));let At=ze(yo),Lt=[];for(let Je=0;Je<At.length;Je+=1)Lt[Je]=Nu(zu(r,At,Je));return{c(){e=C("div"),t=C("div"),s=C("div"),s.textContent="实时预览",a=O(),b=C("div"),d=C("div"),i=C("div"),i.innerHTML='<div class="text-base font-semibold text-slate-900 dark:text-slate-100">AHa SSH Manager</div> <div class="text-xs text-slate-500 dark:text-slate-400">主题色、字体和字号实时生效</div>',o=O(),u=C("button"),g=J("预览按钮"),m=O(),v=C("div"),k=C("div"),y=C("div"),y.textContent="主题模式",c=O(),p=C("div"),h=C("button"),_=J("浅色"),x=O(),E=C("button"),S=J("深色"),R=O(),P=C("button"),A=J("跟随系统"),V=O(),$=C("div"),U=C("div"),U.textContent="主题色",M=O(),I=C("div");for(let Je=0;Je<Pe.length;Je+=1)Pe[Je].c();H=O(),z=C("div"),ee=C("label"),q=C("div"),q.textContent="界面字体",Z=O(),Y=C("select");for(let Je=0;Je<pt.length;Je+=1)pt[Je].c();F=O(),T=C("label"),Q=C("div"),Q.textContent="终端字体",G=O(),ne=C("select");for(let Je=0;Je<Lt.length;Je+=1)Lt[Je].c();ie=O(),ce=C("div"),ue=C("div"),be=C("div"),_e=C("span"),_e.textContent="界面字号",ke=O(),Ne=C("span"),xe=J(De),Ce=J("px"),se=O(),ge=C("input"),fe=O(),Ee=C("div"),Ge=C("div"),at=C("span"),at.textContent="终端字号",Fe=O(),$e=C("span"),me=J(re),ve=J("px"),pe=O(),we=C("input"),Be=O(),Me=C("div"),Se=C("div"),Se.textContent="扩展设置",ot=O(),rt=C("label"),dt=C("span"),dt.textContent="紧凑模式（预留）",vt=O(),ut=C("input"),lt=O(),Ye=C("label"),Ct=C("span"),Ct.textContent="减少动画（预留）",ht=O(),Xe=C("input"),te=O(),ae=C("div"),je=C("button"),je.textContent="恢复默认",He=O(),Ve=C("div"),et=C("button"),et.textContent="取消",Te=O(),Ke=C("button"),Ke.textContent="保存设置",n(s,"class","text-sm font-semibold text-slate-900 dark:text-slate-100 mb-3"),n(u,"type","button"),n(u,"class","px-3 py-2 rounded-lg text-white text-xs font-medium shadow-sm"),n(u,"style",f=`background: linear-gradient(135deg, ${r[4](r[2].accent_color)}, ${r[5](r[2].accent_color)});`),n(d,"class","flex items-center justify-between"),n(b,"class","rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4"),n(t,"class","rounded-xl border border-slate-200 dark:border-slate-700 p-4 bg-slate-50/70 dark:bg-slate-900/50"),n(y,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),n(h,"type","button"),n(h,"class",w="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="light"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200")),n(h,"style",L=r[2].theme_mode==="light"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":""),n(E,"type","button"),n(E,"class",D="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="dark"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200")),n(E,"style",B=r[2].theme_mode==="dark"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":""),n(P,"type","button"),n(P,"class",j="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="system"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200")),n(P,"style",K=r[2].theme_mode==="system"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":""),n(p,"class","grid grid-cols-3 gap-2"),n(k,"class","space-y-2"),n(U,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),n(I,"class","grid grid-cols-4 gap-2"),n($,"class","space-y-2"),n(v,"class","grid grid-cols-1 xl:grid-cols-2 gap-5"),n(q,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),n(Y,"class","w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-sm"),r[2].font_family===void 0&&dr(()=>r[16].call(Y)),n(ee,"class","space-y-2 block"),n(Q,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),n(ne,"class","w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-sm"),r[2].terminal_font_family===void 0&&dr(()=>r[17].call(ne)),n(T,"class","space-y-2 block"),n(z,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),Ae(Ne,"color","var(--accent-primary)"),n(be,"class","flex items-center justify-between text-sm font-semibold text-slate-900 dark:text-slate-100"),n(ge,"type","range"),n(ge,"min","12"),n(ge,"max","18"),n(ge,"step","1"),n(ge,"class","w-full"),Ae(ge,"accent-color","var(--accent-primary)"),n(ue,"class","space-y-2"),Ae($e,"color","var(--accent-primary)"),n(Ge,"class","flex items-center justify-between text-sm font-semibold text-slate-900 dark:text-slate-100"),n(we,"type","range"),n(we,"min","12"),n(we,"max","20"),n(we,"step","1"),n(we,"class","w-full"),Ae(we,"accent-color","var(--accent-primary)"),n(Ee,"class","space-y-2"),n(ce,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),n(Se,"class","text-sm font-semibold text-slate-900 dark:text-slate-100"),n(ut,"type","checkbox"),n(ut,"class","w-4 h-4"),Ae(ut,"accent-color","var(--accent-primary)"),n(rt,"class","flex items-center justify-between text-sm text-slate-700 dark:text-slate-300"),n(Xe,"type","checkbox"),n(Xe,"class","w-4 h-4"),Ae(Xe,"accent-color","var(--accent-primary)"),n(Ye,"class","flex items-center justify-between text-sm text-slate-700 dark:text-slate-300"),n(Me,"class","rounded-lg border border-slate-200 dark:border-slate-700 p-3 space-y-3"),n(je,"type","button"),n(je,"class","px-3 py-2 text-xs rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"),n(et,"type","button"),n(et,"class","px-3 py-2 text-xs rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"),n(Ke,"type","button"),n(Ke,"class","px-3 py-2 text-xs rounded-lg text-white"),Ae(Ke,"background","linear-gradient(90deg, var(--accent-primary), var(--accent-hover))"),n(Ve,"class","flex gap-2"),n(ae,"class","flex items-center justify-between pt-2"),n(e,"class","space-y-6")},m(Je,gt){N(Je,e,gt),l(e,t),l(t,s),l(t,a),l(t,b),l(b,d),l(d,i),l(d,o),l(d,u),l(u,g),l(e,m),l(e,v),l(v,k),l(k,y),l(k,c),l(k,p),l(p,h),l(h,_),l(p,x),l(p,E),l(E,S),l(p,R),l(p,P),l(P,A),l(v,V),l(v,$),l($,U),l($,M),l($,I);for(let Ze=0;Ze<Pe.length;Ze+=1)Pe[Ze]&&Pe[Ze].m(I,null);l(e,H),l(e,z),l(z,ee),l(ee,q),l(ee,Z),l(ee,Y);for(let Ze=0;Ze<pt.length;Ze+=1)pt[Ze]&&pt[Ze].m(Y,null);nr(Y,r[2].font_family,!0),l(z,F),l(z,T),l(T,Q),l(T,G),l(T,ne);for(let Ze=0;Ze<Lt.length;Ze+=1)Lt[Ze]&&Lt[Ze].m(ne,null);nr(ne,r[2].terminal_font_family,!0),l(e,ie),l(e,ce),l(ce,ue),l(ue,be),l(be,_e),l(be,ke),l(be,Ne),l(Ne,xe),l(Ne,Ce),l(ue,se),l(ue,ge),Re(ge,r[2].font_size),l(ce,fe),l(ce,Ee),l(Ee,Ge),l(Ge,at),l(Ge,Fe),l(Ge,$e),l($e,me),l($e,ve),l(Ee,pe),l(Ee,we),Re(we,r[2].terminal_font_size),l(e,Be),l(e,Me),l(Me,Se),l(Me,ot),l(Me,rt),l(rt,dt),l(rt,vt),l(rt,ut),ut.checked=r[2].compact_mode,l(Me,lt),l(Me,Ye),l(Ye,Ct),l(Ye,ht),l(Ye,Xe),Xe.checked=r[2].reduced_motion,l(e,te),l(e,ae),l(ae,je),l(ae,He),l(ae,Ve),l(Ve,et),l(Ve,Te),l(Ve,Ke),Ft||(le=[X(h,"click",r[12]),X(E,"click",r[13]),X(P,"click",r[14]),X(Y,"change",r[16]),X(Y,"change",r[6]),X(ne,"change",r[17]),X(ne,"change",r[6]),X(ge,"change",r[18]),X(ge,"input",r[18]),X(ge,"input",r[6]),X(we,"change",r[19]),X(we,"input",r[19]),X(we,"input",r[6]),X(ut,"change",r[20]),X(ut,"change",r[6]),X(Xe,"change",r[21]),X(Xe,"change",r[6]),X(je,"click",r[7]),X(et,"click",function(){tr(r[1])&&r[1].apply(this,arguments)}),X(Ke,"click",r[3])],Ft=!0)},p(Je,gt){if(r=Je,gt[0]&4&&f!==(f=`background: linear-gradient(135deg, ${r[4](r[2].accent_color)}, ${r[5](r[2].accent_color)});`)&&n(u,"style",f),gt[0]&4&&w!==(w="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="light"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"))&&n(h,"class",w),gt[0]&4&&L!==(L=r[2].theme_mode==="light"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":"")&&n(h,"style",L),gt[0]&4&&D!==(D="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="dark"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"))&&n(E,"class",D),gt[0]&4&&B!==(B=r[2].theme_mode==="dark"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":"")&&n(E,"style",B),gt[0]&4&&j!==(j="px-3 py-2 rounded-lg text-xs font-medium transition-colors "+(r[2].theme_mode==="system"?"text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"))&&n(P,"class",j),gt[0]&4&&K!==(K=r[2].theme_mode==="system"?"background: linear-gradient(90deg, var(--accent-primary), var(--accent-hover));":"")&&n(P,"style",K),gt[0]&116){Le=ze(Object.entries(or));let Ze;for(Ze=0;Ze<Le.length;Ze+=1){const ye=Rn(r,Le,Ze);Pe[Ze]?Pe[Ze].p(ye,gt):(Pe[Ze]=On(ye),Pe[Ze].c(),Pe[Ze].m(I,null))}for(;Ze<Pe.length;Ze+=1)Pe[Ze].d(1);Pe.length=Le.length}gt[0]&4&&nr(Y,r[2].font_family),gt[0]&4&&nr(ne,r[2].terminal_font_family),gt[0]&4&&De!==(De=r[2].font_size+"")&&he(xe,De),gt[0]&4&&Re(ge,r[2].font_size),gt[0]&4&&re!==(re=r[2].terminal_font_size+"")&&he(me,re),gt[0]&4&&Re(we,r[2].terminal_font_size),gt[0]&4&&(ut.checked=r[2].compact_mode),gt[0]&4&&(Xe.checked=r[2].reduced_motion)},d(Je){Je&&W(e),Mt(Pe,Je),Mt(pt,Je),Mt(Lt,Je),Ft=!1,Qe(le)}}}function Vu(r){let e,t,s;function a(d){r[22](d)}let b={onClose:r[1],title:"全局设置",size:"xl",$$slots:{default:[Uu]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.isOpen=r[0]),e=new wr({props:b}),_t.push(()=>kt(e,"isOpen",a)),{c(){nt(e.$$.fragment)},m(d,i){it(e,d,i),s=!0},p(d,i){const o={};i[0]&2&&(o.onClose=d[1]),i[0]&6|i[1]&4&&(o.$$scope={dirty:i,ctx:d}),!t&&i[0]&1&&(t=!0,o.isOpen=d[0],wt(()=>t=!1)),e.$set(o)},i(d){s||(Ue(e.$$.fragment,d),s=!0)},o(d){qe(e.$$.fragment,d),s=!1},d(d){st(e,d)}}}function Nr(r){return{...r,font_size:Number(r.font_size)||14,terminal_font_size:Number(r.terminal_font_size)||14}}function Ku(r,e,t){let{isOpen:s=!1}=e,{value:a=lr()}=e,{onSave:b=()=>{}}=e,{onCancel:d=()=>{}}=e,{onPreview:i=()=>{}}=e,o=lr(),u=!1;function g(){b(Nr(o))}function f(){return o.theme_mode==="dark"||o.theme_mode==="light"?o.theme_mode:typeof document<"u"&&document.documentElement.classList.contains("dark")?"dark":"light"}function m(R){const P=or[R]||or.teal;return f()==="dark"?P.dark.accentPrimary:P.light.accentPrimary}function v(R){const P=or[R]||or.teal;return f()==="dark"?P.dark.accentHover:P.light.accentHover}function k(){queueMicrotask(()=>{i(Nr(o))})}function y(){t(2,o=lr()),k()}const c=()=>{t(2,o.theme_mode="light",o),k()},p=()=>{t(2,o.theme_mode="dark",o),k()},h=()=>{t(2,o.theme_mode="system",o),k()},_=R=>{t(2,o.accent_color=R,o),k()};function w(){o.font_family=Pr(this),t(2,o),t(0,s),t(11,u),t(8,a)}function L(){o.terminal_font_family=Pr(this),t(2,o),t(0,s),t(11,u),t(8,a)}function x(){o.font_size=xr(this.value),t(2,o),t(0,s),t(11,u),t(8,a)}function E(){o.terminal_font_size=xr(this.value),t(2,o),t(0,s),t(11,u),t(8,a)}function S(){o.compact_mode=this.checked,t(2,o),t(0,s),t(11,u),t(8,a)}function D(){o.reduced_motion=this.checked,t(2,o),t(0,s),t(11,u),t(8,a)}function B(R){s=R,t(0,s)}return r.$$set=R=>{"isOpen"in R&&t(0,s=R.isOpen),"value"in R&&t(8,a=R.value),"onSave"in R&&t(9,b=R.onSave),"onCancel"in R&&t(1,d=R.onCancel),"onPreview"in R&&t(10,i=R.onPreview)},r.$$.update=()=>{r.$$.dirty[0]&2305&&s&&!u&&(t(2,o=Nr({...lr(),...a})),t(11,u=!0)),r.$$.dirty[0]&2049&&!s&&u&&t(11,u=!1)},[s,d,o,g,m,v,k,y,a,b,i,u,c,p,h,_,w,L,x,E,S,D,B]}class qu extends Et{constructor(e){super(),xt(this,e,Ku,Vu,St,{isOpen:0,value:8,onSave:9,onCancel:1,onPreview:10},null,[-1,-1])}}function Pn(r,e,t){const s=r.slice();return s[90]=e[t],s}function In(r,e,t){const s=r.slice();return s[90]=e[t],s}function Hn(r){let e,t=r[26].length+"",s;return{c(){e=C("span"),s=J(t),n(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(a,b){N(a,e,b),l(e,s)},p(a,b){b[0]&67108864&&t!==(t=a[26].length+"")&&he(s,t)},d(a){a&&W(e)}}}function Fn(r){let e,t,s,a,b,d;return{c(){e=C("button"),t=de("svg"),s=de("path"),n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M9 5l7 7-7 7"),n(t,"class","w-5 h-5"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"viewBox","0 0 24 24"),e.disabled=r[2],n(e,"class",a="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),n(e,"title","展开资产列表")},m(i,o){N(i,e,o),l(e,t),l(t,s),b||(d=X(e,"click",r[34]),b=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&a!==(a="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&n(e,"class",a)},d(i){i&&W(e),b=!1,d()}}}function zn(r){let e,t,s,a,b,d,i,o,u;return{c(){e=C("div"),t=C("div"),s=O(),a=C("button"),b=de("svg"),d=de("path"),n(t,"class","h-full w-full rounded svelte-m8xeqv"),n(d,"stroke-linecap","round"),n(d,"stroke-linejoin","round"),n(d,"stroke-width","2"),n(d,"d","M15 19l-7-7 7-7"),n(b,"class","w-4 h-4"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"viewBox","0 0 24 24"),a.disabled=r[2],n(a,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),n(a,"title","折叠资产列表"),n(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),n(e,"role","separator"),n(e,"aria-hidden","true"),Ae(e,"cursor",r[2]?"default":"col-resize"),Ae(e,"height","100%"),Ae(e,"padding","0 2px"),Ae(e,"pointer-events",r[2]?"none":"auto")},m(g,f){N(g,e,f),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),o||(u=[X(a,"click",r[34]),X(e,"mousedown",r[36])],o=!0)},p(g,f){f[0]&4&&(a.disabled=g[2]),f[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(g[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&n(a,"class",i),f[0]&4&&Ae(e,"cursor",g[2]?"default":"col-resize"),f[0]&4&&Ae(e,"pointer-events",g[2]?"none":"auto")},d(g){g&&W(e),o=!1,Qe(u)}}}function jn(r){let e,t,s,a,b,d,i,o,u;return{c(){e=C("div"),t=C("div"),s=O(),a=C("button"),b=de("svg"),d=de("path"),n(t,"class","h-full w-full rounded svelte-m8xeqv"),n(d,"stroke-linecap","round"),n(d,"stroke-linejoin","round"),n(d,"stroke-width","2"),n(d,"d","M9 5l7 7-7 7"),n(b,"class","w-4 h-4"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"viewBox","0 0 24 24"),a.disabled=r[2],n(a,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),n(a,"title","折叠右侧面板"),n(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),n(e,"role","separator"),n(e,"aria-hidden","true"),Ae(e,"cursor",r[2]?"default":"col-resize"),Ae(e,"height","100%"),Ae(e,"padding","0 2px"),Ae(e,"pointer-events",r[2]?"none":"auto")},m(g,f){N(g,e,f),l(e,t),l(e,s),l(e,a),l(a,b),l(b,d),o||(u=[X(a,"click",r[35]),X(e,"mousedown",r[37])],o=!0)},p(g,f){f[0]&4&&(a.disabled=g[2]),f[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(g[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&n(a,"class",i),f[0]&4&&Ae(e,"cursor",g[2]?"default":"col-resize"),f[0]&4&&Ae(e,"pointer-events",g[2]?"none":"auto")},d(g){g&&W(e),o=!1,Qe(u)}}}function Wn(r){let e,t,s,a,b,d;return{c(){e=C("button"),t=de("svg"),s=de("path"),n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M15 19l-7-7 7-7"),n(t,"class","w-5 h-5"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"viewBox","0 0 24 24"),e.disabled=r[2],n(e,"class",a="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),n(e,"title","展开右侧面板")},m(i,o){N(i,e,o),l(e,t),l(t,s),b||(d=X(e,"click",r[35]),b=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&a!==(a="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&n(e,"class",a)},d(i){i&&W(e),b=!1,d()}}}function Nn(r){let e,t,s,a,b,d,i,o,u,g,f=r[26].length+"",m,v,k,y,c,p,h=r[28].length+"",_,w,L,x,E,S,D,B;function R(j,K){if(j[27].activeTab==="active"&&j[26].length===0)return Xu;if(j[27].activeTab==="active")return Yu;if(j[27].activeTab==="history"&&j[28].length===0)return Ju;if(j[27].activeTab==="history")return Gu}let P=R(r),A=P&&P(r);return{c(){e=C("div"),t=C("div"),s=C("div"),a=C("h3"),a.textContent="上传任务",b=O(),d=C("button"),d.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=O(),o=C("div"),u=C("button"),g=J("进行中 ("),m=J(f),v=J(")"),y=O(),c=C("button"),p=J("历史 ("),_=J(h),w=J(")"),E=O(),A&&A.c(),n(a,"class","font-semibold text-sm"),n(d,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),n(s,"class","flex items-center justify-between mb-3"),n(u,"class",k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[27].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),n(c,"class",L="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[27].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),n(o,"class","flex gap-2"),n(t,"class",x="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),n(e,"class",S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),Ae(e,"height","calc(100vh - 3.5rem)")},m(j,K){N(j,e,K),l(e,t),l(t,s),l(s,a),l(s,b),l(s,d),l(t,i),l(t,o),l(o,u),l(u,g),l(u,m),l(u,v),l(o,y),l(o,c),l(c,p),l(c,_),l(c,w),l(e,E),A&&A.m(e,null),D||(B=[X(d,"click",r[62]),X(u,"click",r[63]),X(c,"click",r[64])],D=!0)},p(j,K){K[0]&67108864&&f!==(f=j[26].length+"")&&he(m,f),K[0]&134217729&&k!==(k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(j[27].activeTab==="active"?(j[0]==="dark","bg-blue-600 text-white"):j[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&n(u,"class",k),K[0]&268435456&&h!==(h=j[28].length+"")&&he(_,h),K[0]&134217729&&L!==(L="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(j[27].activeTab==="history"?(j[0]==="dark","bg-blue-600 text-white"):j[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&n(c,"class",L),K[0]&1&&x!==(x="p-4 border-b "+(j[0]==="dark"?"border-gray-700":"border-gray-200"))&&n(t,"class",x),P===(P=R(j))&&A?A.p(j,K):(A&&A.d(1),A=P&&P(j),A&&(A.c(),A.m(e,null))),K[0]&1&&S!==(S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(j[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&n(e,"class",S)},d(j){j&&W(e),A&&A.d(),D=!1,Qe(B)}}}function Gu(r){let e,t,s,a,b,d,i,o,u=[],g=new Map,f,m,v=ze(r[28]);const k=y=>y[90].id;for(let y=0;y<v.length;y+=1){let c=Pn(r,v,y),p=k(c);g.set(p,u[y]=Vn(p,c))}return{c(){e=C("div"),t=C("div"),s=C("button"),a=J("清空历史记录"),i=O(),o=C("div");for(let y=0;y<u.length;y+=1)u[y].c();n(s,"class",b="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),n(t,"class",d="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),n(o,"class","flex-1 overflow-y-auto p-4 space-y-3"),n(e,"class","flex-1 flex flex-col")},m(y,c){N(y,e,c),l(e,t),l(t,s),l(s,a),l(e,i),l(e,o);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(o,null);f||(m=X(s,"click",r[66]),f=!0)},p(y,c){c[0]&1&&b!==(b="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(y[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&n(s,"class",b),c[0]&1&&d!==(d="p-3 border-b "+(y[0]==="dark"?"border-gray-700":"border-gray-200"))&&n(t,"class",d),c[0]&268435457&&(v=ze(y[28]),u=Jt(u,c,k,1,y,v,g,o,Xt,Vn,null,Pn))},d(y){y&&W(e);for(let c=0;c<u.length;c+=1)u[c].d();f=!1,m()}}}function Ju(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',n(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Yu(r){let e,t=[],s=new Map,a=ze(r[26]);const b=d=>d[90].id;for(let d=0;d<a.length;d+=1){let i=In(r,a,d),o=b(i);s.set(o,t[d]=qn(o,i))}return{c(){e=C("div");for(let d=0;d<t.length;d+=1)t[d].c();n(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(d,i){N(d,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(d,i){i[0]&67108865&&(a=ze(d[26]),t=Jt(t,i,b,1,d,a,s,e,Xt,qn,null,In))},d(d){d&&W(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Xu(r){let e;return{c(){e=C("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',n(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,s){N(t,e,s)},p:Oe,d(t){t&&W(e)}}}function Zu(r){let e;return{c(){e=C("span"),e.textContent="已取消",n(e,"class","text-gray-500")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Qu(r){let e;return{c(){e=C("span"),e.textContent="失败",n(e,"class","text-red-500")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function $u(r){let e;return{c(){e=C("span"),e.textContent="完成",n(e,"class","text-green-500")},m(t,s){N(t,e,s)},d(t){t&&W(e)}}}function Un(r){let e,t=r[90].error+"",s,a;return{c(){e=C("div"),s=J(t),n(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),n(e,"title",a=r[90].error)},m(b,d){N(b,e,d),l(e,s)},p(b,d){d[0]&268435456&&t!==(t=b[90].error+"")&&he(s,t),d[0]&268435456&&a!==(a=b[90].error)&&n(e,"title",a)},d(b){b&&W(e)}}}function Vn(r,e){let t,s,a,b,d=e[90].filename+"",i,o,u,g,f,m,v,k,y=sr(e[90].totalBytes)+"",c,p,h,_,w,L,x,E;function S(A,j){if(A[90].status==="completed")return $u;if(A[90].status==="failed")return Qu;if(A[90].status==="cancelled")return Zu}let D=S(e),B=D&&D(e),R=e[90].status==="failed"&&e[90].error&&Un(e);function P(){return e[67](e[90])}return{key:r,first:null,c(){t=C("div"),s=C("div"),a=C("div"),b=C("div"),i=J(d),u=O(),g=C("div"),B&&B.c(),f=O(),m=C("span"),m.textContent="•",v=O(),k=C("span"),c=J(y),p=O(),R&&R.c(),h=O(),_=C("button"),_.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',w=O(),n(b,"class","text-sm font-medium truncate"),n(b,"title",o=e[90].filename),n(g,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),n(a,"class","flex-1 min-w-0"),n(_,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),n(_,"title","删除记录"),n(s,"class","flex items-center justify-between"),n(t,"class",L="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(A,j){N(A,t,j),l(t,s),l(s,a),l(a,b),l(b,i),l(a,u),l(a,g),B&&B.m(g,null),l(g,f),l(g,m),l(g,v),l(g,k),l(k,c),l(a,p),R&&R.m(a,null),l(s,h),l(s,_),l(t,w),x||(E=X(_,"click",P),x=!0)},p(A,j){e=A,j[0]&268435456&&d!==(d=e[90].filename+"")&&he(i,d),j[0]&268435456&&o!==(o=e[90].filename)&&n(b,"title",o),D!==(D=S(e))&&(B&&B.d(1),B=D&&D(e),B&&(B.c(),B.m(g,f))),j[0]&268435456&&y!==(y=sr(e[90].totalBytes)+"")&&he(c,y),e[90].status==="failed"&&e[90].error?R?R.p(e,j):(R=Un(e),R.c(),R.m(a,null)):R&&(R.d(1),R=null),j[0]&1&&L!==(L="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&n(t,"class",L)},d(A){A&&W(t),B&&B.d(),R&&R.d(),x=!1,E()}}}function Kn(r){let e,t=_s(r[90].speed)+"",s;return{c(){e=J("• "),s=J(t)},m(a,b){N(a,e,b),N(a,s,b)},p(a,b){b[0]&67108864&&t!==(t=_s(a[90].speed)+"")&&he(s,t)},d(a){a&&(W(e),W(s))}}}function qn(r,e){let t,s,a,b,d=e[90].filename+"",i,o,u,g,f=sr(e[90].bytesSent)+"",m,v,k=sr(e[90].totalBytes)+"",y,c,p,h,_,w=Math.round(Br(e[90]))+"",L,x,E,S,D,B,R,P,A,j,K,V,$,U=e[90].speed&&Kn(e);function M(){return e[65](e[90])}return{key:r,first:null,c(){t=C("div"),s=C("div"),a=C("div"),b=C("div"),i=J(d),u=O(),g=C("div"),m=J(f),v=J(" / "),y=J(k),c=O(),U&&U.c(),p=O(),h=C("div"),_=C("span"),L=J(w),x=J("%"),E=O(),S=C("button"),S.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',D=O(),B=C("div"),R=C("div"),j=O(),n(b,"class","text-sm font-medium truncate"),n(b,"title",o=e[90].filename),n(g,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),n(a,"class","flex-1 min-w-0"),n(_,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),n(S,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),n(S,"title","取消上传"),n(h,"class","flex items-center gap-2 ml-3"),n(s,"class","flex items-center justify-between mb-2"),n(R,"class","h-full bg-blue-500 transition-all duration-300"),n(R,"style",P=`width: ${Math.min(100,Math.max(0,Br(e[90])))}%`),n(B,"class",A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),n(t,"class",K="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(I,H){N(I,t,H),l(t,s),l(s,a),l(a,b),l(b,i),l(a,u),l(a,g),l(g,m),l(g,v),l(g,y),l(g,c),U&&U.m(g,null),l(s,p),l(s,h),l(h,_),l(_,L),l(_,x),l(h,E),l(h,S),l(t,D),l(t,B),l(B,R),l(t,j),V||($=X(S,"click",M),V=!0)},p(I,H){e=I,H[0]&67108864&&d!==(d=e[90].filename+"")&&he(i,d),H[0]&67108864&&o!==(o=e[90].filename)&&n(b,"title",o),H[0]&67108864&&f!==(f=sr(e[90].bytesSent)+"")&&he(m,f),H[0]&67108864&&k!==(k=sr(e[90].totalBytes)+"")&&he(y,k),e[90].speed?U?U.p(e,H):(U=Kn(e),U.c(),U.m(g,null)):U&&(U.d(1),U=null),H[0]&67108864&&w!==(w=Math.round(Br(e[90]))+"")&&he(L,w),H[0]&67108864&&P!==(P=`width: ${Math.min(100,Math.max(0,Br(e[90])))}%`)&&n(R,"style",P),H[0]&1&&A!==(A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&n(B,"class",A),H[0]&1&&K!==(K="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&n(t,"class",K)},d(I){I&&W(t),U&&U.d(),V=!1,$()}}}function ef(r){let e,t,s,a,b,d,i,o,u,g,f,m,v,k,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,K,V,$,U,M,I,H,z,ee,q,Z,Y,F,T,Q,G,ne,ie,ce,ue,be,_e,ke,Ne,De,xe,Ce,se,ge,fe,Ee,Ge,at,Fe,$e,re,me,ve,pe,we,Be,Me,Se,ot,rt,dt,vt,ut,lt,Ye,Ct,ht,Xe=r[26].length>0&&Hn(r),te=r[5]&&Fn(r);ee=new xl({props:{onConnect:r[39],onAddClick:r[52],onEdit:r[45]}});let ae=!r[5]&&zn(r),je={};T=new Ec({props:je}),r[53](T);let He=!r[6]&&jn(r);ue=new kh({}),xe=new Ah({});let Ve=r[6]&&Wn(r);function et(ye){r[54](ye)}function Te(ye){r[55](ye)}let Ke={onAdd:r[44],onUpdate:r[46]};r[2]!==void 0&&(Ke.isOpen=r[2]),r[7]!==void 0&&(Ke.editingAsset=r[7]),fe=new Ru({props:Ke}),_t.push(()=>kt(fe,"isOpen",et)),_t.push(()=>kt(fe,"editingAsset",Te));function Ft(ye){r[56](ye)}let le={themeStore:yr};r[1]!==void 0&&(le.isOpen=r[1]),Fe=new wu({props:le}),_t.push(()=>kt(Fe,"isOpen",Ft));function Le(ye){r[58](ye)}let Pe={onClose:r[57],themeStore:yr};r[3]!==void 0&&(Pe.isOpen=r[3]),me=new Fu({props:Pe}),_t.push(()=>kt(me,"isOpen",Le));function ft(ye){r[59](ye)}let pt={value:r[21],onPreview:r[30],onSave:r[29],onCancel:r[32]};r[4]!==void 0&&(pt.isOpen=r[4]),we=new qu({props:pt}),_t.push(()=>kt(we,"isOpen",ft));function At(ye){r[60](ye)}let Lt={title:r[10],message:r[11],placeholder:r[12],defaultValue:r[13],inputType:r[14],allowEmpty:r[15],trimValue:r[16],confirmText:"确定",cancelText:"取消",onConfirm:r[40],onCancel:r[41]};r[9]!==void 0&&(Lt.isOpen=r[9]),Se=new br({props:Lt}),_t.push(()=>kt(Se,"isOpen",At));function Je(ye){r[61](ye)}let gt={title:r[18],message:r[19],type:r[20],confirmText:"确定",cancelText:"取消",onConfirm:r[42],onCancel:r[43]};r[17]!==void 0&&(gt.isOpen=r[17]),dt=new hr({props:gt}),_t.push(()=>kt(dt,"isOpen",Je));let Ze=r[27].isPanelOpen&&Nn(r);return{c(){e=C("div"),t=C("header"),s=C("div"),a=C("div"),a.textContent="哈",b=O(),d=C("div"),i=C("div"),o=J("啊哈 SSH 连接工具"),g=O(),f=C("div"),m=J("AHa SSH Manager"),k=O(),y=C("div"),c=C("div"),p=C("button"),h=de("svg"),_=de("path"),L=O(),Xe&&Xe.c(),x=O(),E=C("button"),S=de("svg"),D=de("path"),B=de("path"),P=O(),A=C("button"),j=de("svg"),K=de("path"),V=O(),$=C("span"),$.textContent="开发工具",M=O(),I=C("div"),te&&te.c(),H=O(),z=C("div"),nt(ee.$$.fragment),Z=O(),ae&&ae.c(),Y=O(),F=C("div"),nt(T.$$.fragment),G=O(),He&&He.c(),ne=O(),ie=C("div"),ce=C("div"),nt(ue.$$.fragment),be=O(),_e=C("div"),ke=C("div"),Ne=O(),De=C("div"),nt(xe.$$.fragment),se=O(),Ve&&Ve.c(),ge=O(),nt(fe.$$.fragment),at=O(),nt(Fe.$$.fragment),re=O(),nt(me.$$.fragment),pe=O(),nt(we.$$.fragment),Me=O(),nt(Se.$$.fragment),rt=O(),nt(dt.$$.fragment),ut=O(),Ze&&Ze.c(),n(a,"class","w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),Ae(a,"background","linear-gradient(135deg, var(--accent-primary), var(--accent-hover))"),n(i,"class",u="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),n(f,"class",v="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),n(s,"class","flex items-center gap-3"),n(_,"stroke-linecap","round"),n(_,"stroke-linejoin","round"),n(_,"stroke-width","2"),n(_,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),n(h,"class","w-5 h-5"),n(h,"fill","none"),n(h,"stroke","currentColor"),n(h,"viewBox","0 0 24 24"),n(p,"class",w="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),n(p,"title","上传任务"),n(c,"class","relative"),n(D,"stroke-linecap","round"),n(D,"stroke-linejoin","round"),n(D,"stroke-width","2"),n(D,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),n(B,"stroke-linecap","round"),n(B,"stroke-linejoin","round"),n(B,"stroke-width","2"),n(B,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),n(S,"class","w-5 h-5"),n(S,"fill","none"),n(S,"stroke","currentColor"),n(S,"viewBox","0 0 24 24"),E.disabled=r[2],n(E,"class",R="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")),Ae(E,"color","var(--accent-primary)"),n(E,"title","全局设置"),n(K,"stroke-linecap","round"),n(K,"stroke-linejoin","round"),n(K,"stroke-width","2"),n(K,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),n(j,"class","w-4 h-4"),n(j,"fill","none"),n(j,"stroke","currentColor"),n(j,"viewBox","0 0 24 24"),n($,"class","text-sm"),A.disabled=r[2],n(A,"class","flex items-center gap-2 px-4 py-2 text-white rounded-lg font-medium transition-all shadow-sm hover:brightness-95 focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"),Ae(A,"background","linear-gradient(90deg, var(--accent-primary), var(--accent-hover))"),n(y,"class","ml-auto flex items-center gap-3"),n(t,"class",U="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),Ae(t,"pointer-events",r[2]?"none":"auto"),n(z,"class",q="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),Ae(z,"width",(r[5]?"0":r[24])+"px"),Ae(z,"min-width",(r[5]?"0":r[24])+"px"),Mr(z,"collapsed",r[5]),n(F,"class",Q="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),n(ce,"class","overflow-hidden"),Ae(ce,"height",r[22]+"%"),Ae(ce,"min-height","0"),n(ke,"class","w-full h-full rounded svelte-m8xeqv"),n(_e,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),n(_e,"role","separator"),n(_e,"aria-hidden","true"),Ae(_e,"cursor",r[2]?"default":"row-resize"),Ae(_e,"width","100%"),Ae(_e,"padding","2px 0"),Ae(_e,"pointer-events",r[2]?"none":"auto"),n(De,"class","overflow-hidden"),Ae(De,"height",100-r[22]+"%"),Ae(De,"min-height","0"),n(ie,"data-right-panel","true"),n(ie,"class",Ce="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),Ae(ie,"width",(r[6]?"0":r[23])+"px"),Ae(ie,"min-width",r[6]?"0":"300px"),Ae(ie,"max-width","600px"),Mr(ie,"collapsed",r[6]),n(I,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),n(e,"class",lt="h-screen w-full flex flex-col "+r[25]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(ye,We){N(ye,e,We),l(e,t),l(t,s),l(s,a),l(s,b),l(s,d),l(d,i),l(i,o),l(d,g),l(d,f),l(f,m),l(t,k),l(t,y),l(y,c),l(c,p),l(p,h),l(h,_),l(c,L),Xe&&Xe.m(c,null),l(y,x),l(y,E),l(E,S),l(S,D),l(S,B),l(y,P),l(y,A),l(A,j),l(j,K),l(A,V),l(A,$),l(e,M),l(e,I),te&&te.m(I,null),l(I,H),l(I,z),it(ee,z,null),l(I,Z),ae&&ae.m(I,null),l(I,Y),l(I,F),it(T,F,null),l(I,G),He&&He.m(I,null),l(I,ne),l(I,ie),l(ie,ce),it(ue,ce,null),l(ie,be),l(ie,_e),l(_e,ke),l(ie,Ne),l(ie,De),it(xe,De,null),l(I,se),Ve&&Ve.m(I,null),l(e,ge),it(fe,e,null),l(e,at),it(Fe,e,null),l(e,re),it(me,e,null),l(e,pe),it(we,e,null),l(e,Me),it(Se,e,null),l(e,rt),it(dt,e,null),l(e,ut),Ze&&Ze.m(e,null),Ye=!0,Ct||(ht=[X(p,"click",r[51]),X(E,"click",r[31]),X(A,"click",r[33]),X(_e,"mousedown",r[38])],Ct=!0)},p(ye,We){(!Ye||We[0]&1&&u!==(u="font-semibold text-sm "+(ye[0]==="dark"?"text-white":"text-gray-900")))&&n(i,"class",u),(!Ye||We[0]&1&&v!==(v="text-xs "+(ye[0]==="dark"?"text-gray-400":"text-gray-500")))&&n(f,"class",v),(!Ye||We[0]&1&&w!==(w="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(ye[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&n(p,"class",w),ye[26].length>0?Xe?Xe.p(ye,We):(Xe=Hn(ye),Xe.c(),Xe.m(c,null)):Xe&&(Xe.d(1),Xe=null),(!Ye||We[0]&4)&&(E.disabled=ye[2]),(!Ye||We[0]&1&&R!==(R="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(ye[0]==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")))&&n(E,"class",R),(!Ye||We[0]&4)&&(A.disabled=ye[2]),(!Ye||We[0]&1&&U!==(U="h-14 flex-shrink-0 "+(ye[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&n(t,"class",U),(!Ye||We[0]&4)&&Ae(t,"pointer-events",ye[2]?"none":"auto"),ye[5]?te?te.p(ye,We):(te=Fn(ye),te.c(),te.m(I,H)):te&&(te.d(1),te=null);const Ut={};We[0]&132&&(Ut.onAddClick=ye[52]),ee.$set(Ut),(!Ye||We[0]&1&&q!==(q="flex-shrink-0 transition-all duration-200 "+(ye[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&n(z,"class",q),(!Ye||We[0]&16777248)&&Ae(z,"width",(ye[5]?"0":ye[24])+"px"),(!Ye||We[0]&16777248)&&Ae(z,"min-width",(ye[5]?"0":ye[24])+"px"),(!Ye||We[0]&33)&&Mr(z,"collapsed",ye[5]),ye[5]?ae&&(ae.d(1),ae=null):ae?ae.p(ye,We):(ae=zn(ye),ae.c(),ae.m(I,Y));const Qt={};T.$set(Qt),(!Ye||We[0]&1&&Q!==(Q="flex-1 min-w-0 min-h-0 flex flex-col "+(ye[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&n(F,"class",Q),ye[6]?He&&(He.d(1),He=null):He?He.p(ye,We):(He=jn(ye),He.c(),He.m(I,ne)),(!Ye||We[0]&4194304)&&Ae(ce,"height",ye[22]+"%"),(!Ye||We[0]&4)&&Ae(_e,"cursor",ye[2]?"default":"row-resize"),(!Ye||We[0]&4)&&Ae(_e,"pointer-events",ye[2]?"none":"auto"),(!Ye||We[0]&4194304)&&Ae(De,"height",100-ye[22]+"%"),(!Ye||We[0]&1&&Ce!==(Ce="flex-shrink-0 flex flex-col overflow-hidden "+(ye[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&n(ie,"class",Ce),(!Ye||We[0]&8388672)&&Ae(ie,"width",(ye[6]?"0":ye[23])+"px"),(!Ye||We[0]&64)&&Ae(ie,"min-width",ye[6]?"0":"300px"),(!Ye||We[0]&65)&&Mr(ie,"collapsed",ye[6]),ye[6]?Ve?Ve.p(ye,We):(Ve=Wn(ye),Ve.c(),Ve.m(I,null)):Ve&&(Ve.d(1),Ve=null);const Rt={};!Ee&&We[0]&4&&(Ee=!0,Rt.isOpen=ye[2],wt(()=>Ee=!1)),!Ge&&We[0]&128&&(Ge=!0,Rt.editingAsset=ye[7],wt(()=>Ge=!1)),fe.$set(Rt);const jt={};!$e&&We[0]&2&&($e=!0,jt.isOpen=ye[1],wt(()=>$e=!1)),Fe.$set(jt);const Tt={};We[0]&8&&(Tt.onClose=ye[57]),!ve&&We[0]&8&&(ve=!0,Tt.isOpen=ye[3],wt(()=>ve=!1)),me.$set(Tt);const It={};We[0]&2097152&&(It.value=ye[21]),!Be&&We[0]&16&&(Be=!0,It.isOpen=ye[4],wt(()=>Be=!1)),we.$set(It);const Dt={};We[0]&1024&&(Dt.title=ye[10]),We[0]&2048&&(Dt.message=ye[11]),We[0]&4096&&(Dt.placeholder=ye[12]),We[0]&8192&&(Dt.defaultValue=ye[13]),We[0]&16384&&(Dt.inputType=ye[14]),We[0]&32768&&(Dt.allowEmpty=ye[15]),We[0]&65536&&(Dt.trimValue=ye[16]),!ot&&We[0]&512&&(ot=!0,Dt.isOpen=ye[9],wt(()=>ot=!1)),Se.$set(Dt);const oe={};We[0]&262144&&(oe.title=ye[18]),We[0]&524288&&(oe.message=ye[19]),We[0]&1048576&&(oe.type=ye[20]),!vt&&We[0]&131072&&(vt=!0,oe.isOpen=ye[17],wt(()=>vt=!1)),dt.$set(oe),ye[27].isPanelOpen?Ze?Ze.p(ye,We):(Ze=Nn(ye),Ze.c(),Ze.m(e,null)):Ze&&(Ze.d(1),Ze=null),(!Ye||We[0]&33554433&&lt!==(lt="h-screen w-full flex flex-col "+ye[25]+" "+(ye[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&n(e,"class",lt)},i(ye){Ye||(Ue(ee.$$.fragment,ye),Ue(T.$$.fragment,ye),Ue(ue.$$.fragment,ye),Ue(xe.$$.fragment,ye),Ue(fe.$$.fragment,ye),Ue(Fe.$$.fragment,ye),Ue(me.$$.fragment,ye),Ue(we.$$.fragment,ye),Ue(Se.$$.fragment,ye),Ue(dt.$$.fragment,ye),Ye=!0)},o(ye){qe(ee.$$.fragment,ye),qe(T.$$.fragment,ye),qe(ue.$$.fragment,ye),qe(xe.$$.fragment,ye),qe(fe.$$.fragment,ye),qe(Fe.$$.fragment,ye),qe(me.$$.fragment,ye),qe(we.$$.fragment,ye),qe(Se.$$.fragment,ye),qe(dt.$$.fragment,ye),Ye=!1},d(ye){ye&&W(e),Xe&&Xe.d(),te&&te.d(),st(ee),ae&&ae.d(),r[53](null),st(T),He&&He.d(),st(ue),st(xe),Ve&&Ve.d(),st(fe),st(Fe),st(me),st(we),st(Se),st(dt),Ze&&Ze.d(),Ct=!1,Qe(ht)}}}function Ur(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function tf(r,e,t){let s,a,b,d,i,o,u,g,f,m,v,k;Pt(r,Zt,le=>t(49,u=le)),Pt(r,yr,le=>t(0,g=le)),Pt(r,Kt,le=>t(50,f=le)),Pt(r,Qd,le=>t(26,m=le)),Pt(r,qt,le=>t(27,v=le)),Pt(r,$d,le=>t(28,k=le));let y=!1,c=!1,p=!1,h=!1,_=!1,w=!0,L=null,x,E=!1,S="",D="",B="",R="",P="text",A=!1,j=!0,K=null,V=!1,$="",U="",M="warning",I=null,H=lr(),z=null,ee=!1,q=!1,Z=!1;function Y(le){const Le=Bn(le.theme_mode,le.theme);si(Le),t(21,H={...H,...le,theme:Le,use_system_theme:le.theme_mode==="system"}),An(H)}async function F(){if(!window.wailsBindings||typeof window.wailsBindings.GetSettings!="function"){Y({...H,theme_mode:"system"});return}try{const le=await window.wailsBindings.GetSettings(),Le={...lr(),...le,theme_mode:(le==null?void 0:le.theme_mode)||(le!=null&&le.use_system_theme?"system":(le==null?void 0:le.theme)||"dark")};Y(Le),Le.sidebar_width&&ni(Le.sidebar_width)}catch(le){console.error("Failed to load app settings:",le),Y({...lr(),theme_mode:"system"})}}async function T(le){if(Y(le),z=null,t(4,h=!1),!window.wailsBindings||typeof window.wailsBindings.UpdateSettings!="function")return;const Le={theme:H.theme,theme_mode:H.theme_mode,use_system_theme:H.use_system_theme,font_family:H.font_family,font_size:H.font_size,accent_color:H.accent_color,terminal_font_family:H.terminal_font_family,terminal_font_size:H.terminal_font_size,compact_mode:H.compact_mode,reduced_motion:H.reduced_motion,sidebar_width:u.sidebarWidth};try{await window.wailsBindings.UpdateSettings(Le)}catch(Pe){console.error("Failed to update app settings:",Pe)}}function Q(le){const Le={...H,...le},Pe=Bn(Le.theme_mode,Le.theme);si(Pe),An({...Le,theme:Pe,use_system_theme:Le.theme_mode==="system"})}function G(){z={...H},t(4,h=!0)}function ne(){t(4,h=!1),z&&(Y(z),z=null)}function ie(){c||t(1,y=!y)}function ce(){c||t(5,_=!_)}function ue(){c||t(6,w=!w)}function be(le){le.preventDefault(),!(_||c)&&(ee=!0,document.addEventListener("mousemove",_e),document.addEventListener("mouseup",ke))}function _e(le){if(!ee)return;const Le=Math.max(200,Math.min(500,le.clientX));ni(Le)}function ke(){ee=!1,document.removeEventListener("mousemove",_e),document.removeEventListener("mouseup",ke)}function Ne(le){le.preventDefault(),!c&&(q=!0,document.addEventListener("mousemove",De),document.addEventListener("mouseup",xe))}function De(le){if(!q)return;const Le=window.innerWidth,Pe=Math.max(300,Math.min(600,Le-le.clientX));Jo(Pe)}function xe(){q=!1,document.removeEventListener("mousemove",De),document.removeEventListener("mouseup",xe)}function Ce(le){if(le.preventDefault(),c)return;Z=!0;const Le=document.querySelector("[data-right-panel]");if(Le){const Pe=Le.getBoundingClientRect();se=le.clientY,ge=o,fe=Pe.height}document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",Ge)}let se=0,ge=50,fe=0;function Ee(le){if(!Z)return;const Pe=(le.clientY-se)/fe*100,ft=Math.max(20,Math.min(80,ge+Pe));Yo(ft)}function Ge(){Z=!1,document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",Ge)}function at(le){if(le.type==="database"){t(6,w=!0),$e({asset:le,openPanel:!0});return}le.type==="ssh"?t(6,w=!1):t(6,w=!0),x&&typeof x.handleConnect=="function"?x.handleConnect(le):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}function Fe(le,Le){if(x&&typeof x.openDatabaseSession=="function"){x.openDatabaseSession({asset:le,sessionId:Le});return}console.error("TerminalPanel database session API not available"),alert("数据库面板未初始化")}async function $e(le){var ft,pt;const Le=(le==null?void 0:le.asset)||le,Pe=(le==null?void 0:le.openPanel)!==!1;if(Le){if(Le.dbConnected&&Le.dbSessionId&&Pe){Fe(Le,Le.dbSessionId);return}if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载");return}try{const{ConnectDatabase:At,TestDatabaseConnection:Lt,HasPassword:Je,GetPassword:gt,SavePassword:Ze}=window.wailsBindings,ye=Le.dbSessionId||`db-${Le.id}`,We=Le.host,Ut=Le.port,Qt=Le.username,Rt=((ft=Le.metadata)==null?void 0:ft.db_type)||Le.dbType||"mysql",jt=((pt=Le.metadata)==null?void 0:pt.database)||"";let Tt="";try{if(typeof Je=="function"&&await Je(Le.id))Tt=await gt(Le.id);else{if(Tt=await re({title:`连接到 ${Le.name}`,message:"请输入数据库密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Tt===null)return;Tt&&await pe("保存密码","是否保存密码以便下次自动连接？","warning")&&typeof Ze=="function"&&await Ze(Le.id,Tt)}}catch(It){if(console.error("Failed to get saved password:",It),Tt=await re({title:`连接到 ${Le.name}`,message:"请输入数据库密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Tt===null)return}if(!Tt){console.log("Database connection cancelled - no password provided");return}console.log("Connecting to database:",{sessionId:ye,host:We,port:Ut,user:Qt,dbType:Rt,database:jt}),typeof Lt=="function"&&await Lt(We,Ut,Qt,Tt,Rt,jt),await At(ye,We,Ut,Qt,Tt,Rt,jt),Yt.update(It=>It.map(Dt=>Dt.id===Le.id?{...Dt,dbConnected:!0,dbSessionId:ye}:Dt)),Pe&&Fe(Le,ye)}catch(At){console.error("Database connection failed:",At),alert(`数据库连接失败: ${At.message||At}`)}}}function re({title:le,message:Le,placeholder:Pe,inputType:ft="text",defaultValue:pt="",allowEmpty:At=!1,trimValue:Lt=!0}){return new Promise(Je=>{t(10,S=le),t(11,D=Le),t(12,B=Pe),t(13,R=pt),t(14,P=ft),t(15,A=At),t(16,j=Lt),K=Je,t(9,E=!0)})}function me(le){t(9,E=!1),K&&(K(le),K=null)}function ve(){t(9,E=!1),K&&(K(null),K=null)}function pe(le,Le,Pe="warning"){return new Promise(ft=>{t(18,$=le),t(19,U=Le),t(20,M=Pe),I=ft,t(17,V=!0)})}function we(){t(17,V=!1),I&&(I(!0),I=null)}function Be(){t(17,V=!1),I&&(I(!1),I=null)}async function Me(le){var Le,Pe;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(le);const ft={id:le.id,name:le.name,host:le.host,port:le.port,username:le.user,group:((Le=le.tags)==null?void 0:Le[0])||"默认分组",status:"online",type:le.type||"ssh",auth_type:le.auth_type,key_path:le.key_path,tags:le.tags||[],metadata:le.metadata||{},dbType:(Pe=le.metadata)==null?void 0:Pe.db_type,dbConnected:!1,dbSessionId:null};Yt.update(pt=>[...pt,ft])}catch(ft){throw console.error("Failed to add asset:",ft),ft}}function Se(le){t(7,L=le),t(2,c=!0)}async function ot(le){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Yt.update(Le=>Le.map(Pe=>{var ft,pt;return Pe.id===le.id?{...Pe,id:le.id,name:le.name,host:le.host,port:le.port,username:le.user,group:((ft=le.tags)==null?void 0:ft[0])||"默认分组",type:le.type||"ssh",auth_type:le.auth_type,key_path:le.key_path,tags:le.tags||[],metadata:le.metadata||{},dbType:(pt=le.metadata)==null?void 0:pt.db_type,dbConnected:!1,dbSessionId:null}:Pe}))}catch(Le){throw console.error("Failed to update asset:",Le),Le}}async function rt(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const le=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",le);const Le=le.map(Pe=>{var ft,pt;return{id:Pe.id,name:Pe.name,host:Pe.host,port:Pe.port,username:Pe.user,group:((ft=Pe.tags)==null?void 0:ft[0])||"默认分组",status:"online",type:Pe.type||"ssh",auth_type:Pe.auth_type,key_path:Pe.key_path,tags:Pe.tags||[],metadata:Pe.metadata||{},dbType:(pt=Pe.metadata)==null?void 0:pt.db_type,dbConnected:!1,dbSessionId:null}});Yt.set(Le)}catch(le){console.error("Failed to load connections:",le)}}ar(async()=>{let le=null,Le=null;try{const Pe=await Cr(()=>Promise.resolve().then(()=>mo),void 0);window.wailsBindings=Pe,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(Pe.default||Pe).join(", ")})),await F(),await rt(),Le=pt=>{$e(pt.detail)},window.addEventListener("database:connect",Le),le=(await Cr(()=>Promise.resolve().then(()=>oo),void 0)).EventsOn("app:show-about",()=>{t(3,p=!0)}),window.addEventListener("assets-changed",rt)}catch(Pe){console.warn("Wails bindings not available yet:",Pe.message),Y({...lr(),theme_mode:"system"})}return Ur(),window.addEventListener("resize",Ur),()=>{window.removeEventListener("resize",Ur),window.removeEventListener("assets-changed",rt),Le&&window.removeEventListener("database:connect",Le),le&&le()}});const dt=()=>qt.togglePanel(),vt=()=>{t(7,L=null),t(2,c=!0)};function ut(le){_t[le?"unshift":"push"](()=>{x=le,t(8,x)})}function lt(le){c=le,t(2,c)}function Ye(le){L=le,t(7,L)}function Ct(le){y=le,t(1,y)}const ht=()=>t(3,p=!1);function Xe(le){p=le,t(3,p)}function te(le){h=le,t(4,h)}function ae(le){E=le,t(9,E)}function je(le){V=le,t(17,V)}const He=()=>qt.setPanelOpen(!1),Ve=()=>qt.setActiveTab("active"),et=()=>qt.setActiveTab("history"),Te=async le=>{await Yr(le.id),qt.cancelTransfer(le.id)},Ke=()=>qt.clearCompleted(),Ft=le=>qt.removeTransfer(le.id);return r.$$.update=()=>{r.$$.dirty[1]&524288&&t(48,s=f?Array.from(f.values()):[]),r.$$.dirty[1]&131072&&t(47,a=s.some(le=>{var Le;return((Le=le==null?void 0:le.connection)==null?void 0:Le.type)==="ssh"})),r.$$.dirty[0]&1&&t(25,b=g==="dark"?"dark":""),r.$$.dirty[1]&65536&&(a||t(6,w=!0)),r.$$.dirty[1]&262144&&t(24,d=u.sidebarWidth),r.$$.dirty[1]&262144&&t(23,i=u.rightPanelWidth),r.$$.dirty[1]&262144&&t(22,o=u.fileManagerHeight)},[g,y,c,p,h,_,w,L,x,E,S,D,B,R,P,A,j,V,$,U,M,H,o,i,d,b,m,v,k,T,Q,G,ne,ie,ce,ue,be,Ne,Ce,at,me,ve,we,Be,Me,Se,ot,a,s,u,f,dt,vt,ut,lt,Ye,Ct,ht,Xe,te,ae,je,He,Ve,et,Te,Ke,Ft]}class rf extends Et{constructor(e){super(),xt(this,e,tf,ef,St,{},null,[-1,-1,-1,-1])}}new rf({target:document.getElementById("app")});
