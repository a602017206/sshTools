var pn=Object.defineProperty;var gn=(r,e,t)=>e in r?pn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Br=(r,e,t)=>gn(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))l(p);new MutationObserver(p=>{for(const w of p)if(w.type==="childList")for(const _ of w.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function t(p){const w={};return p.integrity&&(w.integrity=p.integrity),p.referrerPolicy&&(w.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?w.credentials="include":p.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function l(p){if(p.ep)return;p.ep=!0;const w=t(p);fetch(p.href,w)}})();const mn="modulepreload",vn=function(r){return"/"+r},Jr={},dr=function(e,t,l){let p=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),i=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));p=Promise.allSettled(t.map(o=>{if(o=vn(o),o in Jr)return;Jr[o]=!0;const f=o.endsWith(".css"),b=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${b}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":mn,f||(d.as="script"),d.crossOrigin="",d.href=o,i&&d.setAttribute("nonce",i),document.head.appendChild(d),f)return new Promise((g,y)=>{d.addEventListener("load",g),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})}))}function w(_){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=_,window.dispatchEvent(i),!i.defaultPrevented)throw _}return p.then(_=>{for(const i of _||[])i.status==="rejected"&&w(i.reason);return e().catch(w)})};function Ee(){}function bn(r,e){for(const t in e)r[t]=e[t];return r}function Us(r){return r()}function Xr(){return Object.create(null)}function Be(r){r.forEach(Us)}function Ht(r){return typeof r=="function"}function ct(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function yn(r){return Object.keys(r).length===0}function Wr(r,...e){if(r==null){for(const l of e)l(void 0);return Ee}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function wn(r){let e;return Wr(r,t=>e=t)(),e}function gt(r,e,t){r.$$.on_destroy.push(Wr(e,t))}function kn(r,e,t,l){if(r){const p=Ns(r,e,t,l);return r[0](p)}}function Ns(r,e,t,l){return r[1]&&l?bn(t.ctx.slice(),r[1](l(e))):t.ctx}function Sn(r,e,t,l){return r[2],e.dirty}function Cn(r,e,t,l,p,w){if(p){const _=Ns(e,t,l,w);r.p(_,p)}}function xn(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let l=0;l<t;l++)e[l]=-1;return e}return-1}function Yr(r){return r??""}function Ks(r){return r&&Ht(r.destroy)?r.destroy:Ee}const Vs=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(r,e){r.appendChild(e)}function V(r,e,t){r.insertBefore(e,t||null)}function K(r){r.parentNode&&r.parentNode.removeChild(r)}function Kt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function E(r){return document.createElement(r)}function oe(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function X(r){return document.createTextNode(r)}function O(){return X(" ")}function mt(){return X("")}function ee(r,e,t,l){return r.addEventListener(e,t,l),()=>r.removeEventListener(e,t,l)}function En(r){return function(e){return e.preventDefault(),r.call(this,e)}}function Zr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function s(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Ln(r){let e;return{p(...t){e=t,e.forEach(l=>r.push(l))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function jr(r){return r===""?null:+r}function Mn(r){return Array.from(r.childNodes)}function de(r,e){e=""+e,r.data!==e&&(r.data=e)}function ke(r,e){r.value=e??""}function Se(r,e,t,l){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function xr(r,e,t){for(let l=0;l<r.options.length;l+=1){const p=r.options[l];if(p.__value===e){p.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function qs(r){const e=r.querySelector(":checked");return e&&e.__value}function yr(r,e,t){r.classList.toggle(e,!!t)}function St(r,e){return new r(e)}let ur;function hr(r){ur=r}function Gs(){if(!ur)throw new Error("Function called outside component initialization");return ur}function lr(r){Gs().$$.on_mount.push(r)}function Er(r){Gs().$$.on_destroy.push(r)}const sr=[],at=[];let nr=[];const Pr=[],Js=Promise.resolve();let Hr=!1;function Xs(){Hr||(Hr=!0,Js.then(Ys))}function Sr(){return Xs(),Js}function fr(r){nr.push(r)}function wt(r){Pr.push(r)}const Ar=new Set;let rr=0;function Ys(){if(rr!==0)return;const r=ur;do{try{for(;rr<sr.length;){const e=sr[rr];rr++,hr(e),Dn(e.$$)}}catch(e){throw sr.length=0,rr=0,e}for(hr(null),sr.length=0,rr=0;at.length;)at.pop()();for(let e=0;e<nr.length;e+=1){const t=nr[e];Ar.has(t)||(Ar.add(t),t())}nr.length=0}while(sr.length);for(;Pr.length;)Pr.pop()();Hr=!1,Ar.clear(),hr(r)}function Dn(r){if(r.fragment!==null){r.update(),Be(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(fr)}}function Tn(r){const e=[],t=[];nr.forEach(l=>r.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),nr=e}const Cr=new Set;let Nt;function Ct(){Nt={r:0,c:[],p:Nt}}function xt(){Nt.r||Be(Nt.c),Nt=Nt.p}function Te(r,e){r&&r.i&&(Cr.delete(r),r.i(e))}function Ae(r,e,t,l){if(r&&r.o){if(Cr.has(r))return;Cr.add(r),Nt.c.push(()=>{Cr.delete(r),l&&(t&&r.d(1),l())}),r.o(e)}else l&&l()}function We(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function It(r,e){r.d(1),e.delete(r.key)}function Bn(r,e){Ae(r,1,1,()=>{e.delete(r.key)})}function Tt(r,e,t,l,p,w,_,i,o,f,b,d){let g=r.length,y=w.length,k=g;const v={};for(;k--;)v[r[k].key]=k;const n=[],u=new Map,a=new Map,h=[];for(k=y;k--;){const M=d(p,w,k),S=t(M);let L=_.get(S);L?h.push(()=>L.p(M,e)):(L=f(S,M),L.c()),u.set(S,n[k]=L),S in v&&a.set(S,Math.abs(k-v[S]))}const m=new Set,C=new Set;function x(M){Te(M,1),M.m(i,b),_.set(M.key,M),b=M.first,y--}for(;g&&y;){const M=n[y-1],S=r[g-1],L=M.key,B=S.key;M===S?(b=M.first,g--,y--):u.has(B)?!_.has(L)||m.has(L)?x(M):C.has(B)?g--:a.get(L)>a.get(B)?(C.add(L),x(M)):(m.add(B),g--):(o(S,_),g--)}for(;g--;){const M=r[g];u.has(M.key)||o(M,_)}for(;y;)x(n[y-1]);return Be(h),n}function kt(r,e,t){const l=r.$$.props[e];l!==void 0&&(r.$$.bound[l]=t,t(r.$$.ctx[l]))}function Ve(r){r&&r.c()}function Ne(r,e,t){const{fragment:l,after_update:p}=r.$$;l&&l.m(e,t),fr(()=>{const w=r.$$.on_mount.map(Us).filter(Ht);r.$$.on_destroy?r.$$.on_destroy.push(...w):Be(w),r.$$.on_mount=[]}),p.forEach(fr)}function Ke(r,e){const t=r.$$;t.fragment!==null&&(Tn(t.after_update),Be(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function An(r,e){r.$$.dirty[0]===-1&&(sr.push(r),Xs(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function dt(r,e,t,l,p,w,_=null,i=[-1]){const o=ur;hr(r);const f=r.$$={fragment:null,ctx:[],props:w,update:Ee,not_equal:p,bound:Xr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Xr(),dirty:i,skip_bound:!1,root:e.target||o.$$.root};_&&_(f.root);let b=!1;if(f.ctx=t?t(r,e.props||{},(d,g,...y)=>{const k=y.length?y[0]:g;return f.ctx&&p(f.ctx[d],f.ctx[d]=k)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](k),b&&An(r,d)),g}):[],f.update(),b=!0,Be(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const d=Mn(e.target);f.fragment&&f.fragment.l(d),d.forEach(K)}else f.fragment&&f.fragment.c();e.intro&&Te(r.$$.fragment),Ne(r,e.target,e.anchor),Ys()}hr(o)}class ut{constructor(){Br(this,"$$");Br(this,"$$set")}$destroy(){Ke(this,1),this.$destroy=Ee}$on(e,t){if(!Ht(t))return Ee;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const p=l.indexOf(t);p!==-1&&l.splice(p,1)}}$set(e){this.$$set&&!yn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Rn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rn);const ir=[];function On(r,e){return{subscribe:Vt(r,e).subscribe}}function Vt(r,e=Ee){let t;const l=new Set;function p(i){if(ct(r,i)&&(r=i,t)){const o=!ir.length;for(const f of l)f[1](),ir.push(f,r);if(o){for(let f=0;f<ir.length;f+=2)ir[f][0](ir[f+1]);ir.length=0}}}function w(i){p(i(r))}function _(i,o=Ee){const f=[i,o];return l.add(f),l.size===1&&(t=e(p,w)||Ee),i(r),()=>{l.delete(f),l.size===0&&t&&(t(),t=null)}}return{set:p,update:w,subscribe:_}}function Bt(r,e,t){const l=!Array.isArray(r),p=l?[r]:r;if(!p.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const w=e.length<2;return On(t,(_,i)=>{let o=!1;const f=[];let b=0,d=Ee;const g=()=>{if(b)return;d();const k=e(l?f[0]:f,_,i);w?_(k):d=Ht(k)?k:Ee},y=p.map((k,v)=>Wr(k,n=>{f[v]=n,b&=~(1<<v),o&&g()},()=>{b|=1<<v}));return o=!0,g(),function(){Be(y),d(),o=!1}})}const Ot=Vt([]);Bt(Ot,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}));const Dt=Vt(new Map),Ut=Vt(null),Zs="ssh-tools-theme";function Pn(){if(typeof window>"u")return null;try{return localStorage.getItem(Zs)}catch{return null}}function Hn(r){if(!(typeof window>"u"))try{localStorage.setItem(Zs,r)}catch{}}const In=Pn(),Fn=In||"light",or=Vt(Fn);function Rr(r){or.set(r),Hn(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Wn(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const jn={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},zn=Wn(),Et=Vt({...jn,...zn});Et.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});Bt(Et,r=>r.isDevToolsOpen);Bt(Et,r=>r.isFileManagerOpen);Bt(Et,r=>r.isMonitorOpen);Bt(Et,r=>r.sidebarWidth);Bt(Et,r=>r.rightPanelWidth);Bt(Et,r=>r.fileManagerHeight);function Un(r){Et.update(e=>({...e,sidebarWidth:r}))}function Nn(r){Et.update(e=>({...e,rightPanelWidth:r}))}function Kn(r){Et.update(e=>({...e,fileManagerHeight:r}))}function Qr(r,e,t){const l=r.slice();return l[17]=e[t][0],l[18]=e[t][1],l}function $r(r,e,t){const l=r.slice();return l[21]=e[t],l}function Vn(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function qn(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function ei(r){let e,t=[],l=new Map,p=We(r[18]);const w=_=>_[21].id;for(let _=0;_<p.length;_+=1){let i=$r(r,p,_),o=w(i);l.set(o,t[_]=ri(o,i))}return{c(){e=E("div");for(let _=0;_<t.length;_+=1)t[_].c();s(e,"class","ml-4")},m(_,i){V(_,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(_,i){i&165&&(p=We(_[18]),t=Tt(t,i,w,1,_,p,l,e,It,ri,null,$r))},d(_){_&&K(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ti(r){let e,t=r[21].dbType.toUpperCase()+"",l;return{c(){e=X("• "),l=X(t)},m(p,w){V(p,e,w),V(p,l,w)},p(p,w){w&32&&t!==(t=p[21].dbType.toUpperCase()+"")&&de(l,t)},d(p){p&&(K(e),K(l))}}}function ri(r,e){let t,l,p=si(e[21].type)+"",w,_,i,o,f=e[21].name+"",b,d,g,y,k,v,n=e[21].username+"",u,a,h=e[21].host+"",m,C,x=e[21].port+"",M,S,L,B,R,P,A,U,q,J,se,Y,D=e[21].type==="database"&&e[21].dbType&&ti(e);function H(){return e[13](e[21])}function F(){return e[14](e[21])}function W(...j){return e[15](e[21],...j)}function G(){return e[16](e[21])}return{key:r,first:null,c(){t=E("div"),l=E("div"),w=O(),_=E("div"),i=E("div"),o=E("span"),b=X(f),d=O(),g=E("div"),k=O(),v=E("div"),u=X(n),a=X("@"),m=X(h),C=X(":"),M=X(x),S=O(),D&&D.c(),L=O(),B=E("div"),R=E("button"),R.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',P=O(),A=E("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',U=O(),q=E("button"),q.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',J=O(),s(l,"class","flex-shrink-0"),s(o,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),s(g,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),s(i,"class","flex items-center gap-2"),s(v,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),s(_,"class","flex-1 min-w-0"),s(R,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),s(R,"title","连接"),s(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),s(q,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),s(B,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),s(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(j,Z){V(j,t,Z),c(t,l),l.innerHTML=p,c(t,w),c(t,_),c(_,i),c(i,o),c(o,b),c(i,d),c(i,g),c(_,k),c(_,v),c(v,u),c(v,a),c(v,m),c(v,C),c(v,M),c(v,S),D&&D.m(v,null),c(t,L),c(t,B),c(B,R),c(B,P),c(B,A),c(B,U),c(B,q),c(t,J),se||(Y=[ee(R,"click",Zr(H)),ee(A,"click",Zr(F)),ee(q,"click",W),ee(t,"click",G)],se=!0)},p(j,Z){e=j,Z&32&&p!==(p=si(e[21].type)+"")&&(l.innerHTML=p),Z&32&&f!==(f=e[21].name+"")&&de(b,f),Z&32&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&s(g,"class",y),Z&32&&n!==(n=e[21].username+"")&&de(u,n),Z&32&&h!==(h=e[21].host+"")&&de(m,h),Z&32&&x!==(x=e[21].port+"")&&de(M,x),e[21].type==="database"&&e[21].dbType?D?D.p(e,Z):(D=ti(e),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},d(j){j&&K(t),D&&D.d(),se=!1,Be(Y)}}}function ii(r){let e,t,l,p,w,_,i,o,f=r[17]+"",b,d,g,y,k=r[18].length+"",v,n,u,a=r[4].has(r[17]),h,m,C;function x(R,P){return P&48&&(l=null),l==null&&(l=!!R[4].has(R[17])),l?qn:Vn}let M=x(r,-1),S=M(r);function L(){return r[12](r[17])}let B=a&&ei(r);return{c(){e=E("div"),t=E("div"),S.c(),p=O(),w=oe("svg"),_=oe("path"),i=O(),o=E("span"),b=X(f),d=O(),g=E("span"),y=X("("),v=X(k),n=X(")"),u=O(),B&&B.c(),h=O(),s(_,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(w,"class","w-4 h-4 text-amber-500"),s(w,"fill","currentColor"),s(w,"viewBox","0 0 24 24"),s(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(g,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),s(e,"class","mb-1")},m(R,P){V(R,e,P),c(e,t),S.m(t,null),c(t,p),c(t,w),c(w,_),c(t,i),c(t,o),c(o,b),c(t,d),c(t,g),c(g,y),c(g,v),c(g,n),c(e,u),B&&B.m(e,null),c(e,h),m||(C=ee(t,"click",L),m=!0)},p(R,P){r=R,M!==(M=x(r,P))&&(S.d(1),S=M(r),S&&(S.c(),S.m(t,p))),P&32&&f!==(f=r[17]+"")&&de(b,f),P&32&&k!==(k=r[18].length+"")&&de(v,k),P&48&&(a=r[4].has(r[17])),a?B?B.p(r,P):(B=ei(r),B.c(),B.m(e,h)):B&&(B.d(1),B=null)},d(R){R&&K(e),S.d(),B&&B.d(),m=!1,C()}}}function Gn(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u=We(Object.entries(r[5])),a=[];for(let h=0;h<u.length;h+=1)a[h]=ii(Qr(r,u,h));return{c(){e=E("div"),t=E("div"),l=E("div"),p=E("h2"),p.textContent="服务器资产",w=O(),_=E("button"),_.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',i=O(),o=E("div"),f=oe("svg"),b=oe("path"),d=O(),g=E("input"),y=O(),k=E("div");for(let h=0;h<a.length;h+=1)a[h].c();s(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(_,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(l,"class","flex items-center justify-between mb-3"),s(b,"stroke-linecap","round"),s(b,"stroke-linejoin","round"),s(b,"stroke-width","2"),s(b,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(f,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),s(f,"fill","none"),s(f,"stroke","currentColor"),s(f,"viewBox","0 0 24 24"),s(g,"type","text"),s(g,"placeholder","搜索服务器..."),s(g,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(o,"class","relative"),s(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),s(k,"class","flex-1 overflow-y-auto scrollbar-thin"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(h,m){V(h,e,m),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(t,i),c(t,o),c(o,f),c(f,b),c(o,d),c(o,g),ke(g,r[3]),c(e,y),c(e,k);for(let C=0;C<a.length;C+=1)a[C]&&a[C].m(k,null);v||(n=[ee(_,"click",function(){Ht(r[1])&&r[1].apply(this,arguments)}),ee(g,"input",r[11])],v=!0)},p(h,[m]){if(r=h,m&8&&g.value!==r[3]&&ke(g,r[3]),m&245){u=We(Object.entries(r[5]));let C;for(C=0;C<u.length;C+=1){const x=Qr(r,u,C);a[C]?a[C].p(x,m):(a[C]=ii(x),a[C].c(),a[C].m(k,null))}for(;C<a.length;C+=1)a[C].d(1);a.length=u.length}},i:Ee,o:Ee,d(h){h&&K(e),Kt(a,h),v=!1,Be(n)}}}function si(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function Jn(r,e,t){let l,p,w;gt(r,Ot,m=>t(10,w=m));let{onConnect:_}=e,{onAddClick:i}=e,{onDelete:o}=e,{onEdit:f}=e,b="",d=new Set(["生产环境","开发环境"]);function g(m){const C=new Set(d);C.has(m)?C.delete(m):C.add(m),t(4,d=C)}async function y(m,C){if(C.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Ot.update(x=>x.filter(M=>M.id!==m.id));return}if(confirm(`确定要删除连接 "${m.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(m.id),Ot.update(x=>x.filter(M=>M.id!==m.id))}catch(x){console.error("Failed to delete asset:",x)}}function k(){b=this.value,t(3,b)}const v=m=>g(m),n=m=>_(m),u=m=>f(m),a=(m,C)=>y(m,C),h=m=>_(m);return r.$$set=m=>{"onConnect"in m&&t(0,_=m.onConnect),"onAddClick"in m&&t(1,i=m.onAddClick),"onDelete"in m&&t(8,o=m.onDelete),"onEdit"in m&&t(2,f=m.onEdit)},r.$$.update=()=>{r.$$.dirty&1032&&t(9,l=w.filter(m=>{const C=b.toLowerCase();return m.name.toLowerCase().includes(C)||m.host.toLowerCase().includes(C)||m.group.toLowerCase().includes(C)||m.username.toLowerCase().includes(C)})),r.$$.dirty&512&&t(5,p=l.reduce((m,C)=>(m[C.group]||(m[C.group]=[]),m[C.group].push(C),m),{}))},[_,i,f,b,d,p,g,y,o,l,w,k,v,n,u,a,h]}class Xn extends ut{constructor(e){super(),dt(this,e,Jn,Gn,ct,{onConnect:0,onAddClick:1,onDelete:8,onEdit:2})}}var Qs={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(globalThis,()=>(()=>{var t={4567:function(_,i,o){var f=this&&this.__decorate||function(a,h,m,C){var x,M=arguments.length,S=M<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,h,m,C);else for(var L=a.length-1;L>=0;L--)(x=a[L])&&(S=(M<3?x(S):M>3?x(h,m,S):x(h,m))||S);return M>3&&S&&Object.defineProperty(h,m,S),S},b=this&&this.__param||function(a,h){return function(m,C){h(m,C,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const d=o(9042),g=o(9924),y=o(844),k=o(4725),v=o(2585),n=o(3656);let u=i.AccessibilityManager=class extends y.Disposable{constructor(a,h,m,C){super(),this._terminal=a,this._coreBrowserService=m,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(x=>this._handleResize(x.rows))),this.register(this._terminal.onRender(x=>this._refreshRows(x.start,x.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(x=>this._handleChar(x))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(x=>this._handleTab(x))),this.register(this._terminal.onKey(x=>this._handleKey(x.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let h=0;h<a;h++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(a){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(a)||this._charsToConsume.push(a)}_refreshRows(a,h){this._liveRegionDebouncer.refresh(a,h,this._terminal.rows)}_renderRows(a,h){const m=this._terminal.buffer,C=m.lines.length.toString();for(let x=a;x<=h;x++){const M=m.lines.get(m.ydisp+x),S=[],L=(M==null?void 0:M.translateToString(!0,void 0,void 0,S))||"",B=(m.ydisp+x+1).toString(),R=this._rowElements[x];R&&(L.length===0?(R.innerText=" ",this._rowColumns.set(R,[0,1])):(R.textContent=L,this._rowColumns.set(R,S)),R.setAttribute("aria-posinset",B),R.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,h){const m=a.target,C=this._rowElements[h===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==C)return;let x,M;if(h===0?(x=m,M=this._rowElements.pop(),this._rowContainer.removeChild(M)):(x=this._rowElements.shift(),M=m,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),M.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleSelectionChange(){var L;if(this._rowElements.length===0)return;const a=document.getSelection();if(!a)return;if(a.isCollapsed)return void(this._rowContainer.contains(a.anchorNode)&&this._terminal.clearSelection());if(!a.anchorNode||!a.focusNode)return void console.error("anchorNode and/or focusNode are null");let h={node:a.anchorNode,offset:a.anchorOffset},m={node:a.focusNode,offset:a.focusOffset};if((h.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||h.node===m.node&&h.offset>m.offset)&&([h,m]=[m,h]),h.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(h={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(h.node))return;const C=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:C,offset:((L=C.textContent)==null?void 0:L.length)??0}),!this._rowContainer.contains(m.node))return;const x=({node:B,offset:R})=>{const P=B instanceof Text?B.parentNode:B;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const U=this._rowColumns.get(P);if(!U)return console.warn("columns is null. Race condition?"),null;let q=R<U.length?U[R]:U.slice(-1)[0]+1;return q>=this._terminal.cols&&(++A,q=0),{row:A,column:q}},M=x(h),S=x(m);if(M&&S){if(M.row>S.row||M.row===S.row&&M.column>=S.column)throw new Error("invalid range");this._terminal.select(M.column,M.row,(S.row-M.row)*this._terminal.cols-M.column+S.column)}}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=this._coreBrowserService.mainDocument.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=u=f([b(1,v.IInstantiationService),b(2,k.ICoreBrowserService),b(3,k.IRenderService)],u)},3614:(_,i)=>{function o(g){return g.replace(/\r?\n/g,"\r")}function f(g,y){return y?"\x1B[200~"+g+"\x1B[201~":g}function b(g,y,k,v){g=f(g=o(g),k.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(g,!0),y.value=""}function d(g,y,k){const v=k.getBoundingClientRect(),n=g.clientX-v.left-10,u=g.clientY-v.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${n}px`,y.style.top=`${u}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(g,y){g.clipboardData&&g.clipboardData.setData("text/plain",y.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,y,k,v){g.stopPropagation(),g.clipboardData&&b(g.clipboardData.getData("text/plain"),y,k,v)},i.paste=b,i.moveTextAreaUnderMouseCursor=d,i.rightClickHandler=function(g,y,k,v,n){d(g,y,k),n&&v.rightClickSelect(g),y.value=v.selectionText,y.select()}},7239:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(b,d,g){this._css.set(b,d,g)}getCss(b,d){return this._css.get(b,d)}setColor(b,d,g){this._color.set(b,d,g)}getColor(b,d){return this._color.get(b,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,b,d){o.addEventListener(f,b,d);let g=!1;return{dispose:()=>{g||(g=!0,o.removeEventListener(f,b,d))}}}},3551:function(_,i,o){var f=this&&this.__decorate||function(u,a,h,m){var C,x=arguments.length,M=x<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(u,a,h,m);else for(var S=u.length-1;S>=0;S--)(C=u[S])&&(M=(x<3?C(M):x>3?C(a,h,M):C(a,h))||M);return x>3&&M&&Object.defineProperty(a,h,M),M},b=this&&this.__param||function(u,a){return function(h,m){a(h,m,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const d=o(3656),g=o(8460),y=o(844),k=o(2585),v=o(4725);let n=i.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(u,a,h,m,C){super(),this._element=u,this._mouseService=a,this._renderService=h,this._bufferService=m,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{var x;this._lastMouseEvent=void 0,(x=this._activeProviderReplies)==null||x.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(u){this._lastMouseEvent=u;const a=this._positionFromMouseEvent(u,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const h=u.composedPath();for(let m=0;m<h.length;m++){const C=h[m];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(u){if(this._activeLine!==u.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(u,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))}_askForLink(u,a){var m,C;this._activeProviderReplies&&a||((m=this._activeProviderReplies)==null||m.forEach(x=>{x==null||x.forEach(M=>{M.link.dispose&&M.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=u.y);let h=!1;for(const[x,M]of this._linkProviderService.linkProviders.entries())a?(C=this._activeProviderReplies)!=null&&C.get(x)&&(h=this._checkLinkProviderResult(x,u,h)):M.provideLinks(u.y,S=>{var B,R;if(this._isMouseOut)return;const L=S==null?void 0:S.map(P=>({link:P}));(B=this._activeProviderReplies)==null||B.set(x,L),h=this._checkLinkProviderResult(x,u,h),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(u.y,this._activeProviderReplies)})}_removeIntersectingLinks(u,a){const h=new Set;for(let m=0;m<a.size;m++){const C=a.get(m);if(C)for(let x=0;x<C.length;x++){const M=C[x],S=M.link.range.start.y<u?0:M.link.range.start.x,L=M.link.range.end.y>u?this._bufferService.cols:M.link.range.end.x;for(let B=S;B<=L;B++){if(h.has(B)){C.splice(x--,1);break}h.add(B)}}}}_checkLinkProviderResult(u,a,h){var x;if(!this._activeProviderReplies)return h;const m=this._activeProviderReplies.get(u);let C=!1;for(let M=0;M<u;M++)this._activeProviderReplies.has(M)&&!this._activeProviderReplies.get(M)||(C=!0);if(!C&&m){const M=m.find(S=>this._linkAtPosition(S.link,a));M&&(h=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!h)for(let M=0;M<this._activeProviderReplies.size;M++){const S=(x=this._activeProviderReplies.get(M))==null?void 0:x.find(L=>this._linkAtPosition(L.link,a));if(S){h=!0,this._handleNewLink(S);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(u){if(!this._currentLink)return;const a=this._positionFromMouseEvent(u,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(u,this._currentLink.link.text)}_clearCurrentLink(u,a){this._currentLink&&this._lastMouseEvent&&(!u||!a||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(u){if(!this._lastMouseEvent)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(u.link,a)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:u.link.decorations===void 0||u.link.decorations.underline,pointerCursor:u.link.decorations===void 0||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:()=>{var h,m;return(m=(h=this._currentLink)==null?void 0:h.state)==null?void 0:m.decorations.pointerCursor},set:h=>{var m;(m=this._currentLink)!=null&&m.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",h))}},underline:{get:()=>{var h,m;return(m=(h=this._currentLink)==null?void 0:h.state)==null?void 0:m.decorations.underline},set:h=>{var m,C,x;(m=this._currentLink)!=null&&m.state&&((x=(C=this._currentLink)==null?void 0:C.state)==null?void 0:x.decorations.underline)!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(u.link,h))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;const m=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(m,C),this._lastMouseEvent)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}})))}_linkHover(u,a,h){var m;(m=this._currentLink)!=null&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(h,a.text)}_fireUnderlineEvent(u,a){const h=u.range,m=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-m-1,h.end.x,h.end.y-m-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(u,a,h){var m;(m=this._currentLink)!=null&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(h,a.text)}_linkAtPosition(u,a){const h=u.range.start.y*this._bufferService.cols+u.range.start.x,m=u.range.end.y*this._bufferService.cols+u.range.end.x,C=a.y*this._bufferService.cols+a.x;return h<=C&&C<=m}_positionFromMouseEvent(u,a,h){const m=h.getCoords(u,a,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(u,a,h,m,C){return{x1:u,y1:a,x2:h,y2:m,cols:this._bufferService.cols,fg:C}}};i.Linkifier=n=f([b(1,v.IMouseService),b(2,v.IRenderService),b(3,k.IBufferService),b(4,v.ILinkProviderService)],n)},9042:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(_,i,o){var f=this&&this.__decorate||function(v,n,u,a){var h,m=arguments.length,C=m<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,u):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,n,u,a);else for(var x=v.length-1;x>=0;x--)(h=v[x])&&(C=(m<3?h(C):m>3?h(n,u,C):h(n,u))||C);return m>3&&C&&Object.defineProperty(n,u,C),C},b=this&&this.__param||function(v,n){return function(u,a){n(u,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const d=o(511),g=o(2585);let y=i.OscLinkProvider=class{constructor(v,n,u){this._bufferService=v,this._optionsService=n,this._oscLinkService=u}provideLinks(v,n){var L;const u=this._bufferService.buffer.lines.get(v-1);if(!u)return void n(void 0);const a=[],h=this._optionsService.rawOptions.linkHandler,m=new d.CellData,C=u.getTrimmedLength();let x=-1,M=-1,S=!1;for(let B=0;B<C;B++)if(M!==-1||u.hasContent(B)){if(u.loadCell(B,m),m.hasExtendedAttrs()&&m.extended.urlId){if(M===-1){M=B,x=m.extended.urlId;continue}S=m.extended.urlId!==x}else M!==-1&&(S=!0);if(S||M!==-1&&B===C-1){const R=(L=this._oscLinkService.getLinkData(x))==null?void 0:L.uri;if(R){const P={start:{x:M+1,y:v},end:{x:B+(S||B!==C-1?0:1),y:v}};let A=!1;if(!(h!=null&&h.allowNonHttpProtocols))try{const U=new URL(R);["http:","https:"].includes(U.protocol)||(A=!0)}catch{A=!0}A||a.push({text:R,range:P,activate:(U,q)=>h?h.activate(U,q,P):k(0,q),hover:(U,q)=>{var J;return(J=h==null?void 0:h.hover)==null?void 0:J.call(h,U,q,P)},leave:(U,q)=>{var J;return(J=h==null?void 0:h.leave)==null?void 0:J.call(h,U,q,P)}})}S=!1,m.hasExtendedAttrs()&&m.extended.urlId?(M=B,x=m.extended.urlId):(M=-1,x=-1)}}n(a)}};function k(v,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=y=f([b(0,g.IBufferService),b(1,g.IOptionsService),b(2,g.IOscLinkService)],y)},6193:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,b){this._rowCount=b,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),b=o(3656),d=o(3551),g=o(9042),y=o(3730),k=o(1680),v=o(3107),n=o(5744),u=o(2950),a=o(1296),h=o(428),m=o(4269),C=o(5114),x=o(8934),M=o(3230),S=o(9312),L=o(4725),B=o(6731),R=o(8055),P=o(8969),A=o(8460),U=o(844),q=o(6114),J=o(8437),se=o(2584),Y=o(7399),D=o(5941),H=o(9074),F=o(2585),W=o(5435),G=o(4567),j=o(779);class Z extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new U.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(H.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(j.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((T,$)=>this.refresh(T,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(T=>this._reportWindowsOptions(T))),this.register(this._inputHandler.onColor(T=>this._handleColorEvent(T))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(T=>this._afterResize(T.cols,T.rows))),this.register((0,U.toDisposable)(()=>{var T,$;this._customKeyEventHandler=void 0,($=(T=this.element)==null?void 0:T.parentNode)==null||$.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const T of I){let $,z="";switch(T.index){case 256:$="foreground",z="10";break;case 257:$="background",z="11";break;case 258:$="cursor",z="12";break;default:$="ansi",z="4;"+T.index}switch(T.type){case 0:const N=R.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[T.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${se.C0.ESC}]${z};${(0,D.toRgbString)(N)}${se.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(Q=>Q.ansi[T.index]=R.channels.toColor(...T.color));else{const Q=$;this._themeService.modifyColors(te=>te[Q]=R.channels.toColor(...T.color))}break;case 2:this._themeService.restoreColor(T.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(se.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)==null?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(se.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(I);if(!T)return;const $=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,N=T.getWidth($),Q=this._renderService.dimensions.css.cell.width*N,te=this.buffer.y*this._renderService.dimensions.css.cell.height,ae=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ae+"px",this.textarea.style.top=te+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",T=>{this.hasSelection()&&(0,f.copyHandler)(T,this._selectionService)}));const I=T=>(0,f.handlePasteEvent)(T,this.textarea,this.coreService,this.optionsService);this.register((0,b.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,b.addDisposableDomListener)(this.element,"paste",I)),q.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",T=>{T.button===2&&(0,f.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",T=>{(0,f.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",T=>{T.button===1&&(0,f.moveTextAreaUnderMouseCursor)(T,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,b.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var $;if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),(($=this.element)==null?void 0:$.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const T=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,b.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,b.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(M.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(T);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,T=this.element;function $(Q){const te=I._mouseService.getMouseReportCoords(Q,I.screenElement);if(!te)return!1;let ae,ce;switch(Q.overrideType||Q.type){case"mousemove":ce=32,Q.buttons===void 0?(ae=3,Q.button!==void 0&&(ae=Q.button<3?Q.button:3)):ae=1&Q.buttons?0:4&Q.buttons?1:2&Q.buttons?2:3;break;case"mouseup":ce=0,ae=Q.button<3?Q.button:3;break;case"mousedown":ce=1,ae=Q.button<3?Q.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler(Q)===!1||I.viewport.getLinesScrolled(Q)===0)return!1;ce=Q.deltaY<0?0:1,ae=4;break;default:return!1}return!(ce===void 0||ae===void 0||ae>4)&&I.coreMouseService.triggerMouseEvent({col:te.col,row:te.row,x:te.x,y:te.y,button:ae,action:ce,ctrl:Q.ctrlKey,alt:Q.altKey,shift:Q.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},N={mouseup:Q=>($(Q),Q.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(Q)),wheel:Q=>($(Q),this.cancel(Q,!0)),mousedrag:Q=>{Q.buttons&&$(Q)},mousemove:Q=>{Q.buttons||$(Q)}};this.register(this.coreMouseService.onProtocolChange(Q=>{Q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Q?z.mousemove||(T.addEventListener("mousemove",N.mousemove),z.mousemove=N.mousemove):(T.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&Q?z.wheel||(T.addEventListener("wheel",N.wheel,{passive:!1}),z.wheel=N.wheel):(T.removeEventListener("wheel",z.wheel),z.wheel=null),2&Q?z.mouseup||(z.mouseup=N.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&Q?z.mousedrag||(z.mousedrag=N.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(T,"mousedown",Q=>{if(Q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Q))return $(Q),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(Q)})),this.register((0,b.addDisposableDomListener)(T,"wheel",Q=>{if(!z.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Q)===!1)return!1;if(!this.buffer.hasScrollback){const te=this.viewport.getLinesScrolled(Q);if(te===0)return;const ae=se.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Q.deltaY<0?"A":"B");let ce="";for(let le=0;le<Math.abs(te);le++)ce+=ae;return this.coreService.triggerDataEvent(ce,!0),this.cancel(Q,!0)}return this.viewport.handleWheel(Q)?this.cancel(Q):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(T,"touchstart",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Q),this.cancel(Q)},{passive:!0})),this.register((0,b.addDisposableDomListener)(T,"touchmove",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Q)?void 0:this.cancel(Q)},{passive:!1}))}refresh(I,T){var $;($=this._renderService)==null||$.refreshRows(I,T)}updateCursorStyle(I){var T;(T=this._selectionService)!=null&&T.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,T,$=0){var z;$===1?(super.scrollLines(I,T,$),this.refresh(0,this.rows-1)):(z=this.viewport)==null||z.scrollLines(I)}paste(I){(0,f.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const T=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),T}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,T,$){this._selectionService.setSelection(I,T,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)==null||I.clearSelection()}selectAll(){var I;(I=this._selectionService)==null||I.selectAll()}selectLines(I,T){var $;($=this._selectionService)==null||$.selectLines(I,T)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const T=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!T&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;T||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,Y.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),$.type===3||$.type===2){const z=this.rows-1;return this.scrollLines($.type===2?-z:z),this.cancel(I,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||($.cancel&&this.cancel(I,!0),!$.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==se.C0.ETX&&$.key!==se.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,T){const $=I.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||I.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey||I.isWindows&&T.getModifierState("AltGraph");return T.type==="keypress"?$:$&&(!T.keyCode||T.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let T;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)T=I.charCode;else if(I.which===null||I.which===void 0)T=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;T=I.which}return!(!T||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(T,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const T=I.data;return this.coreService.triggerDataEvent(T,!0),this.cancel(I),!0}return!1}resize(I,T){I!==this.cols||T!==this.rows?super.resize(I,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,T){var $,z;($=this._charSizeService)==null||$.measure(),(z=this.viewport)==null||z.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let T=1;T<this.rows;T++)this.buffer.lines.push(this.buffer.getBlankLine(J.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)==null||I.reset(),this.refresh(0,this.rows-1)}}reset(){var T,$;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)==null||T.reset(),this._decorationService.reset(),($=this.viewport)==null||$.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)==null||I.clearTextureAtlas()}_reportFocus(){var I;(I=this.element)!=null&&I.classList.contains("focus")?this.coreService.triggerDataEvent(se.C0.ESC+"[I"):this.coreService.triggerDataEvent(se.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const T=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${se.C0.ESC}[4;${$};${T}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),N=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${se.C0.ESC}[6;${N};${z}t`)}}cancel(I,T){if(this.options.cancelEvents||T)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=Z},9924:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,b){this._rowCount=b,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=d-this._lastRefreshMs,y=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(_,i,o){var f=this&&this.__decorate||function(u,a,h,m){var C,x=arguments.length,M=x<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(u,a,h,m);else for(var S=u.length-1;S>=0;S--)(C=u[S])&&(M=(x<3?C(M):x>3?C(a,h,M):C(a,h))||M);return x>3&&M&&Object.defineProperty(a,h,M),M},b=this&&this.__param||function(u,a){return function(h,m){a(h,m,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const d=o(3656),g=o(4725),y=o(8460),k=o(844),v=o(2585);let n=i.Viewport=class extends k.Disposable{constructor(u,a,h,m,C,x,M,S){super(),this._viewportElement=u,this._scrollArea=a,this._bufferService=h,this._optionsService=m,this._charSizeService=C,this._renderService=x,this._coreBrowserService=M,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,a){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&h<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const a=this._getPixelsScrolled(u);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(u,a))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let a=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(u,a){var S;let h,m="";const C=[],x=a??this._bufferService.buffer.lines.length,M=this._bufferService.buffer.lines;for(let L=u;L<x;L++){const B=M.get(L);if(!B)continue;const R=(S=M.get(L+1))==null?void 0:S.isWrapped;if(m+=B.translateToString(!R),!R||L===M.length-1){const P=document.createElement("div");P.textContent=m,C.push(P),m.length>0&&(h=P),m=""}}return{bufferElements:C,cursorElement:h}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let a=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(u,a){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&a.altKey||h==="ctrl"&&a.ctrlKey||h==="shift"&&a.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const a=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(u,a))}};i.Viewport=n=f([b(2,v.IBufferService),b(3,v.IOptionsService),b(4,g.ICharSizeService),b(5,g.IRenderService),b(6,g.ICoreBrowserService),b(7,g.IThemeService)],n)},3107:function(_,i,o){var f=this&&this.__decorate||function(v,n,u,a){var h,m=arguments.length,C=m<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,u):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,n,u,a);else for(var x=v.length-1;x>=0;x--)(h=v[x])&&(C=(m<3?h(C):m>3?h(n,u,C):h(n,u))||C);return m>3&&C&&Object.defineProperty(n,u,C),C},b=this&&this.__param||function(v,n){return function(u,a){n(u,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const d=o(4725),g=o(844),y=o(2585);let k=i.BufferDecorationRenderer=class extends g.Disposable{constructor(v,n,u,a,h){super(),this._screenElement=v,this._bufferService=n,this._coreBrowserService=u,this._decorationService=a,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var a;const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",((a=v==null?void 0:v.options)==null?void 0:a.layer)==="top"),n.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const u=v.options.x??0;return u&&u>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(v,n),n}_refreshStyle(v){const n=v.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let u=this._decorationElements.get(v);u||(u=this._createElement(v),v.element=u,this._decorationElements.set(v,u),this._container.appendChild(u),v.onDispose(()=>{this._decorationElements.delete(v),u.remove()})),u.style.top=n*this._renderService.dimensions.css.cell.height+"px",u.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(u)}}_refreshXPosition(v,n=v.element){if(!n)return;const u=v.options.x??0;(v.options.anchor||"left")==="right"?n.style.right=u?u*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=u?u*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var n;(n=this._decorationElements.get(v))==null||n.remove(),this._decorationElements.delete(v),v.dispose()}};i.BufferDecorationRenderer=k=f([b(1,y.IBufferService),b(2,d.ICoreBrowserService),b(3,y.IDecorationService),b(4,d.IRenderService)],k)},5871:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,b){return f>=o.startBufferLine-this._linePadding[b||"full"]&&f<=o.endBufferLine+this._linePadding[b||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(_,i,o){var f=this&&this.__decorate||function(h,m,C,x){var M,S=arguments.length,L=S<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,m,C,x);else for(var B=h.length-1;B>=0;B--)(M=h[B])&&(L=(S<3?M(L):S>3?M(m,C,L):M(m,C))||L);return S>3&&L&&Object.defineProperty(m,C,L),L},b=this&&this.__param||function(h,m){return function(C,x){m(C,x,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const d=o(5871),g=o(4725),y=o(844),k=o(2585),v={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let a=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,m,C,x,M,S,L){var R;super(),this._viewportElement=h,this._screenElement=m,this._bufferService=C,this._decorationService=x,this._renderService=M,this._optionsService=S,this._coreBrowserService=L,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const h=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=h,n.center=m,n.right=h,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=n.left,u.right=n.left+n.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const h=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowserService.dpr);v.left=m,v.center=m,v.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const h=this._colorZoneStore.zones;for(const m of h)m.position!=="full"&&this._renderColorZone(m);for(const m of h)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(u[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-v[h.position||"full"]/2),n[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[h.position||"full"]))}_queueRefresh(h,m){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=a=f([b(2,k.IBufferService),b(3,k.IDecorationService),b(4,g.IRenderService),b(5,k.IOptionsService),b(6,g.ICoreBrowserService)],a)},2950:function(_,i,o){var f=this&&this.__decorate||function(v,n,u,a){var h,m=arguments.length,C=m<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,u):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,n,u,a);else for(var x=v.length-1;x>=0;x--)(h=v[x])&&(C=(m<3?h(C):m>3?h(n,u,C):h(n,u))||C);return m>3&&C&&Object.defineProperty(n,u,C),C},b=this&&this.__param||function(v,n){return function(u,a){n(u,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const d=o(4725),g=o(2585),y=o(2584);let k=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,n,u,a,h,m){this._textarea=v,this._compositionView=n,this._bufferService=u,this._optionsService=a,this._coreService=h,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,u=n.replace(v,"");this._dataAlreadySent=u,n.length>v.length?this._coreService.triggerDataEvent(u,!0):n.length<v.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):n.length===v.length&&n!==v&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=k=f([b(2,g.IBufferService),b(3,g.IOptionsService),b(4,g.ICoreService),b(5,d.IRenderService)],k)},9806:(_,i)=>{function o(f,b,d){const g=d.getBoundingClientRect(),y=f.getComputedStyle(d),k=parseInt(y.getPropertyValue("padding-left")),v=parseInt(y.getPropertyValue("padding-top"));return[b.clientX-g.left-k,b.clientY-g.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,b,d,g,y,k,v,n,u){if(!k)return;const a=o(f,b,d);return a?(a[0]=Math.ceil((a[0]+(u?v/2:0))/v),a[1]=Math.ceil(a[1]/n),a[0]=Math.min(Math.max(a[0],1),g+(u?1:0)),a[1]=Math.min(Math.max(a[1],1),y),a):void 0}},9504:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function b(n,u,a,h){const m=n-d(n,a),C=u-d(u,a),x=Math.abs(m-C)-function(M,S,L){let B=0;const R=M-d(M,L),P=S-d(S,L);for(let A=0;A<Math.abs(R-P);A++){const U=g(M,S)==="A"?-1:1,q=L.buffer.lines.get(R+U*A);q!=null&&q.isWrapped&&B++}return B}(n,u,a);return v(x,k(g(n,u),h))}function d(n,u){let a=0,h=u.buffer.lines.get(n),m=h==null?void 0:h.isWrapped;for(;m&&n>=0&&n<u.rows;)a++,h=u.buffer.lines.get(--n),m=h==null?void 0:h.isWrapped;return a}function g(n,u){return n>u?"A":"B"}function y(n,u,a,h,m,C){let x=n,M=u,S="";for(;x!==a||M!==h;)x+=m?1:-1,m&&x>C.cols-1?(S+=C.buffer.translateBufferLineToString(M,!1,n,x),x=0,n=0,M++):!m&&x<0&&(S+=C.buffer.translateBufferLineToString(M,!1,0,n+1),x=C.cols-1,n=x,M--);return S+C.buffer.translateBufferLineToString(M,!1,n,x)}function k(n,u){const a=u?"O":"[";return f.C0.ESC+a+n}function v(n,u){n=Math.floor(n);let a="";for(let h=0;h<n;h++)a+=u;return a}i.moveToCellSequence=function(n,u,a,h){const m=a.buffer.x,C=a.buffer.y;if(!a.buffer.hasScrollback)return function(S,L,B,R,P,A){return b(L,R,P,A).length===0?"":v(y(S,L,S,L-d(L,P),!1,P).length,k("D",A))}(m,C,0,u,a,h)+b(C,u,a,h)+function(S,L,B,R,P,A){let U;U=b(L,R,P,A).length>0?R-d(R,P):L;const q=R,J=function(se,Y,D,H,F,W){let G;return G=b(D,H,F,W).length>0?H-d(H,F):Y,se<D&&G<=H||se>=D&&G<H?"C":"D"}(S,L,B,R,P,A);return v(y(S,U,B,q,J==="C",P).length,k(J,A))}(m,C,n,u,a,h);let x;if(C===u)return x=m>n?"D":"C",v(Math.abs(m-n),k(x,h));x=C>u?"D":"C";const M=Math.abs(C-u);return v(function(S,L){return L.cols-S}(C>u?n:m,a)+(M-1)*a.cols+1+((C>u?m:n)-1),k(x,h))}},1296:function(_,i,o){var f=this&&this.__decorate||function(A,U,q,J){var se,Y=arguments.length,D=Y<3?U:J===null?J=Object.getOwnPropertyDescriptor(U,q):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(A,U,q,J);else for(var H=A.length-1;H>=0;H--)(se=A[H])&&(D=(Y<3?se(D):Y>3?se(U,q,D):se(U,q))||D);return Y>3&&D&&Object.defineProperty(U,q,D),D},b=this&&this.__param||function(A,U){return function(q,J){U(q,J,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const d=o(3787),g=o(2550),y=o(2223),k=o(6171),v=o(6052),n=o(4725),u=o(8055),a=o(8460),h=o(844),m=o(2585),C="xterm-dom-renderer-owner-",x="xterm-rows",M="xterm-fg-",S="xterm-bg-",L="xterm-focus",B="xterm-selection";let R=1,P=i.DomRenderer=class extends h.Disposable{constructor(A,U,q,J,se,Y,D,H,F,W,G,j,Z){super(),this._terminal=A,this._document=U,this._element=q,this._screenElement=J,this._viewportElement=se,this._helperContainer=Y,this._linkifier2=D,this._charSizeService=F,this._optionsService=W,this._bufferService=G,this._coreBrowserService=j,this._themeService=Z,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(re=>this._injectCss(re))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(re=>this._handleLinkHover(re))),this.register(this._linkifier2.onHideLinkUnderline(re=>this._handleLinkLeave(re))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const q of this._rowElements)q.style.width=`${this.dimensions.css.canvas.width}px`,q.style.height=`${this.dimensions.css.cell.height}px`,q.style.lineHeight=`${this.dimensions.css.cell.height}px`,q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const U=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=U,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let U=`${this._terminalSelector} .${x} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;U+=`${this._terminalSelector} .${x} .xterm-dim { color: ${u.color.multiplyOpacity(A.foreground,.5).css};}`,U+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const q=`blink_underline_${this._terminalClass}`,J=`blink_bar_${this._terminalClass}`,se=`blink_block_${this._terminalClass}`;U+=`@keyframes ${q} { 50% {  border-bottom-style: hidden; }}`,U+=`@keyframes ${J} { 50% {  box-shadow: none; }}`,U+=`@keyframes ${se} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,U+=`${this._terminalSelector} .${x}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${x}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${x}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${se} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,U+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[Y,D]of A.ansi.entries())U+=`${this._terminalSelector} .${M}${Y} { color: ${D.css}; }${this._terminalSelector} .${M}${Y}.xterm-dim { color: ${u.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${S}${Y} { background-color: ${D.css}; }`;U+=`${this._terminalSelector} .${M}${y.INVERTED_DEFAULT_COLOR} { color: ${u.color.opaque(A.background).css}; }${this._terminalSelector} .${M}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${u.color.multiplyOpacity(u.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${S}${y.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=U}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,U){for(let q=this._rowElements.length;q<=U;q++){const J=this._document.createElement("div");this._rowContainer.appendChild(J),this._rowElements.push(J)}for(;this._rowElements.length>U;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,U){this._refreshRowElements(A,U),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,U,q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,U,q),this.renderRows(0,this._bufferService.rows-1),!A||!U)return;this._selectionRenderModel.update(this._terminal,A,U,q);const J=this._selectionRenderModel.viewportStartRow,se=this._selectionRenderModel.viewportEndRow,Y=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(Y>=this._bufferService.rows||D<0)return;const H=this._document.createDocumentFragment();if(q){const F=A[0]>U[0];H.appendChild(this._createSelectionElement(Y,F?U[0]:A[0],F?A[0]:U[0],D-Y+1))}else{const F=J===Y?A[0]:0,W=Y===se?U[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(Y,F,W));const G=D-Y-1;if(H.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,G)),Y!==D){const j=se===D?U[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(D,0,j))}}this._selectionContainer.appendChild(H)}_createSelectionElement(A,U,q,J=1){const se=this._document.createElement("div"),Y=U*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(q-U);return Y+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-Y),se.style.height=J*this.dimensions.css.cell.height+"px",se.style.top=A*this.dimensions.css.cell.height+"px",se.style.left=`${Y}px`,se.style.width=`${D}px`,se}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,U){const q=this._bufferService.buffer,J=q.ybase+q.y,se=Math.min(q.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,H=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=A;F<=U;F++){const W=F+q.ydisp,G=this._rowElements[F],j=q.lines.get(W);if(!G||!j)break;G.replaceChildren(...this._rowFactory.createRow(j,W,W===J,D,H,se,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,U,q,J,se,Y){q<0&&(A=0),J<0&&(U=0);const D=this._bufferService.rows-1;q=Math.max(Math.min(q,D),0),J=Math.max(Math.min(J,D),0),se=Math.min(se,this._bufferService.cols);const H=this._bufferService.buffer,F=H.ybase+H.y,W=Math.min(H.x,se-1),G=this._optionsService.rawOptions.cursorBlink,j=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=q;re<=J;++re){const I=re+H.ydisp,T=this._rowElements[re],$=H.lines.get(I);if(!T||!$)break;T.replaceChildren(...this._rowFactory.createRow($,I,I===F,j,Z,W,G,this.dimensions.css.cell.width,this._widthCache,Y?re===q?A:0:-1,Y?(re===J?U:se)-1:-1))}}};i.DomRenderer=P=f([b(7,m.IInstantiationService),b(8,n.ICharSizeService),b(9,m.IOptionsService),b(10,m.IBufferService),b(11,n.ICoreBrowserService),b(12,n.IThemeService)],P)},3787:function(_,i,o){var f=this&&this.__decorate||function(x,M,S,L){var B,R=arguments.length,P=R<3?M:L===null?L=Object.getOwnPropertyDescriptor(M,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,M,S,L);else for(var A=x.length-1;A>=0;A--)(B=x[A])&&(P=(R<3?B(P):R>3?B(M,S,P):B(M,S))||P);return R>3&&P&&Object.defineProperty(M,S,P),P},b=this&&this.__param||function(x,M){return function(S,L){M(S,L,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const d=o(2223),g=o(643),y=o(511),k=o(2585),v=o(8055),n=o(4725),u=o(4269),a=o(6171),h=o(3734);let m=i.DomRendererRowFactory=class{constructor(x,M,S,L,B,R,P){this._document=x,this._characterJoinerService=M,this._optionsService=S,this._coreBrowserService=L,this._coreService=B,this._decorationService=R,this._themeService=P,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,M,S){this._selectionStart=x,this._selectionEnd=M,this._columnSelectMode=S}createRow(x,M,S,L,B,R,P,A,U,q,J){const se=[],Y=this._characterJoinerService.getJoinedCharacters(M),D=this._themeService.colors;let H,F=x.getNoBgTrimmedLength();S&&F<R+1&&(F=R+1);let W=0,G="",j=0,Z=0,re=0,I=!1,T=0,$=!1,z=0;const N=[],Q=q!==-1&&J!==-1;for(let te=0;te<F;te++){x.loadCell(te,this._workCell);let ae=this._workCell.getWidth();if(ae===0)continue;let ce=!1,le=te,he=this._workCell;if(Y.length>0&&te===Y[0][0]){ce=!0;const xe=Y.shift();he=new u.JoinedCellData(this._workCell,x.translateToString(!0,xe[0],xe[1]),xe[1]-xe[0]),le=xe[1]-1,ae=he.getWidth()}const fe=this._isCellInSelection(te,M),ye=S&&te===R,be=Q&&te>=q&&te<=J;let ve=!1;this._decorationService.forEachDecorationAtCell(te,M,void 0,xe=>{ve=!0});let ue=he.getChars()||g.WHITESPACE_CELL_CHAR;if(ue===" "&&(he.isUnderline()||he.isOverline())&&(ue=" "),z=ae*A-U.get(ue,he.isBold(),he.isItalic()),H){if(W&&(fe&&$||!fe&&!$&&he.bg===j)&&(fe&&$&&D.selectionForeground||he.fg===Z)&&he.extended.ext===re&&be===I&&z===T&&!ye&&!ce&&!ve){he.isInvisible()?G+=g.WHITESPACE_CELL_CHAR:G+=ue,W++;continue}W&&(H.textContent=G),H=this._document.createElement("span"),W=0,G=""}else H=this._document.createElement("span");if(j=he.bg,Z=he.fg,re=he.extended.ext,I=be,T=z,$=fe,ce&&R>=te&&R<=le&&(R=te),!this._coreService.isCursorHidden&&ye&&this._coreService.isCursorInitialized){if(N.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&N.push("xterm-cursor-blink"),N.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":N.push("xterm-cursor-outline");break;case"block":N.push("xterm-cursor-block");break;case"bar":N.push("xterm-cursor-bar");break;case"underline":N.push("xterm-cursor-underline")}}if(he.isBold()&&N.push("xterm-bold"),he.isItalic()&&N.push("xterm-italic"),he.isDim()&&N.push("xterm-dim"),G=he.isInvisible()?g.WHITESPACE_CELL_CHAR:he.getChars()||g.WHITESPACE_CELL_CHAR,he.isUnderline()&&(N.push(`xterm-underline-${he.extended.underlineStyle}`),G===" "&&(G=" "),!he.isUnderlineColorDefault()))if(he.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(he.getUnderlineColor()).join(",")})`;else{let xe=he.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&he.isBold()&&xe<8&&(xe+=8),H.style.textDecorationColor=D.ansi[xe].css}he.isOverline()&&(N.push("xterm-overline"),G===" "&&(G=" ")),he.isStrikethrough()&&N.push("xterm-strikethrough"),be&&(H.style.textDecoration="underline");let ie=he.getFgColor(),_e=he.getFgColorMode(),me=he.getBgColor(),Le=he.getBgColorMode();const $e=!!he.isInverse();if($e){const xe=ie;ie=me,me=xe;const pe=_e;_e=Le,Le=pe}let qe,je,st,Ue=!1;switch(this._decorationService.forEachDecorationAtCell(te,M,void 0,xe=>{xe.options.layer!=="top"&&Ue||(xe.backgroundColorRGB&&(Le=50331648,me=xe.backgroundColorRGB.rgba>>8&16777215,qe=xe.backgroundColorRGB),xe.foregroundColorRGB&&(_e=50331648,ie=xe.foregroundColorRGB.rgba>>8&16777215,je=xe.foregroundColorRGB),Ue=xe.options.layer==="top")}),!Ue&&fe&&(qe=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,me=qe.rgba>>8&16777215,Le=50331648,Ue=!0,D.selectionForeground&&(_e=50331648,ie=D.selectionForeground.rgba>>8&16777215,je=D.selectionForeground)),Ue&&N.push("xterm-decoration-top"),Le){case 16777216:case 33554432:st=D.ansi[me],N.push(`xterm-bg-${me}`);break;case 50331648:st=v.channels.toColor(me>>16,me>>8&255,255&me),this._addStyle(H,`background-color:#${C((me>>>0).toString(16),"0",6)}`);break;default:$e?(st=D.foreground,N.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):st=D.background}switch(qe||he.isDim()&&(qe=v.color.multiplyOpacity(st,.5)),_e){case 16777216:case 33554432:he.isBold()&&ie<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ie+=8),this._applyMinimumContrast(H,st,D.ansi[ie],he,qe,void 0)||N.push(`xterm-fg-${ie}`);break;case 50331648:const xe=v.channels.toColor(ie>>16&255,ie>>8&255,255&ie);this._applyMinimumContrast(H,st,xe,he,qe,je)||this._addStyle(H,`color:#${C(ie.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,st,D.foreground,he,qe,je)||$e&&N.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}N.length&&(H.className=N.join(" "),N.length=0),ye||ce||ve?H.textContent=G:W++,z!==this.defaultSpacing&&(H.style.letterSpacing=`${z}px`),se.push(H),te=le}return H&&W&&(H.textContent=G),se}_applyMinimumContrast(x,M,S,L,B,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const P=this._getContrastCache(L);let A;if(B||R||(A=P.getColor(M.rgba,S.rgba)),A===void 0){const U=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);A=v.color.ensureContrastRatio(B||M,R||S,U),P.setColor((B||M).rgba,(R||S).rgba,A??null)}return!!A&&(this._addStyle(x,`color:${A.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,M){x.setAttribute("style",`${x.getAttribute("style")||""}${M};`)}_isCellInSelection(x,M){const S=this._selectionStart,L=this._selectionEnd;return!(!S||!L)&&(this._columnSelectMode?S[0]<=L[0]?x>=S[0]&&M>=S[1]&&x<L[0]&&M<=L[1]:x<S[0]&&M>=S[1]&&x>=L[0]&&M<=L[1]:M>S[1]&&M<L[1]||S[1]===L[1]&&M===S[1]&&x>=S[0]&&x<L[0]||S[1]<L[1]&&M===L[1]&&x<L[0]||S[1]<L[1]&&M===S[1]&&x>=S[0])}};function C(x,M,S){for(;x.length<S;)x=M+x;return x}i.DomRendererRowFactory=m=f([b(1,n.ICharacterJoinerService),b(2,k.IOptionsService),b(3,n.ICoreBrowserService),b(4,k.ICoreService),b(5,k.IDecorationService),b(6,n.IThemeService)],m)},2550:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const b=o.createElement("span");b.classList.add("xterm-char-measure-element");const d=o.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const g=o.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const y=o.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[b,d,g,y],this._container.appendChild(b),this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(y),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,b,d){o===this._font&&f===this._fontSize&&b===this._weight&&d===this._weightBold||(this._font=o,this._fontSize=f,this._weight=b,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${b}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${b}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(o,f,b){let d=0;if(!f&&!b&&o.length===1&&(d=o.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const k=this._measure(o,0);return k>0&&(this._flat[d]=k),k}let g=o;f&&(g+="B"),b&&(g+="I");let y=this._holey.get(g);if(y===void 0){let k=0;f&&(k|=1),b&&(k|=2),y=this._measure(o,k),y>0&&this._holey.set(g,y)}return y}_measure(o,f){const b=this._measureElements[f];return b.textContent=o.repeat(32),b.offsetWidth/32}}},2223:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(_,i)=>{function o(b){return 57508<=b&&b<=57558}function f(b){return b>=128512&&b<=128591||b>=127744&&b<=128511||b>=128640&&b<=128767||b>=9728&&b<=9983||b>=9984&&b<=10175||b>=65024&&b<=65039||b>=129280&&b<=129535||b>=127462&&b<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(b){if(!b)throw new Error("value must not be falsy");return b},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(b){return 57520<=b&&b<=57527},i.isEmoji=f,i.allowRescaling=function(b,d,g,y){return d===1&&g>Math.ceil(1.5*y)&&b!==void 0&&b>255&&!f(b)&&!o(b)&&!function(k){return 57344<=k&&k<=63743}(b)},i.treatGlyphAsBackgroundColor=function(b){return o(b)||function(d){return 9472<=d&&d<=9631}(b)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(b,d,g=0){return(b-(2*Math.round(d)-g))%(2*Math.round(d))}},6052:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(b,d,g,y=!1){if(this.selectionStart=d,this.selectionEnd=g,!d||!g||d[0]===g[0]&&d[1]===g[1])return void this.clear();const k=b.buffers.active.ydisp,v=d[1]-k,n=g[1]-k,u=Math.max(v,0),a=Math.min(n,b.rows-1);u>=b.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=v,this.viewportEndRow=n,this.viewportCappedStartRow=u,this.viewportCappedEndRow=a,this.startCol=d[0],this.endCol=g[0])}isCellSelected(b,d,g){return!!this.hasSelection&&(g-=b.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&g>=this.viewportCappedStartRow&&d<this.endCol&&g<=this.viewportCappedEndRow:d<this.startCol&&g>=this.viewportCappedStartRow&&d>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(_,i,o){var f=this&&this.__decorate||function(a,h,m,C){var x,M=arguments.length,S=M<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,h,m,C);else for(var L=a.length-1;L>=0;L--)(x=a[L])&&(S=(M<3?x(S):M>3?x(h,m,S):x(h,m))||S);return M>3&&S&&Object.defineProperty(h,m,S),S},b=this&&this.__param||function(a,h){return function(m,C){h(m,C,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const d=o(2585),g=o(8460),y=o(844);let k=i.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,h,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new u(this._optionsService))}catch{this._measureStrategy=this.register(new n(a,h,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};i.CharSizeService=k=f([b(2,d.IOptionsService)],k);class v extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(h,m){h!==void 0&&h>0&&m!==void 0&&m>0&&(this._result.width=h,this._result.height=m)}}class n extends v{constructor(h,m,C){super(),this._document=h,this._parentElement=m,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class u extends v{constructor(h){super(),this._optionsService=h,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const h=this._ctx.measureText("W");return this._validateAndSet(h.width,h.fontBoundingBoxAscent+h.fontBoundingBoxDescent),this._result}}},4269:function(_,i,o){var f=this&&this.__decorate||function(u,a,h,m){var C,x=arguments.length,M=x<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(u,a,h,m);else for(var S=u.length-1;S>=0;S--)(C=u[S])&&(M=(x<3?C(M):x>3?C(a,h,M):C(a,h))||M);return x>3&&M&&Object.defineProperty(a,h,M),M},b=this&&this.__param||function(u,a){return function(h,m){a(h,m,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const d=o(3734),g=o(643),y=o(511),k=o(2585);class v extends d.AttributeData{constructor(a,h,m){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let n=i.CharacterJoinerService=class $s{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(a){const h={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(h),h.id}deregister(a){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===a)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(a);if(!h||h.length===0)return[];const m=[],C=h.translateToString(!0);let x=0,M=0,S=0,L=h.getFg(0),B=h.getBg(0);for(let R=0;R<h.getTrimmedLength();R++)if(h.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==B){if(R-x>1){const P=this._getJoinedRanges(C,S,M,h,x);for(let A=0;A<P.length;A++)m.push(P[A])}x=R,S=M,L=this._workCell.fg,B=this._workCell.bg}M+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const R=this._getJoinedRanges(C,S,M,h,x);for(let P=0;P<R.length;P++)m.push(R[P])}return m}_getJoinedRanges(a,h,m,C,x){const M=a.substring(h,m);let S=[];try{S=this._characterJoiners[0].handler(M)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const B=this._characterJoiners[L].handler(M);for(let R=0;R<B.length;R++)$s._mergeRanges(S,B[R])}catch(B){console.error(B)}return this._stringRangesToCellRanges(S,C,x),S}_stringRangesToCellRanges(a,h,m){let C=0,x=!1,M=0,S=a[C];if(S){for(let L=m;L<this._bufferService.cols;L++){const B=h.getWidth(L),R=h.getString(L).length||g.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!x&&S[0]<=M&&(S[0]=L,x=!0),S[1]<=M){if(S[1]=L,S=a[++C],!S)break;S[0]<=M?(S[0]=L,x=!0):x=!1}M+=R}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(a,h){let m=!1;for(let C=0;C<a.length;C++){const x=a[C];if(m){if(h[1]<=x[0])return a[C-1][1]=h[1],a;if(h[1]<=x[1])return a[C-1][1]=Math.max(h[1],x[1]),a.splice(C,1),a;a.splice(C,1),C--}else{if(h[1]<=x[0])return a.splice(C,0,h),a;if(h[1]<=x[1])return x[0]=Math.min(h[0],x[0]),a;h[0]<x[1]&&(x[0]=Math.min(h[0],x[0]),m=!0)}}return m?a[a.length-1][1]=h[1]:a.push(h),a}};i.CharacterJoinerService=n=f([b(0,k.IBufferService)],n)},5114:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),b=o(8460),d=o(3656);class g extends f.Disposable{constructor(v,n,u){super(),this._textarea=v,this._window=n,this.mainDocument=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new b.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(a=>this._screenDprMonitor.setWindow(a))),this.register((0,b.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=g;class y extends f.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class b extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const y=this.linkProviders.indexOf(g);y!==-1&&this.linkProviders.splice(y,1)}}}}i.LinkProviderService=b},8934:function(_,i,o){var f=this&&this.__decorate||function(k,v,n,u){var a,h=arguments.length,m=h<3?v:u===null?u=Object.getOwnPropertyDescriptor(v,n):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(k,v,n,u);else for(var C=k.length-1;C>=0;C--)(a=k[C])&&(m=(h<3?a(m):h>3?a(v,n,m):a(v,n))||m);return h>3&&m&&Object.defineProperty(v,n,m),m},b=this&&this.__param||function(k,v){return function(n,u){v(n,u,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const d=o(4725),g=o(9806);let y=i.MouseService=class{constructor(k,v){this._renderService=k,this._charSizeService=v}getCoords(k,v,n,u,a){return(0,g.getCoords)(window,k,v,n,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(k,v){const n=(0,g.getCoordsRelativeToElement)(window,k,v);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=y=f([b(0,d.IRenderService),b(1,d.ICharSizeService)],y)},3230:function(_,i,o){var f=this&&this.__decorate||function(a,h,m,C){var x,M=arguments.length,S=M<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,h,m,C);else for(var L=a.length-1;L>=0;L--)(x=a[L])&&(S=(M<3?x(S):M>3?x(h,m,S):x(h,m))||S);return M>3&&S&&Object.defineProperty(h,m,S),S},b=this&&this.__param||function(a,h){return function(m,C){h(m,C,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const d=o(6193),g=o(4725),y=o(8460),k=o(844),v=o(7226),n=o(2585);let u=i.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(a,h,m,C,x,M,S,L){super(),this._rowCount=a,this._charSizeService=C,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((B,R)=>this._renderRows(B,R),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(M.onResize(()=>this._fullRefresh())),this.register(M.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)==null?void 0:B.clear()})),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(M.cols,M.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(M.buffer.y,M.buffer.y,!0))),this.register(L.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,h),this.register(S.onWindowChange(B=>this._registerIntersectionObserver(B,h)))}_registerIntersectionObserver(a,h){if("IntersectionObserver"in a){const m=new a.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});m.observe(h),this._observerDisposable.value=(0,k.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(a,h,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,h,this._rowCount))}_renderRows(a,h){this._renderer.value&&(a=Math.min(a,this._rowCount-1),h=Math.min(h,this._rowCount-1),this._renderer.value.renderRows(a,h),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:a,end:h}),this._onRender.fire({start:a,end:h}),this._isNextRenderRedrawOnly=!0)}resize(a,h){this._rowCount=h,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(a){this._renderer.value=a,this._renderer.value&&(this._renderer.value.onRequestRedraw(h=>this.refreshRows(h.start,h.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(a){return this._renderDebouncer.addRefreshCallback(a)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var a,h;this._renderer.value&&((h=(a=this._renderer.value).clearTextureAtlas)==null||h.call(a),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(a,h){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var m;return(m=this._renderer.value)==null?void 0:m.handleResize(a,h)}):this._renderer.value.handleResize(a,h),this._fullRefresh())}handleCharSizeChanged(){var a;(a=this._renderer.value)==null||a.handleCharSizeChanged()}handleBlur(){var a;(a=this._renderer.value)==null||a.handleBlur()}handleFocus(){var a;(a=this._renderer.value)==null||a.handleFocus()}handleSelectionChanged(a,h,m){var C;this._selectionState.start=a,this._selectionState.end=h,this._selectionState.columnSelectMode=m,(C=this._renderer.value)==null||C.handleSelectionChanged(a,h,m)}handleCursorMove(){var a;(a=this._renderer.value)==null||a.handleCursorMove()}clear(){var a;(a=this._renderer.value)==null||a.clear()}};i.RenderService=u=f([b(2,n.IOptionsService),b(3,g.ICharSizeService),b(4,n.IDecorationService),b(5,n.IBufferService),b(6,g.ICoreBrowserService),b(7,g.IThemeService)],u)},9312:function(_,i,o){var f=this&&this.__decorate||function(S,L,B,R){var P,A=arguments.length,U=A<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,B):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(S,L,B,R);else for(var q=S.length-1;q>=0;q--)(P=S[q])&&(U=(A<3?P(U):A>3?P(L,B,U):P(L,B))||U);return A>3&&U&&Object.defineProperty(L,B,U),U},b=this&&this.__param||function(S,L){return function(B,R){L(B,R,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const d=o(9806),g=o(9504),y=o(456),k=o(4725),v=o(8460),n=o(844),u=o(6114),a=o(4841),h=o(511),m=o(2585),C=" ",x=new RegExp(C,"g");let M=i.SelectionService=class extends n.Disposable{constructor(S,L,B,R,P,A,U,q,J){super(),this._element=S,this._screenElement=L,this._linkifier=B,this._bufferService=R,this._coreService=P,this._mouseService=A,this._optionsService=U,this._renderService=q,this._coreBrowserService=J,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=se=>this._handleMouseMove(se),this._mouseUpListener=se=>this._handleMouseUp(se),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(se=>this._handleTrim(se)),this.register(this._bufferService.buffers.onBufferActivate(se=>this._handleBufferActivate(se))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!S||!L||S[0]===L[0]&&S[1]===L[1])}get selectionText(){const S=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!S||!L)return"";const B=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(S[0]===L[0])return"";const P=S[0]<L[0]?S[0]:L[0],A=S[0]<L[0]?L[0]:S[0];for(let U=S[1];U<=L[1];U++){const q=B.translateBufferLineToString(U,!0,P,A);R.push(q)}}else{const P=S[1]===L[1]?L[0]:void 0;R.push(B.translateBufferLineToString(S[1],!0,S[0],P));for(let A=S[1]+1;A<=L[1]-1;A++){const U=B.lines.get(A),q=B.translateBufferLineToString(A,!0);U!=null&&U.isWrapped?R[R.length-1]+=q:R.push(q)}if(S[1]!==L[1]){const A=B.lines.get(L[1]),U=B.translateBufferLineToString(L[1],!0,0,L[0]);A&&A.isWrapped?R[R.length-1]+=U:R.push(U)}}return R.map(P=>P.replace(x," ")).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const L=this._getMouseBufferCoords(S),B=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(B&&R&&L)&&this._areCoordsInSelection(L,B,R)}isCellInSelection(S,L){const B=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!B||!R)&&this._areCoordsInSelection([S,L],B,R)}_areCoordsInSelection(S,L,B){return S[1]>L[1]&&S[1]<B[1]||L[1]===B[1]&&S[1]===L[1]&&S[0]>=L[0]&&S[0]<B[0]||L[1]<B[1]&&S[1]===B[1]&&S[0]<B[0]||L[1]<B[1]&&S[1]===L[1]&&S[0]>=L[0]}_selectWordAtCursor(S,L){var P,A;const B=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(S);return!!R&&(this._selectWordAt(R,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,L){this._model.clearSelection(),S=Math.max(S,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const L=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(S){let L=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=B?0:(L>B&&(L-=B),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(S){return u.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const L=this._getMouseBufferCoords(S);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(S){return S.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const R=B.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const L=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const R=(0,g.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,B=!(!S||!L||S[0]===L[0]&&S[1]===L[1]);B?S&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,L,B)):this._oldHasSelection&&this._fireOnSelectionChange(S,L,B)}_fireOnSelectionChange(S,L,B){this._oldSelectionStart=S,this._oldSelectionEnd=L,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(S,L){let B=L;for(let R=0;L>=R;R++){const P=S.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:P>1&&L!==R&&(B+=P-1)}return B}setSelection(S,L,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,L],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,L,B=!0,R=!0){if(S[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(S[1]);if(!A)return;const U=P.translateBufferLineToString(S[1],!1);let q=this._convertViewportColToCharacterIndex(A,S[0]),J=q;const se=S[0]-q;let Y=0,D=0,H=0,F=0;if(U.charAt(q)===" "){for(;q>0&&U.charAt(q-1)===" ";)q--;for(;J<U.length&&U.charAt(J+1)===" ";)J++}else{let j=S[0],Z=S[0];A.getWidth(j)===0&&(Y++,j--),A.getWidth(Z)===2&&(D++,Z++);const re=A.getString(Z).length;for(re>1&&(F+=re-1,J+=re-1);j>0&&q>0&&!this._isCharWordSeparator(A.loadCell(j-1,this._workCell));){A.loadCell(j-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,j--):I>1&&(H+=I-1,q-=I-1),q--,j--}for(;Z<A.length&&J+1<U.length&&!this._isCharWordSeparator(A.loadCell(Z+1,this._workCell));){A.loadCell(Z+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,Z++):I>1&&(F+=I-1,J+=I-1),J++,Z++}}J++;let W=q+se-Y+H,G=Math.min(this._bufferService.cols,J-q+Y+D-H-F);if(L||U.slice(q,J).trim()!==""){if(B&&W===0&&A.getCodePoint(0)!==32){const j=P.lines.get(S[1]-1);if(j&&A.isWrapped&&j.getCodePoint(this._bufferService.cols-1)!==32){const Z=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(Z){const re=this._bufferService.cols-Z.start;W-=re,G+=re}}}if(R&&W+G===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const j=P.lines.get(S[1]+1);if(j!=null&&j.isWrapped&&j.getCodePoint(0)!==32){const Z=this._getWordAt([0,S[1]+1],!1,!1,!0);Z&&(G+=Z.length)}}return{start:W,length:G}}}_selectWordAt(S,L){const B=this._getWordAt(S,L);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[B.start,S[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(S){const L=this._getWordAt(S,!0);if(L){let B=S[1];for(;L.start<0;)L.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,B]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const L=this._bufferService.buffer.getWrappedRangeForLine(S),B={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(B,this._bufferService.cols)}};i.SelectionService=M=f([b(3,m.IBufferService),b(4,m.ICoreService),b(5,k.IMouseService),b(6,m.IOptionsService),b(7,k.IRenderService),b(8,k.ICoreBrowserService)],M)},4725:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(_,i,o){var f=this&&this.__decorate||function(M,S,L,B){var R,P=arguments.length,A=P<3?S:B===null?B=Object.getOwnPropertyDescriptor(S,L):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(M,S,L,B);else for(var U=M.length-1;U>=0;U--)(R=M[U])&&(A=(P<3?R(A):P>3?R(S,L,A):R(S,L))||A);return P>3&&A&&Object.defineProperty(S,L,A),A},b=this&&this.__param||function(M,S){return function(L,B){S(L,B,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const d=o(7239),g=o(8055),y=o(8460),k=o(844),v=o(2585),n=g.css.toColor("#ffffff"),u=g.css.toColor("#000000"),a=g.css.toColor("#ffffff"),h=g.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const M=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let L=0;L<216;L++){const B=S[L/36%6|0],R=S[L/6%6|0],P=S[L%6];M.push({css:g.channels.toCss(B,R,P),rgba:g.channels.toRgba(B,R,P)})}for(let L=0;L<24;L++){const B=8+10*L;M.push({css:g.channels.toCss(B,B,B),rgba:g.channels.toRgba(B,B,B)})}return M})());let C=i.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(M){super(),this._optionsService=M,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:u,cursor:a,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:g.color.blend(u,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:g.color.blend(u,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(M={}){const S=this._colors;if(S.foreground=x(M.foreground,n),S.background=x(M.background,u),S.cursor=x(M.cursor,a),S.cursorAccent=x(M.cursorAccent,h),S.selectionBackgroundTransparent=x(M.selectionBackground,m),S.selectionBackgroundOpaque=g.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=x(M.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=g.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=M.selectionForeground?x(M.selectionForeground,g.NULL_COLOR):void 0,S.selectionForeground===g.NULL_COLOR&&(S.selectionForeground=void 0),g.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=g.color.opacity(S.selectionBackgroundTransparent,.3)),g.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=g.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=x(M.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=x(M.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=x(M.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=x(M.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=x(M.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=x(M.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=x(M.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=x(M.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=x(M.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=x(M.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=x(M.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=x(M.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=x(M.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=x(M.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=x(M.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=x(M.brightWhite,i.DEFAULT_ANSI_COLORS[15]),M.extendedAnsi){const L=Math.min(S.ansi.length-16,M.extendedAnsi.length);for(let B=0;B<L;B++)S.ansi[B+16]=x(M.extendedAnsi[B],i.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(M){this._restoreColor(M),this._onChangeColors.fire(this.colors)}_restoreColor(M){if(M!==void 0)switch(M){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[M]=this._restoreColors.ansi[M]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(M){M(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(M,S){if(M!==void 0)try{return g.css.toColor(M)}catch{}return S}i.ThemeService=C=f([b(0,v.IOptionsService)],C)},6349:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),b=o(844);class d extends b.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const k=new Array(y);for(let v=0;v<Math.min(y,this.length);v++)k[v]=this._array[this._getCyclicIndex(v)];this._array=k,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let k=this._length;k<y;k++)this._array[k]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,k){this._array[this._getCyclicIndex(y)]=k}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,k,...v){if(k){for(let n=y;n<this._length-k;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+k)];this._length-=k,this.onDeleteEmitter.fire({index:y,amount:k})}for(let n=this._length-1;n>=y;n--)this._array[this._getCyclicIndex(n+v.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<v.length;n++)this._array[this._getCyclicIndex(y+n)]=v[n];if(v.length&&this.onInsertEmitter.fire({index:y,amount:v.length}),this._length+v.length>this._maxLength){const n=this._length+v.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=v.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,k,v){if(!(k<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let u=k-1;u>=0;u--)this.set(y+u+v,this.get(y+u));const n=y+k+v-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<k;n++)this.set(y+n+v,this.get(y+n))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}i.CircularList=d},1439:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,b=5){if(typeof f!="object")return f;const d=Array.isArray(f)?[]:{};for(const g in f)d[g]=b<=1?f[g]:f[g]&&o(f[g],b-1);return d}},8055:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,b=0,d=0;var g,y,k,v,n;function u(h){const m=h.toString(16);return m.length<2?"0"+m:m}function a(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,C,x,M){return M!==void 0?`#${u(m)}${u(C)}${u(x)}${u(M)}`:`#${u(m)}${u(C)}${u(x)}`},h.toRgba=function(m,C,x,M=255){return(m<<24|C<<16|x<<8|M)>>>0},h.toColor=function(m,C,x,M){return{css:h.toCss(m,C,x,M),rgba:h.toRgba(m,C,x,M)}}}(g||(i.channels=g={})),function(h){function m(C,x){return d=Math.round(255*x),[o,f,b]=n.toChannels(C.rgba),{css:g.toCss(o,f,b,d),rgba:g.toRgba(o,f,b,d)}}h.blend=function(C,x){if(d=(255&x.rgba)/255,d===1)return{css:x.css,rgba:x.rgba};const M=x.rgba>>24&255,S=x.rgba>>16&255,L=x.rgba>>8&255,B=C.rgba>>24&255,R=C.rgba>>16&255,P=C.rgba>>8&255;return o=B+Math.round((M-B)*d),f=R+Math.round((S-R)*d),b=P+Math.round((L-P)*d),{css:g.toCss(o,f,b),rgba:g.toRgba(o,f,b)}},h.isOpaque=function(C){return(255&C.rgba)==255},h.ensureContrastRatio=function(C,x,M){const S=n.ensureContrastRatio(C.rgba,x.rgba,M);if(S)return g.toColor(S>>24&255,S>>16&255,S>>8&255)},h.opaque=function(C){const x=(255|C.rgba)>>>0;return[o,f,b]=n.toChannels(x),{css:g.toCss(o,f,b),rgba:x}},h.opacity=m,h.multiplyOpacity=function(C,x){return d=255&C.rgba,m(C,d*x/255)},h.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(y||(i.color=y={})),function(h){let m,C;try{const x=document.createElement("canvas");x.width=1,x.height=1;const M=x.getContext("2d",{willReadFrequently:!0});M&&(m=M,m.globalCompositeOperation="copy",C=m.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return o=parseInt(x.slice(1,2).repeat(2),16),f=parseInt(x.slice(2,3).repeat(2),16),b=parseInt(x.slice(3,4).repeat(2),16),g.toColor(o,f,b);case 5:return o=parseInt(x.slice(1,2).repeat(2),16),f=parseInt(x.slice(2,3).repeat(2),16),b=parseInt(x.slice(3,4).repeat(2),16),d=parseInt(x.slice(4,5).repeat(2),16),g.toColor(o,f,b,d);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const M=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return o=parseInt(M[1]),f=parseInt(M[2]),b=parseInt(M[3]),d=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),g.toColor(o,f,b,d);if(!m||!C)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=C,m.fillStyle=x,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,b,d]=m.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(o,f,b,d),css:x}}}(k||(i.css=k={})),function(h){function m(C,x,M){const S=C/255,L=x/255,B=M/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}h.relativeLuminance=function(C){return m(C>>16&255,C>>8&255,255&C)},h.relativeLuminance2=m}(v||(i.rgb=v={})),function(h){function m(x,M,S){const L=x>>24&255,B=x>>16&255,R=x>>8&255;let P=M>>24&255,A=M>>16&255,U=M>>8&255,q=a(v.relativeLuminance2(P,A,U),v.relativeLuminance2(L,B,R));for(;q<S&&(P>0||A>0||U>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),U-=Math.max(0,Math.ceil(.1*U)),q=a(v.relativeLuminance2(P,A,U),v.relativeLuminance2(L,B,R));return(P<<24|A<<16|U<<8|255)>>>0}function C(x,M,S){const L=x>>24&255,B=x>>16&255,R=x>>8&255;let P=M>>24&255,A=M>>16&255,U=M>>8&255,q=a(v.relativeLuminance2(P,A,U),v.relativeLuminance2(L,B,R));for(;q<S&&(P<255||A<255||U<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),U=Math.min(255,U+Math.ceil(.1*(255-U))),q=a(v.relativeLuminance2(P,A,U),v.relativeLuminance2(L,B,R));return(P<<24|A<<16|U<<8|255)>>>0}h.blend=function(x,M){if(d=(255&M)/255,d===1)return M;const S=M>>24&255,L=M>>16&255,B=M>>8&255,R=x>>24&255,P=x>>16&255,A=x>>8&255;return o=R+Math.round((S-R)*d),f=P+Math.round((L-P)*d),b=A+Math.round((B-A)*d),g.toRgba(o,f,b)},h.ensureContrastRatio=function(x,M,S){const L=v.relativeLuminance(x>>8),B=v.relativeLuminance(M>>8);if(a(L,B)<S){if(B<L){const A=m(x,M,S),U=a(L,v.relativeLuminance(A>>8));if(U<S){const q=C(x,M,S);return U>a(L,v.relativeLuminance(q>>8))?A:q}return A}const R=C(x,M,S),P=a(L,v.relativeLuminance(R>>8));if(P<S){const A=m(x,M,S);return P>a(L,v.relativeLuminance(A>>8))?R:A}return R}},h.reduceLuminance=m,h.increaseLuminance=C,h.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}}(n||(i.rgba=n={})),i.toPaddedHex=u,i.contrastRatio=a},8969:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),b=o(2585),d=o(4348),g=o(7866),y=o(744),k=o(7302),v=o(6975),n=o(8460),u=o(1753),a=o(1480),h=o(7994),m=o(9282),C=o(5435),x=o(5981),M=o(2660);let S=!1;class L extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(R=>{var P;(P=this._onScrollApi)==null||P.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const P in R)this.optionsService.options[P]=R[P]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new k.OptionsService(R)),this._instantiationService.setService(b.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(b.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(b.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(b.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(b.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(b.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(b.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(M.OscLinkService),this._instantiationService.setService(b.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,P){this._writeBuffer.write(R,P)}writeSync(R,P){this._logService.logLevel<=b.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(R,P)}input(R,P=!0){this.coreService.triggerDataEvent(R,P)}resize(R,P){isNaN(R)||isNaN(P)||(R=Math.max(R,y.MINIMUM_COLS),P=Math.max(P,y.MINIMUM_ROWS),this._bufferService.resize(R,P))}scroll(R,P=!1){this._bufferService.scroll(R,P)}scrollLines(R,P,A){this._bufferService.scrollLines(R,P,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const P=R-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(R,P){return this._inputHandler.registerEscHandler(R,P)}registerDcsHandler(R,P){return this._inputHandler.registerDcsHandler(R,P)}registerCsiHandler(R,P){return this._inputHandler.registerCsiHandler(R,P)}registerOscHandler(R,P){return this._inputHandler.registerOscHandler(R,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?R=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const P of R)P.dispose()})}}}i.CoreTerminal=L},8460:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const b=[];for(let d=0;d<this._listeners.length;d++)b.push(this._listeners[d]);for(let d=0;d<b.length;d++)b[d].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(b=>f.fire(b))},i.runAndSubscribe=function(o,f){return f(void 0),o(b=>f(b))}},5435:function(_,i,o){var f=this&&this.__decorate||function(Y,D,H,F){var W,G=arguments.length,j=G<3?D:F===null?F=Object.getOwnPropertyDescriptor(D,H):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(Y,D,H,F);else for(var Z=Y.length-1;Z>=0;Z--)(W=Y[Z])&&(j=(G<3?W(j):G>3?W(D,H,j):W(D,H))||j);return G>3&&j&&Object.defineProperty(D,H,j),j},b=this&&this.__param||function(Y,D){return function(H,F){D(H,F,Y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const d=o(2584),g=o(7116),y=o(2015),k=o(844),v=o(482),n=o(8437),u=o(8460),a=o(643),h=o(511),m=o(3734),C=o(2585),x=o(1480),M=o(6242),S=o(6351),L=o(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function P(Y,D){if(Y>24)return D.setWinLines||!1;switch(Y){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var A;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let U=0;class q extends k.Disposable{getAttrData(){return this._curAttrData}constructor(D,H,F,W,G,j,Z,re,I=new y.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=H,this._coreService=F,this._logService=W,this._optionsService=G,this._oscLinkService=j,this._coreMouseService=Z,this._unicodeService=re,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new J(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,$)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:$.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,$,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:$,data:z})}),this._parser.setDcsHandlerFallback((T,$,z)=>{$==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:$,payload:z})}),this._parser.setPrintHandler((T,$,z)=>this.print(T,$,z)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new M.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new M.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new M.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new M.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new M.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new M.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new M.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new M.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new M.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new M.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new M.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new M.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((T,$)=>this.requestStatusString(T,$)))}_preserveStack(D,H,F,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=F,this._parseStack.position=W}_logSlowResolvingAsync(D){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([D,new Promise((H,F)=>setTimeout(()=>F("#SLOW_TIMEOUT"),5e3))]).catch(H=>{if(H!=="#SLOW_TIMEOUT")throw H;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,H){let F,W=this._activeBuffer.x,G=this._activeBuffer.y,j=0;const Z=this._parseStack.paused;if(Z){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync(F),F;W=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>R&&(j=this._parseStack.position+R)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,T=>String.fromCharCode(T)).join("")}"`),typeof D=="string"?D.split("").map(T=>T.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(D.length,R))),Z||this._dirtyRowTracker.clearRange(),D.length>R)for(let T=j;T<D.length;T+=R){const $=T+R<D.length?T+R:D.length,z=typeof D=="string"?this._stringDecoder.decode(D.substring(T,$),this._parseBuffer):this._utf8Decoder.decode(D.subarray(T,$),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,z))return this._preserveStack(W,G,z,T),this._logSlowResolvingAsync(F),F}else if(!Z){const T=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,T))return this._preserveStack(W,G,T,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===W&&this._activeBuffer.y===G||this._onCursorMove.fire();const re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(D,H,F){let W,G;const j=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,$=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-H>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodepoint(this._activeBuffer.x-1,0,1,$);let N=this._parser.precedingJoinState;for(let Q=H;Q<F;++Q){if(W=D[Q],W<127&&j){const le=j[String.fromCharCode(W)];le&&(W=le.charCodeAt(0))}const te=this._unicodeService.charProperties(W,N);G=x.UnicodeService.extractWidth(te);const ae=x.UnicodeService.extractShouldJoin(te),ce=ae?x.UnicodeService.extractWidth(N):0;if(N=te,Z&&this._onA11yChar.fire((0,v.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+G-ce>re){if(I){const le=z;let he=this._activeBuffer.x-ce;for(this._activeBuffer.x=ce,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ce>0&&z instanceof n.BufferLine&&z.copyCellsFrom(le,he,0,ce,!1);he<re;)le.setCellFromCodepoint(he++,0,1,$)}else if(this._activeBuffer.x=re-1,G===2)continue}if(ae&&this._activeBuffer.x){const le=z.getWidth(this._activeBuffer.x-1)?1:2;z.addCodepointToCell(this._activeBuffer.x-le,W,G);for(let he=G-ce;--he>=0;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}else if(T&&(z.insertCells(this._activeBuffer.x,G-ce,this._activeBuffer.getNullCell($)),z.getWidth(re-1)===2&&z.setCellFromCodepoint(re-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,$)),z.setCellFromCodepoint(this._activeBuffer.x++,W,G,$),G>0)for(;--G;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}this._parser.precedingJoinState=N,this._activeBuffer.x<re&&F-H>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodepoint(this._activeBuffer.x,0,1,$),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,H){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,H):this._parser.registerCsiHandler(D,F=>!P(F.params[0],this._optionsService.rawOptions.windowOptions)||H(F))}registerDcsHandler(D,H){return this._parser.registerDcsHandler(D,new S.DcsHandler(H))}registerEscHandler(D,H){return this._parser.registerEscHandler(D,H)}registerOscHandler(D,H){return this._parser.registerOscHandler(D,new M.OscHandler(H))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,H){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=D,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+H)}cursorUp(D){const H=this._activeBuffer.y-this._activeBuffer.scrollTop;return H>=0?this._moveCursor(0,-Math.min(H,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return H>=0?this._moveCursor(0,Math.min(H,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const H=D.params[0];return H===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:H===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=D.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=D.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const H=D.params[0];return H===1&&(this._curAttrData.bg|=536870912),H!==2&&H!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,H,F,W=!1,G=!1){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);j.replaceCells(H,F,this._activeBuffer.getNullCell(this._eraseAttrData()),G),W&&(j.isWrapped=!1)}_resetBufferLine(D,H=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),H),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),F.isWrapped=!1)}eraseInDisplay(D,H=!1){let F;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);F<this._bufferService.rows;F++)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,H),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(D,H=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,H);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,H)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let H=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;H--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let H=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;H--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let H=D.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let H=D.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const H=this._parser.precedingJoinState;if(!H)return!0;const F=D.params[0]||1,W=x.UnicodeService.extractWidth(H),G=this._activeBuffer.x-W,j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(G),Z=new Uint32Array(j.length*F);let re=0;for(let T=0;T<j.length;){const $=j.codePointAt(T)||0;Z[re++]=$,T+=$>65535?2:1}let I=re;for(let T=1;T<F;++T)Z.copyWithin(I,0,re),I+=re;return this.print(Z,0,I),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[H]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,H){const F=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:G}=this._coreMouseService,j=this._coreService,{buffers:Z,cols:re}=this._bufferService,{active:I,alt:T}=Z,$=this._optionsService.rawOptions,z=ae=>ae?1:2,N=D.params[0];return Q=N,te=H?N===2?4:N===4?z(j.modes.insertMode):N===12?3:N===20?z($.convertEol):0:N===1?z(F.applicationCursorKeys):N===3?$.windowOptions.setWinLines?re===80?2:re===132?1:0:0:N===6?z(F.origin):N===7?z(F.wraparound):N===8?3:N===9?z(W==="X10"):N===12?z($.cursorBlink):N===25?z(!j.isCursorHidden):N===45?z(F.reverseWraparound):N===66?z(F.applicationKeypad):N===67?4:N===1e3?z(W==="VT200"):N===1002?z(W==="DRAG"):N===1003?z(W==="ANY"):N===1004?z(F.sendFocus):N===1005?4:N===1006?z(G==="SGR"):N===1015?4:N===1016?z(G==="SGR_PIXELS"):N===1048?1:N===47||N===1047||N===1049?z(I===T):N===2004?z(F.bracketedPasteMode):0,j.triggerDataEvent(`${d.C0.ESC}[${H?"":"?"}${Q};${te}$y`),!0;var Q,te}_updateAttrColor(D,H,F,W,G){return H===2?(D|=50331648,D&=-16777216,D|=m.AttributeData.fromColorRGB([F,W,G])):H===5&&(D&=-50331904,D|=33554432|255&F),D}_extractColor(D,H,F){const W=[0,0,-1,0,0,0];let G=0,j=0;do{if(W[j+G]=D.params[H+j],D.hasSubParams(H+j)){const Z=D.getSubParams(H+j);let re=0;do W[1]===5&&(G=1),W[j+re+1+G]=Z[re];while(++re<Z.length&&re+j+1+G<W.length);break}if(W[1]===5&&j+G>=2||W[1]===2&&j+G>=5)break;W[1]&&(G=1)}while(++j+H<D.length&&j+G<W.length);for(let Z=2;Z<W.length;++Z)W[Z]===-1&&(W[Z]=0);switch(W[0]){case 38:F.fg=this._updateAttrColor(F.fg,W[1],W[3],W[4],W[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,W[1],W[3],W[4],W[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,W[1],W[3],W[4],W[5])}return j}_processUnderline(D,H){H.extended=H.extended.clone(),(!~D||D>5)&&(D=1),H.extended.underlineStyle=D,H.fg|=268435456,D===0&&(H.fg&=-268435457),H.updateExtended()}_processSGR0(D){D.fg=n.DEFAULT_ATTR_DATA.fg,D.bg=n.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const H=D.length;let F;const W=this._curAttrData;for(let G=0;G<H;G++)F=D.params[G],F>=30&&F<=37?(W.fg&=-50331904,W.fg|=16777216|F-30):F>=40&&F<=47?(W.bg&=-50331904,W.bg|=16777216|F-40):F>=90&&F<=97?(W.fg&=-50331904,W.fg|=16777224|F-90):F>=100&&F<=107?(W.bg&=-50331904,W.bg|=16777224|F-100):F===0?this._processSGR0(W):F===1?W.fg|=134217728:F===3?W.bg|=67108864:F===4?(W.fg|=268435456,this._processUnderline(D.hasSubParams(G)?D.getSubParams(G)[0]:1,W)):F===5?W.fg|=536870912:F===7?W.fg|=67108864:F===8?W.fg|=1073741824:F===9?W.fg|=2147483648:F===2?W.bg|=134217728:F===21?this._processUnderline(2,W):F===22?(W.fg&=-134217729,W.bg&=-134217729):F===23?W.bg&=-67108865:F===24?(W.fg&=-268435457,this._processUnderline(0,W)):F===25?W.fg&=-536870913:F===27?W.fg&=-67108865:F===28?W.fg&=-1073741825:F===29?W.fg&=2147483647:F===39?(W.fg&=-67108864,W.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):F===49?(W.bg&=-67108864,W.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?G+=this._extractColor(D,G,W):F===53?W.bg|=1073741824:F===55?W.bg&=-1073741825:F===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):F===100?(W.fg&=-67108864,W.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const H=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${H};${F}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const H=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${H};${F}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const H=D.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=H%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(D){const H=D.params[0]||1;let F;return(D.length<2||(F=D.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(D){if(!P(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const H=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:H!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:H!==0&&H!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),H!==0&&H!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:H!==0&&H!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),H!==0&&H!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const H=[],F=D.split(";");for(;F.length>1;){const W=F.shift(),G=F.shift();if(/^\d+$/.exec(W)){const j=parseInt(W);if(se(j))if(G==="?")H.push({type:0,index:j});else{const Z=(0,L.parseColor)(G);Z&&H.push({type:1,index:j,color:Z})}}}return H.length&&this._onColor.fire(H),!0}setHyperlink(D){const H=D.split(";");return!(H.length<2)&&(H[1]?this._createHyperlink(H[0],H[1]):!H[0]&&this._finishHyperlink())}_createHyperlink(D,H){this._getCurrentLinkId()&&this._finishHyperlink();const F=D.split(":");let W;const G=F.findIndex(j=>j.startsWith("id="));return G!==-1&&(W=F[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:H}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,H){const F=D.split(";");for(let W=0;W<F.length&&!(H>=this._specialColors.length);++W,++H)if(F[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{const G=(0,L.parseColor)(F[W]);G&&this._onColor.fire([{type:1,index:this._specialColors[H],color:G}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const H=[],F=D.split(";");for(let W=0;W<F.length;++W)if(/^\d+$/.exec(F[W])){const G=parseInt(F[W]);se(G)&&H.push({type:2,index:G})}return H.length&&this._onColor.fire(H),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(B[D[0]],g.CHARSETS[D[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new h.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let H=0;H<this._bufferService.rows;++H){const F=this._activeBuffer.ybase+this._activeBuffer.y+H,W=this._activeBuffer.lines.get(F);W&&(W.fill(D),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,H){const F=this._bufferService.buffer,W=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${G}${d.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,H){this._dirtyRowTracker.markRangeDirty(D,H)}}i.InputHandler=q;let J=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,D){Y>D&&(U=Y,Y=D,D=U),Y<this.start&&(this.start=Y),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function se(Y){return 0<=Y&&Y<256}J=f([b(0,C.IBufferService)],J)},844:(_,i)=>{function o(f){for(const b of f)b.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const b=this._disposables.indexOf(f);b!==-1&&this._disposables.splice(b,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var b;this._isDisposed||f===this._value||((b=this._value)==null||b.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(b,d,g){this._data[b]||(this._data[b]={}),this._data[b][d]=g}get(b,d){return this._data[b]?this._data[b][d]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,b,d,g,y){this._data.get(f,b)||this._data.set(f,b,new o),this._data.get(f,b).set(d,g,y)}get(f,b,d,g){var y;return(y=this._data.get(f,b))==null?void 0:y.get(d,g)}clear(){this._data.clear()}}},6114:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const b=o.match(/Version\/(\d+)/);return b===null||b.length<2?0:parseInt(b[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const b=this._getKey(f);if(b===void 0||(o=this._search(b),o===-1)||this._getKey(this._array[o])!==b)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===b);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,b){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do b(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let b=0,d=this._array.length-1;for(;d>=b;){let g=b+d>>1;const y=this._getKey(this._array[g]);if(y>f)d=g-1;else{if(!(y<f)){for(;g>0&&this._getKey(this._array[g-1])===f;)g--;return g}b=g+1}}return b}}},7226:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class b{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let k=0,v=0,n=y.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),v=Math.max(k,v),u=y.timeRemaining(),1.5*v>u)return n-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-k))}ms`),void this._start();n=u}this.clear()}}class d extends b{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const k=Date.now()+y;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}i.PriorityTaskQueue=d,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends b{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:d,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(b){const d=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),g=d==null?void 0:d.get(b.cols-1),y=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);y&&g&&(y.isWrapped=g[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&g[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new o;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,g=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=g}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),b=o(7226),d=o(3734),g=o(8437),y=o(4634),k=o(511),v=o(643),n=o(4863),u=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(a,h,m){this._hasScrollback=a,this._optionsService=h,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new b.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,h){return new g.BufferLine(this._bufferService.cols,this.getNullCell(a),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const h=a+this._optionsService.rawOptions.scrollback;return h>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:h}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=g.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,h){const m=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=0;const x=this._getCorrectBufferLength(h);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<a)for(let S=0;S<this.lines.length;S++)C+=+this.lines.get(S).resize(a,m);let M=0;if(this._rows<h)for(let S=this._rows;S<h;S++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(a,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+M+1?(this.ybase--,M++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(a,m)));else for(let S=this._rows;S>h;S--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const S=this.lines.length-x;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=x}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,h-1),M&&(this.y+=M),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(a,h),this._cols>a))for(let M=0;M<this.lines.length;M++)C+=+this.lines.get(M).resize(a,m);this._cols=a,this._rows=h,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,h){this._cols!==a&&(a>this._cols?this._reflowLarger(a,h):this._reflowSmaller(a,h))}_reflowLarger(a,h){const m=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(m.length>0){const C=(0,y.reflowLargerCreateNewLayout)(this.lines,m);(0,y.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(a,h,C.countRemoved)}}_reflowLargerAdjustViewport(a,h,m){const C=this.getNullCell(g.DEFAULT_ATTR_DATA);let x=m;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new g.BufferLine(a,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(a,h){const m=this.getNullCell(g.DEFAULT_ATTR_DATA),C=[];let x=0;for(let M=this.lines.length-1;M>=0;M--){let S=this.lines.get(M);if(!S||!S.isWrapped&&S.getTrimmedLength()<=a)continue;const L=[S];for(;S.isWrapped&&M>0;)S=this.lines.get(--M),L.unshift(S);const B=this.ybase+this.y;if(B>=M&&B<M+L.length)continue;const R=L[L.length-1].getTrimmedLength(),P=(0,y.reflowSmallerGetNewLineLengths)(L,this._cols,a),A=P.length-L.length;let U;U=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const q=[];for(let F=0;F<A;F++){const W=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);q.push(W)}q.length>0&&(C.push({start:M+L.length+x,newLines:q}),x+=q.length),L.push(...q);let J=P.length-1,se=P[J];se===0&&(J--,se=P[J]);let Y=L.length-A-1,D=R;for(;Y>=0;){const F=Math.min(D,se);if(L[J]===void 0)break;if(L[J].copyCellsFrom(L[Y],D-F,se-F,F,!0),se-=F,se===0&&(J--,se=P[J]),D-=F,D===0){Y--;const W=Math.max(Y,0);D=(0,y.getWrappedLineTrimmedLength)(L,W,this._cols)}}for(let F=0;F<L.length;F++)P[F]<a&&L[F].setCell(P[F],m);let H=A-U;for(;H-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+h-1)}if(C.length>0){const M=[],S=[];for(let J=0;J<this.lines.length;J++)S.push(this.lines.get(J));const L=this.lines.length;let B=L-1,R=0,P=C[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let A=0;for(let J=Math.min(this.lines.maxLength-1,L+x-1);J>=0;J--)if(P&&P.start>B+A){for(let se=P.newLines.length-1;se>=0;se--)this.lines.set(J--,P.newLines[se]);J++,M.push({index:B+1,amount:P.newLines.length}),A+=P.newLines.length,P=C[++R]}else this.lines.set(J,S[B--]);let U=0;for(let J=M.length-1;J>=0;J--)M[J].index+=U,this.lines.onInsertEmitter.fire(M[J]),U+=M[J].amount;const q=Math.max(0,L+x-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(a,h,m=0,C){const x=this.lines.get(a);return x?x.translateToString(h,m,C):""}getWrappedRangeForLine(a){let h=a,m=a;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:h,last:m}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===a&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const h=new n.Marker(a);return this.markers.push(h),h.register(this.lines.onTrim(m=>{h.line-=m,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(m=>{h.line>=m.index&&(h.line+=m.amount)})),h.register(this.lines.onDelete(m=>{h.line>=m.index&&h.line<m.index+m.amount&&h.dispose(),h.line>m.index&&(h.line-=m.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),b=o(511),d=o(643),g=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let y=0;class k{constructor(n,u,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const h=u||b.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,h);this.length=n}get(n){const u=this._data[3*n+0],a=2097151&u;return[this._data[3*n+1],2097152&u?this._combined[n]:a?(0,g.stringFromCodePoint)(a):"",u>>22,2097152&u?this._combined[n].charCodeAt(this._combined[n].length-1):a]}set(n,u){this._data[3*n+1]=u[d.CHAR_DATA_ATTR_INDEX],u[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=u[1],this._data[3*n+0]=2097152|n|u[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=u[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const u=this._data[3*n+0];return 2097152&u?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&u}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const u=this._data[3*n+0];return 2097152&u?this._combined[n]:2097151&u?(0,g.stringFromCodePoint)(2097151&u):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,u){return y=3*n,u.content=this._data[y+0],u.fg=this._data[y+1],u.bg=this._data[y+2],2097152&u.content&&(u.combinedData=this._combined[n]),268435456&u.bg&&(u.extended=this._extendedAttrs[n]),u}setCell(n,u){2097152&u.content&&(this._combined[n]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[n]=u.extended),this._data[3*n+0]=u.content,this._data[3*n+1]=u.fg,this._data[3*n+2]=u.bg}setCellFromCodepoint(n,u,a,h){268435456&h.bg&&(this._extendedAttrs[n]=h.extended),this._data[3*n+0]=u|a<<22,this._data[3*n+1]=h.fg,this._data[3*n+2]=h.bg}addCodepointToCell(n,u,a){let h=this._data[3*n+0];2097152&h?this._combined[n]+=(0,g.stringFromCodePoint)(u):2097151&h?(this._combined[n]=(0,g.stringFromCodePoint)(2097151&h)+(0,g.stringFromCodePoint)(u),h&=-2097152,h|=2097152):h=u|4194304,a&&(h&=-12582913,h|=a<<22),this._data[3*n+0]=h}insertCells(n,u,a){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,a),u<this.length-n){const h=new b.CellData;for(let m=this.length-n-u-1;m>=0;--m)this.setCell(n+u+m,this.loadCell(n+m,h));for(let m=0;m<u;++m)this.setCell(n+m,a)}else for(let h=n;h<this.length;++h)this.setCell(h,a);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,a)}deleteCells(n,u,a){if(n%=this.length,u<this.length-n){const h=new b.CellData;for(let m=0;m<this.length-n-u;++m)this.setCell(n+m,this.loadCell(n+u+m,h));for(let m=this.length-u;m<this.length;++m)this.setCell(m,a)}else for(let h=n;h<this.length;++h)this.setCell(h,a);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,a),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,a)}replaceCells(n,u,a,h=!1){if(h)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,a),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodepoint(u,0,1,a);n<u&&n<this.length;)this.isProtected(n)||this.setCell(n,a),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,a),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u,0,1,a);n<u&&n<this.length;)this.setCell(n++,a)}resize(n,u){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const h=new Uint32Array(a);h.set(this._data),this._data=h}for(let h=this.length;h<n;++h)this.setCell(h,u)}else{this._data=this._data.subarray(0,a);const h=Object.keys(this._combined);for(let C=0;C<h.length;C++){const x=parseInt(h[C],10);x>=n&&delete this._combined[x]}const m=Object.keys(this._extendedAttrs);for(let C=0;C<m.length;C++){const x=parseInt(m[C],10);x>=n&&delete this._extendedAttrs[x]}}return this.length=n,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,u=!1){if(u)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,n);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const u in n._combined)this._combined[u]=n._combined[u];this._extendedAttrs={};for(const u in n._extendedAttrs)this._extendedAttrs[u]=n._extendedAttrs[u];this.isWrapped=n.isWrapped}clone(){const n=new k(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const u in this._combined)n._combined[u]=this._combined[u];for(const u in this._extendedAttrs)n._extendedAttrs[u]=this._extendedAttrs[u];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,u,a,h,m){const C=n._data;if(m)for(let M=h-1;M>=0;M--){for(let S=0;S<3;S++)this._data[3*(a+M)+S]=C[3*(u+M)+S];268435456&C[3*(u+M)+2]&&(this._extendedAttrs[a+M]=n._extendedAttrs[u+M])}else for(let M=0;M<h;M++){for(let S=0;S<3;S++)this._data[3*(a+M)+S]=C[3*(u+M)+S];268435456&C[3*(u+M)+2]&&(this._extendedAttrs[a+M]=n._extendedAttrs[u+M])}const x=Object.keys(n._combined);for(let M=0;M<x.length;M++){const S=parseInt(x[M],10);S>=u&&(this._combined[S-u+a]=n._combined[S])}}translateToString(n,u,a,h){u=u??0,a=a??this.length,n&&(a=Math.min(a,this.getTrimmedLength())),h&&(h.length=0);let m="";for(;u<a;){const C=this._data[3*u+0],x=2097151&C,M=2097152&C?this._combined[u]:x?(0,g.stringFromCodePoint)(x):d.WHITESPACE_CELL_CHAR;if(m+=M,h)for(let S=0;S<M.length;++S)h.push(u);u+=C>>22||1}return h&&h.push(u),m}}i.BufferLine=k},4841:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(_,i)=>{function o(f,b,d){if(b===f.length-1)return f[b].getTrimmedLength();const g=!f[b].hasContent(d-1)&&f[b].getWidth(d-1)===1,y=f[b+1].getWidth(0)===2;return g&&y?d-1:d}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,b,d,g,y){const k=[];for(let v=0;v<f.length-1;v++){let n=v,u=f.get(++n);if(!u.isWrapped)continue;const a=[f.get(v)];for(;n<f.length&&u.isWrapped;)a.push(u),u=f.get(++n);if(g>=v&&g<n){v+=a.length-1;continue}let h=0,m=o(a,h,b),C=1,x=0;for(;C<a.length;){const S=o(a,C,b),L=S-x,B=d-m,R=Math.min(L,B);a[h].copyCellsFrom(a[C],x,m,R,!1),m+=R,m===d&&(h++,m=0),x+=R,x===S&&(C++,x=0),m===0&&h!==0&&a[h-1].getWidth(d-1)===2&&(a[h].copyCellsFrom(a[h-1],d-1,m++,1,!1),a[h-1].setCell(d-1,y))}a[h].replaceCells(m,d,y);let M=0;for(let S=a.length-1;S>0&&(S>h||a[S].getTrimmedLength()===0);S--)M++;M>0&&(k.push(v+a.length-M),k.push(M)),v+=a.length-1}return k},i.reflowLargerCreateNewLayout=function(f,b){const d=[];let g=0,y=b[g],k=0;for(let v=0;v<f.length;v++)if(y===v){const n=b[++g];f.onDeleteEmitter.fire({index:v-k,amount:n}),v+=n-1,k+=n,y=b[++g]}else d.push(v);return{layout:d,countRemoved:k}},i.reflowLargerApplyNewLayout=function(f,b){const d=[];for(let g=0;g<b.length;g++)d.push(f.get(b[g]));for(let g=0;g<d.length;g++)f.set(g,d[g]);f.length=b.length},i.reflowSmallerGetNewLineLengths=function(f,b,d){const g=[],y=f.map((u,a)=>o(f,a,b)).reduce((u,a)=>u+a);let k=0,v=0,n=0;for(;n<y;){if(y-n<d){g.push(y-n);break}k+=d;const u=o(f,v,b);k>u&&(k-=u,v++);const a=f[v].getWidth(k-1)===2;a&&k--;const h=a?d-1:d;g.push(h),n+=h}return g},i.getWrappedLineTrimmedLength=o},5295:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),b=o(844),d=o(9092);class g extends b.Disposable{constructor(k,v){super(),this._optionsService=k,this._bufferService=v,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,v){this._normal.resize(k,v),this._alt.resize(k,v),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}i.BufferSet=g},511:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),b=o(643),d=o(3734);class g extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const v=new g;return v.setFromCharData(k),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[b.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(k[b.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(k[b.CHAR_DATA_CHAR_INDEX].length===2){const n=k[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const u=k[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(n-55296)+u-56320+65536|k[b.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=k[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[b.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=k[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[b.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),b=o(844);class d{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,b.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}i.Marker=d,d._nextId=1},7116:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(_,i)=>{var o,f,b;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(o||(i.C0=o={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(f||(i.C1=f={})),function(d){d.ST=`${o.ESC}\\`}(b||(i.C1_ESCAPED=b={}))},7399:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(d,g,y,k){const v={type:0,cancel:!1,key:void 0},n=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?v.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?v.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?v.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(v.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:v.key=d.ctrlKey?"\b":f.C0.DEL,d.altKey&&(v.key=f.C0.ESC+v.key);break;case 9:if(d.shiftKey){v.key=f.C0.ESC+"[Z";break}v.key=f.C0.HT,v.cancel=!0;break;case 13:v.key=d.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,v.cancel=!0;break;case 27:v.key=f.C0.ESC,d.altKey&&(v.key=f.C0.ESC+f.C0.ESC),v.cancel=!0;break;case 37:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"D",v.key===f.C0.ESC+"[1;3D"&&(v.key=f.C0.ESC+(y?"b":"[1;5D"))):v.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"C",v.key===f.C0.ESC+"[1;3C"&&(v.key=f.C0.ESC+(y?"f":"[1;5C"))):v.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"A",y||v.key!==f.C0.ESC+"[1;3A"||(v.key=f.C0.ESC+"[1;5A")):v.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"B",y||v.key!==f.C0.ESC+"[1;3B"||(v.key=f.C0.ESC+"[1;5B")):v.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(v.key=f.C0.ESC+"[2~");break;case 46:v.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:v.key=n?f.C0.ESC+"[1;"+(n+1)+"H":g?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:v.key=n?f.C0.ESC+"[1;"+(n+1)+"F":g?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:d.shiftKey?v.type=2:d.ctrlKey?v.key=f.C0.ESC+"[5;"+(n+1)+"~":v.key=f.C0.ESC+"[5~";break;case 34:d.shiftKey?v.type=3:d.ctrlKey?v.key=f.C0.ESC+"[6;"+(n+1)+"~":v.key=f.C0.ESC+"[6~";break;case 112:v.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:v.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:v.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:v.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:v.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:v.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:v.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:v.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:v.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:v.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:v.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:v.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(y&&!k||!d.altKey||d.metaKey)!y||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?v.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(v.key=f.C0.US),d.key==="@"&&(v.key=f.C0.NUL)):d.keyCode===65&&(v.type=1);else{const u=b[d.keyCode],a=u==null?void 0:u[d.shiftKey?1:0];if(a)v.key=f.C0.ESC+a;else if(d.keyCode>=65&&d.keyCode<=90){const h=d.ctrlKey?d.keyCode-64:d.keyCode+32;let m=String.fromCharCode(h);d.shiftKey&&(m=m.toUpperCase()),v.key=f.C0.ESC+m}else if(d.keyCode===32)v.key=f.C0.ESC+(d.ctrlKey?f.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let h=d.code.slice(3,4);d.shiftKey||(h=h.toLowerCase()),v.key=f.C0.ESC+h,v.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?v.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?v.key=f.C0.NUL:d.keyCode>=51&&d.keyCode<=55?v.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?v.key=f.C0.DEL:d.keyCode===219?v.key=f.C0.ESC:d.keyCode===220?v.key=f.C0.FS:d.keyCode===221&&(v.key=f.C0.GS)}return v}},482:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,b=o.length){let d="";for(let g=f;g<b;++g){let y=o[g];y>65535?(y-=65536,d+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):d+=String.fromCharCode(y)}return d},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const b=o.length;if(!b)return 0;let d=0,g=0;if(this._interim){const y=o.charCodeAt(g++);56320<=y&&y<=57343?f[d++]=1024*(this._interim-55296)+y-56320+65536:(f[d++]=this._interim,f[d++]=y),this._interim=0}for(let y=g;y<b;++y){const k=o.charCodeAt(y);if(55296<=k&&k<=56319){if(++y>=b)return this._interim=k,d;const v=o.charCodeAt(y);56320<=v&&v<=57343?f[d++]=1024*(k-55296)+v-56320+65536:(f[d++]=k,f[d++]=v)}else k!==65279&&(f[d++]=k)}return d}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const b=o.length;if(!b)return 0;let d,g,y,k,v=0,n=0,u=0;if(this.interim[0]){let m=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let x,M=0;for(;(x=63&this.interim[++M])&&M<4;)C<<=6,C|=x;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=S-M;for(;u<L;){if(u>=b)return 0;if(x=o[u++],(192&x)!=128){u--,m=!0;break}this.interim[M++]=x,C<<=6,C|=63&x}m||(S===2?C<128?u--:f[v++]=C:S===3?C<2048||C>=55296&&C<=57343||C===65279||(f[v++]=C):C<65536||C>1114111||(f[v++]=C)),this.interim.fill(0)}const a=b-4;let h=u;for(;h<b;){for(;!(!(h<a)||128&(d=o[h])||128&(g=o[h+1])||128&(y=o[h+2])||128&(k=o[h+3]));)f[v++]=d,f[v++]=g,f[v++]=y,f[v++]=k,h+=4;if(d=o[h++],d<128)f[v++]=d;else if((224&d)==192){if(h>=b)return this.interim[0]=d,v;if(g=o[h++],(192&g)!=128){h--;continue}if(n=(31&d)<<6|63&g,n<128){h--;continue}f[v++]=n}else if((240&d)==224){if(h>=b)return this.interim[0]=d,v;if(g=o[h++],(192&g)!=128){h--;continue}if(h>=b)return this.interim[0]=d,this.interim[1]=g,v;if(y=o[h++],(192&y)!=128){h--;continue}if(n=(15&d)<<12|(63&g)<<6|63&y,n<2048||n>=55296&&n<=57343||n===65279)continue;f[v++]=n}else if((248&d)==240){if(h>=b)return this.interim[0]=d,v;if(g=o[h++],(192&g)!=128){h--;continue}if(h>=b)return this.interim[0]=d,this.interim[1]=g,v;if(y=o[h++],(192&y)!=128){h--;continue}if(h>=b)return this.interim[0]=d,this.interim[1]=g,this.interim[2]=y,v;if(k=o[h++],(192&k)!=128){h--;continue}if(n=(7&d)<<18|(63&g)<<12|(63&y)<<6|63&k,n<65536||n>1114111)continue;f[v++]=n}}return v}}},225:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;i.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let y=0;y<b.length;++y)g.fill(0,b[y][0],b[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?g[y]:function(k,v){let n,u=0,a=v.length-1;if(k<v[0][0]||k>v[a][1])return!1;for(;a>=u;)if(n=u+a>>1,k>v[n][1])u=n+1;else{if(!(k<v[n][0]))return!0;a=n-1}return!1}(y,d)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,k){let v=this.wcwidth(y),n=v===0&&k!==0;if(n){const u=f.UnicodeService.extractWidth(k);u===0?n=!1:u>v&&(v=u)}return f.UnicodeService.createPropertyValue(0,v,n)}}},5981:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),b=o(844);class d extends b.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k)}_innerWrite(y=0,k=!0){const v=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],u=this._action(n,k);if(u){const h=m=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(v,m);return void u.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(h)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=d},5941:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function b(d,g){const y=d.toString(16),k=y.length<2?"0"+y:y;switch(g){case 4:return y[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}i.parseColor=function(d){if(!d)return;let g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const y=o.exec(g);if(y){const k=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/k*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/k*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/k*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),f.exec(g)&&[3,6,9,12].includes(g.length))){const y=g.length/3,k=[0,0,0];for(let v=0;v<3;++v){const n=parseInt(g.slice(y*v,y*v+y),16);k[v]=y===1?n<<4:y===2?n:y===3?n>>4:n>>8}return k}},i.toRgbString=function(d,g=16){const[y,k,v]=d;return`rgb:${b(y,g)}/${b(k,g)}/${b(v,g)}`}},5770:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),b=o(8742),d=o(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(k,v){this._handlers[k]===void 0&&(this._handlers[k]=[]);const n=this._handlers[k];return n.push(v),{dispose:()=>{const u=n.indexOf(v);u!==-1&&n.splice(u,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(k,v){if(this.reset(),this._ident=k,this._active=this._handlers[k]||g,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(k,v,n){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(k,v,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(k,v,n))}unhook(k,v=!0){if(this._active.length){let n=!1,u=this._active.length-1,a=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,n=v,a=this._stack.fallThrough,this._stack.paused=!1),!a&&n===!1){for(;u>=0&&(n=this._active[u].unhook(k),n!==!0);u--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,n;u--}for(;u>=0;u--)if(n=this._active[u].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",k);this._active=g,this._ident=0}};const y=new b.Params;y.addParam(0),i.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=y,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():y,this._data="",this._hitLimit=!1}put(k,v,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(k,v,n),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let v=!1;if(this._hitLimit)v=!1;else if(k&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(n=>(this._params=y,this._data="",this._hitLimit=!1,n));return this._params=y,this._data="",this._hitLimit=!1,v}}},2015:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),b=o(8742),d=o(6242),g=o(6351);class y{constructor(u){this.table=new Uint8Array(u)}setDefault(u,a){this.table.fill(u<<4|a)}add(u,a,h,m){this.table[a<<8|u]=h<<4|m}addMany(u,a,h,m){for(let C=0;C<u.length;C++)this.table[a<<8|u[C]]=h<<4|m}}i.TransitionTable=y;const k=160;i.VT500_TRANSITION_TABLE=function(){const n=new y(4095),u=Array.apply(null,Array(256)).map((M,S)=>S),a=(M,S)=>u.slice(M,S),h=a(32,127),m=a(0,24);m.push(25),m.push.apply(m,a(28,32));const C=a(0,14);let x;for(x in n.setDefault(1,0),n.addMany(h,0,2,0),C)n.addMany([24,26,153,154],x,3,0),n.addMany(a(128,144),x,3,0),n.addMany(a(144,152),x,3,0),n.add(156,x,0,0),n.add(27,x,11,1),n.add(157,x,4,8),n.addMany([152,158,159],x,0,7),n.add(155,x,11,3),n.add(144,x,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(h,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(a(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(h,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(a(64,127),3,7,0),n.addMany(a(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(a(48,60),4,8,4),n.addMany(a(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(a(32,64),6,0,6),n.add(127,6,0,6),n.addMany(a(64,127),6,0,0),n.addMany(a(32,48),3,9,5),n.addMany(a(32,48),5,9,5),n.addMany(a(48,64),5,0,6),n.addMany(a(64,127),5,7,0),n.addMany(a(32,48),4,9,5),n.addMany(a(32,48),1,9,2),n.addMany(a(32,48),2,9,2),n.addMany(a(48,127),2,10,0),n.addMany(a(48,80),1,10,0),n.addMany(a(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(a(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(a(28,32),9,0,9),n.addMany(a(32,48),9,9,12),n.addMany(a(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(a(32,128),11,0,11),n.addMany(a(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(a(28,32),10,0,10),n.addMany(a(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(a(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(a(28,32),12,0,12),n.addMany(a(32,48),12,9,12),n.addMany(a(48,64),12,0,11),n.addMany(a(64,127),12,12,13),n.addMany(a(64,127),10,12,13),n.addMany(a(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(h,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(k,0,2,0),n.add(k,8,5,8),n.add(k,6,0,6),n.add(k,11,0,11),n.add(k,13,13,13),n}();class v extends f.Disposable{constructor(u=i.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new b.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(a,h,m)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,h)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(u,a=[64,126]){let h=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=u.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<u.intermediates.length;++C){const x=u.intermediates.charCodeAt(C);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=x}}if(u.final.length!==1)throw new Error("final must be a single byte");const m=u.final.charCodeAt(0);if(a[0]>m||m>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return h<<=8,h|=m,h}identToString(u){const a=[];for(;u;)a.push(String.fromCharCode(255&u)),u>>=8;return a.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,a){const h=this._identifier(u,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const m=this._escHandlers[h];return m.push(a),{dispose:()=>{const C=m.indexOf(a);C!==-1&&m.splice(C,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,a){this._executeHandlers[u.charCodeAt(0)]=a}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,a){const h=this._identifier(u);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const m=this._csiHandlers[h];return m.push(a),{dispose:()=>{const C=m.indexOf(a);C!==-1&&m.splice(C,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,a){return this._dcsParser.registerHandler(this._identifier(u),a)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,a){return this._oscParser.registerHandler(u,a)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,a,h,m,C){this._parseStack.state=u,this._parseStack.handlers=a,this._parseStack.handlerPos=h,this._parseStack.transition=m,this._parseStack.chunkPos=C}parse(u,a,h){let m,C=0,x=0,M=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,M=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&L>-1){for(;L>=0&&(m=S[L](this._params),m!==!0);L--)if(m instanceof Promise)return this._parseStack.handlerPos=L,m}this._parseStack.handlers=[];break;case 4:if(h===!1&&L>-1){for(;L>=0&&(m=S[L](),m!==!0);L--)if(m instanceof Promise)return this._parseStack.handlerPos=L,m}this._parseStack.handlers=[];break;case 6:if(C=u[this._parseStack.chunkPos],m=this._dcsParser.unhook(C!==24&&C!==26,h),m)return m;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=u[this._parseStack.chunkPos],m=this._oscParser.end(C!==24&&C!==26,h),m)return m;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,M=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=M;S<a;++S){switch(C=u[S],x=this._transitions.table[this.currentState<<8|(C<160?C:k)],x>>4){case 2:for(let A=S+1;;++A){if(A>=a||(C=u[A])<32||C>126&&C<k){this._printHandler(u,S,A),S=A-1;break}if(++A>=a||(C=u[A])<32||C>126&&C<k){this._printHandler(u,S,A),S=A-1;break}if(++A>=a||(C=u[A])<32||C>126&&C<k){this._printHandler(u,S,A),S=A-1;break}if(++A>=a||(C=u[A])<32||C>126&&C<k){this._printHandler(u,S,A),S=A-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|C];let B=L?L.length-1:-1;for(;B>=0&&(m=L[B](this._params),m!==!0);B--)if(m instanceof Promise)return this._preserveStack(3,L,B,x,S),m;B<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++S<a&&(C=u[S])>47&&C<60);S--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const R=this._escHandlers[this._collect<<8|C];let P=R?R.length-1:-1;for(;P>=0&&(m=R[P](),m!==!0);P--)if(m instanceof Promise)return this._preserveStack(4,R,P,x,S),m;P<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let A=S+1;;++A)if(A>=a||(C=u[A])===24||C===26||C===27||C>127&&C<k){this._dcsParser.put(u,S,A),S=A-1;break}break;case 14:if(m=this._dcsParser.unhook(C!==24&&C!==26),m)return this._preserveStack(6,[],0,x,S),m;C===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=S+1;;A++)if(A>=a||(C=u[A])<32||C>127&&C<k){this._oscParser.put(u,S,A),S=A-1;break}break;case 6:if(m=this._oscParser.end(C!==24&&C!==26),m)return this._preserveStack(5,[],0,x,S),m;C===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}i.EscapeSequenceParser=v},6242:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),b=o(482),d=[];i.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,y){this._handlers[g]===void 0&&(this._handlers[g]=[]);const k=this._handlers[g];return k.push(y),{dispose:()=>{const v=k.indexOf(y);v!==-1&&k.splice(v,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,y,k){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(g,y,k);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(g,y,k))}start(){this.reset(),this._state=1}put(g,y,k){if(this._state!==3){if(this._state===1)for(;y<k;){const v=g[y++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&k-y>0&&this._put(g,y,k)}}end(g,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,v=this._active.length-1,n=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,k=y,n=this._stack.fallThrough,this._stack.paused=!1),!n&&k===!1){for(;v>=0&&(k=this._active[v].end(g),k!==!0);v--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,k;v--}for(;v>=0;v--)if(k=this._active[v].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",g);this._active=d,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,y,k){this._hitLimit||(this._data+=(0,b.utf32ToString)(g,y,k),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let y=!1;if(this._hitLimit)y=!1;else if(g&&(y=this._handler(this._data),y instanceof Promise))return y.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,y}}},8742:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(d){const g=new f;if(!d.length)return g;for(let y=Array.isArray(d[0])?1:0;y<d.length;++y){const k=d[y];if(Array.isArray(k))for(let v=0;v<k.length;++v)g.addSubParam(k[v]);else g.addParam(k)}return g}constructor(d=32,g=32){if(this.maxLength=d,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new f(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let g=0;g<this.length;++g){d.push(this.params[g]);const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&d.push(Array.prototype.slice.call(this._subParams,y,k))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>o?o:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>o?o:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const g=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];return y-g>0?this._subParams.subarray(g,y):null}getSubParamsAll(){const d={};for(let g=0;g<this.length;++g){const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&(d[g]=this._subParams.slice(y,k))}return d}addDigit(d){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,k=y[g-1];y[g-1]=~k?Math.min(10*k+d,o):d}}i.Params=f},5741:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const b={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(b),f.dispose=()=>this._wrappedAddonDispose(b),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let b=0;b<this._addons.length;b++)if(this._addons[b]===o){f=b;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),b=o(511);i.BufferApiView=class{constructor(d,g){this._buffer=d,this.type=g}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const g=this._buffer.lines.get(d);if(g)return new f.BufferLineApiView(g)}getNullCell(){return new b.CellData}}},3785:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(b){this._line=b}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(b,d){if(!(b<0||b>=this._line.length))return d?(this._line.loadCell(b,d),d):this._line.loadCell(b,new f.CellData)}translateToString(b,d,g){return this._line.translateToString(b,d,g)}}},8285:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),b=o(8460),d=o(844);class g extends d.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new b.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,b=>f(b.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(b,d)=>f(b,d.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(_,i,o){var f=this&&this.__decorate||function(n,u,a,h){var m,C=arguments.length,x=C<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,u,a,h);else for(var M=n.length-1;M>=0;M--)(m=n[M])&&(x=(C<3?m(x):C>3?m(u,a,x):m(u,a))||x);return C>3&&x&&Object.defineProperty(u,a,x),x},b=this&&this.__param||function(n,u){return function(a,h){u(a,h,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const d=o(8460),g=o(844),y=o(5295),k=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(n,this))}resize(n,u){this.cols=n,this.rows=u,this.buffers.resize(n,u),this._onResize.fire({cols:n,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,u=!1){const a=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===n.fg&&h.getBg(0)===n.bg||(h=a.getBlankLine(n,u),this._cachedBlankLine=h),h.isWrapped=u;const m=a.ybase+a.scrollTop,C=a.ybase+a.scrollBottom;if(a.scrollTop===0){const x=a.lines.isFull;C===a.lines.length-1?x?a.lines.recycle().copyFrom(h):a.lines.push(h.clone()):a.lines.splice(C+1,0,h.clone()),x?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const x=C-m+1;a.lines.shiftElements(m+1,x-1,-1),a.lines.set(C,h.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(n,u,a){const h=this.buffer;if(n<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else n+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const m=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+n,h.ybase),0),m!==h.ydisp&&(u||this._onScroll.fire(h.ydisp))}};i.BufferService=v=f([b(0,k.IOptionsService)],v)},7994:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(_,i,o){var f=this&&this.__decorate||function(h,m,C,x){var M,S=arguments.length,L=S<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,m,C,x);else for(var B=h.length-1;B>=0;B--)(M=h[B])&&(L=(S<3?M(L):S>3?M(m,C,L):M(m,C))||L);return S>3&&L&&Object.defineProperty(m,C,L),L},b=this&&this.__param||function(h,m){return function(C,x){m(C,x,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const d=o(2585),g=o(8460),y=o(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function v(h,m){let C=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(C|=64,C|=h.action):(C|=3&h.button,4&h.button&&(C|=64),8&h.button&&(C|=128),h.action===32?C|=32:h.action!==0||m||(C|=3)),C}const n=String.fromCharCode,u={DEFAULT:h=>{const m=[v(h,!1)+32,h.col+32,h.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${v(h,!0)};${h.col};${h.row}${m}`},SGR_PIXELS:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${v(h,!0)};${h.x};${h.y}${m}`}};let a=i.CoreMouseService=class extends y.Disposable{constructor(h,m){super(),this._bufferService=h,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(k))this.addProtocol(C,k[C]);for(const C of Object.keys(u))this.addEncoding(C,u[C]);this.reset()}addProtocol(h,m){this._protocols[h]=m}addEncoding(h,m){this._encodings[h]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const m=this._encodings[this._activeEncoding](h);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,m,C){if(C){if(h.x!==m.x||h.y!==m.y)return!1}else if(h.col!==m.col||h.row!==m.row)return!1;return h.button===m.button&&h.action===m.action&&h.ctrl===m.ctrl&&h.alt===m.alt&&h.shift===m.shift}};i.CoreMouseService=a=f([b(0,d.IBufferService),b(1,d.ICoreService)],a)},6975:function(_,i,o){var f=this&&this.__decorate||function(a,h,m,C){var x,M=arguments.length,S=M<3?h:C===null?C=Object.getOwnPropertyDescriptor(h,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,h,m,C);else for(var L=a.length-1;L>=0;L--)(x=a[L])&&(S=(M<3?x(S):M>3?x(h,m,S):x(h,m))||S);return M>3&&S&&Object.defineProperty(h,m,S),S},b=this&&this.__param||function(a,h){return function(m,C){h(m,C,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const d=o(1439),g=o(8460),y=o(844),k=o(2585),v=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=i.CoreService=class extends y.Disposable{constructor(a,h,m){super(),this._bufferService=a,this._logService=h,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(n)}reset(){this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(n)}triggerDataEvent(a,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(C=>C.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(a))}};i.CoreService=u=f([b(0,k.IBufferService),b(1,k.ILogService),b(2,k.IOptionsService)],u)},9074:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),b=o(8460),d=o(844),g=o(6106);let y=0,k=0;class v extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(a=>a==null?void 0:a.marker.line),this._onDecorationRegistered=this.register(new b.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new b.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const h=new n(a);if(h){const m=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),m.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,h,m){let C=0,x=0;for(const M of this._decorations.getKeyIterator(h))C=M.options.x??0,x=C+(M.options.width??1),a>=C&&a<x&&(!m||(M.options.layer??"bottom")===m)&&(yield M)}forEachDecorationAtCell(a,h,m,C){this._decorations.forEachByKey(h,x=>{y=x.options.x??0,k=y+(x.options.width??1),a>=y&&a<k&&(!m||(x.options.layer??"bottom")===m)&&C(x)})}}i.DecorationService=v;class n extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new b.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new b.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),b=o(8343);class d{constructor(...y){this._entries=new Map;for(const[k,v]of y)this.set(k,v)}set(y,k){const v=this._entries.get(y);return this._entries.set(y,k),v}forEach(y){for(const[k,v]of this._entries.entries())y(k,v)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}i.ServiceCollection=d,i.InstantiationService=class{constructor(){this._services=new d,this._services.set(f.IInstantiationService,this)}setService(g,y){this._services.set(g,y)}getService(g){return this._services.get(g)}createInstance(g,...y){const k=(0,b.getServiceDependencies)(g).sort((u,a)=>u.index-a.index),v=[];for(const u of k){const a=this._services.get(u.id);if(!a)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${u.id}.`);v.push(a)}const n=k.length>0?k[0].index:y.length;if(y.length!==n)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${n+1} conflicts with ${y.length} static arguments`);return new g(...y,...v)}}},7866:function(_,i,o){var f=this&&this.__decorate||function(n,u,a,h){var m,C=arguments.length,x=C<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,u,a,h);else for(var M=n.length-1;M>=0;M--)(m=n[M])&&(x=(C<3?m(x):C>3?m(u,a,x):m(u,a))||x);return C>3&&x&&Object.defineProperty(u,a,x),x},b=this&&this.__param||function(n,u){return function(a,h){u(a,h,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const d=o(844),g=o(2585),y={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let k,v=i.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let u=0;u<n.length;u++)typeof n[u]=="function"&&(n[u]=n[u]())}_log(n,u,a){this._evalLazyOptionalParams(a),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...a)}trace(n,...u){var a;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.trace.bind(this._optionsService.options.logger))??console.log,n,u)}debug(n,...u){var a;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.debug.bind(this._optionsService.options.logger))??console.log,n,u)}info(n,...u){var a;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.info.bind(this._optionsService.options.logger))??console.info,n,u)}warn(n,...u){var a;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.warn.bind(this._optionsService.options.logger))??console.warn,n,u)}error(n,...u){var a;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.error.bind(this._optionsService.options.logger))??console.error,n,u)}};i.LogService=v=f([b(0,g.IOptionsService)],v),i.setTraceLogger=function(n){k=n},i.traceCall=function(n,u,a){if(typeof a.value!="function")throw new Error("not supported");const h=a.value;a.value=function(...m){if(k.logLevel!==g.LogLevelEnum.TRACE)return h.apply(this,m);k.trace(`GlyphRenderer#${h.name}(${m.map(x=>JSON.stringify(x)).join(", ")})`);const C=h.apply(this,m);return k.trace(`GlyphRenderer#${h.name} return`,C),C}}},7302:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),b=o(844),d=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends b.Disposable{constructor(v){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const u in v)if(u in n)try{const a=v[u];n[u]=this._sanitizeAndValidateOption(u,a)}catch(a){console.error(a)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,b.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,n){return this.onOptionChange(u=>{u===v&&n(this.rawOptions[v])})}onMultipleOptionChange(v,n){return this.onOptionChange(u=>{v.indexOf(u)!==-1&&n()})}_setupOptions(){const v=u=>{if(!(u in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},n=(u,a)=>{if(!(u in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);a=this._sanitizeAndValidateOption(u,a),this.rawOptions[u]!==a&&(this.rawOptions[u]=a,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const a={get:v.bind(this,u),set:n.bind(this,u)};Object.defineProperty(this.options,u,a)}}_sanitizeAndValidateOption(v,n){switch(v){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[v]),!function(u){return u==="block"||u==="underline"||u==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${v}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=g.includes(n)?n:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${v} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${v} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=y},2660:function(_,i,o){var f=this&&this.__decorate||function(y,k,v,n){var u,a=arguments.length,h=a<3?k:n===null?n=Object.getOwnPropertyDescriptor(k,v):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(y,k,v,n);else for(var m=y.length-1;m>=0;m--)(u=y[m])&&(h=(a<3?u(h):a>3?u(k,v,h):u(k,v))||h);return a>3&&h&&Object.defineProperty(k,v,h),h},b=this&&this.__param||function(y,k){return function(v,n){k(v,n,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const d=o(2585);let g=i.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const k=this._bufferService.buffer;if(y.id===void 0){const m=k.addMarker(k.ybase+k.y),C={data:y,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(C,m)),this._dataByLinkId.set(C.id,C),C.id}const v=y,n=this._getEntryIdKey(v),u=this._entriesWithId.get(n);if(u)return this.addLineToLink(u.id,k.ybase+k.y),u.id;const a=k.addMarker(k.ybase+k.y),h={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(h,a)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(y,k){const v=this._dataByLinkId.get(y);if(v&&v.lines.every(n=>n.line!==k)){const n=this._bufferService.buffer.addMarker(k);v.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(v,n))}}getLinkData(y){var k;return(k=this._dataByLinkId.get(y))==null?void 0:k.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,k){const v=y.lines.indexOf(k);v!==-1&&(y.lines.splice(v,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};i.OscLinkService=g=f([b(0,d.IBufferService)],g)},8343:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(b){return b[f]||[]},i.createDecorator=function(b){if(i.serviceRegistry.has(b))return i.serviceRegistry.get(b);const d=function(g,y,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,n,u){n[o]===n?n[f].push({id:v,index:u}):(n[f]=[{id:v,index:u}],n[o]=n)})(d,g,k)};return d.toString=()=>b,i.serviceRegistry.set(b,d),d}},2585:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var b;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(b||(i.LogLevelEnum=b={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(_,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),b=o(225);class d{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,k,v=!1){return(16777215&y)<<3|(3&k)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const y=new b.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let k=0,v=0;const n=y.length;for(let u=0;u<n;++u){let a=y.charCodeAt(u);if(55296<=a&&a<=56319){if(++u>=n)return k+this.wcwidth(a);const C=y.charCodeAt(u);56320<=C&&C<=57343?a=1024*(a-55296)+C-56320+65536:k+=this.wcwidth(C)}const h=this.charProperties(a,v);let m=d.extractWidth(h);d.extractShouldJoin(h)&&(m-=d.extractWidth(v)),k+=m,v=h}return k}charProperties(y,k){return this._activeProvider.charProperties(y,k)}}i.UnicodeService=d}},l={};function p(_){var i=l[_];if(i!==void 0)return i.exports;var o=l[_]={exports:{}};return t[_].call(o.exports,o,o.exports,p),o.exports}var w={};return(()=>{var _=w;Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;const i=p(9042),o=p(3236),f=p(844),b=p(5741),d=p(8285),g=p(7975),y=p(7090),k=["cols","rows"];class v extends f.Disposable{constructor(u){super(),this._core=this.register(new o.Terminal(u)),this._addonManager=this.register(new b.AddonManager),this._publicOptions={...this._core.options};const a=m=>this._core.options[m],h=(m,C)=>{this._checkReadonlyOptions(m),this._core.options[m]=C};for(const m in this._core.options){const C={get:a.bind(this,m),set:h.bind(this,m)};Object.defineProperty(this._publicOptions,m,C)}}_checkReadonlyOptions(u){if(k.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const a in u)this._publicOptions[a]=u[a]}blur(){this._core.blur()}focus(){this._core.focus()}input(u,a=!0){this._core.input(u,a)}resize(u,a){this._verifyIntegers(u,a),this._core.resize(u,a)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}attachCustomWheelEventHandler(u){this._core.attachCustomWheelEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){return this._checkProposedApi(),this._verifyPositiveIntegers(u.x??0,u.width??0,u.height??0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,a,h){this._verifyIntegers(u,a,h),this._core.select(u,a,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,a){this._verifyIntegers(u,a),this._core.selectLines(u,a)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,a){this._core.write(u,a)}writeln(u,a){this._core.write(u),this._core.write(`\r
`,a)}paste(u){this._core.paste(u)}refresh(u,a){this._verifyIntegers(u,a),this._core.refresh(u,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return i}_verifyIntegers(...u){for(const a of u)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const a of u)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}_.Terminal=v})(),w})())})(Qs);var Yn=Qs.exports,en={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(self,()=>(()=>{var t={};return(()=>{var l=t;Object.defineProperty(l,"__esModule",{value:!0}),l.FitAddon=void 0,l.FitAddon=class{activate(p){this._terminal=p}dispose(){}fit(){const p=this.proposeDimensions();if(!p||!this._terminal||isNaN(p.cols)||isNaN(p.rows))return;const w=this._terminal._core;this._terminal.rows===p.rows&&this._terminal.cols===p.cols||(w._renderService.clear(),this._terminal.resize(p.cols,p.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const p=this._terminal._core,w=p._renderService.dimensions;if(w.css.cell.width===0||w.css.cell.height===0)return;const _=this._terminal.options.scrollback===0?0:p.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),b=window.getComputedStyle(this._terminal.element),d=o-(parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("padding-bottom"))),g=f-(parseInt(b.getPropertyValue("padding-right"))+parseInt(b.getPropertyValue("padding-left")))-_;return{cols:Math.max(2,Math.floor(g/w.css.cell.width)),rows:Math.max(1,Math.floor(d/w.css.cell.height))}}}})(),t})())})(en);var Zn=en.exports,tn={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(self,()=>(()=>{var t={6:(_,i)=>{function o(b){try{const d=new URL(b),g=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return b.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(b,d,g,y={}){this._terminal=b,this._regex=d,this._handler=g,this._options=y}provideLinks(b,d){const g=f.computeLink(b,this._regex,this._terminal,this._handler);d(this._addCallbacks(g))}_addCallbacks(b){return b.map(d=>(d.leave=this._options.leave,d.hover=(g,y)=>{if(this._options.hover){const{range:k}=d;this._options.hover(g,y,k)}},d))}};class f{static computeLink(d,g,y,k){const v=new RegExp(g.source,(g.flags||"")+"g"),[n,u]=f._getWindowedLineStrings(d-1,y),a=n.join("");let h;const m=[];for(;h=v.exec(a);){const C=h[0];if(!o(C))continue;const[x,M]=f._mapStrIdx(y,u,0,h.index),[S,L]=f._mapStrIdx(y,x,M,C.length);if(x===-1||M===-1||S===-1||L===-1)continue;const B={start:{x:M+1,y:x+1},end:{x:L,y:S+1}};m.push({range:B,text:C,activate:k})}return m}static _getWindowedLineStrings(d,g){let y,k=d,v=d,n=0,u="";const a=[];if(y=g.buffer.active.getLine(d)){const h=y.translateToString(!0);if(y.isWrapped&&h[0]!==" "){for(n=0;(y=g.buffer.active.getLine(--k))&&n<2048&&(u=y.translateToString(!0),n+=u.length,a.push(u),y.isWrapped&&u.indexOf(" ")===-1););a.reverse()}for(a.push(h),n=0;(y=g.buffer.active.getLine(++v))&&y.isWrapped&&n<2048&&(u=y.translateToString(!0),n+=u.length,a.push(u),u.indexOf(" ")===-1););}return[a,k]}static _mapStrIdx(d,g,y,k){const v=d.buffer.active,n=v.getNullCell();let u=y;for(;k;){const a=v.getLine(g);if(!a)return[-1,-1];for(let h=u;h<a.length;++h){a.getCell(h,n);const m=n.getChars();if(n.getWidth()&&(k-=m.length||1,h===a.length-1&&m==="")){const C=v.getLine(g+1);C&&C.isWrapped&&(C.getCell(0,n),n.getWidth()===2&&(k+=1))}if(k<0)return[g,h]}g++,u=0}return[g,u]}}i.LinkComputer=f}},l={};function p(_){var i=l[_];if(i!==void 0)return i.exports;var o=l[_]={exports:{}};return t[_](o,o.exports,p),o.exports}var w={};return(()=>{var _=w;Object.defineProperty(_,"__esModule",{value:!0}),_.WebLinksAddon=void 0;const i=p(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(b,d){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}_.WebLinksAddon=class{constructor(b=f,d={}){this._handler=b,this._options=d}activate(b){this._terminal=b;const d=this._options,g=d.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,g,this._handler,d))}dispose(){var b;(b=this._linkProvider)==null||b.dispose()}}})(),w})())})(tn);var Qn=tn.exports;function ni(r){let e,t,l,p,w,_,i,o,f,b,d,g=r[1].name+"",y,k,v,n=hi(r[1].size)+"",u,a,h,m,C,x,M,S=r[3]&&oi(r),L=r[2]==="pending"&&li(r),B=r[2]==="accepting"&&ai(),R=r[2]==="completed"&&ci(r);return{c(){e=E("div"),t=E("div"),l=E("div"),l.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',p=O(),w=E("div"),_=E("div"),i=E("div"),o=E("span"),o.textContent="📄",f=O(),b=E("div"),d=E("span"),y=X(g),k=O(),v=E("span"),u=X(n),a=X(" 字节"),h=O(),m=E("div"),S&&S.c(),C=O(),L&&L.c(),x=O(),B&&B.c(),M=O(),R&&R.c(),s(l,"class","zmodem-download-header"),s(o,"class","zmodem-download-icon"),s(d,"class","zmodem-download-name"),s(v,"class","zmodem-download-size"),s(b,"class","zmodem-download-details"),s(i,"class","zmodem-download-file"),s(_,"class","zmodem-download-info"),s(m,"class","zmodem-download-actions"),s(w,"class","zmodem-download-body"),s(t,"class","zmodem-download-content"),s(e,"class","zmodem-download-modal")},m(P,A){V(P,e,A),c(e,t),c(t,l),c(t,p),c(t,w),c(w,_),c(_,i),c(i,o),c(i,f),c(i,b),c(b,d),c(d,y),c(b,k),c(b,v),c(v,u),c(v,a),c(w,h),c(w,m),S&&S.m(m,null),c(m,C),L&&L.m(m,null),c(m,x),B&&B.m(m,null),c(m,M),R&&R.m(m,null)},p(P,A){A[0]&2&&g!==(g=P[1].name+"")&&de(y,g),A[0]&2&&n!==(n=hi(P[1].size)+"")&&de(u,n),P[3]?S?S.p(P,A):(S=oi(P),S.c(),S.m(m,C)):S&&(S.d(1),S=null),P[2]==="pending"?L?L.p(P,A):(L=li(P),L.c(),L.m(m,x)):L&&(L.d(1),L=null),P[2]==="accepting"?B||(B=ai(),B.c(),B.m(m,M)):B&&(B.d(1),B=null),P[2]==="completed"?R?R.p(P,A):(R=ci(P),R.c(),R.m(m,null)):R&&(R.d(1),R=null)},d(P){P&&K(e),S&&S.d(),L&&L.d(),B&&B.d(),R&&R.d()}}}function oi(r){let e,t,l;return{c(){e=E("div"),t=X("❌ "),l=X(r[3]),s(e,"class","zmodem-error-message")},m(p,w){V(p,e,w),c(e,t),c(e,l)},p(p,w){w[0]&8&&de(l,p[3])},d(p){p&&K(e)}}}function li(r){let e,t,l,p,w,_,i,o;return{c(){e=E("p"),e.textContent="服务器正在发送文件，是否接收？",t=O(),l=E("div"),p=E("button"),p.textContent="拒绝",w=O(),_=E("button"),_.textContent="接收文件",s(e,"class","zmodem-download-prompt"),s(p,"class","zmodem-download-btn zmodem-btn-reject"),s(_,"class","zmodem-download-btn zmodem-btn-accept"),s(l,"class","zmodem-download-buttons")},m(f,b){V(f,e,b),V(f,t,b),V(f,l,b),c(l,p),c(l,w),c(l,_),i||(o=[ee(p,"click",r[6]),ee(_,"click",r[5])],i=!0)},p:Ee,d(f){f&&(K(e),K(t),K(l)),i=!1,Be(o)}}}function ai(r){let e;return{c(){e=E("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',s(e,"class","zmodem-downloading")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function ci(r){let e,t,l,p,w,_=(r[4]||r[1].name)+"",i;return{c(){e=E("div"),t=E("span"),t.textContent="✓",l=O(),p=E("span"),w=X("文件接收完成，已保存到："),i=X(_),s(t,"class","zmodem-success-icon"),s(e,"class","zmodem-completed")},m(o,f){V(o,e,f),c(e,t),c(e,l),c(e,p),c(p,w),c(p,i)},p(o,f){f[0]&18&&_!==(_=(o[4]||o[1].name)+"")&&de(i,_)},d(o){o&&K(e)}}}function $n(r){let e,t,l,p=r[1]&&ni(r);return{c(){e=E("div"),e.innerHTML="",t=O(),p&&p.c(),l=mt(),s(e,"class","terminal-container svelte-14g4vw6")},m(w,_){V(w,e,_),r[16](e),V(w,t,_),p&&p.m(w,_),V(w,l,_)},p(w,_){w[1]?p?p.p(w,_):(p=ni(w),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i:Ee,o:Ee,d(w){w&&(K(e),K(t),K(l)),r[16](null),p&&p.d(w)}}}function eo(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),l=window.URL.createObjectURL(t),p=document.createElement("a");p.href=l,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(l),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function to(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function ro(r){const e=[];let t=0;for await(const w of r)e.push(w),t+=w.length;const l=new Uint8Array(t);let p=0;for(const w of e)l.set(w,p),p+=w.length;return l}async function io(r,e){const t=await ro(r),{SaveBinaryFile:l}=window.wailsBindings||{};if(typeof l=="function"){const p=btoa(to(t));return await l(e,p)}return eo(t,e),null}function hi(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function so(r,e,t){let{sessionId:l=null}=e,{onData:p=null}=e,{onResize:w=null}=e,{onZModemTransfer:_=null}=e,i,o,f,b=null,d=null,g=null,y=!1,k=null,v=!1,n=null,u="pending",a=null,h=null,m=null,C=wn(or);const x={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},M={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},S=or.subscribe(G=>{C=G,o&&(o.options.theme=C==="light"?M:x)});lr(async()=>{o=new Yn.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:C==="light"?M:x,allowProposedApi:!0,scrollback:1e3,convertEol:!0,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),f=new Zn.FitAddon,o.loadAddon(f),o.loadAddon(new Qn.WebLinksAddon),o.open(i),f.fit(),o.attachCustomKeyEventHandler(j=>{if(j.metaKey&&j.key.toLowerCase()==="c"&&!j.shiftKey&&!j.ctrlKey){if(o.hasSelection()){const Z=o.getSelection();return navigator.clipboard.writeText(Z).catch(re=>{console.error("Failed to copy:",re)}),!1}return!0}if(j.ctrlKey&&!j.metaKey&&j.key.toLowerCase()==="c"&&!j.shiftKey){if(o.hasSelection()){const Z=o.getSelection();return navigator.clipboard.writeText(Z).catch(re=>{console.error("Failed to copy:",re)}),!1}return!0}return j.metaKey&&j.key.toLowerCase()==="v"&&!j.shiftKey&&!j.ctrlKey?(j.preventDefault(),navigator.clipboard.readText().then(Z=>{Z&&p&&l&&p(l,Z)}).catch(Z=>{console.error("Failed to read clipboard:",Z)}),!1):j.ctrlKey&&!j.metaKey&&j.key.toLowerCase()==="v"&&!j.shiftKey?(j.preventDefault(),navigator.clipboard.readText().then(Z=>{Z&&p&&l&&p(l,Z)}).catch(Z=>{console.error("Failed to read clipboard:",Z)}),!1):!0});try{const j=await dr(()=>import("./index2.js").then(Z=>Z.i),[]);b=j.default||j,d=new b.Sentry({to_terminal:Z=>{o&&o.write(new Uint8Array(Z))},sender:Z=>{if(l){if(_){_(l,new Uint8Array(Z));return}if(p){let re="";for(let I=0;I<Z.length;I++)re+=String.fromCharCode(Z[I]);p(l,re)}}},on_detect:Z=>{if(console.log("ZMODEM detected:",Z.type),console.log("Detection object:",Z),g=Z.confirm(),console.log("ZMODEM confirmed, type:",g.type,"has zsession:",!!g),!g){console.error("ERROR: zsession is null after confirm()");return}v=!0,o&&(o.options.disableStdin=!0),g.type==="receive"?(console.log("Calling handleZModemReceive for download"),P(g)):(console.log("Calling handleZModemSend for upload"),q(g))},on_retract:()=>{console.log("ZMODEM retracted"),g=null,v=!1,o&&(o.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(j){console.error("Failed to initialize ZMODEM:",j)}o.onData(j=>{p&&l&&p(l,j)}),o.onResize(({cols:j,rows:Z})=>{w&&l&&w(l,j,Z)});const G=new ResizeObserver(()=>{f.fit()});return G.observe(i),()=>{G.disconnect()}}),Er(()=>{S&&S(),o&&o.dispose()});function L(G){m||(m=document.createElement("div"),m.className="zmodem-progress-modal",m.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${G}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(m))}function B(G,j,Z,re,I){if(!m)return;const T=Math.min(100,Math.round(re/I*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${Z}`,document.getElementById("zmodem-progress-bar").style.width=`${T}%`,document.getElementById("zmodem-progress-text").textContent=`${T}%`,document.getElementById("zmodem-files-progress").textContent=`${G+1} / ${j}`}function R(){m&&(document.body.removeChild(m),m=null)}function P(G){t(1,n=null),k=null,t(2,u="pending"),t(3,a=null),t(4,h=null),G.on("offer",j=>{const Z=j.get_details();k=j,t(1,n=Z),t(2,u="pending"),t(3,a=null),t(4,h=null)}),G.on("session_end",()=>{k=null,g=null,v=!1,o&&(o.options.disableStdin=!1),u==="accepting"?(t(2,u="completed"),setTimeout(()=>{t(1,n=null),t(2,u="pending"),t(4,h=null)},1500)):(t(1,n=null),t(2,u="pending"),t(4,h=null))}),G.start()}async function A(){if(k){t(2,u="accepting"),t(3,a=null);try{await k.accept();const G=k.get_payloads(),j=k.get_details().name;t(4,h=await io(G,j)),k=null,t(2,u="completed")}catch(G){console.error("接收文件失败:",G),t(3,a=G.message||String(G)),t(2,u="pending")}}}function U(){k&&k.skip(),k=null,t(1,n=null),t(2,u="pending"),t(3,a=null),t(4,h=null)}async function q(G){console.log("handleZModemSend called, session:",G);const j=document.createElement("input");return j.type="file",j.multiple=!0,new Promise(Z=>{j.onchange=async re=>{const I=Array.from(re.target.files);if(console.log("Files selected:",I.length,I.map(T=>T.name)),I.length===0){console.log("No files selected, closing session"),G.close(),y=!1,v=!1,o&&(o.options.disableStdin=!1),Z();return}try{L(I.length),console.log("Starting to send files...");for(let T=0;T<I.length;T++){const $=I[T],z={name:$.name,size:$.size,mtime:new Date($.lastModified)};console.log(`Sending file ${T+1}/${I.length}:`,$.name,$.size),await J(G,$,z,T,I.length)}console.log("All files sent, closing session"),await G.close(),setTimeout(()=>{y=!1,R(),v=!1,o&&(o.options.disableStdin=!1),Z()},500)}catch(T){console.error("发送文件失败:",T),console.error("Error details:",T.stack),G.close(),y=!1,R(),v=!1,o&&(o.options.disableStdin=!1),Z()}},j.click()})}async function J(G,j,Z,re,I){return new Promise((T,$)=>{G.send_offer(Z).then(z=>{if(!z){T();return}const N=new FileReader,Q=8192;N.onload=te=>{const ae=te.target.result;let ce=0,le=0;function he(){if(ce<ae.byteLength){const fe=new Uint8Array(ae,ce,Math.min(Q,ae.byteLength-ce));z.send(fe),ce+=Q,le+=fe.byteLength,B(re,I,j.name,le,j.size),setTimeout(he,0)}else z.end().then(T).catch($)}he()},N.onerror=()=>{$(new Error("读取文件失败"))},N.readAsArrayBuffer(j)})})}function se(G){if(!o)return;let j;if(typeof G=="string"?j=new Uint8Array(G.split("").map(Z=>Z.charCodeAt(0))):G instanceof Uint8Array?j=G:j=new Uint8Array(G),d&&!y)try{d.consume(j);return}catch(Z){console.warn("ZMODEM consume failed:",Z),g=null,k=null,v=!1,y=!1,o&&(o.options.disableStdin=!1)}o.write(j)}function Y(G){o&&o.writeln(G)}function D(){o&&o.clear()}function H(){o&&o.focus()}function F(){return o?{cols:o.cols,rows:o.rows}:{cols:80,rows:24}}function W(G){at[G?"unshift":"push"](()=>{i=G,t(0,i)})}return r.$$set=G=>{"sessionId"in G&&t(7,l=G.sessionId),"onData"in G&&t(8,p=G.onData),"onResize"in G&&t(9,w=G.onResize),"onZModemTransfer"in G&&t(10,_=G.onZModemTransfer)},[i,n,u,a,h,A,U,l,p,w,_,se,Y,D,H,F,W]}class no extends ut{constructor(e){super(),dt(this,e,so,$n,ct,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function di(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k;const v=r[6].default,n=kn(v,r,r[5],null);return{c(){e=E("div"),t=E("div"),l=O(),p=E("div"),w=E("div"),_=E("h2"),i=X(r[2]),o=O(),f=E("button"),f.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=O(),d=E("div"),n&&n.c(),s(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),s(_,"class","text-base font-semibold text-gray-900 dark:text-white"),s(f,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(w,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex-1 overflow-y-auto p-6"),s(p,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center"),s(e,"role","dialog"),s(e,"aria-modal","true")},m(u,a){V(u,e,a),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(w,o),c(w,f),c(p,b),c(p,d),n&&n.m(d,null),g=!0,y||(k=[ee(f,"click",function(){Ht(r[1])&&r[1].apply(this,arguments)}),ee(e,"click",r[3])],y=!0)},p(u,a){r=u,(!g||a&4)&&de(i,r[2]),n&&n.p&&(!g||a&32)&&Cn(n,v,r,r[5],g?Sn(v,r[5],a,null):xn(r[5]),null)},i(u){g||(Te(n,u),g=!0)},o(u){Ae(n,u),g=!1},d(u){u&&K(e),n&&n.d(u),y=!1,Be(k)}}}function oo(r){let e,t,l=r[0]&&di(r);return{c(){l&&l.c(),e=mt()},m(p,w){l&&l.m(p,w),V(p,e,w),t=!0},p(p,[w]){p[0]?l?(l.p(p,w),w&1&&Te(l,1)):(l=di(p),l.c(),Te(l,1),l.m(e.parentNode,e)):l&&(Ct(),Ae(l,1,1,()=>{l=null}),xt())},i(p){t||(Te(l),t=!0)},o(p){Ae(l),t=!1},d(p){p&&K(e),l&&l.d(p)}}}function lo(r,e,t){let{$$slots:l={},$$scope:p}=e,{isOpen:w=!1}=e,{onClose:_=()=>{}}=e,{title:i=""}=e,{size:o="md"}=e;function f(d){d.target===d.currentTarget&&_()}function b(d){d.key==="Escape"&&w&&_()}return r.$$set=d=>{"isOpen"in d&&t(0,w=d.isOpen),"onClose"in d&&t(1,_=d.onClose),"title"in d&&t(2,i=d.title),"size"in d&&t(4,o=d.size),"$$scope"in d&&t(5,p=d.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&(w?document.addEventListener("keydown",b):document.removeEventListener("keydown",b))},[w,_,i,f,o,p,l]}class Lr extends ut{constructor(e){super(),dt(this,e,lo,oo,ct,{isOpen:0,onClose:1,title:2,size:4})}}function ao(r){let e,t,l,p,w,_,i,o,f,b,d,g,y;return{c(){e=E("div"),t=E("p"),l=X(r[2]),p=O(),w=E("div"),_=E("button"),i=X(r[4]),o=O(),f=E("button"),b=X(r[3]),s(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),s(_,"type","button"),s(_,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(f,"type","button"),s(f,"class",d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),s(w,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(k,v){V(k,e,v),c(e,t),c(t,l),c(e,p),c(e,w),c(w,_),c(_,i),c(w,o),c(w,f),c(f,b),g||(y=[ee(_,"click",function(){Ht(r[6])&&r[6].apply(this,arguments)}),ee(f,"click",function(){Ht(r[5])&&r[5].apply(this,arguments)})],g=!0)},p(k,v){r=k,v&4&&de(l,r[2]),v&16&&de(i,r[4]),v&8&&de(b,r[3]),v&128&&d!==(d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&s(f,"class",d)},d(k){k&&K(e),g=!1,Be(y)}}}function co(r){let e,t,l;function p(_){r[8](_)}let w={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[ao]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>kt(e,"isOpen",p)),{c(){Ve(e.$$.fragment)},m(_,i){Ne(e,_,i),l=!0},p(_,[i]){const o={};i&64&&(o.onClose=_[6]),i&2&&(o.title=_[1]),i&764&&(o.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,o.isOpen=_[0],wt(()=>t=!1)),e.$set(o)},i(_){l||(Te(e.$$.fragment,_),l=!0)},o(_){Ae(e.$$.fragment,_),l=!1},d(_){Ke(e,_)}}}function ho(r,e,t){let{isOpen:l=!1}=e,{title:p=""}=e,{message:w=""}=e,{confirmText:_="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:o=()=>{}}=e,{onCancel:f=()=>{}}=e,{type:b="default"}=e;function d(g){l=g,t(0,l)}return r.$$set=g=>{"isOpen"in g&&t(0,l=g.isOpen),"title"in g&&t(1,p=g.title),"message"in g&&t(2,w=g.message),"confirmText"in g&&t(3,_=g.confirmText),"cancelText"in g&&t(4,i=g.cancelText),"onConfirm"in g&&t(5,o=g.onConfirm),"onCancel"in g&&t(6,f=g.onCancel),"type"in g&&t(7,b=g.type)},[l,p,w,_,i,o,f,b,d]}class Ir extends ut{constructor(e){super(),dt(this,e,ho,co,ct,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function uo(r){window.runtime.LogPrint(r)}function fo(r){window.runtime.LogTrace(r)}function _o(r){window.runtime.LogDebug(r)}function po(r){window.runtime.LogInfo(r)}function go(r){window.runtime.LogWarning(r)}function mo(r){window.runtime.LogError(r)}function vo(r){window.runtime.LogFatal(r)}function zr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function _r(r,e){return zr(r,e,-1)}function bo(r,...e){return window.runtime.EventsOff(r,...e)}function yo(){return window.runtime.EventsOffAll()}function wo(r,e){return zr(r,e,1)}function ko(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function So(){window.runtime.WindowReload()}function Co(){window.runtime.WindowReloadApp()}function xo(r){window.runtime.WindowSetAlwaysOnTop(r)}function Eo(){window.runtime.WindowSetSystemDefaultTheme()}function Lo(){window.runtime.WindowSetLightTheme()}function Mo(){window.runtime.WindowSetDarkTheme()}function Do(){window.runtime.WindowCenter()}function To(r){window.runtime.WindowSetTitle(r)}function Bo(){window.runtime.WindowFullscreen()}function Ao(){window.runtime.WindowUnfullscreen()}function Ro(){return window.runtime.WindowIsFullscreen()}function Oo(){return window.runtime.WindowGetSize()}function Po(r,e){window.runtime.WindowSetSize(r,e)}function Ho(r,e){window.runtime.WindowSetMaxSize(r,e)}function Io(r,e){window.runtime.WindowSetMinSize(r,e)}function Fo(r,e){window.runtime.WindowSetPosition(r,e)}function Wo(){return window.runtime.WindowGetPosition()}function jo(){window.runtime.WindowHide()}function zo(){window.runtime.WindowShow()}function Uo(){window.runtime.WindowMaximise()}function No(){window.runtime.WindowToggleMaximise()}function Ko(){window.runtime.WindowUnmaximise()}function Vo(){return window.runtime.WindowIsMaximised()}function qo(){window.runtime.WindowMinimise()}function Go(){window.runtime.WindowUnminimise()}function Jo(r,e,t,l){window.runtime.WindowSetBackgroundColour(r,e,t,l)}function Xo(){return window.runtime.ScreenGetAll()}function Yo(){return window.runtime.WindowIsMinimised()}function Zo(){return window.runtime.WindowIsNormal()}function Qo(r){window.runtime.BrowserOpenURL(r)}function $o(){return window.runtime.Environment()}function el(){window.runtime.Quit()}function tl(){window.runtime.Hide()}function rl(){window.runtime.Show()}function il(){return window.runtime.ClipboardGetText()}function sl(r){return window.runtime.ClipboardSetText(r)}function nl(r,e){return window.runtime.OnFileDrop(r,e)}function ol(){return window.runtime.OnFileDropOff()}function ll(){return window.runtime.CanResolveFilePaths()}function al(r){return window.runtime.ResolveFilePaths(r)}const rn=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:Qo,CanResolveFilePaths:ll,ClipboardGetText:il,ClipboardSetText:sl,Environment:$o,EventsEmit:ko,EventsOff:bo,EventsOffAll:yo,EventsOn:_r,EventsOnMultiple:zr,EventsOnce:wo,Hide:tl,LogDebug:_o,LogError:mo,LogFatal:vo,LogInfo:po,LogPrint:uo,LogTrace:fo,LogWarning:go,OnFileDrop:nl,OnFileDropOff:ol,Quit:el,ResolveFilePaths:al,ScreenGetAll:Xo,Show:rl,WindowCenter:Do,WindowFullscreen:Bo,WindowGetPosition:Wo,WindowGetSize:Oo,WindowHide:jo,WindowIsFullscreen:Ro,WindowIsMaximised:Vo,WindowIsMinimised:Yo,WindowIsNormal:Zo,WindowMaximise:Uo,WindowMinimise:qo,WindowReload:So,WindowReloadApp:Co,WindowSetAlwaysOnTop:xo,WindowSetBackgroundColour:Jo,WindowSetDarkTheme:Mo,WindowSetLightTheme:Lo,WindowSetMaxSize:Ho,WindowSetMinSize:Io,WindowSetPosition:Fo,WindowSetSize:Po,WindowSetSystemDefaultTheme:Eo,WindowSetTitle:To,WindowShow:zo,WindowToggleMaximise:No,WindowUnfullscreen:Ao,WindowUnmaximise:Ko,WindowUnminimise:Go},Symbol.toStringTag,{value:"Module"})),{Map:sn}=Vs;function ui(r,e,t){const l=r.slice();return l[44]=e[t],l[45]=e,l[46]=t,l}function fi(r,e,t){const l=r.slice();return l[44]=e[t],l}function cl(r){let e=[],t=new sn,l,p=We(r[1]);const w=_=>_[44].sessionId;for(let _=0;_<p.length;_+=1){let i=fi(r,p,_),o=w(i);t.set(o,e[_]=_i(o,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();l=mt()},m(_,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(_,i);V(_,l,i)},p(_,i){i[0]&29666&&(p=We(_[1]),e=Tt(e,i,w,1,_,p,t,l.parentNode,It,_i,l,fi))},d(_){_&&K(l);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function hl(r){let e;return{c(){e=E("div"),e.textContent="没有活动连接",s(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function dl(r){let e,t=(r[44].tabName||r[44].connection.name)+"",l;return{c(){e=E("span"),l=X(t),s(e,"class","text-sm font-medium truncate flex-1")},m(p,w){V(p,e,w),c(e,l)},p(p,w){w[0]&2&&t!==(t=(p[44].tabName||p[44].connection.name)+"")&&de(l,t)},d(p){p&&K(e)}}}function ul(r){let e,t,l;return{c(){e=E("input"),s(e,"type","text"),s(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),s(e,"focus","")},m(p,w){V(p,e,w),ke(e,r[6]),t||(l=[ee(e,"input",r[24]),ee(e,"blur",r[13]),ee(e,"keydown",r[14])],t=!0)},p(p,w){w[0]&64&&e.value!==p[6]&&ke(e,p[6])},d(p){p&&K(e),t=!1,Be(l)}}}function _i(r,e){let t,l,p,w,_,i,o,f,b,d;function g(h,m){return h[5]===h[44].sessionId?ul:dl}let y=g(e),k=y(e);function v(...h){return e[25](e[44],...h)}function n(){return e[26](e[44])}function u(){return e[27](e[44])}function a(...h){return e[28](e[44],...h)}return{key:r,first:null,c(){t=E("div"),l=E("div"),w=O(),k.c(),_=O(),i=E("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=O(),s(l,"class",p=Yr(`w-2 h-2 rounded-full flex-shrink-0 ${e[44].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),s(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),s(t,"class",f="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[44].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),s(t,"role","button"),s(t,"tabindex","0"),this.first=t},m(h,m){V(h,t,m),c(t,l),c(t,w),k.m(t,null),c(t,_),c(t,i),c(t,o),b||(d=[ee(i,"click",v),ee(t,"click",n),ee(t,"dblclick",u),ee(t,"keydown",a)],b=!0)},p(h,m){e=h,m[0]&2&&p!==(p=Yr(`w-2 h-2 rounded-full flex-shrink-0 ${e[44].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&s(l,"class",p),y===(y=g(e))&&k?k.p(e,m):(k.d(1),k=y(e),k&&(k.c(),k.m(t,_))),m[0]&130&&f!==(f="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[44].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&s(t,"class",f)},d(h){h&&K(t),k.d(),b=!1,Be(d)}}}function fl(r){let e;return{c(){e=E("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',s(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,l){V(t,e,l)},p:Ee,i:Ee,o:Ee,d(t){t&&K(e)}}}function _l(r){let e,t=[],l=new sn,p,w=We(r[1]);const _=i=>i[44].sessionId;for(let i=0;i<w.length;i+=1){let o=ui(r,w,i),f=_(o);l.set(f,t[i]=pi(f,o))}return{c(){e=E("div");for(let i=0;i<t.length;i+=1)t[i].c();s(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,o){V(i,e,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);p=!0},p(i,o){o[0]&1835139&&(w=We(i[1]),Ct(),t=Tt(t,o,_,1,i,w,l,e,Bn,pi,null,ui),xt())},i(i){if(!p){for(let o=0;o<w.length;o+=1)Te(t[o]);p=!0}},o(i){for(let o=0;o<t.length;o+=1)Ae(t[o]);p=!1},d(i){i&&K(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function pl(r){let e=r[44].connection.username+"",t,l,p=r[44].connection.host+"",w,_,i=r[44].connection.port+"",o;return{c(){t=X(e),l=X("@"),w=X(p),_=X(":"),o=X(i)},m(f,b){V(f,t,b),V(f,l,b),V(f,w,b),V(f,_,b),V(f,o,b)},p(f,b){b[0]&2&&e!==(e=f[44].connection.username+"")&&de(t,e),b[0]&2&&p!==(p=f[44].connection.host+"")&&de(w,p),b[0]&2&&i!==(i=f[44].connection.port+"")&&de(o,i)},d(f){f&&(K(t),K(l),K(w),K(_),K(o))}}}function gl(r){let e,t=r[44].connection.name!=="Local Shell"?` (${r[44].connection.name})`:"",l;return{c(){e=X("本地终端"),l=X(t)},m(p,w){V(p,e,w),V(p,l,w)},p(p,w){w[0]&2&&t!==(t=p[44].connection.name!=="Local Shell"?` (${p[44].connection.name})`:"")&&de(l,t)},d(p){p&&(K(e),K(l))}}}function pi(r,e){let t,l,p,w,_,i,o,f,b=e[44],d,g,y;function k(m,C){return m[44].type==="local"?gl:pl}let v=k(e),n=v(e);const u=()=>e[29](f,b),a=()=>e[29](null,b);let h={sessionId:e[44].sessionId,onData:e[18],onResize:e[20],onZModemTransfer:e[19]};return f=new no({props:h}),u(),{key:r,first:null,c(){t=E("div"),l=E("div"),p=E("div"),n.c(),w=O(),_=E("div"),_.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=O(),o=E("div"),Ve(f.$$.fragment),d=O(),s(p,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),s(_,"class","flex items-center gap-1"),s(l,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),s(o,"class","flex-1 overflow-hidden"),s(t,"class",g="terminal-wrapper "+(e[7]===e[44].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(m,C){V(m,t,C),c(t,l),c(l,p),n.m(p,null),c(l,w),c(l,_),c(t,i),c(t,o),Ne(f,o,null),c(t,d),y=!0},p(m,C){e=m,v===(v=k(e))&&n?n.p(e,C):(n.d(1),n=v(e),n&&(n.c(),n.m(p,null))),b!==e[44]&&(a(),b=e[44],u());const x={};C[0]&2&&(x.sessionId=e[44].sessionId),f.$set(x),(!y||C[0]&130&&g!==(g="terminal-wrapper "+(e[7]===e[44].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&s(t,"class",g)},i(m){y||(Te(f.$$.fragment,m),y=!0)},o(m){Ae(f.$$.fragment,m),y=!1},d(m){m&&K(t),n.d(),a(),Ke(f)}}}function gi(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x;return m=Ln(r[32][0]),{c(){e=E("div"),t=E("div"),l=E("div"),l.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',p=O(),w=E("div"),_=E("label"),i=E("input"),o=O(),f=E("div"),f.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',b=O(),d=E("label"),g=E("input"),y=O(),k=E("div"),k.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',v=O(),n=E("div"),u=E("button"),u.textContent="取消",a=O(),h=E("button"),h.textContent="确定",s(l,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),s(i,"type","radio"),i.__value="powershell",ke(i,i.__value),s(i,"class","w-4 h-4 text-purple-600"),s(_,"class","flex items-center space-x-3 cursor-pointer"),s(g,"type","radio"),g.__value="cmd",ke(g,g.__value),s(g,"class","w-4 h-4 text-purple-600"),s(d,"class","flex items-center space-x-3 cursor-pointer"),s(w,"class","px-6 py-4 space-y-3"),s(u,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),s(h,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),s(n,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),s(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),s(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),m.p(i,g)},m(M,S){V(M,e,S),c(e,t),c(t,l),c(t,p),c(t,w),c(w,_),c(_,i),i.checked=i.__value===r[4],c(_,o),c(_,f),c(w,b),c(w,d),c(d,g),g.checked=g.__value===r[4],c(d,y),c(d,k),c(t,v),c(t,n),c(n,u),c(n,a),c(n,h),C||(x=[ee(i,"change",r[31]),ee(g,"change",r[33]),ee(u,"click",r[17]),ee(h,"click",r[16])],C=!0)},p(M,S){S[0]&16&&(i.checked=i.__value===M[4]),S[0]&16&&(g.checked=g.__value===M[4])},d(M){M&&K(e),m.r(),C=!1,Be(x)}}}function ml(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v;function n(L,B){return L[1].length===0?hl:cl}let u=n(r),a=u(r);const h=[_l,fl],m=[];function C(L,B){return L[1].length>0?0:1}_=C(r),i=m[_]=h[_](r);function x(L){r[30](L)}let M={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[10],onCancel:r[11]};r[2]!==void 0&&(M.isOpen=r[2]),f=new Ir({props:M}),at.push(()=>kt(f,"isOpen",x));let S=r[3]&&gi(r);return{c(){e=E("div"),t=E("div"),a.c(),l=O(),p=E("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',w=O(),i.c(),o=O(),Ve(f.$$.fragment),d=O(),S&&S.c(),g=mt(),s(p,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),s(p,"title","打开本地终端"),s(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(L,B){V(L,e,B),c(e,t),a.m(t,null),c(t,l),c(t,p),c(e,w),m[_].m(e,null),V(L,o,B),Ne(f,L,B),V(L,d,B),S&&S.m(L,B),V(L,g,B),y=!0,k||(v=ee(p,"click",r[15]),k=!0)},p(L,B){u===(u=n(L))&&a?a.p(L,B):(a.d(1),a=u(L),a&&(a.c(),a.m(t,l)));let R=_;_=C(L),_===R?m[_].p(L,B):(Ct(),Ae(m[R],1,1,()=>{m[R]=null}),xt(),i=m[_],i?i.p(L,B):(i=m[_]=h[_](L),i.c()),Te(i,1),i.m(e,null));const P={};!b&&B[0]&4&&(b=!0,P.isOpen=L[2],wt(()=>b=!1)),f.$set(P),L[3]?S?S.p(L,B):(S=gi(L),S.c(),S.m(g.parentNode,g)):S&&(S.d(1),S=null)},i(L){y||(Te(i),Te(f.$$.fragment,L),y=!0)},o(L){Ae(i),Ae(f.$$.fragment,L),y=!1},d(L){L&&(K(e),K(o),K(d),K(g)),a.d(),m[_].d(),Ke(f,L),S&&S.d(L),k=!1,v()}}}function vl(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r,0),t.set(e,r.length),t}function bl(r){const e=[27,93,55,59];let t=-1;for(let p=r.length-e.length;p>=0;p--)if(r[p]===e[0]&&r[p+1]===e[1]&&r[p+2]===e[2]&&r[p+3]===e[3]){t=p;break}return t===-1?r.slice(Math.max(0,r.length-(e.length-1))):yl(r,t+e.length)===-1?r.slice(t):r.slice(Math.max(0,r.length-(e.length-1)))}function yl(r,e){for(let t=e;t<r.length;t++)if(r[t]===7||r[t]===27&&t+1<r.length&&r[t+1]===92)return t;return-1}function wl(r){const e=[],t=[27,93,55,59];let l=0;for(;l<=r.length-t.length;){if(r[l]===t[0]&&r[l+1]===t[1]&&r[l+2]===t[2]&&r[l+3]===t[3]){l+=t.length;const p=l;let w=-1;for(;l<r.length;){if(r[l]===7){w=l,l+=1;break}if(r[l]===27&&l+1<r.length&&r[l+1]===92){w=l,l+=2;break}l+=1}if(w>p){const _=kl(r.slice(p,w)),i=Sl(_);i&&e.push(i)}continue}l+=1}return e}function kl(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Sl(r){if(!r)return"";let e=r;if(e.startsWith("file://")){e=e.slice(7);const t=e.indexOf("/");if(t===-1)return"/";e=e.slice(t)}else e.startsWith("file:")&&(e=e.slice(5));try{e=decodeURIComponent(e)}catch{return e}return e}function Fr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function mi(r){return btoa(Fr(r))}function Cl(r,e,t){let l,p;gt(r,Ut,N=>t(7,l=N)),gt(r,Dt,N=>t(23,p=N));let w={},_=[],i=new Map,o=new Map,f=!1,b=null,d=!1,g="powershell";async function y(N){var ie;if(console.log("Connecting to:",N),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:Q,GetPassword:te,HasPassword:ae,SavePassword:ce}=window.wailsBindings;if(typeof Q!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let le="",he="";if(N.auth_type==="key")he=prompt(`连接到 ${N.name}
如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：`)||"",le=N.key_path||"";else try{if(typeof ae=="function"&&await ae(N.id))le=await te(N.id),console.log("Using saved password");else if(le=prompt(`连接到 ${N.name}
请输入密码：`)||"",le&&confirm("是否保存密码以便下次自动连接？")&&typeof ce=="function")try{await ce(N.id,le),console.log("Password saved successfully")}catch(me){console.error("Failed to save password:",me)}}catch(_e){console.error("Failed to get saved password:",_e),le=prompt(`连接到 ${N.name}
请输入密码：`)||""}if(!le){console.log("Connection cancelled - no auth value provided");return}const fe=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",N.host,N.port,N.username,"auth_type:",N.auth_type);const ye={sessionId:fe,connection:N,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};Dt.update(_e=>(_e.set(fe,ye),_e)),Ut.set(fe),await Sr(),await new Promise(_e=>setTimeout(_e,50));let be=(ie=w[fe])==null?void 0:ie.getSize();if(be||(be={cols:80,rows:24},console.warn("Terminal not ready, using default size:",be)),console.log("Subscribing to events for session:",fe),H(fe),await new Promise(_e=>setTimeout(_e,100)),!w[fe]){console.error("Terminal component not ready after delay");return}const ve=w[fe];if(!ve){console.error("Failed to get terminal reference for session:",fe);return}console.log("Terminal ready, attempting to connect...");const ue=N.auth_type==="key"?"SSH key":"password";ve.writeln(`正在连接 ${N.username}@${N.host}:${N.port} (${ue})...`),ve.writeln("");try{await Q(fe,N.host,N.port,N.username,N.auth_type||"password",le,he,be.cols,be.rows),ye.connected=!0,Dt.update(_e=>(_e.set(fe,ye),_e)),setTimeout(()=>{ve.focus()},100)}catch(_e){console.error("Failed to connect:",_e),ve&&ve.writeln(`\r
连接失败: ${_e.message||_e}`),await k(fe)}}async function k(N){const Q=i.get(N);Q&&(Q(),i.delete(N)),delete w[N];const{CloseSSH:te}=window.wailsBindings||{};if(typeof te=="function")try{await te(N)}catch(ce){console.error("Failed to close session:",ce)}Dt.update(ce=>(ce.delete(N),ce));const ae=Array.from(p.keys());l===N&&(ae.length>0?Ut.set(ae[0]):Ut.set(null))}function v(N){p.has(N)&&(Ut.set(N),setTimeout(()=>{const Q=w[N];if(Q){Q.focus();const te=Q.getSize(),{ResizeSSH:ae}=window.wailsBindings||{};typeof ae=="function"&&ae(N,te.cols,te.rows).catch(console.error)}},50))}function n(N,Q){Q.stopPropagation();const te=p.get(N);te&&(te.connected?(b=N,t(2,f=!0)):k(N))}function u(){b&&(k(b),b=null),t(2,f=!1)}function a(){b=null,t(2,f=!1)}function h(N,Q){const te=p.get(N);te&&(te.tabName=Q.trim(),Dt.update(ae=>(ae.set(N,te),ae)))}let m=null,C="";function x(N){const Q=p.get(N);Q&&(t(5,m=N),t(6,C=Q.tabName||Q.connection.name))}function M(){m&&C.trim()&&h(m,C.trim()),t(5,m=null),t(6,C="")}function S(){t(5,m=null),t(6,C="")}function L(N){N.key==="Enter"?M():N.key==="Escape"&&S()}async function B(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:N,SendSSHData:Q,ResizeSSH:te}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(3,d=!0);return}await R("")}async function R(N){var he;const{ConnectLocalShell:Q}=window.wailsBindings,te=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ae={sessionId:te,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};Dt.update(fe=>(fe.set(te,ae),fe)),Ut.set(te),await Sr(),await new Promise(fe=>setTimeout(fe,50));let ce=(he=w[te])==null?void 0:he.getSize();if(ce||(ce={cols:80,rows:24},console.warn("Terminal not ready, using default size:",ce)),console.log("Subscribing to local events for session:",te),U(te),await new Promise(fe=>setTimeout(fe,100)),!w[te]){console.error("Terminal component not ready after delay");return}const le=w[te];if(!le){console.error("Failed to get terminal reference for session:",te);return}console.log("Terminal ready, starting local shell..."),le.writeln(`正在启动本地终端${N?` (${N})`:""}...`),le.writeln("");try{await Q(te,N,ce.cols,ce.rows),ae.connected=!0,Dt.update(fe=>(fe.set(te,ae),fe)),setTimeout(()=>{le.focus()},100)}catch(fe){console.error("Failed to start local shell:",fe),le&&le.writeln(`\r
启动本地终端失败: ${fe.message||fe}`),await k(te)}}function P(){t(3,d=!1),R(g)}function A(){t(3,d=!1)}function U(N){const Q=`local:output:${N}`,te=_r(Q,ae=>{const ce=w[N];if(ce){const le=atob(ae),he=new Uint8Array(le.length);for(let fe=0;fe<le.length;fe++)he[fe]=le.charCodeAt(fe);q(N,he,!0),ce.write(he)}});i.set(N,te)}function q(N,Q,te){if(!N||!Q||Q.length===0||te)return;const{paths:ae,pending:ce}=J(N,Q);if(o.set(N,ce),ae.length===0)return;const le=ae[ae.length-1];if(!le)return;const{UpdateCurrentPath:he}=window.wailsBindings||{};typeof he=="function"&&he(N,le).catch(fe=>{console.error("Failed to update current path:",fe)})}function J(N,Q){const te=o.get(N),ae=te&&te.length>0?vl(te,Q):Q,ce=wl(ae),le=bl(ae);return{paths:ce,pending:le}}function se(N,Q){if(!p.has(N))return;const te=p.get(N),{SendSSHData:ae,SendLocalShellData:ce}=window.wailsBindings||{};te&&te.type==="local"?typeof ce=="function"&&ce(N,Q).catch(le=>{console.error("Failed to send local shell data:",le)}):typeof ae=="function"&&ae(N,Q).catch(le=>{console.error("Failed to send SSH data:",le)})}function Y(N,Q){if(!p.has(N))return;const te=p.get(N),{SendSSHData:ae,SendSSHDataBinary:ce,SendLocalShellData:le,SendLocalShellDataBinary:he}=window.wailsBindings||{};if(te&&te.type==="local"){if(typeof he=="function"){const fe=mi(Q);he(N,fe).catch(ye=>{console.error("Failed to send local shell binary data:",ye)})}else if(typeof le=="function"){const fe=Fr(Q);le(N,fe).catch(ye=>{console.error("Failed to send local shell data:",ye)})}}else if(typeof ce=="function"){const fe=mi(Q);ce(N,fe).catch(ye=>{console.error("Failed to send SSH binary data:",ye)})}else if(typeof ae=="function"){const fe=Fr(Q);ae(N,fe).catch(ye=>{console.error("Failed to send SSH data:",ye)})}}function D(N,Q,te){if(!p.has(N))return;const ae=p.get(N),{ResizeSSH:ce,ResizeLocalShell:le}=window.wailsBindings||{};ae&&ae.type==="local"?typeof le=="function"&&le(N,Q,te).catch(he=>{console.error("Failed to resize local terminal:",he)}):typeof ce=="function"&&ce(N,Q,te).catch(he=>{console.error("Failed to resize SSH terminal:",he)})}function H(N){const Q=`ssh:output:${N}`,te=_r(Q,ae=>{const ce=w[N];if(ce){const le=atob(ae),he=new Uint8Array(le.length);for(let fe=0;fe<le.length;fe++)he[fe]=le.charCodeAt(fe);q(N,he,!1),ce.write(he)}});i.set(N,te)}Er(()=>{i.forEach(N=>{N()})}),lr(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=w,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",_),await Sr(),l&&w[l]&&setTimeout(()=>{w[l].focus()},100)});const F=[[]];function W(){C=this.value,t(6,C)}const G=(N,Q)=>n(N.sessionId,Q),j=N=>v(N.sessionId),Z=N=>x(N.sessionId),re=(N,Q)=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),v(N.sessionId))};function I(N,Q){at[N?"unshift":"push"](()=>{w[Q.sessionId]=N,t(0,w)})}function T(N){f=N,t(2,f)}function $(){g=this.__value,t(4,g)}function z(){g=this.__value,t(4,g)}return r.$$.update=()=>{r.$$.dirty[0]&8388608&&t(1,_=p?Array.from(p.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=w)},[w,_,f,d,g,m,C,l,v,n,u,a,x,M,L,B,P,A,se,Y,D,y,H,p,W,G,j,Z,re,I,T,$,F,z]}class xl extends ut{constructor(e){super(),dt(this,e,Cl,ml,ct,{handleConnect:21,subscribeToOutput:22},null,[-1,-1])}get handleConnect(){return this.$$.ctx[21]}get subscribeToOutput(){return this.$$.ctx[22]}}function El(r){return window.go.main.App.AddConnection(r)}function Ll(r,e){return window.go.main.App.CalculateHash(r,e)}function Ur(r){return window.go.main.App.CancelTransfer(r)}function Ml(r,e){return window.go.main.App.ChangeDirectory(r,e)}function Dl(r){return window.go.main.App.CloseSSH(r)}function Tl(r,e,t,l){return window.go.main.App.ConnectLocalShell(r,e,t,l)}function Bl(r,e,t,l,p,w,_,i,o){return window.go.main.App.ConnectSSH(r,e,t,l,p,w,_,i,o)}function Al(r,e){return window.go.main.App.CreateDirectory(r,e)}function Rl(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function Ol(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function Pl(r){return window.go.main.App.DecodeBase64(r)}function Hl(r,e,t,l){return window.go.main.App.DecryptText(r,e,t,l)}function Il(r,e){return window.go.main.App.DeleteFile(r,e)}function nn(r,e){return window.go.main.App.DeleteFiles(r,e)}function Fl(r){return window.go.main.App.DeletePassword(r)}function Wl(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function on(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function jl(r){return window.go.main.App.EncodeBase64(r)}function zl(r,e,t,l){return window.go.main.App.EncryptText(r,e,t,l)}function Ul(r){return window.go.main.App.EscapeJSON(r)}function Nl(r){return window.go.main.App.FormatJSON(r)}function Kl(){return window.go.main.App.GenerateUUIDv4()}function Vl(r){return window.go.main.App.GetConnection(r)}function ql(){return window.go.main.App.GetConnections()}function Gl(r){return window.go.main.App.GetCurrentPath(r)}function Jl(){return window.go.main.App.GetCurrentTimestamp()}function Xl(){return window.go.main.App.GetCurrentTimestampMs()}function Yl(r,e){return window.go.main.App.GetFileInfo(r,e)}function Zl(r){return window.go.main.App.GetFileManagerSettings(r)}function Ql(r){return window.go.main.App.GetMonitoringData(r)}function $l(r){return window.go.main.App.GetPassword(r)}function ea(){return window.go.main.App.GetSettings()}function ta(r){return window.go.main.App.GetTransferStatus(r)}function ra(){return window.go.main.App.GetVersion()}function ia(r){return window.go.main.App.Greet(r)}function sa(r){return window.go.main.App.HasPassword(r)}function ln(r,e){return window.go.main.App.ListFiles(r,e)}function na(){return window.go.main.App.ListSSHSessions()}function oa(r){return window.go.main.App.MinifyJSON(r)}function la(r){return window.go.main.App.ParseURL(r)}function aa(r){return window.go.main.App.RemoveConnection(r)}function an(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function ca(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function ha(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function da(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function ua(r,e){return window.go.main.App.SavePassword(r,e)}function cn(r,e,t,l,p){return window.go.main.App.SearchDirectories(r,e,t,l,p)}function hn(){return window.go.main.App.SelectDownloadDirectory()}function fa(){return window.go.main.App.SelectSSHKeyFile()}function dn(){return window.go.main.App.SelectUploadFiles()}function _a(r,e){return window.go.main.App.SendLocalShellData(r,e)}function pa(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function ga(r,e){return window.go.main.App.SendSSHData(r,e)}function ma(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function va(){return window.go.main.App.ShowAboutDialog()}function ba(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function ya(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function wa(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function ka(r,e,t,l,p,w){return window.go.main.App.TestConnection(r,e,t,l,p,w)}function Sa(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function Ca(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function xa(r,e){return window.go.main.App.URLDecode(r,e)}function Ea(r,e){return window.go.main.App.URLEncode(r,e)}function La(r){return window.go.main.App.UpdateConnection(r)}function Ma(r,e){return window.go.main.App.UpdateCurrentPath(r,e)}function Da(r,e){return window.go.main.App.UpdateFileManagerSettings(r,e)}function Ta(r){return window.go.main.App.UpdateSettings(r)}function un(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function Ba(r){return window.go.main.App.ValidateJSON(r)}const fn=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:El,CalculateHash:Ll,CancelTransfer:Ur,ChangeDirectory:Ml,CloseSSH:Dl,ConnectLocalShell:Tl,ConnectSSH:Bl,CreateDirectory:Al,DateTimeToTimestamp:Rl,DateTimeToTimestampMs:Ol,DecodeBase64:Pl,DecryptText:Hl,DeleteFile:Il,DeleteFiles:nn,DeletePassword:Fl,DownloadFile:Wl,DownloadFiles:on,EncodeBase64:jl,EncryptText:zl,EscapeJSON:Ul,FormatJSON:Nl,GenerateUUIDv4:Kl,GetConnection:Vl,GetConnections:ql,GetCurrentPath:Gl,GetCurrentTimestamp:Jl,GetCurrentTimestampMs:Xl,GetFileInfo:Yl,GetFileManagerSettings:Zl,GetMonitoringData:Ql,GetPassword:$l,GetSettings:ea,GetTransferStatus:ta,GetVersion:ra,Greet:ia,HasPassword:sa,ListFiles:ln,ListSSHSessions:na,MinifyJSON:oa,ParseURL:la,RemoveConnection:aa,RenameFile:an,ResizeLocalShell:ca,ResizeSSH:ha,SaveBinaryFile:da,SavePassword:ua,SearchDirectories:cn,SelectDownloadDirectory:hn,SelectSSHKeyFile:fa,SelectUploadFiles:dn,SendLocalShellData:_a,SendLocalShellDataBinary:pa,SendSSHData:ga,SendSSHDataBinary:ma,ShowAboutDialog:va,ShowErrorDialog:ba,ShowMessageDialog:ya,ShowQuestionDialog:wa,TestConnection:ka,TimestampToDateTime:Sa,TimestampToDateTimeMs:Ca,URLDecode:xa,URLEncode:Ea,UpdateConnection:La,UpdateCurrentPath:Ma,UpdateFileManagerSettings:Da,UpdateSettings:Ta,UploadFiles:un,ValidateJSON:Ba},Symbol.toStringTag,{value:"Module"})),Aa={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:Ra,set:Oa,update:Rt}=Vt(Aa),Mr={subscribe:Ra,set:Oa,addTransfer:r=>Rt(e=>{const t=e.transfers.filter(p=>p.status!=="running");let l=e.transfers;if(t.length>=e.maxHistory){const p=t.length-e.maxHistory+1,w=t.slice(0,p).map(_=>_.id);l=e.transfers.filter(_=>!w.includes(_.id))}return{...e,transfers:[r,...l]}}),updateTransfer:(r,e)=>Rt(t=>({...t,transfers:t.transfers.map(l=>l.id===r?{...l,...e}:l)})),cancelTransfer:r=>Rt(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>Rt(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>Rt(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>Rt(r=>({...r,transfers:[]})),togglePanel:()=>Rt(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>Rt(e=>({...e,isPanelOpen:r})),setActiveTab:r=>Rt(e=>({...e,activeTab:r}))};function Pt(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function vi(r){return r?`${Pt(r)}/s`:"0 B/s"}function wr(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const Pa=Bt(Mr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),Ha=Bt(Mr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));Bt(Mr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(w=>w.status==="running");if(e.length===0)return 0;let t=0,l=0;return e.forEach(w=>{const _=w.totalBytes||0,i=w.bytesSent||0;t+=_,l+=i}),t>0?l/t*100:e.reduce((w,_)=>_.totalBytes?w+_.bytesSent/_.totalBytes*100:w+(_.percentage||0),0)/e.length});const yt=Mr;function bi(r){let e,t;return{c(){e=E("p"),t=X(r[2]),s(e,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed")},m(l,p){V(l,e,p),c(e,t)},p(l,p){p&4&&de(t,l[2])},d(l){l&&K(e)}}}function Ia(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k=r[2]&&bi(r);return{c(){e=E("div"),k&&k.c(),t=O(),l=E("input"),p=O(),w=E("div"),_=E("button"),i=X(r[5]),o=O(),f=E("button"),b=X(r[4]),s(l,"type","text"),s(l,"placeholder",r[3]),s(l,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(_,"type","button"),s(_,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(f,"type","button"),f.disabled=d=!r[8].trim(),s(f,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(w,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(v,n){V(v,e,n),k&&k.m(e,null),c(e,t),c(e,l),r[13](l),ke(l,r[8]),c(e,p),c(e,w),c(w,_),c(_,i),c(w,o),c(w,f),c(f,b),g||(y=[ee(l,"input",r[14]),ee(l,"keydown",r[10]),ee(_,"click",function(){Ht(r[6])&&r[6].apply(this,arguments)}),ee(f,"click",r[9])],g=!0)},p(v,n){r=v,r[2]?k?k.p(r,n):(k=bi(r),k.c(),k.m(e,t)):k&&(k.d(1),k=null),n&8&&s(l,"placeholder",r[3]),n&256&&l.value!==r[8]&&ke(l,r[8]),n&32&&de(i,r[5]),n&16&&de(b,r[4]),n&256&&d!==(d=!r[8].trim())&&(f.disabled=d)},d(v){v&&K(e),k&&k.d(),r[13](null),g=!1,Be(y)}}}function Fa(r){let e,t,l;function p(_){r[15](_)}let w={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[Ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>kt(e,"isOpen",p)),{c(){Ve(e.$$.fragment)},m(_,i){Ne(e,_,i),l=!0},p(_,[i]){const o={};i&64&&(o.onClose=_[6]),i&2&&(o.title=_[1]),i&66044&&(o.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,o.isOpen=_[0],wt(()=>t=!1)),e.$set(o)},i(_){l||(Te(e.$$.fragment,_),l=!0)},o(_){Ae(e.$$.fragment,_),l=!1},d(_){Ke(e,_)}}}function Wa(r,e,t){let{isOpen:l=!1}=e,{title:p=""}=e,{message:w=""}=e,{defaultValue:_=""}=e,{placeholder:i=""}=e,{confirmText:o="确定"}=e,{cancelText:f="取消"}=e,{onConfirm:b=()=>{}}=e,{onCancel:d=()=>{}}=e,g="",y;function k(){g.trim()&&b(g.trim())}function v(h){h.key==="Enter"&&k()}function n(h){at[h?"unshift":"push"](()=>{y=h,t(7,y)})}function u(){g=this.value,t(8,g),t(0,l),t(11,_)}function a(h){l=h,t(0,l)}return r.$$set=h=>{"isOpen"in h&&t(0,l=h.isOpen),"title"in h&&t(1,p=h.title),"message"in h&&t(2,w=h.message),"defaultValue"in h&&t(11,_=h.defaultValue),"placeholder"in h&&t(3,i=h.placeholder),"confirmText"in h&&t(4,o=h.confirmText),"cancelText"in h&&t(5,f=h.cancelText),"onConfirm"in h&&t(12,b=h.onConfirm),"onCancel"in h&&t(6,d=h.onCancel)},r.$$.update=()=>{r.$$.dirty&2049&&l&&t(8,g=_),r.$$.dirty&129&&l&&y&&setTimeout(()=>{y==null||y.focus(),y==null||y.select()},0)},[l,p,w,i,o,f,d,y,g,k,v,_,b,n,u,a]}class ja extends ut{constructor(e){super(),dt(this,e,Wa,Fa,ct,{isOpen:0,title:1,message:2,defaultValue:11,placeholder:3,confirmText:4,cancelText:5,onConfirm:12,onCancel:6})}}const{Map:Dr}=Vs;function yi(r,e,t){const l=r.slice();return l[113]=e[t],l[115]=t,l}function wi(r,e,t){const l=r.slice();return l[116]=e[t],l[115]=t,l}function ki(r,e,t){const l=r.slice();return l[118]=e[t],l[115]=t,l}function Si(r,e,t){const l=r.slice();return l[113]=e[t],l[115]=t,l}function Ci(r){let e,t,l,p,w,_,i=r[4]?"跟踪中":"已暂停",o,f,b,d;return{c(){e=E("button"),t=oe("svg"),l=oe("path"),p=oe("path"),w=O(),_=E("span"),o=X(i),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(t,"class","w-3 h-3"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[6],s(e,"class",f=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${r[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`),s(e,"title","切换目录跟踪")},m(g,y){V(g,e,y),c(e,t),c(t,l),c(t,p),c(e,w),c(e,_),c(_,o),b||(d=ee(e,"click",r[65]),b=!0)},p(g,y){y[0]&16&&i!==(i=g[4]?"跟踪中":"已暂停")&&de(o,i),y[0]&64&&(e.disabled=g[6]),y[0]&16&&f!==(f=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${g[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`)&&s(e,"class",f)},d(g){g&&K(e),b=!1,d()}}}function za(r){let e,t,l;function p(i,o){return i[3]==="/"?Ka:Na}let w=p(r),_=w(r);return{c(){e=E("span"),_.c(),s(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),s(e,"title","点击编辑路径")},m(i,o){V(i,e,o),_.m(e,null),t||(l=ee(e,"click",r[51]),t=!0)},p(i,o){w===(w=p(i))&&_?_.p(i,o):(_.d(1),_=w(i),_&&(_.c(),_.m(e,null)))},d(i){i&&K(e),_.d(),t=!1,l()}}}function Ua(r){let e,t,l,p,w;return{c(){e=E("span"),e.textContent="/",t=O(),l=E("input"),s(e,"class","text-gray-400 dark:text-gray-500"),s(l,"type","text"),s(l,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(_,i){V(_,e,i),V(_,t,i),V(_,l,i),ke(l,r[21]),p||(w=[ee(l,"input",r[68]),ee(l,"keydown",r[69]),ee(l,"blur",r[52]),Ks(_n.call(null,l))],p=!0)},p(_,i){i[0]&2097152&&l.value!==_[21]&&ke(l,_[21])},d(_){_&&(K(e),K(t),K(l)),p=!1,Be(w)}}}function Na(r){let e=r[3].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=X(e)},m(l,p){V(l,t,p)},p(l,p){p[0]&8&&e!==(e=l[3].split("/").filter(Boolean).join(" / ")+"")&&de(t,e)},d(l){l&&K(t)}}}function Ka(r){let e;return{c(){e=X("/")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function xi(r){let e,t,l,p,w,_;function i(b,d){return b[28].length>0?qa:Va}let o=i(r),f=o(r);return{c(){e=E("div"),t=E("div"),l=E("input"),p=O(),f.c(),s(l,"type","text"),s(l,"placeholder","搜索历史..."),s(l,"class","w-full px-2 py-1 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"),s(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg w-64 max-h-64 overflow-y-auto z-10")},m(b,d){V(b,e,d),c(e,t),c(t,l),ke(l,r[2]),c(e,p),f.m(e,null),w||(_=ee(l,"input",r[71]),w=!0)},p(b,d){d[0]&4&&l.value!==b[2]&&ke(l,b[2]),o===(o=i(b))&&f?f.p(b,d):(f.d(1),f=o(b),f&&(f.c(),f.m(e,null)))},d(b){b&&K(e),f.d(),w=!1,_()}}}function Va(r){let e,t=r[2]?"无匹配的历史":"暂无历史记录",l;return{c(){e=E("div"),l=X(t),s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(p,w){V(p,e,w),c(e,l)},p(p,w){w[0]&4&&t!==(t=p[2]?"无匹配的历史":"暂无历史记录")&&de(l,t)},d(p){p&&K(e)}}}function qa(r){let e=[],t=new Dr,l,p=We(r[28]);const w=_=>_[113];for(let _=0;_<p.length;_+=1){let i=Si(r,p,_),o=w(i);t.set(o,e[_]=Ei(o,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();l=mt()},m(_,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(_,i);V(_,l,i)},p(_,i){i[0]&268435972|i[1]&131072&&(p=We(_[28]),e=Tt(e,i,w,1,_,p,t,l.parentNode,It,Ei,l,Si))},d(_){_&&K(l);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function Ei(r,e){let t,l=e[113]+"",p,w,_,i;function o(){return e[72](e[113])}return{key:r,first:null,c(){t=E("button"),p=X(l),w=O(),s(t,"class","w-full text-left px-3 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-purple-50 dark:hover:bg-purple-900/30 truncate"),this.first=t},m(f,b){V(f,t,b),c(t,p),c(t,w),_||(i=ee(t,"click",o),_=!0)},p(f,b){e=f,b[0]&268435456&&l!==(l=e[113]+"")&&de(p,l)},d(f){f&&K(t),_=!1,i()}}}function Li(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n=r[13]&&Mi();function u(m,C){if(C[0]&10240&&(d=null),m[12].length>0)return Ja;if(d==null&&(d=!!(m[11].trim()&&!m[13])),d)return Ga}let a=u(r,[-1,-1,-1,-1]),h=a&&a(r);return{c(){e=E("div"),t=E("div"),l=E("div"),p=E("div"),w=E("input"),_=O(),i=oe("svg"),o=oe("path"),f=O(),n&&n.c(),b=O(),h&&h.c(),g=O(),y=E("button"),y.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',s(w,"type","text"),s(w,"placeholder","搜索文件夹名称..."),s(w,"class","w-full px-3 py-2 pl-9 text-xs bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(i,"class","w-4 h-4 text-amber-500 absolute left-3 top-1/2 transform -translate-y-1/2"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(p,"class","relative"),s(l,"class","relative flex-1"),s(y,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(y,"title","取消"),s(t,"class","flex items-center gap-2"),s(e,"class","mt-2 relative")},m(m,C){V(m,e,C),c(e,t),c(t,l),c(l,p),c(p,w),ke(w,r[11]),c(p,_),c(p,i),c(i,o),c(p,f),n&&n.m(p,null),c(l,b),h&&h.m(l,null),c(t,g),c(t,y),k||(v=[ee(w,"input",r[73]),ee(w,"keydown",r[55]),ee(w,"input",r[54]),Ks(_n.call(null,w)),ee(y,"click",r[56])],k=!0)},p(m,C){C[0]&2048&&w.value!==m[11]&&ke(w,m[11]),m[13]?n||(n=Mi(),n.c(),n.m(p,null)):n&&(n.d(1),n=null),a===(a=u(m,C))&&h?h.p(m,C):(h&&h.d(1),h=a&&a(m),h&&(h.c(),h.m(l,null)))},d(m){m&&K(e),n&&n.d(),h&&h.d(),k=!1,Be(v)}}}function Mi(r){let e,t,l;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","w-4 h-4 text-amber-500 absolute right-3 top-1/2 transform -translate-y-1/2 animate-spin"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),c(e,l)},d(p){p&&K(e)}}}function Ga(r){let e;return{c(){e=E("div"),e.innerHTML='<div class="px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center">未找到匹配的文件夹</div>',s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function Ja(r){let e,t,l,p=r[12].length+"",w,_,i,o=[],f=new Dr,b=We(r[12]);const d=g=>g[118].path;for(let g=0;g<b.length;g+=1){let y=ki(r,b,g),k=d(y);f.set(k,o[g]=Di(k,y))}return{c(){e=E("div"),t=E("div"),l=X("找到 "),w=X(p),_=X(" 个文件夹"),i=O();for(let g=0;g<o.length;g+=1)o[g].c();s(t,"class","px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"),s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto z-10")},m(g,y){V(g,e,y),c(e,t),c(t,l),c(t,w),c(t,_),c(e,i);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(e,null)},p(g,y){y[0]&4096&&p!==(p=g[12].length+"")&&de(w,p),y[0]&22528|y[1]&33685504&&(b=We(g[12]),o=Tt(o,y,d,1,g,b,f,e,It,Di,null,ki))},d(g){g&&K(e);for(let y=0;y<o.length;y+=1)o[y].d()}}}function Di(r,e){let t,l,p,w,_,i,o,f=Hi(e[118].name,e[11])+"",b,d,g=e[118].path+"",y,k,v,n,u;function a(){return e[74](e[118])}function h(){return e[75](e[115])}return{key:r,first:null,c(){t=E("button"),l=E("div"),p=oe("svg"),w=oe("path"),_=O(),i=E("div"),o=E("div"),b=O(),d=E("div"),y=X(g),k=O(),s(w,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(p,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(p,"fill","currentColor"),s(p,"viewBox","0 0 24 24"),s(o,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-400 dark:text-gray-500 text-[10px] truncate"),s(i,"class","flex-1 min-w-0"),s(l,"class","flex items-center gap-2"),s(t,"class",v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`),this.first=t},m(m,C){V(m,t,C),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,o),o.innerHTML=f,c(i,b),c(i,d),c(d,y),c(t,k),n||(u=[ee(t,"click",a),ee(t,"mouseenter",h)],n=!0)},p(m,C){e=m,C[0]&6144&&f!==(f=Hi(e[118].name,e[11])+"")&&(o.innerHTML=f),C[0]&4096&&g!==(g=e[118].path+"")&&de(y,g),C[0]&20480&&v!==(v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`)&&s(t,"class",v)},d(m){m&&K(t),n=!1,Be(u)}}}function Xa(r){let e=[],t=new Dr,l,p=We(r[29]);const w=_=>_[116].path;for(let _=0;_<p.length;_+=1){let i=wi(r,p,_),o=w(i);t.set(o,e[_]=Ti(o,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();l=mt()},m(_,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(_,i);V(_,l,i)},p(_,i){i[0]&537165824|i[1]&131312&&(p=We(_[29]),e=Tt(e,i,w,1,_,p,t,l.parentNode,It,Ti,l,wi))},d(_){_&&K(l);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function Ya(r){let e;return{c(){e=E("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function Za(r){let e;return{c(){e=E("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function Qa(r){let e,t,l,p,w,_,i,o,f,b;return{c(){e=E("div"),t=oe("svg"),l=oe("path"),p=O(),w=E("span"),_=X(r[17]),i=O(),o=E("button"),o.textContent="重试",s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(t,"class","w-6 h-6"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(w,"class","text-center px-4"),s(o,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),s(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(d,g){V(d,e,g),c(e,t),c(t,l),c(e,p),c(e,w),c(w,_),c(e,i),c(e,o),f||(b=ee(o,"click",r[33]),f=!0)},p(d,g){g[0]&131072&&de(_,d[17])},d(d){d&&K(e),f=!1,b()}}}function $a(r){let e;return{c(){e=E("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function ec(r){let e,t,l,p,w,_,i,o=r[116].name+"",f,b,d,g,y=Pt(r[116].size)+"",k,v,n,u,a,h=r[116].modified+"",m,C,x,M=r[116].mode+"",S;return{c(){e=E("div"),t=O(),l=oe("svg"),p=oe("path"),w=O(),_=E("div"),i=E("div"),f=X(o),b=O(),d=E("div"),g=E("span"),k=X(y),v=O(),n=E("span"),n.textContent="•",u=O(),a=E("span"),m=X(h),C=O(),x=E("span"),S=X(M),s(e,"class","w-3"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),s(l,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),s(_,"class","flex-1 min-w-0"),s(x,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(L,B){V(L,e,B),V(L,t,B),V(L,l,B),c(l,p),V(L,w,B),V(L,_,B),c(_,i),c(i,f),c(_,b),c(_,d),c(d,g),c(g,k),c(d,v),c(d,n),c(d,u),c(d,a),c(a,m),V(L,C,B),V(L,x,B),c(x,S)},p(L,B){B[0]&536870912&&o!==(o=L[116].name+"")&&de(f,o),B[0]&536870912&&y!==(y=Pt(L[116].size)+"")&&de(k,y),B[0]&536870912&&h!==(h=L[116].modified+"")&&de(m,h),B[0]&536870912&&M!==(M=L[116].mode+"")&&de(S,M)},d(L){L&&(K(e),K(t),K(l),K(w),K(_),K(C),K(x))}}}function tc(r){let e,t,l,p,w,_,i,o=r[116].name+"",f;function b(y,k){return k[0]&536903680&&(e=null),e==null&&(e=!!y[15].has(y[116].path)),e?sc:ic}let d=b(r,[-1,-1,-1,-1]),g=d(r);return{c(){g.c(),t=O(),l=oe("svg"),p=oe("path"),w=O(),_=E("div"),i=E("div"),f=X(o),s(p,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(l,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(l,"fill","currentColor"),s(l,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(_,"class","flex-1 min-w-0")},m(y,k){g.m(y,k),V(y,t,k),V(y,l,k),c(l,p),V(y,w,k),V(y,_,k),c(_,i),c(i,f)},p(y,k){d!==(d=b(y,k))&&(g.d(1),g=d(y),g&&(g.c(),g.m(t.parentNode,t))),k[0]&536870912&&o!==(o=y[116].name+"")&&de(f,o)},d(y){y&&(K(t),K(l),K(w),K(_)),g.d(y)}}}function rc(r){let e,t,l,p,w,_=r[116].name+"",i,o,f;return{c(){e=oe("svg"),t=oe("path"),l=O(),p=E("div"),w=E("div"),i=X(_),o=O(),f=E("div"),f.textContent="返回上一层",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),s(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24"),s(w,"class","text-gray-600 dark:text-gray-300"),s(f,"class","text-gray-400 dark:text-gray-500 text-[10px]"),s(p,"class","flex-1 min-w-0")},m(b,d){V(b,e,d),c(e,t),V(b,l,d),V(b,p,d),c(p,w),c(w,i),c(p,o),c(p,f)},p(b,d){d[0]&536870912&&_!==(_=b[116].name+"")&&de(i,_)},d(b){b&&(K(e),K(l),K(p))}}}function ic(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function sc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function Ti(r,e){let t,l,p,w,_;function i(y,k){return y[116].is_parent?rc:y[116].is_dir?tc:ec}let o=i(e),f=o(e);function b(){return e[76](e[116])}function d(){return e[77](e[116])}function g(...y){return e[78](e[116],...y)}return{key:r,first:null,c(){t=E("div"),f.c(),l=O(),s(t,"class",p="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(y,k){V(y,t,k),f.m(t,null),c(t,l),w||(_=[ee(t,"click",b),ee(t,"dblclick",d),ee(t,"contextmenu",g)],w=!0)},p(y,k){e=y,o===(o=i(e))&&f?f.p(e,k):(f.d(1),f=o(e),f&&(f.c(),f.m(t,l))),k[0]&537133056&&p!==(p="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&s(t,"class",p)},d(y){y&&K(t),f.d(),w=!1,Be(_)}}}function Bi(r){let e,t,l,p,w,_,i,o,f,b,d;return{c(){var g;e=E("div"),t=E("button"),l=X("下载"),w=O(),_=E("button"),_.textContent="重命名",i=O(),o=E("button"),o.textContent="删除",s(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=p=(g=r[19].file)==null?void 0:g.is_dir,s(_,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),s(o,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),s(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),s(e,"style",f=`left: ${r[19].x}px; top: ${r[19].y}px;`)},m(g,y){V(g,e,y),c(e,t),c(t,l),c(e,w),c(e,_),c(e,i),c(e,o),b||(d=[ee(t,"click",r[44]),ee(_,"click",r[45]),ee(o,"click",r[43])],b=!0)},p(g,y){var k;y[0]&524288&&p!==(p=(k=g[19].file)==null?void 0:k.is_dir)&&(t.disabled=p),y[0]&524288&&f!==(f=`left: ${g[19].x}px; top: ${g[19].y}px;`)&&s(e,"style",f)},d(g){g&&K(e),b=!1,Be(d)}}}function Ai(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U,q,J,se,Y,D,H,F,W,G,j,Z,re=r[0].historyEnabled&&Ri(r),I=r[0].historyEnabled&&r[0].history.length>0&&Oi(r);return{c(){e=E("div"),t=E("div"),l=O(),p=E("div"),w=E("div"),_=E("div"),i=E("div"),i.innerHTML='<div class="p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div><h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">文件管理设置</h3> <div class="text-[11px] uppercase tracking-[0.15em] text-slate-400 dark:text-slate-500 mt-0.5">Preferences</div></div>',o=O(),f=E("button"),f.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=O(),d=E("div"),g=E("div"),y=E("div"),y.innerHTML='<svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">功能设置</span>',k=O(),v=E("div"),n=E("div"),n.innerHTML='<div class="p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">目录跟踪</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">实时同步终端目录变化</div></div>',u=O(),a=E("button"),h=E("span"),x=O(),M=E("div"),S=E("div"),S.innerHTML='<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">历史记录</span>',L=O(),B=E("div"),R=E("div"),R.innerHTML='<div class="p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">启用历史记录</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">自动记录访问过的目录</div></div>',P=O(),A=E("button"),U=E("span"),se=O(),re&&re.c(),Y=O(),I&&I.c(),D=O(),H=E("div"),F=E("button"),F.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            恢复默认`,W=O(),G=E("button"),G.textContent="完成",s(t,"class","fixed inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(i,"class","flex items-center gap-3"),s(f,"class","p-2 rounded-xl transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(f,"title","关闭"),s(_,"class","flex items-center justify-between"),s(w,"class","px-5 py-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-b border-slate-200/70 dark:border-slate-800/80"),s(y,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(n,"class","flex items-center gap-3"),s(h,"class",m=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].directoryTracking?"translate-x-6":"translate-x-1"}`),s(a,"class",C=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(v,"class","flex items-center justify-between py-2"),s(g,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(S,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(R,"class","flex items-center gap-3"),s(U,"class",q=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].historyEnabled?"translate-x-6":"translate-x-1"}`),s(A,"class",J=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(B,"class","flex items-center justify-between py-2 mb-4"),s(M,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(d,"class","flex-1 overflow-y-auto p-5 space-y-4 bg-slate-50/50 dark:bg-slate-950/30"),s(F,"class","px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all duration-200 flex items-center gap-1.5"),s(G,"class","px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"),s(H,"class","p-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-t border-slate-200/70 dark:border-slate-800/80 flex justify-between items-center"),s(p,"class","relative bg-white/95 dark:bg-slate-900/90 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] w-[420px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(T,$){V(T,e,$),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(_,o),c(_,f),c(p,b),c(p,d),c(d,g),c(g,y),c(g,k),c(g,v),c(v,n),c(v,u),c(v,a),c(a,h),c(d,x),c(d,M),c(M,S),c(M,L),c(M,B),c(B,R),c(B,P),c(B,A),c(A,U),c(M,se),re&&re.m(M,null),c(d,Y),I&&I.m(d,null),c(p,D),c(p,H),c(H,F),c(H,W),c(H,G),j||(Z=[ee(t,"click",r[82]),ee(f,"click",r[83]),ee(a,"click",r[84]),ee(A,"click",r[85]),ee(F,"click",r[89]),ee(G,"click",r[90])],j=!0)},p(T,$){$[0]&1&&m!==(m=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].directoryTracking?"translate-x-6":"translate-x-1"}`)&&s(h,"class",m),$[0]&1&&C!==(C=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(a,"class",C),$[0]&1&&q!==(q=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].historyEnabled?"translate-x-6":"translate-x-1"}`)&&s(U,"class",q),$[0]&1&&J!==(J=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(A,"class",J),T[0].historyEnabled?re?re.p(T,$):(re=Ri(T),re.c(),re.m(M,null)):re&&(re.d(1),re=null),T[0].historyEnabled&&T[0].history.length>0?I?I.p(T,$):(I=Oi(T),I.c(),I.m(d,null)):I&&(I.d(1),I=null)},d(T){T&&K(e),re&&re.d(),I&&I.d(),j=!1,Be(Z)}}}function Ri(r){let e,t,l,p,w,_=r[0].historyLimit+"",i,o,f,b,d,g,y,k;return{c(){e=E("div"),t=E("div"),l=E("div"),l.innerHTML='<svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="text-xs font-medium text-slate-600 dark:text-slate-400">历史记录数量</span>',p=O(),w=E("span"),i=X(_),o=O(),f=E("div"),b=E("input"),d=O(),g=E("div"),g.innerHTML="<span>5</span> <span>50</span>",s(l,"class","flex items-center gap-2"),s(w,"class","text-sm font-bold text-purple-600 dark:text-purple-400 min-w-[2rem] text-center"),s(t,"class","flex items-center justify-between mb-3"),s(b,"type","range"),s(b,"min","5"),s(b,"max","50"),s(b,"step","5"),s(b,"class","w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500/30"),s(g,"class","flex justify-between text-[10px] text-slate-400 mt-1.5"),s(f,"class","relative"),s(e,"class","py-3 px-3 bg-slate-50/80 dark:bg-slate-800/50 rounded-xl")},m(v,n){V(v,e,n),c(e,t),c(t,l),c(t,p),c(t,w),c(w,i),c(e,o),c(e,f),c(f,b),ke(b,r[0].historyLimit),c(f,d),c(f,g),y||(k=[ee(b,"change",r[86]),ee(b,"input",r[86]),ee(b,"change",r[30])],y=!0)},p(v,n){n[0]&1&&_!==(_=v[0].historyLimit+"")&&de(i,_),n[0]&1&&ke(b,v[0].historyLimit)},d(v){v&&K(e),y=!1,Be(k)}}}function Oi(r){let e,t,l,p,w,_,i,o,f,b=r[0].history.length+"",d,g,y,k,v,n=[],u=new Dr,a,h,m=We(r[0].history.slice().reverse());const C=x=>x[115];for(let x=0;x<m.length;x+=1){let M=yi(r,m,x),S=C(M);u.set(S,n[x]=Pi(S,M))}return{c(){e=E("div"),t=E("div"),l=E("div"),p=oe("svg"),w=oe("path"),_=O(),i=E("span"),o=X(`当前历史记录
                    `),f=E("span"),d=X(b),g=O(),y=E("button"),y.innerHTML=`<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                  清空`,k=O(),v=E("div");for(let x=0;x<n.length;x+=1)n[x].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),s(p,"class","w-4 h-4 text-emerald-500"),s(p,"fill","none"),s(p,"stroke","currentColor"),s(p,"viewBox","0 0 24 24"),s(f,"class","ml-1.5 text-xs px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-full"),s(i,"class","text-sm font-semibold text-slate-700 dark:text-slate-200"),s(l,"class","flex items-center gap-2"),s(y,"class","text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1"),s(t,"class","flex items-center justify-between mb-3 pb-2 border-b border-slate-100 dark:border-slate-800/60"),s(v,"class","space-y-1.5 max-h-40 overflow-y-auto pr-1 scrollbar-thin"),s(e,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm")},m(x,M){V(x,e,M),c(e,t),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,o),c(i,f),c(f,d),c(t,g),c(t,y),c(e,k),c(e,v);for(let S=0;S<n.length;S+=1)n[S]&&n[S].m(v,null);a||(h=ee(y,"click",r[87]),a=!0)},p(x,M){M[0]&1&&b!==(b=x[0].history.length+"")&&de(d,b),M[0]&1073741825&&(m=We(x[0].history.slice().reverse()),n=Tt(n,M,C,1,x,m,u,v,It,Pi,null,yi))},d(x){x&&K(e);for(let M=0;M<n.length;M+=1)n[M].d();a=!1,h()}}}function Pi(r,e){let t,l,p,w=e[0].history.length-e[115]+"",_,i,o,f=e[113]+"",b,d,g,y,k,v;function n(){return e[88](e[113])}return{key:r,first:null,c(){t=E("div"),l=E("div"),p=E("div"),_=X(w),i=O(),o=E("span"),b=X(f),d=O(),g=E("button"),g.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',y=O(),s(p,"class","w-5 h-5 flex items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 font-bold text-[10px]"),s(o,"class","truncate text-slate-700 dark:text-slate-300 font-medium"),s(l,"class","flex items-center gap-2 flex-1 min-w-0"),s(g,"class","ml-2 p-1 rounded-md text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100"),s(g,"title","删除记录"),s(t,"class","group flex items-center justify-between text-xs py-2 px-3 bg-slate-50 dark:bg-slate-800/60 rounded-lg border border-slate-100 dark:border-slate-700/50 hover:border-purple-300 dark:hover:border-purple-700/50 transition-all duration-200"),this.first=t},m(u,a){V(u,t,a),c(t,l),c(l,p),c(p,_),c(l,i),c(l,o),c(o,b),c(t,d),c(t,g),c(t,y),k||(v=ee(g,"click",n),k=!0)},p(u,a){e=u,a[0]&1&&w!==(w=e[0].history.length-e[115]+"")&&de(_,w),a[0]&1&&f!==(f=e[113]+"")&&de(b,f)},d(u){u&&K(t),k=!1,v()}}}function nc(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U,q,J,se,Y,D,H,F,W,G,j,Z,re,I,T,$,z,N,Q,te,ae,ce,le=r[0].directoryTracking&&Ci(r);function he(pe,Oe){return pe[20]?Ua:za}let fe=he(r),ye=fe(r),be=r[9]&&r[0].historyEnabled&&xi(r),ve=r[10]&&Li(r);function ue(pe,Oe){return pe[16]?$a:pe[17]?Qa:pe[29].length===0?Za:pe[6]?Ya:Xa}let ie=ue(r),_e=ie(r),me=r[19].open&&Bi(r);function Le(pe){r[79](pe)}let $e={title:"删除文件",message:r[23],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[41],onCancel:r[42]};r[22]!==void 0&&($e.isOpen=r[22]),j=new Ir({props:$e}),at.push(()=>kt(j,"isOpen",Le));function qe(pe){r[80](pe)}let je={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[31],onCancel:r[32]};r[24]!==void 0&&(je.isOpen=r[24]),I=new Ir({props:je}),at.push(()=>kt(I,"isOpen",qe));function st(pe){r[81](pe)}let Ue={title:r[26],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[27],confirmText:"重命名",cancelText:"取消",onConfirm:r[46],onCancel:r[47]};r[25]!==void 0&&(Ue.isOpen=r[25]),z=new ja({props:Ue}),at.push(()=>kt(z,"isOpen",st));let xe=r[8]&&Ai(r);return{c(){e=E("div"),t=E("div"),l=E("div"),p=E("h3"),p.textContent="文件管理",w=O(),_=E("div"),i=E("button"),o=oe("svg"),f=oe("path"),b=O(),le&&le.c(),d=O(),g=E("button"),y=oe("svg"),k=oe("path"),v=O(),n=E("button"),n.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',u=O(),a=E("button"),h=oe("svg"),m=oe("path"),x=O(),M=E("button"),M.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',S=O(),L=E("div"),B=E("div"),R=E("button"),R.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',P=O(),ye.c(),A=O(),U=E("button"),U.innerHTML='<svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>',q=O(),J=E("div"),se=E("button"),se.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',Y=O(),be&&be.c(),D=O(),ve&&ve.c(),H=O(),F=E("div"),_e.c(),W=O(),me&&me.c(),G=O(),Ve(j.$$.fragment),re=O(),Ve(I.$$.fragment),$=O(),Ve(z.$$.fragment),Q=O(),xe&&xe.c(),s(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"stroke-width","2"),s(f,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),s(o,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),s(o,"fill","none"),s(o,"stroke","currentColor"),s(o,"viewBox","0 0 24 24"),i.disabled=r[6],s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(i,"title","刷新"),s(k,"stroke-linecap","round"),s(k,"stroke-linejoin","round"),s(k,"stroke-width","2"),s(k,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(y,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),s(y,"fill","none"),s(y,"stroke","currentColor"),s(y,"viewBox","0 0 24 24"),g.disabled=r[6],s(g,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(g,"title","上传到服务器"),s(n,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(n,"title","下载到本地"),s(m,"stroke-linecap","round"),s(m,"stroke-linejoin","round"),s(m,"stroke-width","2"),s(m,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),s(h,"class","w-4 h-4 text-red-500 dark:text-red-400"),s(h,"fill","none"),s(h,"stroke","currentColor"),s(h,"viewBox","0 0 24 24"),a.disabled=C=r[6]||r[18].size===0,s(a,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(a,"title","删除选中"),s(M,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(M,"title","文件管理设置"),s(_,"class","flex items-center gap-1"),s(l,"class","flex items-center justify-between mb-2"),s(R,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(R,"title","根目录"),s(B,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),s(U,"class","p-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors"),s(U,"title","模糊搜索文件夹"),s(se,"class","p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors"),s(se,"title","路径历史"),s(J,"class","relative"),s(L,"class","flex items-center gap-2"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(F,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(pe,Oe){V(pe,e,Oe),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(_,i),c(i,o),c(o,f),c(_,b),le&&le.m(_,null),c(_,d),c(_,g),c(g,y),c(y,k),c(_,v),c(_,n),c(_,u),c(_,a),c(a,h),c(h,m),c(_,x),c(_,M),c(t,S),c(t,L),c(L,B),c(B,R),c(B,P),ye.m(B,null),c(L,A),c(L,U),c(L,q),c(L,J),c(J,se),c(J,Y),be&&be.m(J,null),c(t,D),ve&&ve.m(t,null),c(e,H),c(e,F),_e.m(F,null),c(e,W),me&&me.m(e,null),c(e,G),Ne(j,e,null),c(e,re),Ne(I,e,null),c(e,$),Ne(z,e,null),c(e,Q),xe&&xe.m(e,null),te=!0,ae||(ce=[ee(i,"click",r[33]),ee(g,"click",r[34]),ee(a,"click",r[40]),ee(M,"click",r[66]),ee(R,"click",r[67]),ee(U,"click",r[57]),ee(se,"click",r[70]),ee(F,"click",r[39])],ae=!0)},p(pe,Oe){(!te||Oe[0]&64)&&(i.disabled=pe[6]),pe[0].directoryTracking?le?le.p(pe,Oe):(le=Ci(pe),le.c(),le.m(_,d)):le&&(le.d(1),le=null),(!te||Oe[0]&64)&&(g.disabled=pe[6]),(!te||Oe[0]&262208&&C!==(C=pe[6]||pe[18].size===0))&&(a.disabled=C),fe===(fe=he(pe))&&ye?ye.p(pe,Oe):(ye.d(1),ye=fe(pe),ye&&(ye.c(),ye.m(B,null))),pe[9]&&pe[0].historyEnabled?be?be.p(pe,Oe):(be=xi(pe),be.c(),be.m(J,null)):be&&(be.d(1),be=null),pe[10]?ve?ve.p(pe,Oe):(ve=Li(pe),ve.c(),ve.m(t,null)):ve&&(ve.d(1),ve=null),ie===(ie=ue(pe))&&_e?_e.p(pe,Oe):(_e.d(1),_e=ie(pe),_e&&(_e.c(),_e.m(F,null))),pe[19].open?me?me.p(pe,Oe):(me=Bi(pe),me.c(),me.m(e,G)):me&&(me.d(1),me=null);const nt={};Oe[0]&8388608&&(nt.message=pe[23]),!Z&&Oe[0]&4194304&&(Z=!0,nt.isOpen=pe[22],wt(()=>Z=!1)),j.$set(nt);const Pe={};!T&&Oe[0]&16777216&&(T=!0,Pe.isOpen=pe[24],wt(()=>T=!1)),I.$set(Pe);const ft={};Oe[0]&67108864&&(ft.title=pe[26]),Oe[0]&134217728&&(ft.defaultValue=pe[27]),!N&&Oe[0]&33554432&&(N=!0,ft.isOpen=pe[25],wt(()=>N=!1)),z.$set(ft),pe[8]?xe?xe.p(pe,Oe):(xe=Ai(pe),xe.c(),xe.m(e,null)):xe&&(xe.d(1),xe=null)},i(pe){te||(Te(j.$$.fragment,pe),Te(I.$$.fragment,pe),Te(z.$$.fragment,pe),te=!0)},o(pe){Ae(j.$$.fragment,pe),Ae(I.$$.fragment,pe),Ae(z.$$.fragment,pe),te=!1},d(pe){pe&&K(e),le&&le.d(),ye.d(),be&&be.d(),ve&&ve.d(),_e.d(),me&&me.d(),Ke(j),Ke(I),Ke(z),xe&&xe.d(),ae=!1,Be(ce)}}}function _n(r){return r.focus(),{destroy(){}}}function oc(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function Hi(r,e){if(!e)return r;const t=new RegExp(`(${lc(e)})`,"gi");return r.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100 px-0.5 rounded">$1</mark>')}function lc(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ac(r,e,t){let l,p,w,_,i,o,f,b,d,g,y,k;gt(r,Dt,ne=>t(63,g=ne)),gt(r,Ut,ne=>t(64,y=ne)),gt(r,yt,ne=>t(98,k=ne));let v=new Map,n={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]},u=new Map,a=null,h=!1,m=!1,C=!1,x="",M=!1,S="",L=[],B=!1,R=-1,P=null,A=new Set([]),U=[],q=!1,J=null,se=new Set,Y=[],D={open:!1,x:0,y:0,file:null},H=!1,F="",W=!1,G="",j=[],Z=!1,re=null,I=!1,T="",$="",z=null;async function N(ne){try{const{GetFileManagerSettings:we}=window.wailsBindings;if(typeof we!="function")return;const Re=await we(ne);if(t(0,n={directoryTracking:(Re==null?void 0:Re.directory_tracking)??!1,historyEnabled:(Re==null?void 0:Re.history_enabled)??!0,historyLimit:(Re==null?void 0:Re.history_limit)??5,history:(Re==null?void 0:Re.history)??[]}),!u.has(ne)){const Qe=new Map(u);Qe.set(ne,n.directoryTracking||!1),t(1,u=Qe)}}catch(we){console.error("Failed to load file manager config:",we)}}async function Q(){try{const{UpdateFileManagerSettings:ne}=window.wailsBindings;if(typeof ne!="function"||!b)return;await ne(b,{directory_tracking:n.directoryTracking,history_enabled:n.historyEnabled,history_limit:n.historyLimit,history:n.history})}catch(ne){console.error("Failed to save file manager settings:",ne)}}let te="/";function ae(ne){return ne&&v.get(ne)||"/"}function ce(ne,we){if(!ne)return;const Re=new Map(v);Re.set(ne,we),t(58,v=Re)}async function le(ne){if(!(!y||!p)&&!w){t(16,q=!0),t(17,J=null);try{const we=await ln(y,ne);t(59,U=we||[]),ce(y,ne),t(3,te=ne)}catch(we){console.error("Failed to load directory:",we),t(17,J=we.message||"加载目录失败")}finally{t(16,q=!1)}}}async function he(){t(24,Z=!1);const ne=re;if(re=null,ne)try{await Ur(ne.id)}catch(we){console.error("Cancel transfer failed:",we)}yt.cancelTransfer(ne.id)}function fe(){t(24,Z=!1),re=null}async function ye(){await le(te)}async function be(){if(!(!y||!p||w))try{const ne=await dn();if(!ne||ne.length===0)return;(await un(y,ne,te)).forEach(Re=>nt(Re,"upload")),setTimeout(()=>le(te),2e3)}catch(ne){console.error("Upload failed:",ne),t(17,J=ne.message||"上传失败")}}async function ve(ne){if(!(!y||!p||w||ne.is_dir))try{const we=await hn();if(!we)return;(await on(y,[ne.path],we)).forEach(Qe=>nt(Qe,"download"))}catch(we){console.error("Download failed:",we),t(17,J=we.message||"下载失败")}}function ue(ne){!ne||ne.is_parent||t(18,se=new Set([ne.path]))}function ie(ne){!ne||ne.is_parent||ue(ne)}function _e(ne){!ne||!ne.is_parent||Pe(ne.path,!0)}function me(ne,we){we!=null&&we.is_parent||(ne.preventDefault(),ue(we),t(19,D={open:!0,x:ne.clientX,y:ne.clientY,file:we}))}function Le(){D.open&&t(19,D={...D,open:!1})}async function $e(){if(!y||!p||w||se.size===0)return;j=Array.from(se);const ne=j.length;t(23,G=ne===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${ne} 个文件/文件夹吗？`),t(22,W=!0)}async function qe(){t(22,W=!1);try{await nn(y,j),t(18,se=new Set),j=[],await le(te)}catch(ne){console.error("Delete failed:",ne),t(17,J=ne.message||"删除失败")}}function je(){t(22,W=!1),j=[]}async function st(){const ne=D.file;ne&&(Le(),j=[ne.path],t(23,G=`确定要删除 "${ne.name}" 吗？`),t(22,W=!0))}async function Ue(){const ne=D.file;Le(),ne&&!ne.is_dir&&await ve(ne)}async function xe(){const ne=D.file;Le(),ne&&(z=ne,t(26,T="重命名"),t(27,$=ne.name),t(25,I=!0))}async function pe(ne){t(25,I=!1);const we=z;if(z=null,!(!we||!ne||ne.trim()===we.name))try{const Qe=`${te.endsWith("/")?te:`${te}/`}${ne.trim()}`;await an(y,we.path,Qe),await le(te)}catch(Re){console.error("Rename failed:",Re),t(17,J=Re.message||"重命名失败")}}function Oe(){t(25,I=!1),z=null}function nt(ne,we){const Re=`sftp:progress:${ne}`,Qe=_r(Re,Ge=>{if(we==="upload"){const lt={id:ne,filename:Ge.filename||Ge.fileName||"unknown",bytesSent:Ge.bytes_sent??Ge.bytesSent??0,totalBytes:Ge.total_bytes??Ge.totalBytes??0,percentage:Ge.percentage??0,speed:Ge.speed??0,status:Ge.status||"running",error:Ge.error||""};k.transfers.find(tr=>tr.id===ne)?yt.updateTransfer(ne,lt):yt.addTransfer(lt)}});Y.push(Qe)}function Pe(ne,we=!1){if(we&&d&&b){const Re=new Map(u);Re.set(b,!1),t(1,u=Re),t(7,h=!0)}if(n.historyEnabled&&ne!==te){const Re=n.historyLimit||5,Qe=[...n.history||[]],Ge=Qe.indexOf(ne);Ge!==-1&&Qe.splice(Ge,1),Qe.unshift(ne);const lt=Qe.slice(0,Re);t(0,n.history=lt,n),Q()}le(ne)}async function ft(){if(y)try{const{GetCurrentPath:ne}=window.wailsBindings;if(typeof ne!="function")return;const we=await ne(y);we&&we!==te&&(t(7,h=!1),Pe(we,!1))}catch(ne){console.error("Failed to sync directory from server:",ne)}}function ht(){if(!n.directoryTracking||!d||a)return;const ne=y;ne&&(a=_r(`ssh:cwd:${ne}`,we=>{we&&we!==te&&!h&&Pe(we,!1)}))}function et(){a&&(a(),a=null)}function Xe(ne){if(ne===-1)Pe("/",!0);else{const we="/"+o.slice(0,ne+1).join("/");Pe(we,!0)}}function rt(){t(21,F=te),t(20,H=!0)}function vt(){F.trim()&&Pe(F.trim(),!0),t(20,H=!1)}function Ie(){t(20,H=!1),t(21,F="")}async function Fe(){if(!(!S.trim()||!y)){P&&P.abort(),P=new AbortController,t(13,B=!0),t(12,L=[]),t(14,R=-1);try{const ne=await cn(y,te,S.trim(),3,50);if(P.signal.aborted)return;t(12,L=ne||[])}catch(ne){console.error("Directory search failed:",ne),t(17,J=ne.message||"搜索失败")}finally{t(13,B=!1)}}}let it;function Ye(){clearTimeout(it),S.trim().length>=1?it=setTimeout(()=>{Fe()},300):t(12,L=[])}function Ze(ne){ne.key==="Enter"?(ne.preventDefault(),R>=0&&L[R]?(Pe(L[R].path,!0),tt()):Fe()):ne.key==="Escape"?tt():ne.key==="ArrowDown"?(ne.preventDefault(),R<L.length-1&&t(14,R++,R)):ne.key==="ArrowUp"&&(ne.preventDefault(),R>0&&t(14,R--,R))}function tt(){t(10,M=!1),t(11,S=""),t(12,L=[]),t(14,R=-1),P&&(P.abort(),P=null)}function ze(){t(10,M=!0),t(11,S=""),t(12,L=[]),t(14,R=-1)}lr(()=>{}),Er(()=>{Y.forEach(ne=>ne()),et(),clearTimeout(it),P&&P.abort()});const Ce=async()=>{if(b){const ne=!d,we=new Map(u);we.set(b,ne),t(1,u=we),ne&&(t(7,h=!1),await ft())}},He=()=>t(8,m=!0),ot=()=>Xe(-1);function ge(){F=this.value,t(21,F)}const Me=ne=>{ne.key==="Enter"?vt():ne.key==="Escape"&&Ie()},Ft=()=>t(9,C=!C);function qt(){x=this.value,t(2,x)}const bt=ne=>{Pe(ne,!0),t(9,C=!1),t(2,x="")};function At(){S=this.value,t(11,S)}const Wt=ne=>{Pe(ne.path,!0),tt()},Gt=ne=>t(14,R=ne),Jt=ne=>ne.is_parent?_e(ne):ie(ne),ar=ne=>{ne.is_dir&&!ne.is_parent?Pe(ne.path,!0):ne.is_dir||ve(ne)},pr=(ne,we)=>me(we,ne);function jt(ne){W=ne,t(22,W)}function Xt(ne){Z=ne,t(24,Z)}function gr(ne){I=ne,t(25,I)}const Yt=()=>t(8,m=!1),Zt=()=>t(8,m=!1),cr=()=>{t(0,n.directoryTracking=!n.directoryTracking,n),Q()},mr=()=>{t(0,n.historyEnabled=!n.historyEnabled,n),n.historyEnabled||t(0,n.history=[],n),Q()};function zt(){n.historyLimit=jr(this.value),t(0,n),t(64,y),t(60,_),t(62,p),t(6,w),t(61,l),t(63,g)}const Qt=()=>{t(0,n.history=[],n),Q()},vr=ne=>{t(0,n.history=n.history.filter(we=>we!==ne),n),Q()},$t=()=>{t(0,n={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),Q()},er=()=>t(8,m=!1);return r.$$.update=()=>{var ne;if(r.$$.dirty[2]&6&&t(61,l=y?g.get(y):null),r.$$.dirty[1]&1073741824&&t(62,p=(l==null?void 0:l.connected)||!1),r.$$.dirty[1]&1073741824&&t(6,w=(l==null?void 0:l.type)==="local"),r.$$.dirty[0]&64|r.$$.dirty[2]&1&&t(60,_=p&&!w),r.$$.dirty[1]&1073741824&&t(5,b=((ne=l==null?void 0:l.connection)==null?void 0:ne.id)||null),r.$$.dirty[0]&32|r.$$.dirty[2]&4&&y&&b&&N(b),r.$$.dirty[0]&8|r.$$.dirty[2]&4)if(y){const we=ae(y);we&&we!==te&&t(3,te=we)}else t(3,te="/");if(r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(!y||!_)&&(t(59,U=[]),t(17,J=null),t(18,se=new Set),t(15,A=new Set),t(3,te="/"),t(58,v=new Map),t(1,u=new Map),t(0,n={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),t(8,m=!1),t(9,C=!1),t(10,M=!1),t(19,D={open:!1,x:0,y:0,file:null})),r.$$.dirty[0]&8|r.$$.dirty[1]&268435456&&t(29,i=(()=>{const we=oc(U);return te==="/"?we:[{name:"..",path:te.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...we]})()),r.$$.dirty[0]&8&&(o=te.split("/").filter(we=>we)),r.$$.dirty[0]&5&&t(28,f=n.historyEnabled&&x?n.history.filter(we=>we.toLowerCase().includes(x.toLowerCase())):n.history||[]),r.$$.dirty[0]&34&&t(4,d=b&&u.get(b)||!1),r.$$.dirty[0]&40|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&_&&b?(N(b),le(te),ht()):et()),r.$$.dirty[0]&17|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&_&&n.directoryTracking&&d?ht():et()),r.$$.dirty[1]&134217728|r.$$.dirty[2]&2&&g){const we=new Set(g.keys()),Re=new Map(v);for(const Qe of Re.keys())we.has(Qe)||Re.delete(Qe);t(58,v=Re)}},[n,u,x,te,d,b,w,h,m,C,M,S,L,B,R,A,q,J,se,D,H,F,W,G,Z,I,T,$,f,i,Q,he,fe,ye,be,ve,ie,_e,me,Le,$e,qe,je,st,Ue,xe,pe,Oe,Pe,ft,Xe,rt,vt,Ie,Ye,Ze,tt,ze,v,U,_,l,p,g,y,Ce,He,ot,ge,Me,Ft,qt,bt,At,Wt,Gt,Jt,ar,pr,jt,Xt,gr,Yt,Zt,cr,mr,zt,Qt,vr,$t,er]}class cc extends ut{constructor(e){super(),dt(this,e,ac,nc,ct,{},null,[-1,-1,-1,-1])}}function Ii(r,e,t){const l=r.slice();return l[37]=e[t],l[39]=t,l}function hc(r){let e;return{c(){e=X("请先连接到服务器")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function dc(r){let e;return{c(){e=X("实时数据获取中...")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function uc(r){let e;return{c(){e=X("本地终端不支持服务器监控")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function Fi(r){let e;return{c(){e=E("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',s(e,"class","p-3 space-y-3")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function Wi(r){let e,t,l,p,w,_=r[8]["1min"].toFixed(2)+"",i,o,f,b=r[8]["5min"].toFixed(2)+"",d,g,y,k=r[8]["15min"].toFixed(2)+"",v;return{c(){e=E("div"),t=E("span"),t.textContent="负载:",l=O(),p=E("div"),w=E("span"),i=X(_),o=O(),f=E("span"),d=X(b),g=O(),y=E("span"),v=X(k),s(t,"class","text-[9px] text-gray-600 dark:text-gray-400"),s(w,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Se(w,"color",_t(r[8]["1min"]*100)),s(f,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Se(f,"color",_t(r[8]["5min"]*100)),s(y,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Se(y,"color",_t(r[8]["15min"]*100)),s(p,"class","flex gap-2 text-[9px]"),s(e,"class","flex items-center gap-2 mb-2")},m(n,u){V(n,e,u),c(e,t),c(e,l),c(e,p),c(p,w),c(w,i),c(p,o),c(p,f),c(f,d),c(p,g),c(p,y),c(y,v)},p(n,u){u[0]&256&&_!==(_=n[8]["1min"].toFixed(2)+"")&&de(i,_),u[0]&256&&Se(w,"color",_t(n[8]["1min"]*100)),u[0]&256&&b!==(b=n[8]["5min"].toFixed(2)+"")&&de(d,b),u[0]&256&&Se(f,"color",_t(n[8]["5min"]*100)),u[0]&256&&k!==(k=n[8]["15min"].toFixed(2)+"")&&de(v,k),u[0]&256&&Se(y,"color",_t(n[8]["15min"]*100))},d(n){n&&K(e)}}}function fc(r){let e;return{c(){e=E("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function _c(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n;return{c(){e=oe("svg"),t=oe("defs"),l=oe("linearGradient"),p=oe("stop"),w=oe("stop"),_=oe("line"),i=oe("line"),o=oe("line"),f=oe("path"),d=oe("path"),y=O(),k=E("div"),k.textContent="100%",v=O(),n=E("div"),n.textContent="0%",s(p,"offset","0%"),Se(p,"stop-color","rgb(139, 92, 246)"),Se(p,"stop-opacity","0.3"),s(w,"offset","100%"),Se(w,"stop-color","rgb(139, 92, 246)"),Se(w,"stop-opacity","0.05"),s(l,"id","cpuGradient"),s(l,"x1","0%"),s(l,"y1","0%"),s(l,"x2","0%"),s(l,"y2","100%"),s(_,"x1","0"),s(_,"y1","25%"),s(_,"x2","100%"),s(_,"y2","25%"),s(_,"stroke","currentColor"),s(_,"stroke-width","0.5"),s(_,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(o,"x1","0"),s(o,"y1","75%"),s(o,"x2","100%"),s(o,"y2","75%"),s(o,"stroke","currentColor"),s(o,"stroke-width","0.5"),s(o,"class","text-gray-200 dark:text-gray-700"),s(f,"d",b=r[2].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),s(f,"fill","url(#cpuGradient)"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[2].map(r[16]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(139, 92, 246)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(n,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(u,a){V(u,e,a),c(e,t),c(t,l),c(l,p),c(l,w),c(e,_),c(e,i),c(e,o),c(e,f),c(e,d),V(u,y,a),V(u,k,a),V(u,v,a),V(u,n,a)},p(u,a){a[0]&4&&b!==(b=u[2].map(u[15]).join(" ")+" L 100 100 L 0 100 Z")&&s(f,"d",b),a[0]&4&&g!==(g=u[2].map(u[16]).join(" "))&&s(d,"d",g)},d(u){u&&(K(e),K(y),K(k),K(v),K(n))}}}function ji(r){let e,t=We(r[4]),l=[];for(let p=0;p<t.length;p+=1)l[p]=zi(Ii(r,t,p));return{c(){e=E("div");for(let p=0;p<l.length;p+=1)l[p].c();s(e,"class","mt-2 flex flex-wrap gap-1")},m(p,w){V(p,e,w);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(e,null)},p(p,w){if(w[0]&16){t=We(p[4]);let _;for(_=0;_<t.length;_+=1){const i=Ii(p,t,_);l[_]?l[_].p(i,w):(l[_]=zi(i),l[_].c(),l[_].m(e,null))}for(;_<l.length;_+=1)l[_].d(1);l.length=t.length}},d(p){p&&K(e),Kt(l,p)}}}function zi(r){let e,t,l,p,w,_;return{c(){e=E("div"),t=E("div"),l=E("div"),p=O(),w=E("span"),w.textContent=`C${r[39]+1}`,_=O(),s(l,"class","h-full rounded-full transition-all duration-300"),Se(l,"width",r[37]+"%"),Se(l,"background-color",_t(r[37])),s(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),s(w,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),s(e,"class","flex flex-col items-center")},m(i,o){V(i,e,o),c(e,t),c(t,l),c(e,p),c(e,w),c(e,_)},p(i,o){o[0]&16&&Se(l,"width",i[37]+"%"),o[0]&16&&Se(l,"background-color",_t(i[37]))},d(i){i&&K(e)}}}function pc(r){let e;return{c(){e=E("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function gc(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n;return{c(){e=oe("svg"),t=oe("defs"),l=oe("linearGradient"),p=oe("stop"),w=oe("stop"),_=oe("line"),i=oe("line"),o=oe("line"),f=oe("path"),d=oe("path"),y=O(),k=E("div"),k.textContent="100%",v=O(),n=E("div"),n.textContent="0%",s(p,"offset","0%"),Se(p,"stop-color","rgb(16, 185, 129)"),Se(p,"stop-opacity","0.3"),s(w,"offset","100%"),Se(w,"stop-color","rgb(16, 185, 129)"),Se(w,"stop-opacity","0.05"),s(l,"id","memoryGradient"),s(l,"x1","0%"),s(l,"y1","0%"),s(l,"x2","0%"),s(l,"y2","100%"),s(_,"x1","0"),s(_,"y1","25%"),s(_,"x2","100%"),s(_,"y2","25%"),s(_,"stroke","currentColor"),s(_,"stroke-width","0.5"),s(_,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(o,"x1","0"),s(o,"y1","75%"),s(o,"x2","100%"),s(o,"y2","75%"),s(o,"stroke","currentColor"),s(o,"stroke-width","0.5"),s(o,"class","text-gray-200 dark:text-gray-700"),s(f,"d",b=r[3].map(r[17]).join(" ")+" L 100 100 L 0 100 Z"),s(f,"fill","url(#memoryGradient)"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[3].map(r[18]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(16, 185, 129)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(n,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(u,a){V(u,e,a),c(e,t),c(t,l),c(l,p),c(l,w),c(e,_),c(e,i),c(e,o),c(e,f),c(e,d),V(u,y,a),V(u,k,a),V(u,v,a),V(u,n,a)},p(u,a){a[0]&8&&b!==(b=u[3].map(u[17]).join(" ")+" L 100 100 L 0 100 Z")&&s(f,"d",b),a[0]&8&&g!==(g=u[3].map(u[18]).join(" "))&&s(d,"d",g)},d(u){u&&(K(e),K(y),K(k),K(v),K(n))}}}function mc(r){var Kr,Vr;let e,t,l,p,w,_,i,o,f,b,d,g,y,k=r[5].cpu.toFixed(1)+"",v,n,u,a,h,m,C,x,M,S,L,B,R,P=r[9].used+"",A,U,q=r[9].total+"",J,se,Y,D=r[5].memory.toFixed(2)+"",H,F,W,G,j,Z,re,I,T,$,z=r[5].disk+"",N,Q,te,ae,ce,le,he,fe,ye,be=r[7].used+"",ve,ue,ie,_e,me=r[7].total+"",Le,$e,qe,je,st,Ue,xe,pe,Oe,nt,Pe=kr(((Kr=r[5].network)==null?void 0:Kr.in)||0)+"",ft,ht,et,Xe,rt,vt,Ie=kr(((Vr=r[5].network)==null?void 0:Vr.out)||0)+"",Fe,it,Ye,Ze,tt,ze,Ce,He,ot,ge,Me=(r[6].os||"Unknown")+"",Ft,qt,bt,At,Wt,Gt,Jt=(r[6].kernel||"Unknown")+"",ar,pr,jt,Xt,gr,Yt,Zt=(r[6].uptime||"Unknown")+"",cr,mr,zt,Qt,vr,$t,er=(r[6].processes||"N/A")+"",ne;function we(De,Je){return De[0]?uc:De[1]?dc:hc}let Re=we(r),Qe=Re(r),Ge=r[0]&&Fi(),lt=r[8]["1min"]>0&&Wi(r);function Tr(De,Je){return De[2].length>1?_c:fc}let tr=Tr(r),Lt=tr(r),pt=r[4].length>0&&ji(r);function Nr(De,Je){return De[3].length>1?gc:pc}let br=Nr(r),Mt=br(r);return{c(){e=E("div"),t=E("div"),l=E("h3"),l.textContent="服务器监控",p=O(),w=E("div"),Qe.c(),_=O(),Ge&&Ge.c(),i=O(),o=E("div"),f=E("div"),b=E("div"),d=E("div"),d.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',g=O(),y=E("span"),v=X(k),n=X("%"),u=O(),lt&&lt.c(),a=O(),h=E("div"),Lt.c(),m=O(),pt&&pt.c(),C=O(),x=E("div"),M=E("div"),S=E("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',L=O(),B=E("div"),R=E("span"),A=X(P),U=X(" / "),J=X(q),se=O(),Y=E("span"),H=X(D),F=X("%"),W=O(),G=E("div"),Mt.c(),j=O(),Z=E("div"),re=E("div"),I=E("div"),I.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',T=O(),$=E("span"),N=X(z),Q=X("%"),te=O(),ae=E("div"),ce=E("div"),le=O(),he=E("div"),fe=E("span"),ye=X("已用 "),ve=X(be),ue=O(),ie=E("span"),_e=X("总计 "),Le=X(me),$e=O(),qe=E("div"),je=E("div"),je.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',st=O(),Ue=E("div"),xe=E("div"),pe=E("div"),pe.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',Oe=O(),nt=E("span"),ft=X(Pe),ht=O(),et=E("div"),Xe=E("div"),Xe.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',rt=O(),vt=E("span"),Fe=X(Ie),it=O(),Ye=E("div"),Ze=E("div"),Ze.textContent="系统信息",tt=O(),ze=E("div"),Ce=E("div"),He=E("span"),He.textContent="操作系统",ot=O(),ge=E("span"),Ft=X(Me),qt=O(),bt=E("div"),At=E("span"),At.textContent="内核版本",Wt=O(),Gt=E("span"),ar=X(Jt),pr=O(),jt=E("div"),Xt=E("span"),Xt.textContent="运行时间",gr=O(),Yt=E("span"),cr=X(Zt),mr=O(),zt=E("div"),Qt=E("span"),Qt.textContent="进程数",vr=O(),$t=E("span"),ne=X(er),s(l,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(w,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex items-center gap-2"),s(y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Se(y,"color",_t(r[5].cpu)),s(b,"class","flex items-center justify-between mb-2"),s(h,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(f,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),s(S,"class","flex items-center gap-2"),s(R,"class","text-[10px] text-gray-600 dark:text-gray-400"),s(Y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Se(Y,"color",_t(r[5].memory)),s(B,"class","flex items-center gap-2"),s(M,"class","flex items-center justify-between mb-2"),s(G,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(x,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),s(I,"class","flex items-center gap-2"),s($,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Se($,"color",_t(r[5].disk)),s(re,"class","flex items-center justify-between mb-2"),s(ce,"class","h-2 rounded-full transition-all duration-300"),Se(ce,"width",r[5].disk+"%"),Se(ce,"background-color",_t(r[5].disk)),s(ae,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),s(he,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),s(Z,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),s(je,"class","flex items-center gap-2 mb-3"),s(pe,"class","flex items-center gap-2"),s(nt,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(xe,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(Xe,"class","flex items-center gap-2"),s(vt,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(et,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(Ue,"class","space-y-2"),s(qe,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),s(Ze,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),s(He,"class","text-gray-600 dark:text-gray-400"),s(ge,"class","text-gray-900 dark:text-white font-medium"),s(Ce,"class","flex justify-between py-1"),s(At,"class","text-gray-600 dark:text-gray-400"),s(Gt,"class","text-gray-900 dark:text-white font-medium"),s(bt,"class","flex justify-between py-1"),s(Xt,"class","text-gray-600 dark:text-gray-400"),s(Yt,"class","text-gray-900 dark:text-white font-medium"),s(jt,"class","flex justify-between py-1"),s(Qt,"class","text-gray-600 dark:text-gray-400"),s($t,"class","text-gray-900 dark:text-white font-medium"),s(zt,"class","flex justify-between py-1"),s(ze,"class","space-y-1.5 text-[10px]"),s(Ye,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),s(o,"class","p-3 space-y-3"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(De,Je){V(De,e,Je),c(e,t),c(t,l),c(t,p),c(t,w),Qe.m(w,null),c(e,_),Ge&&Ge.m(e,null),c(e,i),c(e,o),c(o,f),c(f,b),c(b,d),c(b,g),c(b,y),c(y,v),c(y,n),c(f,u),lt&&lt.m(f,null),c(f,a),c(f,h),Lt.m(h,null),c(f,m),pt&&pt.m(f,null),c(o,C),c(o,x),c(x,M),c(M,S),c(M,L),c(M,B),c(B,R),c(R,A),c(R,U),c(R,J),c(B,se),c(B,Y),c(Y,H),c(Y,F),c(x,W),c(x,G),Mt.m(G,null),c(o,j),c(o,Z),c(Z,re),c(re,I),c(re,T),c(re,$),c($,N),c($,Q),c(Z,te),c(Z,ae),c(ae,ce),c(Z,le),c(Z,he),c(he,fe),c(fe,ye),c(fe,ve),c(he,ue),c(he,ie),c(ie,_e),c(ie,Le),c(o,$e),c(o,qe),c(qe,je),c(qe,st),c(qe,Ue),c(Ue,xe),c(xe,pe),c(xe,Oe),c(xe,nt),c(nt,ft),c(Ue,ht),c(Ue,et),c(et,Xe),c(et,rt),c(et,vt),c(vt,Fe),c(o,it),c(o,Ye),c(Ye,Ze),c(Ye,tt),c(Ye,ze),c(ze,Ce),c(Ce,He),c(Ce,ot),c(Ce,ge),c(ge,Ft),c(ze,qt),c(ze,bt),c(bt,At),c(bt,Wt),c(bt,Gt),c(Gt,ar),c(ze,pr),c(ze,jt),c(jt,Xt),c(jt,gr),c(jt,Yt),c(Yt,cr),c(ze,mr),c(ze,zt),c(zt,Qt),c(zt,vr),c(zt,$t),c($t,ne)},p(De,Je){var qr,Gr;Re!==(Re=we(De))&&(Qe.d(1),Qe=Re(De),Qe&&(Qe.c(),Qe.m(w,null))),De[0]?Ge||(Ge=Fi(),Ge.c(),Ge.m(e,i)):Ge&&(Ge.d(1),Ge=null),Je[0]&32&&k!==(k=De[5].cpu.toFixed(1)+"")&&de(v,k),Je[0]&32&&Se(y,"color",_t(De[5].cpu)),De[8]["1min"]>0?lt?lt.p(De,Je):(lt=Wi(De),lt.c(),lt.m(f,a)):lt&&(lt.d(1),lt=null),tr===(tr=Tr(De))&&Lt?Lt.p(De,Je):(Lt.d(1),Lt=tr(De),Lt&&(Lt.c(),Lt.m(h,null))),De[4].length>0?pt?pt.p(De,Je):(pt=ji(De),pt.c(),pt.m(f,null)):pt&&(pt.d(1),pt=null),Je[0]&512&&P!==(P=De[9].used+"")&&de(A,P),Je[0]&512&&q!==(q=De[9].total+"")&&de(J,q),Je[0]&32&&D!==(D=De[5].memory.toFixed(2)+"")&&de(H,D),Je[0]&32&&Se(Y,"color",_t(De[5].memory)),br===(br=Nr(De))&&Mt?Mt.p(De,Je):(Mt.d(1),Mt=br(De),Mt&&(Mt.c(),Mt.m(G,null))),Je[0]&32&&z!==(z=De[5].disk+"")&&de(N,z),Je[0]&32&&Se($,"color",_t(De[5].disk)),Je[0]&32&&Se(ce,"width",De[5].disk+"%"),Je[0]&32&&Se(ce,"background-color",_t(De[5].disk)),Je[0]&128&&be!==(be=De[7].used+"")&&de(ve,be),Je[0]&128&&me!==(me=De[7].total+"")&&de(Le,me),Je[0]&32&&Pe!==(Pe=kr(((qr=De[5].network)==null?void 0:qr.in)||0)+"")&&de(ft,Pe),Je[0]&32&&Ie!==(Ie=kr(((Gr=De[5].network)==null?void 0:Gr.out)||0)+"")&&de(Fe,Ie),Je[0]&64&&Me!==(Me=(De[6].os||"Unknown")+"")&&de(Ft,Me),Je[0]&64&&Jt!==(Jt=(De[6].kernel||"Unknown")+"")&&de(ar,Jt),Je[0]&64&&Zt!==(Zt=(De[6].uptime||"Unknown")+"")&&de(cr,Zt),Je[0]&64&&er!==(er=(De[6].processes||"N/A")+"")&&de(ne,er)},i:Ee,o:Ee,d(De){De&&K(e),Qe.d(),Ge&&Ge.d(),lt&&lt.d(),Lt.d(),pt&&pt.d(),Mt.d()}}}function _t(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function kr(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,l=r;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function Ui(r){if(r===0)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0,l=r;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function vc(r,e,t){let l,p,w,_,i,o;gt(r,Ut,j=>t(13,i=j)),gt(r,Dt,j=>t(14,o=j));const f={cpu:0,memory:0,disk:0,network:{in:0,out:0}},b={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},d={used:"0 GB",total:"0 GB"},g={"1min":0,"5min":0,"15min":0},y={used:"0 GB",total:"0 GB"};let k=[],v=[],n=[],u={...f},a={...b},h={...d},m={...g},C={...y},x=new Map,M=new Map,S=new Map,L=new Map,B=new Map,R=new Map,P=new Map,A=new Map,U=null,q=null;function J(j){if(!j){t(2,k=[]),t(3,v=[]),t(4,n=[]),t(5,u={...f}),t(6,a={...b}),t(7,h={...d}),t(8,m={...g}),t(9,C={...y});return}t(2,k=x.get(j)||[]),t(3,v=M.get(j)||[]),t(4,n=S.get(j)||[]),t(5,u=L.get(j)||{...f}),t(6,a=B.get(j)||{...b}),t(7,h=R.get(j)||{...d}),t(8,m=P.get(j)||{...g}),t(9,C=A.get(j)||{...y})}function se(j){j&&(x=new Map(x).set(j,k),M=new Map(M).set(j,v),S=new Map(S).set(j,n),L=new Map(L).set(j,u),B=new Map(B).set(j,a),R=new Map(R).set(j,h),P=new Map(P).set(j,m),A=new Map(A).set(j,C))}function Y(j){var N,Q,te,ae,ce,le,he,fe,ye,be,ve,ue,ie,_e,me;if(!j)return null;const Z=(N=j.cpu)!=null&&N.per_core&&Array.isArray(j.cpu.per_core)?j.cpu.per_core:null,re={cpu:typeof j.cpu=="number"?j.cpu:((Q=j.cpu)==null?void 0:Q.overall)||0,memory:typeof j.memory=="number"?j.memory:((te=j.memory)==null?void 0:te.used_percent)||0,disk:typeof j.disk=="number"?j.disk:((le=(ce=(ae=j.disk)==null?void 0:ae.partitions)==null?void 0:ce[0])==null?void 0:le.used_percent)||0,network:{in:typeof((he=j.network)==null?void 0:he.in)=="number"?j.network.in*(1024*1024):typeof((fe=j.network)==null?void 0:fe.rx_rate)=="number"?j.network.rx_rate:0,out:typeof((ye=j.network)==null?void 0:ye.out)=="number"?j.network.out*(1024*1024):typeof((be=j.network)==null?void 0:be.tx_rate)=="number"?j.network.tx_rate:0}},I=j.system?{os:j.system.os||b.os,kernel:j.system.kernel||b.kernel,uptime:j.system.uptime||b.uptime,processes:j.system.processes||b.processes}:null;let T=null;if((ue=(ve=j.disk)==null?void 0:ve.partitions)!=null&&ue[0]){const Le=j.disk.partitions[0],$e=(Le.used/(1024*1024*1024)).toFixed(1),qe=(Le.total/(1024*1024*1024)).toFixed(1);T={used:`${$e} GB`,total:`${qe} GB`}}let $=null;(ie=j.cpu)!=null&&ie.load_average&&Array.isArray(j.cpu.load_average)&&j.cpu.load_average.length>=3&&($={"1min":j.cpu.load_average[0]||0,"5min":j.cpu.load_average[1]||0,"15min":j.cpu.load_average[2]||0});let z=null;if(((_e=j.memory)==null?void 0:_e.used)!==void 0&&((me=j.memory)==null?void 0:me.total)!==void 0){const Le=j.memory.used,$e=j.memory.total;z={used:Ui(Le),total:Ui($e)}}return{stats:re,cpuPerCore:Z,systemInfo:I,diskInfo:T,loadInfo:$,memoryDetail:z}}async function D(){const j=i;if(!j||!p||w)return;const{GetMonitoringData:Z}=window.wailsBindings||{};if(typeof Z=="function")try{const re=await Z(j),I=Y(re);if(I){const T=[...x.get(j)||[],I.stats.cpu].slice(-60),$=[...M.get(j)||[],I.stats.memory].slice(-60),z=I.cpuPerCore||S.get(j)||[],N=I.systemInfo||B.get(j)||{...b},Q=I.diskInfo||R.get(j)||{...d},te=I.loadInfo||P.get(j)||{...g},ae=I.memoryDetail||A.get(j)||{...y},ce=I.stats;x=new Map(x).set(j,T),M=new Map(M).set(j,$),S=new Map(S).set(j,z),L=new Map(L).set(j,ce),B=new Map(B).set(j,N),R=new Map(R).set(j,Q),P=new Map(P).set(j,te),A=new Map(A).set(j,ae),j===i&&(t(5,u=ce),t(2,k=T),t(3,v=$),t(4,n=z),t(6,a=N),t(7,h=Q),t(8,m=te),t(9,C=ae))}}catch(re){console.error("Failed to fetch monitoring data:",re)}}lr(()=>(U=setInterval(D,2e3),()=>{clearInterval(U)})),Er(()=>{U&&clearInterval(U)});const H=(j,Z)=>{const re=Z/(k.length-1)*100,I=100-j;return`${Z===0?"M":"L"} ${re} ${I}`},F=(j,Z)=>{const re=Z/(k.length-1)*100,I=100-j;return`${Z===0?"M":"L"} ${re} ${I}`},W=(j,Z)=>{const re=Z/(v.length-1)*100,I=100-j;return`${Z===0?"M":"L"} ${re} ${I}`},G=(j,Z)=>{const re=Z/(v.length-1)*100,I=100-j;return`${Z===0?"M":"L"} ${re} ${I}`};return r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,l=i?o.get(i):null),r.$$.dirty[0]&4096&&t(1,p=(l==null?void 0:l.connected)||!1),r.$$.dirty[0]&4096&&t(0,w=(l==null?void 0:l.type)==="local"),r.$$.dirty[0]&3&&t(11,_=p&&!w),r.$$.dirty[0]&8192&&t(10,q=i),r.$$.dirty[0]&9216&&q!==i&&(q&&se(q),J(i)),r.$$.dirty[0]&10240&&i&&_&&D(),r.$$.dirty[0]&10240&&(!i||!_)&&(t(2,k=[]),t(3,v=[]),t(4,n=[]),t(5,u={...f}),t(6,a={...b}),t(7,h={...d}),t(8,m={...g}),t(9,C={...y}))},[w,p,k,v,n,u,a,h,m,C,q,_,l,i,o,H,F,W,G]}class bc extends ut{constructor(e){super(),dt(this,e,vc,mc,ct,{},null,[-1,-1])}}function yc(r){let e;return{c(){e=E("span"),e.textContent="✗ 无效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function wc(r){let e;return{c(){e=E("span"),e.textContent="✓ 有效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function Ni(r){let e,t,l,p,w;return{c(){e=E("div"),t=oe("svg"),l=oe("path"),p=O(),w=X(r[3]),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),s(t,"class","w-4 h-4"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(_,i){V(_,e,i),c(e,t),c(t,l),c(e,p),c(e,w)},p(_,i){i&8&&de(w,_[3])},d(_){_&&K(e)}}}function Ki(r){let e,t,l;return{c(){e=E("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,w){V(p,e,w),t||(l=ee(e,"click",r[9]),t=!0)},p:Ee,d(p){p&&K(e),t=!1,l()}}}function kc(r){let e,t,l,p,w,_,i,o,f=r[5].chars+"",b,d,g=r[5].lines+"",y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U,q,J,se,Y,D,H,F,W,G,j,Z,re,I,T,$,z,N,Q,te,ae,ce,le;function he(ue,ie){if(ue[4])return wc;if(ue[3])return yc}let fe=he(r),ye=fe&&fe(r),be=r[3]&&Ni(r),ve=r[1]&&Ki(r);return{c(){e=E("div"),t=E("div"),l=E("div"),p=E("label"),w=E("span"),w.textContent="输入 JSON",_=O(),ye&&ye.c(),i=O(),o=E("div"),b=X(f),d=X(" 字符 · "),y=X(g),k=X(" 行"),v=O(),n=E("textarea"),a=O(),be&&be.c(),h=O(),m=E("div"),C=E("button"),x=oe("svg"),M=oe("path"),S=O(),L=E("span"),L.textContent="格式化",R=O(),P=E("button"),A=oe("svg"),U=oe("path"),q=O(),J=E("span"),J.textContent="压缩",Y=O(),D=E("button"),H=oe("svg"),F=oe("path"),W=O(),G=E("span"),G.textContent="转义",Z=O(),re=E("div"),I=E("div"),T=E("label"),T.textContent="输出",$=O(),ve&&ve.c(),z=O(),N=E("textarea"),Q=O(),te=E("div"),ae=E("button"),ae.textContent="清空全部",s(p,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(o,"class","text-xs text-gray-500 dark:text-gray-400"),s(l,"class","flex items-center justify-between mb-2"),s(n,"placeholder","输入 JSON..."),s(n,"class",u="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),s(t,"class","relative"),s(M,"stroke-linecap","round"),s(M,"stroke-linejoin","round"),s(M,"stroke-width","2"),s(M,"d","M4 6h16M4 12h16m-7 6h7"),s(x,"class","w-4 h-4"),s(x,"fill","none"),s(x,"stroke","currentColor"),s(x,"viewBox","0 0 24 24"),s(L,"class","text-sm"),C.disabled=B=r[2]||!r[0].trim(),s(C,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(U,"stroke-linecap","round"),s(U,"stroke-linejoin","round"),s(U,"stroke-width","2"),s(U,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),s(A,"class","w-4 h-4"),s(A,"fill","none"),s(A,"stroke","currentColor"),s(A,"viewBox","0 0 24 24"),s(J,"class","text-sm"),P.disabled=se=r[2]||!r[0].trim(),s(P,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(F,"stroke-linecap","round"),s(F,"stroke-linejoin","round"),s(F,"stroke-width","2"),s(F,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),s(H,"class","w-4 h-4"),s(H,"fill","none"),s(H,"stroke","currentColor"),s(H,"viewBox","0 0 24 24"),s(G,"class","text-sm"),D.disabled=j=r[2]||!r[0].trim(),s(D,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(m,"class","grid grid-cols-3 gap-3"),s(T,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(I,"class","flex items-center justify-between mb-2"),N.readOnly=!0,s(N,"placeholder","格式化后的 JSON 将显示在这里..."),s(N,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(ae,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(te,"class","flex justify-end"),s(e,"class","space-y-6")},m(ue,ie){V(ue,e,ie),c(e,t),c(t,l),c(l,p),c(p,w),c(p,_),ye&&ye.m(p,null),c(l,i),c(l,o),c(o,b),c(o,d),c(o,y),c(o,k),c(t,v),c(t,n),ke(n,r[0]),c(t,a),be&&be.m(t,null),c(e,h),c(e,m),c(m,C),c(C,x),c(x,M),c(C,S),c(C,L),c(m,R),c(m,P),c(P,A),c(A,U),c(P,q),c(P,J),c(m,Y),c(m,D),c(D,H),c(H,F),c(D,W),c(D,G),c(e,Z),c(e,re),c(re,I),c(I,T),c(I,$),ve&&ve.m(I,null),c(re,z),c(re,N),ke(N,r[1]),c(e,Q),c(e,te),c(te,ae),ce||(le=[ee(n,"input",r[13]),ee(n,"keydown",r[11]),ee(C,"click",r[6]),ee(P,"click",r[7]),ee(D,"click",r[8]),ee(N,"input",r[14]),ee(ae,"click",r[10])],ce=!0)},p(ue,[ie]){fe!==(fe=he(ue))&&(ye&&ye.d(1),ye=fe&&fe(ue),ye&&(ye.c(),ye.m(p,null))),ie&32&&f!==(f=ue[5].chars+"")&&de(b,f),ie&32&&g!==(g=ue[5].lines+"")&&de(y,g),ie&8&&u!==(u="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(ue[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&s(n,"class",u),ie&1&&ke(n,ue[0]),ue[3]?be?be.p(ue,ie):(be=Ni(ue),be.c(),be.m(t,null)):be&&(be.d(1),be=null),ie&5&&B!==(B=ue[2]||!ue[0].trim())&&(C.disabled=B),ie&5&&se!==(se=ue[2]||!ue[0].trim())&&(P.disabled=se),ie&5&&j!==(j=ue[2]||!ue[0].trim())&&(D.disabled=j),ue[1]?ve?ve.p(ue,ie):(ve=Ki(ue),ve.c(),ve.m(I,null)):ve&&(ve.d(1),ve=null),ie&2&&ke(N,ue[1])},i:Ee,o:Ee,d(ue){ue&&K(e),ye&&ye.d(),be&&be.d(),ve&&ve.d(),ce=!1,Be(le)}}}function Sc(r,e,t){let{themeStore:l}=e,p="",w="",_=!1,i="",o=!1,f={chars:0,lines:0};async function b(){if(!p.trim()){t(4,o=!1),t(3,i="");return}if(!window.wailsBindings){t(4,o=!1),t(3,i="Wails 绑定未加载");return}try{const m=await window.wailsBindings.ValidateJSON(p);t(4,o=m.valid),t(3,i=m.error||"")}catch(m){t(4,o=!1),t(3,i=m.message)}}function d(){t(5,f.chars=p.length,f),t(5,f.lines=p.split(`
`).length,f)}async function g(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,w=await window.wailsBindings.FormatJSON(p)),t(4,o=!0),t(3,i="")}catch(m){t(3,i=m.message||"格式化失败")}finally{t(2,_=!1)}}}async function y(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,w=await window.wailsBindings.MinifyJSON(p)),t(4,o=!0),t(3,i="")}catch(m){t(3,i=m.message||"压缩失败")}finally{t(2,_=!1)}}}async function k(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,w=await window.wailsBindings.EscapeJSON(p)),t(4,o=!0),t(3,i="")}catch(m){t(3,i=m.message||"转义失败")}finally{t(2,_=!1)}}}async function v(){if(w)try{await navigator.clipboard.writeText(w)}catch(m){console.error("复制失败:",m)}}function n(){t(0,p=""),t(1,w=""),t(4,o=!1)}function u(m){(m.ctrlKey||m.metaKey)&&m.key.toLowerCase()==="enter"&&!_&&p.trim()&&(m.preventDefault(),g())}function a(){p=this.value,t(0,p)}function h(){w=this.value,t(1,w)}return r.$$set=m=>{"themeStore"in m&&t(12,l=m.themeStore)},b(),d(),[p,w,_,i,o,f,g,y,k,v,n,u,l,a,h]}class Vi extends ut{constructor(e){super(),dt(this,e,Sc,kc,ct,{themeStore:12})}}function Cc(r){let e,t,l,p=r[2]==="encode"?"编码":"解码",w;return{c(){e=oe("svg"),t=oe("path"),l=O(),w=X(p),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),c(e,t),V(_,l,i),V(_,w,i)},p(_,i){i&4&&p!==(p=_[2]==="encode"?"编码":"解码")&&de(w,p)},d(_){_&&(K(e),K(l),K(w))}}}function xc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=X(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},p:Ee,d(w){w&&(K(e),K(p))}}}function qi(r){let e,t,l;return{c(){e=E("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,w){V(p,e,w),t||(l=ee(e,"click",r[5]),t=!0)},p:Ee,d(p){p&&K(e),t=!1,l()}}}function Ec(r){let e,t,l,p,w,_,i,o,f,b,d,g,y=r[2]==="encode"?"输入文本":"输入 Base64",k,v,n,u,a,h,m,C,x,M,S,L,B=r[2]==="encode"?"Base64 输出":"解码结果",R,P,A,U,q,J,se,Y,D,H,F,W;function G(I,T){return I[3]?xc:Cc}let j=G(r),Z=j(r),re=r[1]&&qi(r);return{c(){e=E("div"),t=E("div"),l=E("button"),p=X("编码"),_=O(),i=E("button"),o=X("解码"),b=O(),d=E("div"),g=E("label"),k=X(y),v=O(),n=E("textarea"),a=O(),h=E("div"),m=E("button"),Z.c(),x=O(),M=E("div"),S=E("div"),L=E("label"),R=X(B),P=O(),re&&re.c(),A=O(),U=E("textarea"),J=O(),se=E("div"),Y=E("button"),Y.textContent="清空全部",D=O(),H=E("button"),H.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(n,"placeholder",u=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),s(n,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),m.disabled=C=r[3]||!r[0].trim(),s(m,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(h,"class","flex items-center justify-center"),s(L,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(S,"class","flex items-center justify-between mb-2"),U.readOnly=!0,s(U,"placeholder",q=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(U,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(Y,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(H,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(se,"class","flex justify-between items-center"),s(e,"class","space-y-6")},m(I,T){V(I,e,T),c(e,t),c(t,l),c(l,p),c(t,_),c(t,i),c(i,o),c(e,b),c(e,d),c(d,g),c(g,k),c(d,v),c(d,n),ke(n,r[0]),c(e,a),c(e,h),c(h,m),Z.m(m,null),c(e,x),c(e,M),c(M,S),c(S,L),c(L,R),c(S,P),re&&re.m(S,null),c(M,A),c(M,U),ke(U,r[1]),c(e,J),c(e,se),c(se,Y),c(se,D),c(se,H),F||(W=[ee(l,"click",r[10]),ee(i,"click",r[11]),ee(n,"input",r[12]),ee(n,"keydown",r[8]),ee(m,"click",r[4]),ee(U,"input",r[13]),ee(Y,"click",r[6]),ee(H,"click",r[7])],F=!0)},p(I,[T]){T&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),T&4&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),T&4&&y!==(y=I[2]==="encode"?"输入文本":"输入 Base64")&&de(k,y),T&4&&u!==(u=I[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&s(n,"placeholder",u),T&1&&ke(n,I[0]),j===(j=G(I))&&Z?Z.p(I,T):(Z.d(1),Z=j(I),Z&&(Z.c(),Z.m(m,null))),T&9&&C!==(C=I[3]||!I[0].trim())&&(m.disabled=C),T&4&&B!==(B=I[2]==="encode"?"Base64 输出":"解码结果")&&de(R,B),I[1]?re?re.p(I,T):(re=qi(I),re.c(),re.m(S,null)):re&&(re.d(1),re=null),T&4&&q!==(q=I[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(U,"placeholder",q),T&2&&ke(U,I[1])},i:Ee,o:Ee,d(I){I&&K(e),Z.d(),re&&re.d(),F=!1,Be(W)}}}function Lc(r,e,t){let{themeStore:l}=e,p="",w="",_="encode",i=!1;async function o(){if(!(!p.trim()||i||!window.wailsBindings)){t(3,i=!0);try{_==="encode"?t(1,w=await window.wailsBindings.EncodeBase64(p)):t(1,w=await window.wailsBindings.DecodeBase64(p))}catch(u){t(1,w=""),console.error("处理失败:",u),alert("处理失败: "+(u.message||u))}finally{t(3,i=!1)}}}async function f(){if(w)try{await navigator.clipboard.writeText(w)}catch(u){console.error("复制失败:",u)}}function b(){t(0,p=""),t(1,w="")}function d(){t(2,_=_==="encode"?"decode":"encode"),t(0,p=""),t(1,w="")}function g(u){(u.ctrlKey||u.metaKey)&&u.key.toLowerCase()==="enter"&&!i&&p.trim()&&(u.preventDefault(),o())}const y=()=>t(2,_="encode"),k=()=>t(2,_="decode");function v(){p=this.value,t(0,p)}function n(){w=this.value,t(1,w)}return r.$$set=u=>{"themeStore"in u&&t(9,l=u.themeStore)},[p,w,_,i,o,f,b,d,g,l,y,k,v,n]}class Gi extends ut{constructor(e){super(),dt(this,e,Lc,Ec,ct,{themeStore:9})}}function Ji(r,e,t){const l=r.slice();return l[29]=e[t],l}function Xi(r,e,t){const l=r.slice();return l[29]=e[t],l}function Yi(r){let e,t=r[29].name+"",l;return{c(){e=E("option"),l=X(t),e.__value=r[29].id,ke(e,e.__value)},m(p,w){V(p,e,w),c(e,l)},p:Ee,d(p){p&&K(e)}}}function Zi(r){let e,t=r[29].name+"",l;return{c(){e=E("option"),l=X(t),e.__value=r[29].id,ke(e,e.__value)},m(p,w){V(p,e,w),c(e,l)},p:Ee,d(p){p&&K(e)}}}function Qi(r){let e,t,l,p,w,_,i,o,f,b;return{c(){e=E("div"),t=E("button"),l=X("加密"),w=O(),_=E("button"),i=X("解密"),s(t,"class",p="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(_,"class",o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(d,g){V(d,e,g),c(e,t),c(t,l),c(e,w),c(e,_),c(_,i),f||(b=[ee(t,"click",r[24]),ee(_,"click",r[25])],f=!0)},p(d,g){g[0]&2&&p!==(p="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(t,"class",p),g[0]&2&&o!==(o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(_,"class",o)},d(d){d&&K(e),f=!1,Be(b)}}}function $i(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U;return{c(){e=E("div"),t=E("div"),l=E("div"),p=E("label"),p.textContent="密钥（Hex）",w=O(),_=E("button"),_.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,i=O(),o=E("input"),f=O(),b=E("div"),d=X("密钥长度: "),g=X(r[9]),y=O(),k=E("div"),v=E("div"),n=E("label"),u=X(r[11]),a=X("（Hex）"),h=O(),m=E("button"),m.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,C=O(),x=E("input"),S=O(),L=E("div"),B=X(r[11]),R=X("长度: "),P=X(r[10]),s(p,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(_,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(l,"class","flex items-center justify-between mb-2"),s(o,"type","text"),s(o,"placeholder","例如: 00112233445566778899aabbccddeeff"),s(o,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(m,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(v,"class","flex items-center justify-between mb-2"),s(x,"type","text"),s(x,"placeholder",M=r[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),s(x,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(L,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(q,J){V(q,e,J),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(t,i),c(t,o),ke(o,r[5]),c(t,f),c(t,b),c(b,d),c(b,g),c(e,y),c(e,k),c(k,v),c(v,n),c(n,u),c(n,a),c(v,h),c(v,m),c(k,C),c(k,x),ke(x,r[6]),c(k,S),c(k,L),c(L,B),c(L,R),c(L,P),A||(U=[ee(_,"click",r[19]),ee(o,"input",r[26]),ee(m,"click",r[20]),ee(x,"input",r[27])],A=!0)},p(q,J){J[0]&32&&o.value!==q[5]&&ke(o,q[5]),J[0]&512&&de(g,q[9]),J[0]&2048&&de(u,q[11]),J[0]&2048&&M!==(M=q[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10")&&s(x,"placeholder",M),J[0]&64&&x.value!==q[6]&&ke(x,q[6]),J[0]&2048&&de(B,q[11]),J[0]&1024&&de(P,q[10])},d(q){q&&K(e),A=!1,Be(U)}}}function Mc(r){let e,t,l,p=r[2]?"计算哈希":r[1]==="decrypt"?"解密":"加密",w;return{c(){e=oe("svg"),t=oe("path"),l=O(),w=X(p),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),c(e,t),V(_,l,i),V(_,w,i)},p(_,i){i[0]&6&&p!==(p=_[2]?"计算哈希":_[1]==="decrypt"?"解密":"加密")&&de(w,p)},d(_){_&&(K(e),K(l),K(w))}}}function Dc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=X(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},p:Ee,d(w){w&&(K(e),K(p))}}}function es(r){let e,t,l,p,w,_,i,o=r[2]?"哈希值":r[1]==="decrypt"?"明文":"Base64 密文",f,b,d,g,y,k,v,n,u,a,h=r[4].length+"",m,C,x,M;return{c(){e=E("div"),t=E("div"),l=E("label"),p=E("span"),w=X(r[12]),_=O(),i=E("span"),f=X(o),b=O(),d=E("button"),d.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,g=O(),y=E("div"),k=E("code"),v=X(r[4]),n=O(),u=E("div"),a=X("长度: "),m=X(h),C=X(" 字符"),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(d,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),s(y,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),s(u,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(S,L){V(S,e,L),c(e,t),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,f),c(t,b),c(t,d),c(e,g),c(e,y),c(y,k),c(k,v),c(e,n),c(e,u),c(u,a),c(u,m),c(u,C),x||(M=ee(d,"click",r[15]),x=!0)},p(S,L){L[0]&4096&&de(w,S[12]),L[0]&6&&o!==(o=S[2]?"哈希值":S[1]==="decrypt"?"明文":"Base64 密文")&&de(f,o),L[0]&16&&de(v,S[4]),L[0]&16&&h!==(h=S[4].length+"")&&de(m,h)},d(S){S&&K(e),x=!1,M()}}}function Tc(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v=r[2]?"输入文本":r[1]==="decrypt"?"输入 Base64 密文":"输入明文",n,u,a,h,m,C=r[3].length+"",x,M,S,L,B,R,P,A,U,q,J,se,Y=We(r[13].filter(ts)),D=[];for(let T=0;T<Y.length;T+=1)D[T]=Yi(Xi(r,Y,T));let H=We(r[13].filter(rs)),F=[];for(let T=0;T<H.length;T+=1)F[T]=Zi(Ji(r,H,T));let W=!r[2]&&Qi(r),G=!r[2]&&$i(r);function j(T,$){return T[7]?Dc:Mc}let Z=j(r),re=Z(r),I=r[4]&&es(r);return{c(){e=E("div"),t=E("div"),l=E("label"),l.textContent="选择算法",p=O(),w=E("div"),_=E("div"),i=E("select"),o=E("optgroup");for(let T=0;T<D.length;T+=1)D[T].c();f=E("optgroup");for(let T=0;T<F.length;T+=1)F[T].c();b=O(),W&&W.c(),d=O(),G&&G.c(),g=O(),y=E("div"),k=E("label"),n=X(v),u=O(),a=E("textarea"),h=O(),m=E("div"),x=X(C),M=X(" 字符"),S=O(),L=E("div"),B=E("button"),re.c(),P=O(),I&&I.c(),A=O(),U=E("div"),q=E("button"),q.textContent="清空全部",s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(o,"label","Hash"),s(f,"label","加密解密"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[0]===void 0&&fr(()=>r[22].call(i)),s(_,"class","flex-1"),s(w,"class","flex flex-col md:flex-row gap-3"),s(k,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(a,"placeholder",r[8]),s(a,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),B.disabled=R=r[7]||!r[3].trim()||!r[2]&&(!r[5].trim()||!r[6].trim()),s(B,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(L,"class","flex justify-center"),s(q,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(U,"class","flex justify-end"),s(e,"class","space-y-6")},m(T,$){V(T,e,$),c(e,t),c(t,l),c(t,p),c(t,w),c(w,_),c(_,i),c(i,o);for(let z=0;z<D.length;z+=1)D[z]&&D[z].m(o,null);c(i,f);for(let z=0;z<F.length;z+=1)F[z]&&F[z].m(f,null);xr(i,r[0],!0),c(w,b),W&&W.m(w,null),c(e,d),G&&G.m(e,null),c(e,g),c(e,y),c(y,k),c(k,n),c(y,u),c(y,a),ke(a,r[3]),c(y,h),c(y,m),c(m,x),c(m,M),c(e,S),c(e,L),c(L,B),re.m(B,null),c(e,P),I&&I.m(e,null),c(e,A),c(e,U),c(U,q),J||(se=[ee(i,"change",r[22]),ee(i,"change",r[23]),ee(a,"input",r[28]),ee(a,"keydown",r[18]),ee(B,"click",r[14]),ee(q,"click",r[16])],J=!0)},p(T,$){if($[0]&8192){Y=We(T[13].filter(ts));let z;for(z=0;z<Y.length;z+=1){const N=Xi(T,Y,z);D[z]?D[z].p(N,$):(D[z]=Yi(N),D[z].c(),D[z].m(o,null))}for(;z<D.length;z+=1)D[z].d(1);D.length=Y.length}if($[0]&8192){H=We(T[13].filter(rs));let z;for(z=0;z<H.length;z+=1){const N=Ji(T,H,z);F[z]?F[z].p(N,$):(F[z]=Zi(N),F[z].c(),F[z].m(f,null))}for(;z<F.length;z+=1)F[z].d(1);F.length=H.length}$[0]&8193&&xr(i,T[0]),T[2]?W&&(W.d(1),W=null):W?W.p(T,$):(W=Qi(T),W.c(),W.m(w,null)),T[2]?G&&(G.d(1),G=null):G?G.p(T,$):(G=$i(T),G.c(),G.m(e,g)),$[0]&6&&v!==(v=T[2]?"输入文本":T[1]==="decrypt"?"输入 Base64 密文":"输入明文")&&de(n,v),$[0]&256&&s(a,"placeholder",T[8]),$[0]&8&&ke(a,T[3]),$[0]&8&&C!==(C=T[3].length+"")&&de(x,C),Z===(Z=j(T))&&re?re.p(T,$):(re.d(1),re=Z(T),re&&(re.c(),re.m(B,null))),$[0]&236&&R!==(R=T[7]||!T[3].trim()||!T[2]&&(!T[5].trim()||!T[6].trim()))&&(B.disabled=R),T[4]?I?I.p(T,$):(I=es(T),I.c(),I.m(e,A)):I&&(I.d(1),I=null)},i:Ee,o:Ee,d(T){T&&K(e),Kt(D,T),Kt(F,T),W&&W.d(),G&&G.d(),re.d(),I&&I.d(),J=!1,Be(se)}}}const ts=r=>r.type==="hash",rs=r=>r.type==="crypto";function Bc(r,e,t){let l,p,w,_,i,o,{themeStore:f}=e,b="",d="",g="md5",y="encrypt",k="",v="",n=!1;const u=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];async function a(){if(!(!b.trim()||n||!window.wailsBindings)&&!(!l&&(!k.trim()||!v.trim()))){t(7,n=!0),t(4,d="");try{l?t(4,d=await window.wailsBindings.CalculateHash(b,g)):y==="encrypt"?t(4,d=await window.wailsBindings.EncryptText(b,g,k,v)):t(4,d=await window.wailsBindings.DecryptText(b,g,k,v))}catch(J){t(4,d=""),console.error("操作失败:",J),alert("操作失败: "+(J.message||J))}finally{t(7,n=!1)}}}async function h(){if(d)try{await navigator.clipboard.writeText(d)}catch(J){console.error("复制失败:",J)}}function m(){t(3,b=""),t(4,d=""),t(5,k=""),t(6,v="")}function C(){t(3,b=""),t(4,d="")}function x(J){(J.ctrlKey||J.metaKey)&&J.key.toLowerCase()==="enter"&&!n&&b.trim()&&(J.preventDefault(),a())}function M(){let J;g==="sm4-cbc"?J=16:J=32;const se=new Uint8Array(J);crypto.getRandomValues(se),t(5,k=Array.from(se).map(Y=>Y.toString(16).padStart(2,"0")).join(""))}function S(){const J=g==="aes-gcm"?12:16,se=new Uint8Array(J);crypto.getRandomValues(se),t(6,v=Array.from(se).map(Y=>Y.toString(16).padStart(2,"0")).join(""))}function L(){g=qs(this),t(0,g),t(13,u)}const B=()=>{m()},R=()=>{t(1,y="encrypt"),C()},P=()=>{t(1,y="decrypt"),C()};function A(){k=this.value,t(5,k)}function U(){v=this.value,t(6,v)}function q(){b=this.value,t(3,b)}return r.$$set=J=>{"themeStore"in J&&t(21,f=J.themeStore)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,l=(()=>{const J=u.find(se=>se.id===g);return(J==null?void 0:J.type)==="hash"})()),r.$$.dirty[0]&1&&t(12,p=(()=>{var J;return((J=u.find(se=>se.id===g))==null?void 0:J.name)||""})()),r.$$.dirty[0]&1&&t(11,w=g==="aes-gcm"?"Nonce":"IV"),r.$$.dirty[0]&1&&t(10,_=g==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"),r.$$.dirty[0]&1&&t(9,i=g==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"),r.$$.dirty[0]&6&&t(8,o=l?"输入要计算哈希的文本...":y==="decrypt"?"输入 Base64 密文...":"输入要加密的明文...")},[g,y,l,b,d,k,v,n,o,i,_,w,p,u,a,h,m,C,x,M,S,f,L,B,R,P,A,U,q]}class is extends ut{constructor(e){super(),dt(this,e,Bc,Tc,ct,{themeStore:21},null,[-1,-1])}}function Ac(r){let e,t,l,p,w,_,i,o,f,b,d,g=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",y,k,v;return{c(){e=E("div"),t=E("div"),l=E("label"),l.textContent="输入日期时间",p=O(),w=E("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,_=O(),i=E("input"),f=O(),b=E("div"),d=X("格式: "),y=X(g),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(w,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),s(t,"class","flex items-center justify-between mb-2"),s(i,"type","text"),s(i,"placeholder",o=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),s(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(n,u){V(n,e,u),c(e,t),c(t,l),c(t,p),c(t,w),c(e,_),c(e,i),ke(i,r[3]),c(e,f),c(e,b),c(b,d),c(b,y),k||(v=[ee(w,"click",r[9]),ee(i,"input",r[19]),ee(i,"keydown",r[12])],k=!0)},p(n,u){u&2&&o!==(o=n[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&s(i,"placeholder",o),u&8&&i.value!==n[3]&&ke(i,n[3]),u&2&&g!==(g=n[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&de(y,g)},d(n){n&&K(e),k=!1,Be(v)}}}function Rc(r){let e,t,l,p,w=r[1]==="milliseconds"?"毫秒":"秒",_,i,o,f,b,d,g,y,k;return{c(){e=E("div"),t=E("div"),l=E("label"),p=X("输入 Unix 时间戳（"),_=X(w),i=X("）"),o=O(),f=E("button"),f.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,b=O(),d=E("input"),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(f,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),s(t,"class","flex items-center justify-between mb-2"),s(d,"type","number"),s(d,"placeholder",g=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),s(d,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,n){V(v,e,n),c(e,t),c(t,l),c(l,p),c(l,_),c(l,i),c(t,o),c(t,f),c(e,b),c(e,d),ke(d,r[2]),y||(k=[ee(f,"click",r[8]),ee(d,"input",r[18]),ee(d,"keydown",r[12])],y=!0)},p(v,n){n&2&&w!==(w=v[1]==="milliseconds"?"毫秒":"秒")&&de(_,w),n&2&&g!==(g=v[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&s(d,"placeholder",g),n&4&&jr(d.value)!==v[2]&&ke(d,v[2])},d(v){v&&K(e),y=!1,Be(k)}}}function Oc(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=X(`
        转换`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),V(p,l,w)},d(p){p&&(K(e),K(l))}}}function Pc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=X(`
        转换中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},d(w){w&&(K(e),K(p))}}}function ss(r){let e,t,l,p=r[0]==="toDateTime"?"日期时间":"时间戳",w,_,i,o,f,b,d,g,y;return{c(){e=E("div"),t=E("div"),l=E("label"),w=X(p),_=O(),i=E("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,o=O(),f=E("div"),b=E("code"),d=X(r[4]),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(b,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),s(f,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,v){V(k,e,v),c(e,t),c(t,l),c(l,w),c(t,_),c(t,i),c(e,o),c(e,f),c(f,b),c(b,d),g||(y=ee(i,"click",r[10]),g=!0)},p(k,v){v&1&&p!==(p=k[0]==="toDateTime"?"日期时间":"时间戳")&&de(w,p),v&16&&de(d,k[4])},d(k){k&&K(e),g=!1,y()}}}function Hc(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P=r[1]==="milliseconds"?"毫秒":"秒",A,U,q,J,se,Y,D,H,F,W,G,j,Z,re,I;function T(ce,le){return ce[0]==="toDateTime"?Rc:Ac}let $=T(r),z=$(r);function N(ce,le){return ce[5]?Pc:Oc}let Q=N(r),te=Q(r),ae=r[4]&&ss(r);return{c(){e=E("div"),t=E("div"),l=E("button"),p=X("时间戳 → 日期时间"),_=O(),i=E("button"),o=X("日期时间 → 时间戳"),b=O(),d=E("div"),g=E("div"),y=E("button"),k=X("秒"),n=O(),u=E("button"),a=X("毫秒"),m=O(),C=E("div"),x=E("div"),M=oe("svg"),S=oe("path"),L=O(),B=E("span"),R=X("当前时间戳（"),A=X(P),U=X("）: "),q=E("strong"),J=X(r[6]),se=O(),z.c(),Y=O(),D=E("div"),H=E("button"),te.c(),W=O(),ae&&ae.c(),G=O(),j=E("div"),Z=E("button"),Z.textContent="清空全部",s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(y,"class",v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(u,"class",h="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(g,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(d,"class","flex justify-end"),s(S,"stroke-linecap","round"),s(S,"stroke-linejoin","round"),s(S,"stroke-width","2"),s(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(M,"class","w-5 h-5"),s(M,"fill","none"),s(M,"stroke","currentColor"),s(M,"viewBox","0 0 24 24"),s(q,"class","font-mono"),s(x,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),s(C,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),H.disabled=F=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),s(H,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(D,"class","flex justify-center"),s(Z,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(j,"class","flex justify-end"),s(e,"class","space-y-6")},m(ce,le){V(ce,e,le),c(e,t),c(t,l),c(l,p),c(t,_),c(t,i),c(i,o),c(e,b),c(e,d),c(d,g),c(g,y),c(y,k),c(g,n),c(g,u),c(u,a),c(e,m),c(e,C),c(C,x),c(x,M),c(M,S),c(x,L),c(x,B),c(B,R),c(B,A),c(B,U),c(B,q),c(q,J),c(e,se),z.m(e,null),c(e,Y),c(e,D),c(D,H),te.m(H,null),c(e,W),ae&&ae.m(e,null),c(e,G),c(e,j),c(j,Z),re||(I=[ee(l,"click",r[14]),ee(i,"click",r[15]),ee(y,"click",r[16]),ee(u,"click",r[17]),ee(H,"click",r[7]),ee(Z,"click",r[11])],re=!0)},p(ce,[le]){le&1&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ce[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),le&1&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ce[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),le&2&&v!==(v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ce[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(y,"class",v),le&2&&h!==(h="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ce[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(u,"class",h),le&2&&P!==(P=ce[1]==="milliseconds"?"毫秒":"秒")&&de(A,P),le&64&&de(J,ce[6]),$===($=T(ce))&&z?z.p(ce,le):(z.d(1),z=$(ce),z&&(z.c(),z.m(e,Y))),Q!==(Q=N(ce))&&(te.d(1),te=Q(ce),te&&(te.c(),te.m(H,null))),le&45&&F!==(F=ce[5]||(ce[0]==="toDateTime"?!ce[2].trim():!ce[3].trim()))&&(H.disabled=F),ce[4]?ae?ae.p(ce,le):(ae=ss(ce),ae.c(),ae.m(e,G)):ae&&(ae.d(1),ae=null)},i:Ee,o:Ee,d(ce){ce&&K(e),z.d(),te.d(),ae&&ae.d(),re=!1,Be(I)}}}const Ic="2006-01-02 15:04:05",Fc="2006-01-02 15:04:05.000";function Wc(r,e,t){let{themeStore:l}=e,p="toDateTime",w="seconds",_="",i="",o="",f=!1,b=0;function d(){const L=Date.now();t(6,b=w==="milliseconds"?L:Math.floor(L/1e3))}function g(){return w==="milliseconds"?Fc:Ic}async function y(){if(window.wailsBindings){t(5,f=!0),t(4,o="");try{if(p==="toDateTime"){const L=parseInt(_.trim());if(isNaN(L))throw new Error("请输入有效的时间戳");w==="milliseconds"?t(4,o=await window.wailsBindings.TimestampToDateTimeMs(L,g())):t(4,o=await window.wailsBindings.TimestampToDateTime(L,g()))}else{if(!i.trim())throw new Error("请输入日期时间");if(w==="milliseconds"){const L=await window.wailsBindings.DateTimeToTimestampMs(i,g());t(4,o=L.toString())}else{const L=await window.wailsBindings.DateTimeToTimestamp(i,g());t(4,o=L.toString())}}}catch(L){t(4,o=""),console.error("转换失败:",L),alert("转换失败: "+(L.message||L))}finally{t(5,f=!1)}}}async function k(){if(window.wailsBindings)try{const L=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,_=L.toString())}catch(L){console.error("获取当前时间戳失败:",L)}}async function v(){if(window.wailsBindings)try{const L=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),B=w==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(L,g()):await window.wailsBindings.TimestampToDateTime(L,g());t(3,i=B)}catch(L){console.error("获取当前时间失败:",L)}}async function n(){if(o)try{await navigator.clipboard.writeText(o)}catch(L){console.error("复制失败:",L)}}function u(){t(2,_=""),t(3,i=""),t(4,o="")}function a(L){(L.ctrlKey||L.metaKey)&&L.key.toLowerCase()==="enter"&&!f&&(p==="toDateTime"&&_.trim()||p==="toTimestamp"&&i.trim())&&(L.preventDefault(),y())}const h=()=>{t(0,p="toDateTime"),u()},m=()=>{t(0,p="toTimestamp"),u()},C=()=>{t(1,w="seconds"),u()},x=()=>{t(1,w="milliseconds"),u()};function M(){_=jr(this.value),t(2,_)}function S(){i=this.value,t(3,i)}return r.$$set=L=>{"themeStore"in L&&t(13,l=L.themeStore)},d(),[p,w,_,i,o,f,b,y,k,v,n,u,a,l,h,m,C,x,M,S]}class ns extends ut{constructor(e){super(),dt(this,e,Wc,Hc,ct,{themeStore:13})}}function os(r,e,t){const l=r.slice();return l[12]=e[t],l[14]=t,l}function jc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("path"),l=O(),p=E("span"),p.textContent="生成 UUID v4",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),s(e,"class","w-6 h-6"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),V(w,l,_),V(w,p,_)},d(w){w&&(K(e),K(l),K(p))}}}function zc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=X(`
        生成中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-6 h-6"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},d(w){w&&(K(e),K(p))}}}function ls(r){let e,t,l,p,w,_,i,o,f,b,d;function g(v,n){return v[3]===v[0]?Nc:Uc}let y=g(r),k=y(r);return{c(){e=E("div"),t=E("div"),l=E("label"),l.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,p=O(),w=E("button"),k.c(),_=O(),i=E("div"),o=E("code"),f=X(r[0]),s(l,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(w,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),s(t,"class","flex items-center justify-between mb-3"),s(o,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),s(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(v,n){V(v,e,n),c(e,t),c(t,l),c(t,p),c(t,w),k.m(w,null),c(e,_),c(e,i),c(i,o),c(o,f),b||(d=ee(w,"click",r[9]),b=!0)},p(v,n){y!==(y=g(v))&&(k.d(1),k=y(v),k&&(k.c(),k.m(w,null))),n&1&&de(f,v[0])},d(v){v&&K(e),k.d(),b=!1,d()}}}function Uc(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=X(`
            复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),V(p,l,w)},d(p){p&&(K(e),K(l))}}}function Nc(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=X(`
            已复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),V(p,l,w)},d(p){p&&(K(e),K(l))}}}function as(r){let e,t,l,p,w,_,i,o,f=r[1].length+"",b,d,g,y,k,v,n,u,a=We(r[1]),h=[];for(let m=0;m<a.length;m+=1)h[m]=cs(os(r,a,m));return{c(){e=E("div"),t=E("div"),l=E("label"),p=oe("svg"),w=oe("path"),_=X(`
          历史记录
          `),i=E("span"),o=X("("),b=X(f),d=X("/10)"),g=O(),y=E("button"),y.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=O(),v=E("div");for(let m=0;m<h.length;m+=1)h[m].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(p,"class","w-4 h-4"),s(p,"fill","none"),s(p,"stroke","currentColor"),s(p,"viewBox","0 0 24 24"),s(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),s(l,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(y,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),s(t,"class","flex items-center justify-between mb-3"),s(v,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(m,C){V(m,e,C),c(e,t),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,o),c(i,b),c(i,d),c(t,g),c(t,y),c(e,k),c(e,v);for(let x=0;x<h.length;x+=1)h[x]&&h[x].m(v,null);n||(u=ee(y,"click",r[6]),n=!0)},p(m,C){if(C&2&&f!==(f=m[1].length+"")&&de(b,f),C&170){a=We(m[1]);let x;for(x=0;x<a.length;x+=1){const M=os(m,a,x);h[x]?h[x].p(M,C):(h[x]=cs(M),h[x].c(),h[x].m(v,null))}for(;x<h.length;x+=1)h[x].d(1);h.length=a.length}},d(m){m&&K(e),Kt(h,m),n=!1,u()}}}function Kc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function Vc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function cs(r){let e,t,l=r[12]+"",p,w,_,i,o,f,b,d,g;function y(){return r[10](r[12])}function k(a,h){return a[3]===a[12]?Vc:Kc}let v=k(r),n=v(r);function u(){return r[11](r[12])}return{c(){e=E("div"),t=E("code"),p=X(l),w=O(),_=E("div"),i=E("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',o=O(),f=E("button"),n.c(),b=O(),s(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),s(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(i,"title","使用此 UUID"),s(f,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(f,"title","复制"),s(_,"class","flex items-center gap-2 shrink-0"),s(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(a,h){V(a,e,h),c(e,t),c(t,p),c(e,w),c(e,_),c(_,i),c(_,o),c(_,f),n.m(f,null),c(e,b),d||(g=[ee(i,"click",y),ee(f,"click",u)],d=!0)},p(a,h){r=a,h&2&&l!==(l=r[12]+"")&&de(p,l),v!==(v=k(r))&&(n.d(1),n=v(r),n&&(n.c(),n.m(f,null)))},d(a){a&&K(e),n.d(),d=!1,Be(g)}}}function hs(r){let e;return{c(){e=E("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',s(e,"class","text-center py-8")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function qc(r){let e,t,l,p,w,_,i,o,f,b;function d(u,a){return u[2]?zc:jc}let g=d(r),y=g(r),k=r[0]&&ls(r),v=r[1].length>0&&as(r),n=!r[0]&&hs();return{c(){e=E("div"),t=E("div"),l=E("button"),y.c(),p=O(),w=E("div"),_=O(),k&&k.c(),i=O(),v&&v.c(),o=O(),n&&n.c(),s(w,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),l.disabled=r[2],s(l,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),s(t,"class","text-center"),s(e,"class","space-y-6")},m(u,a){V(u,e,a),c(e,t),c(t,l),y.m(l,null),c(l,p),c(l,w),c(e,_),k&&k.m(e,null),c(e,i),v&&v.m(e,null),c(e,o),n&&n.m(e,null),f||(b=ee(l,"click",r[4]),f=!0)},p(u,[a]){g!==(g=d(u))&&(y.d(1),y=g(u),y&&(y.c(),y.m(l,p))),a&4&&(l.disabled=u[2]),u[0]?k?k.p(u,a):(k=ls(u),k.c(),k.m(e,i)):k&&(k.d(1),k=null),u[1].length>0?v?v.p(u,a):(v=as(u),v.c(),v.m(e,o)):v&&(v.d(1),v=null),u[0]?n&&(n.d(1),n=null):n||(n=hs(),n.c(),n.m(e,null))},i:Ee,o:Ee,d(u){u&&K(e),y.d(),k&&k.d(),v&&v.d(),n&&n.d(),f=!1,b()}}}function Gc(r,e,t){let{themeStore:l}=e,p="",w=[],_=!1,i=null;async function o(){if(window.wailsBindings){t(2,_=!0);try{const v=await window.wailsBindings.GenerateUUIDv4();t(0,p=v),w.length<10?t(1,w=[v,...w]):t(1,w=[v,...w.slice(0,9)])}catch(v){console.error("UUID 生成失败:",v),alert("UUID 生成失败: "+(v.message||v))}finally{t(2,_=!1)}}}async function f(v){try{await navigator.clipboard.writeText(v),t(3,i=v),setTimeout(()=>t(3,i=null),2e3)}catch(n){console.error("复制失败:",n)}}function b(){t(1,w=[])}function d(v){t(0,p=v)}const g=()=>f(p),y=v=>d(v),k=v=>f(v);return r.$$set=v=>{"themeStore"in v&&t(8,l=v.themeStore)},[p,w,_,i,o,f,b,d,l,g,y,k]}class ds extends ut{constructor(e){super(),dt(this,e,Gc,qc,ct,{themeStore:8})}}function us(r,e,t){const l=r.slice();return l[19]=e[t][0],l[20]=e[t][1],l}function fs(r,e,t){const l=r.slice();return l[23]=e[t],l}function _s(r){let e,t,l=r[23].label+"",p,w,_,i,o,f,b,d;function g(){return r[16](r[23])}return{c(){e=E("button"),t=E("div"),p=X(l),_=O(),i=E("div"),i.textContent=`${r[23].desc}`,o=O(),s(t,"class",w="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300")),s(i,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(e,"class",f="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))},m(y,k){V(y,e,k),c(e,t),c(t,p),c(e,_),c(e,i),c(e,o),b||(d=ee(e,"click",g),b=!0)},p(y,k){r=y,k&8&&w!==(w="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"))&&s(t,"class",w),k&8&&f!==(f="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))&&s(e,"class",f)},d(y){y&&K(e),b=!1,d()}}}function Jc(r){let e,t,l,p=r[2]==="encode"?"编码":"解码",w;return{c(){e=oe("svg"),t=oe("path"),l=O(),w=X(p),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),c(e,t),V(_,l,i),V(_,w,i)},p(_,i){i&4&&p!==(p=_[2]==="encode"?"编码":"解码")&&de(w,p)},d(_){_&&(K(e),K(l),K(w))}}}function Xc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=X(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},p:Ee,d(w){w&&(K(e),K(p))}}}function ps(r){let e,t,l;return{c(){e=E("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,w){V(p,e,w),t||(l=ee(e,"click",r[9]),t=!0)},p:Ee,d(p){p&&K(e),t=!1,l()}}}function gs(r){let e,t,l,p,w=We(Object.entries(r[5])),_=[];for(let i=0;i<w.length;i+=1)_[i]=ms(us(r,w,i));return{c(){e=E("div"),t=E("h4"),t.textContent="查询参数",l=O(),p=E("div");for(let i=0;i<_.length;i+=1)_[i].c();s(t,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),s(p,"class","space-y-2 max-h-40 overflow-y-auto"),s(e,"class","border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-800/50")},m(i,o){V(i,e,o),c(e,t),c(e,l),c(e,p);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(p,null)},p(i,o){if(o&32){w=We(Object.entries(i[5]));let f;for(f=0;f<w.length;f+=1){const b=us(i,w,f);_[f]?_[f].p(b,o):(_[f]=ms(b),_[f].c(),_[f].m(p,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=w.length}},d(i){i&&K(e),Kt(_,i)}}}function ms(r){let e,t,l=r[19]+"",p,w,_,i,o,f=r[20]+"",b,d;return{c(){e=E("div"),t=E("span"),p=X(l),w=O(),_=E("span"),_.textContent="=",i=O(),o=E("span"),b=X(f),d=O(),s(t,"class","px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg font-medium"),s(_,"class","text-gray-400"),s(o,"class","text-gray-700 dark:text-gray-300 font-mono break-all"),s(e,"class","flex items-center gap-2 text-sm")},m(g,y){V(g,e,y),c(e,t),c(t,p),c(e,w),c(e,_),c(e,i),c(e,o),c(o,b),c(e,d)},p(g,y){y&32&&l!==(l=g[19]+"")&&de(p,l),y&32&&f!==(f=g[20]+"")&&de(b,f)},d(g){g&&K(e)}}}function Yc(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h=r[2]==="encode"?"输入文本":"输入 URL 编码",m,C,x,M,S,L,B,R,P,A,U,q,J,se,Y=r[2]==="encode"?"URL 编码结果":"解码结果",D,H,F,W,G,j,Z=r[5]&&Object.keys(r[5]).length>0,re,I,T,$,z,N,Q,te,ae,ce=We(r[6]),le=[];for(let ue=0;ue<ce.length;ue+=1)le[ue]=_s(fs(r,ce,ue));function he(ue,ie){return ue[4]?Xc:Jc}let fe=he(r),ye=fe(r),be=r[1]&&ps(r),ve=Z&&gs(r);return{c(){e=E("div"),t=E("div"),l=E("button"),p=X("编码"),_=O(),i=E("button"),o=X("解码"),b=O(),d=E("div"),g=E("label"),g.textContent="编码/解码模式",y=O(),k=E("div");for(let ue=0;ue<le.length;ue+=1)le[ue].c();v=O(),n=E("div"),u=E("div"),a=E("label"),m=X(h),C=O(),x=E("button"),x.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
        解析 URL`,M=O(),S=E("textarea"),B=O(),R=E("div"),P=E("button"),ye.c(),U=O(),q=E("div"),J=E("div"),se=E("label"),D=X(Y),H=O(),be&&be.c(),F=O(),W=E("textarea"),j=O(),ve&&ve.c(),re=O(),I=E("div"),T=E("button"),T.textContent="清空全部",$=O(),z=E("button"),z.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,N=O(),Q=E("div"),Q.innerHTML='<p class="font-semibold mb-1">💡 提示:</p> <ul class="space-y-1 ml-4 list-disc"><li><b>Query 参数</b>：编码空格为 +，适合表单数据</li> <li><b>路径</b>：保留斜杠，适合 URL 路径部分</li> <li><b>完整 URL</b>：解析并显示 URL 各组成部分</li> <li>按 <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded">Ctrl+Enter</kbd> 快速执行</li></ul>',s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(k,"class","grid grid-cols-3 gap-2"),s(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(x,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300"),s(u,"class","flex items-center justify-between mb-2"),s(S,"placeholder",L=r[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串..."),s(S,"class","w-full h-28 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),P.disabled=A=r[4]||!r[0].trim(),s(P,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(R,"class","flex items-center justify-center"),s(se,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(J,"class","flex items-center justify-between mb-2"),W.readOnly=!0,s(W,"placeholder",G=r[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(W,"class","w-full h-28 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(T,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(z,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(I,"class","flex justify-between items-center"),s(Q,"class","text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg"),s(e,"class","space-y-6")},m(ue,ie){V(ue,e,ie),c(e,t),c(t,l),c(l,p),c(t,_),c(t,i),c(i,o),c(e,b),c(e,d),c(d,g),c(d,y),c(d,k);for(let _e=0;_e<le.length;_e+=1)le[_e]&&le[_e].m(k,null);c(e,v),c(e,n),c(n,u),c(u,a),c(a,m),c(u,C),c(u,x),c(n,M),c(n,S),ke(S,r[0]),c(e,B),c(e,R),c(R,P),ye.m(P,null),c(e,U),c(e,q),c(q,J),c(J,se),c(se,D),c(J,H),be&&be.m(J,null),c(q,F),c(q,W),ke(W,r[1]),c(e,j),ve&&ve.m(e,null),c(e,re),c(e,I),c(I,T),c(I,$),c(I,z),c(e,N),c(e,Q),te||(ae=[ee(l,"click",r[14]),ee(i,"click",r[15]),ee(x,"click",r[8]),ee(S,"input",r[17]),ee(S,"keydown",r[12]),ee(P,"click",r[7]),ee(W,"input",r[18]),ee(T,"click",r[10]),ee(z,"click",r[11])],te=!0)},p(ue,[ie]){if(ie&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ue[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),ie&4&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ue[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),ie&72){ce=We(ue[6]);let _e;for(_e=0;_e<ce.length;_e+=1){const me=fs(ue,ce,_e);le[_e]?le[_e].p(me,ie):(le[_e]=_s(me),le[_e].c(),le[_e].m(k,null))}for(;_e<le.length;_e+=1)le[_e].d(1);le.length=ce.length}ie&4&&h!==(h=ue[2]==="encode"?"输入文本":"输入 URL 编码")&&de(m,h),ie&4&&L!==(L=ue[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串...")&&s(S,"placeholder",L),ie&1&&ke(S,ue[0]),fe===(fe=he(ue))&&ye?ye.p(ue,ie):(ye.d(1),ye=fe(ue),ye&&(ye.c(),ye.m(P,null))),ie&17&&A!==(A=ue[4]||!ue[0].trim())&&(P.disabled=A),ie&4&&Y!==(Y=ue[2]==="encode"?"URL 编码结果":"解码结果")&&de(D,Y),ue[1]?be?be.p(ue,ie):(be=ps(ue),be.c(),be.m(J,null)):be&&(be.d(1),be=null),ie&4&&G!==(G=ue[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(W,"placeholder",G),ie&2&&ke(W,ue[1]),ie&32&&(Z=ue[5]&&Object.keys(ue[5]).length>0),Z?ve?ve.p(ue,ie):(ve=gs(ue),ve.c(),ve.m(e,re)):ve&&(ve.d(1),ve=null)},i:Ee,o:Ee,d(ue){ue&&K(e),Kt(le,ue),ye.d(),be&&be.d(),ve&&ve.d(),te=!1,Be(ae)}}}function Zc(r,e,t){let{themeStore:l}=e,p="",w="",_="encode",i="query",o=!1,f=null;const b=[{value:"query",label:"Query 参数",desc:"空格转为 +"},{value:"path",label:"路径",desc:"保留斜杠"},{value:"full",label:"完整 URL",desc:"解析并编码"}];async function d(){if(!(!p.trim()||o||!window.wailsBindings)){t(4,o=!0),t(5,f=null);try{if(_==="encode"){const x=await window.wailsBindings.URLEncode(p,i);t(1,w=x.encoded)}else{const x=await window.wailsBindings.URLDecode(p,i);t(1,w=x.decoded),x.params&&t(5,f=x.params)}}catch(x){t(1,w=""),console.error("处理失败:",x),alert("处理失败: "+(x.message||x))}finally{t(4,o=!1)}}}async function g(){if(!(!p.trim()||!window.wailsBindings))try{const x=await window.wailsBindings.ParseURL(p);if(t(1,w=JSON.stringify(x,null,2)),x.queryParams){t(5,f={});for(const[M,S]of Object.entries(x.queryParams))t(5,f[M]=Array.isArray(S)?S[0]:S,f)}}catch(x){console.error("解析失败:",x),alert("URL解析失败: "+(x.message||x))}}async function y(){if(w)try{await navigator.clipboard.writeText(w)}catch(x){console.error("复制失败:",x)}}function k(){t(0,p=""),t(1,w=""),t(5,f=null)}function v(){t(2,_=_==="encode"?"decode":"encode"),t(0,p=""),t(1,w=""),t(5,f=null)}function n(x){(x.ctrlKey||x.metaKey)&&x.key.toLowerCase()==="enter"&&!o&&p.trim()&&(x.preventDefault(),d())}const u=()=>t(2,_="encode"),a=()=>t(2,_="decode"),h=x=>t(3,i=x.value);function m(){p=this.value,t(0,p)}function C(){w=this.value,t(1,w)}return r.$$set=x=>{"themeStore"in x&&t(13,l=x.themeStore)},[p,w,_,i,o,f,b,d,g,y,k,v,n,l,u,a,h,m,C]}class vs extends ut{constructor(e){super(),dt(this,e,Zc,Yc,ct,{themeStore:13})}}function bs(r,e,t){const l=r.slice();return l[12]=e[t],l}function ys(r){let e,t,l,p,w,_,i,o,f,b,d,g=[],y=new Map,k,v,n,u,a,h,m,C,x,M=We(r[4]);const S=P=>P[12].id;for(let P=0;P<M.length;P+=1){let A=bs(r,M,P),U=S(A);y.set(U,g[P]=ks(U,A))}const L=[$c,Qc],B=[];function R(P,A){return P[3]?0:1}return a=R(r),h=B[a]=L[a](r),{c(){e=E("div"),t=E("div"),l=O(),p=E("div"),w=E("div"),_=E("div"),i=E("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',o=O(),f=E("button"),f.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=O(),d=E("div");for(let P=0;P<g.length;P+=1)g[P].c();k=O(),v=E("div"),v.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',n=O(),u=E("div"),h.c(),s(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(f,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(f,"title","关闭"),s(_,"class","flex items-center justify-between mb-6"),s(d,"class","space-y-2 flex-1 overflow-y-auto"),s(v,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),s(w,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),s(u,"class","flex-1 flex flex-col overflow-hidden"),s(p,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),s(e,"role","dialog"),s(e,"aria-modal","true"),s(e,"tabindex","-1")},m(P,A){V(P,e,A),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(_,o),c(_,f),c(w,b),c(w,d);for(let U=0;U<g.length;U+=1)g[U]&&g[U].m(d,null);c(w,k),c(w,v),c(p,n),c(p,u),B[a].m(u,null),r[11](e),m=!0,C||(x=[ee(f,"click",r[9]),ee(e,"click",r[5]),ee(e,"keydown",r[8])],C=!0)},p(P,A){A&88&&(M=We(P[4]),g=Tt(g,A,S,1,P,M,y,d,It,ks,null,bs));let U=a;a=R(P),a===U?B[a].p(P,A):(Ct(),Ae(B[U],1,1,()=>{B[U]=null}),xt(),h=B[a],h?h.p(P,A):(h=B[a]=L[a](P),h.c()),Te(h,1),h.m(u,null))},i(P){m||(Te(h),m=!0)},o(P){Ae(h),m=!1},d(P){P&&K(e);for(let A=0;A<g.length;A+=1)g[A].d();B[a].d(),r[11](null),C=!1,Be(x)}}}function ws(r){let e;return{c(){e=E("span"),s(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-cyan-400 via-sky-500 to-indigo-500")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function ks(r,e){let t,l,p,w=e[12].icon+"",_,i,o,f=e[12].name+"",b,d,g,y,k,v,n=e[3]===e[12].id&&ws();function u(){return e[10](e[12])}return{key:r,first:null,c(){t=E("button"),n&&n.c(),l=O(),p=E("span"),_=X(w),i=O(),o=E("span"),b=X(f),g=O(),s(p,"class",`text-2xl ${e[12].color}`),s(o,"class",d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),s(t,"class",y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(a,h){V(a,t,h),n&&n.m(t,null),c(t,l),c(t,p),c(p,_),c(t,i),c(t,o),c(o,b),c(t,g),k||(v=ee(t,"click",u),k=!0)},p(a,h){e=a,e[3]===e[12].id?n||(n=ws(),n.c(),n.m(t,l)):n&&(n.d(1),n=null),h&8&&d!==(d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&s(o,"class",d),h&8&&y!==(y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&s(t,"class",y)},d(a){a&&K(t),n&&n.d(),k=!1,v()}}}function Qc(r){let e;return{c(){e=E("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',s(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,l){V(t,e,l)},p:Ee,i:Ee,o:Ee,d(t){t&&K(e)}}}function $c(r){var a,h;let e,t,l,p=((a=r[7]())==null?void 0:a.icon)+"",w,_,i=((h=r[7]())==null?void 0:h.name)+"",o,f,b,d,g,y,k;const v=[nh,sh,ih,rh,th,eh],n=[];function u(m,C){return m[3]==="json"?0:m[3]==="base64"?1:m[3]==="url"?2:m[3]==="hash"?3:m[3]==="timestamp"?4:m[3]==="uuid"?5:-1}return~(g=u(r))&&(y=n[g]=v[g](r)),{c(){var m;e=E("div"),t=E("h2"),l=E("span"),w=X(p),_=O(),o=X(i),f=O(),b=E("div"),d=E("div"),y&&y.c(),s(l,"class",`text-2xl ${(m=r[7]())==null?void 0:m.color}`),s(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),s(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),s(d,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),s(b,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(m,C){V(m,e,C),c(e,t),c(t,l),c(l,w),c(t,_),c(t,o),V(m,f,C),V(m,b,C),c(b,d),~g&&n[g].m(d,null),k=!0},p(m,C){let x=g;g=u(m),g===x?~g&&n[g].p(m,C):(y&&(Ct(),Ae(n[x],1,1,()=>{n[x]=null}),xt()),~g?(y=n[g],y?y.p(m,C):(y=n[g]=v[g](m),y.c()),Te(y,1),y.m(d,null)):y=null)},i(m){k||(Te(y),k=!0)},o(m){Ae(y),k=!1},d(m){m&&(K(e),K(f),K(b)),~g&&n[g].d()}}}function eh(r){let e,t,l;var p=ds;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=St(p,w(r))),{c(){e&&Ve(e.$$.fragment),t=mt()},m(_,i){e&&Ne(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=ds)){if(e){Ct();const o=e;Ae(o.$$.fragment,1,0,()=>{Ke(o,1)}),xt()}p?(e=St(p,w(_)),Ve(e.$$.fragment),Te(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(p){const o={};i&2&&(o.themeStore=_[1]),e.$set(o)}},i(_){l||(e&&Te(e.$$.fragment,_),l=!0)},o(_){e&&Ae(e.$$.fragment,_),l=!1},d(_){_&&K(t),e&&Ke(e,_)}}}function th(r){let e,t,l;var p=ns;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=St(p,w(r))),{c(){e&&Ve(e.$$.fragment),t=mt()},m(_,i){e&&Ne(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=ns)){if(e){Ct();const o=e;Ae(o.$$.fragment,1,0,()=>{Ke(o,1)}),xt()}p?(e=St(p,w(_)),Ve(e.$$.fragment),Te(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(p){const o={};i&2&&(o.themeStore=_[1]),e.$set(o)}},i(_){l||(e&&Te(e.$$.fragment,_),l=!0)},o(_){e&&Ae(e.$$.fragment,_),l=!1},d(_){_&&K(t),e&&Ke(e,_)}}}function rh(r){let e,t,l;var p=is;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=St(p,w(r))),{c(){e&&Ve(e.$$.fragment),t=mt()},m(_,i){e&&Ne(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=is)){if(e){Ct();const o=e;Ae(o.$$.fragment,1,0,()=>{Ke(o,1)}),xt()}p?(e=St(p,w(_)),Ve(e.$$.fragment),Te(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(p){const o={};i&2&&(o.themeStore=_[1]),e.$set(o)}},i(_){l||(e&&Te(e.$$.fragment,_),l=!0)},o(_){e&&Ae(e.$$.fragment,_),l=!1},d(_){_&&K(t),e&&Ke(e,_)}}}function ih(r){let e,t,l;var p=vs;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=St(p,w(r))),{c(){e&&Ve(e.$$.fragment),t=mt()},m(_,i){e&&Ne(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=vs)){if(e){Ct();const o=e;Ae(o.$$.fragment,1,0,()=>{Ke(o,1)}),xt()}p?(e=St(p,w(_)),Ve(e.$$.fragment),Te(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(p){const o={};i&2&&(o.themeStore=_[1]),e.$set(o)}},i(_){l||(e&&Te(e.$$.fragment,_),l=!0)},o(_){e&&Ae(e.$$.fragment,_),l=!1},d(_){_&&K(t),e&&Ke(e,_)}}}function sh(r){let e,t,l;var p=Gi;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=St(p,w(r))),{c(){e&&Ve(e.$$.fragment),t=mt()},m(_,i){e&&Ne(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=Gi)){if(e){Ct();const o=e;Ae(o.$$.fragment,1,0,()=>{Ke(o,1)}),xt()}p?(e=St(p,w(_)),Ve(e.$$.fragment),Te(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(p){const o={};i&2&&(o.themeStore=_[1]),e.$set(o)}},i(_){l||(e&&Te(e.$$.fragment,_),l=!0)},o(_){e&&Ae(e.$$.fragment,_),l=!1},d(_){_&&K(t),e&&Ke(e,_)}}}function nh(r){let e,t,l;var p=Vi;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=St(p,w(r))),{c(){e&&Ve(e.$$.fragment),t=mt()},m(_,i){e&&Ne(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=Vi)){if(e){Ct();const o=e;Ae(o.$$.fragment,1,0,()=>{Ke(o,1)}),xt()}p?(e=St(p,w(_)),Ve(e.$$.fragment),Te(e.$$.fragment,1),Ne(e,t.parentNode,t)):e=null}else if(p){const o={};i&2&&(o.themeStore=_[1]),e.$set(o)}},i(_){l||(e&&Te(e.$$.fragment,_),l=!0)},o(_){e&&Ae(e.$$.fragment,_),l=!1},d(_){_&&K(t),e&&Ke(e,_)}}}function oh(r){let e,t,l=r[0]&&ys(r);return{c(){l&&l.c(),e=mt()},m(p,w){l&&l.m(p,w),V(p,e,w),t=!0},p(p,[w]){p[0]?l?(l.p(p,w),w&1&&Te(l,1)):(l=ys(p),l.c(),Te(l,1),l.m(e.parentNode,e)):l&&(Ct(),Ae(l,1,1,()=>{l=null}),xt())},i(p){t||(Te(l),t=!0)},o(p){Ae(l),t=!1},d(p){p&&K(e),l&&l.d(p)}}}function lh(r,e,t){let{isOpen:l=!1}=e,{themeStore:p}=e,w=null,_;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"url",name:"URL 编解码",icon:"🔗",color:"text-orange-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function o(v){v.target===v.currentTarget&&t(0,l=!1)}function f(v){t(3,w=v)}function b(){return i.find(v=>v.id===w)}function d(v){v.key==="Escape"&&l&&(v.preventDefault(),t(0,l=!1))}const g=()=>t(0,l=!1),y=v=>f(v.id);function k(v){at[v?"unshift":"push"](()=>{_=v,t(2,_)})}return r.$$set=v=>{"isOpen"in v&&t(0,l=v.isOpen),"themeStore"in v&&t(1,p=v.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&l&&Sr().then(()=>{_&&_.focus()})},[l,p,_,w,i,o,f,b,d,g,y,k]}class ah extends ut{constructor(e){super(),dt(this,e,lh,oh,ct,{isOpen:0,themeStore:1})}}function Ss(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u;return{c(){e=E("div"),t=E("label"),t.textContent="认证方式",l=O(),p=E("div"),w=E("button"),_=E("div"),i=X("密码"),b=O(),d=E("button"),g=E("div"),y=X("SSH 密钥"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"class",o=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(w,"type","button"),s(w,"class",f=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(g,"class",k=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(d,"type","button"),s(d,"class",v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(p,"class","flex gap-2")},m(a,h){V(a,e,h),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(p,b),c(p,d),c(d,g),c(g,y),n||(u=[ee(w,"click",r[21]),ee(d,"click",r[22])],n=!0)},p(a,h){h[0]&8&&o!==(o=`text-xs font-medium ${a[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(_,"class",o),h[0]&8&&f!==(f=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${a[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",f),h[0]&8&&k!==(k=`text-xs font-medium ${a[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(g,"class",k),h[0]&8&&v!==(v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${a[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(d,"class",v)},d(a){a&&K(e),n=!1,Be(u)}}}function Cs(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a;function h(L,B){return L[9]?hh:ch}let m=h(r),C=m(r);function x(L,B){return L[9]?uh:dh}let M=x(r),S=M(r);return{c(){e=E("div"),t=E("label"),t.textContent="SSH 私钥文件",l=O(),p=E("div"),w=E("input"),_=O(),i=E("button"),i.textContent="选择文件",o=O(),f=E("div"),b=E("label"),b.textContent="Passphrase（可选）",d=O(),g=E("div"),C.c(),y=O(),k=E("button"),S.c(),v=O(),n=E("p"),n.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(w,"type","text"),s(w,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),w.readOnly=!0,s(w,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),s(i,"type","button"),s(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),s(p,"class","flex gap-1.5"),s(b,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(k,"type","button"),s(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(g,"class","relative"),s(n,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(L,B){V(L,e,B),c(e,t),c(e,l),c(e,p),c(p,w),ke(w,r[4].keyPath),c(p,_),c(p,i),V(L,o,B),V(L,f,B),c(f,b),c(f,d),c(f,g),C.m(g,null),c(g,y),c(g,k),S.m(k,null),c(f,v),c(f,n),u||(a=[ee(w,"input",r[23]),ee(i,"click",r[11]),ee(k,"click",r[26])],u=!0)},p(L,B){B[0]&16&&w.value!==L[4].keyPath&&ke(w,L[4].keyPath),m===(m=h(L))&&C?C.p(L,B):(C.d(1),C=m(L),C&&(C.c(),C.m(g,y))),M!==(M=x(L))&&(S.d(1),S=M(L),S&&(S.c(),S.m(k,null)))},d(L){L&&(K(e),K(o),K(f)),C.d(),S.d(),u=!1,Be(a)}}}function ch(r){let e,t,l;return{c(){e=E("input"),s(e,"type","password"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),ke(e,r[4].passphrase),t||(l=ee(e,"input",r[25]),t=!0)},p(p,w){w[0]&16&&e.value!==p[4].passphrase&&ke(e,p[4].passphrase)},d(p){p&&K(e),t=!1,l()}}}function hh(r){let e,t,l;return{c(){e=E("input"),s(e,"type","text"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),ke(e,r[4].passphrase),t||(l=ee(e,"input",r[24]),t=!0)},p(p,w){w[0]&16&&e.value!==p[4].passphrase&&ke(e,p[4].passphrase)},d(p){p&&K(e),t=!1,l()}}}function dh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function uh(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),c(e,l)},d(p){p&&K(e)}}}function xs(r){let e,t,l;return{c(){e=E("div"),t=X(r[6]),s(e,"class",l=`p-2 rounded-md text-xs ${r[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(p,w){V(p,e,w),c(e,t)},p(p,w){w[0]&64&&de(t,p[6]),w[0]&64&&l!==(l=`p-2 rounded-md text-xs ${p[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&s(e,"class",l)},d(p){p&&K(e)}}}function Es(r){let e,t,l,p,w,_,i,o,f,b;return{c(){e=E("div"),t=E("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',l=O(),p=E("select"),w=E("option"),w.textContent="MySQL",_=E("option"),_.textContent="PostgreSQL",i=E("option"),i.textContent="MongoDB",o=E("option"),o.textContent="Redis",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),w.__value="mysql",ke(w,w.__value),_.__value="postgresql",ke(_,_.__value),i.__value="mongodb",ke(i,i.__value),o.__value="redis",ke(o,o.__value),s(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[4].dbType===void 0&&fr(()=>r[27].call(p))},m(d,g){V(d,e,g),c(e,t),c(e,l),c(e,p),c(p,w),c(p,_),c(p,i),c(p,o),xr(p,r[4].dbType,!0),f||(b=ee(p,"change",r[27]),f=!0)},p(d,g){g[0]&16&&xr(p,d[4].dbType)},d(d){d&&K(e),f=!1,b()}}}function Ls(r){let e,t,l,p,w,_;return{c(){e=E("div"),t=E("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',l=O(),p=E("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"type","text"),p.required=!0,s(p,"placeholder","root"),s(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){V(i,e,o),c(e,t),c(e,l),c(e,p),ke(p,r[4].username),w||(_=ee(p,"input",r[30]),w=!0)},p(i,o){o[0]&16&&p.value!==i[4].username&&ke(p,i[4].username)},d(i){i&&K(e),w=!1,_()}}}function Ms(r){let e,t,l,p,w,_,i,o,f,b,d,g,y;function k(m,C){return m[8]?_h:fh}let v=k(r),n=v(r);function u(m,C){return m[8]?gh:ph}let a=u(r),h=a(r);return{c(){e=E("div"),t=E("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',l=O(),p=E("div"),n.c(),w=O(),_=E("button"),h.c(),i=O(),o=E("div"),f=E("input"),b=O(),d=E("span"),d.textContent="保存密码",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"type","button"),s(_,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(p,"class","relative"),s(f,"type","checkbox"),s(f,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),s(d,"class","text-xs text-gray-700 dark:text-gray-300"),s(o,"class","flex items-center gap-1.5 cursor-pointer")},m(m,C){V(m,e,C),c(e,t),c(e,l),c(e,p),n.m(p,null),c(p,w),c(p,_),h.m(_,null),V(m,i,C),V(m,o,C),c(o,f),f.checked=r[4].savePassword,c(o,b),c(o,d),g||(y=[ee(_,"click",r[33]),ee(f,"change",r[34])],g=!0)},p(m,C){v===(v=k(m))&&n?n.p(m,C):(n.d(1),n=v(m),n&&(n.c(),n.m(p,w))),a!==(a=u(m))&&(h.d(1),h=a(m),h&&(h.c(),h.m(_,null))),C[0]&16&&(f.checked=m[4].savePassword)},d(m){m&&(K(e),K(i),K(o)),n.d(),h.d(),g=!1,Be(y)}}}function fh(r){let e,t,l;return{c(){e=E("input"),s(e,"type","password"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),ke(e,r[4].password),t||(l=ee(e,"input",r[32]),t=!0)},p(p,w){w[0]&16&&e.value!==p[4].password&&ke(e,p[4].password)},d(p){p&&K(e),t=!1,l()}}}function _h(r){let e,t,l;return{c(){e=E("input"),s(e,"type","text"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),ke(e,r[4].password),t||(l=ee(e,"input",r[31]),t=!0)},p(p,w){w[0]&16&&e.value!==p[4].password&&ke(e,p[4].password)},d(p){p&&K(e),t=!1,l()}}}function ph(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function gh(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),c(e,l)},d(p){p&&K(e)}}}function Ds(r){let e,t,l,p,w,_;return{c(){e=E("div"),t=E("label"),t.textContent="数据库名",l=O(),p=E("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"type","text"),s(p,"placeholder","例如：production_db"),s(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){V(i,e,o),c(e,t),c(e,l),c(e,p),ke(p,r[4].database),w||(_=ee(p,"input",r[35]),w=!0)},p(i,o){o[0]&16&&p.value!==i[4].database&&ke(p,i[4].database)},d(i){i&&K(e),w=!1,_()}}}function mh(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U,q,J,se,Y,D,H,F,W,G,j,Z,re,I,T,$,z,N,Q,te,ae,ce,le,he,fe,ye,be,ve,ue,ie,_e,me,Le,$e,qe,je,st,Ue,xe,pe,Oe,nt=r[5]?"测试中...":"测试连接",Pe,ft,ht,et=r[7]?"保存中...":r[1]?"更新连接":"添加连接",Xe,rt,vt,Ie=r[2]==="ssh"&&Ss(r),Fe=r[3]==="key"&&Cs(r),it=r[6]&&xs(r),Ye=r[2]==="database"&&Es(r),Ze=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&Ls(r),tt=r[3]==="password"&&Ms(r),ze=r[2]==="database"&&Ds(r);return{c(){e=E("div"),t=E("label"),t.textContent="连接类型",l=O(),p=E("div"),w=E("button"),_=E("div"),i=oe("svg"),o=oe("path"),b=O(),d=E("span"),g=X("SSH"),v=O(),n=E("button"),u=E("div"),a=oe("svg"),h=oe("path"),C=O(),x=E("span"),M=X("数据库"),B=O(),R=E("button"),P=E("div"),A=oe("svg"),U=oe("path"),J=O(),se=E("span"),Y=X("Docker"),F=O(),W=E("form"),G=E("div"),j=E("label"),j.innerHTML='连接名称 <span class="text-red-500">*</span>',Z=O(),re=E("input"),I=O(),Ie&&Ie.c(),T=O(),Fe&&Fe.c(),$=O(),it&&it.c(),z=O(),Ye&&Ye.c(),N=O(),Q=E("div"),te=E("div"),ae=E("label"),ae.innerHTML='主机地址 <span class="text-red-500">*</span>',ce=O(),le=E("input"),he=O(),fe=E("div"),ye=E("label"),ye.innerHTML='端口 <span class="text-red-500">*</span>',be=O(),ve=E("input"),ue=O(),Ze&&Ze.c(),ie=O(),tt&&tt.c(),_e=O(),ze&&ze.c(),me=O(),Le=E("div"),$e=E("label"),$e.textContent="分组",qe=O(),je=E("input"),st=O(),Ue=E("div"),xe=E("button"),xe.textContent="取消",pe=O(),Oe=E("button"),Pe=X(nt),ft=O(),ht=E("button"),Xe=X(et),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),s(i,"class",f=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(d,"class",y=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(_,"class","flex items-center justify-center gap-1"),s(w,"type","button"),s(w,"class",k=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(h,"stroke-linecap","round"),s(h,"stroke-linejoin","round"),s(h,"stroke-width","2"),s(h,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),s(a,"class",m=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(x,"class",S=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(u,"class","flex items-center justify-center gap-1"),s(n,"type","button"),s(n,"class",L=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(U,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),s(A,"class",q=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(A,"fill","currentColor"),s(A,"viewBox","0 0 24 24"),s(se,"class",D=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(P,"class","flex items-center justify-center gap-1"),s(R,"type","button"),s(R,"class",H=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(p,"class","grid grid-cols-3 gap-2"),s(e,"class","mb-4"),s(j,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(re,"type","text"),re.required=!0,s(re,"placeholder","例如：生产服务器-01"),s(re,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ae,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(le,"type","text"),le.required=!0,s(le,"placeholder","192.168.1.10 或 example.com"),s(le,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(te,"class","col-span-2"),s(ye,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(ve,"type","text"),ve.required=!0,s(ve,"placeholder",r[13]()),s(ve,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(Q,"class","grid grid-cols-3 gap-2"),s($e,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(je,"type","text"),s(je,"placeholder","例如：生产环境"),s(je,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(xe,"type","button"),s(xe,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(Oe,"type","button"),Oe.disabled=r[5],s(Oe,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(ht,"type","submit"),ht.disabled=r[7],s(ht,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(Ue,"class","flex gap-2 pt-3"),s(W,"class","space-y-3")},m(Ce,He){V(Ce,e,He),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(i,o),c(_,b),c(_,d),c(d,g),c(p,v),c(p,n),c(n,u),c(u,a),c(a,h),c(u,C),c(u,x),c(x,M),c(p,B),c(p,R),c(R,P),c(P,A),c(A,U),c(P,J),c(P,se),c(se,Y),V(Ce,F,He),V(Ce,W,He),c(W,G),c(G,j),c(G,Z),c(G,re),ke(re,r[4].name),c(W,I),Ie&&Ie.m(W,null),c(W,T),Fe&&Fe.m(W,null),c(W,$),it&&it.m(W,null),c(W,z),Ye&&Ye.m(W,null),c(W,N),c(W,Q),c(Q,te),c(te,ae),c(te,ce),c(te,le),ke(le,r[4].host),c(Q,he),c(Q,fe),c(fe,ye),c(fe,be),c(fe,ve),ke(ve,r[4].port),c(W,ue),Ze&&Ze.m(W,null),c(W,ie),tt&&tt.m(W,null),c(W,_e),ze&&ze.m(W,null),c(W,me),c(W,Le),c(Le,$e),c(Le,qe),c(Le,je),ke(je,r[4].group),c(W,st),c(W,Ue),c(Ue,xe),c(Ue,pe),c(Ue,Oe),c(Oe,Pe),c(Ue,ft),c(Ue,ht),c(ht,Xe),rt||(vt=[ee(w,"click",r[17]),ee(n,"click",r[18]),ee(R,"click",r[19]),ee(re,"input",r[20]),ee(le,"input",r[28]),ee(ve,"input",r[29]),ee(je,"input",r[36]),ee(xe,"click",r[37]),ee(Oe,"click",r[10]),ee(W,"submit",En(r[12]))],rt=!0)},p(Ce,He){He[0]&4&&f!==(f=`w-4 h-4 ${Ce[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(i,"class",f),He[0]&4&&y!==(y=`text-xs font-medium ${Ce[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(d,"class",y),He[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${Ce[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",k),He[0]&4&&m!==(m=`w-4 h-4 ${Ce[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(a,"class",m),He[0]&4&&S!==(S=`text-xs font-medium ${Ce[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(x,"class",S),He[0]&4&&L!==(L=`p-2 rounded-lg border-2 transition-all ${Ce[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(n,"class",L),He[0]&4&&q!==(q=`w-4 h-4 ${Ce[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(A,"class",q),He[0]&4&&D!==(D=`text-xs font-medium ${Ce[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(se,"class",D),He[0]&4&&H!==(H=`p-2 rounded-lg border-2 transition-all ${Ce[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(R,"class",H),He[0]&16&&re.value!==Ce[4].name&&ke(re,Ce[4].name),Ce[2]==="ssh"?Ie?Ie.p(Ce,He):(Ie=Ss(Ce),Ie.c(),Ie.m(W,T)):Ie&&(Ie.d(1),Ie=null),Ce[3]==="key"?Fe?Fe.p(Ce,He):(Fe=Cs(Ce),Fe.c(),Fe.m(W,$)):Fe&&(Fe.d(1),Fe=null),Ce[6]?it?it.p(Ce,He):(it=xs(Ce),it.c(),it.m(W,z)):it&&(it.d(1),it=null),Ce[2]==="database"?Ye?Ye.p(Ce,He):(Ye=Es(Ce),Ye.c(),Ye.m(W,N)):Ye&&(Ye.d(1),Ye=null),He[0]&16&&le.value!==Ce[4].host&&ke(le,Ce[4].host),He[0]&16&&ve.value!==Ce[4].port&&ke(ve,Ce[4].port),Ce[3]==="password"||Ce[2]==="database"||Ce[2]==="docker"?Ze?Ze.p(Ce,He):(Ze=Ls(Ce),Ze.c(),Ze.m(W,ie)):Ze&&(Ze.d(1),Ze=null),Ce[3]==="password"?tt?tt.p(Ce,He):(tt=Ms(Ce),tt.c(),tt.m(W,_e)):tt&&(tt.d(1),tt=null),Ce[2]==="database"?ze?ze.p(Ce,He):(ze=Ds(Ce),ze.c(),ze.m(W,me)):ze&&(ze.d(1),ze=null),He[0]&16&&je.value!==Ce[4].group&&ke(je,Ce[4].group),He[0]&32&&nt!==(nt=Ce[5]?"测试中...":"测试连接")&&de(Pe,nt),He[0]&32&&(Oe.disabled=Ce[5]),He[0]&130&&et!==(et=Ce[7]?"保存中...":Ce[1]?"更新连接":"添加连接")&&de(Xe,et),He[0]&128&&(ht.disabled=Ce[7])},d(Ce){Ce&&(K(e),K(F),K(W)),Ie&&Ie.d(),Fe&&Fe.d(),it&&it.d(),Ye&&Ye.d(),Ze&&Ze.d(),tt&&tt.d(),ze&&ze.d(),rt=!1,Be(vt)}}}function vh(r){let e,t,l;function p(_){r[39](_)}let w={onClose:r[38],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[mh]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>kt(e,"isOpen",p)),{c(){Ve(e.$$.fragment)},m(_,i){Ne(e,_,i),l=!0},p(_,i){const o={};i[0]&1&&(o.onClose=_[38]),i[0]&2&&(o.title=_[1]?"编辑连接":"添加连接"),i[0]&1023|i[1]&4096&&(o.$$scope={dirty:i,ctx:_}),!t&&i[0]&1&&(t=!0,o.isOpen=_[0],wt(()=>t=!1)),e.$set(o)},i(_){l||(Te(e.$$.fragment,_),l=!0)},o(_){Ae(e.$$.fragment,_),l=!1},d(_){Ke(e,_)}}}function bh(r,e,t){let{isOpen:l=!1}=e,{onAdd:p=()=>{}}=e,{onUpdate:w=()=>{}}=e,{editingAsset:_=null}=e,i="ssh",o="password",f=!1,b="",d=!1,g=!1,y=!1,k=!1,v=!1,n={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function u(){if(!window.wailsBindings){t(6,b="Wails 绑定未加载");return}if(!n.host){t(6,b="请填写主机地址");return}if(o==="password"&&!n.password){t(6,b="请输入密码以测试连接");return}if(o==="password"&&!n.username){t(6,b="请填写用户名");return}if(o==="key"&&!n.keyPath){t(6,b="请选择 SSH 密钥文件");return}t(5,f=!0),t(6,b="");try{const z=o==="key"?n.keyPath:n.password;await window.wailsBindings.TestConnection(n.host,parseInt(n.port),n.username,o,z,n.passphrase||""),t(6,b="✓ 连接成功")}catch(z){console.error("Connection test failed:",z),t(6,b="✗ 连接失败: "+z)}finally{t(5,f=!1)}}async function a(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const z=await window.wailsBindings.SelectSSHKeyFile();z&&t(4,n.keyPath=z,n)}catch(z){console.error("Failed to select key file:",z),t(6,b="选择密钥文件失败: "+z)}}async function h(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!n.name||!n.host){alert("请填写必填字段（连接名称、主机地址）");return}if(o==="password"&&!n.username){alert("密码认证需要填写用户名");return}if(o==="password"&&!n.password){alert("密码认证需要输入密码");return}if(o==="key"&&!n.keyPath){alert("密钥认证需要选择密钥文件");return}t(7,d=!0);try{const z=!!n.id,N={id:z?n.id:`conn_${Date.now()}`,name:n.name,host:n.host,port:parseInt(n.port),user:n.username,auth_type:o,key_path:o==="key"?n.keyPath:"",tags:[n.group||"默认分组"],type:i,metadata:{database:n.database||void 0}};z?(await window.wailsBindings.UpdateConnection(N),o==="password"&&n.password&&n.savePassword?await window.wailsBindings.SavePassword(N.id,n.password):o==="password"&&!n.savePassword&&await window.wailsBindings.DeletePassword(N.id),w(N)):(p(N),o==="password"&&n.password&&n.savePassword&&await window.wailsBindings.SavePassword(N.id,n.password)),t(0,l=!1)}catch(z){console.error("Failed to save connection:",z),alert("保存连接失败: "+z)}finally{t(7,d=!1)}}function m(){t(4,n={id:"",name:"",host:"",port:C(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(6,b=""),t(8,g=!1),t(9,y=!1)}function C(){switch(i){case"ssh":return"22";case"docker":return"2375";case"database":switch(n.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function x(){var z,N,Q;if(!(!_||!l||k))try{const te=await window.wailsBindings.GetConnection(_.id);if(te){t(4,n={id:te.id,name:te.name||"",host:te.host||"",port:((z=te.port)==null?void 0:z.toString())||"",username:te.user||"",password:"",savePassword:!1,keyPath:te.key_path||"",passphrase:"",group:((N=te.tags)==null?void 0:N[0])||"",dbType:"mysql",database:((Q=te.metadata)==null?void 0:Q.database)||""}),t(2,i=te.type||"ssh"),t(3,o=te.auth_type||"password"),k=!0;try{if(await window.wailsBindings.HasPassword(te.id)){t(4,n.savePassword=!0,n);const ce=await window.wailsBindings.GetPassword(te.id);t(4,n.password=ce||"",n)}}catch(ae){console.warn("Failed to load password:",ae)}}}catch(te){console.error("Failed to load connection:",te)}}const M=()=>t(2,i="ssh"),S=()=>t(2,i="database"),L=()=>t(2,i="docker");function B(){n.name=this.value,t(4,n),t(0,l),t(1,_)}const R=()=>{t(3,o="password"),t(6,b="")},P=()=>{t(3,o="key"),t(6,b="")};function A(){n.keyPath=this.value,t(4,n),t(0,l),t(1,_)}function U(){n.passphrase=this.value,t(4,n),t(0,l),t(1,_)}function q(){n.passphrase=this.value,t(4,n),t(0,l),t(1,_)}const J=()=>t(9,y=!y);function se(){n.dbType=qs(this),t(4,n),t(0,l),t(1,_)}function Y(){n.host=this.value,t(4,n),t(0,l),t(1,_)}function D(){n.port=this.value,t(4,n),t(0,l),t(1,_)}function H(){n.username=this.value,t(4,n),t(0,l),t(1,_)}function F(){n.password=this.value,t(4,n),t(0,l),t(1,_)}function W(){n.password=this.value,t(4,n),t(0,l),t(1,_)}const G=()=>t(8,g=!g);function j(){n.savePassword=this.checked,t(4,n),t(0,l),t(1,_)}function Z(){n.database=this.value,t(4,n),t(0,l),t(1,_)}function re(){n.group=this.value,t(4,n),t(0,l),t(1,_)}const I=()=>t(0,l=!1),T=()=>{t(0,l=!1)};function $(z){l=z,t(0,l)}return r.$$set=z=>{"isOpen"in z&&t(0,l=z.isOpen),"onAdd"in z&&t(14,p=z.onAdd),"onUpdate"in z&&t(15,w=z.onUpdate),"editingAsset"in z&&t(1,_=z.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(16,v=l),r.$$.dirty[0]&65537&&v&&!l&&m(),r.$$.dirty[0]&19&&l&&!_&&!n.id&&(n.port||t(4,n.port=C(),n)),r.$$.dirty[0]&16&&n.port===""&&t(4,n.port=C(),n),r.$$.dirty[0]&12&&(i==="ssh"?o!=="password"&&o!=="key"&&t(3,o="password"):t(3,o="password")),r.$$.dirty[0]&3&&l&&_&&x(),r.$$.dirty[0]&18&&_&&n.id!==_.id&&(k=!1),r.$$.dirty[0]&65539&&!v&&l&&_&&(k=!1)},[l,_,i,o,n,f,b,d,g,y,u,a,h,C,p,w,v,M,S,L,B,R,P,A,U,q,J,se,Y,D,H,F,W,G,j,Z,re,I,T,$]}class yh extends ut{constructor(e){super(),dt(this,e,bh,vh,ct,{isOpen:0,onAdd:14,onUpdate:15,editingAsset:1},null,[-1,-1])}}function wh(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U,q,J,se;return{c(){e=E("div"),t=E("div"),t.textContent="哈",l=O(),p=E("div"),w=E("h3"),_=X("AHaSSHTools"),o=O(),f=E("p"),b=X("啊哈 SSH 连接工具"),g=O(),y=E("p"),k=X("版本 "),v=X(r[3]),u=O(),a=E("p"),h=X("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),C=O(),x=E("button"),M=oe("svg"),S=oe("path"),L=O(),B=E("span"),B.textContent="访问 GitHub",P=O(),A=E("p"),U=X("© 2026 AHaSSHTools. All rights reserved."),s(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),s(w,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),s(f,"class",d="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),s(y,"class",n="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),s(p,"class","text-center space-y-1"),s(a,"class",m="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),s(S,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),s(M,"class","w-5 h-5"),s(M,"viewBox","0 0 24 24"),s(M,"fill","currentColor"),s(x,"class",R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),s(A,"class",q="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),s(e,"class","flex flex-col items-center gap-5 py-4")},m(Y,D){V(Y,e,D),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(p,o),c(p,f),c(f,b),c(p,g),c(p,y),c(y,k),c(y,v),c(e,u),c(e,a),c(a,h),c(e,C),c(e,x),c(x,M),c(M,S),c(x,L),c(x,B),c(e,P),c(e,A),c(A,U),J||(se=ee(x,"click",Sh),J=!0)},p(Y,D){D&4&&i!==(i="text-xl font-bold "+(Y[2]==="dark"?"text-white":"text-gray-900"))&&s(w,"class",i),D&4&&d!==(d="text-sm "+(Y[2]==="dark"?"text-gray-400":"text-gray-500"))&&s(f,"class",d),D&8&&de(v,Y[3]),D&4&&n!==(n="text-xs "+(Y[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&s(y,"class",n),D&4&&m!==(m="text-sm text-center max-w-xs "+(Y[2]==="dark"?"text-gray-400":"text-gray-600"))&&s(a,"class",m),D&4&&R!==(R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(Y[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&s(x,"class",R),D&4&&q!==(q="text-xs "+(Y[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&s(A,"class",q)},d(Y){Y&&K(e),J=!1,se()}}}function kh(r){let e,t,l;function p(_){r[5](_)}let w={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[wh]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>kt(e,"isOpen",p)),{c(){Ve(e.$$.fragment)},m(_,i){Ne(e,_,i),l=!0},p(_,[i]){const o={};i&2&&(o.onClose=_[1]),i&140&&(o.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,o.isOpen=_[0],wt(()=>t=!1)),e.$set(o)},i(_){l||(Te(e.$$.fragment,_),l=!0)},o(_){Ae(e.$$.fragment,_),l=!1},d(_){Ke(e,_)}}}async function Sh(){try{await(await dr(()=>Promise.resolve().then(()=>rn),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function Ch(r,e,t){let{isOpen:l=!1}=e,{onClose:p=()=>{}}=e,{themeStore:w={subscribe:()=>()=>{}}}=e,_="light",i="loading...";const o=w.subscribe(b=>{t(2,_=b)});lr(async()=>{try{const{GetVersion:b}=await dr(async()=>{const{GetVersion:d}=await Promise.resolve().then(()=>fn);return{GetVersion:d}},void 0);t(3,i=await b())}catch(b){console.error("Failed to get version:",b),t(3,i="unknown")}return()=>{o()}});function f(b){l=b,t(0,l)}return r.$$set=b=>{"isOpen"in b&&t(0,l=b.isOpen),"onClose"in b&&t(1,p=b.onClose),"themeStore"in b&&t(4,w=b.themeStore)},[l,p,_,i,w,f]}class xh extends ut{constructor(e){super(),dt(this,e,Ch,kh,ct,{isOpen:0,onClose:1,themeStore:4})}}function Ts(r,e,t){const l=r.slice();return l[57]=e[t],l}function Bs(r,e,t){const l=r.slice();return l[57]=e[t],l}function As(r){let e,t=r[12].length+"",l;return{c(){e=E("span"),l=X(t),s(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(p,w){V(p,e,w),c(e,l)},p(p,w){w[0]&4096&&t!==(t=p[12].length+"")&&de(l,t)},d(p){p&&K(e)}}}function Eh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function Lh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&K(e)}}}function Rs(r){let e,t,l,p,w,_;return{c(){e=E("button"),t=oe("svg"),l=oe("path"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M9 5l7 7-7 7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开资产列表")},m(i,o){V(i,e,o),c(e,t),c(t,l),w||(_=ee(e,"click",r[17]),w=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&p!==(p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",p)},d(i){i&&K(e),w=!1,_()}}}function Os(r){let e,t,l,p,w,_,i,o,f;return{c(){e=E("div"),t=E("div"),l=O(),p=E("button"),w=oe("svg"),_=oe("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M15 19l-7-7 7-7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),p.disabled=r[2],s(p,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(p,"title","折叠资产列表"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Se(e,"cursor",r[2]?"default":"col-resize"),Se(e,"height","100%"),Se(e,"padding","0 2px"),Se(e,"pointer-events",r[2]?"none":"auto")},m(b,d){V(b,e,d),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),o||(f=[ee(p,"click",r[17]),ee(e,"mousedown",r[19])],o=!0)},p(b,d){d[0]&4&&(p.disabled=b[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(p,"class",i),d[0]&4&&Se(e,"cursor",b[2]?"default":"col-resize"),d[0]&4&&Se(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&K(e),o=!1,Be(f)}}}function Ps(r){let e,t,l,p,w,_,i,o,f;return{c(){e=E("div"),t=E("div"),l=O(),p=E("button"),w=oe("svg"),_=oe("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M9 5l7 7-7 7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),p.disabled=r[2],s(p,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(p,"title","折叠右侧面板"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Se(e,"cursor",r[2]?"default":"col-resize"),Se(e,"height","100%"),Se(e,"padding","0 2px"),Se(e,"pointer-events",r[2]?"none":"auto")},m(b,d){V(b,e,d),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),o||(f=[ee(p,"click",r[18]),ee(e,"mousedown",r[20])],o=!0)},p(b,d){d[0]&4&&(p.disabled=b[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(p,"class",i),d[0]&4&&Se(e,"cursor",b[2]?"default":"col-resize"),d[0]&4&&Se(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&K(e),o=!1,Be(f)}}}function Hs(r){let e,t,l,p,w,_;return{c(){e=E("button"),t=oe("svg"),l=oe("path"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M15 19l-7-7 7-7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开右侧面板")},m(i,o){V(i,e,o),c(e,t),c(t,l),w||(_=ee(e,"click",r[18]),w=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&p!==(p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",p)},d(i){i&&K(e),w=!1,_()}}}function Is(r){let e,t,l,p,w,_,i,o,f,b,d=r[12].length+"",g,y,k,v,n,u,a=r[14].length+"",h,m,C,x,M,S,L,B;function R(U,q){if(U[13].activeTab==="active"&&U[12].length===0)return Bh;if(U[13].activeTab==="active")return Th;if(U[13].activeTab==="history"&&U[14].length===0)return Dh;if(U[13].activeTab==="history")return Mh}let P=R(r),A=P&&P(r);return{c(){e=E("div"),t=E("div"),l=E("div"),p=E("h3"),p.textContent="上传任务",w=O(),_=E("button"),_.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=O(),o=E("div"),f=E("button"),b=X("进行中 ("),g=X(d),y=X(")"),v=O(),n=E("button"),u=X("历史 ("),h=X(a),m=X(")"),M=O(),A&&A.c(),s(p,"class","font-semibold text-sm"),s(_,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),s(l,"class","flex items-center justify-between mb-3"),s(f,"class",k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(n,"class",C="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(o,"class","flex gap-2"),s(t,"class",x="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(e,"class",S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),Se(e,"height","calc(100vh - 3.5rem)")},m(U,q){V(U,e,q),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(t,i),c(t,o),c(o,f),c(f,b),c(f,g),c(f,y),c(o,v),c(o,n),c(n,u),c(n,h),c(n,m),c(e,M),A&&A.m(e,null),L||(B=[ee(_,"click",r[37]),ee(f,"click",r[38]),ee(n,"click",r[39])],L=!0)},p(U,q){q[0]&4096&&d!==(d=U[12].length+"")&&de(g,d),q[0]&8193&&k!==(k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(U[13].activeTab==="active"?(U[0]==="dark","bg-blue-600 text-white"):U[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(f,"class",k),q[0]&16384&&a!==(a=U[14].length+"")&&de(h,a),q[0]&8193&&C!==(C="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(U[13].activeTab==="history"?(U[0]==="dark","bg-blue-600 text-white"):U[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(n,"class",C),q[0]&1&&x!==(x="p-4 border-b "+(U[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",x),P===(P=R(U))&&A?A.p(U,q):(A&&A.d(1),A=P&&P(U),A&&(A.c(),A.m(e,null))),q[0]&1&&S!==(S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(U[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&s(e,"class",S)},d(U){U&&K(e),A&&A.d(),L=!1,Be(B)}}}function Mh(r){let e,t,l,p,w,_,i,o,f=[],b=new Map,d,g,y=We(r[14]);const k=v=>v[57].id;for(let v=0;v<y.length;v+=1){let n=Ts(r,y,v),u=k(n);b.set(u,f[v]=Ws(u,n))}return{c(){e=E("div"),t=E("div"),l=E("button"),p=X("清空历史记录"),i=O(),o=E("div");for(let v=0;v<f.length;v+=1)f[v].c();s(l,"class",w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),s(t,"class",_="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(o,"class","flex-1 overflow-y-auto p-4 space-y-3"),s(e,"class","flex-1 flex flex-col")},m(v,n){V(v,e,n),c(e,t),c(t,l),c(l,p),c(e,i),c(e,o);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(o,null);d||(g=ee(l,"click",r[41]),d=!0)},p(v,n){n[0]&1&&w!==(w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(v[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&s(l,"class",w),n[0]&1&&_!==(_="p-3 border-b "+(v[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",_),n[0]&16385&&(y=We(v[14]),f=Tt(f,n,k,1,v,y,b,o,It,Ws,null,Ts))},d(v){v&&K(e);for(let n=0;n<f.length;n+=1)f[n].d();d=!1,g()}}}function Dh(r){let e;return{c(){e=E("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function Th(r){let e,t=[],l=new Map,p=We(r[12]);const w=_=>_[57].id;for(let _=0;_<p.length;_+=1){let i=Bs(r,p,_),o=w(i);l.set(o,t[_]=zs(o,i))}return{c(){e=E("div");for(let _=0;_<t.length;_+=1)t[_].c();s(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(_,i){V(_,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(_,i){i[0]&4097&&(p=We(_[12]),t=Tt(t,i,w,1,_,p,l,e,It,zs,null,Bs))},d(_){_&&K(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Bh(r){let e;return{c(){e=E("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,l){V(t,e,l)},p:Ee,d(t){t&&K(e)}}}function Ah(r){let e;return{c(){e=E("span"),e.textContent="已取消",s(e,"class","text-gray-500")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function Rh(r){let e;return{c(){e=E("span"),e.textContent="失败",s(e,"class","text-red-500")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function Oh(r){let e;return{c(){e=E("span"),e.textContent="完成",s(e,"class","text-green-500")},m(t,l){V(t,e,l)},d(t){t&&K(e)}}}function Fs(r){let e,t=r[57].error+"",l,p;return{c(){e=E("div"),l=X(t),s(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),s(e,"title",p=r[57].error)},m(w,_){V(w,e,_),c(e,l)},p(w,_){_[0]&16384&&t!==(t=w[57].error+"")&&de(l,t),_[0]&16384&&p!==(p=w[57].error)&&s(e,"title",p)},d(w){w&&K(e)}}}function Ws(r,e){let t,l,p,w,_=e[57].filename+"",i,o,f,b,d,g,y,k,v=Pt(e[57].totalBytes)+"",n,u,a,h,m,C,x,M;function S(A,U){if(A[57].status==="completed")return Oh;if(A[57].status==="failed")return Rh;if(A[57].status==="cancelled")return Ah}let L=S(e),B=L&&L(e),R=e[57].status==="failed"&&e[57].error&&Fs(e);function P(){return e[42](e[57])}return{key:r,first:null,c(){t=E("div"),l=E("div"),p=E("div"),w=E("div"),i=X(_),f=O(),b=E("div"),B&&B.c(),d=O(),g=E("span"),g.textContent="•",y=O(),k=E("span"),n=X(v),u=O(),R&&R.c(),a=O(),h=E("button"),h.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),s(w,"class","text-sm font-medium truncate"),s(w,"title",o=e[57].filename),s(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),s(p,"class","flex-1 min-w-0"),s(h,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),s(h,"title","删除记录"),s(l,"class","flex items-center justify-between"),s(t,"class",C="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(A,U){V(A,t,U),c(t,l),c(l,p),c(p,w),c(w,i),c(p,f),c(p,b),B&&B.m(b,null),c(b,d),c(b,g),c(b,y),c(b,k),c(k,n),c(p,u),R&&R.m(p,null),c(l,a),c(l,h),c(t,m),x||(M=ee(h,"click",P),x=!0)},p(A,U){e=A,U[0]&16384&&_!==(_=e[57].filename+"")&&de(i,_),U[0]&16384&&o!==(o=e[57].filename)&&s(w,"title",o),L!==(L=S(e))&&(B&&B.d(1),B=L&&L(e),B&&(B.c(),B.m(b,d))),U[0]&16384&&v!==(v=Pt(e[57].totalBytes)+"")&&de(n,v),e[57].status==="failed"&&e[57].error?R?R.p(e,U):(R=Fs(e),R.c(),R.m(p,null)):R&&(R.d(1),R=null),U[0]&1&&C!==(C="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",C)},d(A){A&&K(t),B&&B.d(),R&&R.d(),x=!1,M()}}}function js(r){let e,t=vi(r[57].speed)+"",l;return{c(){e=X("• "),l=X(t)},m(p,w){V(p,e,w),V(p,l,w)},p(p,w){w[0]&4096&&t!==(t=vi(p[57].speed)+"")&&de(l,t)},d(p){p&&(K(e),K(l))}}}function zs(r,e){let t,l,p,w,_=e[57].filename+"",i,o,f,b,d=Pt(e[57].bytesSent)+"",g,y,k=Pt(e[57].totalBytes)+"",v,n,u,a,h,m=Math.round(wr(e[57]))+"",C,x,M,S,L,B,R,P,A,U,q,J,se,Y=e[57].speed&&js(e);function D(){return e[40](e[57])}return{key:r,first:null,c(){t=E("div"),l=E("div"),p=E("div"),w=E("div"),i=X(_),f=O(),b=E("div"),g=X(d),y=X(" / "),v=X(k),n=O(),Y&&Y.c(),u=O(),a=E("div"),h=E("span"),C=X(m),x=X("%"),M=O(),S=E("button"),S.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',L=O(),B=E("div"),R=E("div"),U=O(),s(w,"class","text-sm font-medium truncate"),s(w,"title",o=e[57].filename),s(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),s(p,"class","flex-1 min-w-0"),s(h,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),s(S,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),s(S,"title","取消上传"),s(a,"class","flex items-center gap-2 ml-3"),s(l,"class","flex items-center justify-between mb-2"),s(R,"class","h-full bg-blue-500 transition-all duration-300"),s(R,"style",P=`width: ${Math.min(100,Math.max(0,wr(e[57])))}%`),s(B,"class",A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),s(t,"class",q="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(H,F){V(H,t,F),c(t,l),c(l,p),c(p,w),c(w,i),c(p,f),c(p,b),c(b,g),c(b,y),c(b,v),c(b,n),Y&&Y.m(b,null),c(l,u),c(l,a),c(a,h),c(h,C),c(h,x),c(a,M),c(a,S),c(t,L),c(t,B),c(B,R),c(t,U),J||(se=ee(S,"click",D),J=!0)},p(H,F){e=H,F[0]&4096&&_!==(_=e[57].filename+"")&&de(i,_),F[0]&4096&&o!==(o=e[57].filename)&&s(w,"title",o),F[0]&4096&&d!==(d=Pt(e[57].bytesSent)+"")&&de(g,d),F[0]&4096&&k!==(k=Pt(e[57].totalBytes)+"")&&de(v,k),e[57].speed?Y?Y.p(e,F):(Y=js(e),Y.c(),Y.m(b,null)):Y&&(Y.d(1),Y=null),F[0]&4096&&m!==(m=Math.round(wr(e[57]))+"")&&de(C,m),F[0]&4096&&P!==(P=`width: ${Math.min(100,Math.max(0,wr(e[57])))}%`)&&s(R,"style",P),F[0]&1&&A!==(A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&s(B,"class",A),F[0]&1&&q!==(q="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",q)},d(H){H&&K(t),Y&&Y.d(),J=!1,se()}}}function Ph(r){let e,t,l,p,w,_,i,o,f,b,d,g,y,k,v,n,u,a,h,m,C,x,M,S,L,B,R,P,A,U,q,J,se,Y,D,H,F,W,G,j,Z,re,I,T,$,z,N,Q,te,ae,ce,le,he,fe,ye,be,ve,ue,ie,_e,me,Le,$e,qe,je,st,Ue,xe,pe,Oe,nt,Pe=r[12].length>0&&As(r);function ft(ge,Me){return ge[0]==="dark"?Lh:Eh}let ht=ft(r),et=ht(r),Xe=r[4]&&Rs(r);F=new Xn({props:{onConnect:r[22],onAddClick:r[29],onDelete:r[30],onEdit:r[24]}});let rt=!r[4]&&Os(r),vt={};re=new xl({props:vt}),r[31](re);let Ie=!r[5]&&Ps(r);Q=new cc({}),fe=new bc({});let Fe=r[5]&&Hs(r);function it(ge){r[32](ge)}function Ye(ge){r[33](ge)}let Ze={onAdd:r[23],onUpdate:r[25]};r[2]!==void 0&&(Ze.isOpen=r[2]),r[6]!==void 0&&(Ze.editingAsset=r[6]),ue=new yh({props:Ze}),at.push(()=>kt(ue,"isOpen",it)),at.push(()=>kt(ue,"editingAsset",Ye));function tt(ge){r[34](ge)}let ze={themeStore:or};r[1]!==void 0&&(ze.isOpen=r[1]),Le=new ah({props:ze}),at.push(()=>kt(Le,"isOpen",tt));function Ce(ge){r[36](ge)}let He={onClose:r[35],themeStore:or};r[3]!==void 0&&(He.isOpen=r[3]),je=new xh({props:He}),at.push(()=>kt(je,"isOpen",Ce));let ot=r[13].isPanelOpen&&Is(r);return{c(){e=E("div"),t=E("header"),l=E("div"),p=E("div"),p.textContent="哈",w=O(),_=E("div"),i=E("div"),o=X("啊哈 SSH 连接工具"),b=O(),d=E("div"),g=X("AHa SSH Manager"),k=O(),v=E("div"),n=E("div"),u=E("button"),a=oe("svg"),h=oe("path"),C=O(),Pe&&Pe.c(),x=O(),M=E("button"),et.c(),B=O(),R=E("button"),P=oe("svg"),A=oe("path"),U=O(),q=E("span"),q.textContent="开发工具",se=O(),Y=E("div"),Xe&&Xe.c(),D=O(),H=E("div"),Ve(F.$$.fragment),G=O(),rt&&rt.c(),j=O(),Z=E("div"),Ve(re.$$.fragment),T=O(),Ie&&Ie.c(),$=O(),z=E("div"),N=E("div"),Ve(Q.$$.fragment),te=O(),ae=E("div"),ce=E("div"),le=O(),he=E("div"),Ve(fe.$$.fragment),be=O(),Fe&&Fe.c(),ve=O(),Ve(ue.$$.fragment),me=O(),Ve(Le.$$.fragment),qe=O(),Ve(je.$$.fragment),Ue=O(),ot&&ot.c(),s(p,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),s(i,"class",f="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),s(d,"class",y="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),s(l,"class","flex items-center gap-3"),s(h,"stroke-linecap","round"),s(h,"stroke-linejoin","round"),s(h,"stroke-width","2"),s(h,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(a,"class","w-5 h-5"),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(u,"class",m="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(u,"title","上传任务"),s(n,"class","relative"),M.disabled=r[2],s(M,"class",S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(M,"title",L=r[0]==="dark"?"切换到浅色模式":"切换到深色模式"),s(A,"stroke-linecap","round"),s(A,"stroke-linejoin","round"),s(A,"stroke-width","2"),s(A,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),s(P,"class","w-4 h-4"),s(P,"fill","none"),s(P,"stroke","currentColor"),s(P,"viewBox","0 0 24 24"),s(q,"class","text-sm"),R.disabled=r[2],s(R,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(v,"class","ml-auto flex items-center gap-3"),s(t,"class",J="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),Se(t,"pointer-events",r[2]?"none":"auto"),s(H,"class",W="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),Se(H,"width",(r[4]?"0":r[10])+"px"),Se(H,"min-width",(r[4]?"0":r[10])+"px"),yr(H,"collapsed",r[4]),s(Z,"class",I="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),s(N,"class","overflow-hidden"),Se(N,"height",r[8]+"%"),Se(N,"min-height","0"),s(ce,"class","w-full h-full rounded svelte-m8xeqv"),s(ae,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),s(ae,"role","separator"),s(ae,"aria-hidden","true"),Se(ae,"cursor",r[2]?"default":"row-resize"),Se(ae,"width","100%"),Se(ae,"padding","2px 0"),Se(ae,"pointer-events",r[2]?"none":"auto"),s(he,"class","overflow-hidden"),Se(he,"height",100-r[8]+"%"),Se(he,"min-height","0"),s(z,"data-right-panel","true"),s(z,"class",ye="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),Se(z,"width",(r[5]?"0":r[9])+"px"),Se(z,"min-width",r[5]?"0":"300px"),Se(z,"max-width","600px"),yr(z,"collapsed",r[5]),s(Y,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),s(e,"class",xe="h-screen w-full flex flex-col "+r[11]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(ge,Me){V(ge,e,Me),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(_,i),c(i,o),c(_,b),c(_,d),c(d,g),c(t,k),c(t,v),c(v,n),c(n,u),c(u,a),c(a,h),c(n,C),Pe&&Pe.m(n,null),c(v,x),c(v,M),et.m(M,null),c(v,B),c(v,R),c(R,P),c(P,A),c(R,U),c(R,q),c(e,se),c(e,Y),Xe&&Xe.m(Y,null),c(Y,D),c(Y,H),Ne(F,H,null),c(Y,G),rt&&rt.m(Y,null),c(Y,j),c(Y,Z),Ne(re,Z,null),c(Y,T),Ie&&Ie.m(Y,null),c(Y,$),c(Y,z),c(z,N),Ne(Q,N,null),c(z,te),c(z,ae),c(ae,ce),c(z,le),c(z,he),Ne(fe,he,null),c(Y,be),Fe&&Fe.m(Y,null),c(e,ve),Ne(ue,e,null),c(e,me),Ne(Le,e,null),c(e,qe),Ne(je,e,null),c(e,Ue),ot&&ot.m(e,null),pe=!0,Oe||(nt=[ee(u,"click",r[28]),ee(M,"click",r[15]),ee(R,"click",r[16]),ee(ae,"mousedown",r[21])],Oe=!0)},p(ge,Me){(!pe||Me[0]&1&&f!==(f="font-semibold text-sm "+(ge[0]==="dark"?"text-white":"text-gray-900")))&&s(i,"class",f),(!pe||Me[0]&1&&y!==(y="text-xs "+(ge[0]==="dark"?"text-gray-400":"text-gray-500")))&&s(d,"class",y),(!pe||Me[0]&1&&m!==(m="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(ge[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(u,"class",m),ge[12].length>0?Pe?Pe.p(ge,Me):(Pe=As(ge),Pe.c(),Pe.m(n,null)):Pe&&(Pe.d(1),Pe=null),ht!==(ht=ft(ge))&&(et.d(1),et=ht(ge),et&&(et.c(),et.m(M,null))),(!pe||Me[0]&4)&&(M.disabled=ge[2]),(!pe||Me[0]&1&&S!==(S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(ge[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(M,"class",S),(!pe||Me[0]&1&&L!==(L=ge[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&s(M,"title",L),(!pe||Me[0]&4)&&(R.disabled=ge[2]),(!pe||Me[0]&1&&J!==(J="h-14 flex-shrink-0 "+(ge[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&s(t,"class",J),(!pe||Me[0]&4)&&Se(t,"pointer-events",ge[2]?"none":"auto"),ge[4]?Xe?Xe.p(ge,Me):(Xe=Rs(ge),Xe.c(),Xe.m(Y,D)):Xe&&(Xe.d(1),Xe=null);const Ft={};Me[0]&68&&(Ft.onAddClick=ge[29]),F.$set(Ft),(!pe||Me[0]&1&&W!==(W="flex-shrink-0 transition-all duration-200 "+(ge[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&s(H,"class",W),(!pe||Me[0]&1040)&&Se(H,"width",(ge[4]?"0":ge[10])+"px"),(!pe||Me[0]&1040)&&Se(H,"min-width",(ge[4]?"0":ge[10])+"px"),(!pe||Me[0]&17)&&yr(H,"collapsed",ge[4]),ge[4]?rt&&(rt.d(1),rt=null):rt?rt.p(ge,Me):(rt=Os(ge),rt.c(),rt.m(Y,j));const qt={};re.$set(qt),(!pe||Me[0]&1&&I!==(I="flex-1 min-w-0 min-h-0 flex flex-col "+(ge[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&s(Z,"class",I),ge[5]?Ie&&(Ie.d(1),Ie=null):Ie?Ie.p(ge,Me):(Ie=Ps(ge),Ie.c(),Ie.m(Y,$)),(!pe||Me[0]&256)&&Se(N,"height",ge[8]+"%"),(!pe||Me[0]&4)&&Se(ae,"cursor",ge[2]?"default":"row-resize"),(!pe||Me[0]&4)&&Se(ae,"pointer-events",ge[2]?"none":"auto"),(!pe||Me[0]&256)&&Se(he,"height",100-ge[8]+"%"),(!pe||Me[0]&1&&ye!==(ye="flex-shrink-0 flex flex-col overflow-hidden "+(ge[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&s(z,"class",ye),(!pe||Me[0]&544)&&Se(z,"width",(ge[5]?"0":ge[9])+"px"),(!pe||Me[0]&32)&&Se(z,"min-width",ge[5]?"0":"300px"),(!pe||Me[0]&33)&&yr(z,"collapsed",ge[5]),ge[5]?Fe?Fe.p(ge,Me):(Fe=Hs(ge),Fe.c(),Fe.m(Y,null)):Fe&&(Fe.d(1),Fe=null);const bt={};!ie&&Me[0]&4&&(ie=!0,bt.isOpen=ge[2],wt(()=>ie=!1)),!_e&&Me[0]&64&&(_e=!0,bt.editingAsset=ge[6],wt(()=>_e=!1)),ue.$set(bt);const At={};!$e&&Me[0]&2&&($e=!0,At.isOpen=ge[1],wt(()=>$e=!1)),Le.$set(At);const Wt={};Me[0]&8&&(Wt.onClose=ge[35]),!st&&Me[0]&8&&(st=!0,Wt.isOpen=ge[3],wt(()=>st=!1)),je.$set(Wt),ge[13].isPanelOpen?ot?ot.p(ge,Me):(ot=Is(ge),ot.c(),ot.m(e,null)):ot&&(ot.d(1),ot=null),(!pe||Me[0]&2049&&xe!==(xe="h-screen w-full flex flex-col "+ge[11]+" "+(ge[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&s(e,"class",xe)},i(ge){pe||(Te(F.$$.fragment,ge),Te(re.$$.fragment,ge),Te(Q.$$.fragment,ge),Te(fe.$$.fragment,ge),Te(ue.$$.fragment,ge),Te(Le.$$.fragment,ge),Te(je.$$.fragment,ge),pe=!0)},o(ge){Ae(F.$$.fragment,ge),Ae(re.$$.fragment,ge),Ae(Q.$$.fragment,ge),Ae(fe.$$.fragment,ge),Ae(ue.$$.fragment,ge),Ae(Le.$$.fragment,ge),Ae(je.$$.fragment,ge),pe=!1},d(ge){ge&&K(e),Pe&&Pe.d(),et.d(),Xe&&Xe.d(),Ke(F),rt&&rt.d(),r[31](null),Ke(re),Ie&&Ie.d(),Ke(Q),Ke(fe),Fe&&Fe.d(),Ke(ue),Ke(Le),Ke(je),ot&&ot.d(),Oe=!1,Be(nt)}}}function Or(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function Hh(r,e,t){let l,p,w,_,i,o,f,b,d,g;gt(r,or,ie=>t(0,i=ie)),gt(r,Et,ie=>t(26,o=ie)),gt(r,Dt,ie=>t(27,f=ie)),gt(r,Pa,ie=>t(12,b=ie)),gt(r,yt,ie=>t(13,d=ie)),gt(r,Ha,ie=>t(14,g=ie));let y=!1,k=!1,v=!1,n=!1,u=!1,a=null,h,m=!1,C=!1,x=!1;function M(){Rr(i==="light"?"dark":"light")}function S(){k||t(1,y=!y)}function L(){k||t(4,n=!n)}function B(){k||t(5,u=!u)}function R(ie){ie.preventDefault(),!(n||k)&&(m=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",A))}function P(ie){if(!m)return;const _e=Math.max(200,Math.min(500,ie.clientX));Un(_e)}function A(){m=!1,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",A)}function U(ie){ie.preventDefault(),!k&&(C=!0,document.addEventListener("mousemove",q),document.addEventListener("mouseup",J))}function q(ie){if(!C)return;const _e=window.innerWidth,me=Math.max(300,Math.min(600,_e-ie.clientX));Nn(me)}function J(){C=!1,document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",J)}function se(ie){if(ie.preventDefault(),k)return;x=!0;const _e=document.querySelector("[data-right-panel]");if(_e){const me=_e.getBoundingClientRect();Y=ie.clientY,D=_,H=me.height}document.addEventListener("mousemove",F),document.addEventListener("mouseup",W)}let Y=0,D=50,H=0;function F(ie){if(!x)return;const me=(ie.clientY-Y)/H*100,Le=Math.max(20,Math.min(80,D+me));Kn(Le)}function W(){x=!1,document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",W)}function G(ie){h&&typeof h.handleConnect=="function"?h.handleConnect(ie):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function j(ie){var _e;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(ie);const me={id:ie.id,name:ie.name,host:ie.host,port:ie.port,username:ie.user,group:((_e=ie.tags)==null?void 0:_e[0])||"默认分组",status:"online",type:ie.type||"ssh",auth_type:ie.auth_type,key_path:ie.key_path,tags:ie.tags||[]};Ot.update(Le=>[...Le,me])}catch(me){throw console.error("Failed to add asset:",me),me}}function Z(ie){t(6,a=ie),t(2,k=!0)}async function re(ie){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Ot.update(_e=>_e.map(me=>{var Le;return me.id===ie.id?{...me,id:ie.id,name:ie.name,host:ie.host,port:ie.port,username:ie.user,group:((Le=ie.tags)==null?void 0:Le[0])||"默认分组",type:ie.type||"ssh",auth_type:ie.auth_type,key_path:ie.key_path,tags:ie.tags||[]}:me}))}catch(_e){throw console.error("Failed to update asset:",_e),_e}}async function I(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const ie=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",ie);const _e=ie.map(me=>{var Le;return{id:me.id,name:me.name,host:me.host,port:me.port,username:me.user,group:((Le=me.tags)==null?void 0:Le[0])||"默认分组",status:"online",type:"ssh",auth_type:me.auth_type,key_path:me.key_path,tags:me.tags||[]}});Ot.set(_e)}catch(ie){console.error("Failed to load connections:",ie)}}lr(async()=>{const ie=localStorage.getItem("ssh-tools-theme");ie?Rr(ie):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&Rr("dark");let _e=null;try{const me=await dr(()=>Promise.resolve().then(()=>fn),void 0);window.wailsBindings=me,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(me.default||me).join(", ")})),await I(),_e=(await dr(()=>Promise.resolve().then(()=>rn),void 0)).EventsOn("app:show-about",()=>{t(3,v=!0)})}catch(me){console.warn("Wails bindings not available yet:",me.message)}return Or(),window.addEventListener("resize",Or),()=>{window.removeEventListener("resize",Or),_e&&_e()}});const T=()=>yt.togglePanel(),$=()=>{t(6,a=null),t(2,k=!0)},z=async ie=>{if(!window.wailsBindings){Ot.update(_e=>_e.filter(me=>me.id!==ie.id));return}if(confirm(`确定要删除连接 "${ie.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(ie.id),Ot.update(_e=>_e.filter(me=>me.id!==ie.id))}catch(_e){console.error("Failed to delete asset:",_e),alert("删除连接失败: "+_e)}};function N(ie){at[ie?"unshift":"push"](()=>{h=ie,t(7,h)})}function Q(ie){k=ie,t(2,k)}function te(ie){a=ie,t(6,a)}function ae(ie){y=ie,t(1,y)}const ce=()=>t(3,v=!1);function le(ie){v=ie,t(3,v)}const he=()=>yt.setPanelOpen(!1),fe=()=>yt.setActiveTab("active"),ye=()=>yt.setActiveTab("history"),be=async ie=>{await Ur(ie.id),yt.cancelTransfer(ie.id)},ve=()=>yt.clearCompleted(),ue=ie=>yt.removeTransfer(ie.id);return r.$$.update=()=>{r.$$.dirty[0]&134217728&&f&&Array.from(f.values()),r.$$.dirty[0]&1&&t(11,l=i==="dark"?"dark":""),r.$$.dirty[0]&67108864&&t(10,p=o.sidebarWidth),r.$$.dirty[0]&67108864&&t(9,w=o.rightPanelWidth),r.$$.dirty[0]&67108864&&t(8,_=o.fileManagerHeight)},[i,y,k,v,n,u,a,h,_,w,p,l,b,d,g,M,S,L,B,R,U,se,G,j,Z,re,o,f,T,$,z,N,Q,te,ae,ce,le,he,fe,ye,be,ve,ue]}class Ih extends ut{constructor(e){super(),dt(this,e,Hh,Ph,ct,{},null,[-1,-1])}}new Ih({target:document.getElementById("app")});
