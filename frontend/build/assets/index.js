var Ln=Object.defineProperty;var Mn=(r,e,t)=>e in r?Ln(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Rr=(r,e,t)=>Mn(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))l(p);new MutationObserver(p=>{for(const w of p)if(w.type==="childList")for(const _ of w.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function t(p){const w={};return p.integrity&&(w.integrity=p.integrity),p.referrerPolicy&&(w.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?w.credentials="include":p.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function l(p){if(p.ep)return;p.ep=!0;const w=t(p);fetch(p.href,w)}})();const Dn="modulepreload",Tn=function(r){return"/"+r},Yr={},fr=function(e,t,l){let p=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),i=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));p=Promise.allSettled(t.map(n=>{if(n=Tn(n),n in Yr)return;Yr[n]=!0;const f=n.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${m}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":Dn,f||(d.as="script"),d.crossOrigin="",d.href=n,i&&d.setAttribute("nonce",i),document.head.appendChild(d),f)return new Promise((g,y)=>{d.addEventListener("load",g),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})}))}function w(_){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=_,window.dispatchEvent(i),!i.defaultPrevented)throw _}return p.then(_=>{for(const i of _||[])i.status==="rejected"&&w(i.reason);return e().catch(w)})};function Pe(){}function Bn(r,e){for(const t in e)r[t]=e[t];return r}function en(r){return r()}function Zr(){return Object.create(null)}function Fe(r){r.forEach(en)}function It(r){return typeof r=="function"}function pt(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function An(r){return Object.keys(r).length===0}function zr(r,...e){if(r==null){for(const l of e)l(void 0);return Pe}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Rn(r){let e;return zr(r,t=>e=t)(),e}function vt(r,e,t){r.$$.on_destroy.push(zr(e,t))}function On(r,e,t,l){if(r){const p=tn(r,e,t,l);return r[0](p)}}function tn(r,e,t,l){return r[1]&&l?Bn(t.ctx.slice(),r[1](l(e))):t.ctx}function Pn(r,e,t,l){return r[2],e.dirty}function Hn(r,e,t,l,p,w){if(p){const _=tn(e,t,l,w);r.p(_,p)}}function In(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let l=0;l<t;l++)e[l]=-1;return e}return-1}function Qr(r){return r??""}function rn(r){return r&&It(r.destroy)?r.destroy:Pe}const sn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(r,e){r.appendChild(e)}function V(r,e,t){r.insertBefore(e,t||null)}function N(r){r.parentNode&&r.parentNode.removeChild(r)}function Nt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function L(r){return document.createElement(r)}function oe(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Z(r){return document.createTextNode(r)}function O(){return Z(" ")}function wt(){return Z("")}function Q(r,e,t,l){return r.addEventListener(e,t,l),()=>r.removeEventListener(e,t,l)}function Fn(r){return function(e){return e.preventDefault(),r.call(this,e)}}function $r(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function s(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Wn(r){let e;return{p(...t){e=t,e.forEach(l=>r.push(l))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function Ur(r){return r===""?null:+r}function jn(r){return Array.from(r.childNodes)}function ue(r,e){e=""+e,r.data!==e&&(r.data=e)}function Le(r,e){r.value=e??""}function Te(r,e,t,l){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function Mr(r,e,t){for(let l=0;l<r.options.length;l+=1){const p=r.options[l];if(p.__value===e){p.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function nn(r){const e=r.querySelector(":checked");return e&&e.__value}function Sr(r,e,t){r.classList.toggle(e,!!t)}function Ct(r,e){return new r(e)}let pr;function dr(r){pr=r}function on(){if(!pr)throw new Error("Function called outside component initialization");return pr}function ar(r){on().$$.on_mount.push(r)}function Dr(r){on().$$.on_destroy.push(r)}const sr=[],tt=[];let nr=[];const Fr=[],ln=Promise.resolve();let Wr=!1;function an(){Wr||(Wr=!0,ln.then(cn))}function Er(){return an(),ln}function _r(r){nr.push(r)}function dt(r){Fr.push(r)}const Or=new Set;let rr=0;function cn(){if(rr!==0)return;const r=pr;do{try{for(;rr<sr.length;){const e=sr[rr];rr++,dr(e),zn(e.$$)}}catch(e){throw sr.length=0,rr=0,e}for(dr(null),sr.length=0,rr=0;tt.length;)tt.pop()();for(let e=0;e<nr.length;e+=1){const t=nr[e];Or.has(t)||(Or.add(t),t())}nr.length=0}while(sr.length);for(;Fr.length;)Fr.pop()();Wr=!1,Or.clear(),dr(r)}function zn(r){if(r.fragment!==null){r.update(),Fe(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(_r)}}function Un(r){const e=[],t=[];nr.forEach(l=>r.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),nr=e}const Lr=new Set;let Vt;function xt(){Vt={r:0,c:[],p:Vt}}function Et(){Vt.r||Fe(Vt.c),Vt=Vt.p}function Oe(r,e){r&&r.i&&(Lr.delete(r),r.i(e))}function Ie(r,e,t,l){if(r&&r.o){if(Lr.has(r))return;Lr.add(r),Vt.c.push(()=>{Lr.delete(r),l&&(t&&r.d(1),l())}),r.o(e)}else l&&l()}function Ke(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Mt(r,e){r.d(1),e.delete(r.key)}function Nn(r,e){Ie(r,1,1,()=>{e.delete(r.key)})}function Lt(r,e,t,l,p,w,_,i,n,f,m,d){let g=r.length,y=w.length,k=g;const v={};for(;k--;)v[r[k].key]=k;const o=[],h=new Map,a=new Map,u=[];for(k=y;k--;){const x=d(p,w,k),S=t(x);let M=_.get(S);M?u.push(()=>M.p(x,e)):(M=f(S,x),M.c()),h.set(S,o[k]=M),S in v&&a.set(S,Math.abs(k-v[S]))}const b=new Set,E=new Set;function C(x){Oe(x,1),x.m(i,m),_.set(x.key,x),m=x.first,y--}for(;g&&y;){const x=o[y-1],S=r[g-1],M=x.key,T=S.key;x===S?(m=x.first,g--,y--):h.has(T)?!_.has(M)||b.has(M)?C(x):E.has(T)?g--:a.get(M)>a.get(T)?(E.add(M),C(x)):(b.add(T),g--):(n(S,_),g--)}for(;g--;){const x=r[g];h.has(x.key)||n(x,_)}for(;y;)C(o[y-1]);return Fe(u),o}function ut(r,e,t){const l=r.$$.props[e];l!==void 0&&(r.$$.bound[l]=t,t(r.$$.ctx[l]))}function Ze(r){r&&r.c()}function Xe(r,e,t){const{fragment:l,after_update:p}=r.$$;l&&l.m(e,t),_r(()=>{const w=r.$$.on_mount.map(en).filter(It);r.$$.on_destroy?r.$$.on_destroy.push(...w):Fe(w),r.$$.on_mount=[]}),p.forEach(_r)}function Ye(r,e){const t=r.$$;t.fragment!==null&&(Un(t.after_update),Fe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Vn(r,e){r.$$.dirty[0]===-1&&(sr.push(r),an(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function _t(r,e,t,l,p,w,_=null,i=[-1]){const n=pr;dr(r);const f=r.$$={fragment:null,ctx:[],props:w,update:Pe,not_equal:p,bound:Zr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(n?n.$$.context:[])),callbacks:Zr(),dirty:i,skip_bound:!1,root:e.target||n.$$.root};_&&_(f.root);let m=!1;if(f.ctx=t?t(r,e.props||{},(d,g,...y)=>{const k=y.length?y[0]:g;return f.ctx&&p(f.ctx[d],f.ctx[d]=k)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](k),m&&Vn(r,d)),g}):[],f.update(),m=!0,Fe(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const d=jn(e.target);f.fragment&&f.fragment.l(d),d.forEach(N)}else f.fragment&&f.fragment.c();e.intro&&Oe(r.$$.fragment),Xe(r,e.target,e.anchor),cn()}dr(n)}class gt{constructor(){Rr(this,"$$");Rr(this,"$$set")}$destroy(){Ye(this,1),this.$destroy=Pe}$on(e,t){if(!It(t))return Pe;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const p=l.indexOf(t);p!==-1&&l.splice(p,1)}}$set(e){this.$$set&&!An(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kn);const ir=[];function qn(r,e){return{subscribe:Kt(r,e).subscribe}}function Kt(r,e=Pe){let t;const l=new Set;function p(i){if(pt(r,i)&&(r=i,t)){const n=!ir.length;for(const f of l)f[1](),ir.push(f,r);if(n){for(let f=0;f<ir.length;f+=2)ir[f][0](ir[f+1]);ir.length=0}}}function w(i){p(i(r))}function _(i,n=Pe){const f=[i,n];return l.add(f),l.size===1&&(t=e(p,w)||Pe),i(r),()=>{l.delete(f),l.size===0&&t&&(t(),t=null)}}return{set:p,update:w,subscribe:_}}function Rt(r,e,t){const l=!Array.isArray(r),p=l?[r]:r;if(!p.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const w=e.length<2;return qn(t,(_,i)=>{let n=!1;const f=[];let m=0,d=Pe;const g=()=>{if(m)return;d();const k=e(l?f[0]:f,_,i);w?_(k):d=It(k)?k:Pe},y=p.map((k,v)=>zr(k,o=>{f[v]=o,m&=~(1<<v),n&&g()},()=>{m|=1<<v}));return n=!0,g(),function(){Fe(y),d(),n=!1}})}const Ut=Kt([]),Gn=Rt(Ut,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{})),At=Kt(new Map),zt=Kt(null),hn="ssh-tools-theme";function Jn(){if(typeof window>"u")return null;try{return localStorage.getItem(hn)}catch{return null}}function Xn(r){if(!(typeof window>"u"))try{localStorage.setItem(hn,r)}catch{}}const Yn=Jn(),Zn=Yn||"light",or=Kt(Zn);function Pr(r){or.set(r),Xn(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Qn(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const $n={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},eo=Qn(),Dt=Kt({...$n,...eo});Dt.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});Rt(Dt,r=>r.isDevToolsOpen);Rt(Dt,r=>r.isFileManagerOpen);Rt(Dt,r=>r.isMonitorOpen);Rt(Dt,r=>r.sidebarWidth);Rt(Dt,r=>r.rightPanelWidth);Rt(Dt,r=>r.fileManagerHeight);function to(r){Dt.update(e=>({...e,sidebarWidth:r}))}function ro(r){Dt.update(e=>({...e,rightPanelWidth:r}))}function io(r){Dt.update(e=>({...e,fileManagerHeight:r}))}function ei(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k;const v=r[6].default,o=On(v,r,r[5],null);return{c(){e=L("div"),t=L("div"),l=O(),p=L("div"),w=L("div"),_=L("h2"),i=Z(r[2]),n=O(),f=L("button"),f.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),d=L("div"),o&&o.c(),s(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),s(_,"class","text-base font-semibold text-gray-900 dark:text-white"),s(f,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(w,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex-1 overflow-y-auto p-6"),s(p,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center"),s(e,"role","dialog"),s(e,"aria-modal","true")},m(h,a){V(h,e,a),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(w,n),c(w,f),c(p,m),c(p,d),o&&o.m(d,null),g=!0,y||(k=[Q(f,"click",function(){It(r[1])&&r[1].apply(this,arguments)}),Q(e,"click",r[3])],y=!0)},p(h,a){r=h,(!g||a&4)&&ue(i,r[2]),o&&o.p&&(!g||a&32)&&Hn(o,v,r,r[5],g?Pn(v,r[5],a,null):In(r[5]),null)},i(h){g||(Oe(o,h),g=!0)},o(h){Ie(o,h),g=!1},d(h){h&&N(e),o&&o.d(h),y=!1,Fe(k)}}}function so(r){let e,t,l=r[0]&&ei(r);return{c(){l&&l.c(),e=wt()},m(p,w){l&&l.m(p,w),V(p,e,w),t=!0},p(p,[w]){p[0]?l?(l.p(p,w),w&1&&Oe(l,1)):(l=ei(p),l.c(),Oe(l,1),l.m(e.parentNode,e)):l&&(xt(),Ie(l,1,1,()=>{l=null}),Et())},i(p){t||(Oe(l),t=!0)},o(p){Ie(l),t=!1},d(p){p&&N(e),l&&l.d(p)}}}function no(r,e,t){let{$$slots:l={},$$scope:p}=e,{isOpen:w=!1}=e,{onClose:_=()=>{}}=e,{title:i=""}=e,{size:n="md"}=e;function f(d){d.target===d.currentTarget&&_()}function m(d){d.key==="Escape"&&w&&_()}return r.$$set=d=>{"isOpen"in d&&t(0,w=d.isOpen),"onClose"in d&&t(1,_=d.onClose),"title"in d&&t(2,i=d.title),"size"in d&&t(4,n=d.size),"$$scope"in d&&t(5,p=d.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&(w?document.addEventListener("keydown",m):document.removeEventListener("keydown",m))},[w,_,i,f,n,p,l]}class mr extends gt{constructor(e){super(),_t(this,e,no,so,pt,{isOpen:0,onClose:1,title:2,size:4})}}function oo(r){let e,t,l,p,w,_,i,n,f,m,d,g,y;return{c(){e=L("div"),t=L("p"),l=Z(r[2]),p=O(),w=L("div"),_=L("button"),i=Z(r[4]),n=O(),f=L("button"),m=Z(r[3]),s(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),s(_,"type","button"),s(_,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(f,"type","button"),s(f,"class",d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),s(w,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(k,v){V(k,e,v),c(e,t),c(t,l),c(e,p),c(e,w),c(w,_),c(_,i),c(w,n),c(w,f),c(f,m),g||(y=[Q(_,"click",function(){It(r[6])&&r[6].apply(this,arguments)}),Q(f,"click",function(){It(r[5])&&r[5].apply(this,arguments)})],g=!0)},p(k,v){r=k,v&4&&ue(l,r[2]),v&16&&ue(i,r[4]),v&8&&ue(m,r[3]),v&128&&d!==(d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&s(f,"class",d)},d(k){k&&N(e),g=!1,Fe(y)}}}function lo(r){let e,t,l;function p(_){r[8](_)}let w={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[oo]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new mr({props:w}),tt.push(()=>ut(e,"isOpen",p)),{c(){Ze(e.$$.fragment)},m(_,i){Xe(e,_,i),l=!0},p(_,[i]){const n={};i&64&&(n.onClose=_[6]),i&2&&(n.title=_[1]),i&764&&(n.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,n.isOpen=_[0],dt(()=>t=!1)),e.$set(n)},i(_){l||(Oe(e.$$.fragment,_),l=!0)},o(_){Ie(e.$$.fragment,_),l=!1},d(_){Ye(e,_)}}}function ao(r,e,t){let{isOpen:l=!1}=e,{title:p=""}=e,{message:w=""}=e,{confirmText:_="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:n=()=>{}}=e,{onCancel:f=()=>{}}=e,{type:m="default"}=e;function d(g){l=g,t(0,l)}return r.$$set=g=>{"isOpen"in g&&t(0,l=g.isOpen),"title"in g&&t(1,p=g.title),"message"in g&&t(2,w=g.message),"confirmText"in g&&t(3,_=g.confirmText),"cancelText"in g&&t(4,i=g.cancelText),"onConfirm"in g&&t(5,n=g.onConfirm),"onCancel"in g&&t(6,f=g.onCancel),"type"in g&&t(7,m=g.type)},[l,p,w,_,i,n,f,m,d]}class lr extends gt{constructor(e){super(),_t(this,e,ao,lo,pt,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function ti(r){let e,t;return{c(){e=L("p"),t=Z(r[2]),s(e,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed")},m(l,p){V(l,e,p),c(e,t)},p(l,p){p&4&&ue(t,l[2])},d(l){l&&N(e)}}}function co(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder",r[3]),s(e,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),r[18](e),Le(e,r[10]),t||(l=[Q(e,"input",r[19]),Q(e,"keydown",r[12])],t=!0)},p(p,w){w&8&&s(e,"placeholder",p[3]),w&1024&&e.value!==p[10]&&Le(e,p[10])},d(p){p&&N(e),r[18](null),t=!1,Fe(l)}}}function ho(r){let e,t,l;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder",r[3]),s(e,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),r[16](e),Le(e,r[10]),t||(l=[Q(e,"input",r[17]),Q(e,"keydown",r[12])],t=!0)},p(p,w){w&8&&s(e,"placeholder",p[3]),w&1024&&e.value!==p[10]&&Le(e,p[10])},d(p){p&&N(e),r[16](null),t=!1,Fe(l)}}}function uo(r){let e,t,l,p,w,_,i,n,f,m,d,g,y=r[2]&&ti(r);function k(h,a){return h[4]==="password"?ho:co}let v=k(r),o=v(r);return{c(){e=L("div"),y&&y.c(),t=O(),o.c(),l=O(),p=L("div"),w=L("button"),_=Z(r[7]),i=O(),n=L("button"),f=Z(r[6]),s(w,"type","button"),s(w,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(n,"type","button"),n.disabled=m=!r[5]&&!r[10].trim(),s(n,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(p,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(h,a){V(h,e,a),y&&y.m(e,null),c(e,t),o.m(e,null),c(e,l),c(e,p),c(p,w),c(w,_),c(p,i),c(p,n),c(n,f),d||(g=[Q(w,"click",function(){It(r[8])&&r[8].apply(this,arguments)}),Q(n,"click",r[11])],d=!0)},p(h,a){r=h,r[2]?y?y.p(r,a):(y=ti(r),y.c(),y.m(e,t)):y&&(y.d(1),y=null),v===(v=k(r))&&o?o.p(r,a):(o.d(1),o=v(r),o&&(o.c(),o.m(e,l))),a&128&&ue(_,r[7]),a&64&&ue(f,r[6]),a&1056&&m!==(m=!r[5]&&!r[10].trim())&&(n.disabled=m)},d(h){h&&N(e),y&&y.d(),o.d(),d=!1,Fe(g)}}}function fo(r){let e,t,l;function p(_){r[20](_)}let w={onClose:r[8],title:r[1],size:"sm",$$slots:{default:[uo]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new mr({props:w}),tt.push(()=>ut(e,"isOpen",p)),{c(){Ze(e.$$.fragment)},m(_,i){Xe(e,_,i),l=!0},p(_,[i]){const n={};i&256&&(n.onClose=_[8]),i&2&&(n.title=_[1]),i&2099196&&(n.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,n.isOpen=_[0],dt(()=>t=!1)),e.$set(n)},i(_){l||(Oe(e.$$.fragment,_),l=!0)},o(_){Ie(e.$$.fragment,_),l=!1},d(_){Ye(e,_)}}}function po(r,e,t){let{isOpen:l=!1}=e,{title:p=""}=e,{message:w=""}=e,{defaultValue:_=""}=e,{placeholder:i=""}=e,{inputType:n="text"}=e,{allowEmpty:f=!1}=e,{trimValue:m=!0}=e,{confirmText:d="确定"}=e,{cancelText:g="取消"}=e,{onConfirm:y=()=>{}}=e,{onCancel:k=()=>{}}=e,v="",o;function h(){if(f){y(m?v.trim():v);return}const S=m?v.trim():v;S&&y(S)}function a(S){S.key==="Enter"&&h()}function u(S){tt[S?"unshift":"push"](()=>{o=S,t(9,o)})}function b(){v=this.value,t(10,v),t(0,l),t(13,_)}function E(S){tt[S?"unshift":"push"](()=>{o=S,t(9,o)})}function C(){v=this.value,t(10,v),t(0,l),t(13,_)}function x(S){l=S,t(0,l)}return r.$$set=S=>{"isOpen"in S&&t(0,l=S.isOpen),"title"in S&&t(1,p=S.title),"message"in S&&t(2,w=S.message),"defaultValue"in S&&t(13,_=S.defaultValue),"placeholder"in S&&t(3,i=S.placeholder),"inputType"in S&&t(4,n=S.inputType),"allowEmpty"in S&&t(5,f=S.allowEmpty),"trimValue"in S&&t(14,m=S.trimValue),"confirmText"in S&&t(6,d=S.confirmText),"cancelText"in S&&t(7,g=S.cancelText),"onConfirm"in S&&t(15,y=S.onConfirm),"onCancel"in S&&t(8,k=S.onCancel)},r.$$.update=()=>{r.$$.dirty&8193&&l&&t(10,v=_),r.$$.dirty&513&&l&&o&&setTimeout(()=>{o==null||o.focus(),o==null||o.select()},0)},[l,p,w,i,n,f,d,g,k,o,v,h,a,_,m,y,u,b,E,C,x]}class ur extends gt{constructor(e){super(),_t(this,e,po,fo,pt,{isOpen:0,title:1,message:2,defaultValue:13,placeholder:3,inputType:4,allowEmpty:5,trimValue:14,confirmText:6,cancelText:7,onConfirm:15,onCancel:8})}}function ri(r,e,t){const l=r.slice();return l[62]=e[t][0],l[63]=e[t][1],l}function ii(r,e,t){const l=r.slice();return l[66]=e[t],l}function si(r,e,t){const l=r.slice();return l[62]=e[t][0],l[63]=e[t][1],l}function ni(r,e,t){const l=r.slice();return l[66]=e[t],l}function oi(r){let e,t,l,p,w,_,i,n,f,m,d,g;return{c(){e=L("div"),t=L("button"),t.innerHTML='<svg class="w-4 h-4 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(加密)</span>',l=O(),p=L("button"),p.innerHTML='<svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(跨设备加密)</span>',w=O(),_=L("button"),_.innerHTML='<svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导出(明文)</span>',i=O(),n=L("div"),f=O(),m=L("button"),m.innerHTML='<svg class="w-4 h-4 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导入连接</span>',s(t,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(p,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(_,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(n,"class","border-t border-gray-200 dark:border-gray-700 my-1"),s(m,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10 py-1 min-w-[160px]")},m(y,k){V(y,e,k),c(e,t),c(e,l),c(e,p),c(e,w),c(e,_),c(e,i),c(e,n),c(e,f),c(e,m),d||(g=[Q(t,"click",r[42]),Q(p,"click",r[43]),Q(_,"click",r[44]),Q(m,"click",r[30])],d=!0)},p:Pe,d(y){y&&N(e),d=!1,Fe(g)}}}function _o(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function go(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function li(r){let e,t=[],l=new Map,p=Ke(r[63]);const w=_=>_[66].id;for(let _=0;_<p.length;_+=1){let i=ni(r,p,_),n=w(i);l.set(n,t[_]=ci(n,i))}return{c(){e=L("div");for(let _=0;_<t.length;_+=1)t[_].c();s(e,"class","ml-4")},m(_,i){V(_,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(_,i){i[0]&65541|i[1]&32&&(p=Ke(_[63]),t=Lt(t,i,w,1,_,p,l,e,Mt,ci,null,ni))},d(_){_&&N(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ai(r){let e,t=r[66].dbType.toUpperCase()+"",l;return{c(){e=Z("• "),l=Z(t)},m(p,w){V(p,e,w),V(p,l,w)},p(p,w){w[0]&65536&&t!==(t=p[66].dbType.toUpperCase()+"")&&ue(l,t)},d(p){p&&(N(e),N(l))}}}function ci(r,e){let t,l,p=pi(e[66].type)+"",w,_,i,n,f=e[66].name+"",m,d,g,y,k,v,o=e[66].username+"",h,a,u=e[66].host+"",b,E,C=e[66].port+"",x,S,M,T,R,H,A,z,K,Y,re,J,D=e[66].type==="database"&&e[66].dbType&&ai(e);function P(){return e[47](e[66])}function F(){return e[48](e[66])}function j(...W){return e[49](e[66],...W)}function q(){return e[50](e[66])}return{key:r,first:null,c(){t=L("div"),l=L("div"),w=O(),_=L("div"),i=L("div"),n=L("span"),m=Z(f),d=O(),g=L("div"),k=O(),v=L("div"),h=Z(o),a=Z("@"),b=Z(u),E=Z(":"),x=Z(C),S=O(),D&&D.c(),M=O(),T=L("div"),R=L("button"),R.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',H=O(),A=L("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',z=O(),K=L("button"),K.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',Y=O(),s(l,"class","flex-shrink-0"),s(n,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),s(g,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[66].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),s(i,"class","flex items-center gap-2"),s(v,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),s(_,"class","flex-1 min-w-0"),s(R,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),s(R,"title","连接"),s(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),s(K,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),s(T,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),s(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(W,X){V(W,t,X),c(t,l),l.innerHTML=p,c(t,w),c(t,_),c(_,i),c(i,n),c(n,m),c(i,d),c(i,g),c(_,k),c(_,v),c(v,h),c(v,a),c(v,b),c(v,E),c(v,x),c(v,S),D&&D.m(v,null),c(t,M),c(t,T),c(T,R),c(T,H),c(T,A),c(T,z),c(T,K),c(t,Y),re||(J=[Q(R,"click",$r(P)),Q(A,"click",$r(F)),Q(K,"click",j),Q(t,"click",q)],re=!0)},p(W,X){e=W,X[0]&65536&&p!==(p=pi(e[66].type)+"")&&(l.innerHTML=p),X[0]&65536&&f!==(f=e[66].name+"")&&ue(m,f),X[0]&65536&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[66].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&s(g,"class",y),X[0]&65536&&o!==(o=e[66].username+"")&&ue(h,o),X[0]&65536&&u!==(u=e[66].host+"")&&ue(b,u),X[0]&65536&&C!==(C=e[66].port+"")&&ue(x,C),e[66].type==="database"&&e[66].dbType?D?D.p(e,X):(D=ai(e),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},d(W){W&&N(t),D&&D.d(),re=!1,Fe(J)}}}function hi(r){let e,t,l,p,w,_,i,n,f=r[62]+"",m,d,g,y,k=r[63].length+"",v,o,h,a=r[5].has(r[62]),u,b,E;function C(R,H){return H[0]&65568&&(l=null),l==null&&(l=!!R[5].has(R[62])),l?go:_o}let x=C(r,[-1,-1,-1]),S=x(r);function M(){return r[46](r[62])}let T=a&&li(r);return{c(){e=L("div"),t=L("div"),S.c(),p=O(),w=oe("svg"),_=oe("path"),i=O(),n=L("span"),m=Z(f),d=O(),g=L("span"),y=Z("("),v=Z(k),o=Z(")"),h=O(),T&&T.c(),u=O(),s(_,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(w,"class","w-4 h-4 text-amber-500"),s(w,"fill","currentColor"),s(w,"viewBox","0 0 24 24"),s(n,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(g,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),s(e,"class","mb-1")},m(R,H){V(R,e,H),c(e,t),S.m(t,null),c(t,p),c(t,w),c(w,_),c(t,i),c(t,n),c(n,m),c(t,d),c(t,g),c(g,y),c(g,v),c(g,o),c(e,h),T&&T.m(e,null),c(e,u),b||(E=Q(t,"click",M),b=!0)},p(R,H){r=R,x!==(x=C(r,H))&&(S.d(1),S=x(r),S&&(S.c(),S.m(t,p))),H[0]&65536&&f!==(f=r[62]+"")&&ue(m,f),H[0]&65536&&k!==(k=r[63].length+"")&&ue(v,k),H[0]&65568&&(a=r[5].has(r[62])),a?T?T.p(r,H):(T=li(r),T.c(),T.m(e,u)):T&&(T.d(1),T=null)},d(R){R&&N(e),S.d(),T&&T.d(),b=!1,E()}}}function di(r,e){let t,l,p,w,_,i=e[66].name+"",n,f,m,d=e[66].username+"",g,y,k=e[66].host+"",v,o,h,a;function u(){return e[54](e[66])}return{key:r,first:null,c(){t=L("label"),l=L("input"),w=O(),_=L("span"),n=Z(i),f=O(),m=L("span"),g=Z(d),y=Z("@"),v=Z(k),o=O(),s(l,"type","checkbox"),l.checked=p=e[12].has(e[66].id),s(l,"class","w-4 h-4 text-purple-600"),s(_,"class","truncate"),s(m,"class","text-xs text-gray-400 dark:text-gray-500 truncate"),s(t,"class","flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"),this.first=t},m(b,E){V(b,t,E),c(t,l),c(t,w),c(t,_),c(_,n),c(t,f),c(t,m),c(m,g),c(m,y),c(m,v),c(t,o),h||(a=Q(l,"change",u),h=!0)},p(b,E){e=b,E[0]&135168&&p!==(p=e[12].has(e[66].id))&&(l.checked=p),E[0]&131072&&i!==(i=e[66].name+"")&&ue(n,i),E[0]&131072&&d!==(d=e[66].username+"")&&ue(g,d),E[0]&131072&&k!==(k=e[66].host+"")&&ue(v,k)},d(b){b&&N(t),h=!1,a()}}}function ui(r){let e,t,l,p,w,_,i=r[62]+"",n,f,m,d,g=r[63].length+"",y,k,v,o,h=[],a=new Map,u,b,E;function C(){return r[53](r[63])}let x=Ke(r[63]);const S=M=>M[66].id;for(let M=0;M<x.length;M+=1){let T=ii(r,x,M),R=S(T);a.set(R,h[M]=di(R,T))}return{c(){e=L("div"),t=L("div"),l=L("input"),w=O(),_=L("span"),n=Z(i),f=O(),m=L("span"),d=Z("("),y=Z(g),k=Z(")"),v=O(),o=L("div");for(let M=0;M<h.length;M+=1)h[M].c();u=O(),s(l,"type","checkbox"),l.checked=p=r[29](r[63]),s(l,"class","w-4 h-4 text-purple-600"),s(_,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(m,"class","text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700/40"),s(o,"class","px-3 py-2 space-y-1"),s(e,"class","rounded-lg border border-gray-200 dark:border-gray-700")},m(M,T){V(M,e,T),c(e,t),c(t,l),c(t,w),c(t,_),c(_,n),c(t,f),c(t,m),c(m,d),c(m,y),c(m,k),c(e,v),c(e,o);for(let R=0;R<h.length;R+=1)h[R]&&h[R].m(o,null);c(e,u),b||(E=Q(l,"change",C),b=!0)},p(M,T){r=M,T[0]&131072&&p!==(p=r[29](r[63]))&&(l.checked=p),T[0]&131072&&i!==(i=r[62]+"")&&ue(n,i),T[0]&131072&&g!==(g=r[63].length+"")&&ue(y,g),T[0]&67244032&&(x=Ke(r[63]),h=Lt(h,T,S,1,r,x,a,o,Mt,di,null,ii))},d(M){M&&N(e);for(let T=0;T<h.length;T+=1)h[T].d();b=!1,E()}}}function mo(r){let e,t,l,p,w=r[12].size+"",_,i,n=r[4].length+"",f,m,d,g=r[12].size===r[4].length?"取消全选":"全选",y,k,v,o,h,a,u,b,E,C,x,S,M=Ke(Object.entries(r[17])),T=[];for(let R=0;R<M.length;R+=1)T[R]=ui(ri(r,M,R));return{c(){e=L("div"),t=L("div"),l=L("div"),p=Z("已选 "),_=Z(w),i=Z(" / "),f=Z(n),m=O(),d=L("button"),y=Z(g),k=O(),v=L("div");for(let R=0;R<T.length;R+=1)T[R].c();o=O(),h=L("div"),a=L("button"),a.textContent="取消",u=O(),b=L("button"),E=Z("导出"),s(l,"class","text-xs text-gray-500 dark:text-gray-400"),s(d,"type","button"),s(d,"class","text-xs text-purple-600 dark:text-purple-400 hover:underline"),s(t,"class","flex items-center justify-between"),s(v,"class","max-h-64 overflow-y-auto space-y-2"),s(a,"type","button"),s(a,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(b,"type","button"),b.disabled=C=r[12].size===0,s(b,"class","px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 disabled:cursor-not-allowed"),s(h,"class","flex gap-2 justify-end"),s(e,"class","space-y-4")},m(R,H){V(R,e,H),c(e,t),c(t,l),c(l,p),c(l,_),c(l,i),c(l,f),c(t,m),c(t,d),c(d,y),c(e,k),c(e,v);for(let A=0;A<T.length;A+=1)T[A]&&T[A].m(v,null);c(e,o),c(e,h),c(h,a),c(h,u),c(h,b),c(b,E),x||(S=[Q(d,"click",r[28]),Q(a,"click",r[21]),Q(b,"click",r[20])],x=!0)},p(R,H){if(H[0]&4096&&w!==(w=R[12].size+"")&&ue(_,w),H[0]&16&&n!==(n=R[4].length+"")&&ue(f,n),H[0]&4112&&g!==(g=R[12].size===R[4].length?"取消全选":"全选")&&ue(y,g),H[0]&738332672){M=Ke(Object.entries(R[17]));let A;for(A=0;A<M.length;A+=1){const z=ri(R,M,A);T[A]?T[A].p(z,H):(T[A]=ui(z),T[A].c(),T[A].m(v,null))}for(;A<T.length;A+=1)T[A].d(1);T.length=M.length}H[0]&4096&&C!==(C=R[12].size===0)&&(b.disabled=C)},d(R){R&&N(e),Nt(T,R),x=!1,Fe(S)}}}function vo(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J,D,P,F,j,q,W,X=r[6]&&oi(r),te=Ke(Object.entries(r[16])),I=[];for(let ce=0;ce<te.length;ce+=1)I[ce]=hi(si(r,te,ce));function B(ce){r[51](ce)}let ee={title:"删除连接",message:r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？",type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[37],onCancel:r[38]};r[7]!==void 0&&(ee.isOpen=r[7]),E=new lr({props:ee}),tt.push(()=>ut(E,"isOpen",B));function U(ce){r[52](ce)}let le={title:"导入连接",message:"确定要导入连接配置吗？导入后会合并到现有连接中。",type:"warning",confirmText:"导入",cancelText:"取消",onConfirm:r[31],onCancel:r[34]};r[9]!==void 0&&(le.isOpen=r[9]),S=new lr({props:le}),tt.push(()=>ut(S,"isOpen",U));function ae(ce){r[55](ce)}let he={onClose:r[21],title:r[11]==="plain"?"导出连接（明文）":r[11]==="passphrase"?"导出连接（跨设备加密）":"导出连接（加密）",size:"md",$$slots:{default:[mo]},$$scope:{ctx:r}};r[10]!==void 0&&(he.isOpen=r[10]),R=new mr({props:he}),tt.push(()=>ut(R,"isOpen",ae));function ye(ce){r[56](ce)}let pe={title:"导出加密",message:"请输入导出密码（用于跨设备解密）",placeholder:"导出密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"下一步",cancelText:"取消",onConfirm:r[22],onCancel:r[23]};r[13]!==void 0&&(pe.isOpen=r[13]),z=new ur({props:pe}),tt.push(()=>ut(z,"isOpen",ye));function ge(ce){r[57](ce)}let we={title:"确认导出密码",message:"请再次输入导出密码",placeholder:"确认导出密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"导出",cancelText:"取消",onConfirm:r[24],onCancel:r[25]};r[14]!==void 0&&(we.isOpen=r[14]),re=new ur({props:we}),tt.push(()=>ut(re,"isOpen",ge));function Be(ce){r[58](ce)}let Me={title:"导入解密",message:"该文件需要导入密码，请输入",placeholder:"导入密码",inputType:"password",allowEmpty:!1,trimValue:!1,confirmText:"导入",cancelText:"取消",onConfirm:r[32],onCancel:r[33]};return r[15]!==void 0&&(Me.isOpen=r[15]),P=new ur({props:Me}),tt.push(()=>ut(P,"isOpen",Be)),{c(){e=L("div"),t=L("div"),l=L("div"),p=L("h2"),p.textContent="服务器资产",w=O(),_=L("div"),i=L("button"),i.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',n=O(),f=L("div"),m=L("button"),m.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>',d=O(),X&&X.c(),g=O(),y=L("div"),k=oe("svg"),v=oe("path"),o=O(),h=L("input"),a=O(),u=L("div");for(let ce=0;ce<I.length;ce+=1)I[ce].c();b=O(),Ze(E.$$.fragment),x=O(),Ze(S.$$.fragment),T=O(),Ze(R.$$.fragment),A=O(),Ze(z.$$.fragment),Y=O(),Ze(re.$$.fragment),D=O(),Ze(P.$$.fragment),s(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(i,"title","添加连接"),s(m,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(m,"title","导出/导入"),s(f,"class","relative"),s(_,"class","flex gap-1"),s(l,"class","flex items-center justify-between mb-3"),s(v,"stroke-linecap","round"),s(v,"stroke-linejoin","round"),s(v,"stroke-width","2"),s(v,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(k,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),s(k,"fill","none"),s(k,"stroke","currentColor"),s(k,"viewBox","0 0 24 24"),s(h,"type","text"),s(h,"placeholder","搜索服务器..."),s(h,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(y,"class","relative"),s(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),s(u,"class","flex-1 overflow-y-auto scrollbar-thin"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(ce,de){V(ce,e,de),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(_,i),c(_,n),c(_,f),c(f,m),c(f,d),X&&X.m(f,null),c(t,g),c(t,y),c(y,k),c(k,v),c(y,o),c(y,h),Le(h,r[3]),c(e,a),c(e,u);for(let $=0;$<I.length;$+=1)I[$]&&I[$].m(u,null);V(ce,b,de),Xe(E,ce,de),V(ce,x,de),Xe(S,ce,de),V(ce,T,de),Xe(R,ce,de),V(ce,A,de),Xe(z,ce,de),V(ce,Y,de),Xe(re,ce,de),V(ce,D,de),Xe(P,ce,de),j=!0,q||(W=[Q(i,"click",function(){It(r[1])&&r[1].apply(this,arguments)}),Q(m,"click",r[41]),Q(h,"input",r[45]),Q(e,"click",r[18])],q=!0)},p(ce,de){if(r=ce,r[6]?X?X.p(r,de):(X=oi(r),X.c(),X.m(f,null)):X&&(X.d(1),X=null),de[0]&8&&h.value!==r[3]&&Le(h,r[3]),de[0]&65573|de[1]&48){te=Ke(Object.entries(r[16]));let je;for(je=0;je<te.length;je+=1){const ne=si(r,te,je);I[je]?I[je].p(ne,de):(I[je]=hi(ne),I[je].c(),I[je].m(u,null))}for(;je<I.length;je+=1)I[je].d(1);I.length=te.length}const $={};de[0]&256&&($.message=r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？"),!C&&de[0]&128&&(C=!0,$.isOpen=r[7],dt(()=>C=!1)),E.$set($);const ve={};!M&&de[0]&512&&(M=!0,ve.isOpen=r[9],dt(()=>M=!1)),S.$set(ve);const ie={};de[0]&2048&&(ie.title=r[11]==="plain"?"导出连接（明文）":r[11]==="passphrase"?"导出连接（跨设备加密）":"导出连接（加密）"),de[0]&135184|de[2]&2048&&(ie.$$scope={dirty:de,ctx:r}),!H&&de[0]&1024&&(H=!0,ie.isOpen=r[10],dt(()=>H=!1)),R.$set(ie);const ke={};!K&&de[0]&8192&&(K=!0,ke.isOpen=r[13],dt(()=>K=!1)),z.$set(ke);const ze={};!J&&de[0]&16384&&(J=!0,ze.isOpen=r[14],dt(()=>J=!1)),re.$set(ze);const We={};!F&&de[0]&32768&&(F=!0,We.isOpen=r[15],dt(()=>F=!1)),P.$set(We)},i(ce){j||(Oe(E.$$.fragment,ce),Oe(S.$$.fragment,ce),Oe(R.$$.fragment,ce),Oe(z.$$.fragment,ce),Oe(re.$$.fragment,ce),Oe(P.$$.fragment,ce),j=!0)},o(ce){Ie(E.$$.fragment,ce),Ie(S.$$.fragment,ce),Ie(R.$$.fragment,ce),Ie(z.$$.fragment,ce),Ie(re.$$.fragment,ce),Ie(P.$$.fragment,ce),j=!1},d(ce){ce&&(N(e),N(b),N(x),N(T),N(A),N(Y),N(D)),X&&X.d(),Nt(I,ce),Ye(E,ce),Ye(S,ce),Ye(R,ce),Ye(z,ce),Ye(re,ce),Ye(P,ce),q=!1,Fe(W)}}}function fi(r,e){var l;const t=(l=window.wailsBindings)==null?void 0:l.ShowMessageDialog;if(typeof t=="function"){t(r,e);return}alert(e)}function Hr(r,e){var l;const t=(l=window.wailsBindings)==null?void 0:l.ShowErrorDialog;if(typeof t=="function"){t(r,e);return}alert(e)}function pi(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function bo(r,e,t){let l,p,w,_;vt(r,Ut,ne=>t(4,w=ne)),vt(r,Gn,ne=>t(17,_=ne));let{onConnect:i}=e,{onAddClick:n}=e,{onDelete:f}=e,{onEdit:m}=e,d="",g=new Set(["生产环境","开发环境"]),y=!1,k=!1,v=null,o=!1,h="",a=!1,u="machine",b=new Set,E=!1,C=!1,x="",S=!1;function M(ne){t(6,y=!1),ne.stopPropagation()}function T(ne,_e){if(_e.stopPropagation(),t(6,y=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}t(11,u=ne),t(12,b=new Set(w.map(Ne=>Ne.id))),t(10,a=!0)}async function R(ne,_e=""){const{ExportConnectionsByIDs:Ne,ExportConnectionsByIDsWithPassphrase:Ee,SaveBinaryFile:G}=window.wailsBindings;if(ne==="passphrase"){if(typeof Ee!="function")throw new Error("导出功能不可用，请升级应用");return Ee(Array.from(b),_e).then(Se=>G("ssh-connections.json",btoa(unescape(encodeURIComponent(Se)))))}if(typeof Ne!="function")throw new Error("导出功能不可用，请升级应用");const be=await Ne(Array.from(b),ne),Ce=btoa(unescape(encodeURIComponent(be)));return G("ssh-connections.json",Ce)}function H(){if(!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}if(b.size===0){alert("请至少选择一个连接");return}if(u==="passphrase"){t(13,E=!0);return}R(u==="machine").then(()=>{t(10,a=!1)}).catch(_e=>{console.error("导出失败:",_e),alert("导出失败: "+_e.message)})}function A(){t(10,a=!1)}function z(ne){x=ne,t(13,E=!1),t(14,C=!0)}function K(){x="",t(13,E=!1)}function Y(ne){if(t(14,C=!1),ne!==x){alert("两次输入的密码不一致"),x="",t(13,E=!0);return}R("passphrase",x).then(()=>{t(10,a=!1),x=""}).catch(_e=>{console.error("导出失败:",_e),alert("导出失败: "+_e.message)})}function re(){x="",t(14,C=!1)}function J(ne){const _e=new Set(b);_e.has(ne)?_e.delete(ne):_e.add(ne),t(12,b=_e)}function D(ne){const _e=new Set(b);ne.every(Ee=>_e.has(Ee.id))?ne.forEach(Ee=>_e.delete(Ee.id)):ne.forEach(Ee=>_e.add(Ee.id)),t(12,b=_e)}function P(){if(b.size===w.length){t(12,b=new Set);return}t(12,b=new Set(w.map(ne=>ne.id)))}function F(ne){return ne.length>0&&ne.every(_e=>b.has(_e.id))}async function j(ne){if(ne.stopPropagation(),t(6,y=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}try{const _e=await window.wailsBindings.SelectImportFile();if(!_e)return;h=_e,t(9,o=!0)}catch(_e){console.error("导入失败:",_e),alert("导入失败: "+_e.message)}}async function q(){if(!h){t(9,o=!1);return}let ne=!1;try{const{ImportConnectionsFromFileWithPassphrase:_e,ImportConnectionsFromFile:Ne}=window.wailsBindings;let Ee=0;if(typeof _e=="function")try{Ee=await _e(h,"")}catch(G){const be=(G==null?void 0:G.message)||String(G);if(be.includes("passphrase required")||be.includes("invalid passphrase")){t(9,o=!1),t(15,S=!0),ne=!0;return}throw G}else if(typeof Ne=="function")Ee=await Ne(h);else throw new Error("导入功能不可用");fi("导入完成",`成功导入 ${Ee} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed"))}catch(_e){console.error("导入失败:",_e),Hr("导入失败",(_e==null?void 0:_e.message)||_e)}finally{t(9,o=!1),ne||(h="")}}async function W(ne){if(!h){t(15,S=!1);return}try{const{ImportConnectionsFromFileWithPassphrase:_e}=window.wailsBindings;if(typeof _e!="function")throw new Error("导入功能不可用");const Ne=await _e(h,ne);fi("导入完成",`成功导入 ${Ne} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed")),t(15,S=!1),h=""}catch(_e){const Ne=(_e==null?void 0:_e.message)||String(_e);if(Ne.includes("invalid passphrase")){Hr("导入失败","导入密码不正确，请重试"),t(15,S=!0);return}console.error("导入失败:",_e),Hr("导入失败",Ne),t(15,S=!1),h=""}}function X(){t(15,S=!1),h=""}function te(){t(9,o=!1),h=""}function I(ne){const _e=new Set(g);_e.has(ne)?_e.delete(ne):_e.add(ne),t(5,g=_e)}async function B(ne,_e){if(_e.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Ut.update(Ne=>Ne.filter(Ee=>Ee.id!==ne.id));return}t(8,v=ne),t(7,k=!0)}async function ee(){if(v)try{await window.wailsBindings.RemoveConnection(v.id),Ut.update(ne=>ne.filter(_e=>_e.id!==v.id))}catch(ne){console.error("Failed to delete asset:",ne),alert("删除连接失败: "+((ne==null?void 0:ne.message)||ne))}finally{t(7,k=!1),t(8,v=null)}}function U(){t(7,k=!1),t(8,v=null)}const le=ne=>{ne.stopPropagation(),t(6,y=!y)},ae=ne=>T("machine",ne),he=ne=>T("passphrase",ne),ye=ne=>T("plain",ne);function pe(){d=this.value,t(3,d)}const ge=ne=>I(ne),we=ne=>i(ne),Be=ne=>m(ne),Me=(ne,_e)=>B(ne,_e),ce=ne=>i(ne);function de(ne){k=ne,t(7,k)}function $(ne){o=ne,t(9,o)}const ve=ne=>D(ne),ie=ne=>J(ne.id);function ke(ne){a=ne,t(10,a)}function ze(ne){E=ne,t(13,E)}function We(ne){C=ne,t(14,C)}function je(ne){S=ne,t(15,S)}return r.$$set=ne=>{"onConnect"in ne&&t(0,i=ne.onConnect),"onAddClick"in ne&&t(1,n=ne.onAddClick),"onDelete"in ne&&t(39,f=ne.onDelete),"onEdit"in ne&&t(2,m=ne.onEdit)},r.$$.update=()=>{r.$$.dirty[0]&24&&t(40,l=w.filter(ne=>{const _e=d.toLowerCase();return ne.name.toLowerCase().includes(_e)||ne.host.toLowerCase().includes(_e)||ne.group.toLowerCase().includes(_e)||ne.username.toLowerCase().includes(_e)})),r.$$.dirty[1]&512&&t(16,p=l.reduce((ne,_e)=>(ne[_e.group]||(ne[_e.group]=[]),ne[_e.group].push(_e),ne),{}))},[i,n,m,d,w,g,y,k,v,o,a,u,b,E,C,S,p,_,M,T,H,A,z,K,Y,re,J,D,P,F,j,q,W,X,te,I,B,ee,U,f,l,le,ae,he,ye,pe,ge,we,Be,Me,ce,de,$,ve,ie,ke,ze,We,je]}class yo extends gt{constructor(e){super(),_t(this,e,bo,vo,pt,{onConnect:0,onAddClick:1,onDelete:39,onEdit:2},null,[-1,-1,-1])}}var dn={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(globalThis,()=>(()=>{var t={4567:function(_,i,n){var f=this&&this.__decorate||function(a,u,b,E){var C,x=arguments.length,S=x<3?u:E===null?E=Object.getOwnPropertyDescriptor(u,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,u,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(u,b,S):C(u,b))||S);return x>3&&S&&Object.defineProperty(u,b,S),S},m=this&&this.__param||function(a,u){return function(b,E){u(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const d=n(9042),g=n(9924),y=n(844),k=n(4725),v=n(2585),o=n(3656);let h=i.AccessibilityManager=class extends y.Disposable{constructor(a,u,b,E){super(),this._terminal=a,this._coreBrowserService=b,this._renderService=E,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,o.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let u=0;u<a;u++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(a){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(a)||this._charsToConsume.push(a)}_refreshRows(a,u){this._liveRegionDebouncer.refresh(a,u,this._terminal.rows)}_renderRows(a,u){const b=this._terminal.buffer,E=b.lines.length.toString();for(let C=a;C<=u;C++){const x=b.lines.get(b.ydisp+C),S=[],M=(x==null?void 0:x.translateToString(!0,void 0,void 0,S))||"",T=(b.ydisp+C+1).toString(),R=this._rowElements[C];R&&(M.length===0?(R.innerText=" ",this._rowColumns.set(R,[0,1])):(R.textContent=M,this._rowColumns.set(R,S)),R.setAttribute("aria-posinset",T),R.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,u){const b=a.target,E=this._rowElements[u===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(u===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==E)return;let C,x;if(u===0?(C=b,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(C=this._rowElements.shift(),x=b,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),u===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(u===0?-1:1),this._rowElements[u===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleSelectionChange(){var M;if(this._rowElements.length===0)return;const a=document.getSelection();if(!a)return;if(a.isCollapsed)return void(this._rowContainer.contains(a.anchorNode)&&this._terminal.clearSelection());if(!a.anchorNode||!a.focusNode)return void console.error("anchorNode and/or focusNode are null");let u={node:a.anchorNode,offset:a.anchorOffset},b={node:a.focusNode,offset:a.focusOffset};if((u.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||u.node===b.node&&u.offset>b.offset)&&([u,b]=[b,u]),u.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(u={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(u.node))return;const E=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(E)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:E,offset:((M=E.textContent)==null?void 0:M.length)??0}),!this._rowContainer.contains(b.node))return;const C=({node:T,offset:R})=>{const H=T instanceof Text?T.parentNode:T;let A=parseInt(H==null?void 0:H.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const z=this._rowColumns.get(H);if(!z)return console.warn("columns is null. Race condition?"),null;let K=R<z.length?z[R]:z.slice(-1)[0]+1;return K>=this._terminal.cols&&(++A,K=0),{row:A,column:K}},x=C(u),S=C(b);if(x&&S){if(x.row>S.row||x.row===S.row&&x.column>=S.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(S.row-x.row)*this._terminal.cols-x.column+S.column)}}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let u=this._rowContainer.children.length;u<this._terminal.rows;u++)this._rowElements[u]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[u]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=this._coreBrowserService.mainDocument.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=h=f([m(1,v.IInstantiationService),m(2,k.ICoreBrowserService),m(3,k.IRenderService)],h)},3614:(_,i)=>{function n(g){return g.replace(/\r?\n/g,"\r")}function f(g,y){return y?"\x1B[200~"+g+"\x1B[201~":g}function m(g,y,k,v){g=f(g=n(g),k.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(g,!0),y.value=""}function d(g,y,k){const v=k.getBoundingClientRect(),o=g.clientX-v.left-10,h=g.clientY-v.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${o}px`,y.style.top=`${h}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=f,i.copyHandler=function(g,y){g.clipboardData&&g.clipboardData.setData("text/plain",y.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,y,k,v){g.stopPropagation(),g.clipboardData&&m(g.clipboardData.getData("text/plain"),y,k,v)},i.paste=m,i.moveTextAreaUnderMouseCursor=d,i.rightClickHandler=function(g,y,k,v,o){d(g,y,k),o&&v.rightClickSelect(g),y.value=v.selectionText,y.select()}},7239:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=n(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(m,d,g){this._css.set(m,d,g)}getCss(m,d){return this._css.get(m,d)}setColor(m,d,g){this._color.set(m,d,g)}getColor(m,d){return this._color.get(m,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,f,m,d){n.addEventListener(f,m,d);let g=!1;return{dispose:()=>{g||(g=!0,n.removeEventListener(f,m,d))}}}},3551:function(_,i,n){var f=this&&this.__decorate||function(h,a,u,b){var E,C=arguments.length,x=C<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,u):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,a,u,b);else for(var S=h.length-1;S>=0;S--)(E=h[S])&&(x=(C<3?E(x):C>3?E(a,u,x):E(a,u))||x);return C>3&&x&&Object.defineProperty(a,u,x),x},m=this&&this.__param||function(h,a){return function(u,b){a(u,b,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const d=n(3656),g=n(8460),y=n(844),k=n(2585),v=n(4725);let o=i.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(h,a,u,b,E){super(),this._element=h,this._mouseService=a,this._renderService=u,this._bufferService=b,this._linkProviderService=E,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){this._lastMouseEvent=h;const a=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const u=h.composedPath();for(let b=0;b<u.length;b++){const E=u[b];if(E.classList.contains("xterm"))break;if(E.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,a){var b,E;this._activeProviderReplies&&a||((b=this._activeProviderReplies)==null||b.forEach(C=>{C==null||C.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=h.y);let u=!1;for(const[C,x]of this._linkProviderService.linkProviders.entries())a?(E=this._activeProviderReplies)!=null&&E.get(C)&&(u=this._checkLinkProviderResult(C,h,u)):x.provideLinks(h.y,S=>{var T,R;if(this._isMouseOut)return;const M=S==null?void 0:S.map(H=>({link:H}));(T=this._activeProviderReplies)==null||T.set(C,M),u=this._checkLinkProviderResult(C,h,u),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)})}_removeIntersectingLinks(h,a){const u=new Set;for(let b=0;b<a.size;b++){const E=a.get(b);if(E)for(let C=0;C<E.length;C++){const x=E[C],S=x.link.range.start.y<h?0:x.link.range.start.x,M=x.link.range.end.y>h?this._bufferService.cols:x.link.range.end.x;for(let T=S;T<=M;T++){if(u.has(T)){E.splice(C--,1);break}u.add(T)}}}}_checkLinkProviderResult(h,a,u){var C;if(!this._activeProviderReplies)return u;const b=this._activeProviderReplies.get(h);let E=!1;for(let x=0;x<h;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(E=!0);if(!E&&b){const x=b.find(S=>this._linkAtPosition(S.link,a));x&&(u=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!u)for(let x=0;x<this._activeProviderReplies.size;x++){const S=(C=this._activeProviderReplies.get(x))==null?void 0:C.find(M=>this._linkAtPosition(M.link,a));if(S){u=!0,this._handleNewLink(S);break}}return u}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._currentLink)return;const a=this._positionFromMouseEvent(h,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,a){this._currentLink&&this._lastMouseEvent&&(!h||!a||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._lastMouseEvent)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(h.link,a)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>{var u,b;return(b=(u=this._currentLink)==null?void 0:u.state)==null?void 0:b.decorations.pointerCursor},set:u=>{var b;(b=this._currentLink)!=null&&b.state&&this._currentLink.state.decorations.pointerCursor!==u&&(this._currentLink.state.decorations.pointerCursor=u,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",u))}},underline:{get:()=>{var u,b;return(b=(u=this._currentLink)==null?void 0:u.state)==null?void 0:b.decorations.underline},set:u=>{var b,E,C;(b=this._currentLink)!=null&&b.state&&((C=(E=this._currentLink)==null?void 0:E.state)==null?void 0:C.decorations.underline)!==u&&(this._currentLink.state.decorations.underline=u,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,u))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(u=>{if(!this._currentLink)return;const b=u.start===0?0:u.start+1+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.ydisp+1+u.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=E&&(this._clearCurrentLink(b,E),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(h,a,u){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(u,a.text)}_fireUnderlineEvent(h,a){const u=h.range,b=this._bufferService.buffer.ydisp,E=this._createLinkUnderlineEvent(u.start.x-1,u.start.y-b-1,u.end.x,u.end.y-b-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(E)}_linkLeave(h,a,u){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(u,a.text)}_linkAtPosition(h,a){const u=h.range.start.y*this._bufferService.cols+h.range.start.x,b=h.range.end.y*this._bufferService.cols+h.range.end.x,E=a.y*this._bufferService.cols+a.x;return u<=E&&E<=b}_positionFromMouseEvent(h,a,u){const b=u.getCoords(h,a,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,a,u,b,E){return{x1:h,y1:a,x2:u,y2:b,cols:this._bufferService.cols,fg:E}}};i.Linkifier=o=f([m(1,v.IMouseService),m(2,v.IRenderService),m(3,k.IBufferService),m(4,v.ILinkProviderService)],o)},9042:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(_,i,n){var f=this&&this.__decorate||function(v,o,h,a){var u,b=arguments.length,E=b<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,o,h,a);else for(var C=v.length-1;C>=0;C--)(u=v[C])&&(E=(b<3?u(E):b>3?u(o,h,E):u(o,h))||E);return b>3&&E&&Object.defineProperty(o,h,E),E},m=this&&this.__param||function(v,o){return function(h,a){o(h,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const d=n(511),g=n(2585);let y=i.OscLinkProvider=class{constructor(v,o,h){this._bufferService=v,this._optionsService=o,this._oscLinkService=h}provideLinks(v,o){var M;const h=this._bufferService.buffer.lines.get(v-1);if(!h)return void o(void 0);const a=[],u=this._optionsService.rawOptions.linkHandler,b=new d.CellData,E=h.getTrimmedLength();let C=-1,x=-1,S=!1;for(let T=0;T<E;T++)if(x!==-1||h.hasContent(T)){if(h.loadCell(T,b),b.hasExtendedAttrs()&&b.extended.urlId){if(x===-1){x=T,C=b.extended.urlId;continue}S=b.extended.urlId!==C}else x!==-1&&(S=!0);if(S||x!==-1&&T===E-1){const R=(M=this._oscLinkService.getLinkData(C))==null?void 0:M.uri;if(R){const H={start:{x:x+1,y:v},end:{x:T+(S||T!==E-1?0:1),y:v}};let A=!1;if(!(u!=null&&u.allowNonHttpProtocols))try{const z=new URL(R);["http:","https:"].includes(z.protocol)||(A=!0)}catch{A=!0}A||a.push({text:R,range:H,activate:(z,K)=>u?u.activate(z,K,H):k(0,K),hover:(z,K)=>{var Y;return(Y=u==null?void 0:u.hover)==null?void 0:Y.call(u,z,K,H)},leave:(z,K)=>{var Y;return(Y=u==null?void 0:u.leave)==null?void 0:Y.call(u,z,K,H)}})}S=!1,b.hasExtendedAttrs()&&b.extended.urlId?(x=T,C=b.extended.urlId):(x=-1,C=-1)}}o(a)}};function k(v,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=y=f([m(0,g.IBufferService),m(1,g.IOptionsService),m(2,g.IOscLinkService)],y)},6193:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,f){this._renderCallback=n,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,f,m){this._rowCount=m,n=n!==void 0?n:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=n(3614),m=n(3656),d=n(3551),g=n(9042),y=n(3730),k=n(1680),v=n(3107),o=n(5744),h=n(2950),a=n(1296),u=n(428),b=n(4269),E=n(5114),C=n(8934),x=n(3230),S=n(9312),M=n(4725),T=n(6731),R=n(8055),H=n(8969),A=n(8460),z=n(844),K=n(6114),Y=n(8437),re=n(2584),J=n(7399),D=n(5941),P=n(9074),F=n(2585),j=n(5435),q=n(4567),W=n(779);class X extends H.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=K,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new z.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(W.LinkProviderService),this._instantiationService.setService(M.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,ee)=>this.refresh(B,ee))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,z.toDisposable)(()=>{var B,ee;this._customKeyEventHandler=void 0,(ee=(B=this.element)==null?void 0:B.parentNode)==null||ee.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const B of I){let ee,U="";switch(B.index){case 256:ee="foreground",U="10";break;case 257:ee="background",U="11";break;case 258:ee="cursor",U="12";break;default:ee="ansi",U="4;"+B.index}switch(B.type){case 0:const le=R.color.toColorRGB(ee==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[ee]);this.coreService.triggerDataEvent(`${re.C0.ESC}]${U};${(0,D.toRgbString)(le)}${re.C1_ESCAPED.ST}`);break;case 1:if(ee==="ansi")this._themeService.modifyColors(ae=>ae.ansi[B.index]=R.channels.toColor(...B.color));else{const ae=ee;this._themeService.modifyColors(he=>he[ae]=R.channels.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(re.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)==null?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(re.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(I);if(!B)return;const ee=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,le=B.getWidth(ee),ae=this._renderService.dimensions.css.cell.width*le,he=this.buffer.y*this._renderService.dimensions.css.cell.height,ye=ee*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ye+"px",this.textarea.style.top=he+"px",this.textarea.style.width=ae+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,f.copyHandler)(B,this._selectionService)}));const I=B=>(0,f.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,m.addDisposableDomListener)(this.element,"paste",I)),K.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,f.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,f.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),K.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,f.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,m.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var ee;if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((ee=this.element)==null?void 0:ee.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const B=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),B.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,m.addDisposableDomListener)(this.screenElement,"mousemove",U=>this.updateCursorStyle(U))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),B.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),K.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(E.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(M.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(M.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(B);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,B=this.element;function ee(ae){const he=I._mouseService.getMouseReportCoords(ae,I.screenElement);if(!he)return!1;let ye,pe;switch(ae.overrideType||ae.type){case"mousemove":pe=32,ae.buttons===void 0?(ye=3,ae.button!==void 0&&(ye=ae.button<3?ae.button:3)):ye=1&ae.buttons?0:4&ae.buttons?1:2&ae.buttons?2:3;break;case"mouseup":pe=0,ye=ae.button<3?ae.button:3;break;case"mousedown":pe=1,ye=ae.button<3?ae.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler(ae)===!1||I.viewport.getLinesScrolled(ae)===0)return!1;pe=ae.deltaY<0?0:1,ye=4;break;default:return!1}return!(pe===void 0||ye===void 0||ye>4)&&I.coreMouseService.triggerMouseEvent({col:he.col,row:he.row,x:he.x,y:he.y,button:ye,action:pe,ctrl:ae.ctrlKey,alt:ae.altKey,shift:ae.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},le={mouseup:ae=>(ee(ae),ae.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(ae)),wheel:ae=>(ee(ae),this.cancel(ae,!0)),mousedrag:ae=>{ae.buttons&&ee(ae)},mousemove:ae=>{ae.buttons||ee(ae)}};this.register(this.coreMouseService.onProtocolChange(ae=>{ae?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ae)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ae?U.mousemove||(B.addEventListener("mousemove",le.mousemove),U.mousemove=le.mousemove):(B.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&ae?U.wheel||(B.addEventListener("wheel",le.wheel,{passive:!1}),U.wheel=le.wheel):(B.removeEventListener("wheel",U.wheel),U.wheel=null),2&ae?U.mouseup||(U.mouseup=le.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&ae?U.mousedrag||(U.mousedrag=le.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(B,"mousedown",ae=>{if(ae.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ae))return ee(ae),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(ae)})),this.register((0,m.addDisposableDomListener)(B,"wheel",ae=>{if(!U.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ae)===!1)return!1;if(!this.buffer.hasScrollback){const he=this.viewport.getLinesScrolled(ae);if(he===0)return;const ye=re.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ae.deltaY<0?"A":"B");let pe="";for(let ge=0;ge<Math.abs(he);ge++)pe+=ye;return this.coreService.triggerDataEvent(pe,!0),this.cancel(ae,!0)}return this.viewport.handleWheel(ae)?this.cancel(ae):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(B,"touchstart",ae=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ae),this.cancel(ae)},{passive:!0})),this.register((0,m.addDisposableDomListener)(B,"touchmove",ae=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ae)?void 0:this.cancel(ae)},{passive:!1}))}refresh(I,B){var ee;(ee=this._renderService)==null||ee.refreshRows(I,B)}updateCursorStyle(I){var B;(B=this._selectionService)!=null&&B.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,B,ee=0){var U;ee===1?(super.scrollLines(I,B,ee),this.refresh(0,this.rows-1)):(U=this.viewport)==null||U.scrollLines(I)}paste(I){(0,f.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const B=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,B,ee){this._selectionService.setSelection(I,B,ee)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)==null||I.clearSelection()}selectAll(){var I;(I=this._selectionService)==null||I.selectAll()}selectLines(I,B){var ee;(ee=this._selectionService)==null||ee.selectLines(I,B)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const B=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!B&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ee=(0,J.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),ee.type===3||ee.type===2){const U=this.rows-1;return this.scrollLines(ee.type===2?-U:U),this.cancel(I,!0)}return ee.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(ee.cancel&&this.cancel(I,!0),!ee.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ee.key!==re.C0.ETX&&ee.key!==re.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ee.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(ee.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,B){const ee=I.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||I.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||I.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?ee:ee&&(!B.keyCode||B.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)B=I.charCode;else if(I.which===null||I.which===void 0)B=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;B=I.which}return!(!B||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const B=I.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(I),!0}return!1}resize(I,B){I!==this.cols||B!==this.rows?super.resize(I,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,B){var ee,U;(ee=this._charSizeService)==null||ee.measure(),(U=this.viewport)==null||U.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(Y.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)==null||I.reset(),this.refresh(0,this.rows-1)}}reset(){var B,ee;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)==null||B.reset(),this._decorationService.reset(),(ee=this.viewport)==null||ee.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)==null||I.clearTextureAtlas()}_reportFocus(){var I;(I=this.element)!=null&&I.classList.contains("focus")?this.coreService.triggerDataEvent(re.C0.ESC+"[I"):this.coreService.triggerDataEvent(re.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case j.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const B=this._renderService.dimensions.css.canvas.width.toFixed(0),ee=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${re.C0.ESC}[4;${ee};${B}t`);break;case j.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),le=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${re.C0.ESC}[6;${le};${U}t`)}}cancel(I,B){if(this.options.cancelEvents||B)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=X},9924:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,f=1e3){this._renderCallback=n,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,f,m){this._rowCount=m,n=n!==void 0?n:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=d-this._lastRefreshMs,y=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,f)}}},1680:function(_,i,n){var f=this&&this.__decorate||function(h,a,u,b){var E,C=arguments.length,x=C<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,u):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,a,u,b);else for(var S=h.length-1;S>=0;S--)(E=h[S])&&(x=(C<3?E(x):C>3?E(a,u,x):E(a,u))||x);return C>3&&x&&Object.defineProperty(a,u,x),x},m=this&&this.__param||function(h,a){return function(u,b){a(u,b,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const d=n(3656),g=n(4725),y=n(8460),k=n(844),v=n(2585);let o=i.Viewport=class extends k.Disposable{constructor(h,a,u,b,E,C,x,S){super(),this._viewportElement=h,this._scrollArea=a,this._bufferService=u,this._optionsService=b,this._charSizeService=E,this._renderService=C,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(M=>this._renderDimensions=M)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(M=>this._handleThemeChange(M))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,a){const u=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&u<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const a=this._getPixelsScrolled(h);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(h,a){var S;let u,b="";const E=[],C=a??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let M=h;M<C;M++){const T=x.get(M);if(!T)continue;const R=(S=x.get(M+1))==null?void 0:S.isWrapped;if(b+=T.translateToString(!R),!R||M===x.length-1){const H=document.createElement("div");H.textContent=b,E.push(H),b.length>0&&(u=H),b=""}}return{bufferElements:E,cursorElement:u}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(h,a){const u=this._optionsService.rawOptions.fastScrollModifier;return u==="alt"&&a.altKey||u==="ctrl"&&a.ctrlKey||u==="shift"&&a.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const a=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}};i.Viewport=o=f([m(2,v.IBufferService),m(3,v.IOptionsService),m(4,g.ICharSizeService),m(5,g.IRenderService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],o)},3107:function(_,i,n){var f=this&&this.__decorate||function(v,o,h,a){var u,b=arguments.length,E=b<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,o,h,a);else for(var C=v.length-1;C>=0;C--)(u=v[C])&&(E=(b<3?u(E):b>3?u(o,h,E):u(o,h))||E);return b>3&&E&&Object.defineProperty(o,h,E),E},m=this&&this.__param||function(v,o){return function(h,a){o(h,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const d=n(4725),g=n(844),y=n(2585);let k=i.BufferDecorationRenderer=class extends g.Disposable{constructor(v,o,h,a,u){super(),this._screenElement=v,this._bufferService=o,this._coreBrowserService=h,this._decorationService=a,this._renderService=u,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var a;const o=this._coreBrowserService.mainDocument.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((a=v==null?void 0:v.options)==null?void 0:a.layer)==="top"),o.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=v.options.x??0;return h&&h>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(v,o),o}_refreshStyle(v){const o=v.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let h=this._decorationElements.get(v);h||(h=this._createElement(v),v.element=h,this._decorationElements.set(v,h),this._container.appendChild(h),v.onDispose(()=>{this._decorationElements.delete(v),h.remove()})),h.style.top=o*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(h)}}_refreshXPosition(v,o=v.element){if(!o)return;const h=v.options.x??0;(v.options.anchor||"left")==="right"?o.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var o;(o=this._decorationElements.get(v))==null||o.remove(),this._decorationElements.delete(v),v.dispose()}};i.BufferDecorationRenderer=k=f([m(1,y.IBufferService),m(2,d.ICoreBrowserService),m(3,y.IDecorationService),m(4,d.IRenderService)],k)},5871:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const f of this._zones)if(f.color===n.options.overviewRulerOptions.color&&f.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,n.marker.line))return;if(this._lineAdjacentToZone(f,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(f,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,f){return f>=n.startBufferLine&&f<=n.endBufferLine}_lineAdjacentToZone(n,f,m){return f>=n.startBufferLine-this._linePadding[m||"full"]&&f<=n.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(n,f){n.startBufferLine=Math.min(n.startBufferLine,f),n.endBufferLine=Math.max(n.endBufferLine,f)}}},5744:function(_,i,n){var f=this&&this.__decorate||function(u,b,E,C){var x,S=arguments.length,M=S<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(u,b,E,C);else for(var T=u.length-1;T>=0;T--)(x=u[T])&&(M=(S<3?x(M):S>3?x(b,E,M):x(b,E))||M);return S>3&&M&&Object.defineProperty(b,E,M),M},m=this&&this.__param||function(u,b){return function(E,C){b(E,C,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const d=n(5871),g=n(4725),y=n(844),k=n(2585),v={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let a=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(u,b,E,C,x,S,M){var R;super(),this._viewportElement=u,this._screenElement=b,this._bufferService=E,this._decorationService=C,this._renderService=x,this._optionsService=S,this._coreBrowserService=M,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var H;(H=this._canvas)==null||H.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const u=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=u,o.center=b,o.right=u,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=o.left,h.right=o.left+o.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const u=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(u,12),6)*this._coreBrowserService.dpr);v.left=b,v.center=b,v.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const u=this._colorZoneStore.zones;for(const b of u)b.position!=="full"&&this._renderColorZone(b);for(const b of u)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(u){this._ctx.fillStyle=u.color,this._ctx.fillRect(h[u.position||"full"],Math.round((this._canvas.height-1)*(u.startBufferLine/this._bufferService.buffers.active.lines.length)-v[u.position||"full"]/2),o[u.position||"full"],Math.round((this._canvas.height-1)*((u.endBufferLine-u.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[u.position||"full"]))}_queueRefresh(u,b){this._shouldUpdateDimensions=u||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=a=f([m(2,k.IBufferService),m(3,k.IDecorationService),m(4,g.IRenderService),m(5,k.IOptionsService),m(6,g.ICoreBrowserService)],a)},2950:function(_,i,n){var f=this&&this.__decorate||function(v,o,h,a){var u,b=arguments.length,E=b<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,o,h,a);else for(var C=v.length-1;C>=0;C--)(u=v[C])&&(E=(b<3?u(E):b>3?u(o,h,E):u(o,h))||E);return b>3&&E&&Object.defineProperty(o,h,E),E},m=this&&this.__param||function(v,o){return function(h,a){o(h,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const d=n(4725),g=n(2585),y=n(2584);let k=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,o,h,a,u,b){this._textarea=v,this._compositionView=o,this._bufferService=h,this._optionsService=a,this._coreService=u,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,h=o.replace(v,"");this._dataAlreadySent=h,o.length>v.length?this._coreService.triggerDataEvent(h,!0):o.length<v.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):o.length===v.length&&o!==v&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,u=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=u+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=u+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=k=f([m(2,g.IBufferService),m(3,g.IOptionsService),m(4,g.ICoreService),m(5,d.IRenderService)],k)},9806:(_,i)=>{function n(f,m,d){const g=d.getBoundingClientRect(),y=f.getComputedStyle(d),k=parseInt(y.getPropertyValue("padding-left")),v=parseInt(y.getPropertyValue("padding-top"));return[m.clientX-g.left-k,m.clientY-g.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(f,m,d,g,y,k,v,o,h){if(!k)return;const a=n(f,m,d);return a?(a[0]=Math.ceil((a[0]+(h?v/2:0))/v),a[1]=Math.ceil(a[1]/o),a[0]=Math.min(Math.max(a[0],1),g+(h?1:0)),a[1]=Math.min(Math.max(a[1],1),y),a):void 0}},9504:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=n(2584);function m(o,h,a,u){const b=o-d(o,a),E=h-d(h,a),C=Math.abs(b-E)-function(x,S,M){let T=0;const R=x-d(x,M),H=S-d(S,M);for(let A=0;A<Math.abs(R-H);A++){const z=g(x,S)==="A"?-1:1,K=M.buffer.lines.get(R+z*A);K!=null&&K.isWrapped&&T++}return T}(o,h,a);return v(C,k(g(o,h),u))}function d(o,h){let a=0,u=h.buffer.lines.get(o),b=u==null?void 0:u.isWrapped;for(;b&&o>=0&&o<h.rows;)a++,u=h.buffer.lines.get(--o),b=u==null?void 0:u.isWrapped;return a}function g(o,h){return o>h?"A":"B"}function y(o,h,a,u,b,E){let C=o,x=h,S="";for(;C!==a||x!==u;)C+=b?1:-1,b&&C>E.cols-1?(S+=E.buffer.translateBufferLineToString(x,!1,o,C),C=0,o=0,x++):!b&&C<0&&(S+=E.buffer.translateBufferLineToString(x,!1,0,o+1),C=E.cols-1,o=C,x--);return S+E.buffer.translateBufferLineToString(x,!1,o,C)}function k(o,h){const a=h?"O":"[";return f.C0.ESC+a+o}function v(o,h){o=Math.floor(o);let a="";for(let u=0;u<o;u++)a+=h;return a}i.moveToCellSequence=function(o,h,a,u){const b=a.buffer.x,E=a.buffer.y;if(!a.buffer.hasScrollback)return function(S,M,T,R,H,A){return m(M,R,H,A).length===0?"":v(y(S,M,S,M-d(M,H),!1,H).length,k("D",A))}(b,E,0,h,a,u)+m(E,h,a,u)+function(S,M,T,R,H,A){let z;z=m(M,R,H,A).length>0?R-d(R,H):M;const K=R,Y=function(re,J,D,P,F,j){let q;return q=m(D,P,F,j).length>0?P-d(P,F):J,re<D&&q<=P||re>=D&&q<P?"C":"D"}(S,M,T,R,H,A);return v(y(S,z,T,K,Y==="C",H).length,k(Y,A))}(b,E,o,h,a,u);let C;if(E===h)return C=b>o?"D":"C",v(Math.abs(b-o),k(C,u));C=E>h?"D":"C";const x=Math.abs(E-h);return v(function(S,M){return M.cols-S}(E>h?o:b,a)+(x-1)*a.cols+1+((E>h?b:o)-1),k(C,u))}},1296:function(_,i,n){var f=this&&this.__decorate||function(A,z,K,Y){var re,J=arguments.length,D=J<3?z:Y===null?Y=Object.getOwnPropertyDescriptor(z,K):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(A,z,K,Y);else for(var P=A.length-1;P>=0;P--)(re=A[P])&&(D=(J<3?re(D):J>3?re(z,K,D):re(z,K))||D);return J>3&&D&&Object.defineProperty(z,K,D),D},m=this&&this.__param||function(A,z){return function(K,Y){z(K,Y,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const d=n(3787),g=n(2550),y=n(2223),k=n(6171),v=n(6052),o=n(4725),h=n(8055),a=n(8460),u=n(844),b=n(2585),E="xterm-dom-renderer-owner-",C="xterm-rows",x="xterm-fg-",S="xterm-bg-",M="xterm-focus",T="xterm-selection";let R=1,H=i.DomRenderer=class extends u.Disposable{constructor(A,z,K,Y,re,J,D,P,F,j,q,W,X){super(),this._terminal=A,this._document=z,this._element=K,this._screenElement=Y,this._viewportElement=re,this._helperContainer=J,this._linkifier2=D,this._charSizeService=F,this._optionsService=j,this._bufferService=q,this._coreBrowserService=W,this._themeService=X,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(E+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,u.toDisposable)(()=>{this._element.classList.remove(E+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const K of this._rowElements)K.style.width=`${this.dimensions.css.canvas.width}px`,K.style.height=`${this.dimensions.css.cell.height}px`,K.style.lineHeight=`${this.dimensions.css.cell.height}px`,K.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const z=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=z,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let z=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;z+=`${this._terminalSelector} .${C} .xterm-dim { color: ${h.color.multiplyOpacity(A.foreground,.5).css};}`,z+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const K=`blink_underline_${this._terminalClass}`,Y=`blink_bar_${this._terminalClass}`,re=`blink_block_${this._terminalClass}`;z+=`@keyframes ${K} { 50% {  border-bottom-style: hidden; }}`,z+=`@keyframes ${Y} { 50% {  box-shadow: none; }}`,z+=`@keyframes ${re} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,z+=`${this._terminalSelector} .${C}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${C}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${C}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${re} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,z+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[J,D]of A.ansi.entries())z+=`${this._terminalSelector} .${x}${J} { color: ${D.css}; }${this._terminalSelector} .${x}${J}.xterm-dim { color: ${h.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${S}${J} { background-color: ${D.css}; }`;z+=`${this._terminalSelector} .${x}${y.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(A.background).css}; }${this._terminalSelector} .${x}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${S}${y.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=z}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,z){for(let K=this._rowElements.length;K<=z;K++){const Y=this._document.createElement("div");this._rowContainer.appendChild(Y),this._rowElements.push(Y)}for(;this._rowElements.length>z;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,z){this._refreshRowElements(A,z),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(M),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(M),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,z,K){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,z,K),this.renderRows(0,this._bufferService.rows-1),!A||!z)return;this._selectionRenderModel.update(this._terminal,A,z,K);const Y=this._selectionRenderModel.viewportStartRow,re=this._selectionRenderModel.viewportEndRow,J=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(J>=this._bufferService.rows||D<0)return;const P=this._document.createDocumentFragment();if(K){const F=A[0]>z[0];P.appendChild(this._createSelectionElement(J,F?z[0]:A[0],F?A[0]:z[0],D-J+1))}else{const F=Y===J?A[0]:0,j=J===re?z[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(J,F,j));const q=D-J-1;if(P.appendChild(this._createSelectionElement(J+1,0,this._bufferService.cols,q)),J!==D){const W=re===D?z[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(D,0,W))}}this._selectionContainer.appendChild(P)}_createSelectionElement(A,z,K,Y=1){const re=this._document.createElement("div"),J=z*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(K-z);return J+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-J),re.style.height=Y*this.dimensions.css.cell.height+"px",re.style.top=A*this.dimensions.css.cell.height+"px",re.style.left=`${J}px`,re.style.width=`${D}px`,re}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,z){const K=this._bufferService.buffer,Y=K.ybase+K.y,re=Math.min(K.x,this._bufferService.cols-1),J=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=A;F<=z;F++){const j=F+K.ydisp,q=this._rowElements[F],W=K.lines.get(j);if(!q||!W)break;q.replaceChildren(...this._rowFactory.createRow(W,j,j===Y,D,P,re,J,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${E}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,z,K,Y,re,J){K<0&&(A=0),Y<0&&(z=0);const D=this._bufferService.rows-1;K=Math.max(Math.min(K,D),0),Y=Math.max(Math.min(Y,D),0),re=Math.min(re,this._bufferService.cols);const P=this._bufferService.buffer,F=P.ybase+P.y,j=Math.min(P.x,re-1),q=this._optionsService.rawOptions.cursorBlink,W=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=K;te<=Y;++te){const I=te+P.ydisp,B=this._rowElements[te],ee=P.lines.get(I);if(!B||!ee)break;B.replaceChildren(...this._rowFactory.createRow(ee,I,I===F,W,X,j,q,this.dimensions.css.cell.width,this._widthCache,J?te===K?A:0:-1,J?(te===Y?z:re)-1:-1))}}};i.DomRenderer=H=f([m(7,b.IInstantiationService),m(8,o.ICharSizeService),m(9,b.IOptionsService),m(10,b.IBufferService),m(11,o.ICoreBrowserService),m(12,o.IThemeService)],H)},3787:function(_,i,n){var f=this&&this.__decorate||function(C,x,S,M){var T,R=arguments.length,H=R<3?x:M===null?M=Object.getOwnPropertyDescriptor(x,S):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(C,x,S,M);else for(var A=C.length-1;A>=0;A--)(T=C[A])&&(H=(R<3?T(H):R>3?T(x,S,H):T(x,S))||H);return R>3&&H&&Object.defineProperty(x,S,H),H},m=this&&this.__param||function(C,x){return function(S,M){x(S,M,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const d=n(2223),g=n(643),y=n(511),k=n(2585),v=n(8055),o=n(4725),h=n(4269),a=n(6171),u=n(3734);let b=i.DomRendererRowFactory=class{constructor(C,x,S,M,T,R,H){this._document=C,this._characterJoinerService=x,this._optionsService=S,this._coreBrowserService=M,this._coreService=T,this._decorationService=R,this._themeService=H,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,x,S){this._selectionStart=C,this._selectionEnd=x,this._columnSelectMode=S}createRow(C,x,S,M,T,R,H,A,z,K,Y){const re=[],J=this._characterJoinerService.getJoinedCharacters(x),D=this._themeService.colors;let P,F=C.getNoBgTrimmedLength();S&&F<R+1&&(F=R+1);let j=0,q="",W=0,X=0,te=0,I=!1,B=0,ee=!1,U=0;const le=[],ae=K!==-1&&Y!==-1;for(let he=0;he<F;he++){C.loadCell(he,this._workCell);let ye=this._workCell.getWidth();if(ye===0)continue;let pe=!1,ge=he,we=this._workCell;if(J.length>0&&he===J[0][0]){pe=!0;const Ee=J.shift();we=new h.JoinedCellData(this._workCell,C.translateToString(!0,Ee[0],Ee[1]),Ee[1]-Ee[0]),ge=Ee[1]-1,ye=we.getWidth()}const Be=this._isCellInSelection(he,x),Me=S&&he===R,ce=ae&&he>=K&&he<=Y;let de=!1;this._decorationService.forEachDecorationAtCell(he,x,void 0,Ee=>{de=!0});let $=we.getChars()||g.WHITESPACE_CELL_CHAR;if($===" "&&(we.isUnderline()||we.isOverline())&&($=" "),U=ye*A-z.get($,we.isBold(),we.isItalic()),P){if(j&&(Be&&ee||!Be&&!ee&&we.bg===W)&&(Be&&ee&&D.selectionForeground||we.fg===X)&&we.extended.ext===te&&ce===I&&U===B&&!Me&&!pe&&!de){we.isInvisible()?q+=g.WHITESPACE_CELL_CHAR:q+=$,j++;continue}j&&(P.textContent=q),P=this._document.createElement("span"),j=0,q=""}else P=this._document.createElement("span");if(W=we.bg,X=we.fg,te=we.extended.ext,I=ce,B=U,ee=Be,pe&&R>=he&&R<=ge&&(R=he),!this._coreService.isCursorHidden&&Me&&this._coreService.isCursorInitialized){if(le.push("xterm-cursor"),this._coreBrowserService.isFocused)H&&le.push("xterm-cursor-blink"),le.push(M==="bar"?"xterm-cursor-bar":M==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":le.push("xterm-cursor-outline");break;case"block":le.push("xterm-cursor-block");break;case"bar":le.push("xterm-cursor-bar");break;case"underline":le.push("xterm-cursor-underline")}}if(we.isBold()&&le.push("xterm-bold"),we.isItalic()&&le.push("xterm-italic"),we.isDim()&&le.push("xterm-dim"),q=we.isInvisible()?g.WHITESPACE_CELL_CHAR:we.getChars()||g.WHITESPACE_CELL_CHAR,we.isUnderline()&&(le.push(`xterm-underline-${we.extended.underlineStyle}`),q===" "&&(q=" "),!we.isUnderlineColorDefault()))if(we.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(we.getUnderlineColor()).join(",")})`;else{let Ee=we.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&we.isBold()&&Ee<8&&(Ee+=8),P.style.textDecorationColor=D.ansi[Ee].css}we.isOverline()&&(le.push("xterm-overline"),q===" "&&(q=" ")),we.isStrikethrough()&&le.push("xterm-strikethrough"),ce&&(P.style.textDecoration="underline");let ve=we.getFgColor(),ie=we.getFgColorMode(),ke=we.getBgColor(),ze=we.getBgColorMode();const We=!!we.isInverse();if(We){const Ee=ve;ve=ke,ke=Ee;const G=ie;ie=ze,ze=G}let je,ne,_e,Ne=!1;switch(this._decorationService.forEachDecorationAtCell(he,x,void 0,Ee=>{Ee.options.layer!=="top"&&Ne||(Ee.backgroundColorRGB&&(ze=50331648,ke=Ee.backgroundColorRGB.rgba>>8&16777215,je=Ee.backgroundColorRGB),Ee.foregroundColorRGB&&(ie=50331648,ve=Ee.foregroundColorRGB.rgba>>8&16777215,ne=Ee.foregroundColorRGB),Ne=Ee.options.layer==="top")}),!Ne&&Be&&(je=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,ke=je.rgba>>8&16777215,ze=50331648,Ne=!0,D.selectionForeground&&(ie=50331648,ve=D.selectionForeground.rgba>>8&16777215,ne=D.selectionForeground)),Ne&&le.push("xterm-decoration-top"),ze){case 16777216:case 33554432:_e=D.ansi[ke],le.push(`xterm-bg-${ke}`);break;case 50331648:_e=v.channels.toColor(ke>>16,ke>>8&255,255&ke),this._addStyle(P,`background-color:#${E((ke>>>0).toString(16),"0",6)}`);break;default:We?(_e=D.foreground,le.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):_e=D.background}switch(je||we.isDim()&&(je=v.color.multiplyOpacity(_e,.5)),ie){case 16777216:case 33554432:we.isBold()&&ve<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ve+=8),this._applyMinimumContrast(P,_e,D.ansi[ve],we,je,void 0)||le.push(`xterm-fg-${ve}`);break;case 50331648:const Ee=v.channels.toColor(ve>>16&255,ve>>8&255,255&ve);this._applyMinimumContrast(P,_e,Ee,we,je,ne)||this._addStyle(P,`color:#${E(ve.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,_e,D.foreground,we,je,ne)||We&&le.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}le.length&&(P.className=le.join(" "),le.length=0),Me||pe||de?P.textContent=q:j++,U!==this.defaultSpacing&&(P.style.letterSpacing=`${U}px`),re.push(P),he=ge}return P&&j&&(P.textContent=q),re}_applyMinimumContrast(C,x,S,M,T,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.treatGlyphAsBackgroundColor)(M.getCode()))return!1;const H=this._getContrastCache(M);let A;if(T||R||(A=H.getColor(x.rgba,S.rgba)),A===void 0){const z=this._optionsService.rawOptions.minimumContrastRatio/(M.isDim()?2:1);A=v.color.ensureContrastRatio(T||x,R||S,z),H.setColor((T||x).rgba,(R||S).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,x){C.setAttribute("style",`${C.getAttribute("style")||""}${x};`)}_isCellInSelection(C,x){const S=this._selectionStart,M=this._selectionEnd;return!(!S||!M)&&(this._columnSelectMode?S[0]<=M[0]?C>=S[0]&&x>=S[1]&&C<M[0]&&x<=M[1]:C<S[0]&&x>=S[1]&&C>=M[0]&&x<=M[1]:x>S[1]&&x<M[1]||S[1]===M[1]&&x===S[1]&&C>=S[0]&&C<M[0]||S[1]<M[1]&&x===M[1]&&C<M[0]||S[1]<M[1]&&x===S[1]&&C>=S[0])}};function E(C,x,S){for(;C.length<S;)C=x+C;return C}i.DomRendererRowFactory=b=f([m(1,o.ICharacterJoinerService),m(2,k.IOptionsService),m(3,o.ICoreBrowserService),m(4,k.ICoreService),m(5,k.IDecorationService),m(6,o.IThemeService)],b)},2550:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=n.createElement("span");m.classList.add("xterm-char-measure-element");const d=n.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const g=n.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const y=n.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[m,d,g,y],this._container.appendChild(m),this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(y),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,f,m,d){n===this._font&&f===this._fontSize&&m===this._weight&&d===this._weightBold||(this._font=n,this._fontSize=f,this._weight=m,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(n,f,m){let d=0;if(!f&&!m&&n.length===1&&(d=n.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const k=this._measure(n,0);return k>0&&(this._flat[d]=k),k}let g=n;f&&(g+="B"),m&&(g+="I");let y=this._holey.get(g);if(y===void 0){let k=0;f&&(k|=1),m&&(k|=2),y=this._measure(n,k),y>0&&this._holey.set(g,y)}return y}_measure(n,f){const m=this._measureElements[f];return m.textContent=n.repeat(32),m.offsetWidth/32}}},2223:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(_,i)=>{function n(m){return 57508<=m&&m<=57558}function f(m){return m>=128512&&m<=128591||m>=127744&&m<=128511||m>=128640&&m<=128767||m>=9728&&m<=9983||m>=9984&&m<=10175||m>=65024&&m<=65039||m>=129280&&m<=129535||m>=127462&&m<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},i.isEmoji=f,i.allowRescaling=function(m,d,g,y){return d===1&&g>Math.ceil(1.5*y)&&m!==void 0&&m>255&&!f(m)&&!n(m)&&!function(k){return 57344<=k&&k<=63743}(m)},i.treatGlyphAsBackgroundColor=function(m){return n(m)||function(d){return 9472<=d&&d<=9631}(m)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(m,d,g=0){return(m-(2*Math.round(d)-g))%(2*Math.round(d))}},6052:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(m,d,g,y=!1){if(this.selectionStart=d,this.selectionEnd=g,!d||!g||d[0]===g[0]&&d[1]===g[1])return void this.clear();const k=m.buffers.active.ydisp,v=d[1]-k,o=g[1]-k,h=Math.max(v,0),a=Math.min(o,m.rows-1);h>=m.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=v,this.viewportEndRow=o,this.viewportCappedStartRow=h,this.viewportCappedEndRow=a,this.startCol=d[0],this.endCol=g[0])}isCellSelected(m,d,g){return!!this.hasSelection&&(g-=m.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&g>=this.viewportCappedStartRow&&d<this.endCol&&g<=this.viewportCappedEndRow:d<this.startCol&&g>=this.viewportCappedStartRow&&d>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol)}}i.createSelectionRenderModel=function(){return new n}},456:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,f=this.selectionEnd;return!(!n||!f)&&(n[1]>f[1]||n[1]===f[1]&&n[0]>f[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(_,i,n){var f=this&&this.__decorate||function(a,u,b,E){var C,x=arguments.length,S=x<3?u:E===null?E=Object.getOwnPropertyDescriptor(u,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,u,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(u,b,S):C(u,b))||S);return x>3&&S&&Object.defineProperty(u,b,S),S},m=this&&this.__param||function(a,u){return function(b,E){u(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const d=n(2585),g=n(8460),y=n(844);let k=i.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,u,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch{this._measureStrategy=this.register(new o(a,u,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};i.CharSizeService=k=f([m(2,d.IOptionsService)],k);class v extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(u,b){u!==void 0&&u>0&&b!==void 0&&b>0&&(this._result.width=u,this._result.height=b)}}class o extends v{constructor(u,b,E){super(),this._document=u,this._parentElement=b,this._optionsService=E,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends v{constructor(u){super(),this._optionsService=u,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const u=this._ctx.measureText("W");return this._validateAndSet(u.width,u.fontBoundingBoxAscent+u.fontBoundingBoxDescent),this._result}}},4269:function(_,i,n){var f=this&&this.__decorate||function(h,a,u,b){var E,C=arguments.length,x=C<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,u):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,a,u,b);else for(var S=h.length-1;S>=0;S--)(E=h[S])&&(x=(C<3?E(x):C>3?E(a,u,x):E(a,u))||x);return C>3&&x&&Object.defineProperty(a,u,x),x},m=this&&this.__param||function(h,a){return function(u,b){a(u,b,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const d=n(3734),g=n(643),y=n(511),k=n(2585);class v extends d.AttributeData{constructor(a,u,b){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=u,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let o=i.CharacterJoinerService=class un{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(a){const u={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(u),u.id}deregister(a){for(let u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===a)return this._characterJoiners.splice(u,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const u=this._bufferService.buffer.lines.get(a);if(!u||u.length===0)return[];const b=[],E=u.translateToString(!0);let C=0,x=0,S=0,M=u.getFg(0),T=u.getBg(0);for(let R=0;R<u.getTrimmedLength();R++)if(u.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==M||this._workCell.bg!==T){if(R-C>1){const H=this._getJoinedRanges(E,S,x,u,C);for(let A=0;A<H.length;A++)b.push(H[A])}C=R,S=x,M=this._workCell.fg,T=this._workCell.bg}x+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const R=this._getJoinedRanges(E,S,x,u,C);for(let H=0;H<R.length;H++)b.push(R[H])}return b}_getJoinedRanges(a,u,b,E,C){const x=a.substring(u,b);let S=[];try{S=this._characterJoiners[0].handler(x)}catch(M){console.error(M)}for(let M=1;M<this._characterJoiners.length;M++)try{const T=this._characterJoiners[M].handler(x);for(let R=0;R<T.length;R++)un._mergeRanges(S,T[R])}catch(T){console.error(T)}return this._stringRangesToCellRanges(S,E,C),S}_stringRangesToCellRanges(a,u,b){let E=0,C=!1,x=0,S=a[E];if(S){for(let M=b;M<this._bufferService.cols;M++){const T=u.getWidth(M),R=u.getString(M).length||g.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!C&&S[0]<=x&&(S[0]=M,C=!0),S[1]<=x){if(S[1]=M,S=a[++E],!S)break;S[0]<=x?(S[0]=M,C=!0):C=!1}x+=R}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(a,u){let b=!1;for(let E=0;E<a.length;E++){const C=a[E];if(b){if(u[1]<=C[0])return a[E-1][1]=u[1],a;if(u[1]<=C[1])return a[E-1][1]=Math.max(u[1],C[1]),a.splice(E,1),a;a.splice(E,1),E--}else{if(u[1]<=C[0])return a.splice(E,0,u),a;if(u[1]<=C[1])return C[0]=Math.min(u[0],C[0]),a;u[0]<C[1]&&(C[0]=Math.min(u[0],C[0]),b=!0)}}return b?a[a.length-1][1]=u[1]:a.push(u),a}};i.CharacterJoinerService=o=f([m(0,k.IBufferService)],o)},5114:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=n(844),m=n(8460),d=n(3656);class g extends f.Disposable{constructor(v,o,h){super(),this._textarea=v,this._window=o,this.mainDocument=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new m.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(a=>this._screenDprMonitor.setWindow(a))),this.register((0,m.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=g;class y extends f.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=n(844);class m extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const y=this.linkProviders.indexOf(g);y!==-1&&this.linkProviders.splice(y,1)}}}}i.LinkProviderService=m},8934:function(_,i,n){var f=this&&this.__decorate||function(k,v,o,h){var a,u=arguments.length,b=u<3?v:h===null?h=Object.getOwnPropertyDescriptor(v,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(k,v,o,h);else for(var E=k.length-1;E>=0;E--)(a=k[E])&&(b=(u<3?a(b):u>3?a(v,o,b):a(v,o))||b);return u>3&&b&&Object.defineProperty(v,o,b),b},m=this&&this.__param||function(k,v){return function(o,h){v(o,h,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const d=n(4725),g=n(9806);let y=i.MouseService=class{constructor(k,v){this._renderService=k,this._charSizeService=v}getCoords(k,v,o,h,a){return(0,g.getCoords)(window,k,v,o,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(k,v){const o=(0,g.getCoordsRelativeToElement)(window,k,v);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};i.MouseService=y=f([m(0,d.IRenderService),m(1,d.ICharSizeService)],y)},3230:function(_,i,n){var f=this&&this.__decorate||function(a,u,b,E){var C,x=arguments.length,S=x<3?u:E===null?E=Object.getOwnPropertyDescriptor(u,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,u,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(u,b,S):C(u,b))||S);return x>3&&S&&Object.defineProperty(u,b,S),S},m=this&&this.__param||function(a,u){return function(b,E){u(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const d=n(6193),g=n(4725),y=n(8460),k=n(844),v=n(7226),o=n(2585);let h=i.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(a,u,b,E,C,x,S,M){super(),this._rowCount=a,this._charSizeService=E,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((T,R)=>this._renderRows(T,R),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(M.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,u),this.register(S.onWindowChange(T=>this._registerIntersectionObserver(T,u)))}_registerIntersectionObserver(a,u){if("IntersectionObserver"in a){const b=new a.IntersectionObserver(E=>this._handleIntersectionChange(E[E.length-1]),{threshold:0});b.observe(u),this._observerDisposable.value=(0,k.toDisposable)(()=>b.disconnect())}}_handleIntersectionChange(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(a,u,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,u,this._rowCount))}_renderRows(a,u){this._renderer.value&&(a=Math.min(a,this._rowCount-1),u=Math.min(u,this._rowCount-1),this._renderer.value.renderRows(a,u),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:a,end:u}),this._onRender.fire({start:a,end:u}),this._isNextRenderRedrawOnly=!0)}resize(a,u){this._rowCount=u,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(a){this._renderer.value=a,this._renderer.value&&(this._renderer.value.onRequestRedraw(u=>this.refreshRows(u.start,u.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(a){return this._renderDebouncer.addRefreshCallback(a)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var a,u;this._renderer.value&&((u=(a=this._renderer.value).clearTextureAtlas)==null||u.call(a),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(a,u){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var b;return(b=this._renderer.value)==null?void 0:b.handleResize(a,u)}):this._renderer.value.handleResize(a,u),this._fullRefresh())}handleCharSizeChanged(){var a;(a=this._renderer.value)==null||a.handleCharSizeChanged()}handleBlur(){var a;(a=this._renderer.value)==null||a.handleBlur()}handleFocus(){var a;(a=this._renderer.value)==null||a.handleFocus()}handleSelectionChanged(a,u,b){var E;this._selectionState.start=a,this._selectionState.end=u,this._selectionState.columnSelectMode=b,(E=this._renderer.value)==null||E.handleSelectionChanged(a,u,b)}handleCursorMove(){var a;(a=this._renderer.value)==null||a.handleCursorMove()}clear(){var a;(a=this._renderer.value)==null||a.clear()}};i.RenderService=h=f([m(2,o.IOptionsService),m(3,g.ICharSizeService),m(4,o.IDecorationService),m(5,o.IBufferService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],h)},9312:function(_,i,n){var f=this&&this.__decorate||function(S,M,T,R){var H,A=arguments.length,z=A<3?M:R===null?R=Object.getOwnPropertyDescriptor(M,T):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(S,M,T,R);else for(var K=S.length-1;K>=0;K--)(H=S[K])&&(z=(A<3?H(z):A>3?H(M,T,z):H(M,T))||z);return A>3&&z&&Object.defineProperty(M,T,z),z},m=this&&this.__param||function(S,M){return function(T,R){M(T,R,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const d=n(9806),g=n(9504),y=n(456),k=n(4725),v=n(8460),o=n(844),h=n(6114),a=n(4841),u=n(511),b=n(2585),E=" ",C=new RegExp(E,"g");let x=i.SelectionService=class extends o.Disposable{constructor(S,M,T,R,H,A,z,K,Y){super(),this._element=S,this._screenElement=M,this._linkifier=T,this._bufferService=R,this._coreService=H,this._mouseService=A,this._optionsService=z,this._renderService=K,this._coreBrowserService=Y,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=re=>this._handleMouseMove(re),this._mouseUpListener=re=>this._handleMouseUp(re),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(re=>this._handleTrim(re)),this.register(this._bufferService.buffers.onBufferActivate(re=>this._handleBufferActivate(re))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!S||!M||S[0]===M[0]&&S[1]===M[1])}get selectionText(){const S=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;if(!S||!M)return"";const T=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(S[0]===M[0])return"";const H=S[0]<M[0]?S[0]:M[0],A=S[0]<M[0]?M[0]:S[0];for(let z=S[1];z<=M[1];z++){const K=T.translateBufferLineToString(z,!0,H,A);R.push(K)}}else{const H=S[1]===M[1]?M[0]:void 0;R.push(T.translateBufferLineToString(S[1],!0,S[0],H));for(let A=S[1]+1;A<=M[1]-1;A++){const z=T.lines.get(A),K=T.translateBufferLineToString(A,!0);z!=null&&z.isWrapped?R[R.length-1]+=K:R.push(K)}if(S[1]!==M[1]){const A=T.lines.get(M[1]),z=T.translateBufferLineToString(M[1],!0,0,M[0]);A&&A.isWrapped?R[R.length-1]+=z:R.push(z)}}return R.map(H=>H.replace(C," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const M=this._getMouseBufferCoords(S),T=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(T&&R&&M)&&this._areCoordsInSelection(M,T,R)}isCellInSelection(S,M){const T=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!T||!R)&&this._areCoordsInSelection([S,M],T,R)}_areCoordsInSelection(S,M,T){return S[1]>M[1]&&S[1]<T[1]||M[1]===T[1]&&S[1]===M[1]&&S[0]>=M[0]&&S[0]<T[0]||M[1]<T[1]&&S[1]===T[1]&&S[0]<T[0]||M[1]<T[1]&&S[1]===M[1]&&S[0]>=M[0]}_selectWordAtCursor(S,M){var H,A;const T=(A=(H=this._linkifier.currentLink)==null?void 0:H.link)==null?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(S);return!!R&&(this._selectWordAt(R,M),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,M){this._model.clearSelection(),S=Math.max(S,0),M=Math.min(M,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,M],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const M=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(M)return M[0]--,M[1]--,M[1]+=this._bufferService.buffer.ydisp,M}_getMouseEventScrollAmount(S){let M=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return M>=0&&M<=T?0:(M>T&&(M-=T),M=Math.min(Math.max(M,-50),50),M/=50,M/Math.abs(M)+Math.round(14*M))}shouldForceSelection(S){return h.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const M=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);M&&M.length!==this._model.selectionStart[0]&&M.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const M=this._getMouseBufferCoords(S);M&&(this._activeSelectionMode=2,this._selectLineAt(M[1]))}shouldColumnSelect(S){return S.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const M=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const R=T.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}M&&M[0]===this._model.selectionEnd[0]&&M[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const M=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&M<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const R=(0,g.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,M=this._model.finalSelectionEnd,T=!(!S||!M||S[0]===M[0]&&S[1]===M[1]);T?S&&M&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&M[0]===this._oldSelectionEnd[0]&&M[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,M,T)):this._oldHasSelection&&this._fireOnSelectionChange(S,M,T)}_fireOnSelectionChange(S,M,T){this._oldSelectionStart=S,this._oldSelectionEnd=M,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(M=>this._handleTrim(M))}_convertViewportColToCharacterIndex(S,M){let T=M;for(let R=0;M>=R;R++){const H=S.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:H>1&&M!==R&&(T+=H-1)}return T}setSelection(S,M,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,M],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,M,T=!0,R=!0){if(S[0]>=this._bufferService.cols)return;const H=this._bufferService.buffer,A=H.lines.get(S[1]);if(!A)return;const z=H.translateBufferLineToString(S[1],!1);let K=this._convertViewportColToCharacterIndex(A,S[0]),Y=K;const re=S[0]-K;let J=0,D=0,P=0,F=0;if(z.charAt(K)===" "){for(;K>0&&z.charAt(K-1)===" ";)K--;for(;Y<z.length&&z.charAt(Y+1)===" ";)Y++}else{let W=S[0],X=S[0];A.getWidth(W)===0&&(J++,W--),A.getWidth(X)===2&&(D++,X++);const te=A.getString(X).length;for(te>1&&(F+=te-1,Y+=te-1);W>0&&K>0&&!this._isCharWordSeparator(A.loadCell(W-1,this._workCell));){A.loadCell(W-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(J++,W--):I>1&&(P+=I-1,K-=I-1),K--,W--}for(;X<A.length&&Y+1<z.length&&!this._isCharWordSeparator(A.loadCell(X+1,this._workCell));){A.loadCell(X+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,X++):I>1&&(F+=I-1,Y+=I-1),Y++,X++}}Y++;let j=K+re-J+P,q=Math.min(this._bufferService.cols,Y-K+J+D-P-F);if(M||z.slice(K,Y).trim()!==""){if(T&&j===0&&A.getCodePoint(0)!==32){const W=H.lines.get(S[1]-1);if(W&&A.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){const X=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(X){const te=this._bufferService.cols-X.start;j-=te,q+=te}}}if(R&&j+q===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const W=H.lines.get(S[1]+1);if(W!=null&&W.isWrapped&&W.getCodePoint(0)!==32){const X=this._getWordAt([0,S[1]+1],!1,!1,!0);X&&(q+=X.length)}}return{start:j,length:q}}}_selectWordAt(S,M){const T=this._getWordAt(S,M);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[T.start,S[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(S){const M=this._getWordAt(S,!0);if(M){let T=S[1];for(;M.start<0;)M.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;M.start+M.length>this._bufferService.cols;)M.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?M.start:M.start+M.length,T]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const M=this._bufferService.buffer.getWrappedRangeForLine(S),T={start:{x:0,y:M.first},end:{x:this._bufferService.cols-1,y:M.last}};this._model.selectionStart=[0,M.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(T,this._bufferService.cols)}};i.SelectionService=x=f([m(3,b.IBufferService),m(4,b.ICoreService),m(5,k.IMouseService),m(6,b.IOptionsService),m(7,k.IRenderService),m(8,k.ICoreBrowserService)],x)},4725:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=n(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(_,i,n){var f=this&&this.__decorate||function(x,S,M,T){var R,H=arguments.length,A=H<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,M):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(x,S,M,T);else for(var z=x.length-1;z>=0;z--)(R=x[z])&&(A=(H<3?R(A):H>3?R(S,M,A):R(S,M))||A);return H>3&&A&&Object.defineProperty(S,M,A),A},m=this&&this.__param||function(x,S){return function(M,T){S(M,T,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const d=n(7239),g=n(8055),y=n(8460),k=n(844),v=n(2585),o=g.css.toColor("#ffffff"),h=g.css.toColor("#000000"),a=g.css.toColor("#ffffff"),u=g.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let M=0;M<216;M++){const T=S[M/36%6|0],R=S[M/6%6|0],H=S[M%6];x.push({css:g.channels.toCss(T,R,H),rgba:g.channels.toRgba(T,R,H)})}for(let M=0;M<24;M++){const T=8+10*M;x.push({css:g.channels.toCss(T,T,T),rgba:g.channels.toRgba(T,T,T)})}return x})());let E=i.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:h,cursor:a,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:g.color.blend(h,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:g.color.blend(h,b),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const S=this._colors;if(S.foreground=C(x.foreground,o),S.background=C(x.background,h),S.cursor=C(x.cursor,a),S.cursorAccent=C(x.cursorAccent,u),S.selectionBackgroundTransparent=C(x.selectionBackground,b),S.selectionBackgroundOpaque=g.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=C(x.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=g.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=x.selectionForeground?C(x.selectionForeground,g.NULL_COLOR):void 0,S.selectionForeground===g.NULL_COLOR&&(S.selectionForeground=void 0),g.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=g.color.opacity(S.selectionBackgroundTransparent,.3)),g.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=g.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=C(x.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=C(x.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=C(x.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=C(x.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=C(x.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=C(x.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=C(x.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=C(x.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=C(x.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=C(x.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=C(x.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=C(x.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=C(x.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=C(x.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=C(x.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=C(x.brightWhite,i.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const M=Math.min(S.ansi.length-16,x.extendedAnsi.length);for(let T=0;T<M;T++)S.ansi[T+16]=C(x.extendedAnsi[T],i.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(x,S){if(x!==void 0)try{return g.css.toColor(x)}catch{}return S}i.ThemeService=E=f([m(0,v.IOptionsService)],E)},6349:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=n(8460),m=n(844);class d extends m.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const k=new Array(y);for(let v=0;v<Math.min(y,this.length);v++)k[v]=this._array[this._getCyclicIndex(v)];this._array=k,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let k=this._length;k<y;k++)this._array[k]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,k){this._array[this._getCyclicIndex(y)]=k}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,k,...v){if(k){for(let o=y;o<this._length-k;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+k)];this._length-=k,this.onDeleteEmitter.fire({index:y,amount:k})}for(let o=this._length-1;o>=y;o--)this._array[this._getCyclicIndex(o+v.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<v.length;o++)this._array[this._getCyclicIndex(y+o)]=v[o];if(v.length&&this.onInsertEmitter.fire({index:y,amount:v.length}),this._length+v.length>this._maxLength){const o=this._length+v.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=v.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,k,v){if(!(k<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let h=k-1;h>=0;h--)this.set(y+h+v,this.get(y+h));const o=y+k+v-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<k;o++)this.set(y+o+v,this.get(y+o))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}i.CircularList=d},1439:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(f,m=5){if(typeof f!="object")return f;const d=Array.isArray(f)?[]:{};for(const g in f)d[g]=m<=1?f[g]:f[g]&&n(f[g],m-1);return d}},8055:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let n=0,f=0,m=0,d=0;var g,y,k,v,o;function h(u){const b=u.toString(16);return b.length<2?"0"+b:b}function a(u,b){return u<b?(b+.05)/(u+.05):(u+.05)/(b+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(u){u.toCss=function(b,E,C,x){return x!==void 0?`#${h(b)}${h(E)}${h(C)}${h(x)}`:`#${h(b)}${h(E)}${h(C)}`},u.toRgba=function(b,E,C,x=255){return(b<<24|E<<16|C<<8|x)>>>0},u.toColor=function(b,E,C,x){return{css:u.toCss(b,E,C,x),rgba:u.toRgba(b,E,C,x)}}}(g||(i.channels=g={})),function(u){function b(E,C){return d=Math.round(255*C),[n,f,m]=o.toChannels(E.rgba),{css:g.toCss(n,f,m,d),rgba:g.toRgba(n,f,m,d)}}u.blend=function(E,C){if(d=(255&C.rgba)/255,d===1)return{css:C.css,rgba:C.rgba};const x=C.rgba>>24&255,S=C.rgba>>16&255,M=C.rgba>>8&255,T=E.rgba>>24&255,R=E.rgba>>16&255,H=E.rgba>>8&255;return n=T+Math.round((x-T)*d),f=R+Math.round((S-R)*d),m=H+Math.round((M-H)*d),{css:g.toCss(n,f,m),rgba:g.toRgba(n,f,m)}},u.isOpaque=function(E){return(255&E.rgba)==255},u.ensureContrastRatio=function(E,C,x){const S=o.ensureContrastRatio(E.rgba,C.rgba,x);if(S)return g.toColor(S>>24&255,S>>16&255,S>>8&255)},u.opaque=function(E){const C=(255|E.rgba)>>>0;return[n,f,m]=o.toChannels(C),{css:g.toCss(n,f,m),rgba:C}},u.opacity=b,u.multiplyOpacity=function(E,C){return d=255&E.rgba,b(E,d*C/255)},u.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(y||(i.color=y={})),function(u){let b,E;try{const C=document.createElement("canvas");C.width=1,C.height=1;const x=C.getContext("2d",{willReadFrequently:!0});x&&(b=x,b.globalCompositeOperation="copy",E=b.createLinearGradient(0,0,1,1))}catch{}u.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return n=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),m=parseInt(C.slice(3,4).repeat(2),16),g.toColor(n,f,m);case 5:return n=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),m=parseInt(C.slice(3,4).repeat(2),16),d=parseInt(C.slice(4,5).repeat(2),16),g.toColor(n,f,m,d);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const x=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return n=parseInt(x[1]),f=parseInt(x[2]),m=parseInt(x[3]),d=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),g.toColor(n,f,m,d);if(!b||!E)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=E,b.fillStyle=C,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[n,f,m,d]=b.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(n,f,m,d),css:C}}}(k||(i.css=k={})),function(u){function b(E,C,x){const S=E/255,M=C/255,T=x/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}u.relativeLuminance=function(E){return b(E>>16&255,E>>8&255,255&E)},u.relativeLuminance2=b}(v||(i.rgb=v={})),function(u){function b(C,x,S){const M=C>>24&255,T=C>>16&255,R=C>>8&255;let H=x>>24&255,A=x>>16&255,z=x>>8&255,K=a(v.relativeLuminance2(H,A,z),v.relativeLuminance2(M,T,R));for(;K<S&&(H>0||A>0||z>0);)H-=Math.max(0,Math.ceil(.1*H)),A-=Math.max(0,Math.ceil(.1*A)),z-=Math.max(0,Math.ceil(.1*z)),K=a(v.relativeLuminance2(H,A,z),v.relativeLuminance2(M,T,R));return(H<<24|A<<16|z<<8|255)>>>0}function E(C,x,S){const M=C>>24&255,T=C>>16&255,R=C>>8&255;let H=x>>24&255,A=x>>16&255,z=x>>8&255,K=a(v.relativeLuminance2(H,A,z),v.relativeLuminance2(M,T,R));for(;K<S&&(H<255||A<255||z<255);)H=Math.min(255,H+Math.ceil(.1*(255-H))),A=Math.min(255,A+Math.ceil(.1*(255-A))),z=Math.min(255,z+Math.ceil(.1*(255-z))),K=a(v.relativeLuminance2(H,A,z),v.relativeLuminance2(M,T,R));return(H<<24|A<<16|z<<8|255)>>>0}u.blend=function(C,x){if(d=(255&x)/255,d===1)return x;const S=x>>24&255,M=x>>16&255,T=x>>8&255,R=C>>24&255,H=C>>16&255,A=C>>8&255;return n=R+Math.round((S-R)*d),f=H+Math.round((M-H)*d),m=A+Math.round((T-A)*d),g.toRgba(n,f,m)},u.ensureContrastRatio=function(C,x,S){const M=v.relativeLuminance(C>>8),T=v.relativeLuminance(x>>8);if(a(M,T)<S){if(T<M){const A=b(C,x,S),z=a(M,v.relativeLuminance(A>>8));if(z<S){const K=E(C,x,S);return z>a(M,v.relativeLuminance(K>>8))?A:K}return A}const R=E(C,x,S),H=a(M,v.relativeLuminance(R>>8));if(H<S){const A=b(C,x,S);return H>a(M,v.relativeLuminance(A>>8))?R:A}return R}},u.reduceLuminance=b,u.increaseLuminance=E,u.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(o||(i.rgba=o={})),i.toPaddedHex=h,i.contrastRatio=a},8969:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=n(844),m=n(2585),d=n(4348),g=n(7866),y=n(744),k=n(7302),v=n(6975),o=n(8460),h=n(1753),a=n(1480),u=n(7994),b=n(9282),E=n(5435),C=n(5981),x=n(2660);let S=!1;class M extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(R=>{var H;(H=this._onScrollApi)==null||H.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const H in R)this.optionsService.options[H]=R[H]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new k.OptionsService(R)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new E.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(H=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(H=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((H,A)=>this._inputHandler.parse(H,A))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,H){this._writeBuffer.write(R,H)}writeSync(R,H){this._logService.logLevel<=m.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(R,H)}input(R,H=!0){this.coreService.triggerDataEvent(R,H)}resize(R,H){isNaN(R)||isNaN(H)||(R=Math.max(R,y.MINIMUM_COLS),H=Math.max(H,y.MINIMUM_ROWS),this._bufferService.resize(R,H))}scroll(R,H=!1){this._bufferService.scroll(R,H)}scrollLines(R,H,A){this._bufferService.scrollLines(R,H,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const H=R-this._bufferService.buffer.ydisp;H!==0&&this.scrollLines(H)}registerEscHandler(R,H){return this._inputHandler.registerEscHandler(R,H)}registerDcsHandler(R,H){return this._inputHandler.registerDcsHandler(R,H)}registerCsiHandler(R,H){return this._inputHandler.registerCsiHandler(R,H)}registerOscHandler(R,H){return this._inputHandler.registerOscHandler(R,H)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const H=this.optionsService.rawOptions.windowsPty;H&&H.buildNumber!==void 0&&H.buildNumber!==void 0?R=H.backend==="conpty"&&H.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const H of R)H.dispose()})}}}i.CoreTerminal=M},8460:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===n)return void this._listeners.splice(f,1)}}})),this._event}fire(n,f){const m=[];for(let d=0;d<this._listeners.length;d++)m.push(this._listeners[d]);for(let d=0;d<m.length;d++)m[d].call(void 0,n,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,f){return n(m=>f.fire(m))},i.runAndSubscribe=function(n,f){return f(void 0),n(m=>f(m))}},5435:function(_,i,n){var f=this&&this.__decorate||function(J,D,P,F){var j,q=arguments.length,W=q<3?D:F===null?F=Object.getOwnPropertyDescriptor(D,P):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(J,D,P,F);else for(var X=J.length-1;X>=0;X--)(j=J[X])&&(W=(q<3?j(W):q>3?j(D,P,W):j(D,P))||W);return q>3&&W&&Object.defineProperty(D,P,W),W},m=this&&this.__param||function(J,D){return function(P,F){D(P,F,J)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const d=n(2584),g=n(7116),y=n(2015),k=n(844),v=n(482),o=n(8437),h=n(8460),a=n(643),u=n(511),b=n(3734),E=n(2585),C=n(1480),x=n(6242),S=n(6351),M=n(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function H(J,D){if(J>24)return D.setWinLines||!1;switch(J){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var A;(function(J){J[J.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",J[J.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let z=0;class K extends k.Disposable{getAttrData(){return this._curAttrData}constructor(D,P,F,j,q,W,X,te,I=new y.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=P,this._coreService=F,this._logService=j,this._optionsService=q,this._oscLinkService=W,this._coreMouseService=X,this._unicodeService=te,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Y(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(B=>this._activeBuffer=B.activeBuffer)),this._parser.setCsiHandlerFallback((B,ee)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:ee.toArray()})}),this._parser.setEscHandlerFallback(B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})}),this._parser.setExecuteHandlerFallback(B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})}),this._parser.setOscHandlerFallback((B,ee,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:ee,data:U})}),this._parser.setDcsHandlerFallback((B,ee,U)=>{ee==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:ee,payload:U})}),this._parser.setPrintHandler((B,ee,U)=>this.print(B,ee,U)),this._parser.registerCsiHandler({final:"@"},B=>this.insertChars(B)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},B=>this.scrollLeft(B)),this._parser.registerCsiHandler({final:"A"},B=>this.cursorUp(B)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},B=>this.scrollRight(B)),this._parser.registerCsiHandler({final:"B"},B=>this.cursorDown(B)),this._parser.registerCsiHandler({final:"C"},B=>this.cursorForward(B)),this._parser.registerCsiHandler({final:"D"},B=>this.cursorBackward(B)),this._parser.registerCsiHandler({final:"E"},B=>this.cursorNextLine(B)),this._parser.registerCsiHandler({final:"F"},B=>this.cursorPrecedingLine(B)),this._parser.registerCsiHandler({final:"G"},B=>this.cursorCharAbsolute(B)),this._parser.registerCsiHandler({final:"H"},B=>this.cursorPosition(B)),this._parser.registerCsiHandler({final:"I"},B=>this.cursorForwardTab(B)),this._parser.registerCsiHandler({final:"J"},B=>this.eraseInDisplay(B,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},B=>this.eraseInDisplay(B,!0)),this._parser.registerCsiHandler({final:"K"},B=>this.eraseInLine(B,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},B=>this.eraseInLine(B,!0)),this._parser.registerCsiHandler({final:"L"},B=>this.insertLines(B)),this._parser.registerCsiHandler({final:"M"},B=>this.deleteLines(B)),this._parser.registerCsiHandler({final:"P"},B=>this.deleteChars(B)),this._parser.registerCsiHandler({final:"S"},B=>this.scrollUp(B)),this._parser.registerCsiHandler({final:"T"},B=>this.scrollDown(B)),this._parser.registerCsiHandler({final:"X"},B=>this.eraseChars(B)),this._parser.registerCsiHandler({final:"Z"},B=>this.cursorBackwardTab(B)),this._parser.registerCsiHandler({final:"`"},B=>this.charPosAbsolute(B)),this._parser.registerCsiHandler({final:"a"},B=>this.hPositionRelative(B)),this._parser.registerCsiHandler({final:"b"},B=>this.repeatPrecedingCharacter(B)),this._parser.registerCsiHandler({final:"c"},B=>this.sendDeviceAttributesPrimary(B)),this._parser.registerCsiHandler({prefix:">",final:"c"},B=>this.sendDeviceAttributesSecondary(B)),this._parser.registerCsiHandler({final:"d"},B=>this.linePosAbsolute(B)),this._parser.registerCsiHandler({final:"e"},B=>this.vPositionRelative(B)),this._parser.registerCsiHandler({final:"f"},B=>this.hVPosition(B)),this._parser.registerCsiHandler({final:"g"},B=>this.tabClear(B)),this._parser.registerCsiHandler({final:"h"},B=>this.setMode(B)),this._parser.registerCsiHandler({prefix:"?",final:"h"},B=>this.setModePrivate(B)),this._parser.registerCsiHandler({final:"l"},B=>this.resetMode(B)),this._parser.registerCsiHandler({prefix:"?",final:"l"},B=>this.resetModePrivate(B)),this._parser.registerCsiHandler({final:"m"},B=>this.charAttributes(B)),this._parser.registerCsiHandler({final:"n"},B=>this.deviceStatus(B)),this._parser.registerCsiHandler({prefix:"?",final:"n"},B=>this.deviceStatusPrivate(B)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},B=>this.softReset(B)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},B=>this.setCursorStyle(B)),this._parser.registerCsiHandler({final:"r"},B=>this.setScrollRegion(B)),this._parser.registerCsiHandler({final:"s"},B=>this.saveCursor(B)),this._parser.registerCsiHandler({final:"t"},B=>this.windowOptions(B)),this._parser.registerCsiHandler({final:"u"},B=>this.restoreCursor(B)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},B=>this.insertColumns(B)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},B=>this.deleteColumns(B)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},B=>this.selectProtected(B)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},B=>this.requestMode(B,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},B=>this.requestMode(B,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(B=>(this.setTitle(B),this.setIconName(B),!0))),this._parser.registerOscHandler(1,new x.OscHandler(B=>this.setIconName(B))),this._parser.registerOscHandler(2,new x.OscHandler(B=>this.setTitle(B))),this._parser.registerOscHandler(4,new x.OscHandler(B=>this.setOrReportIndexedColor(B))),this._parser.registerOscHandler(8,new x.OscHandler(B=>this.setHyperlink(B))),this._parser.registerOscHandler(10,new x.OscHandler(B=>this.setOrReportFgColor(B))),this._parser.registerOscHandler(11,new x.OscHandler(B=>this.setOrReportBgColor(B))),this._parser.registerOscHandler(12,new x.OscHandler(B=>this.setOrReportCursorColor(B))),this._parser.registerOscHandler(104,new x.OscHandler(B=>this.restoreIndexedColor(B))),this._parser.registerOscHandler(110,new x.OscHandler(B=>this.restoreFgColor(B))),this._parser.registerOscHandler(111,new x.OscHandler(B=>this.restoreBgColor(B))),this._parser.registerOscHandler(112,new x.OscHandler(B=>this.restoreCursorColor(B))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const B in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},()=>this.selectCharset("("+B)),this._parser.registerEscHandler({intermediates:")",final:B},()=>this.selectCharset(")"+B)),this._parser.registerEscHandler({intermediates:"*",final:B},()=>this.selectCharset("*"+B)),this._parser.registerEscHandler({intermediates:"+",final:B},()=>this.selectCharset("+"+B)),this._parser.registerEscHandler({intermediates:"-",final:B},()=>this.selectCharset("-"+B)),this._parser.registerEscHandler({intermediates:".",final:B},()=>this.selectCharset("."+B)),this._parser.registerEscHandler({intermediates:"/",final:B},()=>this.selectCharset("/"+B));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(B=>(this._logService.error("Parsing error: ",B),B)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((B,ee)=>this.requestStatusString(B,ee)))}_preserveStack(D,P,F,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=F,this._parseStack.position=j}_logSlowResolvingAsync(D){this._logService.logLevel<=E.LogLevelEnum.WARN&&Promise.race([D,new Promise((P,F)=>setTimeout(()=>F("#SLOW_TIMEOUT"),5e3))]).catch(P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,P){let F,j=this._activeBuffer.x,q=this._activeBuffer.y,W=0;const X=this._parseStack.paused;if(X){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(F),F;j=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>R&&(W=this._parseStack.position+R)}if(this._logService.logLevel<=E.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,B=>String.fromCharCode(B)).join("")}"`),typeof D=="string"?D.split("").map(B=>B.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(D.length,R))),X||this._dirtyRowTracker.clearRange(),D.length>R)for(let B=W;B<D.length;B+=R){const ee=B+R<D.length?B+R:D.length,U=typeof D=="string"?this._stringDecoder.decode(D.substring(B,ee),this._parseBuffer):this._utf8Decoder.decode(D.subarray(B,ee),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,U))return this._preserveStack(j,q,U,B),this._logSlowResolvingAsync(F),F}else if(!X){const B=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,B))return this._preserveStack(j,q,B,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===j&&this._activeBuffer.y===q||this._onCursorMove.fire();const te=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(te,this._bufferService.rows-1))}print(D,P,F){let j,q;const W=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,ee=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-P>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ee);let le=this._parser.precedingJoinState;for(let ae=P;ae<F;++ae){if(j=D[ae],j<127&&W){const ge=W[String.fromCharCode(j)];ge&&(j=ge.charCodeAt(0))}const he=this._unicodeService.charProperties(j,le);q=C.UnicodeService.extractWidth(he);const ye=C.UnicodeService.extractShouldJoin(he),pe=ye?C.UnicodeService.extractWidth(le):0;if(le=he,X&&this._onA11yChar.fire((0,v.stringFromCodePoint)(j)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+q-pe>te){if(I){const ge=U;let we=this._activeBuffer.x-pe;for(this._activeBuffer.x=pe,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),pe>0&&U instanceof o.BufferLine&&U.copyCellsFrom(ge,we,0,pe,!1);we<te;)ge.setCellFromCodepoint(we++,0,1,ee)}else if(this._activeBuffer.x=te-1,q===2)continue}if(ye&&this._activeBuffer.x){const ge=U.getWidth(this._activeBuffer.x-1)?1:2;U.addCodepointToCell(this._activeBuffer.x-ge,j,q);for(let we=q-pe;--we>=0;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}else if(B&&(U.insertCells(this._activeBuffer.x,q-pe,this._activeBuffer.getNullCell(ee)),U.getWidth(te-1)===2&&U.setCellFromCodepoint(te-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,ee)),U.setCellFromCodepoint(this._activeBuffer.x++,j,q,ee),q>0)for(;--q;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}this._parser.precedingJoinState=le,this._activeBuffer.x<te&&F-P>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodepoint(this._activeBuffer.x,0,1,ee),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,P){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,P):this._parser.registerCsiHandler(D,F=>!H(F.params[0],this._optionsService.rawOptions.windowOptions)||P(F))}registerDcsHandler(D,P){return this._parser.registerDcsHandler(D,new S.DcsHandler(P))}registerEscHandler(D,P){return this._parser.registerEscHandler(D,P)}registerOscHandler(D,P){return this._parser.registerOscHandler(D,new x.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=D,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+P)}cursorUp(D){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const P=D.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=D.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=D.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const P=D.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,P,F,j=!1,q=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.replaceCells(P,F,this._activeBuffer.getNullCell(this._eraseAttrData()),q),j&&(W.isWrapped=!1)}_resetBufferLine(D,P=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),F.isWrapped=!1)}eraseInDisplay(D,P=!1){let F;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);F<this._bufferService.rows;F++)this._resetBufferLine(F,P);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,P);this._dirtyRowTracker.markDirty(0);break;case 3:const j=this._activeBuffer.lines.length-this._bufferService.rows;j>0&&(this._activeBuffer.lines.trimStart(j),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-j,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-j,0),this._onScroll.fire(0))}return!0}eraseInLine(D,P=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let P=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;for(;P--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let P=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let j;for(j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-j;P--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let P=D.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let P=D.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const P=this._parser.precedingJoinState;if(!P)return!0;const F=D.params[0]||1,j=C.UnicodeService.extractWidth(P),q=this._activeBuffer.x-j,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(q),X=new Uint32Array(W.length*F);let te=0;for(let B=0;B<W.length;){const ee=W.codePointAt(B)||0;X[te++]=ee,B+=ee>65535?2:1}let I=te;for(let B=1;B<F;++B)X.copyWithin(I,0,te),I+=te;return this.print(X,0,I),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let P=0;P<D.length;P++)switch(D.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let P=0;P<D.length;P++)switch(D.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let P=0;P<D.length;P++)switch(D.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let P=0;P<D.length;P++)switch(D.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,P){const F=this._coreService.decPrivateModes,{activeProtocol:j,activeEncoding:q}=this._coreMouseService,W=this._coreService,{buffers:X,cols:te}=this._bufferService,{active:I,alt:B}=X,ee=this._optionsService.rawOptions,U=ye=>ye?1:2,le=D.params[0];return ae=le,he=P?le===2?4:le===4?U(W.modes.insertMode):le===12?3:le===20?U(ee.convertEol):0:le===1?U(F.applicationCursorKeys):le===3?ee.windowOptions.setWinLines?te===80?2:te===132?1:0:0:le===6?U(F.origin):le===7?U(F.wraparound):le===8?3:le===9?U(j==="X10"):le===12?U(ee.cursorBlink):le===25?U(!W.isCursorHidden):le===45?U(F.reverseWraparound):le===66?U(F.applicationKeypad):le===67?4:le===1e3?U(j==="VT200"):le===1002?U(j==="DRAG"):le===1003?U(j==="ANY"):le===1004?U(F.sendFocus):le===1005?4:le===1006?U(q==="SGR"):le===1015?4:le===1016?U(q==="SGR_PIXELS"):le===1048?1:le===47||le===1047||le===1049?U(I===B):le===2004?U(F.bracketedPasteMode):0,W.triggerDataEvent(`${d.C0.ESC}[${P?"":"?"}${ae};${he}$y`),!0;var ae,he}_updateAttrColor(D,P,F,j,q){return P===2?(D|=50331648,D&=-16777216,D|=b.AttributeData.fromColorRGB([F,j,q])):P===5&&(D&=-50331904,D|=33554432|255&F),D}_extractColor(D,P,F){const j=[0,0,-1,0,0,0];let q=0,W=0;do{if(j[W+q]=D.params[P+W],D.hasSubParams(P+W)){const X=D.getSubParams(P+W);let te=0;do j[1]===5&&(q=1),j[W+te+1+q]=X[te];while(++te<X.length&&te+W+1+q<j.length);break}if(j[1]===5&&W+q>=2||j[1]===2&&W+q>=5)break;j[1]&&(q=1)}while(++W+P<D.length&&W+q<j.length);for(let X=2;X<j.length;++X)j[X]===-1&&(j[X]=0);switch(j[0]){case 38:F.fg=this._updateAttrColor(F.fg,j[1],j[3],j[4],j[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,j[1],j[3],j[4],j[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,j[1],j[3],j[4],j[5])}return W}_processUnderline(D,P){P.extended=P.extended.clone(),(!~D||D>5)&&(D=1),P.extended.underlineStyle=D,P.fg|=268435456,D===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(D){D.fg=o.DEFAULT_ATTR_DATA.fg,D.bg=o.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=D.length;let F;const j=this._curAttrData;for(let q=0;q<P;q++)F=D.params[q],F>=30&&F<=37?(j.fg&=-50331904,j.fg|=16777216|F-30):F>=40&&F<=47?(j.bg&=-50331904,j.bg|=16777216|F-40):F>=90&&F<=97?(j.fg&=-50331904,j.fg|=16777224|F-90):F>=100&&F<=107?(j.bg&=-50331904,j.bg|=16777224|F-100):F===0?this._processSGR0(j):F===1?j.fg|=134217728:F===3?j.bg|=67108864:F===4?(j.fg|=268435456,this._processUnderline(D.hasSubParams(q)?D.getSubParams(q)[0]:1,j)):F===5?j.fg|=536870912:F===7?j.fg|=67108864:F===8?j.fg|=1073741824:F===9?j.fg|=2147483648:F===2?j.bg|=134217728:F===21?this._processUnderline(2,j):F===22?(j.fg&=-134217729,j.bg&=-134217729):F===23?j.bg&=-67108865:F===24?(j.fg&=-268435457,this._processUnderline(0,j)):F===25?j.fg&=-536870913:F===27?j.fg&=-67108865:F===28?j.fg&=-1073741825:F===29?j.fg&=2147483647:F===39?(j.fg&=-67108864,j.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):F===49?(j.bg&=-67108864,j.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?q+=this._extractColor(D,q,j):F===53?j.bg|=1073741824:F===55?j.bg&=-1073741825:F===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):F===100?(j.fg&=-67108864,j.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${P};${F}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const P=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${P};${F}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const P=D.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=P%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(D){const P=D.params[0]||1;let F;return(D.length<2||(F=D.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(D){if(!H(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const P=[],F=D.split(";");for(;F.length>1;){const j=F.shift(),q=F.shift();if(/^\d+$/.exec(j)){const W=parseInt(j);if(re(W))if(q==="?")P.push({type:0,index:W});else{const X=(0,M.parseColor)(q);X&&P.push({type:1,index:W,color:X})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(D){const P=D.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(D,P){this._getCurrentLinkId()&&this._finishHyperlink();const F=D.split(":");let j;const q=F.findIndex(W=>W.startsWith("id="));return q!==-1&&(j=F[q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:j,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,P){const F=D.split(";");for(let j=0;j<F.length&&!(P>=this._specialColors.length);++j,++P)if(F[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const q=(0,M.parseColor)(F[j]);q&&this._onColor.fire([{type:1,index:this._specialColors[P],color:q}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const P=[],F=D.split(";");for(let j=0;j<F.length;++j)if(/^\d+$/.exec(F[j])){const q=parseInt(F[j]);re(q)&&P.push({type:2,index:q})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(T[D[0]],g.CHARSETS[D[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new u.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const F=this._activeBuffer.ybase+this._activeBuffer.y+P,j=this._activeBuffer.lines.get(F);j&&(j.fill(D),j.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,P){const F=this._bufferService.buffer,j=this._optionsService.rawOptions;return(q=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${q}${d.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[j.cursorStyle]-(j.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,P){this._dirtyRowTracker.markRangeDirty(D,P)}}i.InputHandler=K;let Y=class{constructor(J){this._bufferService=J,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(J){J<this.start?this.start=J:J>this.end&&(this.end=J)}markRangeDirty(J,D){J>D&&(z=J,J=D,D=z),J<this.start&&(this.start=J),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function re(J){return 0<=J&&J<256}Y=f([m(0,E.IBufferService)],Y)},844:(_,i)=>{function n(f){for(const m of f)m.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const m=this._disposables.indexOf(f);m!==-1&&this._disposables.splice(m,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var m;this._isDisposed||f===this._value||((m=this._value)==null||m.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=n,i.getDisposeArrayDisposable=function(f){return{dispose:()=>n(f)}}},1505:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(m,d,g){this._data[m]||(this._data[m]={}),this._data[m][d]=g}get(m,d){return this._data[m]?this._data[m][d]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(f,m,d,g,y){this._data.get(f,m)||this._data.set(f,m,new n),this._data.get(f,m).set(d,g,y)}get(f,m,d,g){var y;return(y=this._data.get(f,m))==null?void 0:y.get(d,g)}clear(){this._data.clear()}}},6114:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const n=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const m=n.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(n=this._search(this._getKey(f)),this._array.splice(n,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const m=this._getKey(f);if(m===void 0||(n=this._search(m),n===-1)||this._getKey(this._array[n])!==m)return!1;do if(this._array[n]===f)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===m);return!1}*getKeyIterator(f){if(this._array.length!==0&&(n=this._search(f),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===f))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===f)}forEachByKey(f,m){if(this._array.length!==0&&(n=this._search(f),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===f))do m(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===f)}values(){return[...this._array].values()}_search(f){let m=0,d=this._array.length-1;for(;d>=m;){let g=m+d>>1;const y=this._getKey(this._array[g]);if(y>f)d=g-1;else{if(!(y<f)){for(;g>0&&this._getKey(this._array[g-1])===f;)g--;return g}m=g+1}}return m}}},7226:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=n(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let k=0,v=0,o=y.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),v=Math.max(k,v),h=y.timeRemaining(),1.5*v>h)return o-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-k))}ms`),void this._start();o=h}this.clear()}}class d extends m{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const k=Date.now()+y;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}i.PriorityTaskQueue=d,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:d,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=n(643);i.updateWindowsModeWrappedState=function(m){const d=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),g=d==null?void 0:d.get(m.cols-1),y=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);y&&g&&(y.isWrapped=g[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&g[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new n;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=n;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,g=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=g}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=n(6349),m=n(7226),d=n(3734),g=n(8437),y=n(4634),k=n(511),v=n(643),o=n(4863),h=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(a,u,b){this._hasScrollback=a,this._optionsService=u,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,u){return new g.BufferLine(this._bufferService.cols,this.getNullCell(a),u)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const u=a+this._optionsService.rawOptions.scrollback;return u>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:u}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=g.DEFAULT_ATTR_DATA);let u=this._rows;for(;u--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,u){const b=this.getNullCell(g.DEFAULT_ATTR_DATA);let E=0;const C=this._getCorrectBufferLength(u);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<a)for(let S=0;S<this.lines.length;S++)E+=+this.lines.get(S).resize(a,b);let x=0;if(this._rows<u)for(let S=this._rows;S<u;S++)this.lines.length<u+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(a,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(a,b)));else for(let S=this._rows;S>u;S--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const S=this.lines.length-C;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=C}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,u-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(a,u),this._cols>a))for(let x=0;x<this.lines.length;x++)E+=+this.lines.get(x).resize(a,b);this._cols=a,this._rows=u,this._memoryCleanupQueue.clear(),E>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let u=0;for(;this._memoryCleanupPosition<this.lines.length;)if(u+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),u>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,u){this._cols!==a&&(a>this._cols?this._reflowLarger(a,u):this._reflowSmaller(a,u))}_reflowLarger(a,u){const b=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(b.length>0){const E=(0,y.reflowLargerCreateNewLayout)(this.lines,b);(0,y.reflowLargerApplyNewLayout)(this.lines,E.layout),this._reflowLargerAdjustViewport(a,u,E.countRemoved)}}_reflowLargerAdjustViewport(a,u,b){const E=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=b;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new g.BufferLine(a,E))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(a,u){const b=this.getNullCell(g.DEFAULT_ATTR_DATA),E=[];let C=0;for(let x=this.lines.length-1;x>=0;x--){let S=this.lines.get(x);if(!S||!S.isWrapped&&S.getTrimmedLength()<=a)continue;const M=[S];for(;S.isWrapped&&x>0;)S=this.lines.get(--x),M.unshift(S);const T=this.ybase+this.y;if(T>=x&&T<x+M.length)continue;const R=M[M.length-1].getTrimmedLength(),H=(0,y.reflowSmallerGetNewLineLengths)(M,this._cols,a),A=H.length-M.length;let z;z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const K=[];for(let F=0;F<A;F++){const j=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);K.push(j)}K.length>0&&(E.push({start:x+M.length+C,newLines:K}),C+=K.length),M.push(...K);let Y=H.length-1,re=H[Y];re===0&&(Y--,re=H[Y]);let J=M.length-A-1,D=R;for(;J>=0;){const F=Math.min(D,re);if(M[Y]===void 0)break;if(M[Y].copyCellsFrom(M[J],D-F,re-F,F,!0),re-=F,re===0&&(Y--,re=H[Y]),D-=F,D===0){J--;const j=Math.max(J,0);D=(0,y.getWrappedLineTrimmedLength)(M,j,this._cols)}}for(let F=0;F<M.length;F++)H[F]<a&&M[F].setCell(H[F],b);let P=A-z;for(;P-- >0;)this.ybase===0?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+u-1)}if(E.length>0){const x=[],S=[];for(let Y=0;Y<this.lines.length;Y++)S.push(this.lines.get(Y));const M=this.lines.length;let T=M-1,R=0,H=E[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let Y=Math.min(this.lines.maxLength-1,M+C-1);Y>=0;Y--)if(H&&H.start>T+A){for(let re=H.newLines.length-1;re>=0;re--)this.lines.set(Y--,H.newLines[re]);Y++,x.push({index:T+1,amount:H.newLines.length}),A+=H.newLines.length,H=E[++R]}else this.lines.set(Y,S[T--]);let z=0;for(let Y=x.length-1;Y>=0;Y--)x[Y].index+=z,this.lines.onInsertEmitter.fire(x[Y]),z+=x[Y].amount;const K=Math.max(0,M+C-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}}translateBufferLineToString(a,u,b=0,E){const C=this.lines.get(a);return C?C.translateToString(u,b,E):""}getWrappedRangeForLine(a){let u=a,b=a;for(;u>0&&this.lines.get(u).isWrapped;)u--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:u,last:b}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].line===a&&(this.markers[u].dispose(),this.markers.splice(u--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const u=new o.Marker(a);return this.markers.push(u),u.register(this.lines.onTrim(b=>{u.line-=b,u.line<0&&u.dispose()})),u.register(this.lines.onInsert(b=>{u.line>=b.index&&(u.line+=b.amount)})),u.register(this.lines.onDelete(b=>{u.line>=b.index&&u.line<b.index+b.amount&&u.dispose(),u.line>b.index&&(u.line-=b.amount)})),u.register(u.onDispose(()=>this._removeMarker(u))),u}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=n(3734),m=n(511),d=n(643),g=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let y=0;class k{constructor(o,h,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const u=h||m.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let b=0;b<o;++b)this.setCell(b,u);this.length=o}get(o){const h=this._data[3*o+0],a=2097151&h;return[this._data[3*o+1],2097152&h?this._combined[o]:a?(0,g.stringFromCodePoint)(a):"",h>>22,2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):a]}set(o,h){this._data[3*o+1]=h[d.CHAR_DATA_ATTR_INDEX],h[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=h[1],this._data[3*o+0]=2097152|o|h[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=h[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const h=this._data[3*o+0];return 2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&h}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const h=this._data[3*o+0];return 2097152&h?this._combined[o]:2097151&h?(0,g.stringFromCodePoint)(2097151&h):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,h){return y=3*o,h.content=this._data[y+0],h.fg=this._data[y+1],h.bg=this._data[y+2],2097152&h.content&&(h.combinedData=this._combined[o]),268435456&h.bg&&(h.extended=this._extendedAttrs[o]),h}setCell(o,h){2097152&h.content&&(this._combined[o]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[o]=h.extended),this._data[3*o+0]=h.content,this._data[3*o+1]=h.fg,this._data[3*o+2]=h.bg}setCellFromCodepoint(o,h,a,u){268435456&u.bg&&(this._extendedAttrs[o]=u.extended),this._data[3*o+0]=h|a<<22,this._data[3*o+1]=u.fg,this._data[3*o+2]=u.bg}addCodepointToCell(o,h,a){let u=this._data[3*o+0];2097152&u?this._combined[o]+=(0,g.stringFromCodePoint)(h):2097151&u?(this._combined[o]=(0,g.stringFromCodePoint)(2097151&u)+(0,g.stringFromCodePoint)(h),u&=-2097152,u|=2097152):u=h|4194304,a&&(u&=-12582913,u|=a<<22),this._data[3*o+0]=u}insertCells(o,h,a){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,a),h<this.length-o){const u=new m.CellData;for(let b=this.length-o-h-1;b>=0;--b)this.setCell(o+h+b,this.loadCell(o+b,u));for(let b=0;b<h;++b)this.setCell(o+b,a)}else for(let u=o;u<this.length;++u)this.setCell(u,a);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,a)}deleteCells(o,h,a){if(o%=this.length,h<this.length-o){const u=new m.CellData;for(let b=0;b<this.length-o-h;++b)this.setCell(o+b,this.loadCell(o+h+b,u));for(let b=this.length-h;b<this.length;++b)this.setCell(b,a)}else for(let u=o;u<this.length;++u)this.setCell(u,a);o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,a),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodepoint(o,0,1,a)}replaceCells(o,h,a,u=!1){if(u)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodepoint(o-1,0,1,a),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodepoint(h,0,1,a);o<h&&o<this.length;)this.isProtected(o)||this.setCell(o,a),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,a),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h,0,1,a);o<h&&o<this.length;)this.setCell(o++,a)}resize(o,h){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const u=new Uint32Array(a);u.set(this._data),this._data=u}for(let u=this.length;u<o;++u)this.setCell(u,h)}else{this._data=this._data.subarray(0,a);const u=Object.keys(this._combined);for(let E=0;E<u.length;E++){const C=parseInt(u[E],10);C>=o&&delete this._combined[C]}const b=Object.keys(this._extendedAttrs);for(let E=0;E<b.length;E++){const C=parseInt(b[E],10);C>=o&&delete this._extendedAttrs[C]}}return this.length=o,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,h=!1){if(h)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,o);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const h in o._combined)this._combined[h]=o._combined[h];this._extendedAttrs={};for(const h in o._extendedAttrs)this._extendedAttrs[h]=o._extendedAttrs[h];this.isWrapped=o.isWrapped}clone(){const o=new k(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const h in this._combined)o._combined[h]=this._combined[h];for(const h in this._extendedAttrs)o._extendedAttrs[h]=this._extendedAttrs[h];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,h,a,u,b){const E=o._data;if(b)for(let x=u-1;x>=0;x--){for(let S=0;S<3;S++)this._data[3*(a+x)+S]=E[3*(h+x)+S];268435456&E[3*(h+x)+2]&&(this._extendedAttrs[a+x]=o._extendedAttrs[h+x])}else for(let x=0;x<u;x++){for(let S=0;S<3;S++)this._data[3*(a+x)+S]=E[3*(h+x)+S];268435456&E[3*(h+x)+2]&&(this._extendedAttrs[a+x]=o._extendedAttrs[h+x])}const C=Object.keys(o._combined);for(let x=0;x<C.length;x++){const S=parseInt(C[x],10);S>=h&&(this._combined[S-h+a]=o._combined[S])}}translateToString(o,h,a,u){h=h??0,a=a??this.length,o&&(a=Math.min(a,this.getTrimmedLength())),u&&(u.length=0);let b="";for(;h<a;){const E=this._data[3*h+0],C=2097151&E,x=2097152&E?this._combined[h]:C?(0,g.stringFromCodePoint)(C):d.WHITESPACE_CELL_CHAR;if(b+=x,u)for(let S=0;S<x.length;++S)u.push(h);h+=E>>22||1}return u&&u.push(h),b}}i.BufferLine=k},4841:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,f){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return f*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(_,i)=>{function n(f,m,d){if(m===f.length-1)return f[m].getTrimmedLength();const g=!f[m].hasContent(d-1)&&f[m].getWidth(d-1)===1,y=f[m+1].getWidth(0)===2;return g&&y?d-1:d}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,m,d,g,y){const k=[];for(let v=0;v<f.length-1;v++){let o=v,h=f.get(++o);if(!h.isWrapped)continue;const a=[f.get(v)];for(;o<f.length&&h.isWrapped;)a.push(h),h=f.get(++o);if(g>=v&&g<o){v+=a.length-1;continue}let u=0,b=n(a,u,m),E=1,C=0;for(;E<a.length;){const S=n(a,E,m),M=S-C,T=d-b,R=Math.min(M,T);a[u].copyCellsFrom(a[E],C,b,R,!1),b+=R,b===d&&(u++,b=0),C+=R,C===S&&(E++,C=0),b===0&&u!==0&&a[u-1].getWidth(d-1)===2&&(a[u].copyCellsFrom(a[u-1],d-1,b++,1,!1),a[u-1].setCell(d-1,y))}a[u].replaceCells(b,d,y);let x=0;for(let S=a.length-1;S>0&&(S>u||a[S].getTrimmedLength()===0);S--)x++;x>0&&(k.push(v+a.length-x),k.push(x)),v+=a.length-1}return k},i.reflowLargerCreateNewLayout=function(f,m){const d=[];let g=0,y=m[g],k=0;for(let v=0;v<f.length;v++)if(y===v){const o=m[++g];f.onDeleteEmitter.fire({index:v-k,amount:o}),v+=o-1,k+=o,y=m[++g]}else d.push(v);return{layout:d,countRemoved:k}},i.reflowLargerApplyNewLayout=function(f,m){const d=[];for(let g=0;g<m.length;g++)d.push(f.get(m[g]));for(let g=0;g<d.length;g++)f.set(g,d[g]);f.length=m.length},i.reflowSmallerGetNewLineLengths=function(f,m,d){const g=[],y=f.map((h,a)=>n(f,a,m)).reduce((h,a)=>h+a);let k=0,v=0,o=0;for(;o<y;){if(y-o<d){g.push(y-o);break}k+=d;const h=n(f,v,m);k>h&&(k-=h,v++);const a=f[v].getWidth(k-1)===2;a&&k--;const u=a?d-1:d;g.push(u),o+=u}return g},i.getWrappedLineTrimmedLength=n},5295:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=n(8460),m=n(844),d=n(9092);class g extends m.Disposable{constructor(k,v){super(),this._optionsService=k,this._bufferService=v,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,v){this._normal.resize(k,v),this._alt.resize(k,v),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}i.BufferSet=g},511:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=n(482),m=n(643),d=n(3734);class g extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const v=new g;return v.setFromCharData(k),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(k[m.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(k[m.CHAR_DATA_CHAR_INDEX].length===2){const o=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const h=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|k[m.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[m.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=k[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=n(8460),m=n(844);class d{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}i.Marker=d,d._nextId=1},7116:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(_,i)=>{var n,f,m;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(n||(i.C0=n={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(f||(i.C1=f={})),function(d){d.ST=`${n.ESC}\\`}(m||(i.C1_ESCAPED=m={}))},7399:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=n(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(d,g,y,k){const v={type:0,cancel:!1,key:void 0},o=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?v.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?v.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?v.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(v.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:v.key=d.ctrlKey?"\b":f.C0.DEL,d.altKey&&(v.key=f.C0.ESC+v.key);break;case 9:if(d.shiftKey){v.key=f.C0.ESC+"[Z";break}v.key=f.C0.HT,v.cancel=!0;break;case 13:v.key=d.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,v.cancel=!0;break;case 27:v.key=f.C0.ESC,d.altKey&&(v.key=f.C0.ESC+f.C0.ESC),v.cancel=!0;break;case 37:if(d.metaKey)break;o?(v.key=f.C0.ESC+"[1;"+(o+1)+"D",v.key===f.C0.ESC+"[1;3D"&&(v.key=f.C0.ESC+(y?"b":"[1;5D"))):v.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(d.metaKey)break;o?(v.key=f.C0.ESC+"[1;"+(o+1)+"C",v.key===f.C0.ESC+"[1;3C"&&(v.key=f.C0.ESC+(y?"f":"[1;5C"))):v.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(d.metaKey)break;o?(v.key=f.C0.ESC+"[1;"+(o+1)+"A",y||v.key!==f.C0.ESC+"[1;3A"||(v.key=f.C0.ESC+"[1;5A")):v.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(d.metaKey)break;o?(v.key=f.C0.ESC+"[1;"+(o+1)+"B",y||v.key!==f.C0.ESC+"[1;3B"||(v.key=f.C0.ESC+"[1;5B")):v.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(v.key=f.C0.ESC+"[2~");break;case 46:v.key=o?f.C0.ESC+"[3;"+(o+1)+"~":f.C0.ESC+"[3~";break;case 36:v.key=o?f.C0.ESC+"[1;"+(o+1)+"H":g?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:v.key=o?f.C0.ESC+"[1;"+(o+1)+"F":g?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:d.shiftKey?v.type=2:d.ctrlKey?v.key=f.C0.ESC+"[5;"+(o+1)+"~":v.key=f.C0.ESC+"[5~";break;case 34:d.shiftKey?v.type=3:d.ctrlKey?v.key=f.C0.ESC+"[6;"+(o+1)+"~":v.key=f.C0.ESC+"[6~";break;case 112:v.key=o?f.C0.ESC+"[1;"+(o+1)+"P":f.C0.ESC+"OP";break;case 113:v.key=o?f.C0.ESC+"[1;"+(o+1)+"Q":f.C0.ESC+"OQ";break;case 114:v.key=o?f.C0.ESC+"[1;"+(o+1)+"R":f.C0.ESC+"OR";break;case 115:v.key=o?f.C0.ESC+"[1;"+(o+1)+"S":f.C0.ESC+"OS";break;case 116:v.key=o?f.C0.ESC+"[15;"+(o+1)+"~":f.C0.ESC+"[15~";break;case 117:v.key=o?f.C0.ESC+"[17;"+(o+1)+"~":f.C0.ESC+"[17~";break;case 118:v.key=o?f.C0.ESC+"[18;"+(o+1)+"~":f.C0.ESC+"[18~";break;case 119:v.key=o?f.C0.ESC+"[19;"+(o+1)+"~":f.C0.ESC+"[19~";break;case 120:v.key=o?f.C0.ESC+"[20;"+(o+1)+"~":f.C0.ESC+"[20~";break;case 121:v.key=o?f.C0.ESC+"[21;"+(o+1)+"~":f.C0.ESC+"[21~";break;case 122:v.key=o?f.C0.ESC+"[23;"+(o+1)+"~":f.C0.ESC+"[23~";break;case 123:v.key=o?f.C0.ESC+"[24;"+(o+1)+"~":f.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(y&&!k||!d.altKey||d.metaKey)!y||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?v.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(v.key=f.C0.US),d.key==="@"&&(v.key=f.C0.NUL)):d.keyCode===65&&(v.type=1);else{const h=m[d.keyCode],a=h==null?void 0:h[d.shiftKey?1:0];if(a)v.key=f.C0.ESC+a;else if(d.keyCode>=65&&d.keyCode<=90){const u=d.ctrlKey?d.keyCode-64:d.keyCode+32;let b=String.fromCharCode(u);d.shiftKey&&(b=b.toUpperCase()),v.key=f.C0.ESC+b}else if(d.keyCode===32)v.key=f.C0.ESC+(d.ctrlKey?f.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let u=d.code.slice(3,4);d.shiftKey||(u=u.toLowerCase()),v.key=f.C0.ESC+u,v.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?v.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?v.key=f.C0.NUL:d.keyCode>=51&&d.keyCode<=55?v.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?v.key=f.C0.DEL:d.keyCode===219?v.key=f.C0.ESC:d.keyCode===220?v.key=f.C0.FS:d.keyCode===221&&(v.key=f.C0.GS)}return v}},482:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,f=0,m=n.length){let d="";for(let g=f;g<m;++g){let y=n[g];y>65535?(y-=65536,d+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):d+=String.fromCharCode(y)}return d},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,f){const m=n.length;if(!m)return 0;let d=0,g=0;if(this._interim){const y=n.charCodeAt(g++);56320<=y&&y<=57343?f[d++]=1024*(this._interim-55296)+y-56320+65536:(f[d++]=this._interim,f[d++]=y),this._interim=0}for(let y=g;y<m;++y){const k=n.charCodeAt(y);if(55296<=k&&k<=56319){if(++y>=m)return this._interim=k,d;const v=n.charCodeAt(y);56320<=v&&v<=57343?f[d++]=1024*(k-55296)+v-56320+65536:(f[d++]=k,f[d++]=v)}else k!==65279&&(f[d++]=k)}return d}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,f){const m=n.length;if(!m)return 0;let d,g,y,k,v=0,o=0,h=0;if(this.interim[0]){let b=!1,E=this.interim[0];E&=(224&E)==192?31:(240&E)==224?15:7;let C,x=0;for(;(C=63&this.interim[++x])&&x<4;)E<<=6,E|=C;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=S-x;for(;h<M;){if(h>=m)return 0;if(C=n[h++],(192&C)!=128){h--,b=!0;break}this.interim[x++]=C,E<<=6,E|=63&C}b||(S===2?E<128?h--:f[v++]=E:S===3?E<2048||E>=55296&&E<=57343||E===65279||(f[v++]=E):E<65536||E>1114111||(f[v++]=E)),this.interim.fill(0)}const a=m-4;let u=h;for(;u<m;){for(;!(!(u<a)||128&(d=n[u])||128&(g=n[u+1])||128&(y=n[u+2])||128&(k=n[u+3]));)f[v++]=d,f[v++]=g,f[v++]=y,f[v++]=k,u+=4;if(d=n[u++],d<128)f[v++]=d;else if((224&d)==192){if(u>=m)return this.interim[0]=d,v;if(g=n[u++],(192&g)!=128){u--;continue}if(o=(31&d)<<6|63&g,o<128){u--;continue}f[v++]=o}else if((240&d)==224){if(u>=m)return this.interim[0]=d,v;if(g=n[u++],(192&g)!=128){u--;continue}if(u>=m)return this.interim[0]=d,this.interim[1]=g,v;if(y=n[u++],(192&y)!=128){u--;continue}if(o=(15&d)<<12|(63&g)<<6|63&y,o<2048||o>=55296&&o<=57343||o===65279)continue;f[v++]=o}else if((248&d)==240){if(u>=m)return this.interim[0]=d,v;if(g=n[u++],(192&g)!=128){u--;continue}if(u>=m)return this.interim[0]=d,this.interim[1]=g,v;if(y=n[u++],(192&y)!=128){u--;continue}if(u>=m)return this.interim[0]=d,this.interim[1]=g,this.interim[2]=y,v;if(k=n[u++],(192&k)!=128){u--;continue}if(o=(7&d)<<18|(63&g)<<12|(63&y)<<6|63&k,o<65536||o>1114111)continue;f[v++]=o}}return v}}},225:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=n(1480),m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;i.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let y=0;y<m.length;++y)g.fill(0,m[y][0],m[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?g[y]:function(k,v){let o,h=0,a=v.length-1;if(k<v[0][0]||k>v[a][1])return!1;for(;a>=h;)if(o=h+a>>1,k>v[o][1])h=o+1;else{if(!(k<v[o][0]))return!0;a=o-1}return!1}(y,d)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,k){let v=this.wcwidth(y),o=v===0&&k!==0;if(o){const h=f.UnicodeService.extractWidth(k);h===0?o=!1:h>v&&(v=h)}return f.UnicodeService.createPropertyValue(0,v,o)}}},5981:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=n(8460),m=n(844);class d extends m.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k)}_innerWrite(y=0,k=!0){const v=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],h=this._action(o,k);if(h){const u=b=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(v,b);return void h.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(u)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=d},5941:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function m(d,g){const y=d.toString(16),k=y.length<2?"0"+y:y;switch(g){case 4:return y[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}i.parseColor=function(d){if(!d)return;let g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const y=n.exec(g);if(y){const k=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/k*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/k*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/k*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),f.exec(g)&&[3,6,9,12].includes(g.length))){const y=g.length/3,k=[0,0,0];for(let v=0;v<3;++v){const o=parseInt(g.slice(y*v,y*v+y),16);k[v]=y===1?o<<4:y===2?o:y===3?o>>4:o>>8}return k}},i.toRgbString=function(d,g=16){const[y,k,v]=d;return`rgb:${m(y,g)}/${m(k,g)}/${m(v,g)}`}},5770:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=n(482),m=n(8742),d=n(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(k,v){this._handlers[k]===void 0&&(this._handlers[k]=[]);const o=this._handlers[k];return o.push(v),{dispose:()=>{const h=o.indexOf(v);h!==-1&&o.splice(h,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(k,v){if(this.reset(),this._ident=k,this._active=this._handlers[k]||g,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(k,v,o){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(k,v,o);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(k,v,o))}unhook(k,v=!0){if(this._active.length){let o=!1,h=this._active.length-1,a=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,o=v,a=this._stack.fallThrough,this._stack.paused=!1),!a&&o===!1){for(;h>=0&&(o=this._active[h].unhook(k),o!==!0);h--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,o;h--}for(;h>=0;h--)if(o=this._active[h].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",k);this._active=g,this._ident=0}};const y=new m.Params;y.addParam(0),i.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=y,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():y,this._data="",this._hitLimit=!1}put(k,v,o){this._hitLimit||(this._data+=(0,f.utf32ToString)(k,v,o),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let v=!1;if(this._hitLimit)v=!1;else if(k&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(o=>(this._params=y,this._data="",this._hitLimit=!1,o));return this._params=y,this._data="",this._hitLimit=!1,v}}},2015:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=n(844),m=n(8742),d=n(6242),g=n(6351);class y{constructor(h){this.table=new Uint8Array(h)}setDefault(h,a){this.table.fill(h<<4|a)}add(h,a,u,b){this.table[a<<8|h]=u<<4|b}addMany(h,a,u,b){for(let E=0;E<h.length;E++)this.table[a<<8|h[E]]=u<<4|b}}i.TransitionTable=y;const k=160;i.VT500_TRANSITION_TABLE=function(){const o=new y(4095),h=Array.apply(null,Array(256)).map((x,S)=>S),a=(x,S)=>h.slice(x,S),u=a(32,127),b=a(0,24);b.push(25),b.push.apply(b,a(28,32));const E=a(0,14);let C;for(C in o.setDefault(1,0),o.addMany(u,0,2,0),E)o.addMany([24,26,153,154],C,3,0),o.addMany(a(128,144),C,3,0),o.addMany(a(144,152),C,3,0),o.add(156,C,0,0),o.add(27,C,11,1),o.add(157,C,4,8),o.addMany([152,158,159],C,0,7),o.add(155,C,11,3),o.add(144,C,11,9);return o.addMany(b,0,3,0),o.addMany(b,1,3,1),o.add(127,1,0,1),o.addMany(b,8,0,8),o.addMany(b,3,3,3),o.add(127,3,0,3),o.addMany(b,4,3,4),o.add(127,4,0,4),o.addMany(b,6,3,6),o.addMany(b,5,3,5),o.add(127,5,0,5),o.addMany(b,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(u,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(a(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(u,7,0,7),o.addMany(b,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(a(64,127),3,7,0),o.addMany(a(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(a(48,60),4,8,4),o.addMany(a(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(a(32,64),6,0,6),o.add(127,6,0,6),o.addMany(a(64,127),6,0,0),o.addMany(a(32,48),3,9,5),o.addMany(a(32,48),5,9,5),o.addMany(a(48,64),5,0,6),o.addMany(a(64,127),5,7,0),o.addMany(a(32,48),4,9,5),o.addMany(a(32,48),1,9,2),o.addMany(a(32,48),2,9,2),o.addMany(a(48,127),2,10,0),o.addMany(a(48,80),1,10,0),o.addMany(a(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(a(96,127),1,10,0),o.add(80,1,11,9),o.addMany(b,9,0,9),o.add(127,9,0,9),o.addMany(a(28,32),9,0,9),o.addMany(a(32,48),9,9,12),o.addMany(a(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(b,11,0,11),o.addMany(a(32,128),11,0,11),o.addMany(a(28,32),11,0,11),o.addMany(b,10,0,10),o.add(127,10,0,10),o.addMany(a(28,32),10,0,10),o.addMany(a(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(a(32,48),10,9,12),o.addMany(b,12,0,12),o.add(127,12,0,12),o.addMany(a(28,32),12,0,12),o.addMany(a(32,48),12,9,12),o.addMany(a(48,64),12,0,11),o.addMany(a(64,127),12,12,13),o.addMany(a(64,127),10,12,13),o.addMany(a(64,127),9,12,13),o.addMany(b,13,13,13),o.addMany(u,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(k,0,2,0),o.add(k,8,5,8),o.add(k,6,0,6),o.add(k,11,0,11),o.add(k,13,13,13),o}();class v extends f.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(a,u,b)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,u)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,a=[64,126]){let u=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(u=h.prefix.charCodeAt(0),u&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let E=0;E<h.intermediates.length;++E){const C=h.intermediates.charCodeAt(E);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=C}}if(h.final.length!==1)throw new Error("final must be a single byte");const b=h.final.charCodeAt(0);if(a[0]>b||b>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return u<<=8,u|=b,u}identToString(h){const a=[];for(;h;)a.push(String.fromCharCode(255&h)),h>>=8;return a.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,a){const u=this._identifier(h,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);const b=this._escHandlers[u];return b.push(a),{dispose:()=>{const E=b.indexOf(a);E!==-1&&b.splice(E,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,a){this._executeHandlers[h.charCodeAt(0)]=a}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,a){const u=this._identifier(h);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);const b=this._csiHandlers[u];return b.push(a),{dispose:()=>{const E=b.indexOf(a);E!==-1&&b.splice(E,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,a){return this._dcsParser.registerHandler(this._identifier(h),a)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,a){return this._oscParser.registerHandler(h,a)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,a,u,b,E){this._parseStack.state=h,this._parseStack.handlers=a,this._parseStack.handlerPos=u,this._parseStack.transition=b,this._parseStack.chunkPos=E}parse(h,a,u){let b,E=0,C=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let M=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&M>-1){for(;M>=0&&(b=S[M](this._params),b!==!0);M--)if(b instanceof Promise)return this._parseStack.handlerPos=M,b}this._parseStack.handlers=[];break;case 4:if(u===!1&&M>-1){for(;M>=0&&(b=S[M](),b!==!0);M--)if(b instanceof Promise)return this._parseStack.handlerPos=M,b}this._parseStack.handlers=[];break;case 6:if(E=h[this._parseStack.chunkPos],b=this._dcsParser.unhook(E!==24&&E!==26,u),b)return b;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(E=h[this._parseStack.chunkPos],b=this._oscParser.end(E!==24&&E!==26,u),b)return b;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=x;S<a;++S){switch(E=h[S],C=this._transitions.table[this.currentState<<8|(E<160?E:k)],C>>4){case 2:for(let A=S+1;;++A){if(A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}}break;case 3:this._executeHandlers[E]?this._executeHandlers[E]():this._executeHandlerFb(E),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:E,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const M=this._csiHandlers[this._collect<<8|E];let T=M?M.length-1:-1;for(;T>=0&&(b=M[T](this._params),b!==!0);T--)if(b instanceof Promise)return this._preserveStack(3,M,T,C,S),b;T<0&&this._csiHandlerFb(this._collect<<8|E,this._params),this.precedingJoinState=0;break;case 8:do switch(E){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(E-48)}while(++S<a&&(E=h[S])>47&&E<60);S--;break;case 9:this._collect<<=8,this._collect|=E;break;case 10:const R=this._escHandlers[this._collect<<8|E];let H=R?R.length-1:-1;for(;H>=0&&(b=R[H](),b!==!0);H--)if(b instanceof Promise)return this._preserveStack(4,R,H,C,S),b;H<0&&this._escHandlerFb(this._collect<<8|E),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|E,this._params);break;case 13:for(let A=S+1;;++A)if(A>=a||(E=h[A])===24||E===26||E===27||E>127&&E<k){this._dcsParser.put(h,S,A),S=A-1;break}break;case 14:if(b=this._dcsParser.unhook(E!==24&&E!==26),b)return this._preserveStack(6,[],0,C,S),b;E===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=S+1;;A++)if(A>=a||(E=h[A])<32||E>127&&E<k){this._oscParser.put(h,S,A),S=A-1;break}break;case 6:if(b=this._oscParser.end(E!==24&&E!==26),b)return this._preserveStack(5,[],0,C,S),b;E===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}i.EscapeSequenceParser=v},6242:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=n(5770),m=n(482),d=[];i.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,y){this._handlers[g]===void 0&&(this._handlers[g]=[]);const k=this._handlers[g];return k.push(y),{dispose:()=>{const v=k.indexOf(y);v!==-1&&k.splice(v,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,y,k){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(g,y,k);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(g,y,k))}start(){this.reset(),this._state=1}put(g,y,k){if(this._state!==3){if(this._state===1)for(;y<k;){const v=g[y++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&k-y>0&&this._put(g,y,k)}}end(g,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,v=this._active.length-1,o=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,k=y,o=this._stack.fallThrough,this._stack.paused=!1),!o&&k===!1){for(;v>=0&&(k=this._active[v].end(g),k!==!0);v--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,k;v--}for(;v>=0;v--)if(k=this._active[v].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",g);this._active=d,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,y,k){this._hitLimit||(this._data+=(0,m.utf32ToString)(g,y,k),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let y=!1;if(this._hitLimit)y=!1;else if(g&&(y=this._handler(this._data),y instanceof Promise))return y.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,y}}},8742:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class f{static fromArray(d){const g=new f;if(!d.length)return g;for(let y=Array.isArray(d[0])?1:0;y<d.length;++y){const k=d[y];if(Array.isArray(k))for(let v=0;v<k.length;++v)g.addSubParam(k[v]);else g.addParam(k)}return g}constructor(d=32,g=32){if(this.maxLength=d,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new f(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let g=0;g<this.length;++g){d.push(this.params[g]);const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&d.push(Array.prototype.slice.call(this._subParams,y,k))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>n?n:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>n?n:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const g=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];return y-g>0?this._subParams.subarray(g,y):null}getSubParamsAll(){const d={};for(let g=0;g<this.length;++g){const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&(d[g]=this._subParams.slice(y,k))}return d}addDigit(d){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,k=y[g-1];y[g-1]=~k?Math.min(10*k+d,n):d}}i.Params=f},5741:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,f){const m={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(m),f.dispose=()=>this._wrappedAddonDispose(m),f.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let f=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===n){f=m;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(f,1)}}},8771:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=n(3785),m=n(511);i.BufferApiView=class{constructor(d,g){this._buffer=d,this.type=g}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const g=this._buffer.lines.get(d);if(g)return new f.BufferLineApiView(g)}getNullCell(){return new m.CellData}}},3785:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=n(511);i.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,d){if(!(m<0||m>=this._line.length))return d?(this._line.loadCell(m,d),d):this._line.loadCell(m,new f.CellData)}translateToString(m,d,g){return this._line.translateToString(m,d,g)}}},8285:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=n(8771),m=n(8460),d=n(844);class g extends d.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,f){return this._core.registerCsiHandler(n,m=>f(m.toArray()))}addCsiHandler(n,f){return this.registerCsiHandler(n,f)}registerDcsHandler(n,f){return this._core.registerDcsHandler(n,(m,d)=>f(m,d.toArray()))}addDcsHandler(n,f){return this.registerDcsHandler(n,f)}registerEscHandler(n,f){return this._core.registerEscHandler(n,f)}addEscHandler(n,f){return this.registerEscHandler(n,f)}registerOscHandler(n,f){return this._core.registerOscHandler(n,f)}addOscHandler(n,f){return this.registerOscHandler(n,f)}}},7090:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(_,i,n){var f=this&&this.__decorate||function(o,h,a,u){var b,E=arguments.length,C=E<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,h,a,u);else for(var x=o.length-1;x>=0;x--)(b=o[x])&&(C=(E<3?b(C):E>3?b(h,a,C):b(h,a))||C);return E>3&&C&&Object.defineProperty(h,a,C),C},m=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const d=n(8460),g=n(844),y=n(5295),k=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(o,this))}resize(o,h){this.cols=o,this.rows=h,this.buffers.resize(o,h),this._onResize.fire({cols:o,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,h=!1){const a=this.buffer;let u;u=this._cachedBlankLine,u&&u.length===this.cols&&u.getFg(0)===o.fg&&u.getBg(0)===o.bg||(u=a.getBlankLine(o,h),this._cachedBlankLine=u),u.isWrapped=h;const b=a.ybase+a.scrollTop,E=a.ybase+a.scrollBottom;if(a.scrollTop===0){const C=a.lines.isFull;E===a.lines.length-1?C?a.lines.recycle().copyFrom(u):a.lines.push(u.clone()):a.lines.splice(E+1,0,u.clone()),C?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const C=E-b+1;a.lines.shiftElements(b+1,C-1,-1),a.lines.set(E,u.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(o,h,a){const u=this.buffer;if(o<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else o+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);const b=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+o,u.ybase),0),b!==u.ydisp&&(h||this._onScroll.fire(u.ydisp))}};i.BufferService=v=f([m(0,k.IOptionsService)],v)},7994:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,f){this._charsets[n]=f,this.glevel===n&&(this.charset=f)}}},1753:function(_,i,n){var f=this&&this.__decorate||function(u,b,E,C){var x,S=arguments.length,M=S<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(u,b,E,C);else for(var T=u.length-1;T>=0;T--)(x=u[T])&&(M=(S<3?x(M):S>3?x(b,E,M):x(b,E))||M);return S>3&&M&&Object.defineProperty(b,E,M),M},m=this&&this.__param||function(u,b){return function(E,C){b(E,C,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const d=n(2585),g=n(8460),y=n(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:u=>u.button!==4&&u.action===1&&(u.ctrl=!1,u.alt=!1,u.shift=!1,!0)},VT200:{events:19,restrict:u=>u.action!==32},DRAG:{events:23,restrict:u=>u.action!==32||u.button!==3},ANY:{events:31,restrict:u=>!0}};function v(u,b){let E=(u.ctrl?16:0)|(u.shift?4:0)|(u.alt?8:0);return u.button===4?(E|=64,E|=u.action):(E|=3&u.button,4&u.button&&(E|=64),8&u.button&&(E|=128),u.action===32?E|=32:u.action!==0||b||(E|=3)),E}const o=String.fromCharCode,h={DEFAULT:u=>{const b=[v(u,!1)+32,u.col+32,u.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${o(b[0])}${o(b[1])}${o(b[2])}`},SGR:u=>{const b=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${v(u,!0)};${u.col};${u.row}${b}`},SGR_PIXELS:u=>{const b=u.action===0&&u.button!==4?"m":"M";return`\x1B[<${v(u,!0)};${u.x};${u.y}${b}`}};let a=i.CoreMouseService=class extends y.Disposable{constructor(u,b){super(),this._bufferService=u,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const E of Object.keys(k))this.addProtocol(E,k[E]);for(const E of Object.keys(h))this.addEncoding(E,h[E]);this.reset()}addProtocol(u,b){this._protocols[u]=b}addEncoding(u,b){this._encodings[u]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(u){if(!this._protocols[u])throw new Error(`unknown protocol "${u}"`);this._activeProtocol=u,this._onProtocolChange.fire(this._protocols[u].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(u){if(!this._encodings[u])throw new Error(`unknown encoding "${u}"`);this._activeEncoding=u}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(u){if(u.col<0||u.col>=this._bufferService.cols||u.row<0||u.row>=this._bufferService.rows||u.button===4&&u.action===32||u.button===3&&u.action!==32||u.button!==4&&(u.action===2||u.action===3)||(u.col++,u.row++,u.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,u,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(u))return!1;const b=this._encodings[this._activeEncoding](u);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=u,!0}explainEvents(u){return{down:!!(1&u),up:!!(2&u),drag:!!(4&u),move:!!(8&u),wheel:!!(16&u)}}_equalEvents(u,b,E){if(E){if(u.x!==b.x||u.y!==b.y)return!1}else if(u.col!==b.col||u.row!==b.row)return!1;return u.button===b.button&&u.action===b.action&&u.ctrl===b.ctrl&&u.alt===b.alt&&u.shift===b.shift}};i.CoreMouseService=a=f([m(0,d.IBufferService),m(1,d.ICoreService)],a)},6975:function(_,i,n){var f=this&&this.__decorate||function(a,u,b,E){var C,x=arguments.length,S=x<3?u:E===null?E=Object.getOwnPropertyDescriptor(u,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,u,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(u,b,S):C(u,b))||S);return x>3&&S&&Object.defineProperty(u,b,S),S},m=this&&this.__param||function(a,u){return function(b,E){u(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const d=n(1439),g=n(8460),y=n(844),k=n(2585),v=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=i.CoreService=class extends y.Disposable{constructor(a,u,b){super(),this._bufferService=a,this._logService=u,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(o)}reset(){this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(o)}triggerDataEvent(a,u=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;u&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),u&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(E=>E.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(u=>u.charCodeAt(0))),this._onBinary.fire(a))}};i.CoreService=h=f([m(0,k.IBufferService),m(1,k.ILogService),m(2,k.IOptionsService)],h)},9074:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=n(8055),m=n(8460),d=n(844),g=n(6106);let y=0,k=0;class v extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(a=>a==null?void 0:a.marker.line),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const u=new o(a);if(u){const b=u.marker.onDispose(()=>u.dispose());u.onDispose(()=>{u&&(this._decorations.delete(u)&&this._onDecorationRemoved.fire(u),b.dispose())}),this._decorations.insert(u),this._onDecorationRegistered.fire(u)}return u}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,u,b){let E=0,C=0;for(const x of this._decorations.getKeyIterator(u))E=x.options.x??0,C=E+(x.options.width??1),a>=E&&a<C&&(!b||(x.options.layer??"bottom")===b)&&(yield x)}forEachDecorationAtCell(a,u,b,E){this._decorations.forEachByKey(u,C=>{y=C.options.x??0,k=y+(C.options.width??1),a>=y&&a<k&&(!b||(C.options.layer??"bottom")===b)&&E(C)})}}i.DecorationService=v;class o extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=n(2585),m=n(8343);class d{constructor(...y){this._entries=new Map;for(const[k,v]of y)this.set(k,v)}set(y,k){const v=this._entries.get(y);return this._entries.set(y,k),v}forEach(y){for(const[k,v]of this._entries.entries())y(k,v)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}i.ServiceCollection=d,i.InstantiationService=class{constructor(){this._services=new d,this._services.set(f.IInstantiationService,this)}setService(g,y){this._services.set(g,y)}getService(g){return this._services.get(g)}createInstance(g,...y){const k=(0,m.getServiceDependencies)(g).sort((h,a)=>h.index-a.index),v=[];for(const h of k){const a=this._services.get(h.id);if(!a)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${h.id}.`);v.push(a)}const o=k.length>0?k[0].index:y.length;if(y.length!==o)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${o+1} conflicts with ${y.length} static arguments`);return new g(...y,...v)}}},7866:function(_,i,n){var f=this&&this.__decorate||function(o,h,a,u){var b,E=arguments.length,C=E<3?h:u===null?u=Object.getOwnPropertyDescriptor(h,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,h,a,u);else for(var x=o.length-1;x>=0;x--)(b=o[x])&&(C=(E<3?b(C):E>3?b(h,a,C):b(h,a))||C);return E>3&&C&&Object.defineProperty(h,a,C),C},m=this&&this.__param||function(o,h){return function(a,u){h(a,u,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const d=n(844),g=n(2585),y={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let k,v=i.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,a){this._evalLazyOptionalParams(a),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...a)}trace(o,...h){var a;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.trace.bind(this._optionsService.options.logger))??console.log,o,h)}debug(o,...h){var a;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.debug.bind(this._optionsService.options.logger))??console.log,o,h)}info(o,...h){var a;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.info.bind(this._optionsService.options.logger))??console.info,o,h)}warn(o,...h){var a;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.warn.bind(this._optionsService.options.logger))??console.warn,o,h)}error(o,...h){var a;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.error.bind(this._optionsService.options.logger))??console.error,o,h)}};i.LogService=v=f([m(0,g.IOptionsService)],v),i.setTraceLogger=function(o){k=o},i.traceCall=function(o,h,a){if(typeof a.value!="function")throw new Error("not supported");const u=a.value;a.value=function(...b){if(k.logLevel!==g.LogLevelEnum.TRACE)return u.apply(this,b);k.trace(`GlyphRenderer#${u.name}(${b.map(C=>JSON.stringify(C)).join(", ")})`);const E=u.apply(this,b);return k.trace(`GlyphRenderer#${u.name} return`,E),E}}},7302:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=n(8460),m=n(844),d=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends m.Disposable{constructor(v){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o={...i.DEFAULT_OPTIONS};for(const h in v)if(h in o)try{const a=v[h];o[h]=this._sanitizeAndValidateOption(h,a)}catch(a){console.error(a)}this.rawOptions=o,this.options={...o},this._setupOptions(),this.register((0,m.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,o){return this.onOptionChange(h=>{h===v&&o(this.rawOptions[v])})}onMultipleOptionChange(v,o){return this.onOptionChange(h=>{v.indexOf(h)!==-1&&o()})}_setupOptions(){const v=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},o=(h,a)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);a=this._sanitizeAndValidateOption(h,a),this.rawOptions[h]!==a&&(this.rawOptions[h]=a,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const a={get:v.bind(this,h),set:o.bind(this,h)};Object.defineProperty(this.options,h,a)}}_sanitizeAndValidateOption(v,o){switch(v){case"cursorStyle":if(o||(o=i.DEFAULT_OPTIONS[v]),!function(h){return h==="block"||h==="underline"||h==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${v}`);break;case"wordSeparator":o||(o=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=g.includes(o)?o:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${v} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${v} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}i.OptionsService=y},2660:function(_,i,n){var f=this&&this.__decorate||function(y,k,v,o){var h,a=arguments.length,u=a<3?k:o===null?o=Object.getOwnPropertyDescriptor(k,v):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(y,k,v,o);else for(var b=y.length-1;b>=0;b--)(h=y[b])&&(u=(a<3?h(u):a>3?h(k,v,u):h(k,v))||u);return a>3&&u&&Object.defineProperty(k,v,u),u},m=this&&this.__param||function(y,k){return function(v,o){k(v,o,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const d=n(2585);let g=i.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const k=this._bufferService.buffer;if(y.id===void 0){const b=k.addMarker(k.ybase+k.y),E={data:y,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(E,b)),this._dataByLinkId.set(E.id,E),E.id}const v=y,o=this._getEntryIdKey(v),h=this._entriesWithId.get(o);if(h)return this.addLineToLink(h.id,k.ybase+k.y),h.id;const a=k.addMarker(k.ybase+k.y),u={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(u,a)),this._entriesWithId.set(u.key,u),this._dataByLinkId.set(u.id,u),u.id}addLineToLink(y,k){const v=this._dataByLinkId.get(y);if(v&&v.lines.every(o=>o.line!==k)){const o=this._bufferService.buffer.addMarker(k);v.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(v,o))}}getLinkData(y){var k;return(k=this._dataByLinkId.get(y))==null?void 0:k.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,k){const v=y.lines.indexOf(k);v!==-1&&(y.lines.splice(v,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};i.OscLinkService=g=f([m(0,d.IBufferService)],g)},8343:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const n="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(m){return m[f]||[]},i.createDecorator=function(m){if(i.serviceRegistry.has(m))return i.serviceRegistry.get(m);const d=function(g,y,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,o,h){o[n]===o?o[f].push({id:v,index:h}):(o[f]=[{id:v,index:h}],o[n]=o)})(d,g,k)};return d.toString=()=>m,i.serviceRegistry.set(m,d),d}},2585:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=n(8343);var m;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(m||(i.LogLevelEnum=m={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=n(8460),m=n(225);class d{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,k,v=!1){return(16777215&y)<<3|(3&k)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const y=new m.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let k=0,v=0;const o=y.length;for(let h=0;h<o;++h){let a=y.charCodeAt(h);if(55296<=a&&a<=56319){if(++h>=o)return k+this.wcwidth(a);const E=y.charCodeAt(h);56320<=E&&E<=57343?a=1024*(a-55296)+E-56320+65536:k+=this.wcwidth(E)}const u=this.charProperties(a,v);let b=d.extractWidth(u);d.extractShouldJoin(u)&&(b-=d.extractWidth(v)),k+=b,v=u}return k}charProperties(y,k){return this._activeProvider.charProperties(y,k)}}i.UnicodeService=d}},l={};function p(_){var i=l[_];if(i!==void 0)return i.exports;var n=l[_]={exports:{}};return t[_].call(n.exports,n,n.exports,p),n.exports}var w={};return(()=>{var _=w;Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;const i=p(9042),n=p(3236),f=p(844),m=p(5741),d=p(8285),g=p(7975),y=p(7090),k=["cols","rows"];class v extends f.Disposable{constructor(h){super(),this._core=this.register(new n.Terminal(h)),this._addonManager=this.register(new m.AddonManager),this._publicOptions={...this._core.options};const a=b=>this._core.options[b],u=(b,E)=>{this._checkReadonlyOptions(b),this._core.options[b]=E};for(const b in this._core.options){const E={get:a.bind(this,b),set:u.bind(this,b)};Object.defineProperty(this._publicOptions,b,E)}}_checkReadonlyOptions(h){if(k.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const a in h)this._publicOptions[a]=h[a]}blur(){this._core.blur()}focus(){this._core.focus()}input(h,a=!0){this._core.input(h,a)}resize(h,a){this._verifyIntegers(h,a),this._core.resize(h,a)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}attachCustomWheelEventHandler(h){this._core.attachCustomWheelEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){return this._checkProposedApi(),this._verifyPositiveIntegers(h.x??0,h.width??0,h.height??0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,a,u){this._verifyIntegers(h,a,u),this._core.select(h,a,u)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,a){this._verifyIntegers(h,a),this._core.selectLines(h,a)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,a){this._core.write(h,a)}writeln(h,a){this._core.write(h),this._core.write(`\r
`,a)}paste(h){this._core.paste(h)}refresh(h,a){this._verifyIntegers(h,a),this._core.refresh(h,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(const a of h)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const a of h)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}_.Terminal=v})(),w})())})(dn);var wo=dn.exports,fn={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(self,()=>(()=>{var t={};return(()=>{var l=t;Object.defineProperty(l,"__esModule",{value:!0}),l.FitAddon=void 0,l.FitAddon=class{activate(p){this._terminal=p}dispose(){}fit(){const p=this.proposeDimensions();if(!p||!this._terminal||isNaN(p.cols)||isNaN(p.rows))return;const w=this._terminal._core;this._terminal.rows===p.rows&&this._terminal.cols===p.cols||(w._renderService.clear(),this._terminal.resize(p.cols,p.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const p=this._terminal._core,w=p._renderService.dimensions;if(w.css.cell.width===0||w.css.cell.height===0)return;const _=this._terminal.options.scrollback===0?0:p.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),d=n-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),g=f-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-_;return{cols:Math.max(2,Math.floor(g/w.css.cell.width)),rows:Math.max(1,Math.floor(d/w.css.cell.height))}}}})(),t})())})(fn);var ko=fn.exports,pn={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(self,()=>(()=>{var t={6:(_,i)=>{function n(m){try{const d=new URL(m),g=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return m.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(m,d,g,y={}){this._terminal=m,this._regex=d,this._handler=g,this._options=y}provideLinks(m,d){const g=f.computeLink(m,this._regex,this._terminal,this._handler);d(this._addCallbacks(g))}_addCallbacks(m){return m.map(d=>(d.leave=this._options.leave,d.hover=(g,y)=>{if(this._options.hover){const{range:k}=d;this._options.hover(g,y,k)}},d))}};class f{static computeLink(d,g,y,k){const v=new RegExp(g.source,(g.flags||"")+"g"),[o,h]=f._getWindowedLineStrings(d-1,y),a=o.join("");let u;const b=[];for(;u=v.exec(a);){const E=u[0];if(!n(E))continue;const[C,x]=f._mapStrIdx(y,h,0,u.index),[S,M]=f._mapStrIdx(y,C,x,E.length);if(C===-1||x===-1||S===-1||M===-1)continue;const T={start:{x:x+1,y:C+1},end:{x:M,y:S+1}};b.push({range:T,text:E,activate:k})}return b}static _getWindowedLineStrings(d,g){let y,k=d,v=d,o=0,h="";const a=[];if(y=g.buffer.active.getLine(d)){const u=y.translateToString(!0);if(y.isWrapped&&u[0]!==" "){for(o=0;(y=g.buffer.active.getLine(--k))&&o<2048&&(h=y.translateToString(!0),o+=h.length,a.push(h),y.isWrapped&&h.indexOf(" ")===-1););a.reverse()}for(a.push(u),o=0;(y=g.buffer.active.getLine(++v))&&y.isWrapped&&o<2048&&(h=y.translateToString(!0),o+=h.length,a.push(h),h.indexOf(" ")===-1););}return[a,k]}static _mapStrIdx(d,g,y,k){const v=d.buffer.active,o=v.getNullCell();let h=y;for(;k;){const a=v.getLine(g);if(!a)return[-1,-1];for(let u=h;u<a.length;++u){a.getCell(u,o);const b=o.getChars();if(o.getWidth()&&(k-=b.length||1,u===a.length-1&&b==="")){const E=v.getLine(g+1);E&&E.isWrapped&&(E.getCell(0,o),o.getWidth()===2&&(k+=1))}if(k<0)return[g,u]}g++,h=0}return[g,h]}}i.LinkComputer=f}},l={};function p(_){var i=l[_];if(i!==void 0)return i.exports;var n=l[_]={exports:{}};return t[_](n,n.exports,p),n.exports}var w={};return(()=>{var _=w;Object.defineProperty(_,"__esModule",{value:!0}),_.WebLinksAddon=void 0;const i=p(6),n=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(m,d){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}_.WebLinksAddon=class{constructor(m=f,d={}){this._handler=m,this._options=d}activate(m){this._terminal=m;const d=this._options,g=d.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,g,this._handler,d))}dispose(){var m;(m=this._linkProvider)==null||m.dispose()}}})(),w})())})(pn);var So=pn.exports;function _i(r){let e,t,l,p,w,_,i,n,f,m,d,g=r[1].name+"",y,k,v,o=yi(r[1].size)+"",h,a,u,b,E,C,x,S=r[3]&&gi(r),M=r[2]==="pending"&&mi(r),T=r[2]==="accepting"&&vi(),R=r[2]==="completed"&&bi(r);return{c(){e=L("div"),t=L("div"),l=L("div"),l.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',p=O(),w=L("div"),_=L("div"),i=L("div"),n=L("span"),n.textContent="📄",f=O(),m=L("div"),d=L("span"),y=Z(g),k=O(),v=L("span"),h=Z(o),a=Z(" 字节"),u=O(),b=L("div"),S&&S.c(),E=O(),M&&M.c(),C=O(),T&&T.c(),x=O(),R&&R.c(),s(l,"class","zmodem-download-header"),s(n,"class","zmodem-download-icon"),s(d,"class","zmodem-download-name"),s(v,"class","zmodem-download-size"),s(m,"class","zmodem-download-details"),s(i,"class","zmodem-download-file"),s(_,"class","zmodem-download-info"),s(b,"class","zmodem-download-actions"),s(w,"class","zmodem-download-body"),s(t,"class","zmodem-download-content"),s(e,"class","zmodem-download-modal")},m(H,A){V(H,e,A),c(e,t),c(t,l),c(t,p),c(t,w),c(w,_),c(_,i),c(i,n),c(i,f),c(i,m),c(m,d),c(d,y),c(m,k),c(m,v),c(v,h),c(v,a),c(w,u),c(w,b),S&&S.m(b,null),c(b,E),M&&M.m(b,null),c(b,C),T&&T.m(b,null),c(b,x),R&&R.m(b,null)},p(H,A){A[0]&2&&g!==(g=H[1].name+"")&&ue(y,g),A[0]&2&&o!==(o=yi(H[1].size)+"")&&ue(h,o),H[3]?S?S.p(H,A):(S=gi(H),S.c(),S.m(b,E)):S&&(S.d(1),S=null),H[2]==="pending"?M?M.p(H,A):(M=mi(H),M.c(),M.m(b,C)):M&&(M.d(1),M=null),H[2]==="accepting"?T||(T=vi(),T.c(),T.m(b,x)):T&&(T.d(1),T=null),H[2]==="completed"?R?R.p(H,A):(R=bi(H),R.c(),R.m(b,null)):R&&(R.d(1),R=null)},d(H){H&&N(e),S&&S.d(),M&&M.d(),T&&T.d(),R&&R.d()}}}function gi(r){let e,t,l;return{c(){e=L("div"),t=Z("❌ "),l=Z(r[3]),s(e,"class","zmodem-error-message")},m(p,w){V(p,e,w),c(e,t),c(e,l)},p(p,w){w[0]&8&&ue(l,p[3])},d(p){p&&N(e)}}}function mi(r){let e,t,l,p,w,_,i,n;return{c(){e=L("p"),e.textContent="服务器正在发送文件，是否接收？",t=O(),l=L("div"),p=L("button"),p.textContent="拒绝",w=O(),_=L("button"),_.textContent="接收文件",s(e,"class","zmodem-download-prompt"),s(p,"class","zmodem-download-btn zmodem-btn-reject"),s(_,"class","zmodem-download-btn zmodem-btn-accept"),s(l,"class","zmodem-download-buttons")},m(f,m){V(f,e,m),V(f,t,m),V(f,l,m),c(l,p),c(l,w),c(l,_),i||(n=[Q(p,"click",r[6]),Q(_,"click",r[5])],i=!0)},p:Pe,d(f){f&&(N(e),N(t),N(l)),i=!1,Fe(n)}}}function vi(r){let e;return{c(){e=L("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',s(e,"class","zmodem-downloading")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function bi(r){let e,t,l,p,w,_=(r[4]||r[1].name)+"",i;return{c(){e=L("div"),t=L("span"),t.textContent="✓",l=O(),p=L("span"),w=Z("文件接收完成，已保存到："),i=Z(_),s(t,"class","zmodem-success-icon"),s(e,"class","zmodem-completed")},m(n,f){V(n,e,f),c(e,t),c(e,l),c(e,p),c(p,w),c(p,i)},p(n,f){f[0]&18&&_!==(_=(n[4]||n[1].name)+"")&&ue(i,_)},d(n){n&&N(e)}}}function Co(r){let e,t,l,p=r[1]&&_i(r);return{c(){e=L("div"),e.innerHTML="",t=O(),p&&p.c(),l=wt(),s(e,"class","terminal-container svelte-14g4vw6")},m(w,_){V(w,e,_),r[16](e),V(w,t,_),p&&p.m(w,_),V(w,l,_)},p(w,_){w[1]?p?p.p(w,_):(p=_i(w),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i:Pe,o:Pe,d(w){w&&(N(e),N(t),N(l)),r[16](null),p&&p.d(w)}}}function xo(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),l=window.URL.createObjectURL(t),p=document.createElement("a");p.href=l,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(l),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function Eo(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function Lo(r){const e=[];let t=0;for await(const w of r)e.push(w),t+=w.length;const l=new Uint8Array(t);let p=0;for(const w of e)l.set(w,p),p+=w.length;return l}async function Mo(r,e){const t=await Lo(r),{SaveBinaryFile:l}=window.wailsBindings||{};if(typeof l=="function"){const p=btoa(Eo(t));return await l(e,p)}return xo(t,e),null}function yi(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function Do(r,e,t){let{sessionId:l=null}=e,{onData:p=null}=e,{onResize:w=null}=e,{onZModemTransfer:_=null}=e,i,n,f,m=null,d=null,g=null,y=!1,k=null,v=!1,o=null,h="pending",a=null,u=null,b=null,E=Rn(or);const C={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},x={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},S=or.subscribe(q=>{E=q,n&&(n.options.theme=E==="light"?x:C)});ar(async()=>{n=new wo.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:E==="light"?x:C,allowProposedApi:!0,scrollback:1e3,convertEol:!0,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),f=new ko.FitAddon,n.loadAddon(f),n.loadAddon(new So.WebLinksAddon),n.open(i),f.fit(),n.attachCustomKeyEventHandler(W=>{if(W.metaKey&&W.key.toLowerCase()==="c"&&!W.shiftKey&&!W.ctrlKey){if(n.hasSelection()){const X=n.getSelection();return navigator.clipboard.writeText(X).catch(te=>{console.error("Failed to copy:",te)}),!1}return!0}if(W.ctrlKey&&!W.metaKey&&W.key.toLowerCase()==="c"&&!W.shiftKey){if(n.hasSelection()){const X=n.getSelection();return navigator.clipboard.writeText(X).catch(te=>{console.error("Failed to copy:",te)}),!1}return!0}return W.metaKey&&W.key.toLowerCase()==="v"&&!W.shiftKey&&!W.ctrlKey?(W.preventDefault(),navigator.clipboard.readText().then(X=>{X&&p&&l&&p(l,X)}).catch(X=>{console.error("Failed to read clipboard:",X)}),!1):W.ctrlKey&&!W.metaKey&&W.key.toLowerCase()==="v"&&!W.shiftKey?(W.preventDefault(),navigator.clipboard.readText().then(X=>{X&&p&&l&&p(l,X)}).catch(X=>{console.error("Failed to read clipboard:",X)}),!1):!0});try{const W=await fr(()=>import("./index2.js").then(X=>X.i),[]);m=W.default||W,d=new m.Sentry({to_terminal:X=>{n&&n.write(new Uint8Array(X))},sender:X=>{if(l){if(_){_(l,new Uint8Array(X));return}if(p){let te="";for(let I=0;I<X.length;I++)te+=String.fromCharCode(X[I]);p(l,te)}}},on_detect:X=>{if(console.log("ZMODEM detected:",X.type),console.log("Detection object:",X),g=X.confirm(),console.log("ZMODEM confirmed, type:",g.type,"has zsession:",!!g),!g){console.error("ERROR: zsession is null after confirm()");return}v=!0,n&&(n.options.disableStdin=!0),g.type==="receive"?(console.log("Calling handleZModemReceive for download"),H(g)):(console.log("Calling handleZModemSend for upload"),K(g))},on_retract:()=>{console.log("ZMODEM retracted"),g=null,v=!1,n&&(n.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(W){console.error("Failed to initialize ZMODEM:",W)}n.onData(W=>{p&&l&&p(l,W)}),n.onResize(({cols:W,rows:X})=>{w&&l&&w(l,W,X)});const q=new ResizeObserver(()=>{f.fit()});return q.observe(i),()=>{q.disconnect()}}),Dr(()=>{S&&S(),n&&n.dispose()});function M(q){b||(b=document.createElement("div"),b.className="zmodem-progress-modal",b.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${q}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(b))}function T(q,W,X,te,I){if(!b)return;const B=Math.min(100,Math.round(te/I*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${X}`,document.getElementById("zmodem-progress-bar").style.width=`${B}%`,document.getElementById("zmodem-progress-text").textContent=`${B}%`,document.getElementById("zmodem-files-progress").textContent=`${q+1} / ${W}`}function R(){b&&(document.body.removeChild(b),b=null)}function H(q){t(1,o=null),k=null,t(2,h="pending"),t(3,a=null),t(4,u=null),q.on("offer",W=>{const X=W.get_details();k=W,t(1,o=X),t(2,h="pending"),t(3,a=null),t(4,u=null)}),q.on("session_end",()=>{k=null,g=null,v=!1,n&&(n.options.disableStdin=!1),h==="accepting"?(t(2,h="completed"),setTimeout(()=>{t(1,o=null),t(2,h="pending"),t(4,u=null)},1500)):(t(1,o=null),t(2,h="pending"),t(4,u=null))}),q.start()}async function A(){if(k){t(2,h="accepting"),t(3,a=null);try{await k.accept();const q=k.get_payloads(),W=k.get_details().name;t(4,u=await Mo(q,W)),k=null,t(2,h="completed")}catch(q){console.error("接收文件失败:",q),t(3,a=q.message||String(q)),t(2,h="pending")}}}function z(){k&&k.skip(),k=null,t(1,o=null),t(2,h="pending"),t(3,a=null),t(4,u=null)}async function K(q){console.log("handleZModemSend called, session:",q);const W=document.createElement("input");return W.type="file",W.multiple=!0,new Promise(X=>{W.onchange=async te=>{const I=Array.from(te.target.files);if(console.log("Files selected:",I.length,I.map(B=>B.name)),I.length===0){console.log("No files selected, closing session"),q.close(),y=!1,v=!1,n&&(n.options.disableStdin=!1),X();return}try{M(I.length),console.log("Starting to send files...");for(let B=0;B<I.length;B++){const ee=I[B],U={name:ee.name,size:ee.size,mtime:new Date(ee.lastModified)};console.log(`Sending file ${B+1}/${I.length}:`,ee.name,ee.size),await Y(q,ee,U,B,I.length)}console.log("All files sent, closing session"),await q.close(),setTimeout(()=>{y=!1,R(),v=!1,n&&(n.options.disableStdin=!1),X()},500)}catch(B){console.error("发送文件失败:",B),console.error("Error details:",B.stack),q.close(),y=!1,R(),v=!1,n&&(n.options.disableStdin=!1),X()}},W.click()})}async function Y(q,W,X,te,I){return new Promise((B,ee)=>{q.send_offer(X).then(U=>{if(!U){B();return}const le=new FileReader,ae=8192;le.onload=he=>{const ye=he.target.result;let pe=0,ge=0;function we(){if(pe<ye.byteLength){const Be=new Uint8Array(ye,pe,Math.min(ae,ye.byteLength-pe));U.send(Be),pe+=ae,ge+=Be.byteLength,T(te,I,W.name,ge,W.size),setTimeout(we,0)}else U.end().then(B).catch(ee)}we()},le.onerror=()=>{ee(new Error("读取文件失败"))},le.readAsArrayBuffer(W)})})}function re(q){if(!n)return;let W;if(typeof q=="string"?W=new Uint8Array(q.split("").map(X=>X.charCodeAt(0))):q instanceof Uint8Array?W=q:W=new Uint8Array(q),d&&!y)try{d.consume(W);return}catch(X){console.warn("ZMODEM consume failed:",X),g=null,k=null,v=!1,y=!1,n&&(n.options.disableStdin=!1)}n.write(W)}function J(q){n&&n.writeln(q)}function D(){n&&n.clear()}function P(){n&&n.focus()}function F(){return n?{cols:n.cols,rows:n.rows}:{cols:80,rows:24}}function j(q){tt[q?"unshift":"push"](()=>{i=q,t(0,i)})}return r.$$set=q=>{"sessionId"in q&&t(7,l=q.sessionId),"onData"in q&&t(8,p=q.onData),"onResize"in q&&t(9,w=q.onResize),"onZModemTransfer"in q&&t(10,_=q.onZModemTransfer)},[i,o,h,a,u,A,z,l,p,w,_,re,J,D,P,F,j]}class To extends gt{constructor(e){super(),_t(this,e,Do,Co,pt,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function Bo(r){window.runtime.LogPrint(r)}function Ao(r){window.runtime.LogTrace(r)}function Ro(r){window.runtime.LogDebug(r)}function Oo(r){window.runtime.LogInfo(r)}function Po(r){window.runtime.LogWarning(r)}function Ho(r){window.runtime.LogError(r)}function Io(r){window.runtime.LogFatal(r)}function Nr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function gr(r,e){return Nr(r,e,-1)}function Fo(r,...e){return window.runtime.EventsOff(r,...e)}function Wo(){return window.runtime.EventsOffAll()}function jo(r,e){return Nr(r,e,1)}function zo(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function Uo(){window.runtime.WindowReload()}function No(){window.runtime.WindowReloadApp()}function Vo(r){window.runtime.WindowSetAlwaysOnTop(r)}function Ko(){window.runtime.WindowSetSystemDefaultTheme()}function qo(){window.runtime.WindowSetLightTheme()}function Go(){window.runtime.WindowSetDarkTheme()}function Jo(){window.runtime.WindowCenter()}function Xo(r){window.runtime.WindowSetTitle(r)}function Yo(){window.runtime.WindowFullscreen()}function Zo(){window.runtime.WindowUnfullscreen()}function Qo(){return window.runtime.WindowIsFullscreen()}function $o(){return window.runtime.WindowGetSize()}function el(r,e){window.runtime.WindowSetSize(r,e)}function tl(r,e){window.runtime.WindowSetMaxSize(r,e)}function rl(r,e){window.runtime.WindowSetMinSize(r,e)}function il(r,e){window.runtime.WindowSetPosition(r,e)}function sl(){return window.runtime.WindowGetPosition()}function nl(){window.runtime.WindowHide()}function ol(){window.runtime.WindowShow()}function ll(){window.runtime.WindowMaximise()}function al(){window.runtime.WindowToggleMaximise()}function cl(){window.runtime.WindowUnmaximise()}function hl(){return window.runtime.WindowIsMaximised()}function dl(){window.runtime.WindowMinimise()}function ul(){window.runtime.WindowUnminimise()}function fl(r,e,t,l){window.runtime.WindowSetBackgroundColour(r,e,t,l)}function pl(){return window.runtime.ScreenGetAll()}function _l(){return window.runtime.WindowIsMinimised()}function gl(){return window.runtime.WindowIsNormal()}function ml(r){window.runtime.BrowserOpenURL(r)}function vl(){return window.runtime.Environment()}function bl(){window.runtime.Quit()}function yl(){window.runtime.Hide()}function wl(){window.runtime.Show()}function kl(){return window.runtime.ClipboardGetText()}function Sl(r){return window.runtime.ClipboardSetText(r)}function Cl(r,e){return window.runtime.OnFileDrop(r,e)}function xl(){return window.runtime.OnFileDropOff()}function El(){return window.runtime.CanResolveFilePaths()}function Ll(r){return window.runtime.ResolveFilePaths(r)}const _n=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:ml,CanResolveFilePaths:El,ClipboardGetText:kl,ClipboardSetText:Sl,Environment:vl,EventsEmit:zo,EventsOff:Fo,EventsOffAll:Wo,EventsOn:gr,EventsOnMultiple:Nr,EventsOnce:jo,Hide:yl,LogDebug:Ro,LogError:Ho,LogFatal:Io,LogInfo:Oo,LogPrint:Bo,LogTrace:Ao,LogWarning:Po,OnFileDrop:Cl,OnFileDropOff:xl,Quit:bl,ResolveFilePaths:Ll,ScreenGetAll:pl,Show:wl,WindowCenter:Jo,WindowFullscreen:Yo,WindowGetPosition:sl,WindowGetSize:$o,WindowHide:nl,WindowIsFullscreen:Qo,WindowIsMaximised:hl,WindowIsMinimised:_l,WindowIsNormal:gl,WindowMaximise:ll,WindowMinimise:dl,WindowReload:Uo,WindowReloadApp:No,WindowSetAlwaysOnTop:Vo,WindowSetBackgroundColour:fl,WindowSetDarkTheme:Go,WindowSetLightTheme:qo,WindowSetMaxSize:tl,WindowSetMinSize:rl,WindowSetPosition:il,WindowSetSize:el,WindowSetSystemDefaultTheme:Ko,WindowSetTitle:Xo,WindowShow:ol,WindowToggleMaximise:al,WindowUnfullscreen:Zo,WindowUnmaximise:cl,WindowUnminimise:ul},Symbol.toStringTag,{value:"Module"})),{Map:gn}=sn;function wi(r,e,t){const l=r.slice();return l[66]=e[t],l[67]=e,l[68]=t,l}function ki(r,e,t){const l=r.slice();return l[66]=e[t],l}function Ml(r){let e=[],t=new gn,l,p=Ke(r[1]);const w=_=>_[66].sessionId;for(let _=0;_<p.length;_+=1){let i=ki(r,p,_),n=w(i);t.set(n,e[_]=Si(n,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();l=wt()},m(_,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(_,i);V(_,l,i)},p(_,i){i[0]&1930297346&&(p=Ke(_[1]),e=Lt(e,i,w,1,_,p,t,l.parentNode,Mt,Si,l,ki))},d(_){_&&N(l);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function Dl(r){let e;return{c(){e=L("div"),e.textContent="没有活动连接",s(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function Tl(r){let e,t=(r[66].tabName||r[66].connection.name)+"",l;return{c(){e=L("span"),l=Z(t),s(e,"class","text-sm font-medium truncate flex-1")},m(p,w){V(p,e,w),c(e,l)},p(p,w){w[0]&2&&t!==(t=(p[66].tabName||p[66].connection.name)+"")&&ue(l,t)},d(p){p&&N(e)}}}function Bl(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),s(e,"focus","")},m(p,w){V(p,e,w),Le(e,r[18]),t||(l=[Q(e,"input",r[40]),Q(e,"blur",r[29]),Q(e,"keydown",r[30])],t=!0)},p(p,w){w[0]&262144&&e.value!==p[18]&&Le(e,p[18])},d(p){p&&N(e),t=!1,Fe(l)}}}function Si(r,e){let t,l,p,w,_,i,n,f,m,d;function g(u,b){return u[17]===u[66].sessionId?Bl:Tl}let y=g(e),k=y(e);function v(...u){return e[41](e[66],...u)}function o(){return e[42](e[66])}function h(){return e[43](e[66])}function a(...u){return e[44](e[66],...u)}return{key:r,first:null,c(){t=L("div"),l=L("div"),w=O(),k.c(),_=O(),i=L("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',n=O(),s(l,"class",p=Qr(`w-2 h-2 rounded-full flex-shrink-0 ${e[66].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),s(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),s(t,"class",f="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[19]===e[66].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),s(t,"role","button"),s(t,"tabindex","0"),this.first=t},m(u,b){V(u,t,b),c(t,l),c(t,w),k.m(t,null),c(t,_),c(t,i),c(t,n),m||(d=[Q(i,"click",v),Q(t,"click",o),Q(t,"dblclick",h),Q(t,"keydown",a)],m=!0)},p(u,b){e=u,b[0]&2&&p!==(p=Qr(`w-2 h-2 rounded-full flex-shrink-0 ${e[66].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&s(l,"class",p),y===(y=g(e))&&k?k.p(e,b):(k.d(1),k=y(e),k&&(k.c(),k.m(t,_))),b[0]&524290&&f!==(f="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[19]===e[66].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&s(t,"class",f)},d(u){u&&N(t),k.d(),m=!1,Fe(d)}}}function Al(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',s(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,l){V(t,e,l)},p:Pe,i:Pe,o:Pe,d(t){t&&N(e)}}}function Rl(r){let e,t=[],l=new gn,p,w=Ke(r[1]);const _=i=>i[66].sessionId;for(let i=0;i<w.length;i+=1){let n=wi(r,w,i),f=_(n);l.set(f,t[i]=Ci(f,n))}return{c(){e=L("div");for(let i=0;i<t.length;i+=1)t[i].c();s(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,n){V(i,e,n);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);p=!0},p(i,n){n[0]&524291|n[1]&56&&(w=Ke(i[1]),xt(),t=Lt(t,n,_,1,i,w,l,e,Nn,Ci,null,wi),Et())},i(i){if(!p){for(let n=0;n<w.length;n+=1)Oe(t[n]);p=!0}},o(i){for(let n=0;n<t.length;n+=1)Ie(t[n]);p=!1},d(i){i&&N(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Ol(r){let e=r[66].connection.username+"",t,l,p=r[66].connection.host+"",w,_,i=r[66].connection.port+"",n;return{c(){t=Z(e),l=Z("@"),w=Z(p),_=Z(":"),n=Z(i)},m(f,m){V(f,t,m),V(f,l,m),V(f,w,m),V(f,_,m),V(f,n,m)},p(f,m){m[0]&2&&e!==(e=f[66].connection.username+"")&&ue(t,e),m[0]&2&&p!==(p=f[66].connection.host+"")&&ue(w,p),m[0]&2&&i!==(i=f[66].connection.port+"")&&ue(n,i)},d(f){f&&(N(t),N(l),N(w),N(_),N(n))}}}function Pl(r){let e,t=r[66].connection.name!=="Local Shell"?` (${r[66].connection.name})`:"",l;return{c(){e=Z("本地终端"),l=Z(t)},m(p,w){V(p,e,w),V(p,l,w)},p(p,w){w[0]&2&&t!==(t=p[66].connection.name!=="Local Shell"?` (${p[66].connection.name})`:"")&&ue(l,t)},d(p){p&&(N(e),N(l))}}}function Ci(r,e){let t,l,p,w,_,i,n,f,m=e[66],d,g,y;function k(b,E){return b[66].type==="local"?Pl:Ol}let v=k(e),o=v(e);const h=()=>e[45](f,m),a=()=>e[45](null,m);let u={sessionId:e[66].sessionId,onData:e[34],onResize:e[36],onZModemTransfer:e[35]};return f=new To({props:u}),h(),{key:r,first:null,c(){t=L("div"),l=L("div"),p=L("div"),o.c(),w=O(),_=L("div"),_.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=O(),n=L("div"),Ze(f.$$.fragment),d=O(),s(p,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),s(_,"class","flex items-center gap-1"),s(l,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),s(n,"class","flex-1 overflow-hidden"),s(t,"class",g="terminal-wrapper "+(e[19]===e[66].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(b,E){V(b,t,E),c(t,l),c(l,p),o.m(p,null),c(l,w),c(l,_),c(t,i),c(t,n),Xe(f,n,null),c(t,d),y=!0},p(b,E){e=b,v===(v=k(e))&&o?o.p(e,E):(o.d(1),o=v(e),o&&(o.c(),o.m(p,null))),m!==e[66]&&(a(),m=e[66],h());const C={};E[0]&2&&(C.sessionId=e[66].sessionId),f.$set(C),(!y||E[0]&524290&&g!==(g="terminal-wrapper "+(e[19]===e[66].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&s(t,"class",g)},i(b){y||(Oe(f.$$.fragment,b),y=!0)},o(b){Ie(f.$$.fragment,b),y=!1},d(b){b&&N(t),o.d(),a(),Ye(f)}}}function xi(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C;return b=Wn(r[50][0]),{c(){e=L("div"),t=L("div"),l=L("div"),l.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',p=O(),w=L("div"),_=L("label"),i=L("input"),n=O(),f=L("div"),f.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',m=O(),d=L("label"),g=L("input"),y=O(),k=L("div"),k.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',v=O(),o=L("div"),h=L("button"),h.textContent="取消",a=O(),u=L("button"),u.textContent="确定",s(l,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),s(i,"type","radio"),i.__value="powershell",Le(i,i.__value),s(i,"class","w-4 h-4 text-purple-600"),s(_,"class","flex items-center space-x-3 cursor-pointer"),s(g,"type","radio"),g.__value="cmd",Le(g,g.__value),s(g,"class","w-4 h-4 text-purple-600"),s(d,"class","flex items-center space-x-3 cursor-pointer"),s(w,"class","px-6 py-4 space-y-3"),s(h,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),s(u,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),s(o,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),s(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),s(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),b.p(i,g)},m(x,S){V(x,e,S),c(e,t),c(t,l),c(t,p),c(t,w),c(w,_),c(_,i),i.checked=i.__value===r[13],c(_,n),c(_,f),c(w,m),c(w,d),c(d,g),g.checked=g.__value===r[13],c(d,y),c(d,k),c(t,v),c(t,o),c(o,h),c(o,a),c(o,u),E||(C=[Q(i,"change",r[49]),Q(g,"change",r[51]),Q(h,"click",r[33]),Q(u,"click",r[32])],E=!0)},p(x,S){S[0]&8192&&(i.checked=i.__value===x[13]),S[0]&8192&&(g.checked=g.__value===x[13])},d(x){x&&N(e),b.r(),E=!1,Fe(C)}}}function Hl(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E;function C(D,P){return D[1].length===0?Dl:Ml}let x=C(r),S=x(r);const M=[Rl,Al],T=[];function R(D,P){return D[1].length>0?0:1}_=R(r),i=T[_]=M[_](r);function H(D){r[46](D)}let A={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[26],onCancel:r[27]};r[2]!==void 0&&(A.isOpen=r[2]),f=new lr({props:A}),tt.push(()=>ut(f,"isOpen",H));function z(D){r[47](D)}let K={title:r[14],message:r[15],type:r[16],confirmText:"确定",cancelText:"取消",onConfirm:r[22],onCancel:r[23]};r[11]!==void 0&&(K.isOpen=r[11]),g=new lr({props:K}),tt.push(()=>ut(g,"isOpen",z));function Y(D){r[48](D)}let re={title:r[4],message:r[5],placeholder:r[6],defaultValue:r[7],inputType:r[8],allowEmpty:r[9],trimValue:r[10],confirmText:"确定",cancelText:"取消",onConfirm:r[20],onCancel:r[21]};r[3]!==void 0&&(re.isOpen=r[3]),v=new ur({props:re}),tt.push(()=>ut(v,"isOpen",Y));let J=r[12]&&xi(r);return{c(){e=L("div"),t=L("div"),S.c(),l=O(),p=L("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',w=O(),i.c(),n=O(),Ze(f.$$.fragment),d=O(),Ze(g.$$.fragment),k=O(),Ze(v.$$.fragment),h=O(),J&&J.c(),a=wt(),s(p,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),s(p,"title","打开本地终端"),s(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(D,P){V(D,e,P),c(e,t),S.m(t,null),c(t,l),c(t,p),c(e,w),T[_].m(e,null),V(D,n,P),Xe(f,D,P),V(D,d,P),Xe(g,D,P),V(D,k,P),Xe(v,D,P),V(D,h,P),J&&J.m(D,P),V(D,a,P),u=!0,b||(E=Q(p,"click",r[31]),b=!0)},p(D,P){x===(x=C(D))&&S?S.p(D,P):(S.d(1),S=x(D),S&&(S.c(),S.m(t,l)));let F=_;_=R(D),_===F?T[_].p(D,P):(xt(),Ie(T[F],1,1,()=>{T[F]=null}),Et(),i=T[_],i?i.p(D,P):(i=T[_]=M[_](D),i.c()),Oe(i,1),i.m(e,null));const j={};!m&&P[0]&4&&(m=!0,j.isOpen=D[2],dt(()=>m=!1)),f.$set(j);const q={};P[0]&16384&&(q.title=D[14]),P[0]&32768&&(q.message=D[15]),P[0]&65536&&(q.type=D[16]),!y&&P[0]&2048&&(y=!0,q.isOpen=D[11],dt(()=>y=!1)),g.$set(q);const W={};P[0]&16&&(W.title=D[4]),P[0]&32&&(W.message=D[5]),P[0]&64&&(W.placeholder=D[6]),P[0]&128&&(W.defaultValue=D[7]),P[0]&256&&(W.inputType=D[8]),P[0]&512&&(W.allowEmpty=D[9]),P[0]&1024&&(W.trimValue=D[10]),!o&&P[0]&8&&(o=!0,W.isOpen=D[3],dt(()=>o=!1)),v.$set(W),D[12]?J?J.p(D,P):(J=xi(D),J.c(),J.m(a.parentNode,a)):J&&(J.d(1),J=null)},i(D){u||(Oe(i),Oe(f.$$.fragment,D),Oe(g.$$.fragment,D),Oe(v.$$.fragment,D),u=!0)},o(D){Ie(i),Ie(f.$$.fragment,D),Ie(g.$$.fragment,D),Ie(v.$$.fragment,D),u=!1},d(D){D&&(N(e),N(n),N(d),N(k),N(h),N(a)),S.d(),T[_].d(),Ye(f,D),Ye(g,D),Ye(v,D),J&&J.d(D),b=!1,E()}}}function Il(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r,0),t.set(e,r.length),t}function Fl(r){const e=[27,93,55,59];let t=-1;for(let p=r.length-e.length;p>=0;p--)if(r[p]===e[0]&&r[p+1]===e[1]&&r[p+2]===e[2]&&r[p+3]===e[3]){t=p;break}return t===-1?r.slice(Math.max(0,r.length-(e.length-1))):Wl(r,t+e.length)===-1?r.slice(t):r.slice(Math.max(0,r.length-(e.length-1)))}function Wl(r,e){for(let t=e;t<r.length;t++)if(r[t]===7||r[t]===27&&t+1<r.length&&r[t+1]===92)return t;return-1}function jl(r){const e=[],t=[27,93,55,59];let l=0;for(;l<=r.length-t.length;){if(r[l]===t[0]&&r[l+1]===t[1]&&r[l+2]===t[2]&&r[l+3]===t[3]){l+=t.length;const p=l;let w=-1;for(;l<r.length;){if(r[l]===7){w=l,l+=1;break}if(r[l]===27&&l+1<r.length&&r[l+1]===92){w=l,l+=2;break}l+=1}if(w>p){const _=zl(r.slice(p,w)),i=Ul(_);i&&e.push(i)}continue}l+=1}return e}function zl(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Ul(r){if(!r)return"";let e=r;if(e.startsWith("file://")){e=e.slice(7);const t=e.indexOf("/");if(t===-1)return"/";e=e.slice(t)}else e.startsWith("file:")&&(e=e.slice(5));try{e=decodeURIComponent(e)}catch{return e}return e}function jr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Ei(r){return btoa(jr(r))}function Nl(r,e,t){let l,p;vt(r,zt,G=>t(19,l=G)),vt(r,At,G=>t(39,p=G));let w={},_=[],i=new Map,n=new Map,f=!1,m=null,d=!1,g="",y="",k="",v="",o="text",h=!1,a=!0,u=null,b=!1,E=null,C=!1,x="powershell";async function S(G){var bt;if(console.log("Connecting to:",G),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:be,GetPassword:Ce,HasPassword:Se,SavePassword:Ae}=window.wailsBindings;if(typeof be!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let Re="",He="";if(G.auth_type==="key"){if(He=await M({title:`连接到 ${G.name}`,message:"如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：",placeholder:"Passphrase（可留空）",inputType:"password",allowEmpty:!0,trimValue:!1}),He===null)return;Re=G.key_path||""}else try{if(typeof Se=="function"&&await Se(G.id))Re=await Ce(G.id),console.log("Using saved password");else{if(Re=await M({title:`连接到 ${G.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Re===null)return;if(Re&&await H("保存密码","是否保存密码以便下次自动连接？","warning")&&typeof Ae=="function")try{await Ae(G.id,Re),console.log("Password saved successfully")}catch(it){console.error("Failed to save password:",it)}}}catch(Ve){if(console.error("Failed to get saved password:",Ve),Re=await M({title:`连接到 ${G.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),Re===null)return}if(!Re){console.log("Connection cancelled - no auth value provided");return}const xe=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",G.host,G.port,G.username,"auth_type:",G.auth_type);const qe={sessionId:xe,connection:G,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};At.update(Ve=>(Ve.set(xe,qe),Ve)),zt.set(xe),await Er(),await new Promise(Ve=>setTimeout(Ve,50));let ht=(bt=w[xe])==null?void 0:bt.getSize();if(ht||(ht={cols:80,rows:24},console.warn("Terminal not ready, using default size:",ht)),console.log("Subscribing to events for session:",xe),ce(xe),await new Promise(Ve=>setTimeout(Ve,100)),!w[xe]){console.error("Terminal component not ready after delay");return}const $e=w[xe];if(!$e){console.error("Failed to get terminal reference for session:",xe);return}console.log("Terminal ready, attempting to connect...");const rt=G.auth_type==="key"?"SSH key":"password";$e.writeln(`正在连接 ${G.username}@${G.host}:${G.port} (${rt})...`),$e.writeln("");try{await be(xe,G.host,G.port,G.username,G.auth_type||"password",Re,He,ht.cols,ht.rows),qe.connected=!0,At.update(Ve=>(Ve.set(xe,qe),Ve)),setTimeout(()=>{$e.focus()},100)}catch(Ve){console.error("Failed to connect:",Ve),$e&&$e.writeln(`\r
连接失败: ${Ve.message||Ve}`),await J(xe)}}function M({title:G,message:be,placeholder:Ce,defaultValue:Se,inputType:Ae,allowEmpty:Re,trimValue:He}){return new Promise(xe=>{t(4,g=G||""),t(5,y=be||""),t(6,k=Ce||""),t(7,v=Se||""),t(8,o=Ae),t(9,h=!!Re),t(10,a=He!==!1),u=xe,t(3,d=!0)})}function T(G){t(3,d=!1),u&&(u(G),u=null)}function R(){t(3,d=!1),u&&(u(null),u=null)}function H(G,be,Ce="default"){return new Promise(Se=>{t(14,A=G),t(15,z=be),t(16,K=Ce),E=Se,t(11,b=!0)})}let A="",z="",K="default";function Y(){t(11,b=!1),E&&(E(!0),E=null)}function re(){t(11,b=!1),E&&(E(!1),E=null)}async function J(G){const be=i.get(G);be&&(be(),i.delete(G)),delete w[G];const{CloseSSH:Ce}=window.wailsBindings||{};if(typeof Ce=="function")try{await Ce(G)}catch(Ae){console.error("Failed to close session:",Ae)}At.update(Ae=>(Ae.delete(G),Ae));const Se=Array.from(p.keys());l===G&&(Se.length>0?zt.set(Se[0]):zt.set(null))}function D(G){p.has(G)&&(zt.set(G),setTimeout(()=>{const be=w[G];if(be){be.focus();const Ce=be.getSize(),{ResizeSSH:Se}=window.wailsBindings||{};typeof Se=="function"&&Se(G,Ce.cols,Ce.rows).catch(console.error)}},50))}function P(G,be){be.stopPropagation();const Ce=p.get(G);Ce&&(Ce.connected?(m=G,t(2,f=!0)):J(G))}function F(){m&&(J(m),m=null),t(2,f=!1)}function j(){m=null,t(2,f=!1)}function q(G,be){const Ce=p.get(G);Ce&&(Ce.tabName=be.trim(),At.update(Se=>(Se.set(G,Ce),Se)))}let W=null,X="";function te(G){const be=p.get(G);be&&(t(17,W=G),t(18,X=be.tabName||be.connection.name))}function I(){W&&X.trim()&&q(W,X.trim()),t(17,W=null),t(18,X="")}function B(){t(17,W=null),t(18,X="")}function ee(G){G.key==="Enter"?I():G.key==="Escape"&&B()}async function U(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:G,SendSSHData:be,ResizeSSH:Ce}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(12,C=!0);return}await le("")}async function le(G){var He;const{ConnectLocalShell:be}=window.wailsBindings,Ce=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Se={sessionId:Ce,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};At.update(xe=>(xe.set(Ce,Se),xe)),zt.set(Ce),await Er(),await new Promise(xe=>setTimeout(xe,50));let Ae=(He=w[Ce])==null?void 0:He.getSize();if(Ae||(Ae={cols:80,rows:24},console.warn("Terminal not ready, using default size:",Ae)),console.log("Subscribing to local events for session:",Ce),ye(Ce),await new Promise(xe=>setTimeout(xe,100)),!w[Ce]){console.error("Terminal component not ready after delay");return}const Re=w[Ce];if(!Re){console.error("Failed to get terminal reference for session:",Ce);return}console.log("Terminal ready, starting local shell..."),Re.writeln(`正在启动本地终端${G?` (${G})`:""}...`),Re.writeln("");try{await be(Ce,G,Ae.cols,Ae.rows),Se.connected=!0,At.update(xe=>(xe.set(Ce,Se),xe)),setTimeout(()=>{Re.focus()},100)}catch(xe){console.error("Failed to start local shell:",xe),Re&&Re.writeln(`\r
启动本地终端失败: ${xe.message||xe}`),await J(Ce)}}function ae(){t(12,C=!1),le(x)}function he(){t(12,C=!1)}function ye(G){const be=`local:output:${G}`,Ce=gr(be,Se=>{const Ae=w[G];if(Ae){const Re=atob(Se),He=new Uint8Array(Re.length);for(let xe=0;xe<Re.length;xe++)He[xe]=Re.charCodeAt(xe);pe(G,He,!0),Ae.write(He)}});i.set(G,Ce)}function pe(G,be,Ce){if(!G||!be||be.length===0||Ce)return;const{paths:Se,pending:Ae}=ge(G,be);if(n.set(G,Ae),Se.length===0)return;const Re=Se[Se.length-1];if(!Re)return;const{UpdateCurrentPath:He}=window.wailsBindings||{};typeof He=="function"&&He(G,Re).catch(xe=>{console.error("Failed to update current path:",xe)})}function ge(G,be){const Ce=n.get(G),Se=Ce&&Ce.length>0?Il(Ce,be):be,Ae=jl(Se),Re=Fl(Se);return{paths:Ae,pending:Re}}function we(G,be){if(!p.has(G))return;const Ce=p.get(G),{SendSSHData:Se,SendLocalShellData:Ae}=window.wailsBindings||{};Ce&&Ce.type==="local"?typeof Ae=="function"&&Ae(G,be).catch(Re=>{console.error("Failed to send local shell data:",Re)}):typeof Se=="function"&&Se(G,be).catch(Re=>{console.error("Failed to send SSH data:",Re)})}function Be(G,be){if(!p.has(G))return;const Ce=p.get(G),{SendSSHData:Se,SendSSHDataBinary:Ae,SendLocalShellData:Re,SendLocalShellDataBinary:He}=window.wailsBindings||{};if(Ce&&Ce.type==="local"){if(typeof He=="function"){const xe=Ei(be);He(G,xe).catch(qe=>{console.error("Failed to send local shell binary data:",qe)})}else if(typeof Re=="function"){const xe=jr(be);Re(G,xe).catch(qe=>{console.error("Failed to send local shell data:",qe)})}}else if(typeof Ae=="function"){const xe=Ei(be);Ae(G,xe).catch(qe=>{console.error("Failed to send SSH binary data:",qe)})}else if(typeof Se=="function"){const xe=jr(be);Se(G,xe).catch(qe=>{console.error("Failed to send SSH data:",qe)})}}function Me(G,be,Ce){if(!p.has(G))return;const Se=p.get(G),{ResizeSSH:Ae,ResizeLocalShell:Re}=window.wailsBindings||{};Se&&Se.type==="local"?typeof Re=="function"&&Re(G,be,Ce).catch(He=>{console.error("Failed to resize local terminal:",He)}):typeof Ae=="function"&&Ae(G,be,Ce).catch(He=>{console.error("Failed to resize SSH terminal:",He)})}function ce(G){const be=`ssh:output:${G}`,Ce=gr(be,Se=>{const Ae=w[G];if(Ae){const Re=atob(Se),He=new Uint8Array(Re.length);for(let xe=0;xe<Re.length;xe++)He[xe]=Re.charCodeAt(xe);pe(G,He,!1),Ae.write(He)}});i.set(G,Ce)}Dr(()=>{i.forEach(G=>{G()})}),ar(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=w,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",_),await Er(),l&&w[l]&&setTimeout(()=>{w[l].focus()},100)});const de=[[]];function $(){X=this.value,t(18,X)}const ve=(G,be)=>P(G.sessionId,be),ie=G=>D(G.sessionId),ke=G=>te(G.sessionId),ze=(G,be)=>{(be.key==="Enter"||be.key===" ")&&(be.preventDefault(),D(G.sessionId))};function We(G,be){tt[G?"unshift":"push"](()=>{w[be.sessionId]=G,t(0,w)})}function je(G){f=G,t(2,f)}function ne(G){b=G,t(11,b)}function _e(G){d=G,t(3,d)}function Ne(){x=this.__value,t(13,x)}function Ee(){x=this.__value,t(13,x)}return r.$$.update=()=>{r.$$.dirty[1]&256&&t(1,_=p?Array.from(p.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=w)},[w,_,f,d,g,y,k,v,o,h,a,b,C,x,A,z,K,W,X,l,T,R,Y,re,D,P,F,j,te,I,ee,U,ae,he,we,Be,Me,S,ce,p,$,ve,ie,ke,ze,We,je,ne,_e,Ne,de,Ee]}class Vl extends gt{constructor(e){super(),_t(this,e,Nl,Hl,pt,{handleConnect:37,subscribeToOutput:38},null,[-1,-1,-1])}get handleConnect(){return this.$$.ctx[37]}get subscribeToOutput(){return this.$$.ctx[38]}}function Kl(r){return window.go.main.App.AddConnection(r)}function ql(r,e){return window.go.main.App.CalculateHash(r,e)}function Vr(r){return window.go.main.App.CancelTransfer(r)}function Gl(r,e){return window.go.main.App.ChangeDirectory(r,e)}function Jl(r){return window.go.main.App.CloseSSH(r)}function Xl(r,e,t,l){return window.go.main.App.ConnectLocalShell(r,e,t,l)}function Yl(r,e,t,l,p,w,_,i,n){return window.go.main.App.ConnectSSH(r,e,t,l,p,w,_,i,n)}function Zl(r,e){return window.go.main.App.CreateDirectory(r,e)}function Ql(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function $l(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function ea(r){return window.go.main.App.DecodeBase64(r)}function ta(r,e,t,l){return window.go.main.App.DecryptText(r,e,t,l)}function ra(r,e){return window.go.main.App.DeleteFile(r,e)}function mn(r,e){return window.go.main.App.DeleteFiles(r,e)}function ia(r){return window.go.main.App.DeletePassword(r)}function sa(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function vn(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function na(r){return window.go.main.App.EncodeBase64(r)}function oa(r,e,t,l){return window.go.main.App.EncryptText(r,e,t,l)}function la(r){return window.go.main.App.EscapeJSON(r)}function aa(r){return window.go.main.App.ExportConnections(r)}function ca(r,e){return window.go.main.App.ExportConnectionsByIDs(r,e)}function ha(r,e){return window.go.main.App.ExportConnectionsByIDsWithPassphrase(r,e)}function da(r){return window.go.main.App.FormatJSON(r)}function ua(){return window.go.main.App.GenerateUUIDv4()}function fa(r){return window.go.main.App.GetConnection(r)}function pa(){return window.go.main.App.GetConnections()}function _a(r){return window.go.main.App.GetCurrentPath(r)}function ga(){return window.go.main.App.GetCurrentTimestamp()}function ma(){return window.go.main.App.GetCurrentTimestampMs()}function va(r,e){return window.go.main.App.GetFileInfo(r,e)}function ba(r){return window.go.main.App.GetFileManagerSettings(r)}function ya(r){return window.go.main.App.GetMonitoringData(r)}function wa(r){return window.go.main.App.GetPassword(r)}function ka(){return window.go.main.App.GetSettings()}function Sa(r){return window.go.main.App.GetTransferStatus(r)}function Ca(){return window.go.main.App.GetVersion()}function xa(r){return window.go.main.App.Greet(r)}function Ea(r){return window.go.main.App.HasPassword(r)}function La(r){return window.go.main.App.ImportConnections(r)}function Ma(r){return window.go.main.App.ImportConnectionsFromFile(r)}function Da(r,e){return window.go.main.App.ImportConnectionsFromFileWithPassphrase(r,e)}function Ta(r,e){return window.go.main.App.ImportConnectionsWithPassphrase(r,e)}function bn(r,e){return window.go.main.App.ListFiles(r,e)}function Ba(){return window.go.main.App.ListSSHSessions()}function Aa(r){return window.go.main.App.MinifyJSON(r)}function Ra(r){return window.go.main.App.ParseURL(r)}function Oa(r){return window.go.main.App.RemoveConnection(r)}function yn(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function Pa(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function Ha(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function Ia(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function Fa(r,e){return window.go.main.App.SavePassword(r,e)}function wn(r,e,t,l,p){return window.go.main.App.SearchDirectories(r,e,t,l,p)}function kn(){return window.go.main.App.SelectDownloadDirectory()}function Wa(){return window.go.main.App.SelectImportFile()}function ja(){return window.go.main.App.SelectSSHKeyFile()}function Sn(){return window.go.main.App.SelectUploadFiles()}function za(r,e){return window.go.main.App.SendLocalShellData(r,e)}function Ua(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function Na(r,e){return window.go.main.App.SendSSHData(r,e)}function Va(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function Ka(){return window.go.main.App.ShowAboutDialog()}function qa(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function Ga(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function Ja(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function Xa(r,e,t,l,p,w){return window.go.main.App.TestConnection(r,e,t,l,p,w)}function Ya(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function Za(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function Qa(r,e){return window.go.main.App.URLDecode(r,e)}function $a(r,e){return window.go.main.App.URLEncode(r,e)}function ec(r){return window.go.main.App.UpdateConnection(r)}function tc(r,e){return window.go.main.App.UpdateCurrentPath(r,e)}function rc(r,e){return window.go.main.App.UpdateFileManagerSettings(r,e)}function ic(r){return window.go.main.App.UpdateSettings(r)}function Cn(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function sc(r){return window.go.main.App.ValidateJSON(r)}const xn=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:Kl,CalculateHash:ql,CancelTransfer:Vr,ChangeDirectory:Gl,CloseSSH:Jl,ConnectLocalShell:Xl,ConnectSSH:Yl,CreateDirectory:Zl,DateTimeToTimestamp:Ql,DateTimeToTimestampMs:$l,DecodeBase64:ea,DecryptText:ta,DeleteFile:ra,DeleteFiles:mn,DeletePassword:ia,DownloadFile:sa,DownloadFiles:vn,EncodeBase64:na,EncryptText:oa,EscapeJSON:la,ExportConnections:aa,ExportConnectionsByIDs:ca,ExportConnectionsByIDsWithPassphrase:ha,FormatJSON:da,GenerateUUIDv4:ua,GetConnection:fa,GetConnections:pa,GetCurrentPath:_a,GetCurrentTimestamp:ga,GetCurrentTimestampMs:ma,GetFileInfo:va,GetFileManagerSettings:ba,GetMonitoringData:ya,GetPassword:wa,GetSettings:ka,GetTransferStatus:Sa,GetVersion:Ca,Greet:xa,HasPassword:Ea,ImportConnections:La,ImportConnectionsFromFile:Ma,ImportConnectionsFromFileWithPassphrase:Da,ImportConnectionsWithPassphrase:Ta,ListFiles:bn,ListSSHSessions:Ba,MinifyJSON:Aa,ParseURL:Ra,RemoveConnection:Oa,RenameFile:yn,ResizeLocalShell:Pa,ResizeSSH:Ha,SaveBinaryFile:Ia,SavePassword:Fa,SearchDirectories:wn,SelectDownloadDirectory:kn,SelectImportFile:Wa,SelectSSHKeyFile:ja,SelectUploadFiles:Sn,SendLocalShellData:za,SendLocalShellDataBinary:Ua,SendSSHData:Na,SendSSHDataBinary:Va,ShowAboutDialog:Ka,ShowErrorDialog:qa,ShowMessageDialog:Ga,ShowQuestionDialog:Ja,TestConnection:Xa,TimestampToDateTime:Ya,TimestampToDateTimeMs:Za,URLDecode:Qa,URLEncode:$a,UpdateConnection:ec,UpdateCurrentPath:tc,UpdateFileManagerSettings:rc,UpdateSettings:ic,UploadFiles:Cn,ValidateJSON:sc},Symbol.toStringTag,{value:"Module"})),nc={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:oc,set:lc,update:Pt}=Kt(nc),Tr={subscribe:oc,set:lc,addTransfer:r=>Pt(e=>{const t=e.transfers.filter(p=>p.status!=="running");let l=e.transfers;if(t.length>=e.maxHistory){const p=t.length-e.maxHistory+1,w=t.slice(0,p).map(_=>_.id);l=e.transfers.filter(_=>!w.includes(_.id))}return{...e,transfers:[r,...l]}}),updateTransfer:(r,e)=>Pt(t=>({...t,transfers:t.transfers.map(l=>l.id===r?{...l,...e}:l)})),cancelTransfer:r=>Pt(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>Pt(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>Pt(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>Pt(r=>({...r,transfers:[]})),togglePanel:()=>Pt(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>Pt(e=>({...e,isPanelOpen:r})),setActiveTab:r=>Pt(e=>({...e,activeTab:r}))};function Ht(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function Li(r){return r?`${Ht(r)}/s`:"0 B/s"}function Cr(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const ac=Rt(Tr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),cc=Rt(Tr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));Rt(Tr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(w=>w.status==="running");if(e.length===0)return 0;let t=0,l=0;return e.forEach(w=>{const _=w.totalBytes||0,i=w.bytesSent||0;t+=_,l+=i}),t>0?l/t*100:e.reduce((w,_)=>_.totalBytes?w+_.bytesSent/_.totalBytes*100:w+(_.percentage||0),0)/e.length});const St=Tr,{Map:Br}=sn;function Mi(r,e,t){const l=r.slice();return l[113]=e[t],l[115]=t,l}function Di(r,e,t){const l=r.slice();return l[116]=e[t],l[115]=t,l}function Ti(r,e,t){const l=r.slice();return l[118]=e[t],l[115]=t,l}function Bi(r,e,t){const l=r.slice();return l[113]=e[t],l[115]=t,l}function Ai(r){let e,t,l,p,w,_,i=r[4]?"跟踪中":"已暂停",n,f,m,d;return{c(){e=L("button"),t=oe("svg"),l=oe("path"),p=oe("path"),w=O(),_=L("span"),n=Z(i),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(t,"class","w-3 h-3"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[6],s(e,"class",f=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${r[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`),s(e,"title","切换目录跟踪")},m(g,y){V(g,e,y),c(e,t),c(t,l),c(t,p),c(e,w),c(e,_),c(_,n),m||(d=Q(e,"click",r[65]),m=!0)},p(g,y){y[0]&16&&i!==(i=g[4]?"跟踪中":"已暂停")&&ue(n,i),y[0]&64&&(e.disabled=g[6]),y[0]&16&&f!==(f=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${g[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`)&&s(e,"class",f)},d(g){g&&N(e),m=!1,d()}}}function hc(r){let e,t,l;function p(i,n){return i[3]==="/"?fc:uc}let w=p(r),_=w(r);return{c(){e=L("span"),_.c(),s(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),s(e,"title","点击编辑路径")},m(i,n){V(i,e,n),_.m(e,null),t||(l=Q(e,"click",r[51]),t=!0)},p(i,n){w===(w=p(i))&&_?_.p(i,n):(_.d(1),_=w(i),_&&(_.c(),_.m(e,null)))},d(i){i&&N(e),_.d(),t=!1,l()}}}function dc(r){let e,t,l,p,w;return{c(){e=L("span"),e.textContent="/",t=O(),l=L("input"),s(e,"class","text-gray-400 dark:text-gray-500"),s(l,"type","text"),s(l,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(_,i){V(_,e,i),V(_,t,i),V(_,l,i),Le(l,r[21]),p||(w=[Q(l,"input",r[68]),Q(l,"keydown",r[69]),Q(l,"blur",r[52]),rn(En.call(null,l))],p=!0)},p(_,i){i[0]&2097152&&l.value!==_[21]&&Le(l,_[21])},d(_){_&&(N(e),N(t),N(l)),p=!1,Fe(w)}}}function uc(r){let e=r[3].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=Z(e)},m(l,p){V(l,t,p)},p(l,p){p[0]&8&&e!==(e=l[3].split("/").filter(Boolean).join(" / ")+"")&&ue(t,e)},d(l){l&&N(t)}}}function fc(r){let e;return{c(){e=Z("/")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function Ri(r){let e,t,l,p,w,_;function i(m,d){return m[28].length>0?_c:pc}let n=i(r),f=n(r);return{c(){e=L("div"),t=L("div"),l=L("input"),p=O(),f.c(),s(l,"type","text"),s(l,"placeholder","搜索历史..."),s(l,"class","w-full px-2 py-1 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"),s(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg w-64 max-h-64 overflow-y-auto z-10")},m(m,d){V(m,e,d),c(e,t),c(t,l),Le(l,r[2]),c(e,p),f.m(e,null),w||(_=Q(l,"input",r[71]),w=!0)},p(m,d){d[0]&4&&l.value!==m[2]&&Le(l,m[2]),n===(n=i(m))&&f?f.p(m,d):(f.d(1),f=n(m),f&&(f.c(),f.m(e,null)))},d(m){m&&N(e),f.d(),w=!1,_()}}}function pc(r){let e,t=r[2]?"无匹配的历史":"暂无历史记录",l;return{c(){e=L("div"),l=Z(t),s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(p,w){V(p,e,w),c(e,l)},p(p,w){w[0]&4&&t!==(t=p[2]?"无匹配的历史":"暂无历史记录")&&ue(l,t)},d(p){p&&N(e)}}}function _c(r){let e=[],t=new Br,l,p=Ke(r[28]);const w=_=>_[113];for(let _=0;_<p.length;_+=1){let i=Bi(r,p,_),n=w(i);t.set(n,e[_]=Oi(n,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();l=wt()},m(_,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(_,i);V(_,l,i)},p(_,i){i[0]&268435972|i[1]&131072&&(p=Ke(_[28]),e=Lt(e,i,w,1,_,p,t,l.parentNode,Mt,Oi,l,Bi))},d(_){_&&N(l);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function Oi(r,e){let t,l=e[113]+"",p,w,_,i;function n(){return e[72](e[113])}return{key:r,first:null,c(){t=L("button"),p=Z(l),w=O(),s(t,"class","w-full text-left px-3 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-purple-50 dark:hover:bg-purple-900/30 truncate"),this.first=t},m(f,m){V(f,t,m),c(t,p),c(t,w),_||(i=Q(t,"click",n),_=!0)},p(f,m){e=f,m[0]&268435456&&l!==(l=e[113]+"")&&ue(p,l)},d(f){f&&N(t),_=!1,i()}}}function Pi(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o=r[13]&&Hi();function h(b,E){if(E[0]&10240&&(d=null),b[12].length>0)return mc;if(d==null&&(d=!!(b[11].trim()&&!b[13])),d)return gc}let a=h(r,[-1,-1,-1,-1]),u=a&&a(r);return{c(){e=L("div"),t=L("div"),l=L("div"),p=L("div"),w=L("input"),_=O(),i=oe("svg"),n=oe("path"),f=O(),o&&o.c(),m=O(),u&&u.c(),g=O(),y=L("button"),y.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',s(w,"type","text"),s(w,"placeholder","搜索文件夹名称..."),s(w,"class","w-full px-3 py-2 pl-9 text-xs bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(i,"class","w-4 h-4 text-amber-500 absolute left-3 top-1/2 transform -translate-y-1/2"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(p,"class","relative"),s(l,"class","relative flex-1"),s(y,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(y,"title","取消"),s(t,"class","flex items-center gap-2"),s(e,"class","mt-2 relative")},m(b,E){V(b,e,E),c(e,t),c(t,l),c(l,p),c(p,w),Le(w,r[11]),c(p,_),c(p,i),c(i,n),c(p,f),o&&o.m(p,null),c(l,m),u&&u.m(l,null),c(t,g),c(t,y),k||(v=[Q(w,"input",r[73]),Q(w,"keydown",r[55]),Q(w,"input",r[54]),rn(En.call(null,w)),Q(y,"click",r[56])],k=!0)},p(b,E){E[0]&2048&&w.value!==b[11]&&Le(w,b[11]),b[13]?o||(o=Hi(),o.c(),o.m(p,null)):o&&(o.d(1),o=null),a===(a=h(b,E))&&u?u.p(b,E):(u&&u.d(1),u=a&&a(b),u&&(u.c(),u.m(l,null)))},d(b){b&&N(e),o&&o.d(),u&&u.d(),k=!1,Fe(v)}}}function Hi(r){let e,t,l;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","w-4 h-4 text-amber-500 absolute right-3 top-1/2 transform -translate-y-1/2 animate-spin"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),c(e,l)},d(p){p&&N(e)}}}function gc(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center">未找到匹配的文件夹</div>',s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function mc(r){let e,t,l,p=r[12].length+"",w,_,i,n=[],f=new Br,m=Ke(r[12]);const d=g=>g[118].path;for(let g=0;g<m.length;g+=1){let y=Ti(r,m,g),k=d(y);f.set(k,n[g]=Ii(k,y))}return{c(){e=L("div"),t=L("div"),l=Z("找到 "),w=Z(p),_=Z(" 个文件夹"),i=O();for(let g=0;g<n.length;g+=1)n[g].c();s(t,"class","px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"),s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto z-10")},m(g,y){V(g,e,y),c(e,t),c(t,l),c(t,w),c(t,_),c(e,i);for(let k=0;k<n.length;k+=1)n[k]&&n[k].m(e,null)},p(g,y){y[0]&4096&&p!==(p=g[12].length+"")&&ue(w,p),y[0]&22528|y[1]&33685504&&(m=Ke(g[12]),n=Lt(n,y,d,1,g,m,f,e,Mt,Ii,null,Ti))},d(g){g&&N(e);for(let y=0;y<n.length;y+=1)n[y].d()}}}function Ii(r,e){let t,l,p,w,_,i,n,f=Vi(e[118].name,e[11])+"",m,d,g=e[118].path+"",y,k,v,o,h;function a(){return e[74](e[118])}function u(){return e[75](e[115])}return{key:r,first:null,c(){t=L("button"),l=L("div"),p=oe("svg"),w=oe("path"),_=O(),i=L("div"),n=L("div"),m=O(),d=L("div"),y=Z(g),k=O(),s(w,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(p,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(p,"fill","currentColor"),s(p,"viewBox","0 0 24 24"),s(n,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-400 dark:text-gray-500 text-[10px] truncate"),s(i,"class","flex-1 min-w-0"),s(l,"class","flex items-center gap-2"),s(t,"class",v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`),this.first=t},m(b,E){V(b,t,E),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,n),n.innerHTML=f,c(i,m),c(i,d),c(d,y),c(t,k),o||(h=[Q(t,"click",a),Q(t,"mouseenter",u)],o=!0)},p(b,E){e=b,E[0]&6144&&f!==(f=Vi(e[118].name,e[11])+"")&&(n.innerHTML=f),E[0]&4096&&g!==(g=e[118].path+"")&&ue(y,g),E[0]&20480&&v!==(v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`)&&s(t,"class",v)},d(b){b&&N(t),o=!1,Fe(h)}}}function vc(r){let e=[],t=new Br,l,p=Ke(r[29]);const w=_=>_[116].path;for(let _=0;_<p.length;_+=1){let i=Di(r,p,_),n=w(i);t.set(n,e[_]=Fi(n,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();l=wt()},m(_,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(_,i);V(_,l,i)},p(_,i){i[0]&537165824|i[1]&131312&&(p=Ke(_[29]),e=Lt(e,i,w,1,_,p,t,l.parentNode,Mt,Fi,l,Di))},d(_){_&&N(l);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function bc(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function yc(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function wc(r){let e,t,l,p,w,_,i,n,f,m;return{c(){e=L("div"),t=oe("svg"),l=oe("path"),p=O(),w=L("span"),_=Z(r[17]),i=O(),n=L("button"),n.textContent="重试",s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(t,"class","w-6 h-6"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(w,"class","text-center px-4"),s(n,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),s(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(d,g){V(d,e,g),c(e,t),c(t,l),c(e,p),c(e,w),c(w,_),c(e,i),c(e,n),f||(m=Q(n,"click",r[33]),f=!0)},p(d,g){g[0]&131072&&ue(_,d[17])},d(d){d&&N(e),f=!1,m()}}}function kc(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function Sc(r){let e,t,l,p,w,_,i,n=r[116].name+"",f,m,d,g,y=Ht(r[116].size)+"",k,v,o,h,a,u=r[116].modified+"",b,E,C,x=r[116].mode+"",S;return{c(){e=L("div"),t=O(),l=oe("svg"),p=oe("path"),w=O(),_=L("div"),i=L("div"),f=Z(n),m=O(),d=L("div"),g=L("span"),k=Z(y),v=O(),o=L("span"),o.textContent="•",h=O(),a=L("span"),b=Z(u),E=O(),C=L("span"),S=Z(x),s(e,"class","w-3"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),s(l,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),s(_,"class","flex-1 min-w-0"),s(C,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(M,T){V(M,e,T),V(M,t,T),V(M,l,T),c(l,p),V(M,w,T),V(M,_,T),c(_,i),c(i,f),c(_,m),c(_,d),c(d,g),c(g,k),c(d,v),c(d,o),c(d,h),c(d,a),c(a,b),V(M,E,T),V(M,C,T),c(C,S)},p(M,T){T[0]&536870912&&n!==(n=M[116].name+"")&&ue(f,n),T[0]&536870912&&y!==(y=Ht(M[116].size)+"")&&ue(k,y),T[0]&536870912&&u!==(u=M[116].modified+"")&&ue(b,u),T[0]&536870912&&x!==(x=M[116].mode+"")&&ue(S,x)},d(M){M&&(N(e),N(t),N(l),N(w),N(_),N(E),N(C))}}}function Cc(r){let e,t,l,p,w,_,i,n=r[116].name+"",f;function m(y,k){return k[0]&536903680&&(e=null),e==null&&(e=!!y[15].has(y[116].path)),e?Lc:Ec}let d=m(r,[-1,-1,-1,-1]),g=d(r);return{c(){g.c(),t=O(),l=oe("svg"),p=oe("path"),w=O(),_=L("div"),i=L("div"),f=Z(n),s(p,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(l,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(l,"fill","currentColor"),s(l,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(_,"class","flex-1 min-w-0")},m(y,k){g.m(y,k),V(y,t,k),V(y,l,k),c(l,p),V(y,w,k),V(y,_,k),c(_,i),c(i,f)},p(y,k){d!==(d=m(y,k))&&(g.d(1),g=d(y),g&&(g.c(),g.m(t.parentNode,t))),k[0]&536870912&&n!==(n=y[116].name+"")&&ue(f,n)},d(y){y&&(N(t),N(l),N(w),N(_)),g.d(y)}}}function xc(r){let e,t,l,p,w,_=r[116].name+"",i,n,f;return{c(){e=oe("svg"),t=oe("path"),l=O(),p=L("div"),w=L("div"),i=Z(_),n=O(),f=L("div"),f.textContent="返回上一层",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),s(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24"),s(w,"class","text-gray-600 dark:text-gray-300"),s(f,"class","text-gray-400 dark:text-gray-500 text-[10px]"),s(p,"class","flex-1 min-w-0")},m(m,d){V(m,e,d),c(e,t),V(m,l,d),V(m,p,d),c(p,w),c(w,i),c(p,n),c(p,f)},p(m,d){d[0]&536870912&&_!==(_=m[116].name+"")&&ue(i,_)},d(m){m&&(N(e),N(l),N(p))}}}function Ec(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function Lc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function Fi(r,e){let t,l,p,w,_;function i(y,k){return y[116].is_parent?xc:y[116].is_dir?Cc:Sc}let n=i(e),f=n(e);function m(){return e[76](e[116])}function d(){return e[77](e[116])}function g(...y){return e[78](e[116],...y)}return{key:r,first:null,c(){t=L("div"),f.c(),l=O(),s(t,"class",p="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(y,k){V(y,t,k),f.m(t,null),c(t,l),w||(_=[Q(t,"click",m),Q(t,"dblclick",d),Q(t,"contextmenu",g)],w=!0)},p(y,k){e=y,n===(n=i(e))&&f?f.p(e,k):(f.d(1),f=n(e),f&&(f.c(),f.m(t,l))),k[0]&537133056&&p!==(p="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&s(t,"class",p)},d(y){y&&N(t),f.d(),w=!1,Fe(_)}}}function Wi(r){let e,t,l,p,w,_,i,n,f,m,d;return{c(){var g;e=L("div"),t=L("button"),l=Z("下载"),w=O(),_=L("button"),_.textContent="重命名",i=O(),n=L("button"),n.textContent="删除",s(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=p=(g=r[19].file)==null?void 0:g.is_dir,s(_,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),s(n,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),s(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),s(e,"style",f=`left: ${r[19].x}px; top: ${r[19].y}px;`)},m(g,y){V(g,e,y),c(e,t),c(t,l),c(e,w),c(e,_),c(e,i),c(e,n),m||(d=[Q(t,"click",r[44]),Q(_,"click",r[45]),Q(n,"click",r[43])],m=!0)},p(g,y){var k;y[0]&524288&&p!==(p=(k=g[19].file)==null?void 0:k.is_dir)&&(t.disabled=p),y[0]&524288&&f!==(f=`left: ${g[19].x}px; top: ${g[19].y}px;`)&&s(e,"style",f)},d(g){g&&N(e),m=!1,Fe(d)}}}function ji(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J,D,P,F,j,q,W,X,te=r[0].historyEnabled&&zi(r),I=r[0].historyEnabled&&r[0].history.length>0&&Ui(r);return{c(){e=L("div"),t=L("div"),l=O(),p=L("div"),w=L("div"),_=L("div"),i=L("div"),i.innerHTML='<div class="p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div><h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">文件管理设置</h3> <div class="text-[11px] uppercase tracking-[0.15em] text-slate-400 dark:text-slate-500 mt-0.5">Preferences</div></div>',n=O(),f=L("button"),f.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),d=L("div"),g=L("div"),y=L("div"),y.innerHTML='<svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">功能设置</span>',k=O(),v=L("div"),o=L("div"),o.innerHTML='<div class="p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">目录跟踪</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">实时同步终端目录变化</div></div>',h=O(),a=L("button"),u=L("span"),C=O(),x=L("div"),S=L("div"),S.innerHTML='<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">历史记录</span>',M=O(),T=L("div"),R=L("div"),R.innerHTML='<div class="p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">启用历史记录</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">自动记录访问过的目录</div></div>',H=O(),A=L("button"),z=L("span"),re=O(),te&&te.c(),J=O(),I&&I.c(),D=O(),P=L("div"),F=L("button"),F.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            恢复默认`,j=O(),q=L("button"),q.textContent="完成",s(t,"class","fixed inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(i,"class","flex items-center gap-3"),s(f,"class","p-2 rounded-xl transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(f,"title","关闭"),s(_,"class","flex items-center justify-between"),s(w,"class","px-5 py-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-b border-slate-200/70 dark:border-slate-800/80"),s(y,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(o,"class","flex items-center gap-3"),s(u,"class",b=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].directoryTracking?"translate-x-6":"translate-x-1"}`),s(a,"class",E=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(v,"class","flex items-center justify-between py-2"),s(g,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(S,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(R,"class","flex items-center gap-3"),s(z,"class",K=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].historyEnabled?"translate-x-6":"translate-x-1"}`),s(A,"class",Y=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(T,"class","flex items-center justify-between py-2 mb-4"),s(x,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(d,"class","flex-1 overflow-y-auto p-5 space-y-4 bg-slate-50/50 dark:bg-slate-950/30"),s(F,"class","px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all duration-200 flex items-center gap-1.5"),s(q,"class","px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"),s(P,"class","p-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-t border-slate-200/70 dark:border-slate-800/80 flex justify-between items-center"),s(p,"class","relative bg-white/95 dark:bg-slate-900/90 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] w-[420px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(B,ee){V(B,e,ee),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(_,n),c(_,f),c(p,m),c(p,d),c(d,g),c(g,y),c(g,k),c(g,v),c(v,o),c(v,h),c(v,a),c(a,u),c(d,C),c(d,x),c(x,S),c(x,M),c(x,T),c(T,R),c(T,H),c(T,A),c(A,z),c(x,re),te&&te.m(x,null),c(d,J),I&&I.m(d,null),c(p,D),c(p,P),c(P,F),c(P,j),c(P,q),W||(X=[Q(t,"click",r[82]),Q(f,"click",r[83]),Q(a,"click",r[84]),Q(A,"click",r[85]),Q(F,"click",r[89]),Q(q,"click",r[90])],W=!0)},p(B,ee){ee[0]&1&&b!==(b=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${B[0].directoryTracking?"translate-x-6":"translate-x-1"}`)&&s(u,"class",b),ee[0]&1&&E!==(E=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${B[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(a,"class",E),ee[0]&1&&K!==(K=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${B[0].historyEnabled?"translate-x-6":"translate-x-1"}`)&&s(z,"class",K),ee[0]&1&&Y!==(Y=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${B[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(A,"class",Y),B[0].historyEnabled?te?te.p(B,ee):(te=zi(B),te.c(),te.m(x,null)):te&&(te.d(1),te=null),B[0].historyEnabled&&B[0].history.length>0?I?I.p(B,ee):(I=Ui(B),I.c(),I.m(d,null)):I&&(I.d(1),I=null)},d(B){B&&N(e),te&&te.d(),I&&I.d(),W=!1,Fe(X)}}}function zi(r){let e,t,l,p,w,_=r[0].historyLimit+"",i,n,f,m,d,g,y,k;return{c(){e=L("div"),t=L("div"),l=L("div"),l.innerHTML='<svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="text-xs font-medium text-slate-600 dark:text-slate-400">历史记录数量</span>',p=O(),w=L("span"),i=Z(_),n=O(),f=L("div"),m=L("input"),d=O(),g=L("div"),g.innerHTML="<span>5</span> <span>50</span>",s(l,"class","flex items-center gap-2"),s(w,"class","text-sm font-bold text-purple-600 dark:text-purple-400 min-w-[2rem] text-center"),s(t,"class","flex items-center justify-between mb-3"),s(m,"type","range"),s(m,"min","5"),s(m,"max","50"),s(m,"step","5"),s(m,"class","w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500/30"),s(g,"class","flex justify-between text-[10px] text-slate-400 mt-1.5"),s(f,"class","relative"),s(e,"class","py-3 px-3 bg-slate-50/80 dark:bg-slate-800/50 rounded-xl")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(t,p),c(t,w),c(w,i),c(e,n),c(e,f),c(f,m),Le(m,r[0].historyLimit),c(f,d),c(f,g),y||(k=[Q(m,"change",r[86]),Q(m,"input",r[86]),Q(m,"change",r[30])],y=!0)},p(v,o){o[0]&1&&_!==(_=v[0].historyLimit+"")&&ue(i,_),o[0]&1&&Le(m,v[0].historyLimit)},d(v){v&&N(e),y=!1,Fe(k)}}}function Ui(r){let e,t,l,p,w,_,i,n,f,m=r[0].history.length+"",d,g,y,k,v,o=[],h=new Br,a,u,b=Ke(r[0].history.slice().reverse());const E=C=>C[115];for(let C=0;C<b.length;C+=1){let x=Mi(r,b,C),S=E(x);h.set(S,o[C]=Ni(S,x))}return{c(){e=L("div"),t=L("div"),l=L("div"),p=oe("svg"),w=oe("path"),_=O(),i=L("span"),n=Z(`当前历史记录
                    `),f=L("span"),d=Z(m),g=O(),y=L("button"),y.innerHTML=`<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                  清空`,k=O(),v=L("div");for(let C=0;C<o.length;C+=1)o[C].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),s(p,"class","w-4 h-4 text-emerald-500"),s(p,"fill","none"),s(p,"stroke","currentColor"),s(p,"viewBox","0 0 24 24"),s(f,"class","ml-1.5 text-xs px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-full"),s(i,"class","text-sm font-semibold text-slate-700 dark:text-slate-200"),s(l,"class","flex items-center gap-2"),s(y,"class","text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1"),s(t,"class","flex items-center justify-between mb-3 pb-2 border-b border-slate-100 dark:border-slate-800/60"),s(v,"class","space-y-1.5 max-h-40 overflow-y-auto pr-1 scrollbar-thin"),s(e,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm")},m(C,x){V(C,e,x),c(e,t),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,n),c(i,f),c(f,d),c(t,g),c(t,y),c(e,k),c(e,v);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(v,null);a||(u=Q(y,"click",r[87]),a=!0)},p(C,x){x[0]&1&&m!==(m=C[0].history.length+"")&&ue(d,m),x[0]&1073741825&&(b=Ke(C[0].history.slice().reverse()),o=Lt(o,x,E,1,C,b,h,v,Mt,Ni,null,Mi))},d(C){C&&N(e);for(let x=0;x<o.length;x+=1)o[x].d();a=!1,u()}}}function Ni(r,e){let t,l,p,w=e[0].history.length-e[115]+"",_,i,n,f=e[113]+"",m,d,g,y,k,v;function o(){return e[88](e[113])}return{key:r,first:null,c(){t=L("div"),l=L("div"),p=L("div"),_=Z(w),i=O(),n=L("span"),m=Z(f),d=O(),g=L("button"),g.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',y=O(),s(p,"class","w-5 h-5 flex items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 font-bold text-[10px]"),s(n,"class","truncate text-slate-700 dark:text-slate-300 font-medium"),s(l,"class","flex items-center gap-2 flex-1 min-w-0"),s(g,"class","ml-2 p-1 rounded-md text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100"),s(g,"title","删除记录"),s(t,"class","group flex items-center justify-between text-xs py-2 px-3 bg-slate-50 dark:bg-slate-800/60 rounded-lg border border-slate-100 dark:border-slate-700/50 hover:border-purple-300 dark:hover:border-purple-700/50 transition-all duration-200"),this.first=t},m(h,a){V(h,t,a),c(t,l),c(l,p),c(p,_),c(l,i),c(l,n),c(n,m),c(t,d),c(t,g),c(t,y),k||(v=Q(g,"click",o),k=!0)},p(h,a){e=h,a[0]&1&&w!==(w=e[0].history.length-e[115]+"")&&ue(_,w),a[0]&1&&f!==(f=e[113]+"")&&ue(m,f)},d(h){h&&N(t),k=!1,v()}}}function Mc(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J,D,P,F,j,q,W,X,te,I,B,ee,U,le,ae,he,ye,pe,ge=r[0].directoryTracking&&Ai(r);function we(G,be){return G[20]?dc:hc}let Be=we(r),Me=Be(r),ce=r[9]&&r[0].historyEnabled&&Ri(r),de=r[10]&&Pi(r);function $(G,be){return G[16]?kc:G[17]?wc:G[29].length===0?yc:G[6]?bc:vc}let ve=$(r),ie=ve(r),ke=r[19].open&&Wi(r);function ze(G){r[79](G)}let We={title:"删除文件",message:r[23],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[41],onCancel:r[42]};r[22]!==void 0&&(We.isOpen=r[22]),W=new lr({props:We}),tt.push(()=>ut(W,"isOpen",ze));function je(G){r[80](G)}let ne={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[31],onCancel:r[32]};r[24]!==void 0&&(ne.isOpen=r[24]),I=new lr({props:ne}),tt.push(()=>ut(I,"isOpen",je));function _e(G){r[81](G)}let Ne={title:r[26],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[27],confirmText:"重命名",cancelText:"取消",onConfirm:r[46],onCancel:r[47]};r[25]!==void 0&&(Ne.isOpen=r[25]),U=new ur({props:Ne}),tt.push(()=>ut(U,"isOpen",_e));let Ee=r[8]&&ji(r);return{c(){e=L("div"),t=L("div"),l=L("div"),p=L("h3"),p.textContent="文件管理",w=O(),_=L("div"),i=L("button"),n=oe("svg"),f=oe("path"),m=O(),ge&&ge.c(),d=O(),g=L("button"),y=oe("svg"),k=oe("path"),v=O(),o=L("button"),o.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',h=O(),a=L("button"),u=oe("svg"),b=oe("path"),C=O(),x=L("button"),x.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',S=O(),M=L("div"),T=L("div"),R=L("button"),R.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',H=O(),Me.c(),A=O(),z=L("button"),z.innerHTML='<svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>',K=O(),Y=L("div"),re=L("button"),re.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',J=O(),ce&&ce.c(),D=O(),de&&de.c(),P=O(),F=L("div"),ie.c(),j=O(),ke&&ke.c(),q=O(),Ze(W.$$.fragment),te=O(),Ze(I.$$.fragment),ee=O(),Ze(U.$$.fragment),ae=O(),Ee&&Ee.c(),s(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"stroke-width","2"),s(f,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),s(n,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"viewBox","0 0 24 24"),i.disabled=r[6],s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(i,"title","刷新"),s(k,"stroke-linecap","round"),s(k,"stroke-linejoin","round"),s(k,"stroke-width","2"),s(k,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(y,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),s(y,"fill","none"),s(y,"stroke","currentColor"),s(y,"viewBox","0 0 24 24"),g.disabled=r[6],s(g,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(g,"title","上传到服务器"),s(o,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(o,"title","下载到本地"),s(b,"stroke-linecap","round"),s(b,"stroke-linejoin","round"),s(b,"stroke-width","2"),s(b,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),s(u,"class","w-4 h-4 text-red-500 dark:text-red-400"),s(u,"fill","none"),s(u,"stroke","currentColor"),s(u,"viewBox","0 0 24 24"),a.disabled=E=r[6]||r[18].size===0,s(a,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(a,"title","删除选中"),s(x,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(x,"title","文件管理设置"),s(_,"class","flex items-center gap-1"),s(l,"class","flex items-center justify-between mb-2"),s(R,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(R,"title","根目录"),s(T,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),s(z,"class","p-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors"),s(z,"title","模糊搜索文件夹"),s(re,"class","p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors"),s(re,"title","路径历史"),s(Y,"class","relative"),s(M,"class","flex items-center gap-2"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(F,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(G,be){V(G,e,be),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(_,i),c(i,n),c(n,f),c(_,m),ge&&ge.m(_,null),c(_,d),c(_,g),c(g,y),c(y,k),c(_,v),c(_,o),c(_,h),c(_,a),c(a,u),c(u,b),c(_,C),c(_,x),c(t,S),c(t,M),c(M,T),c(T,R),c(T,H),Me.m(T,null),c(M,A),c(M,z),c(M,K),c(M,Y),c(Y,re),c(Y,J),ce&&ce.m(Y,null),c(t,D),de&&de.m(t,null),c(e,P),c(e,F),ie.m(F,null),c(e,j),ke&&ke.m(e,null),c(e,q),Xe(W,e,null),c(e,te),Xe(I,e,null),c(e,ee),Xe(U,e,null),c(e,ae),Ee&&Ee.m(e,null),he=!0,ye||(pe=[Q(i,"click",r[33]),Q(g,"click",r[34]),Q(a,"click",r[40]),Q(x,"click",r[66]),Q(R,"click",r[67]),Q(z,"click",r[57]),Q(re,"click",r[70]),Q(F,"click",r[39])],ye=!0)},p(G,be){(!he||be[0]&64)&&(i.disabled=G[6]),G[0].directoryTracking?ge?ge.p(G,be):(ge=Ai(G),ge.c(),ge.m(_,d)):ge&&(ge.d(1),ge=null),(!he||be[0]&64)&&(g.disabled=G[6]),(!he||be[0]&262208&&E!==(E=G[6]||G[18].size===0))&&(a.disabled=E),Be===(Be=we(G))&&Me?Me.p(G,be):(Me.d(1),Me=Be(G),Me&&(Me.c(),Me.m(T,null))),G[9]&&G[0].historyEnabled?ce?ce.p(G,be):(ce=Ri(G),ce.c(),ce.m(Y,null)):ce&&(ce.d(1),ce=null),G[10]?de?de.p(G,be):(de=Pi(G),de.c(),de.m(t,null)):de&&(de.d(1),de=null),ve===(ve=$(G))&&ie?ie.p(G,be):(ie.d(1),ie=ve(G),ie&&(ie.c(),ie.m(F,null))),G[19].open?ke?ke.p(G,be):(ke=Wi(G),ke.c(),ke.m(e,q)):ke&&(ke.d(1),ke=null);const Ce={};be[0]&8388608&&(Ce.message=G[23]),!X&&be[0]&4194304&&(X=!0,Ce.isOpen=G[22],dt(()=>X=!1)),W.$set(Ce);const Se={};!B&&be[0]&16777216&&(B=!0,Se.isOpen=G[24],dt(()=>B=!1)),I.$set(Se);const Ae={};be[0]&67108864&&(Ae.title=G[26]),be[0]&134217728&&(Ae.defaultValue=G[27]),!le&&be[0]&33554432&&(le=!0,Ae.isOpen=G[25],dt(()=>le=!1)),U.$set(Ae),G[8]?Ee?Ee.p(G,be):(Ee=ji(G),Ee.c(),Ee.m(e,null)):Ee&&(Ee.d(1),Ee=null)},i(G){he||(Oe(W.$$.fragment,G),Oe(I.$$.fragment,G),Oe(U.$$.fragment,G),he=!0)},o(G){Ie(W.$$.fragment,G),Ie(I.$$.fragment,G),Ie(U.$$.fragment,G),he=!1},d(G){G&&N(e),ge&&ge.d(),Me.d(),ce&&ce.d(),de&&de.d(),ie.d(),ke&&ke.d(),Ye(W),Ye(I),Ye(U),Ee&&Ee.d(),ye=!1,Fe(pe)}}}function En(r){return r.focus(),{destroy(){}}}function Dc(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function Vi(r,e){if(!e)return r;const t=new RegExp(`(${Tc(e)})`,"gi");return r.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100 px-0.5 rounded">$1</mark>')}function Tc(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bc(r,e,t){let l,p,w,_,i,n,f,m,d,g,y,k;vt(r,At,se=>t(63,g=se)),vt(r,zt,se=>t(64,y=se)),vt(r,St,se=>t(98,k=se));let v=new Map,o={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]},h=new Map,a=null,u=!1,b=!1,E=!1,C="",x=!1,S="",M=[],T=!1,R=-1,H=null,A=new Set([]),z=[],K=!1,Y=null,re=new Set,J=[],D={open:!1,x:0,y:0,file:null},P=!1,F="",j=!1,q="",W=[],X=!1,te=null,I=!1,B="",ee="",U=null;async function le(se){try{const{GetFileManagerSettings:De}=window.wailsBindings;if(typeof De!="function")return;const Je=await De(se);if(t(0,o={directoryTracking:(Je==null?void 0:Je.directory_tracking)??!1,historyEnabled:(Je==null?void 0:Je.history_enabled)??!0,historyLimit:(Je==null?void 0:Je.history_limit)??5,history:(Je==null?void 0:Je.history)??[]}),!h.has(se)){const lt=new Map(h);lt.set(se,o.directoryTracking||!1),t(1,h=lt)}}catch(De){console.error("Failed to load file manager config:",De)}}async function ae(){try{const{UpdateFileManagerSettings:se}=window.wailsBindings;if(typeof se!="function"||!m)return;await se(m,{directory_tracking:o.directoryTracking,history_enabled:o.historyEnabled,history_limit:o.historyLimit,history:o.history})}catch(se){console.error("Failed to save file manager settings:",se)}}let he="/";function ye(se){return se&&v.get(se)||"/"}function pe(se,De){if(!se)return;const Je=new Map(v);Je.set(se,De),t(58,v=Je)}async function ge(se){if(!(!y||!p)&&!w){t(16,K=!0),t(17,Y=null);try{const De=await bn(y,se);t(59,z=De||[]),pe(y,se),t(3,he=se)}catch(De){console.error("Failed to load directory:",De),t(17,Y=De.message||"加载目录失败")}finally{t(16,K=!1)}}}async function we(){t(24,X=!1);const se=te;if(te=null,se)try{await Vr(se.id)}catch(De){console.error("Cancel transfer failed:",De)}St.cancelTransfer(se.id)}function Be(){t(24,X=!1),te=null}async function Me(){await ge(he)}async function ce(){if(!(!y||!p||w))try{const se=await Sn();if(!se||se.length===0)return;(await Cn(y,se,he)).forEach(Je=>Ce(Je,"upload")),setTimeout(()=>ge(he),2e3)}catch(se){console.error("Upload failed:",se),t(17,Y=se.message||"上传失败")}}async function de(se){if(!(!y||!p||w||se.is_dir))try{const De=await kn();if(!De)return;(await vn(y,[se.path],De)).forEach(lt=>Ce(lt,"download"))}catch(De){console.error("Download failed:",De),t(17,Y=De.message||"下载失败")}}function $(se){!se||se.is_parent||t(18,re=new Set([se.path]))}function ve(se){!se||se.is_parent||$(se)}function ie(se){!se||!se.is_parent||Se(se.path,!0)}function ke(se,De){De!=null&&De.is_parent||(se.preventDefault(),$(De),t(19,D={open:!0,x:se.clientX,y:se.clientY,file:De}))}function ze(){D.open&&t(19,D={...D,open:!1})}async function We(){if(!y||!p||w||re.size===0)return;W=Array.from(re);const se=W.length;t(23,q=se===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${se} 个文件/文件夹吗？`),t(22,j=!0)}async function je(){t(22,j=!1);try{await mn(y,W),t(18,re=new Set),W=[],await ge(he)}catch(se){console.error("Delete failed:",se),t(17,Y=se.message||"删除失败")}}function ne(){t(22,j=!1),W=[]}async function _e(){const se=D.file;se&&(ze(),W=[se.path],t(23,q=`确定要删除 "${se.name}" 吗？`),t(22,j=!0))}async function Ne(){const se=D.file;ze(),se&&!se.is_dir&&await de(se)}async function Ee(){const se=D.file;ze(),se&&(U=se,t(26,B="重命名"),t(27,ee=se.name),t(25,I=!0))}async function G(se){t(25,I=!1);const De=U;if(U=null,!(!De||!se||se.trim()===De.name))try{const lt=`${he.endsWith("/")?he:`${he}/`}${se.trim()}`;await yn(y,De.path,lt),await ge(he)}catch(Je){console.error("Rename failed:",Je),t(17,Y=Je.message||"重命名失败")}}function be(){t(25,I=!1),U=null}function Ce(se,De){const Je=`sftp:progress:${se}`,lt=gr(Je,st=>{if(De==="upload"){const ft={id:se,filename:st.filename||st.fileName||"unknown",bytesSent:st.bytes_sent??st.bytesSent??0,totalBytes:st.total_bytes??st.totalBytes??0,percentage:st.percentage??0,speed:st.speed??0,status:st.status||"running",error:st.error||""};k.transfers.find(tr=>tr.id===se)?St.updateTransfer(se,ft):St.addTransfer(ft)}});J.push(lt)}function Se(se,De=!1){if(De&&d&&m){const Je=new Map(h);Je.set(m,!1),t(1,h=Je),t(7,u=!0)}if(o.historyEnabled&&se!==he){const Je=o.historyLimit||5,lt=[...o.history||[]],st=lt.indexOf(se);st!==-1&&lt.splice(st,1),lt.unshift(se);const ft=lt.slice(0,Je);t(0,o.history=ft,o),ae()}ge(se)}async function Ae(){if(y)try{const{GetCurrentPath:se}=window.wailsBindings;if(typeof se!="function")return;const De=await se(y);De&&De!==he&&(t(7,u=!1),Se(De,!1))}catch(se){console.error("Failed to sync directory from server:",se)}}function Re(){if(!o.directoryTracking||!d||a)return;const se=y;se&&(a=gr(`ssh:cwd:${se}`,De=>{De&&De!==he&&!u&&Se(De,!1)}))}function He(){a&&(a(),a=null)}function xe(se){if(se===-1)Se("/",!0);else{const De="/"+n.slice(0,se+1).join("/");Se(De,!0)}}function qe(){t(21,F=he),t(20,P=!0)}function ht(){F.trim()&&Se(F.trim(),!0),t(20,P=!1)}function $e(){t(20,P=!1),t(21,F="")}async function rt(){if(!(!S.trim()||!y)){H&&H.abort(),H=new AbortController,t(13,T=!0),t(12,M=[]),t(14,R=-1);try{const se=await wn(y,he,S.trim(),3,50);if(H.signal.aborted)return;t(12,M=se||[])}catch(se){console.error("Directory search failed:",se),t(17,Y=se.message||"搜索失败")}finally{t(13,T=!1)}}}let bt;function Ve(){clearTimeout(bt),S.trim().length>=1?bt=setTimeout(()=>{rt()},300):t(12,M=[])}function it(se){se.key==="Enter"?(se.preventDefault(),R>=0&&M[R]?(Se(M[R].path,!0),at()):rt()):se.key==="Escape"?at():se.key==="ArrowDown"?(se.preventDefault(),R<M.length-1&&t(14,R++,R)):se.key==="ArrowUp"&&(se.preventDefault(),R>0&&t(14,R--,R))}function at(){t(10,x=!1),t(11,S=""),t(12,M=[]),t(14,R=-1),H&&(H.abort(),H=null)}function et(){t(10,x=!0),t(11,S=""),t(12,M=[]),t(14,R=-1)}ar(()=>{}),Dr(()=>{J.forEach(se=>se()),He(),clearTimeout(bt),H&&H.abort()});const ot=async()=>{if(m){const se=!d,De=new Map(h);De.set(m,se),t(1,h=De),se&&(t(7,u=!1),await Ae())}},ct=()=>t(8,b=!0),Qe=()=>xe(-1);function fe(){F=this.value,t(21,F)}const me=se=>{se.key==="Enter"?ht():se.key==="Escape"&&$e()},Ge=()=>t(9,E=!E);function qt(){C=this.value,t(2,C)}const kt=se=>{Se(se,!0),t(9,E=!1),t(2,C="")};function Ot(){S=this.value,t(11,S)}const Ft=se=>{Se(se.path,!0),at()},Gt=se=>t(14,R=se),Jt=se=>se.is_parent?ie(se):ve(se),cr=se=>{se.is_dir&&!se.is_parent?Se(se.path,!0):se.is_dir||de(se)},vr=(se,De)=>ke(De,se);function Wt(se){j=se,t(22,j)}function Xt(se){X=se,t(24,X)}function br(se){I=se,t(25,I)}const Yt=()=>t(8,b=!1),Zt=()=>t(8,b=!1),hr=()=>{t(0,o.directoryTracking=!o.directoryTracking,o),ae()},yr=()=>{t(0,o.historyEnabled=!o.historyEnabled,o),o.historyEnabled||t(0,o.history=[],o),ae()};function jt(){o.historyLimit=Ur(this.value),t(0,o),t(64,y),t(60,_),t(62,p),t(6,w),t(61,l),t(63,g)}const Qt=()=>{t(0,o.history=[],o),ae()},wr=se=>{t(0,o.history=o.history.filter(De=>De!==se),o),ae()},$t=()=>{t(0,o={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),ae()},er=()=>t(8,b=!1);return r.$$.update=()=>{var se;if(r.$$.dirty[2]&6&&t(61,l=y?g.get(y):null),r.$$.dirty[1]&1073741824&&t(62,p=(l==null?void 0:l.connected)||!1),r.$$.dirty[1]&1073741824&&t(6,w=(l==null?void 0:l.type)==="local"),r.$$.dirty[0]&64|r.$$.dirty[2]&1&&t(60,_=p&&!w),r.$$.dirty[1]&1073741824&&t(5,m=((se=l==null?void 0:l.connection)==null?void 0:se.id)||null),r.$$.dirty[0]&32|r.$$.dirty[2]&4&&y&&m&&le(m),r.$$.dirty[0]&8|r.$$.dirty[2]&4)if(y){const De=ye(y);De&&De!==he&&t(3,he=De)}else t(3,he="/");if(r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(!y||!_)&&(t(59,z=[]),t(17,Y=null),t(18,re=new Set),t(15,A=new Set),t(3,he="/"),t(58,v=new Map),t(1,h=new Map),t(0,o={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),t(8,b=!1),t(9,E=!1),t(10,x=!1),t(19,D={open:!1,x:0,y:0,file:null})),r.$$.dirty[0]&8|r.$$.dirty[1]&268435456&&t(29,i=(()=>{const De=Dc(z);return he==="/"?De:[{name:"..",path:he.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...De]})()),r.$$.dirty[0]&8&&(n=he.split("/").filter(De=>De)),r.$$.dirty[0]&5&&t(28,f=o.historyEnabled&&C?o.history.filter(De=>De.toLowerCase().includes(C.toLowerCase())):o.history||[]),r.$$.dirty[0]&34&&t(4,d=m&&h.get(m)||!1),r.$$.dirty[0]&40|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&_&&m?(le(m),ge(he),Re()):He()),r.$$.dirty[0]&17|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&_&&o.directoryTracking&&d?Re():He()),r.$$.dirty[1]&134217728|r.$$.dirty[2]&2&&g){const De=new Set(g.keys()),Je=new Map(v);for(const lt of Je.keys())De.has(lt)||Je.delete(lt);t(58,v=Je)}},[o,h,C,he,d,m,w,u,b,E,x,S,M,T,R,A,K,Y,re,D,P,F,j,q,X,I,B,ee,f,i,ae,we,Be,Me,ce,de,ve,ie,ke,ze,We,je,ne,_e,Ne,Ee,G,be,Se,Ae,xe,qe,ht,$e,Ve,it,at,et,v,z,_,l,p,g,y,ot,ct,Qe,fe,me,Ge,qt,kt,Ot,Ft,Gt,Jt,cr,vr,Wt,Xt,br,Yt,Zt,hr,yr,jt,Qt,wr,$t,er]}class Ac extends gt{constructor(e){super(),_t(this,e,Bc,Mc,pt,{},null,[-1,-1,-1,-1])}}function Ki(r,e,t){const l=r.slice();return l[37]=e[t],l[39]=t,l}function Rc(r){let e;return{c(){e=Z("请先连接到服务器")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Oc(r){let e;return{c(){e=Z("实时数据获取中...")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Pc(r){let e;return{c(){e=Z("本地终端不支持服务器监控")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function qi(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',s(e,"class","p-3 space-y-3")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Gi(r){let e,t,l,p,w,_=r[8]["1min"].toFixed(2)+"",i,n,f,m=r[8]["5min"].toFixed(2)+"",d,g,y,k=r[8]["15min"].toFixed(2)+"",v;return{c(){e=L("div"),t=L("span"),t.textContent="负载:",l=O(),p=L("div"),w=L("span"),i=Z(_),n=O(),f=L("span"),d=Z(m),g=O(),y=L("span"),v=Z(k),s(t,"class","text-[9px] text-gray-600 dark:text-gray-400"),s(w,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Te(w,"color",mt(r[8]["1min"]*100)),s(f,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Te(f,"color",mt(r[8]["5min"]*100)),s(y,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Te(y,"color",mt(r[8]["15min"]*100)),s(p,"class","flex gap-2 text-[9px]"),s(e,"class","flex items-center gap-2 mb-2")},m(o,h){V(o,e,h),c(e,t),c(e,l),c(e,p),c(p,w),c(w,i),c(p,n),c(p,f),c(f,d),c(p,g),c(p,y),c(y,v)},p(o,h){h[0]&256&&_!==(_=o[8]["1min"].toFixed(2)+"")&&ue(i,_),h[0]&256&&Te(w,"color",mt(o[8]["1min"]*100)),h[0]&256&&m!==(m=o[8]["5min"].toFixed(2)+"")&&ue(d,m),h[0]&256&&Te(f,"color",mt(o[8]["5min"]*100)),h[0]&256&&k!==(k=o[8]["15min"].toFixed(2)+"")&&ue(v,k),h[0]&256&&Te(y,"color",mt(o[8]["15min"]*100))},d(o){o&&N(e)}}}function Hc(r){let e;return{c(){e=L("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function Ic(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o;return{c(){e=oe("svg"),t=oe("defs"),l=oe("linearGradient"),p=oe("stop"),w=oe("stop"),_=oe("line"),i=oe("line"),n=oe("line"),f=oe("path"),d=oe("path"),y=O(),k=L("div"),k.textContent="100%",v=O(),o=L("div"),o.textContent="0%",s(p,"offset","0%"),Te(p,"stop-color","rgb(139, 92, 246)"),Te(p,"stop-opacity","0.3"),s(w,"offset","100%"),Te(w,"stop-color","rgb(139, 92, 246)"),Te(w,"stop-opacity","0.05"),s(l,"id","cpuGradient"),s(l,"x1","0%"),s(l,"y1","0%"),s(l,"x2","0%"),s(l,"y2","100%"),s(_,"x1","0"),s(_,"y1","25%"),s(_,"x2","100%"),s(_,"y2","25%"),s(_,"stroke","currentColor"),s(_,"stroke-width","0.5"),s(_,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(n,"x1","0"),s(n,"y1","75%"),s(n,"x2","100%"),s(n,"y2","75%"),s(n,"stroke","currentColor"),s(n,"stroke-width","0.5"),s(n,"class","text-gray-200 dark:text-gray-700"),s(f,"d",m=r[2].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),s(f,"fill","url(#cpuGradient)"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[2].map(r[16]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(139, 92, 246)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(o,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(h,a){V(h,e,a),c(e,t),c(t,l),c(l,p),c(l,w),c(e,_),c(e,i),c(e,n),c(e,f),c(e,d),V(h,y,a),V(h,k,a),V(h,v,a),V(h,o,a)},p(h,a){a[0]&4&&m!==(m=h[2].map(h[15]).join(" ")+" L 100 100 L 0 100 Z")&&s(f,"d",m),a[0]&4&&g!==(g=h[2].map(h[16]).join(" "))&&s(d,"d",g)},d(h){h&&(N(e),N(y),N(k),N(v),N(o))}}}function Ji(r){let e,t=Ke(r[4]),l=[];for(let p=0;p<t.length;p+=1)l[p]=Xi(Ki(r,t,p));return{c(){e=L("div");for(let p=0;p<l.length;p+=1)l[p].c();s(e,"class","mt-2 flex flex-wrap gap-1")},m(p,w){V(p,e,w);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(e,null)},p(p,w){if(w[0]&16){t=Ke(p[4]);let _;for(_=0;_<t.length;_+=1){const i=Ki(p,t,_);l[_]?l[_].p(i,w):(l[_]=Xi(i),l[_].c(),l[_].m(e,null))}for(;_<l.length;_+=1)l[_].d(1);l.length=t.length}},d(p){p&&N(e),Nt(l,p)}}}function Xi(r){let e,t,l,p,w,_;return{c(){e=L("div"),t=L("div"),l=L("div"),p=O(),w=L("span"),w.textContent=`C${r[39]+1}`,_=O(),s(l,"class","h-full rounded-full transition-all duration-300"),Te(l,"width",r[37]+"%"),Te(l,"background-color",mt(r[37])),s(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),s(w,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),s(e,"class","flex flex-col items-center")},m(i,n){V(i,e,n),c(e,t),c(t,l),c(e,p),c(e,w),c(e,_)},p(i,n){n[0]&16&&Te(l,"width",i[37]+"%"),n[0]&16&&Te(l,"background-color",mt(i[37]))},d(i){i&&N(e)}}}function Fc(r){let e;return{c(){e=L("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function Wc(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o;return{c(){e=oe("svg"),t=oe("defs"),l=oe("linearGradient"),p=oe("stop"),w=oe("stop"),_=oe("line"),i=oe("line"),n=oe("line"),f=oe("path"),d=oe("path"),y=O(),k=L("div"),k.textContent="100%",v=O(),o=L("div"),o.textContent="0%",s(p,"offset","0%"),Te(p,"stop-color","rgb(16, 185, 129)"),Te(p,"stop-opacity","0.3"),s(w,"offset","100%"),Te(w,"stop-color","rgb(16, 185, 129)"),Te(w,"stop-opacity","0.05"),s(l,"id","memoryGradient"),s(l,"x1","0%"),s(l,"y1","0%"),s(l,"x2","0%"),s(l,"y2","100%"),s(_,"x1","0"),s(_,"y1","25%"),s(_,"x2","100%"),s(_,"y2","25%"),s(_,"stroke","currentColor"),s(_,"stroke-width","0.5"),s(_,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(n,"x1","0"),s(n,"y1","75%"),s(n,"x2","100%"),s(n,"y2","75%"),s(n,"stroke","currentColor"),s(n,"stroke-width","0.5"),s(n,"class","text-gray-200 dark:text-gray-700"),s(f,"d",m=r[3].map(r[17]).join(" ")+" L 100 100 L 0 100 Z"),s(f,"fill","url(#memoryGradient)"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[3].map(r[18]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(16, 185, 129)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(o,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(h,a){V(h,e,a),c(e,t),c(t,l),c(l,p),c(l,w),c(e,_),c(e,i),c(e,n),c(e,f),c(e,d),V(h,y,a),V(h,k,a),V(h,v,a),V(h,o,a)},p(h,a){a[0]&8&&m!==(m=h[3].map(h[17]).join(" ")+" L 100 100 L 0 100 Z")&&s(f,"d",m),a[0]&8&&g!==(g=h[3].map(h[18]).join(" "))&&s(d,"d",g)},d(h){h&&(N(e),N(y),N(k),N(v),N(o))}}}function jc(r){var qr,Gr;let e,t,l,p,w,_,i,n,f,m,d,g,y,k=r[5].cpu.toFixed(1)+"",v,o,h,a,u,b,E,C,x,S,M,T,R,H=r[9].used+"",A,z,K=r[9].total+"",Y,re,J,D=r[5].memory.toFixed(2)+"",P,F,j,q,W,X,te,I,B,ee,U=r[5].disk+"",le,ae,he,ye,pe,ge,we,Be,Me,ce=r[7].used+"",de,$,ve,ie,ke=r[7].total+"",ze,We,je,ne,_e,Ne,Ee,G,be,Ce,Se=xr(((qr=r[5].network)==null?void 0:qr.in)||0)+"",Ae,Re,He,xe,qe,ht,$e=xr(((Gr=r[5].network)==null?void 0:Gr.out)||0)+"",rt,bt,Ve,it,at,et,ot,ct,Qe,fe,me=(r[6].os||"Unknown")+"",Ge,qt,kt,Ot,Ft,Gt,Jt=(r[6].kernel||"Unknown")+"",cr,vr,Wt,Xt,br,Yt,Zt=(r[6].uptime||"Unknown")+"",hr,yr,jt,Qt,wr,$t,er=(r[6].processes||"N/A")+"",se;function De(Ue,nt){return Ue[0]?Pc:Ue[1]?Oc:Rc}let Je=De(r),lt=Je(r),st=r[0]&&qi(),ft=r[8]["1min"]>0&&Gi(r);function Ar(Ue,nt){return Ue[2].length>1?Ic:Hc}let tr=Ar(r),Tt=tr(r),yt=r[4].length>0&&Ji(r);function Kr(Ue,nt){return Ue[3].length>1?Wc:Fc}let kr=Kr(r),Bt=kr(r);return{c(){e=L("div"),t=L("div"),l=L("h3"),l.textContent="服务器监控",p=O(),w=L("div"),lt.c(),_=O(),st&&st.c(),i=O(),n=L("div"),f=L("div"),m=L("div"),d=L("div"),d.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',g=O(),y=L("span"),v=Z(k),o=Z("%"),h=O(),ft&&ft.c(),a=O(),u=L("div"),Tt.c(),b=O(),yt&&yt.c(),E=O(),C=L("div"),x=L("div"),S=L("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',M=O(),T=L("div"),R=L("span"),A=Z(H),z=Z(" / "),Y=Z(K),re=O(),J=L("span"),P=Z(D),F=Z("%"),j=O(),q=L("div"),Bt.c(),W=O(),X=L("div"),te=L("div"),I=L("div"),I.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',B=O(),ee=L("span"),le=Z(U),ae=Z("%"),he=O(),ye=L("div"),pe=L("div"),ge=O(),we=L("div"),Be=L("span"),Me=Z("已用 "),de=Z(ce),$=O(),ve=L("span"),ie=Z("总计 "),ze=Z(ke),We=O(),je=L("div"),ne=L("div"),ne.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',_e=O(),Ne=L("div"),Ee=L("div"),G=L("div"),G.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',be=O(),Ce=L("span"),Ae=Z(Se),Re=O(),He=L("div"),xe=L("div"),xe.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',qe=O(),ht=L("span"),rt=Z($e),bt=O(),Ve=L("div"),it=L("div"),it.textContent="系统信息",at=O(),et=L("div"),ot=L("div"),ct=L("span"),ct.textContent="操作系统",Qe=O(),fe=L("span"),Ge=Z(me),qt=O(),kt=L("div"),Ot=L("span"),Ot.textContent="内核版本",Ft=O(),Gt=L("span"),cr=Z(Jt),vr=O(),Wt=L("div"),Xt=L("span"),Xt.textContent="运行时间",br=O(),Yt=L("span"),hr=Z(Zt),yr=O(),jt=L("div"),Qt=L("span"),Qt.textContent="进程数",wr=O(),$t=L("span"),se=Z(er),s(l,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(w,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex items-center gap-2"),s(y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Te(y,"color",mt(r[5].cpu)),s(m,"class","flex items-center justify-between mb-2"),s(u,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(f,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),s(S,"class","flex items-center gap-2"),s(R,"class","text-[10px] text-gray-600 dark:text-gray-400"),s(J,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Te(J,"color",mt(r[5].memory)),s(T,"class","flex items-center gap-2"),s(x,"class","flex items-center justify-between mb-2"),s(q,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(C,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),s(I,"class","flex items-center gap-2"),s(ee,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Te(ee,"color",mt(r[5].disk)),s(te,"class","flex items-center justify-between mb-2"),s(pe,"class","h-2 rounded-full transition-all duration-300"),Te(pe,"width",r[5].disk+"%"),Te(pe,"background-color",mt(r[5].disk)),s(ye,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),s(we,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),s(X,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),s(ne,"class","flex items-center gap-2 mb-3"),s(G,"class","flex items-center gap-2"),s(Ce,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(Ee,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(xe,"class","flex items-center gap-2"),s(ht,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(He,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(Ne,"class","space-y-2"),s(je,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),s(it,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),s(ct,"class","text-gray-600 dark:text-gray-400"),s(fe,"class","text-gray-900 dark:text-white font-medium"),s(ot,"class","flex justify-between py-1"),s(Ot,"class","text-gray-600 dark:text-gray-400"),s(Gt,"class","text-gray-900 dark:text-white font-medium"),s(kt,"class","flex justify-between py-1"),s(Xt,"class","text-gray-600 dark:text-gray-400"),s(Yt,"class","text-gray-900 dark:text-white font-medium"),s(Wt,"class","flex justify-between py-1"),s(Qt,"class","text-gray-600 dark:text-gray-400"),s($t,"class","text-gray-900 dark:text-white font-medium"),s(jt,"class","flex justify-between py-1"),s(et,"class","space-y-1.5 text-[10px]"),s(Ve,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),s(n,"class","p-3 space-y-3"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(Ue,nt){V(Ue,e,nt),c(e,t),c(t,l),c(t,p),c(t,w),lt.m(w,null),c(e,_),st&&st.m(e,null),c(e,i),c(e,n),c(n,f),c(f,m),c(m,d),c(m,g),c(m,y),c(y,v),c(y,o),c(f,h),ft&&ft.m(f,null),c(f,a),c(f,u),Tt.m(u,null),c(f,b),yt&&yt.m(f,null),c(n,E),c(n,C),c(C,x),c(x,S),c(x,M),c(x,T),c(T,R),c(R,A),c(R,z),c(R,Y),c(T,re),c(T,J),c(J,P),c(J,F),c(C,j),c(C,q),Bt.m(q,null),c(n,W),c(n,X),c(X,te),c(te,I),c(te,B),c(te,ee),c(ee,le),c(ee,ae),c(X,he),c(X,ye),c(ye,pe),c(X,ge),c(X,we),c(we,Be),c(Be,Me),c(Be,de),c(we,$),c(we,ve),c(ve,ie),c(ve,ze),c(n,We),c(n,je),c(je,ne),c(je,_e),c(je,Ne),c(Ne,Ee),c(Ee,G),c(Ee,be),c(Ee,Ce),c(Ce,Ae),c(Ne,Re),c(Ne,He),c(He,xe),c(He,qe),c(He,ht),c(ht,rt),c(n,bt),c(n,Ve),c(Ve,it),c(Ve,at),c(Ve,et),c(et,ot),c(ot,ct),c(ot,Qe),c(ot,fe),c(fe,Ge),c(et,qt),c(et,kt),c(kt,Ot),c(kt,Ft),c(kt,Gt),c(Gt,cr),c(et,vr),c(et,Wt),c(Wt,Xt),c(Wt,br),c(Wt,Yt),c(Yt,hr),c(et,yr),c(et,jt),c(jt,Qt),c(jt,wr),c(jt,$t),c($t,se)},p(Ue,nt){var Jr,Xr;Je!==(Je=De(Ue))&&(lt.d(1),lt=Je(Ue),lt&&(lt.c(),lt.m(w,null))),Ue[0]?st||(st=qi(),st.c(),st.m(e,i)):st&&(st.d(1),st=null),nt[0]&32&&k!==(k=Ue[5].cpu.toFixed(1)+"")&&ue(v,k),nt[0]&32&&Te(y,"color",mt(Ue[5].cpu)),Ue[8]["1min"]>0?ft?ft.p(Ue,nt):(ft=Gi(Ue),ft.c(),ft.m(f,a)):ft&&(ft.d(1),ft=null),tr===(tr=Ar(Ue))&&Tt?Tt.p(Ue,nt):(Tt.d(1),Tt=tr(Ue),Tt&&(Tt.c(),Tt.m(u,null))),Ue[4].length>0?yt?yt.p(Ue,nt):(yt=Ji(Ue),yt.c(),yt.m(f,null)):yt&&(yt.d(1),yt=null),nt[0]&512&&H!==(H=Ue[9].used+"")&&ue(A,H),nt[0]&512&&K!==(K=Ue[9].total+"")&&ue(Y,K),nt[0]&32&&D!==(D=Ue[5].memory.toFixed(2)+"")&&ue(P,D),nt[0]&32&&Te(J,"color",mt(Ue[5].memory)),kr===(kr=Kr(Ue))&&Bt?Bt.p(Ue,nt):(Bt.d(1),Bt=kr(Ue),Bt&&(Bt.c(),Bt.m(q,null))),nt[0]&32&&U!==(U=Ue[5].disk+"")&&ue(le,U),nt[0]&32&&Te(ee,"color",mt(Ue[5].disk)),nt[0]&32&&Te(pe,"width",Ue[5].disk+"%"),nt[0]&32&&Te(pe,"background-color",mt(Ue[5].disk)),nt[0]&128&&ce!==(ce=Ue[7].used+"")&&ue(de,ce),nt[0]&128&&ke!==(ke=Ue[7].total+"")&&ue(ze,ke),nt[0]&32&&Se!==(Se=xr(((Jr=Ue[5].network)==null?void 0:Jr.in)||0)+"")&&ue(Ae,Se),nt[0]&32&&$e!==($e=xr(((Xr=Ue[5].network)==null?void 0:Xr.out)||0)+"")&&ue(rt,$e),nt[0]&64&&me!==(me=(Ue[6].os||"Unknown")+"")&&ue(Ge,me),nt[0]&64&&Jt!==(Jt=(Ue[6].kernel||"Unknown")+"")&&ue(cr,Jt),nt[0]&64&&Zt!==(Zt=(Ue[6].uptime||"Unknown")+"")&&ue(hr,Zt),nt[0]&64&&er!==(er=(Ue[6].processes||"N/A")+"")&&ue(se,er)},i:Pe,o:Pe,d(Ue){Ue&&N(e),lt.d(),st&&st.d(),ft&&ft.d(),Tt.d(),yt&&yt.d(),Bt.d()}}}function mt(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function xr(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,l=r;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function Yi(r){if(r===0)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0,l=r;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function zc(r,e,t){let l,p,w,_,i,n;vt(r,zt,W=>t(13,i=W)),vt(r,At,W=>t(14,n=W));const f={cpu:0,memory:0,disk:0,network:{in:0,out:0}},m={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},d={used:"0 GB",total:"0 GB"},g={"1min":0,"5min":0,"15min":0},y={used:"0 GB",total:"0 GB"};let k=[],v=[],o=[],h={...f},a={...m},u={...d},b={...g},E={...y},C=new Map,x=new Map,S=new Map,M=new Map,T=new Map,R=new Map,H=new Map,A=new Map,z=null,K=null;function Y(W){if(!W){t(2,k=[]),t(3,v=[]),t(4,o=[]),t(5,h={...f}),t(6,a={...m}),t(7,u={...d}),t(8,b={...g}),t(9,E={...y});return}t(2,k=C.get(W)||[]),t(3,v=x.get(W)||[]),t(4,o=S.get(W)||[]),t(5,h=M.get(W)||{...f}),t(6,a=T.get(W)||{...m}),t(7,u=R.get(W)||{...d}),t(8,b=H.get(W)||{...g}),t(9,E=A.get(W)||{...y})}function re(W){W&&(C=new Map(C).set(W,k),x=new Map(x).set(W,v),S=new Map(S).set(W,o),M=new Map(M).set(W,h),T=new Map(T).set(W,a),R=new Map(R).set(W,u),H=new Map(H).set(W,b),A=new Map(A).set(W,E))}function J(W){var le,ae,he,ye,pe,ge,we,Be,Me,ce,de,$,ve,ie,ke;if(!W)return null;const X=(le=W.cpu)!=null&&le.per_core&&Array.isArray(W.cpu.per_core)?W.cpu.per_core:null,te={cpu:typeof W.cpu=="number"?W.cpu:((ae=W.cpu)==null?void 0:ae.overall)||0,memory:typeof W.memory=="number"?W.memory:((he=W.memory)==null?void 0:he.used_percent)||0,disk:typeof W.disk=="number"?W.disk:((ge=(pe=(ye=W.disk)==null?void 0:ye.partitions)==null?void 0:pe[0])==null?void 0:ge.used_percent)||0,network:{in:typeof((we=W.network)==null?void 0:we.in)=="number"?W.network.in*(1024*1024):typeof((Be=W.network)==null?void 0:Be.rx_rate)=="number"?W.network.rx_rate:0,out:typeof((Me=W.network)==null?void 0:Me.out)=="number"?W.network.out*(1024*1024):typeof((ce=W.network)==null?void 0:ce.tx_rate)=="number"?W.network.tx_rate:0}},I=W.system?{os:W.system.os||m.os,kernel:W.system.kernel||m.kernel,uptime:W.system.uptime||m.uptime,processes:W.system.processes||m.processes}:null;let B=null;if(($=(de=W.disk)==null?void 0:de.partitions)!=null&&$[0]){const ze=W.disk.partitions[0],We=(ze.used/(1024*1024*1024)).toFixed(1),je=(ze.total/(1024*1024*1024)).toFixed(1);B={used:`${We} GB`,total:`${je} GB`}}let ee=null;(ve=W.cpu)!=null&&ve.load_average&&Array.isArray(W.cpu.load_average)&&W.cpu.load_average.length>=3&&(ee={"1min":W.cpu.load_average[0]||0,"5min":W.cpu.load_average[1]||0,"15min":W.cpu.load_average[2]||0});let U=null;if(((ie=W.memory)==null?void 0:ie.used)!==void 0&&((ke=W.memory)==null?void 0:ke.total)!==void 0){const ze=W.memory.used,We=W.memory.total;U={used:Yi(ze),total:Yi(We)}}return{stats:te,cpuPerCore:X,systemInfo:I,diskInfo:B,loadInfo:ee,memoryDetail:U}}async function D(){const W=i;if(!W||!p||w)return;const{GetMonitoringData:X}=window.wailsBindings||{};if(typeof X=="function")try{const te=await X(W),I=J(te);if(I){const B=[...C.get(W)||[],I.stats.cpu].slice(-60),ee=[...x.get(W)||[],I.stats.memory].slice(-60),U=I.cpuPerCore||S.get(W)||[],le=I.systemInfo||T.get(W)||{...m},ae=I.diskInfo||R.get(W)||{...d},he=I.loadInfo||H.get(W)||{...g},ye=I.memoryDetail||A.get(W)||{...y},pe=I.stats;C=new Map(C).set(W,B),x=new Map(x).set(W,ee),S=new Map(S).set(W,U),M=new Map(M).set(W,pe),T=new Map(T).set(W,le),R=new Map(R).set(W,ae),H=new Map(H).set(W,he),A=new Map(A).set(W,ye),W===i&&(t(5,h=pe),t(2,k=B),t(3,v=ee),t(4,o=U),t(6,a=le),t(7,u=ae),t(8,b=he),t(9,E=ye))}}catch(te){console.error("Failed to fetch monitoring data:",te)}}ar(()=>(z=setInterval(D,2e3),()=>{clearInterval(z)})),Dr(()=>{z&&clearInterval(z)});const P=(W,X)=>{const te=X/(k.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`},F=(W,X)=>{const te=X/(k.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`},j=(W,X)=>{const te=X/(v.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`},q=(W,X)=>{const te=X/(v.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`};return r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,l=i?n.get(i):null),r.$$.dirty[0]&4096&&t(1,p=(l==null?void 0:l.connected)||!1),r.$$.dirty[0]&4096&&t(0,w=(l==null?void 0:l.type)==="local"),r.$$.dirty[0]&3&&t(11,_=p&&!w),r.$$.dirty[0]&8192&&t(10,K=i),r.$$.dirty[0]&9216&&K!==i&&(K&&re(K),Y(i)),r.$$.dirty[0]&10240&&i&&_&&D(),r.$$.dirty[0]&10240&&(!i||!_)&&(t(2,k=[]),t(3,v=[]),t(4,o=[]),t(5,h={...f}),t(6,a={...m}),t(7,u={...d}),t(8,b={...g}),t(9,E={...y}))},[w,p,k,v,o,h,a,u,b,E,K,_,l,i,n,P,F,j,q]}class Uc extends gt{constructor(e){super(),_t(this,e,zc,jc,pt,{},null,[-1,-1])}}function Nc(r){let e;return{c(){e=L("span"),e.textContent="✗ 无效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Vc(r){let e;return{c(){e=L("span"),e.textContent="✓ 有效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Zi(r){let e,t,l,p,w;return{c(){e=L("div"),t=oe("svg"),l=oe("path"),p=O(),w=Z(r[3]),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),s(t,"class","w-4 h-4"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(_,i){V(_,e,i),c(e,t),c(t,l),c(e,p),c(e,w)},p(_,i){i&8&&ue(w,_[3])},d(_){_&&N(e)}}}function Qi(r){let e,t,l;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,w){V(p,e,w),t||(l=Q(e,"click",r[9]),t=!0)},p:Pe,d(p){p&&N(e),t=!1,l()}}}function Kc(r){let e,t,l,p,w,_,i,n,f=r[5].chars+"",m,d,g=r[5].lines+"",y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J,D,P,F,j,q,W,X,te,I,B,ee,U,le,ae,he,ye,pe,ge;function we($,ve){if($[4])return Vc;if($[3])return Nc}let Be=we(r),Me=Be&&Be(r),ce=r[3]&&Zi(r),de=r[1]&&Qi(r);return{c(){e=L("div"),t=L("div"),l=L("div"),p=L("label"),w=L("span"),w.textContent="输入 JSON",_=O(),Me&&Me.c(),i=O(),n=L("div"),m=Z(f),d=Z(" 字符 · "),y=Z(g),k=Z(" 行"),v=O(),o=L("textarea"),a=O(),ce&&ce.c(),u=O(),b=L("div"),E=L("button"),C=oe("svg"),x=oe("path"),S=O(),M=L("span"),M.textContent="格式化",R=O(),H=L("button"),A=oe("svg"),z=oe("path"),K=O(),Y=L("span"),Y.textContent="压缩",J=O(),D=L("button"),P=oe("svg"),F=oe("path"),j=O(),q=L("span"),q.textContent="转义",X=O(),te=L("div"),I=L("div"),B=L("label"),B.textContent="输出",ee=O(),de&&de.c(),U=O(),le=L("textarea"),ae=O(),he=L("div"),ye=L("button"),ye.textContent="清空全部",s(p,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(n,"class","text-xs text-gray-500 dark:text-gray-400"),s(l,"class","flex items-center justify-between mb-2"),s(o,"placeholder","输入 JSON..."),s(o,"class",h="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),s(t,"class","relative"),s(x,"stroke-linecap","round"),s(x,"stroke-linejoin","round"),s(x,"stroke-width","2"),s(x,"d","M4 6h16M4 12h16m-7 6h7"),s(C,"class","w-4 h-4"),s(C,"fill","none"),s(C,"stroke","currentColor"),s(C,"viewBox","0 0 24 24"),s(M,"class","text-sm"),E.disabled=T=r[2]||!r[0].trim(),s(E,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(z,"stroke-linecap","round"),s(z,"stroke-linejoin","round"),s(z,"stroke-width","2"),s(z,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),s(A,"class","w-4 h-4"),s(A,"fill","none"),s(A,"stroke","currentColor"),s(A,"viewBox","0 0 24 24"),s(Y,"class","text-sm"),H.disabled=re=r[2]||!r[0].trim(),s(H,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(F,"stroke-linecap","round"),s(F,"stroke-linejoin","round"),s(F,"stroke-width","2"),s(F,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),s(P,"class","w-4 h-4"),s(P,"fill","none"),s(P,"stroke","currentColor"),s(P,"viewBox","0 0 24 24"),s(q,"class","text-sm"),D.disabled=W=r[2]||!r[0].trim(),s(D,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(b,"class","grid grid-cols-3 gap-3"),s(B,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(I,"class","flex items-center justify-between mb-2"),le.readOnly=!0,s(le,"placeholder","格式化后的 JSON 将显示在这里..."),s(le,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(ye,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(he,"class","flex justify-end"),s(e,"class","space-y-6")},m($,ve){V($,e,ve),c(e,t),c(t,l),c(l,p),c(p,w),c(p,_),Me&&Me.m(p,null),c(l,i),c(l,n),c(n,m),c(n,d),c(n,y),c(n,k),c(t,v),c(t,o),Le(o,r[0]),c(t,a),ce&&ce.m(t,null),c(e,u),c(e,b),c(b,E),c(E,C),c(C,x),c(E,S),c(E,M),c(b,R),c(b,H),c(H,A),c(A,z),c(H,K),c(H,Y),c(b,J),c(b,D),c(D,P),c(P,F),c(D,j),c(D,q),c(e,X),c(e,te),c(te,I),c(I,B),c(I,ee),de&&de.m(I,null),c(te,U),c(te,le),Le(le,r[1]),c(e,ae),c(e,he),c(he,ye),pe||(ge=[Q(o,"input",r[13]),Q(o,"keydown",r[11]),Q(E,"click",r[6]),Q(H,"click",r[7]),Q(D,"click",r[8]),Q(le,"input",r[14]),Q(ye,"click",r[10])],pe=!0)},p($,[ve]){Be!==(Be=we($))&&(Me&&Me.d(1),Me=Be&&Be($),Me&&(Me.c(),Me.m(p,null))),ve&32&&f!==(f=$[5].chars+"")&&ue(m,f),ve&32&&g!==(g=$[5].lines+"")&&ue(y,g),ve&8&&h!==(h="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+($[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&s(o,"class",h),ve&1&&Le(o,$[0]),$[3]?ce?ce.p($,ve):(ce=Zi($),ce.c(),ce.m(t,null)):ce&&(ce.d(1),ce=null),ve&5&&T!==(T=$[2]||!$[0].trim())&&(E.disabled=T),ve&5&&re!==(re=$[2]||!$[0].trim())&&(H.disabled=re),ve&5&&W!==(W=$[2]||!$[0].trim())&&(D.disabled=W),$[1]?de?de.p($,ve):(de=Qi($),de.c(),de.m(I,null)):de&&(de.d(1),de=null),ve&2&&Le(le,$[1])},i:Pe,o:Pe,d($){$&&N(e),Me&&Me.d(),ce&&ce.d(),de&&de.d(),pe=!1,Fe(ge)}}}function qc(r,e,t){let{themeStore:l}=e,p="",w="",_=!1,i="",n=!1,f={chars:0,lines:0};async function m(){if(!p.trim()){t(4,n=!1),t(3,i="");return}if(!window.wailsBindings){t(4,n=!1),t(3,i="Wails 绑定未加载");return}try{const b=await window.wailsBindings.ValidateJSON(p);t(4,n=b.valid),t(3,i=b.error||"")}catch(b){t(4,n=!1),t(3,i=b.message)}}function d(){t(5,f.chars=p.length,f),t(5,f.lines=p.split(`
`).length,f)}async function g(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,w=await window.wailsBindings.FormatJSON(p)),t(4,n=!0),t(3,i="")}catch(b){t(3,i=b.message||"格式化失败")}finally{t(2,_=!1)}}}async function y(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,w=await window.wailsBindings.MinifyJSON(p)),t(4,n=!0),t(3,i="")}catch(b){t(3,i=b.message||"压缩失败")}finally{t(2,_=!1)}}}async function k(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,w=await window.wailsBindings.EscapeJSON(p)),t(4,n=!0),t(3,i="")}catch(b){t(3,i=b.message||"转义失败")}finally{t(2,_=!1)}}}async function v(){if(w)try{await navigator.clipboard.writeText(w)}catch(b){console.error("复制失败:",b)}}function o(){t(0,p=""),t(1,w=""),t(4,n=!1)}function h(b){(b.ctrlKey||b.metaKey)&&b.key.toLowerCase()==="enter"&&!_&&p.trim()&&(b.preventDefault(),g())}function a(){p=this.value,t(0,p)}function u(){w=this.value,t(1,w)}return r.$$set=b=>{"themeStore"in b&&t(12,l=b.themeStore)},m(),d(),[p,w,_,i,n,f,g,y,k,v,o,h,l,a,u]}class $i extends gt{constructor(e){super(),_t(this,e,qc,Kc,pt,{themeStore:12})}}function Gc(r){let e,t,l,p=r[2]==="encode"?"编码":"解码",w;return{c(){e=oe("svg"),t=oe("path"),l=O(),w=Z(p),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),c(e,t),V(_,l,i),V(_,w,i)},p(_,i){i&4&&p!==(p=_[2]==="encode"?"编码":"解码")&&ue(w,p)},d(_){_&&(N(e),N(l),N(w))}}}function Jc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},p:Pe,d(w){w&&(N(e),N(p))}}}function es(r){let e,t,l;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,w){V(p,e,w),t||(l=Q(e,"click",r[5]),t=!0)},p:Pe,d(p){p&&N(e),t=!1,l()}}}function Xc(r){let e,t,l,p,w,_,i,n,f,m,d,g,y=r[2]==="encode"?"输入文本":"输入 Base64",k,v,o,h,a,u,b,E,C,x,S,M,T=r[2]==="encode"?"Base64 输出":"解码结果",R,H,A,z,K,Y,re,J,D,P,F,j;function q(I,B){return I[3]?Jc:Gc}let W=q(r),X=W(r),te=r[1]&&es(r);return{c(){e=L("div"),t=L("div"),l=L("button"),p=Z("编码"),_=O(),i=L("button"),n=Z("解码"),m=O(),d=L("div"),g=L("label"),k=Z(y),v=O(),o=L("textarea"),a=O(),u=L("div"),b=L("button"),X.c(),C=O(),x=L("div"),S=L("div"),M=L("label"),R=Z(T),H=O(),te&&te.c(),A=O(),z=L("textarea"),Y=O(),re=L("div"),J=L("button"),J.textContent="清空全部",D=O(),P=L("button"),P.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(o,"placeholder",h=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),s(o,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),b.disabled=E=r[3]||!r[0].trim(),s(b,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(u,"class","flex items-center justify-center"),s(M,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(S,"class","flex items-center justify-between mb-2"),z.readOnly=!0,s(z,"placeholder",K=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(z,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(J,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(P,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(re,"class","flex justify-between items-center"),s(e,"class","space-y-6")},m(I,B){V(I,e,B),c(e,t),c(t,l),c(l,p),c(t,_),c(t,i),c(i,n),c(e,m),c(e,d),c(d,g),c(g,k),c(d,v),c(d,o),Le(o,r[0]),c(e,a),c(e,u),c(u,b),X.m(b,null),c(e,C),c(e,x),c(x,S),c(S,M),c(M,R),c(S,H),te&&te.m(S,null),c(x,A),c(x,z),Le(z,r[1]),c(e,Y),c(e,re),c(re,J),c(re,D),c(re,P),F||(j=[Q(l,"click",r[10]),Q(i,"click",r[11]),Q(o,"input",r[12]),Q(o,"keydown",r[8]),Q(b,"click",r[4]),Q(z,"input",r[13]),Q(J,"click",r[6]),Q(P,"click",r[7])],F=!0)},p(I,[B]){B&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),B&4&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),B&4&&y!==(y=I[2]==="encode"?"输入文本":"输入 Base64")&&ue(k,y),B&4&&h!==(h=I[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&s(o,"placeholder",h),B&1&&Le(o,I[0]),W===(W=q(I))&&X?X.p(I,B):(X.d(1),X=W(I),X&&(X.c(),X.m(b,null))),B&9&&E!==(E=I[3]||!I[0].trim())&&(b.disabled=E),B&4&&T!==(T=I[2]==="encode"?"Base64 输出":"解码结果")&&ue(R,T),I[1]?te?te.p(I,B):(te=es(I),te.c(),te.m(S,null)):te&&(te.d(1),te=null),B&4&&K!==(K=I[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(z,"placeholder",K),B&2&&Le(z,I[1])},i:Pe,o:Pe,d(I){I&&N(e),X.d(),te&&te.d(),F=!1,Fe(j)}}}function Yc(r,e,t){let{themeStore:l}=e,p="",w="",_="encode",i=!1;async function n(){if(!(!p.trim()||i||!window.wailsBindings)){t(3,i=!0);try{_==="encode"?t(1,w=await window.wailsBindings.EncodeBase64(p)):t(1,w=await window.wailsBindings.DecodeBase64(p))}catch(h){t(1,w=""),console.error("处理失败:",h),alert("处理失败: "+(h.message||h))}finally{t(3,i=!1)}}}async function f(){if(w)try{await navigator.clipboard.writeText(w)}catch(h){console.error("复制失败:",h)}}function m(){t(0,p=""),t(1,w="")}function d(){t(2,_=_==="encode"?"decode":"encode"),t(0,p=""),t(1,w="")}function g(h){(h.ctrlKey||h.metaKey)&&h.key.toLowerCase()==="enter"&&!i&&p.trim()&&(h.preventDefault(),n())}const y=()=>t(2,_="encode"),k=()=>t(2,_="decode");function v(){p=this.value,t(0,p)}function o(){w=this.value,t(1,w)}return r.$$set=h=>{"themeStore"in h&&t(9,l=h.themeStore)},[p,w,_,i,n,f,m,d,g,l,y,k,v,o]}class ts extends gt{constructor(e){super(),_t(this,e,Yc,Xc,pt,{themeStore:9})}}function rs(r,e,t){const l=r.slice();return l[29]=e[t],l}function is(r,e,t){const l=r.slice();return l[29]=e[t],l}function ss(r){let e,t=r[29].name+"",l;return{c(){e=L("option"),l=Z(t),e.__value=r[29].id,Le(e,e.__value)},m(p,w){V(p,e,w),c(e,l)},p:Pe,d(p){p&&N(e)}}}function ns(r){let e,t=r[29].name+"",l;return{c(){e=L("option"),l=Z(t),e.__value=r[29].id,Le(e,e.__value)},m(p,w){V(p,e,w),c(e,l)},p:Pe,d(p){p&&N(e)}}}function os(r){let e,t,l,p,w,_,i,n,f,m;return{c(){e=L("div"),t=L("button"),l=Z("加密"),w=O(),_=L("button"),i=Z("解密"),s(t,"class",p="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(_,"class",n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(d,g){V(d,e,g),c(e,t),c(t,l),c(e,w),c(e,_),c(_,i),f||(m=[Q(t,"click",r[24]),Q(_,"click",r[25])],f=!0)},p(d,g){g[0]&2&&p!==(p="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(t,"class",p),g[0]&2&&n!==(n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(_,"class",n)},d(d){d&&N(e),f=!1,Fe(m)}}}function ls(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z;return{c(){e=L("div"),t=L("div"),l=L("div"),p=L("label"),p.textContent="密钥（Hex）",w=O(),_=L("button"),_.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,i=O(),n=L("input"),f=O(),m=L("div"),d=Z("密钥长度: "),g=Z(r[9]),y=O(),k=L("div"),v=L("div"),o=L("label"),h=Z(r[11]),a=Z("（Hex）"),u=O(),b=L("button"),b.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,E=O(),C=L("input"),S=O(),M=L("div"),T=Z(r[11]),R=Z("长度: "),H=Z(r[10]),s(p,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(_,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(l,"class","flex items-center justify-between mb-2"),s(n,"type","text"),s(n,"placeholder","例如: 00112233445566778899aabbccddeeff"),s(n,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(o,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(b,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(v,"class","flex items-center justify-between mb-2"),s(C,"type","text"),s(C,"placeholder",x=r[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),s(C,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(M,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(K,Y){V(K,e,Y),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(t,i),c(t,n),Le(n,r[5]),c(t,f),c(t,m),c(m,d),c(m,g),c(e,y),c(e,k),c(k,v),c(v,o),c(o,h),c(o,a),c(v,u),c(v,b),c(k,E),c(k,C),Le(C,r[6]),c(k,S),c(k,M),c(M,T),c(M,R),c(M,H),A||(z=[Q(_,"click",r[19]),Q(n,"input",r[26]),Q(b,"click",r[20]),Q(C,"input",r[27])],A=!0)},p(K,Y){Y[0]&32&&n.value!==K[5]&&Le(n,K[5]),Y[0]&512&&ue(g,K[9]),Y[0]&2048&&ue(h,K[11]),Y[0]&2048&&x!==(x=K[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10")&&s(C,"placeholder",x),Y[0]&64&&C.value!==K[6]&&Le(C,K[6]),Y[0]&2048&&ue(T,K[11]),Y[0]&1024&&ue(H,K[10])},d(K){K&&N(e),A=!1,Fe(z)}}}function Zc(r){let e,t,l,p=r[2]?"计算哈希":r[1]==="decrypt"?"解密":"加密",w;return{c(){e=oe("svg"),t=oe("path"),l=O(),w=Z(p),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),c(e,t),V(_,l,i),V(_,w,i)},p(_,i){i[0]&6&&p!==(p=_[2]?"计算哈希":_[1]==="decrypt"?"解密":"加密")&&ue(w,p)},d(_){_&&(N(e),N(l),N(w))}}}function Qc(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},p:Pe,d(w){w&&(N(e),N(p))}}}function as(r){let e,t,l,p,w,_,i,n=r[2]?"哈希值":r[1]==="decrypt"?"明文":"Base64 密文",f,m,d,g,y,k,v,o,h,a,u=r[4].length+"",b,E,C,x;return{c(){e=L("div"),t=L("div"),l=L("label"),p=L("span"),w=Z(r[12]),_=O(),i=L("span"),f=Z(n),m=O(),d=L("button"),d.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,g=O(),y=L("div"),k=L("code"),v=Z(r[4]),o=O(),h=L("div"),a=Z("长度: "),b=Z(u),E=Z(" 字符"),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(d,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),s(y,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),s(h,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(S,M){V(S,e,M),c(e,t),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,f),c(t,m),c(t,d),c(e,g),c(e,y),c(y,k),c(k,v),c(e,o),c(e,h),c(h,a),c(h,b),c(h,E),C||(x=Q(d,"click",r[15]),C=!0)},p(S,M){M[0]&4096&&ue(w,S[12]),M[0]&6&&n!==(n=S[2]?"哈希值":S[1]==="decrypt"?"明文":"Base64 密文")&&ue(f,n),M[0]&16&&ue(v,S[4]),M[0]&16&&u!==(u=S[4].length+"")&&ue(b,u)},d(S){S&&N(e),C=!1,x()}}}function $c(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v=r[2]?"输入文本":r[1]==="decrypt"?"输入 Base64 密文":"输入明文",o,h,a,u,b,E=r[3].length+"",C,x,S,M,T,R,H,A,z,K,Y,re,J=Ke(r[13].filter(cs)),D=[];for(let B=0;B<J.length;B+=1)D[B]=ss(is(r,J,B));let P=Ke(r[13].filter(hs)),F=[];for(let B=0;B<P.length;B+=1)F[B]=ns(rs(r,P,B));let j=!r[2]&&os(r),q=!r[2]&&ls(r);function W(B,ee){return B[7]?Qc:Zc}let X=W(r),te=X(r),I=r[4]&&as(r);return{c(){e=L("div"),t=L("div"),l=L("label"),l.textContent="选择算法",p=O(),w=L("div"),_=L("div"),i=L("select"),n=L("optgroup");for(let B=0;B<D.length;B+=1)D[B].c();f=L("optgroup");for(let B=0;B<F.length;B+=1)F[B].c();m=O(),j&&j.c(),d=O(),q&&q.c(),g=O(),y=L("div"),k=L("label"),o=Z(v),h=O(),a=L("textarea"),u=O(),b=L("div"),C=Z(E),x=Z(" 字符"),S=O(),M=L("div"),T=L("button"),te.c(),H=O(),I&&I.c(),A=O(),z=L("div"),K=L("button"),K.textContent="清空全部",s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(n,"label","Hash"),s(f,"label","加密解密"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[0]===void 0&&_r(()=>r[22].call(i)),s(_,"class","flex-1"),s(w,"class","flex flex-col md:flex-row gap-3"),s(k,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(a,"placeholder",r[8]),s(a,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),T.disabled=R=r[7]||!r[3].trim()||!r[2]&&(!r[5].trim()||!r[6].trim()),s(T,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(M,"class","flex justify-center"),s(K,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(z,"class","flex justify-end"),s(e,"class","space-y-6")},m(B,ee){V(B,e,ee),c(e,t),c(t,l),c(t,p),c(t,w),c(w,_),c(_,i),c(i,n);for(let U=0;U<D.length;U+=1)D[U]&&D[U].m(n,null);c(i,f);for(let U=0;U<F.length;U+=1)F[U]&&F[U].m(f,null);Mr(i,r[0],!0),c(w,m),j&&j.m(w,null),c(e,d),q&&q.m(e,null),c(e,g),c(e,y),c(y,k),c(k,o),c(y,h),c(y,a),Le(a,r[3]),c(y,u),c(y,b),c(b,C),c(b,x),c(e,S),c(e,M),c(M,T),te.m(T,null),c(e,H),I&&I.m(e,null),c(e,A),c(e,z),c(z,K),Y||(re=[Q(i,"change",r[22]),Q(i,"change",r[23]),Q(a,"input",r[28]),Q(a,"keydown",r[18]),Q(T,"click",r[14]),Q(K,"click",r[16])],Y=!0)},p(B,ee){if(ee[0]&8192){J=Ke(B[13].filter(cs));let U;for(U=0;U<J.length;U+=1){const le=is(B,J,U);D[U]?D[U].p(le,ee):(D[U]=ss(le),D[U].c(),D[U].m(n,null))}for(;U<D.length;U+=1)D[U].d(1);D.length=J.length}if(ee[0]&8192){P=Ke(B[13].filter(hs));let U;for(U=0;U<P.length;U+=1){const le=rs(B,P,U);F[U]?F[U].p(le,ee):(F[U]=ns(le),F[U].c(),F[U].m(f,null))}for(;U<F.length;U+=1)F[U].d(1);F.length=P.length}ee[0]&8193&&Mr(i,B[0]),B[2]?j&&(j.d(1),j=null):j?j.p(B,ee):(j=os(B),j.c(),j.m(w,null)),B[2]?q&&(q.d(1),q=null):q?q.p(B,ee):(q=ls(B),q.c(),q.m(e,g)),ee[0]&6&&v!==(v=B[2]?"输入文本":B[1]==="decrypt"?"输入 Base64 密文":"输入明文")&&ue(o,v),ee[0]&256&&s(a,"placeholder",B[8]),ee[0]&8&&Le(a,B[3]),ee[0]&8&&E!==(E=B[3].length+"")&&ue(C,E),X===(X=W(B))&&te?te.p(B,ee):(te.d(1),te=X(B),te&&(te.c(),te.m(T,null))),ee[0]&236&&R!==(R=B[7]||!B[3].trim()||!B[2]&&(!B[5].trim()||!B[6].trim()))&&(T.disabled=R),B[4]?I?I.p(B,ee):(I=as(B),I.c(),I.m(e,A)):I&&(I.d(1),I=null)},i:Pe,o:Pe,d(B){B&&N(e),Nt(D,B),Nt(F,B),j&&j.d(),q&&q.d(),te.d(),I&&I.d(),Y=!1,Fe(re)}}}const cs=r=>r.type==="hash",hs=r=>r.type==="crypto";function eh(r,e,t){let l,p,w,_,i,n,{themeStore:f}=e,m="",d="",g="md5",y="encrypt",k="",v="",o=!1;const h=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];async function a(){if(!(!m.trim()||o||!window.wailsBindings)&&!(!l&&(!k.trim()||!v.trim()))){t(7,o=!0),t(4,d="");try{l?t(4,d=await window.wailsBindings.CalculateHash(m,g)):y==="encrypt"?t(4,d=await window.wailsBindings.EncryptText(m,g,k,v)):t(4,d=await window.wailsBindings.DecryptText(m,g,k,v))}catch(Y){t(4,d=""),console.error("操作失败:",Y),alert("操作失败: "+(Y.message||Y))}finally{t(7,o=!1)}}}async function u(){if(d)try{await navigator.clipboard.writeText(d)}catch(Y){console.error("复制失败:",Y)}}function b(){t(3,m=""),t(4,d=""),t(5,k=""),t(6,v="")}function E(){t(3,m=""),t(4,d="")}function C(Y){(Y.ctrlKey||Y.metaKey)&&Y.key.toLowerCase()==="enter"&&!o&&m.trim()&&(Y.preventDefault(),a())}function x(){let Y;g==="sm4-cbc"?Y=16:Y=32;const re=new Uint8Array(Y);crypto.getRandomValues(re),t(5,k=Array.from(re).map(J=>J.toString(16).padStart(2,"0")).join(""))}function S(){const Y=g==="aes-gcm"?12:16,re=new Uint8Array(Y);crypto.getRandomValues(re),t(6,v=Array.from(re).map(J=>J.toString(16).padStart(2,"0")).join(""))}function M(){g=nn(this),t(0,g),t(13,h)}const T=()=>{b()},R=()=>{t(1,y="encrypt"),E()},H=()=>{t(1,y="decrypt"),E()};function A(){k=this.value,t(5,k)}function z(){v=this.value,t(6,v)}function K(){m=this.value,t(3,m)}return r.$$set=Y=>{"themeStore"in Y&&t(21,f=Y.themeStore)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,l=(()=>{const Y=h.find(re=>re.id===g);return(Y==null?void 0:Y.type)==="hash"})()),r.$$.dirty[0]&1&&t(12,p=(()=>{var Y;return((Y=h.find(re=>re.id===g))==null?void 0:Y.name)||""})()),r.$$.dirty[0]&1&&t(11,w=g==="aes-gcm"?"Nonce":"IV"),r.$$.dirty[0]&1&&t(10,_=g==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"),r.$$.dirty[0]&1&&t(9,i=g==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"),r.$$.dirty[0]&6&&t(8,n=l?"输入要计算哈希的文本...":y==="decrypt"?"输入 Base64 密文...":"输入要加密的明文...")},[g,y,l,m,d,k,v,o,n,i,_,w,p,h,a,u,b,E,C,x,S,f,M,T,R,H,A,z,K]}class ds extends gt{constructor(e){super(),_t(this,e,eh,$c,pt,{themeStore:21},null,[-1,-1])}}function th(r){let e,t,l,p,w,_,i,n,f,m,d,g=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",y,k,v;return{c(){e=L("div"),t=L("div"),l=L("label"),l.textContent="输入日期时间",p=O(),w=L("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,_=O(),i=L("input"),f=O(),m=L("div"),d=Z("格式: "),y=Z(g),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(w,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),s(t,"class","flex items-center justify-between mb-2"),s(i,"type","text"),s(i,"placeholder",n=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(o,h){V(o,e,h),c(e,t),c(t,l),c(t,p),c(t,w),c(e,_),c(e,i),Le(i,r[3]),c(e,f),c(e,m),c(m,d),c(m,y),k||(v=[Q(w,"click",r[9]),Q(i,"input",r[19]),Q(i,"keydown",r[12])],k=!0)},p(o,h){h&2&&n!==(n=o[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&s(i,"placeholder",n),h&8&&i.value!==o[3]&&Le(i,o[3]),h&2&&g!==(g=o[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&ue(y,g)},d(o){o&&N(e),k=!1,Fe(v)}}}function rh(r){let e,t,l,p,w=r[1]==="milliseconds"?"毫秒":"秒",_,i,n,f,m,d,g,y,k;return{c(){e=L("div"),t=L("div"),l=L("label"),p=Z("输入 Unix 时间戳（"),_=Z(w),i=Z("）"),n=O(),f=L("button"),f.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,m=O(),d=L("input"),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(f,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),s(t,"class","flex items-center justify-between mb-2"),s(d,"type","number"),s(d,"placeholder",g=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),s(d,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(l,p),c(l,_),c(l,i),c(t,n),c(t,f),c(e,m),c(e,d),Le(d,r[2]),y||(k=[Q(f,"click",r[8]),Q(d,"input",r[18]),Q(d,"keydown",r[12])],y=!0)},p(v,o){o&2&&w!==(w=v[1]==="milliseconds"?"毫秒":"秒")&&ue(_,w),o&2&&g!==(g=v[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&s(d,"placeholder",g),o&4&&Ur(d.value)!==v[2]&&Le(d,v[2])},d(v){v&&N(e),y=!1,Fe(k)}}}function ih(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=Z(`
        转换`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),V(p,l,w)},d(p){p&&(N(e),N(l))}}}function sh(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=Z(`
        转换中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},d(w){w&&(N(e),N(p))}}}function us(r){let e,t,l,p=r[0]==="toDateTime"?"日期时间":"时间戳",w,_,i,n,f,m,d,g,y;return{c(){e=L("div"),t=L("div"),l=L("label"),w=Z(p),_=O(),i=L("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n=O(),f=L("div"),m=L("code"),d=Z(r[4]),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(m,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),s(f,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,v){V(k,e,v),c(e,t),c(t,l),c(l,w),c(t,_),c(t,i),c(e,n),c(e,f),c(f,m),c(m,d),g||(y=Q(i,"click",r[10]),g=!0)},p(k,v){v&1&&p!==(p=k[0]==="toDateTime"?"日期时间":"时间戳")&&ue(w,p),v&16&&ue(d,k[4])},d(k){k&&N(e),g=!1,y()}}}function nh(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H=r[1]==="milliseconds"?"毫秒":"秒",A,z,K,Y,re,J,D,P,F,j,q,W,X,te,I;function B(pe,ge){return pe[0]==="toDateTime"?rh:th}let ee=B(r),U=ee(r);function le(pe,ge){return pe[5]?sh:ih}let ae=le(r),he=ae(r),ye=r[4]&&us(r);return{c(){e=L("div"),t=L("div"),l=L("button"),p=Z("时间戳 → 日期时间"),_=O(),i=L("button"),n=Z("日期时间 → 时间戳"),m=O(),d=L("div"),g=L("div"),y=L("button"),k=Z("秒"),o=O(),h=L("button"),a=Z("毫秒"),b=O(),E=L("div"),C=L("div"),x=oe("svg"),S=oe("path"),M=O(),T=L("span"),R=Z("当前时间戳（"),A=Z(H),z=Z("）: "),K=L("strong"),Y=Z(r[6]),re=O(),U.c(),J=O(),D=L("div"),P=L("button"),he.c(),j=O(),ye&&ye.c(),q=O(),W=L("div"),X=L("button"),X.textContent="清空全部",s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(y,"class",v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(h,"class",u="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(g,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(d,"class","flex justify-end"),s(S,"stroke-linecap","round"),s(S,"stroke-linejoin","round"),s(S,"stroke-width","2"),s(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(x,"class","w-5 h-5"),s(x,"fill","none"),s(x,"stroke","currentColor"),s(x,"viewBox","0 0 24 24"),s(K,"class","font-mono"),s(C,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),s(E,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),P.disabled=F=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),s(P,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(D,"class","flex justify-center"),s(X,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(W,"class","flex justify-end"),s(e,"class","space-y-6")},m(pe,ge){V(pe,e,ge),c(e,t),c(t,l),c(l,p),c(t,_),c(t,i),c(i,n),c(e,m),c(e,d),c(d,g),c(g,y),c(y,k),c(g,o),c(g,h),c(h,a),c(e,b),c(e,E),c(E,C),c(C,x),c(x,S),c(C,M),c(C,T),c(T,R),c(T,A),c(T,z),c(T,K),c(K,Y),c(e,re),U.m(e,null),c(e,J),c(e,D),c(D,P),he.m(P,null),c(e,j),ye&&ye.m(e,null),c(e,q),c(e,W),c(W,X),te||(I=[Q(l,"click",r[14]),Q(i,"click",r[15]),Q(y,"click",r[16]),Q(h,"click",r[17]),Q(P,"click",r[7]),Q(X,"click",r[11])],te=!0)},p(pe,[ge]){ge&1&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(pe[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),ge&1&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(pe[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),ge&2&&v!==(v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(pe[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(y,"class",v),ge&2&&u!==(u="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(pe[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(h,"class",u),ge&2&&H!==(H=pe[1]==="milliseconds"?"毫秒":"秒")&&ue(A,H),ge&64&&ue(Y,pe[6]),ee===(ee=B(pe))&&U?U.p(pe,ge):(U.d(1),U=ee(pe),U&&(U.c(),U.m(e,J))),ae!==(ae=le(pe))&&(he.d(1),he=ae(pe),he&&(he.c(),he.m(P,null))),ge&45&&F!==(F=pe[5]||(pe[0]==="toDateTime"?!pe[2].trim():!pe[3].trim()))&&(P.disabled=F),pe[4]?ye?ye.p(pe,ge):(ye=us(pe),ye.c(),ye.m(e,q)):ye&&(ye.d(1),ye=null)},i:Pe,o:Pe,d(pe){pe&&N(e),U.d(),he.d(),ye&&ye.d(),te=!1,Fe(I)}}}const oh="2006-01-02 15:04:05",lh="2006-01-02 15:04:05.000";function ah(r,e,t){let{themeStore:l}=e,p="toDateTime",w="seconds",_="",i="",n="",f=!1,m=0;function d(){const M=Date.now();t(6,m=w==="milliseconds"?M:Math.floor(M/1e3))}function g(){return w==="milliseconds"?lh:oh}async function y(){if(window.wailsBindings){t(5,f=!0),t(4,n="");try{if(p==="toDateTime"){const M=parseInt(_.trim());if(isNaN(M))throw new Error("请输入有效的时间戳");w==="milliseconds"?t(4,n=await window.wailsBindings.TimestampToDateTimeMs(M,g())):t(4,n=await window.wailsBindings.TimestampToDateTime(M,g()))}else{if(!i.trim())throw new Error("请输入日期时间");if(w==="milliseconds"){const M=await window.wailsBindings.DateTimeToTimestampMs(i,g());t(4,n=M.toString())}else{const M=await window.wailsBindings.DateTimeToTimestamp(i,g());t(4,n=M.toString())}}}catch(M){t(4,n=""),console.error("转换失败:",M),alert("转换失败: "+(M.message||M))}finally{t(5,f=!1)}}}async function k(){if(window.wailsBindings)try{const M=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,_=M.toString())}catch(M){console.error("获取当前时间戳失败:",M)}}async function v(){if(window.wailsBindings)try{const M=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),T=w==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(M,g()):await window.wailsBindings.TimestampToDateTime(M,g());t(3,i=T)}catch(M){console.error("获取当前时间失败:",M)}}async function o(){if(n)try{await navigator.clipboard.writeText(n)}catch(M){console.error("复制失败:",M)}}function h(){t(2,_=""),t(3,i=""),t(4,n="")}function a(M){(M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="enter"&&!f&&(p==="toDateTime"&&_.trim()||p==="toTimestamp"&&i.trim())&&(M.preventDefault(),y())}const u=()=>{t(0,p="toDateTime"),h()},b=()=>{t(0,p="toTimestamp"),h()},E=()=>{t(1,w="seconds"),h()},C=()=>{t(1,w="milliseconds"),h()};function x(){_=Ur(this.value),t(2,_)}function S(){i=this.value,t(3,i)}return r.$$set=M=>{"themeStore"in M&&t(13,l=M.themeStore)},d(),[p,w,_,i,n,f,m,y,k,v,o,h,a,l,u,b,E,C,x,S]}class fs extends gt{constructor(e){super(),_t(this,e,ah,nh,pt,{themeStore:13})}}function ps(r,e,t){const l=r.slice();return l[12]=e[t],l[14]=t,l}function ch(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("path"),l=O(),p=L("span"),p.textContent="生成 UUID v4",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),s(e,"class","w-6 h-6"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),V(w,l,_),V(w,p,_)},d(w){w&&(N(e),N(l),N(p))}}}function hh(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=Z(`
        生成中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-6 h-6"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},d(w){w&&(N(e),N(p))}}}function _s(r){let e,t,l,p,w,_,i,n,f,m,d;function g(v,o){return v[3]===v[0]?uh:dh}let y=g(r),k=y(r);return{c(){e=L("div"),t=L("div"),l=L("label"),l.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,p=O(),w=L("button"),k.c(),_=O(),i=L("div"),n=L("code"),f=Z(r[0]),s(l,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(w,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),s(t,"class","flex items-center justify-between mb-3"),s(n,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),s(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(t,p),c(t,w),k.m(w,null),c(e,_),c(e,i),c(i,n),c(n,f),m||(d=Q(w,"click",r[9]),m=!0)},p(v,o){y!==(y=g(v))&&(k.d(1),k=y(v),k&&(k.c(),k.m(w,null))),o&1&&ue(f,v[0])},d(v){v&&N(e),k.d(),m=!1,d()}}}function dh(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=Z(`
            复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),V(p,l,w)},d(p){p&&(N(e),N(l))}}}function uh(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=Z(`
            已复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),V(p,l,w)},d(p){p&&(N(e),N(l))}}}function gs(r){let e,t,l,p,w,_,i,n,f=r[1].length+"",m,d,g,y,k,v,o,h,a=Ke(r[1]),u=[];for(let b=0;b<a.length;b+=1)u[b]=ms(ps(r,a,b));return{c(){e=L("div"),t=L("div"),l=L("label"),p=oe("svg"),w=oe("path"),_=Z(`
          历史记录
          `),i=L("span"),n=Z("("),m=Z(f),d=Z("/10)"),g=O(),y=L("button"),y.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=O(),v=L("div");for(let b=0;b<u.length;b+=1)u[b].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(p,"class","w-4 h-4"),s(p,"fill","none"),s(p,"stroke","currentColor"),s(p,"viewBox","0 0 24 24"),s(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),s(l,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(y,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),s(t,"class","flex items-center justify-between mb-3"),s(v,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(b,E){V(b,e,E),c(e,t),c(t,l),c(l,p),c(p,w),c(l,_),c(l,i),c(i,n),c(i,m),c(i,d),c(t,g),c(t,y),c(e,k),c(e,v);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(v,null);o||(h=Q(y,"click",r[6]),o=!0)},p(b,E){if(E&2&&f!==(f=b[1].length+"")&&ue(m,f),E&170){a=Ke(b[1]);let C;for(C=0;C<a.length;C+=1){const x=ps(b,a,C);u[C]?u[C].p(x,E):(u[C]=ms(x),u[C].c(),u[C].m(v,null))}for(;C<u.length;C+=1)u[C].d(1);u.length=a.length}},d(b){b&&N(e),Nt(u,b),o=!1,h()}}}function fh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function ph(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function ms(r){let e,t,l=r[12]+"",p,w,_,i,n,f,m,d,g;function y(){return r[10](r[12])}function k(a,u){return a[3]===a[12]?ph:fh}let v=k(r),o=v(r);function h(){return r[11](r[12])}return{c(){e=L("div"),t=L("code"),p=Z(l),w=O(),_=L("div"),i=L("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',n=O(),f=L("button"),o.c(),m=O(),s(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),s(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(i,"title","使用此 UUID"),s(f,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(f,"title","复制"),s(_,"class","flex items-center gap-2 shrink-0"),s(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(a,u){V(a,e,u),c(e,t),c(t,p),c(e,w),c(e,_),c(_,i),c(_,n),c(_,f),o.m(f,null),c(e,m),d||(g=[Q(i,"click",y),Q(f,"click",h)],d=!0)},p(a,u){r=a,u&2&&l!==(l=r[12]+"")&&ue(p,l),v!==(v=k(r))&&(o.d(1),o=v(r),o&&(o.c(),o.m(f,null)))},d(a){a&&N(e),o.d(),d=!1,Fe(g)}}}function vs(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',s(e,"class","text-center py-8")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function _h(r){let e,t,l,p,w,_,i,n,f,m;function d(h,a){return h[2]?hh:ch}let g=d(r),y=g(r),k=r[0]&&_s(r),v=r[1].length>0&&gs(r),o=!r[0]&&vs();return{c(){e=L("div"),t=L("div"),l=L("button"),y.c(),p=O(),w=L("div"),_=O(),k&&k.c(),i=O(),v&&v.c(),n=O(),o&&o.c(),s(w,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),l.disabled=r[2],s(l,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),s(t,"class","text-center"),s(e,"class","space-y-6")},m(h,a){V(h,e,a),c(e,t),c(t,l),y.m(l,null),c(l,p),c(l,w),c(e,_),k&&k.m(e,null),c(e,i),v&&v.m(e,null),c(e,n),o&&o.m(e,null),f||(m=Q(l,"click",r[4]),f=!0)},p(h,[a]){g!==(g=d(h))&&(y.d(1),y=g(h),y&&(y.c(),y.m(l,p))),a&4&&(l.disabled=h[2]),h[0]?k?k.p(h,a):(k=_s(h),k.c(),k.m(e,i)):k&&(k.d(1),k=null),h[1].length>0?v?v.p(h,a):(v=gs(h),v.c(),v.m(e,n)):v&&(v.d(1),v=null),h[0]?o&&(o.d(1),o=null):o||(o=vs(),o.c(),o.m(e,null))},i:Pe,o:Pe,d(h){h&&N(e),y.d(),k&&k.d(),v&&v.d(),o&&o.d(),f=!1,m()}}}function gh(r,e,t){let{themeStore:l}=e,p="",w=[],_=!1,i=null;async function n(){if(window.wailsBindings){t(2,_=!0);try{const v=await window.wailsBindings.GenerateUUIDv4();t(0,p=v),w.length<10?t(1,w=[v,...w]):t(1,w=[v,...w.slice(0,9)])}catch(v){console.error("UUID 生成失败:",v),alert("UUID 生成失败: "+(v.message||v))}finally{t(2,_=!1)}}}async function f(v){try{await navigator.clipboard.writeText(v),t(3,i=v),setTimeout(()=>t(3,i=null),2e3)}catch(o){console.error("复制失败:",o)}}function m(){t(1,w=[])}function d(v){t(0,p=v)}const g=()=>f(p),y=v=>d(v),k=v=>f(v);return r.$$set=v=>{"themeStore"in v&&t(8,l=v.themeStore)},[p,w,_,i,n,f,m,d,l,g,y,k]}class bs extends gt{constructor(e){super(),_t(this,e,gh,_h,pt,{themeStore:8})}}function ys(r,e,t){const l=r.slice();return l[19]=e[t][0],l[20]=e[t][1],l}function ws(r,e,t){const l=r.slice();return l[23]=e[t],l}function ks(r){let e,t,l=r[23].label+"",p,w,_,i,n,f,m,d;function g(){return r[16](r[23])}return{c(){e=L("button"),t=L("div"),p=Z(l),_=O(),i=L("div"),i.textContent=`${r[23].desc}`,n=O(),s(t,"class",w="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300")),s(i,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(e,"class",f="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))},m(y,k){V(y,e,k),c(e,t),c(t,p),c(e,_),c(e,i),c(e,n),m||(d=Q(e,"click",g),m=!0)},p(y,k){r=y,k&8&&w!==(w="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"))&&s(t,"class",w),k&8&&f!==(f="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))&&s(e,"class",f)},d(y){y&&N(e),m=!1,d()}}}function mh(r){let e,t,l,p=r[2]==="encode"?"编码":"解码",w;return{c(){e=oe("svg"),t=oe("path"),l=O(),w=Z(p),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),c(e,t),V(_,l,i),V(_,w,i)},p(_,i){i&4&&p!==(p=_[2]==="encode"?"编码":"解码")&&ue(w,p)},d(_){_&&(N(e),N(l),N(w))}}}function vh(r){let e,t,l,p;return{c(){e=oe("svg"),t=oe("circle"),l=oe("path"),p=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,_){V(w,e,_),c(e,t),c(e,l),V(w,p,_)},p:Pe,d(w){w&&(N(e),N(p))}}}function Ss(r){let e,t,l;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,w){V(p,e,w),t||(l=Q(e,"click",r[9]),t=!0)},p:Pe,d(p){p&&N(e),t=!1,l()}}}function Cs(r){let e,t,l,p,w=Ke(Object.entries(r[5])),_=[];for(let i=0;i<w.length;i+=1)_[i]=xs(ys(r,w,i));return{c(){e=L("div"),t=L("h4"),t.textContent="查询参数",l=O(),p=L("div");for(let i=0;i<_.length;i+=1)_[i].c();s(t,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),s(p,"class","space-y-2 max-h-40 overflow-y-auto"),s(e,"class","border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-800/50")},m(i,n){V(i,e,n),c(e,t),c(e,l),c(e,p);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(p,null)},p(i,n){if(n&32){w=Ke(Object.entries(i[5]));let f;for(f=0;f<w.length;f+=1){const m=ys(i,w,f);_[f]?_[f].p(m,n):(_[f]=xs(m),_[f].c(),_[f].m(p,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=w.length}},d(i){i&&N(e),Nt(_,i)}}}function xs(r){let e,t,l=r[19]+"",p,w,_,i,n,f=r[20]+"",m,d;return{c(){e=L("div"),t=L("span"),p=Z(l),w=O(),_=L("span"),_.textContent="=",i=O(),n=L("span"),m=Z(f),d=O(),s(t,"class","px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg font-medium"),s(_,"class","text-gray-400"),s(n,"class","text-gray-700 dark:text-gray-300 font-mono break-all"),s(e,"class","flex items-center gap-2 text-sm")},m(g,y){V(g,e,y),c(e,t),c(t,p),c(e,w),c(e,_),c(e,i),c(e,n),c(n,m),c(e,d)},p(g,y){y&32&&l!==(l=g[19]+"")&&ue(p,l),y&32&&f!==(f=g[20]+"")&&ue(m,f)},d(g){g&&N(e)}}}function bh(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u=r[2]==="encode"?"输入文本":"输入 URL 编码",b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J=r[2]==="encode"?"URL 编码结果":"解码结果",D,P,F,j,q,W,X=r[5]&&Object.keys(r[5]).length>0,te,I,B,ee,U,le,ae,he,ye,pe=Ke(r[6]),ge=[];for(let $=0;$<pe.length;$+=1)ge[$]=ks(ws(r,pe,$));function we($,ve){return $[4]?vh:mh}let Be=we(r),Me=Be(r),ce=r[1]&&Ss(r),de=X&&Cs(r);return{c(){e=L("div"),t=L("div"),l=L("button"),p=Z("编码"),_=O(),i=L("button"),n=Z("解码"),m=O(),d=L("div"),g=L("label"),g.textContent="编码/解码模式",y=O(),k=L("div");for(let $=0;$<ge.length;$+=1)ge[$].c();v=O(),o=L("div"),h=L("div"),a=L("label"),b=Z(u),E=O(),C=L("button"),C.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
        解析 URL`,x=O(),S=L("textarea"),T=O(),R=L("div"),H=L("button"),Me.c(),z=O(),K=L("div"),Y=L("div"),re=L("label"),D=Z(J),P=O(),ce&&ce.c(),F=O(),j=L("textarea"),W=O(),de&&de.c(),te=O(),I=L("div"),B=L("button"),B.textContent="清空全部",ee=O(),U=L("button"),U.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,le=O(),ae=L("div"),ae.innerHTML='<p class="font-semibold mb-1">💡 提示:</p> <ul class="space-y-1 ml-4 list-disc"><li><b>Query 参数</b>：编码空格为 +，适合表单数据</li> <li><b>路径</b>：保留斜杠，适合 URL 路径部分</li> <li><b>完整 URL</b>：解析并显示 URL 各组成部分</li> <li>按 <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded">Ctrl+Enter</kbd> 快速执行</li></ul>',s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(k,"class","grid grid-cols-3 gap-2"),s(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(C,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300"),s(h,"class","flex items-center justify-between mb-2"),s(S,"placeholder",M=r[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串..."),s(S,"class","w-full h-28 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),H.disabled=A=r[4]||!r[0].trim(),s(H,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(R,"class","flex items-center justify-center"),s(re,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(Y,"class","flex items-center justify-between mb-2"),j.readOnly=!0,s(j,"placeholder",q=r[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(j,"class","w-full h-28 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(B,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(U,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(I,"class","flex justify-between items-center"),s(ae,"class","text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg"),s(e,"class","space-y-6")},m($,ve){V($,e,ve),c(e,t),c(t,l),c(l,p),c(t,_),c(t,i),c(i,n),c(e,m),c(e,d),c(d,g),c(d,y),c(d,k);for(let ie=0;ie<ge.length;ie+=1)ge[ie]&&ge[ie].m(k,null);c(e,v),c(e,o),c(o,h),c(h,a),c(a,b),c(h,E),c(h,C),c(o,x),c(o,S),Le(S,r[0]),c(e,T),c(e,R),c(R,H),Me.m(H,null),c(e,z),c(e,K),c(K,Y),c(Y,re),c(re,D),c(Y,P),ce&&ce.m(Y,null),c(K,F),c(K,j),Le(j,r[1]),c(e,W),de&&de.m(e,null),c(e,te),c(e,I),c(I,B),c(I,ee),c(I,U),c(e,le),c(e,ae),he||(ye=[Q(l,"click",r[14]),Q(i,"click",r[15]),Q(C,"click",r[8]),Q(S,"input",r[17]),Q(S,"keydown",r[12]),Q(H,"click",r[7]),Q(j,"input",r[18]),Q(B,"click",r[10]),Q(U,"click",r[11])],he=!0)},p($,[ve]){if(ve&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+($[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),ve&4&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+($[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),ve&72){pe=Ke($[6]);let ie;for(ie=0;ie<pe.length;ie+=1){const ke=ws($,pe,ie);ge[ie]?ge[ie].p(ke,ve):(ge[ie]=ks(ke),ge[ie].c(),ge[ie].m(k,null))}for(;ie<ge.length;ie+=1)ge[ie].d(1);ge.length=pe.length}ve&4&&u!==(u=$[2]==="encode"?"输入文本":"输入 URL 编码")&&ue(b,u),ve&4&&M!==(M=$[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串...")&&s(S,"placeholder",M),ve&1&&Le(S,$[0]),Be===(Be=we($))&&Me?Me.p($,ve):(Me.d(1),Me=Be($),Me&&(Me.c(),Me.m(H,null))),ve&17&&A!==(A=$[4]||!$[0].trim())&&(H.disabled=A),ve&4&&J!==(J=$[2]==="encode"?"URL 编码结果":"解码结果")&&ue(D,J),$[1]?ce?ce.p($,ve):(ce=Ss($),ce.c(),ce.m(Y,null)):ce&&(ce.d(1),ce=null),ve&4&&q!==(q=$[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(j,"placeholder",q),ve&2&&Le(j,$[1]),ve&32&&(X=$[5]&&Object.keys($[5]).length>0),X?de?de.p($,ve):(de=Cs($),de.c(),de.m(e,te)):de&&(de.d(1),de=null)},i:Pe,o:Pe,d($){$&&N(e),Nt(ge,$),Me.d(),ce&&ce.d(),de&&de.d(),he=!1,Fe(ye)}}}function yh(r,e,t){let{themeStore:l}=e,p="",w="",_="encode",i="query",n=!1,f=null;const m=[{value:"query",label:"Query 参数",desc:"空格转为 +"},{value:"path",label:"路径",desc:"保留斜杠"},{value:"full",label:"完整 URL",desc:"解析并编码"}];async function d(){if(!(!p.trim()||n||!window.wailsBindings)){t(4,n=!0),t(5,f=null);try{if(_==="encode"){const C=await window.wailsBindings.URLEncode(p,i);t(1,w=C.encoded)}else{const C=await window.wailsBindings.URLDecode(p,i);t(1,w=C.decoded),C.params&&t(5,f=C.params)}}catch(C){t(1,w=""),console.error("处理失败:",C),alert("处理失败: "+(C.message||C))}finally{t(4,n=!1)}}}async function g(){if(!(!p.trim()||!window.wailsBindings))try{const C=await window.wailsBindings.ParseURL(p);if(t(1,w=JSON.stringify(C,null,2)),C.queryParams){t(5,f={});for(const[x,S]of Object.entries(C.queryParams))t(5,f[x]=Array.isArray(S)?S[0]:S,f)}}catch(C){console.error("解析失败:",C),alert("URL解析失败: "+(C.message||C))}}async function y(){if(w)try{await navigator.clipboard.writeText(w)}catch(C){console.error("复制失败:",C)}}function k(){t(0,p=""),t(1,w=""),t(5,f=null)}function v(){t(2,_=_==="encode"?"decode":"encode"),t(0,p=""),t(1,w=""),t(5,f=null)}function o(C){(C.ctrlKey||C.metaKey)&&C.key.toLowerCase()==="enter"&&!n&&p.trim()&&(C.preventDefault(),d())}const h=()=>t(2,_="encode"),a=()=>t(2,_="decode"),u=C=>t(3,i=C.value);function b(){p=this.value,t(0,p)}function E(){w=this.value,t(1,w)}return r.$$set=C=>{"themeStore"in C&&t(13,l=C.themeStore)},[p,w,_,i,n,f,m,d,g,y,k,v,o,l,h,a,u,b,E]}class Es extends gt{constructor(e){super(),_t(this,e,yh,bh,pt,{themeStore:13})}}function Ls(r,e,t){const l=r.slice();return l[12]=e[t],l}function Ms(r){let e,t,l,p,w,_,i,n,f,m,d,g=[],y=new Map,k,v,o,h,a,u,b,E,C,x=Ke(r[4]);const S=H=>H[12].id;for(let H=0;H<x.length;H+=1){let A=Ls(r,x,H),z=S(A);y.set(z,g[H]=Ts(z,A))}const M=[kh,wh],T=[];function R(H,A){return H[3]?0:1}return a=R(r),u=T[a]=M[a](r),{c(){e=L("div"),t=L("div"),l=O(),p=L("div"),w=L("div"),_=L("div"),i=L("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',n=O(),f=L("button"),f.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),d=L("div");for(let H=0;H<g.length;H+=1)g[H].c();k=O(),v=L("div"),v.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',o=O(),h=L("div"),u.c(),s(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(f,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(f,"title","关闭"),s(_,"class","flex items-center justify-between mb-6"),s(d,"class","space-y-2 flex-1 overflow-y-auto"),s(v,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),s(w,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),s(h,"class","flex-1 flex flex-col overflow-hidden"),s(p,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),s(e,"role","dialog"),s(e,"aria-modal","true"),s(e,"tabindex","-1")},m(H,A){V(H,e,A),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(_,n),c(_,f),c(w,m),c(w,d);for(let z=0;z<g.length;z+=1)g[z]&&g[z].m(d,null);c(w,k),c(w,v),c(p,o),c(p,h),T[a].m(h,null),r[11](e),b=!0,E||(C=[Q(f,"click",r[9]),Q(e,"click",r[5]),Q(e,"keydown",r[8])],E=!0)},p(H,A){A&88&&(x=Ke(H[4]),g=Lt(g,A,S,1,H,x,y,d,Mt,Ts,null,Ls));let z=a;a=R(H),a===z?T[a].p(H,A):(xt(),Ie(T[z],1,1,()=>{T[z]=null}),Et(),u=T[a],u?u.p(H,A):(u=T[a]=M[a](H),u.c()),Oe(u,1),u.m(h,null))},i(H){b||(Oe(u),b=!0)},o(H){Ie(u),b=!1},d(H){H&&N(e);for(let A=0;A<g.length;A+=1)g[A].d();T[a].d(),r[11](null),E=!1,Fe(C)}}}function Ds(r){let e;return{c(){e=L("span"),s(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-cyan-400 via-sky-500 to-indigo-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Ts(r,e){let t,l,p,w=e[12].icon+"",_,i,n,f=e[12].name+"",m,d,g,y,k,v,o=e[3]===e[12].id&&Ds();function h(){return e[10](e[12])}return{key:r,first:null,c(){t=L("button"),o&&o.c(),l=O(),p=L("span"),_=Z(w),i=O(),n=L("span"),m=Z(f),g=O(),s(p,"class",`text-2xl ${e[12].color}`),s(n,"class",d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),s(t,"class",y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(a,u){V(a,t,u),o&&o.m(t,null),c(t,l),c(t,p),c(p,_),c(t,i),c(t,n),c(n,m),c(t,g),k||(v=Q(t,"click",h),k=!0)},p(a,u){e=a,e[3]===e[12].id?o||(o=Ds(),o.c(),o.m(t,l)):o&&(o.d(1),o=null),u&8&&d!==(d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&s(n,"class",d),u&8&&y!==(y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&s(t,"class",y)},d(a){a&&N(t),o&&o.d(),k=!1,v()}}}function wh(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',s(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,l){V(t,e,l)},p:Pe,i:Pe,o:Pe,d(t){t&&N(e)}}}function kh(r){var a,u;let e,t,l,p=((a=r[7]())==null?void 0:a.icon)+"",w,_,i=((u=r[7]())==null?void 0:u.name)+"",n,f,m,d,g,y,k;const v=[Mh,Lh,Eh,xh,Ch,Sh],o=[];function h(b,E){return b[3]==="json"?0:b[3]==="base64"?1:b[3]==="url"?2:b[3]==="hash"?3:b[3]==="timestamp"?4:b[3]==="uuid"?5:-1}return~(g=h(r))&&(y=o[g]=v[g](r)),{c(){var b;e=L("div"),t=L("h2"),l=L("span"),w=Z(p),_=O(),n=Z(i),f=O(),m=L("div"),d=L("div"),y&&y.c(),s(l,"class",`text-2xl ${(b=r[7]())==null?void 0:b.color}`),s(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),s(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),s(d,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),s(m,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(b,E){V(b,e,E),c(e,t),c(t,l),c(l,w),c(t,_),c(t,n),V(b,f,E),V(b,m,E),c(m,d),~g&&o[g].m(d,null),k=!0},p(b,E){let C=g;g=h(b),g===C?~g&&o[g].p(b,E):(y&&(xt(),Ie(o[C],1,1,()=>{o[C]=null}),Et()),~g?(y=o[g],y?y.p(b,E):(y=o[g]=v[g](b),y.c()),Oe(y,1),y.m(d,null)):y=null)},i(b){k||(Oe(y),k=!0)},o(b){Ie(y),k=!1},d(b){b&&(N(e),N(f),N(m)),~g&&o[g].d()}}}function Sh(r){let e,t,l;var p=bs;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=Ct(p,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(_,i){e&&Xe(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=bs)){if(e){xt();const n=e;Ie(n.$$.fragment,1,0,()=>{Ye(n,1)}),Et()}p?(e=Ct(p,w(_)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Xe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){l||(e&&Oe(e.$$.fragment,_),l=!0)},o(_){e&&Ie(e.$$.fragment,_),l=!1},d(_){_&&N(t),e&&Ye(e,_)}}}function Ch(r){let e,t,l;var p=fs;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=Ct(p,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(_,i){e&&Xe(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=fs)){if(e){xt();const n=e;Ie(n.$$.fragment,1,0,()=>{Ye(n,1)}),Et()}p?(e=Ct(p,w(_)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Xe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){l||(e&&Oe(e.$$.fragment,_),l=!0)},o(_){e&&Ie(e.$$.fragment,_),l=!1},d(_){_&&N(t),e&&Ye(e,_)}}}function xh(r){let e,t,l;var p=ds;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=Ct(p,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(_,i){e&&Xe(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=ds)){if(e){xt();const n=e;Ie(n.$$.fragment,1,0,()=>{Ye(n,1)}),Et()}p?(e=Ct(p,w(_)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Xe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){l||(e&&Oe(e.$$.fragment,_),l=!0)},o(_){e&&Ie(e.$$.fragment,_),l=!1},d(_){_&&N(t),e&&Ye(e,_)}}}function Eh(r){let e,t,l;var p=Es;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=Ct(p,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(_,i){e&&Xe(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=Es)){if(e){xt();const n=e;Ie(n.$$.fragment,1,0,()=>{Ye(n,1)}),Et()}p?(e=Ct(p,w(_)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Xe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){l||(e&&Oe(e.$$.fragment,_),l=!0)},o(_){e&&Ie(e.$$.fragment,_),l=!1},d(_){_&&N(t),e&&Ye(e,_)}}}function Lh(r){let e,t,l;var p=ts;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=Ct(p,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(_,i){e&&Xe(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=ts)){if(e){xt();const n=e;Ie(n.$$.fragment,1,0,()=>{Ye(n,1)}),Et()}p?(e=Ct(p,w(_)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Xe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){l||(e&&Oe(e.$$.fragment,_),l=!0)},o(_){e&&Ie(e.$$.fragment,_),l=!1},d(_){_&&N(t),e&&Ye(e,_)}}}function Mh(r){let e,t,l;var p=$i;function w(_,i){return{props:{themeStore:_[1]}}}return p&&(e=Ct(p,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(_,i){e&&Xe(e,_,i),V(_,t,i),l=!0},p(_,i){if(p!==(p=$i)){if(e){xt();const n=e;Ie(n.$$.fragment,1,0,()=>{Ye(n,1)}),Et()}p?(e=Ct(p,w(_)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Xe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){l||(e&&Oe(e.$$.fragment,_),l=!0)},o(_){e&&Ie(e.$$.fragment,_),l=!1},d(_){_&&N(t),e&&Ye(e,_)}}}function Dh(r){let e,t,l=r[0]&&Ms(r);return{c(){l&&l.c(),e=wt()},m(p,w){l&&l.m(p,w),V(p,e,w),t=!0},p(p,[w]){p[0]?l?(l.p(p,w),w&1&&Oe(l,1)):(l=Ms(p),l.c(),Oe(l,1),l.m(e.parentNode,e)):l&&(xt(),Ie(l,1,1,()=>{l=null}),Et())},i(p){t||(Oe(l),t=!0)},o(p){Ie(l),t=!1},d(p){p&&N(e),l&&l.d(p)}}}function Th(r,e,t){let{isOpen:l=!1}=e,{themeStore:p}=e,w=null,_;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"url",name:"URL 编解码",icon:"🔗",color:"text-orange-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function n(v){v.target===v.currentTarget&&t(0,l=!1)}function f(v){t(3,w=v)}function m(){return i.find(v=>v.id===w)}function d(v){v.key==="Escape"&&l&&(v.preventDefault(),t(0,l=!1))}const g=()=>t(0,l=!1),y=v=>f(v.id);function k(v){tt[v?"unshift":"push"](()=>{_=v,t(2,_)})}return r.$$set=v=>{"isOpen"in v&&t(0,l=v.isOpen),"themeStore"in v&&t(1,p=v.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&l&&Er().then(()=>{_&&_.focus()})},[l,p,_,w,i,n,f,m,d,g,y,k]}class Bh extends gt{constructor(e){super(),_t(this,e,Th,Dh,pt,{isOpen:0,themeStore:1})}}function Bs(r,e,t){const l=r.slice();return l[57]=e[t],l[59]=t,l}function As(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h;return{c(){e=L("div"),t=L("label"),t.textContent="认证方式",l=O(),p=L("div"),w=L("button"),_=L("div"),i=Z("密码"),m=O(),d=L("button"),g=L("div"),y=Z("SSH 密钥"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"class",n=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(w,"type","button"),s(w,"class",f=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(g,"class",k=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(d,"type","button"),s(d,"class",v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(p,"class","flex gap-2")},m(a,u){V(a,e,u),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(p,m),c(p,d),c(d,g),c(g,y),o||(h=[Q(w,"click",r[33]),Q(d,"click",r[34])],o=!0)},p(a,u){u[0]&8&&n!==(n=`text-xs font-medium ${a[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(_,"class",n),u[0]&8&&f!==(f=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${a[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",f),u[0]&8&&k!==(k=`text-xs font-medium ${a[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(g,"class",k),u[0]&8&&v!==(v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${a[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(d,"class",v)},d(a){a&&N(e),o=!1,Fe(h)}}}function Rs(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a;function u(M,T){return M[11]?Rh:Ah}let b=u(r),E=b(r);function C(M,T){return M[11]?Ph:Oh}let x=C(r),S=x(r);return{c(){e=L("div"),t=L("label"),t.textContent="SSH 私钥文件",l=O(),p=L("div"),w=L("input"),_=O(),i=L("button"),i.textContent="选择文件",n=O(),f=L("div"),m=L("label"),m.textContent="Passphrase（可选）",d=O(),g=L("div"),E.c(),y=O(),k=L("button"),S.c(),v=O(),o=L("p"),o.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(w,"type","text"),s(w,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),w.readOnly=!0,s(w,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),s(i,"type","button"),s(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),s(p,"class","flex gap-1.5"),s(m,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(k,"type","button"),s(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(g,"class","relative"),s(o,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(M,T){V(M,e,T),c(e,t),c(e,l),c(e,p),c(p,w),Le(w,r[5].keyPath),c(p,_),c(p,i),V(M,n,T),V(M,f,T),c(f,m),c(f,d),c(f,g),E.m(g,null),c(g,y),c(g,k),S.m(k,null),c(f,v),c(f,o),h||(a=[Q(w,"input",r[35]),Q(i,"click",r[16]),Q(k,"click",r[38])],h=!0)},p(M,T){T[0]&32&&w.value!==M[5].keyPath&&Le(w,M[5].keyPath),b===(b=u(M))&&E?E.p(M,T):(E.d(1),E=b(M),E&&(E.c(),E.m(g,y))),x!==(x=C(M))&&(S.d(1),S=x(M),S&&(S.c(),S.m(k,null)))},d(M){M&&(N(e),N(n),N(f)),E.d(),S.d(),h=!1,Fe(a)}}}function Ah(r){let e,t,l;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),Le(e,r[5].passphrase),t||(l=Q(e,"input",r[37]),t=!0)},p(p,w){w[0]&32&&e.value!==p[5].passphrase&&Le(e,p[5].passphrase)},d(p){p&&N(e),t=!1,l()}}}function Rh(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),Le(e,r[5].passphrase),t||(l=Q(e,"input",r[36]),t=!0)},p(p,w){w[0]&32&&e.value!==p[5].passphrase&&Le(e,p[5].passphrase)},d(p){p&&N(e),t=!1,l()}}}function Oh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function Ph(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),c(e,l)},d(p){p&&N(e)}}}function Os(r){let e,t,l;return{c(){e=L("div"),t=Z(r[8]),s(e,"class",l=`p-2 rounded-md text-xs ${r[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(p,w){V(p,e,w),c(e,t)},p(p,w){w[0]&256&&ue(t,p[8]),w[0]&256&&l!==(l=`p-2 rounded-md text-xs ${p[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&s(e,"class",l)},d(p){p&&N(e)}}}function Ps(r){let e,t,l,p,w,_,i,n,f,m;return{c(){e=L("div"),t=L("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',l=O(),p=L("select"),w=L("option"),w.textContent="MySQL",_=L("option"),_.textContent="PostgreSQL",i=L("option"),i.textContent="MongoDB",n=L("option"),n.textContent="Redis",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),w.__value="mysql",Le(w,w.__value),_.__value="postgresql",Le(_,_.__value),i.__value="mongodb",Le(i,i.__value),n.__value="redis",Le(n,n.__value),s(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[5].dbType===void 0&&_r(()=>r[39].call(p))},m(d,g){V(d,e,g),c(e,t),c(e,l),c(e,p),c(p,w),c(p,_),c(p,i),c(p,n),Mr(p,r[5].dbType,!0),f||(m=Q(p,"change",r[39]),f=!0)},p(d,g){g[0]&32&&Mr(p,d[5].dbType)},d(d){d&&N(e),f=!1,m()}}}function Hs(r){let e,t,l,p,w,_;return{c(){e=L("div"),t=L("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',l=O(),p=L("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"type","text"),p.required=!0,s(p,"placeholder","root"),s(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){V(i,e,n),c(e,t),c(e,l),c(e,p),Le(p,r[5].username),w||(_=Q(p,"input",r[42]),w=!0)},p(i,n){n[0]&32&&p.value!==i[5].username&&Le(p,i[5].username)},d(i){i&&N(e),w=!1,_()}}}function Is(r){let e,t,l,p,w,_,i,n,f,m,d,g,y;function k(b,E){return b[10]?Ih:Hh}let v=k(r),o=v(r);function h(b,E){return b[10]?Wh:Fh}let a=h(r),u=a(r);return{c(){e=L("div"),t=L("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',l=O(),p=L("div"),o.c(),w=O(),_=L("button"),u.c(),i=O(),n=L("div"),f=L("input"),m=O(),d=L("span"),d.textContent="保存密码",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"type","button"),s(_,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(p,"class","relative"),s(f,"type","checkbox"),s(f,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),s(d,"class","text-xs text-gray-700 dark:text-gray-300"),s(n,"class","flex items-center gap-1.5 cursor-pointer")},m(b,E){V(b,e,E),c(e,t),c(e,l),c(e,p),o.m(p,null),c(p,w),c(p,_),u.m(_,null),V(b,i,E),V(b,n,E),c(n,f),f.checked=r[5].savePassword,c(n,m),c(n,d),g||(y=[Q(_,"click",r[45]),Q(f,"change",r[46])],g=!0)},p(b,E){v===(v=k(b))&&o?o.p(b,E):(o.d(1),o=v(b),o&&(o.c(),o.m(p,w))),a!==(a=h(b))&&(u.d(1),u=a(b),u&&(u.c(),u.m(_,null))),E[0]&32&&(f.checked=b[5].savePassword)},d(b){b&&(N(e),N(i),N(n)),o.d(),u.d(),g=!1,Fe(y)}}}function Hh(r){let e,t,l;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),Le(e,r[5].password),t||(l=Q(e,"input",r[44]),t=!0)},p(p,w){w[0]&32&&e.value!==p[5].password&&Le(e,p[5].password)},d(p){p&&N(e),t=!1,l()}}}function Ih(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,w){V(p,e,w),Le(e,r[5].password),t||(l=Q(e,"input",r[43]),t=!0)},p(p,w){w[0]&32&&e.value!==p[5].password&&Le(e,p[5].password)},d(p){p&&N(e),t=!1,l()}}}function Fh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function Wh(r){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,w){V(p,e,w),c(e,t),c(e,l)},d(p){p&&N(e)}}}function Fs(r){let e,t,l,p,w,_;return{c(){e=L("div"),t=L("label"),t.textContent="数据库名",l=O(),p=L("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"type","text"),s(p,"placeholder","例如：production_db"),s(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){V(i,e,n),c(e,t),c(e,l),c(e,p),Le(p,r[5].database),w||(_=Q(p,"input",r[47]),w=!0)},p(i,n){n[0]&32&&p.value!==i[5].database&&Le(p,i[5].database)},d(i){i&&N(e),w=!1,_()}}}function Ws(r){let e,t=[],l=new Map,p,w=Ke(r[14]);const _=n=>n[57];for(let n=0;n<w.length;n+=1){let f=Bs(r,w,n),m=_(f);l.set(m,t[n]=js(m,f))}let i=r[14].length===0&&zs();return{c(){e=L("div");for(let n=0;n<t.length;n+=1)t[n].c();p=O(),i&&i.c(),s(e,"class","absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg max-h-48 overflow-y-auto")},m(n,f){V(n,e,f);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);c(e,p),i&&i.m(e,null)},p(n,f){f[0]&2121728&&(w=Ke(n[14]),t=Lt(t,f,_,1,n,w,l,e,Mt,js,p,Bs)),n[14].length===0?i||(i=zs(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(n){n&&N(e);for(let f=0;f<t.length;f+=1)t[f].d();i&&i.d()}}}function js(r,e){let t,l=e[57]+"",p,w,_,i;function n(){return e[49](e[57])}function f(){return e[50](e[59])}return{key:r,first:null,c(){t=L("div"),p=Z(l),s(t,"class",w=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`),this.first=t},m(m,d){V(m,t,d),c(t,p),_||(i=[Q(t,"click",n),Q(t,"mouseover",f)],_=!0)},p(m,d){e=m,d[0]&16384&&l!==(l=e[57]+"")&&ue(p,l),d[0]&24576&&w!==(w=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`)&&s(t,"class",w)},d(m){m&&N(t),_=!1,Fe(i)}}}function zs(r){let e;return{c(){e=L("div"),e.textContent="没有匹配的分组",s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function jh(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J,D,P,F,j,q,W,X,te,I,B,ee,U,le,ae,he,ye,pe,ge,we,Be,Me,ce,de,$,ve,ie,ke,ze,We,je,ne,_e,Ne,Ee,G,be,Ce,Se,Ae,Re=r[7]?"测试中...":"测试连接",He,xe,qe,ht=r[9]?"保存中...":r[1]?"更新连接":"添加连接",$e,rt,bt,Ve=r[2]==="ssh"&&As(r),it=r[3]==="key"&&Rs(r),at=r[8]&&Os(r),et=r[2]==="database"&&Ps(r),ot=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&Hs(r),ct=r[3]==="password"&&Is(r),Qe=r[2]==="database"&&Fs(r),fe=r[12]&&r[6].length>0&&Ws(r);return{c(){e=L("div"),t=L("label"),t.textContent="连接类型",l=O(),p=L("div"),w=L("button"),_=L("div"),i=oe("svg"),n=oe("path"),m=O(),d=L("span"),g=Z("SSH"),v=O(),o=L("button"),h=L("div"),a=oe("svg"),u=oe("path"),E=O(),C=L("span"),x=Z("数据库"),T=O(),R=L("button"),H=L("div"),A=oe("svg"),z=oe("path"),Y=O(),re=L("span"),J=Z("Docker"),F=O(),j=L("form"),q=L("div"),W=L("label"),W.innerHTML='连接名称 <span class="text-red-500">*</span>',X=O(),te=L("input"),I=O(),Ve&&Ve.c(),B=O(),it&&it.c(),ee=O(),at&&at.c(),U=O(),et&&et.c(),le=O(),ae=L("div"),he=L("div"),ye=L("label"),ye.innerHTML='主机地址 <span class="text-red-500">*</span>',pe=O(),ge=L("input"),we=O(),Be=L("div"),Me=L("label"),Me.innerHTML='端口 <span class="text-red-500">*</span>',ce=O(),de=L("input"),$=O(),ot&&ot.c(),ve=O(),ct&&ct.c(),ie=O(),Qe&&Qe.c(),ke=O(),ze=L("div"),We=L("label"),We.textContent="分组",je=O(),ne=L("div"),_e=L("input"),Ee=O(),fe&&fe.c(),G=O(),be=L("div"),Ce=L("button"),Ce.textContent="取消",Se=O(),Ae=L("button"),He=Z(Re),xe=O(),qe=L("button"),$e=Z(ht),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),s(i,"class",f=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(d,"class",y=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(_,"class","flex items-center justify-center gap-1"),s(w,"type","button"),s(w,"class",k=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","2"),s(u,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),s(a,"class",b=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(C,"class",S=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(h,"class","flex items-center justify-center gap-1"),s(o,"type","button"),s(o,"class",M=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(z,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),s(A,"class",K=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(A,"fill","currentColor"),s(A,"viewBox","0 0 24 24"),s(re,"class",D=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(H,"class","flex items-center justify-center gap-1"),s(R,"type","button"),s(R,"class",P=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(p,"class","grid grid-cols-3 gap-2"),s(e,"class","mb-4"),s(W,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(te,"type","text"),te.required=!0,s(te,"placeholder","例如：生产服务器-01"),s(te,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ye,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(ge,"type","text"),ge.required=!0,s(ge,"placeholder","192.168.1.10 或 example.com"),s(ge,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(he,"class","col-span-2"),s(Me,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(de,"type","text"),de.required=!0,s(de,"placeholder",r[18]()),s(de,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ae,"class","grid grid-cols-3 gap-2"),s(We,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_e,"type","text"),s(_e,"placeholder","例如：生产环境"),s(_e,"class",Ne=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${r[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`),s(ne,"class","relative"),s(Ce,"type","button"),s(Ce,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(Ae,"type","button"),Ae.disabled=r[7],s(Ae,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(qe,"type","submit"),qe.disabled=r[9],s(qe,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(be,"class","flex gap-2 pt-3"),s(j,"class","space-y-3")},m(me,Ge){V(me,e,Ge),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(_,i),c(i,n),c(_,m),c(_,d),c(d,g),c(p,v),c(p,o),c(o,h),c(h,a),c(a,u),c(h,E),c(h,C),c(C,x),c(p,T),c(p,R),c(R,H),c(H,A),c(A,z),c(H,Y),c(H,re),c(re,J),V(me,F,Ge),V(me,j,Ge),c(j,q),c(q,W),c(q,X),c(q,te),Le(te,r[5].name),c(j,I),Ve&&Ve.m(j,null),c(j,B),it&&it.m(j,null),c(j,ee),at&&at.m(j,null),c(j,U),et&&et.m(j,null),c(j,le),c(j,ae),c(ae,he),c(he,ye),c(he,pe),c(he,ge),Le(ge,r[5].host),c(ae,we),c(ae,Be),c(Be,Me),c(Be,ce),c(Be,de),Le(de,r[5].port),c(j,$),ot&&ot.m(j,null),c(j,ve),ct&&ct.m(j,null),c(j,ie),Qe&&Qe.m(j,null),c(j,ke),c(j,ze),c(ze,We),c(ze,je),c(ze,ne),c(ne,_e),Le(_e,r[4]),c(ne,Ee),fe&&fe.m(ne,null),c(j,G),c(j,be),c(be,Ce),c(be,Se),c(be,Ae),c(Ae,He),c(be,xe),c(be,qe),c(qe,$e),rt||(bt=[Q(w,"click",r[29]),Q(o,"click",r[30]),Q(R,"click",r[31]),Q(te,"input",r[32]),Q(ge,"input",r[40]),Q(de,"input",r[41]),Q(_e,"input",r[48]),Q(_e,"focus",r[19]),Q(_e,"input",r[20]),Q(_e,"keydown",r[22]),Q(_e,"blur",r[23]),Q(Ce,"click",r[51]),Q(Ae,"click",r[15]),Q(j,"submit",Fn(r[17]))],rt=!0)},p(me,Ge){Ge[0]&4&&f!==(f=`w-4 h-4 ${me[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(i,"class",f),Ge[0]&4&&y!==(y=`text-xs font-medium ${me[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(d,"class",y),Ge[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${me[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",k),Ge[0]&4&&b!==(b=`w-4 h-4 ${me[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(a,"class",b),Ge[0]&4&&S!==(S=`text-xs font-medium ${me[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(C,"class",S),Ge[0]&4&&M!==(M=`p-2 rounded-lg border-2 transition-all ${me[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(o,"class",M),Ge[0]&4&&K!==(K=`w-4 h-4 ${me[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(A,"class",K),Ge[0]&4&&D!==(D=`text-xs font-medium ${me[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(re,"class",D),Ge[0]&4&&P!==(P=`p-2 rounded-lg border-2 transition-all ${me[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(R,"class",P),Ge[0]&32&&te.value!==me[5].name&&Le(te,me[5].name),me[2]==="ssh"?Ve?Ve.p(me,Ge):(Ve=As(me),Ve.c(),Ve.m(j,B)):Ve&&(Ve.d(1),Ve=null),me[3]==="key"?it?it.p(me,Ge):(it=Rs(me),it.c(),it.m(j,ee)):it&&(it.d(1),it=null),me[8]?at?at.p(me,Ge):(at=Os(me),at.c(),at.m(j,U)):at&&(at.d(1),at=null),me[2]==="database"?et?et.p(me,Ge):(et=Ps(me),et.c(),et.m(j,le)):et&&(et.d(1),et=null),Ge[0]&32&&ge.value!==me[5].host&&Le(ge,me[5].host),Ge[0]&32&&de.value!==me[5].port&&Le(de,me[5].port),me[3]==="password"||me[2]==="database"||me[2]==="docker"?ot?ot.p(me,Ge):(ot=Hs(me),ot.c(),ot.m(j,ve)):ot&&(ot.d(1),ot=null),me[3]==="password"?ct?ct.p(me,Ge):(ct=Is(me),ct.c(),ct.m(j,ie)):ct&&(ct.d(1),ct=null),me[2]==="database"?Qe?Qe.p(me,Ge):(Qe=Fs(me),Qe.c(),Qe.m(j,ke)):Qe&&(Qe.d(1),Qe=null),Ge[0]&4096&&Ne!==(Ne=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${me[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`)&&s(_e,"class",Ne),Ge[0]&16&&_e.value!==me[4]&&Le(_e,me[4]),me[12]&&me[6].length>0?fe?fe.p(me,Ge):(fe=Ws(me),fe.c(),fe.m(ne,null)):fe&&(fe.d(1),fe=null),Ge[0]&128&&Re!==(Re=me[7]?"测试中...":"测试连接")&&ue(He,Re),Ge[0]&128&&(Ae.disabled=me[7]),Ge[0]&514&&ht!==(ht=me[9]?"保存中...":me[1]?"更新连接":"添加连接")&&ue($e,ht),Ge[0]&512&&(qe.disabled=me[9])},d(me){me&&(N(e),N(F),N(j)),Ve&&Ve.d(),it&&it.d(),at&&at.d(),et&&et.d(),ot&&ot.d(),ct&&ct.d(),Qe&&Qe.d(),fe&&fe.d(),rt=!1,Fe(bt)}}}function zh(r){let e,t,l;function p(_){r[53](_)}let w={onClose:r[52],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[jh]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new mr({props:w}),tt.push(()=>ut(e,"isOpen",p)),{c(){Ze(e.$$.fragment)},m(_,i){Xe(e,_,i),l=!0},p(_,i){const n={};i[0]&1&&(n.onClose=_[52]),i[0]&2&&(n.title=_[1]?"编辑连接":"添加连接"),i[0]&32767|i[1]&536870912&&(n.$$scope={dirty:i,ctx:_}),!t&&i[0]&1&&(t=!0,n.isOpen=_[0],dt(()=>t=!1)),e.$set(n)},i(_){l||(Oe(e.$$.fragment,_),l=!0)},o(_){Ie(e.$$.fragment,_),l=!1},d(_){Ye(e,_)}}}function Uh(r,e,t){let l,p,w,_;vt(r,Ut,ie=>t(28,_=ie));let{isOpen:i=!1}=e,{onAdd:n=()=>{}}=e,{onUpdate:f=()=>{}}=e,{editingAsset:m=null}=e,d="ssh",g="password",y=!1,k="",v=!1,o=!1,h=!1,a=!1,u=!1,b=!1,E="",C=-1,x={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function S(){if(!window.wailsBindings){t(8,k="Wails 绑定未加载");return}if(!x.host){t(8,k="请填写主机地址");return}if(g==="password"&&!x.password){t(8,k="请输入密码以测试连接");return}if(g==="password"&&!x.username){t(8,k="请填写用户名");return}if(g==="key"&&!x.keyPath){t(8,k="请选择 SSH 密钥文件");return}t(7,y=!0),t(8,k="");try{const ie=g==="key"?x.keyPath:x.password;await window.wailsBindings.TestConnection(x.host,parseInt(x.port),x.username,g,ie,x.passphrase||""),t(8,k="✓ 连接成功")}catch(ie){console.error("Connection test failed:",ie),t(8,k="✗ 连接失败: "+ie)}finally{t(7,y=!1)}}async function M(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const ie=await window.wailsBindings.SelectSSHKeyFile();ie&&t(5,x.keyPath=ie,x)}catch(ie){console.error("Failed to select key file:",ie),t(8,k="选择密钥文件失败: "+ie)}}async function T(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!x.name||!x.host){alert("请填写必填字段（连接名称、主机地址）");return}if(g==="password"&&!x.username){alert("密码认证需要填写用户名");return}if(g==="password"&&!x.password){alert("密码认证需要输入密码");return}if(g==="key"&&!x.keyPath){alert("密钥认证需要选择密钥文件");return}t(9,v=!0);try{const ie=!!x.id,ke={id:ie?x.id:`conn_${Date.now()}`,name:x.name,host:x.host,port:parseInt(x.port),user:x.username,auth_type:g,key_path:g==="key"?x.keyPath:"",tags:[x.group||"默认分组"],type:d,metadata:{database:x.database||void 0}};ie?(await window.wailsBindings.UpdateConnection(ke),g==="password"&&x.password&&x.savePassword?await window.wailsBindings.SavePassword(ke.id,x.password):g==="password"&&!x.savePassword&&await window.wailsBindings.DeletePassword(ke.id),f(ke)):(n(ke),g==="password"&&x.password&&x.savePassword&&await window.wailsBindings.SavePassword(ke.id,x.password)),t(0,i=!1)}catch(ie){console.error("Failed to save connection:",ie),alert("保存连接失败: "+ie)}finally{t(9,v=!1)}}function R(){t(5,x={id:"",name:"",host:"",port:H(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(8,k=""),t(10,o=!1),t(11,h=!1),t(12,b=!1),t(4,E=""),t(13,C=-1)}function H(){switch(d){case"ssh":return"22";case"docker":return"2375";case"database":switch(x.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function A(){var ie,ke,ze;if(!(!m||!i||a))try{const We=await window.wailsBindings.GetConnection(m.id);if(We){t(5,x={id:We.id,name:We.name||"",host:We.host||"",port:((ie=We.port)==null?void 0:ie.toString())||"",username:We.user||"",password:"",savePassword:!1,keyPath:We.key_path||"",passphrase:"",group:((ke=We.tags)==null?void 0:ke[0])||"",dbType:"mysql",database:((ze=We.metadata)==null?void 0:ze.database)||""}),t(2,d=We.type||"ssh"),t(3,g=We.auth_type||"password"),a=!0;try{if(await window.wailsBindings.HasPassword(We.id)){t(5,x.savePassword=!0,x);const ne=await window.wailsBindings.GetPassword(We.id);t(5,x.password=ne||"",x)}}catch(je){console.warn("Failed to load password:",je)}}}catch(We){console.error("Failed to load connection:",We)}}function z(){t(12,b=!b),b&&(t(4,E=x.group||""),t(13,C=w.indexOf(x.group)))}function K(ie){t(4,E=ie.target.value),t(5,x.group=ie.target.value,x),t(12,b=!0),t(13,C=-1)}function Y(ie){t(5,x.group=ie,x),t(4,E=ie),t(12,b=!1),t(13,C=w.indexOf(ie))}function re(ie){const ke=w;if(!b){(ie.key==="ArrowDown"||ie.key==="ArrowUp"||ie.key==="Enter")&&(ie.preventDefault(),t(12,b=!0),t(4,E=x.group||""),t(13,C=ke.indexOf(x.group)));return}switch(ie.key){case"ArrowDown":ie.preventDefault(),t(13,C=Math.min(C+1,ke.length-1));break;case"ArrowUp":ie.preventDefault(),t(13,C=Math.max(C-1,0));break;case"Enter":ie.preventDefault(),C>=0&&C<ke.length?Y(ke[C]):t(12,b=!1);break;case"Escape":ie.preventDefault(),t(12,b=!1),t(4,E=x.group||"");break;case"Tab":ie.preventDefault(),t(12,b=!1);break}}function J(){setTimeout(()=>{t(12,b=!1)},150)}const D=()=>t(2,d="ssh"),P=()=>t(2,d="database"),F=()=>t(2,d="docker");function j(){x.name=this.value,t(5,x),t(0,i),t(1,m)}const q=()=>{t(3,g="password"),t(8,k="")},W=()=>{t(3,g="key"),t(8,k="")};function X(){x.keyPath=this.value,t(5,x),t(0,i),t(1,m)}function te(){x.passphrase=this.value,t(5,x),t(0,i),t(1,m)}function I(){x.passphrase=this.value,t(5,x),t(0,i),t(1,m)}const B=()=>t(11,h=!h);function ee(){x.dbType=nn(this),t(5,x),t(0,i),t(1,m)}function U(){x.host=this.value,t(5,x),t(0,i),t(1,m)}function le(){x.port=this.value,t(5,x),t(0,i),t(1,m)}function ae(){x.username=this.value,t(5,x),t(0,i),t(1,m)}function he(){x.password=this.value,t(5,x),t(0,i),t(1,m)}function ye(){x.password=this.value,t(5,x),t(0,i),t(1,m)}const pe=()=>t(10,o=!o);function ge(){x.savePassword=this.checked,t(5,x),t(0,i),t(1,m)}function we(){x.database=this.value,t(5,x),t(0,i),t(1,m)}function Be(){E=this.value,t(4,E)}const Me=ie=>Y(ie),ce=ie=>t(13,C=ie),de=()=>t(0,i=!1),$=()=>{t(0,i=!1)};function ve(ie){i=ie,t(0,i)}return r.$$set=ie=>{"isOpen"in ie&&t(0,i=ie.isOpen),"onAdd"in ie&&t(24,n=ie.onAdd),"onUpdate"in ie&&t(25,f=ie.onUpdate),"editingAsset"in ie&&t(1,m=ie.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&268435456&&t(27,l=_.reduce((ie,ke)=>(ke.group&&!ie.includes(ke.group)&&ie.push(ke.group),ie),[])),r.$$.dirty[0]&134217744&&t(6,p=l.filter(ie=>ie.toLowerCase().includes(E.toLowerCase()))),r.$$.dirty[0]&35&&i&&!m&&!x.id&&(x.port||t(5,x.port=H(),x)),r.$$.dirty[0]&32&&x.port===""&&t(5,x.port=H(),x),r.$$.dirty[0]&96&&t(14,w=x.group&&!p.includes(x.group)?[...p,x.group]:p),r.$$.dirty[0]&1&&t(26,u=i),r.$$.dirty[0]&67108865&&u&&!i&&R(),r.$$.dirty[0]&12&&(d==="ssh"?g!=="password"&&g!=="key"&&t(3,g="password"):t(3,g="password")),r.$$.dirty[0]&3&&i&&m&&A(),r.$$.dirty[0]&34&&m&&x.id!==m.id&&(a=!1),r.$$.dirty[0]&67108867&&!u&&i&&m&&(a=!1)},[i,m,d,g,E,x,p,y,k,v,o,h,b,C,w,S,M,T,H,z,K,Y,re,J,n,f,u,l,_,D,P,F,j,q,W,X,te,I,B,ee,U,le,ae,he,ye,pe,ge,we,Be,Me,ce,de,$,ve]}class Nh extends gt{constructor(e){super(),_t(this,e,Uh,zh,pt,{isOpen:0,onAdd:24,onUpdate:25,editingAsset:1},null,[-1,-1])}}function Vh(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re;return{c(){e=L("div"),t=L("div"),t.textContent="哈",l=O(),p=L("div"),w=L("h3"),_=Z("AHaSSHTools"),n=O(),f=L("p"),m=Z("啊哈 SSH 连接工具"),g=O(),y=L("p"),k=Z("版本 "),v=Z(r[3]),h=O(),a=L("p"),u=Z("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),E=O(),C=L("button"),x=oe("svg"),S=oe("path"),M=O(),T=L("span"),T.textContent="访问 GitHub",H=O(),A=L("p"),z=Z("© 2026 AHaSSHTools. All rights reserved."),s(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),s(w,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),s(f,"class",d="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),s(y,"class",o="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),s(p,"class","text-center space-y-1"),s(a,"class",b="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),s(S,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),s(x,"class","w-5 h-5"),s(x,"viewBox","0 0 24 24"),s(x,"fill","currentColor"),s(C,"class",R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),s(A,"class",K="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),s(e,"class","flex flex-col items-center gap-5 py-4")},m(J,D){V(J,e,D),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),c(p,n),c(p,f),c(f,m),c(p,g),c(p,y),c(y,k),c(y,v),c(e,h),c(e,a),c(a,u),c(e,E),c(e,C),c(C,x),c(x,S),c(C,M),c(C,T),c(e,H),c(e,A),c(A,z),Y||(re=Q(C,"click",qh),Y=!0)},p(J,D){D&4&&i!==(i="text-xl font-bold "+(J[2]==="dark"?"text-white":"text-gray-900"))&&s(w,"class",i),D&4&&d!==(d="text-sm "+(J[2]==="dark"?"text-gray-400":"text-gray-500"))&&s(f,"class",d),D&8&&ue(v,J[3]),D&4&&o!==(o="text-xs "+(J[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&s(y,"class",o),D&4&&b!==(b="text-sm text-center max-w-xs "+(J[2]==="dark"?"text-gray-400":"text-gray-600"))&&s(a,"class",b),D&4&&R!==(R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(J[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&s(C,"class",R),D&4&&K!==(K="text-xs "+(J[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&s(A,"class",K)},d(J){J&&N(e),Y=!1,re()}}}function Kh(r){let e,t,l;function p(_){r[5](_)}let w={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[Vh]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new mr({props:w}),tt.push(()=>ut(e,"isOpen",p)),{c(){Ze(e.$$.fragment)},m(_,i){Xe(e,_,i),l=!0},p(_,[i]){const n={};i&2&&(n.onClose=_[1]),i&140&&(n.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,n.isOpen=_[0],dt(()=>t=!1)),e.$set(n)},i(_){l||(Oe(e.$$.fragment,_),l=!0)},o(_){Ie(e.$$.fragment,_),l=!1},d(_){Ye(e,_)}}}async function qh(){try{await(await fr(()=>Promise.resolve().then(()=>_n),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function Gh(r,e,t){let{isOpen:l=!1}=e,{onClose:p=()=>{}}=e,{themeStore:w={subscribe:()=>()=>{}}}=e,_="light",i="loading...";const n=w.subscribe(m=>{t(2,_=m)});ar(async()=>{try{const{GetVersion:m}=await fr(async()=>{const{GetVersion:d}=await Promise.resolve().then(()=>xn);return{GetVersion:d}},void 0);t(3,i=await m())}catch(m){console.error("Failed to get version:",m),t(3,i="unknown")}return()=>{n()}});function f(m){l=m,t(0,l)}return r.$$set=m=>{"isOpen"in m&&t(0,l=m.isOpen),"onClose"in m&&t(1,p=m.onClose),"themeStore"in m&&t(4,w=m.themeStore)},[l,p,_,i,w,f]}class Jh extends gt{constructor(e){super(),_t(this,e,Gh,Kh,pt,{isOpen:0,onClose:1,themeStore:4})}}function Us(r,e,t){const l=r.slice();return l[56]=e[t],l}function Ns(r,e,t){const l=r.slice();return l[56]=e[t],l}function Vs(r){let e,t=r[12].length+"",l;return{c(){e=L("span"),l=Z(t),s(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(p,w){V(p,e,w),c(e,l)},p(p,w){w[0]&4096&&t!==(t=p[12].length+"")&&ue(l,t)},d(p){p&&N(e)}}}function Xh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function Yh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,p){V(l,e,p),c(e,t)},d(l){l&&N(e)}}}function Ks(r){let e,t,l,p,w,_;return{c(){e=L("button"),t=oe("svg"),l=oe("path"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M9 5l7 7-7 7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开资产列表")},m(i,n){V(i,e,n),c(e,t),c(t,l),w||(_=Q(e,"click",r[17]),w=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&p!==(p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",p)},d(i){i&&N(e),w=!1,_()}}}function qs(r){let e,t,l,p,w,_,i,n,f;return{c(){e=L("div"),t=L("div"),l=O(),p=L("button"),w=oe("svg"),_=oe("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M15 19l-7-7 7-7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),p.disabled=r[2],s(p,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(p,"title","折叠资产列表"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Te(e,"cursor",r[2]?"default":"col-resize"),Te(e,"height","100%"),Te(e,"padding","0 2px"),Te(e,"pointer-events",r[2]?"none":"auto")},m(m,d){V(m,e,d),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),n||(f=[Q(p,"click",r[17]),Q(e,"mousedown",r[19])],n=!0)},p(m,d){d[0]&4&&(p.disabled=m[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(m[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(p,"class",i),d[0]&4&&Te(e,"cursor",m[2]?"default":"col-resize"),d[0]&4&&Te(e,"pointer-events",m[2]?"none":"auto")},d(m){m&&N(e),n=!1,Fe(f)}}}function Gs(r){let e,t,l,p,w,_,i,n,f;return{c(){e=L("div"),t=L("div"),l=O(),p=L("button"),w=oe("svg"),_=oe("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M9 5l7 7-7 7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),p.disabled=r[2],s(p,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(p,"title","折叠右侧面板"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Te(e,"cursor",r[2]?"default":"col-resize"),Te(e,"height","100%"),Te(e,"padding","0 2px"),Te(e,"pointer-events",r[2]?"none":"auto")},m(m,d){V(m,e,d),c(e,t),c(e,l),c(e,p),c(p,w),c(w,_),n||(f=[Q(p,"click",r[18]),Q(e,"mousedown",r[20])],n=!0)},p(m,d){d[0]&4&&(p.disabled=m[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(m[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(p,"class",i),d[0]&4&&Te(e,"cursor",m[2]?"default":"col-resize"),d[0]&4&&Te(e,"pointer-events",m[2]?"none":"auto")},d(m){m&&N(e),n=!1,Fe(f)}}}function Js(r){let e,t,l,p,w,_;return{c(){e=L("button"),t=oe("svg"),l=oe("path"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M15 19l-7-7 7-7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开右侧面板")},m(i,n){V(i,e,n),c(e,t),c(t,l),w||(_=Q(e,"click",r[18]),w=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&p!==(p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",p)},d(i){i&&N(e),w=!1,_()}}}function Xs(r){let e,t,l,p,w,_,i,n,f,m,d=r[12].length+"",g,y,k,v,o,h,a=r[14].length+"",u,b,E,C,x,S,M,T;function R(z,K){if(z[13].activeTab==="active"&&z[12].length===0)return ed;if(z[13].activeTab==="active")return $h;if(z[13].activeTab==="history"&&z[14].length===0)return Qh;if(z[13].activeTab==="history")return Zh}let H=R(r),A=H&&H(r);return{c(){e=L("div"),t=L("div"),l=L("div"),p=L("h3"),p.textContent="上传任务",w=O(),_=L("button"),_.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=O(),n=L("div"),f=L("button"),m=Z("进行中 ("),g=Z(d),y=Z(")"),v=O(),o=L("button"),h=Z("历史 ("),u=Z(a),b=Z(")"),x=O(),A&&A.c(),s(p,"class","font-semibold text-sm"),s(_,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),s(l,"class","flex items-center justify-between mb-3"),s(f,"class",k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(o,"class",E="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(n,"class","flex gap-2"),s(t,"class",C="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(e,"class",S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),Te(e,"height","calc(100vh - 3.5rem)")},m(z,K){V(z,e,K),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(t,i),c(t,n),c(n,f),c(f,m),c(f,g),c(f,y),c(n,v),c(n,o),c(o,h),c(o,u),c(o,b),c(e,x),A&&A.m(e,null),M||(T=[Q(_,"click",r[36]),Q(f,"click",r[37]),Q(o,"click",r[38])],M=!0)},p(z,K){K[0]&4096&&d!==(d=z[12].length+"")&&ue(g,d),K[0]&8193&&k!==(k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(z[13].activeTab==="active"?(z[0]==="dark","bg-blue-600 text-white"):z[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(f,"class",k),K[0]&16384&&a!==(a=z[14].length+"")&&ue(u,a),K[0]&8193&&E!==(E="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(z[13].activeTab==="history"?(z[0]==="dark","bg-blue-600 text-white"):z[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(o,"class",E),K[0]&1&&C!==(C="p-4 border-b "+(z[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",C),H===(H=R(z))&&A?A.p(z,K):(A&&A.d(1),A=H&&H(z),A&&(A.c(),A.m(e,null))),K[0]&1&&S!==(S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(z[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&s(e,"class",S)},d(z){z&&N(e),A&&A.d(),M=!1,Fe(T)}}}function Zh(r){let e,t,l,p,w,_,i,n,f=[],m=new Map,d,g,y=Ke(r[14]);const k=v=>v[56].id;for(let v=0;v<y.length;v+=1){let o=Us(r,y,v),h=k(o);m.set(h,f[v]=Zs(h,o))}return{c(){e=L("div"),t=L("div"),l=L("button"),p=Z("清空历史记录"),i=O(),n=L("div");for(let v=0;v<f.length;v+=1)f[v].c();s(l,"class",w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),s(t,"class",_="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(n,"class","flex-1 overflow-y-auto p-4 space-y-3"),s(e,"class","flex-1 flex flex-col")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(l,p),c(e,i),c(e,n);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(n,null);d||(g=Q(l,"click",r[40]),d=!0)},p(v,o){o[0]&1&&w!==(w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(v[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&s(l,"class",w),o[0]&1&&_!==(_="p-3 border-b "+(v[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",_),o[0]&16385&&(y=Ke(v[14]),f=Lt(f,o,k,1,v,y,m,n,Mt,Zs,null,Us))},d(v){v&&N(e);for(let o=0;o<f.length;o+=1)f[o].d();d=!1,g()}}}function Qh(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function $h(r){let e,t=[],l=new Map,p=Ke(r[12]);const w=_=>_[56].id;for(let _=0;_<p.length;_+=1){let i=Ns(r,p,_),n=w(i);l.set(n,t[_]=$s(n,i))}return{c(){e=L("div");for(let _=0;_<t.length;_+=1)t[_].c();s(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(_,i){V(_,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(_,i){i[0]&4097&&(p=Ke(_[12]),t=Lt(t,i,w,1,_,p,l,e,Mt,$s,null,Ns))},d(_){_&&N(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ed(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,l){V(t,e,l)},p:Pe,d(t){t&&N(e)}}}function td(r){let e;return{c(){e=L("span"),e.textContent="已取消",s(e,"class","text-gray-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function rd(r){let e;return{c(){e=L("span"),e.textContent="失败",s(e,"class","text-red-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function id(r){let e;return{c(){e=L("span"),e.textContent="完成",s(e,"class","text-green-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Ys(r){let e,t=r[56].error+"",l,p;return{c(){e=L("div"),l=Z(t),s(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),s(e,"title",p=r[56].error)},m(w,_){V(w,e,_),c(e,l)},p(w,_){_[0]&16384&&t!==(t=w[56].error+"")&&ue(l,t),_[0]&16384&&p!==(p=w[56].error)&&s(e,"title",p)},d(w){w&&N(e)}}}function Zs(r,e){let t,l,p,w,_=e[56].filename+"",i,n,f,m,d,g,y,k,v=Ht(e[56].totalBytes)+"",o,h,a,u,b,E,C,x;function S(A,z){if(A[56].status==="completed")return id;if(A[56].status==="failed")return rd;if(A[56].status==="cancelled")return td}let M=S(e),T=M&&M(e),R=e[56].status==="failed"&&e[56].error&&Ys(e);function H(){return e[41](e[56])}return{key:r,first:null,c(){t=L("div"),l=L("div"),p=L("div"),w=L("div"),i=Z(_),f=O(),m=L("div"),T&&T.c(),d=O(),g=L("span"),g.textContent="•",y=O(),k=L("span"),o=Z(v),h=O(),R&&R.c(),a=O(),u=L("button"),u.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=O(),s(w,"class","text-sm font-medium truncate"),s(w,"title",n=e[56].filename),s(m,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),s(p,"class","flex-1 min-w-0"),s(u,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),s(u,"title","删除记录"),s(l,"class","flex items-center justify-between"),s(t,"class",E="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(A,z){V(A,t,z),c(t,l),c(l,p),c(p,w),c(w,i),c(p,f),c(p,m),T&&T.m(m,null),c(m,d),c(m,g),c(m,y),c(m,k),c(k,o),c(p,h),R&&R.m(p,null),c(l,a),c(l,u),c(t,b),C||(x=Q(u,"click",H),C=!0)},p(A,z){e=A,z[0]&16384&&_!==(_=e[56].filename+"")&&ue(i,_),z[0]&16384&&n!==(n=e[56].filename)&&s(w,"title",n),M!==(M=S(e))&&(T&&T.d(1),T=M&&M(e),T&&(T.c(),T.m(m,d))),z[0]&16384&&v!==(v=Ht(e[56].totalBytes)+"")&&ue(o,v),e[56].status==="failed"&&e[56].error?R?R.p(e,z):(R=Ys(e),R.c(),R.m(p,null)):R&&(R.d(1),R=null),z[0]&1&&E!==(E="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",E)},d(A){A&&N(t),T&&T.d(),R&&R.d(),C=!1,x()}}}function Qs(r){let e,t=Li(r[56].speed)+"",l;return{c(){e=Z("• "),l=Z(t)},m(p,w){V(p,e,w),V(p,l,w)},p(p,w){w[0]&4096&&t!==(t=Li(p[56].speed)+"")&&ue(l,t)},d(p){p&&(N(e),N(l))}}}function $s(r,e){let t,l,p,w,_=e[56].filename+"",i,n,f,m,d=Ht(e[56].bytesSent)+"",g,y,k=Ht(e[56].totalBytes)+"",v,o,h,a,u,b=Math.round(Cr(e[56]))+"",E,C,x,S,M,T,R,H,A,z,K,Y,re,J=e[56].speed&&Qs(e);function D(){return e[39](e[56])}return{key:r,first:null,c(){t=L("div"),l=L("div"),p=L("div"),w=L("div"),i=Z(_),f=O(),m=L("div"),g=Z(d),y=Z(" / "),v=Z(k),o=O(),J&&J.c(),h=O(),a=L("div"),u=L("span"),E=Z(b),C=Z("%"),x=O(),S=L("button"),S.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',M=O(),T=L("div"),R=L("div"),z=O(),s(w,"class","text-sm font-medium truncate"),s(w,"title",n=e[56].filename),s(m,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),s(p,"class","flex-1 min-w-0"),s(u,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),s(S,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),s(S,"title","取消上传"),s(a,"class","flex items-center gap-2 ml-3"),s(l,"class","flex items-center justify-between mb-2"),s(R,"class","h-full bg-blue-500 transition-all duration-300"),s(R,"style",H=`width: ${Math.min(100,Math.max(0,Cr(e[56])))}%`),s(T,"class",A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),s(t,"class",K="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(P,F){V(P,t,F),c(t,l),c(l,p),c(p,w),c(w,i),c(p,f),c(p,m),c(m,g),c(m,y),c(m,v),c(m,o),J&&J.m(m,null),c(l,h),c(l,a),c(a,u),c(u,E),c(u,C),c(a,x),c(a,S),c(t,M),c(t,T),c(T,R),c(t,z),Y||(re=Q(S,"click",D),Y=!0)},p(P,F){e=P,F[0]&4096&&_!==(_=e[56].filename+"")&&ue(i,_),F[0]&4096&&n!==(n=e[56].filename)&&s(w,"title",n),F[0]&4096&&d!==(d=Ht(e[56].bytesSent)+"")&&ue(g,d),F[0]&4096&&k!==(k=Ht(e[56].totalBytes)+"")&&ue(v,k),e[56].speed?J?J.p(e,F):(J=Qs(e),J.c(),J.m(m,null)):J&&(J.d(1),J=null),F[0]&4096&&b!==(b=Math.round(Cr(e[56]))+"")&&ue(E,b),F[0]&4096&&H!==(H=`width: ${Math.min(100,Math.max(0,Cr(e[56])))}%`)&&s(R,"style",H),F[0]&1&&A!==(A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&s(T,"class",A),F[0]&1&&K!==(K="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",K)},d(P){P&&N(t),J&&J.d(),Y=!1,re()}}}function sd(r){let e,t,l,p,w,_,i,n,f,m,d,g,y,k,v,o,h,a,u,b,E,C,x,S,M,T,R,H,A,z,K,Y,re,J,D,P,F,j,q,W,X,te,I,B,ee,U,le,ae,he,ye,pe,ge,we,Be,Me,ce,de,$,ve,ie,ke,ze,We,je,ne,_e,Ne,Ee,G,be,Ce,Se=r[12].length>0&&Vs(r);function Ae(fe,me){return fe[0]==="dark"?Yh:Xh}let Re=Ae(r),He=Re(r),xe=r[4]&&Ks(r);F=new yo({props:{onConnect:r[22],onAddClick:r[29],onEdit:r[24]}});let qe=!r[4]&&qs(r),ht={};te=new Vl({props:ht}),r[30](te);let $e=!r[5]&&Gs(r);ae=new Ac({}),Be=new Uc({});let rt=r[5]&&Js(r);function bt(fe){r[31](fe)}function Ve(fe){r[32](fe)}let it={onAdd:r[23],onUpdate:r[25]};r[2]!==void 0&&(it.isOpen=r[2]),r[6]!==void 0&&(it.editingAsset=r[6]),$=new Nh({props:it}),tt.push(()=>ut($,"isOpen",bt)),tt.push(()=>ut($,"editingAsset",Ve));function at(fe){r[33](fe)}let et={themeStore:or};r[1]!==void 0&&(et.isOpen=r[1]),ze=new Bh({props:et}),tt.push(()=>ut(ze,"isOpen",at));function ot(fe){r[35](fe)}let ct={onClose:r[34],themeStore:or};r[3]!==void 0&&(ct.isOpen=r[3]),ne=new Jh({props:ct}),tt.push(()=>ut(ne,"isOpen",ot));let Qe=r[13].isPanelOpen&&Xs(r);return{c(){e=L("div"),t=L("header"),l=L("div"),p=L("div"),p.textContent="哈",w=O(),_=L("div"),i=L("div"),n=Z("啊哈 SSH 连接工具"),m=O(),d=L("div"),g=Z("AHa SSH Manager"),k=O(),v=L("div"),o=L("div"),h=L("button"),a=oe("svg"),u=oe("path"),E=O(),Se&&Se.c(),C=O(),x=L("button"),He.c(),T=O(),R=L("button"),H=oe("svg"),A=oe("path"),z=O(),K=L("span"),K.textContent="开发工具",re=O(),J=L("div"),xe&&xe.c(),D=O(),P=L("div"),Ze(F.$$.fragment),q=O(),qe&&qe.c(),W=O(),X=L("div"),Ze(te.$$.fragment),B=O(),$e&&$e.c(),ee=O(),U=L("div"),le=L("div"),Ze(ae.$$.fragment),he=O(),ye=L("div"),pe=L("div"),ge=O(),we=L("div"),Ze(Be.$$.fragment),ce=O(),rt&&rt.c(),de=O(),Ze($.$$.fragment),ke=O(),Ze(ze.$$.fragment),je=O(),Ze(ne.$$.fragment),Ne=O(),Qe&&Qe.c(),s(p,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),s(i,"class",f="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),s(d,"class",y="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),s(l,"class","flex items-center gap-3"),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","2"),s(u,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(a,"class","w-5 h-5"),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(h,"class",b="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(h,"title","上传任务"),s(o,"class","relative"),x.disabled=r[2],s(x,"class",S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(x,"title",M=r[0]==="dark"?"切换到浅色模式":"切换到深色模式"),s(A,"stroke-linecap","round"),s(A,"stroke-linejoin","round"),s(A,"stroke-width","2"),s(A,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),s(H,"class","w-4 h-4"),s(H,"fill","none"),s(H,"stroke","currentColor"),s(H,"viewBox","0 0 24 24"),s(K,"class","text-sm"),R.disabled=r[2],s(R,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(v,"class","ml-auto flex items-center gap-3"),s(t,"class",Y="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),Te(t,"pointer-events",r[2]?"none":"auto"),s(P,"class",j="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),Te(P,"width",(r[4]?"0":r[10])+"px"),Te(P,"min-width",(r[4]?"0":r[10])+"px"),Sr(P,"collapsed",r[4]),s(X,"class",I="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),s(le,"class","overflow-hidden"),Te(le,"height",r[8]+"%"),Te(le,"min-height","0"),s(pe,"class","w-full h-full rounded svelte-m8xeqv"),s(ye,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),s(ye,"role","separator"),s(ye,"aria-hidden","true"),Te(ye,"cursor",r[2]?"default":"row-resize"),Te(ye,"width","100%"),Te(ye,"padding","2px 0"),Te(ye,"pointer-events",r[2]?"none":"auto"),s(we,"class","overflow-hidden"),Te(we,"height",100-r[8]+"%"),Te(we,"min-height","0"),s(U,"data-right-panel","true"),s(U,"class",Me="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),Te(U,"width",(r[5]?"0":r[9])+"px"),Te(U,"min-width",r[5]?"0":"300px"),Te(U,"max-width","600px"),Sr(U,"collapsed",r[5]),s(J,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),s(e,"class",Ee="h-screen w-full flex flex-col "+r[11]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(fe,me){V(fe,e,me),c(e,t),c(t,l),c(l,p),c(l,w),c(l,_),c(_,i),c(i,n),c(_,m),c(_,d),c(d,g),c(t,k),c(t,v),c(v,o),c(o,h),c(h,a),c(a,u),c(o,E),Se&&Se.m(o,null),c(v,C),c(v,x),He.m(x,null),c(v,T),c(v,R),c(R,H),c(H,A),c(R,z),c(R,K),c(e,re),c(e,J),xe&&xe.m(J,null),c(J,D),c(J,P),Xe(F,P,null),c(J,q),qe&&qe.m(J,null),c(J,W),c(J,X),Xe(te,X,null),c(J,B),$e&&$e.m(J,null),c(J,ee),c(J,U),c(U,le),Xe(ae,le,null),c(U,he),c(U,ye),c(ye,pe),c(U,ge),c(U,we),Xe(Be,we,null),c(J,ce),rt&&rt.m(J,null),c(e,de),Xe($,e,null),c(e,ke),Xe(ze,e,null),c(e,je),Xe(ne,e,null),c(e,Ne),Qe&&Qe.m(e,null),G=!0,be||(Ce=[Q(h,"click",r[28]),Q(x,"click",r[15]),Q(R,"click",r[16]),Q(ye,"mousedown",r[21])],be=!0)},p(fe,me){(!G||me[0]&1&&f!==(f="font-semibold text-sm "+(fe[0]==="dark"?"text-white":"text-gray-900")))&&s(i,"class",f),(!G||me[0]&1&&y!==(y="text-xs "+(fe[0]==="dark"?"text-gray-400":"text-gray-500")))&&s(d,"class",y),(!G||me[0]&1&&b!==(b="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(fe[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(h,"class",b),fe[12].length>0?Se?Se.p(fe,me):(Se=Vs(fe),Se.c(),Se.m(o,null)):Se&&(Se.d(1),Se=null),Re!==(Re=Ae(fe))&&(He.d(1),He=Re(fe),He&&(He.c(),He.m(x,null))),(!G||me[0]&4)&&(x.disabled=fe[2]),(!G||me[0]&1&&S!==(S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(fe[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(x,"class",S),(!G||me[0]&1&&M!==(M=fe[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&s(x,"title",M),(!G||me[0]&4)&&(R.disabled=fe[2]),(!G||me[0]&1&&Y!==(Y="h-14 flex-shrink-0 "+(fe[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&s(t,"class",Y),(!G||me[0]&4)&&Te(t,"pointer-events",fe[2]?"none":"auto"),fe[4]?xe?xe.p(fe,me):(xe=Ks(fe),xe.c(),xe.m(J,D)):xe&&(xe.d(1),xe=null);const Ge={};me[0]&68&&(Ge.onAddClick=fe[29]),F.$set(Ge),(!G||me[0]&1&&j!==(j="flex-shrink-0 transition-all duration-200 "+(fe[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&s(P,"class",j),(!G||me[0]&1040)&&Te(P,"width",(fe[4]?"0":fe[10])+"px"),(!G||me[0]&1040)&&Te(P,"min-width",(fe[4]?"0":fe[10])+"px"),(!G||me[0]&17)&&Sr(P,"collapsed",fe[4]),fe[4]?qe&&(qe.d(1),qe=null):qe?qe.p(fe,me):(qe=qs(fe),qe.c(),qe.m(J,W));const qt={};te.$set(qt),(!G||me[0]&1&&I!==(I="flex-1 min-w-0 min-h-0 flex flex-col "+(fe[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&s(X,"class",I),fe[5]?$e&&($e.d(1),$e=null):$e?$e.p(fe,me):($e=Gs(fe),$e.c(),$e.m(J,ee)),(!G||me[0]&256)&&Te(le,"height",fe[8]+"%"),(!G||me[0]&4)&&Te(ye,"cursor",fe[2]?"default":"row-resize"),(!G||me[0]&4)&&Te(ye,"pointer-events",fe[2]?"none":"auto"),(!G||me[0]&256)&&Te(we,"height",100-fe[8]+"%"),(!G||me[0]&1&&Me!==(Me="flex-shrink-0 flex flex-col overflow-hidden "+(fe[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&s(U,"class",Me),(!G||me[0]&544)&&Te(U,"width",(fe[5]?"0":fe[9])+"px"),(!G||me[0]&32)&&Te(U,"min-width",fe[5]?"0":"300px"),(!G||me[0]&33)&&Sr(U,"collapsed",fe[5]),fe[5]?rt?rt.p(fe,me):(rt=Js(fe),rt.c(),rt.m(J,null)):rt&&(rt.d(1),rt=null);const kt={};!ve&&me[0]&4&&(ve=!0,kt.isOpen=fe[2],dt(()=>ve=!1)),!ie&&me[0]&64&&(ie=!0,kt.editingAsset=fe[6],dt(()=>ie=!1)),$.$set(kt);const Ot={};!We&&me[0]&2&&(We=!0,Ot.isOpen=fe[1],dt(()=>We=!1)),ze.$set(Ot);const Ft={};me[0]&8&&(Ft.onClose=fe[34]),!_e&&me[0]&8&&(_e=!0,Ft.isOpen=fe[3],dt(()=>_e=!1)),ne.$set(Ft),fe[13].isPanelOpen?Qe?Qe.p(fe,me):(Qe=Xs(fe),Qe.c(),Qe.m(e,null)):Qe&&(Qe.d(1),Qe=null),(!G||me[0]&2049&&Ee!==(Ee="h-screen w-full flex flex-col "+fe[11]+" "+(fe[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&s(e,"class",Ee)},i(fe){G||(Oe(F.$$.fragment,fe),Oe(te.$$.fragment,fe),Oe(ae.$$.fragment,fe),Oe(Be.$$.fragment,fe),Oe($.$$.fragment,fe),Oe(ze.$$.fragment,fe),Oe(ne.$$.fragment,fe),G=!0)},o(fe){Ie(F.$$.fragment,fe),Ie(te.$$.fragment,fe),Ie(ae.$$.fragment,fe),Ie(Be.$$.fragment,fe),Ie($.$$.fragment,fe),Ie(ze.$$.fragment,fe),Ie(ne.$$.fragment,fe),G=!1},d(fe){fe&&N(e),Se&&Se.d(),He.d(),xe&&xe.d(),Ye(F),qe&&qe.d(),r[30](null),Ye(te),$e&&$e.d(),Ye(ae),Ye(Be),rt&&rt.d(),Ye($),Ye(ze),Ye(ne),Qe&&Qe.d(),be=!1,Fe(Ce)}}}function Ir(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function nd(r,e,t){let l,p,w,_,i,n,f,m,d,g;vt(r,or,$=>t(0,i=$)),vt(r,Dt,$=>t(26,n=$)),vt(r,At,$=>t(27,f=$)),vt(r,ac,$=>t(12,m=$)),vt(r,St,$=>t(13,d=$)),vt(r,cc,$=>t(14,g=$));let y=!1,k=!1,v=!1,o=!1,h=!1,a=null,u,b=!1,E=!1,C=!1;function x(){Pr(i==="light"?"dark":"light")}function S(){k||t(1,y=!y)}function M(){k||t(4,o=!o)}function T(){k||t(5,h=!h)}function R($){$.preventDefault(),!(o||k)&&(b=!0,document.addEventListener("mousemove",H),document.addEventListener("mouseup",A))}function H($){if(!b)return;const ve=Math.max(200,Math.min(500,$.clientX));to(ve)}function A(){b=!1,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",A)}function z($){$.preventDefault(),!k&&(E=!0,document.addEventListener("mousemove",K),document.addEventListener("mouseup",Y))}function K($){if(!E)return;const ve=window.innerWidth,ie=Math.max(300,Math.min(600,ve-$.clientX));ro(ie)}function Y(){E=!1,document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",Y)}function re($){if($.preventDefault(),k)return;C=!0;const ve=document.querySelector("[data-right-panel]");if(ve){const ie=ve.getBoundingClientRect();J=$.clientY,D=_,P=ie.height}document.addEventListener("mousemove",F),document.addEventListener("mouseup",j)}let J=0,D=50,P=0;function F($){if(!C)return;const ie=($.clientY-J)/P*100,ke=Math.max(20,Math.min(80,D+ie));io(ke)}function j(){C=!1,document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",j)}function q($){u&&typeof u.handleConnect=="function"?u.handleConnect($):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function W($){var ve;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection($);const ie={id:$.id,name:$.name,host:$.host,port:$.port,username:$.user,group:((ve=$.tags)==null?void 0:ve[0])||"默认分组",status:"online",type:$.type||"ssh",auth_type:$.auth_type,key_path:$.key_path,tags:$.tags||[]};Ut.update(ke=>[...ke,ie])}catch(ie){throw console.error("Failed to add asset:",ie),ie}}function X($){t(6,a=$),t(2,k=!0)}async function te($){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Ut.update(ve=>ve.map(ie=>{var ke;return ie.id===$.id?{...ie,id:$.id,name:$.name,host:$.host,port:$.port,username:$.user,group:((ke=$.tags)==null?void 0:ke[0])||"默认分组",type:$.type||"ssh",auth_type:$.auth_type,key_path:$.key_path,tags:$.tags||[]}:ie}))}catch(ve){throw console.error("Failed to update asset:",ve),ve}}async function I(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const $=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",$);const ve=$.map(ie=>{var ke;return{id:ie.id,name:ie.name,host:ie.host,port:ie.port,username:ie.user,group:((ke=ie.tags)==null?void 0:ke[0])||"默认分组",status:"online",type:"ssh",auth_type:ie.auth_type,key_path:ie.key_path,tags:ie.tags||[]}});Ut.set(ve)}catch($){console.error("Failed to load connections:",$)}}ar(async()=>{const $=localStorage.getItem("ssh-tools-theme");$?Pr($):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&Pr("dark");let ve=null;try{const ie=await fr(()=>Promise.resolve().then(()=>xn),void 0);window.wailsBindings=ie,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(ie.default||ie).join(", ")})),await I(),ve=(await fr(()=>Promise.resolve().then(()=>_n),void 0)).EventsOn("app:show-about",()=>{t(3,v=!0)}),window.addEventListener("assets-changed",I)}catch(ie){console.warn("Wails bindings not available yet:",ie.message)}return Ir(),window.addEventListener("resize",Ir),()=>{window.removeEventListener("resize",Ir),window.removeEventListener("assets-changed",I),ve&&ve()}});const B=()=>St.togglePanel(),ee=()=>{t(6,a=null),t(2,k=!0)};function U($){tt[$?"unshift":"push"](()=>{u=$,t(7,u)})}function le($){k=$,t(2,k)}function ae($){a=$,t(6,a)}function he($){y=$,t(1,y)}const ye=()=>t(3,v=!1);function pe($){v=$,t(3,v)}const ge=()=>St.setPanelOpen(!1),we=()=>St.setActiveTab("active"),Be=()=>St.setActiveTab("history"),Me=async $=>{await Vr($.id),St.cancelTransfer($.id)},ce=()=>St.clearCompleted(),de=$=>St.removeTransfer($.id);return r.$$.update=()=>{r.$$.dirty[0]&134217728&&f&&Array.from(f.values()),r.$$.dirty[0]&1&&t(11,l=i==="dark"?"dark":""),r.$$.dirty[0]&67108864&&t(10,p=n.sidebarWidth),r.$$.dirty[0]&67108864&&t(9,w=n.rightPanelWidth),r.$$.dirty[0]&67108864&&t(8,_=n.fileManagerHeight)},[i,y,k,v,o,h,a,u,_,w,p,l,m,d,g,x,S,M,T,R,z,re,q,W,X,te,n,f,B,ee,U,le,ae,he,ye,pe,ge,we,Be,Me,ce,de]}class od extends gt{constructor(e){super(),_t(this,e,nd,sd,pt,{},null,[-1,-1])}}new od({target:document.getElementById("app")});
