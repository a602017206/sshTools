var os=Object.defineProperty;var as=(i,e,t)=>e in i?os(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ar=(i,e,t)=>as(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))u(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const m of x.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function t(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(p){if(p.ep)return;p.ep=!0;const x=t(p);fetch(p.href,x)}})();const ls="modulepreload",cs=function(i){return"/"+i},Dr={},Qt=function(e,t,u){let p=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),r=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));p=Promise.allSettled(t.map(n=>{if(n=cs(n),n in Dr)return;Dr[n]=!0;const d=n.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ls,d||(h.as="script"),h.crossOrigin="",h.href=n,r&&h.setAttribute("nonce",r),document.head.appendChild(h),d)return new Promise((_,w)=>{h.addEventListener("load",_),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${n}`)))})}))}function x(m){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=m,window.dispatchEvent(r),!r.defaultPrevented)throw m}return p.then(m=>{for(const r of m||[])r.status==="rejected"&&x(r.reason);return e().catch(x)})};function ve(){}function hs(i,e){for(const t in e)i[t]=e[t];return i}function Wi(i){return i()}function Mr(){return Object.create(null)}function Le(i){i.forEach(Wi)}function kt(i){return typeof i=="function"}function Je(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function ds(i){return Object.keys(i).length===0}function _r(i,...e){if(i==null){for(const u of e)u(void 0);return ve}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function us(i){let e;return _r(i,t=>e=t)(),e}function _t(i,e,t){i.$$.on_destroy.push(_r(e,t))}function fs(i,e,t,u){if(i){const p=zi(i,e,t,u);return i[0](p)}}function zi(i,e,t,u){return i[1]&&u?hs(t.ctx.slice(),i[1](u(e))):t.ctx}function _s(i,e,t,u){return i[2],e.dirty}function ps(i,e,t,u,p,x){if(p){const m=zi(e,t,u,x);i.p(m,p)}}function gs(i){if(i.ctx.length>32){const e=[],t=i.ctx.length/32;for(let u=0;u<t;u++)e[u]=-1;return e}return-1}function Br(i){return i??""}function ji(i){return i&&kt(i.destroy)?i.destroy:ve}const Ui=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function b(i,e){i.appendChild(e)}function G(i,e,t){i.insertBefore(e,t||null)}function V(i){i.parentNode&&i.parentNode.removeChild(i)}function tr(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function B(i){return document.createElement(i)}function re(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function se(i){return document.createTextNode(i)}function W(){return se(" ")}function nt(){return se("")}function ie(i,e,t,u){return i.addEventListener(e,t,u),()=>i.removeEventListener(e,t,u)}function ms(i){return function(e){return e.preventDefault(),i.call(this,e)}}function Ar(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function a(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function vs(i){let e;return{p(...t){e=t,e.forEach(u=>i.push(u))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function Ni(i){return i===""?null:+i}function bs(i){return Array.from(i.childNodes)}function he(i,e){e=""+e,i.data!==e&&(i.data=e)}function ge(i,e){i.value=e??""}function de(i,e,t,u){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function Rr(i,e,t){for(let u=0;u<i.options.length;u+=1){const p=i.options[u];if(p.__value===e){p.selected=!0;return}}(!t||e!==void 0)&&(i.selectedIndex=-1)}function ws(i){const e=i.querySelector(":checked");return e&&e.__value}function Jt(i,e,t){i.classList.toggle(e,!!t)}function pt(i,e){return new i(e)}let It;function Pt(i){It=i}function Ki(){if(!It)throw new Error("Function called outside component initialization");return It}function Tt(i){Ki().$$.on_mount.push(i)}function rr(i){Ki().$$.on_destroy.push(i)}const Bt=[],et=[];let At=[];const dr=[],Vi=Promise.resolve();let ur=!1;function qi(){ur||(ur=!0,Vi.then(Gi))}function Zt(){return qi(),Vi}function $t(i){At.push(i)}function yt(i){dr.push(i)}const lr=new Set;let Dt=0;function Gi(){if(Dt!==0)return;const i=It;do{try{for(;Dt<Bt.length;){const e=Bt[Dt];Dt++,Pt(e),ys(e.$$)}}catch(e){throw Bt.length=0,Dt=0,e}for(Pt(null),Bt.length=0,Dt=0;et.length;)et.pop()();for(let e=0;e<At.length;e+=1){const t=At[e];lr.has(t)||(lr.add(t),t())}At.length=0}while(Bt.length);for(;dr.length;)dr.pop()();ur=!1,lr.clear(),Pt(i)}function ys(i){if(i.fragment!==null){i.update(),Le(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach($t)}}function Ss(i){const e=[],t=[];At.forEach(u=>i.indexOf(u)===-1?e.push(u):t.push(u)),t.forEach(u=>u()),At=e}const Yt=new Set;let Ct;function ot(){Ct={r:0,c:[],p:Ct}}function at(){Ct.r||Le(Ct.c),Ct=Ct.p}function ke(i,e){i&&i.i&&(Yt.delete(i),i.i(e))}function Ce(i,e,t,u){if(i&&i.o){if(Yt.has(i))return;Yt.add(i),Ct.c.push(()=>{Yt.delete(i),u&&(t&&i.d(1),u())}),i.o(e)}else u&&u()}function qe(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function ir(i,e){i.d(1),e.delete(i.key)}function ks(i,e){Ce(i,1,1,()=>{e.delete(i.key)})}function Ht(i,e,t,u,p,x,m,r,n,d,v,h){let _=i.length,w=x.length,k=_;const g={};for(;k--;)g[i[k].key]=k;const s=[],l=new Map,o=new Map,c=[];for(k=w;k--;){const L=h(p,x,k),y=t(L);let E=m.get(y);E?c.push(()=>E.p(L,e)):(E=d(y,L),E.c()),l.set(y,s[k]=E),y in g&&o.set(y,Math.abs(k-g[y]))}const f=new Set,S=new Set;function C(L){ke(L,1),L.m(r,v),m.set(L.key,L),v=L.first,w--}for(;_&&w;){const L=s[w-1],y=i[_-1],E=L.key,A=y.key;L===y?(v=L.first,_--,w--):l.has(A)?!m.has(E)||f.has(E)?C(L):S.has(A)?_--:o.get(E)>o.get(A)?(S.add(E),C(L)):(f.add(A),_--):(n(y,m),_--)}for(;_--;){const L=i[_];l.has(L.key)||n(L,m)}for(;w;)C(s[w-1]);return Le(c),s}function St(i,e,t){const u=i.$$.props[e];u!==void 0&&(i.$$.bound[u]=t,t(i.$$.ctx[u]))}function ze(i){i&&i.c()}function Ie(i,e,t){const{fragment:u,after_update:p}=i.$$;u&&u.m(e,t),$t(()=>{const x=i.$$.on_mount.map(Wi).filter(kt);i.$$.on_destroy?i.$$.on_destroy.push(...x):Le(x),i.$$.on_mount=[]}),p.forEach($t)}function He(i,e){const t=i.$$;t.fragment!==null&&(Ss(t.after_update),Le(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Cs(i,e){i.$$.dirty[0]===-1&&(Bt.push(i),qi(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Ye(i,e,t,u,p,x,m=null,r=[-1]){const n=It;Pt(i);const d=i.$$={fragment:null,ctx:[],props:x,update:ve,not_equal:p,bound:Mr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(n?n.$$.context:[])),callbacks:Mr(),dirty:r,skip_bound:!1,root:e.target||n.$$.root};m&&m(d.root);let v=!1;if(d.ctx=t?t(i,e.props||{},(h,_,...w)=>{const k=w.length?w[0]:_;return d.ctx&&p(d.ctx[h],d.ctx[h]=k)&&(!d.skip_bound&&d.bound[h]&&d.bound[h](k),v&&Cs(i,h)),_}):[],d.update(),v=!0,Le(d.before_update),d.fragment=u?u(d.ctx):!1,e.target){if(e.hydrate){const h=bs(e.target);d.fragment&&d.fragment.l(h),h.forEach(V)}else d.fragment&&d.fragment.c();e.intro&&ke(i.$$.fragment),Ie(i,e.target,e.anchor),Gi()}Pt(n)}class Qe{constructor(){ar(this,"$$");ar(this,"$$set")}$destroy(){He(this,1),this.$destroy=ve}$on(e,t){if(!kt(t))return ve;const u=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return u.push(t),()=>{const p=u.indexOf(t);p!==-1&&u.splice(p,1)}}$set(e){this.$$set&&!ds(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xs);const Mt=[];function Es(i,e){return{subscribe:Ot(i,e).subscribe}}function Ot(i,e=ve){let t;const u=new Set;function p(r){if(Je(i,r)&&(i=r,t)){const n=!Mt.length;for(const d of u)d[1](),Mt.push(d,i);if(n){for(let d=0;d<Mt.length;d+=2)Mt[d][0](Mt[d+1]);Mt.length=0}}}function x(r){p(r(i))}function m(r,n=ve){const d=[r,n];return u.add(d),u.size===1&&(t=e(p,x)||ve),r(i),()=>{u.delete(d),u.size===0&&t&&(t(),t=null)}}return{set:p,update:x,subscribe:m}}function xt(i,e,t){const u=!Array.isArray(i),p=u?[i]:i;if(!p.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const x=e.length<2;return Es(t,(m,r)=>{let n=!1;const d=[];let v=0,h=ve;const _=()=>{if(v)return;h();const k=e(u?d[0]:d,m,r);x?m(k):h=kt(k)?k:ve},w=p.map((k,g)=>_r(k,s=>{d[g]=s,v&=~(1<<g),n&&_()},()=>{v|=1<<g}));return n=!0,_(),function(){Le(w),h(),n=!1}})}const mt=Ot([]);xt(mt,i=>i.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}));const ft=Ot(new Map),wt=Ot(null),Ji="ssh-tools-theme";function Ls(){if(typeof window>"u")return null;try{return localStorage.getItem(Ji)}catch{return null}}function Ds(i){if(!(typeof window>"u"))try{localStorage.setItem(Ji,i)}catch{}}const Ms=Ls(),Bs=Ms||"light",Rt=Ot(Bs);function cr(i){Rt.set(i),Ds(i),typeof document<"u"&&document.documentElement.classList.toggle("dark",i==="dark")}function As(){if(typeof window>"u")return null;try{const i=localStorage.getItem("ssh-tools-ui-config");if(!i)return null;const e=JSON.parse(i);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const Rs={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},Ts=As(),lt=Ot({...Rs,...Ts});lt.subscribe(i=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(i))}catch{}});xt(lt,i=>i.isDevToolsOpen);xt(lt,i=>i.isFileManagerOpen);xt(lt,i=>i.isMonitorOpen);xt(lt,i=>i.sidebarWidth);xt(lt,i=>i.rightPanelWidth);xt(lt,i=>i.fileManagerHeight);function Os(i){lt.update(e=>({...e,sidebarWidth:i}))}function Ps(i){lt.update(e=>({...e,rightPanelWidth:i}))}function Is(i){lt.update(e=>({...e,fileManagerHeight:i}))}function Tr(i,e,t){const u=i.slice();return u[17]=e[t][0],u[18]=e[t][1],u}function Or(i,e,t){const u=i.slice();return u[21]=e[t],u}function Hs(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M9 5l7 7-7 7"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Fs(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M19 9l-7 7-7-7"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Pr(i){let e,t=[],u=new Map,p=qe(i[18]);const x=m=>m[21].id;for(let m=0;m<p.length;m+=1){let r=Or(i,p,m),n=x(r);u.set(n,t[m]=Hr(n,r))}return{c(){e=B("div");for(let m=0;m<t.length;m+=1)t[m].c();a(e,"class","ml-4")},m(m,r){G(m,e,r);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(m,r){r&165&&(p=qe(m[18]),t=Ht(t,r,x,1,m,p,u,e,ir,Hr,null,Or))},d(m){m&&V(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function Ir(i){let e,t=i[21].dbType.toUpperCase()+"",u;return{c(){e=se("• "),u=se(t)},m(p,x){G(p,e,x),G(p,u,x)},p(p,x){x&32&&t!==(t=p[21].dbType.toUpperCase()+"")&&he(u,t)},d(p){p&&(V(e),V(u))}}}function Hr(i,e){let t,u,p=Wr(e[21].type)+"",x,m,r,n,d=e[21].name+"",v,h,_,w,k,g,s=e[21].username+"",l,o,c=e[21].host+"",f,S,C=e[21].port+"",L,y,E,A,T,O,R,j,K,X,Y,Z,M=e[21].type==="database"&&e[21].dbType&&Ir(e);function P(){return e[13](e[21])}function H(){return e[14](e[21])}function I(...J){return e[15](e[21],...J)}function U(){return e[16](e[21])}return{key:i,first:null,c(){t=B("div"),u=B("div"),x=W(),m=B("div"),r=B("div"),n=B("span"),v=se(d),h=W(),_=B("div"),k=W(),g=B("div"),l=se(s),o=se("@"),f=se(c),S=se(":"),L=se(C),y=W(),M&&M.c(),E=W(),A=B("div"),T=B("button"),T.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',O=W(),R=B("button"),R.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',j=W(),K=B("button"),K.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',X=W(),a(u,"class","flex-shrink-0"),a(n,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),a(_,"class",w=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),a(r,"class","flex items-center gap-2"),a(g,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),a(m,"class","flex-1 min-w-0"),a(T,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),a(T,"title","连接"),a(R,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),a(K,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),a(A,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),a(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(J,$){G(J,t,$),b(t,u),u.innerHTML=p,b(t,x),b(t,m),b(m,r),b(r,n),b(n,v),b(r,h),b(r,_),b(m,k),b(m,g),b(g,l),b(g,o),b(g,f),b(g,S),b(g,L),b(g,y),M&&M.m(g,null),b(t,E),b(t,A),b(A,T),b(A,O),b(A,R),b(A,j),b(A,K),b(t,X),Y||(Z=[ie(T,"click",Ar(P)),ie(R,"click",Ar(H)),ie(K,"click",I),ie(t,"click",U)],Y=!0)},p(J,$){e=J,$&32&&p!==(p=Wr(e[21].type)+"")&&(u.innerHTML=p),$&32&&d!==(d=e[21].name+"")&&he(v,d),$&32&&w!==(w=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&a(_,"class",w),$&32&&s!==(s=e[21].username+"")&&he(l,s),$&32&&c!==(c=e[21].host+"")&&he(f,c),$&32&&C!==(C=e[21].port+"")&&he(L,C),e[21].type==="database"&&e[21].dbType?M?M.p(e,$):(M=Ir(e),M.c(),M.m(g,null)):M&&(M.d(1),M=null)},d(J){J&&V(t),M&&M.d(),Y=!1,Le(Z)}}}function Fr(i){let e,t,u,p,x,m,r,n,d=i[17]+"",v,h,_,w,k=i[18].length+"",g,s,l,o=i[4].has(i[17]),c,f,S;function C(T,O){return O&48&&(u=null),u==null&&(u=!!T[4].has(T[17])),u?Fs:Hs}let L=C(i,-1),y=L(i);function E(){return i[12](i[17])}let A=o&&Pr(i);return{c(){e=B("div"),t=B("div"),y.c(),p=W(),x=re("svg"),m=re("path"),r=W(),n=B("span"),v=se(d),h=W(),_=B("span"),w=se("("),g=se(k),s=se(")"),l=W(),A&&A.c(),c=W(),a(m,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),a(x,"class","w-4 h-4 text-amber-500"),a(x,"fill","currentColor"),a(x,"viewBox","0 0 24 24"),a(n,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),a(_,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),a(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),a(e,"class","mb-1")},m(T,O){G(T,e,O),b(e,t),y.m(t,null),b(t,p),b(t,x),b(x,m),b(t,r),b(t,n),b(n,v),b(t,h),b(t,_),b(_,w),b(_,g),b(_,s),b(e,l),A&&A.m(e,null),b(e,c),f||(S=ie(t,"click",E),f=!0)},p(T,O){i=T,L!==(L=C(i,O))&&(y.d(1),y=L(i),y&&(y.c(),y.m(t,p))),O&32&&d!==(d=i[17]+"")&&he(v,d),O&32&&k!==(k=i[18].length+"")&&he(g,k),O&48&&(o=i[4].has(i[17])),o?A?A.p(i,O):(A=Pr(i),A.c(),A.m(e,c)):A&&(A.d(1),A=null)},d(T){T&&V(e),y.d(),A&&A.d(),f=!1,S()}}}function Ws(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l=qe(Object.entries(i[5])),o=[];for(let c=0;c<l.length;c+=1)o[c]=Fr(Tr(i,l,c));return{c(){e=B("div"),t=B("div"),u=B("div"),p=B("h2"),p.textContent="服务器资产",x=W(),m=B("button"),m.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',r=W(),n=B("div"),d=re("svg"),v=re("path"),h=W(),_=B("input"),w=W(),k=B("div");for(let c=0;c<o.length;c+=1)o[c].c();a(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),a(m,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),a(u,"class","flex items-center justify-between mb-3"),a(v,"stroke-linecap","round"),a(v,"stroke-linejoin","round"),a(v,"stroke-width","2"),a(v,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),a(d,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),a(d,"fill","none"),a(d,"stroke","currentColor"),a(d,"viewBox","0 0 24 24"),a(_,"type","text"),a(_,"placeholder","搜索服务器..."),a(_,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(n,"class","relative"),a(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),a(k,"class","flex-1 overflow-y-auto scrollbar-thin"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(c,f){G(c,e,f),b(e,t),b(t,u),b(u,p),b(u,x),b(u,m),b(t,r),b(t,n),b(n,d),b(d,v),b(n,h),b(n,_),ge(_,i[3]),b(e,w),b(e,k);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(k,null);g||(s=[ie(m,"click",function(){kt(i[1])&&i[1].apply(this,arguments)}),ie(_,"input",i[11])],g=!0)},p(c,[f]){if(i=c,f&8&&_.value!==i[3]&&ge(_,i[3]),f&245){l=qe(Object.entries(i[5]));let S;for(S=0;S<l.length;S+=1){const C=Tr(i,l,S);o[S]?o[S].p(C,f):(o[S]=Fr(C),o[S].c(),o[S].m(k,null))}for(;S<o.length;S+=1)o[S].d(1);o.length=l.length}},i:ve,o:ve,d(c){c&&V(e),tr(o,c),g=!1,Le(s)}}}function Wr(i){switch(i){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function zs(i,e,t){let u,p,x;_t(i,mt,f=>t(10,x=f));let{onConnect:m}=e,{onAddClick:r}=e,{onDelete:n}=e,{onEdit:d}=e,v="",h=new Set(["生产环境","开发环境"]);function _(f){const S=new Set(h);S.has(f)?S.delete(f):S.add(f),t(4,h=S)}async function w(f,S){if(S.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),mt.update(C=>C.filter(L=>L.id!==f.id));return}if(confirm(`确定要删除连接 "${f.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(f.id),mt.update(C=>C.filter(L=>L.id!==f.id))}catch(C){console.error("Failed to delete asset:",C)}}function k(){v=this.value,t(3,v)}const g=f=>_(f),s=f=>m(f),l=f=>d(f),o=(f,S)=>w(f,S),c=f=>m(f);return i.$$set=f=>{"onConnect"in f&&t(0,m=f.onConnect),"onAddClick"in f&&t(1,r=f.onAddClick),"onDelete"in f&&t(8,n=f.onDelete),"onEdit"in f&&t(2,d=f.onEdit)},i.$$.update=()=>{i.$$.dirty&1032&&t(9,u=x.filter(f=>{const S=v.toLowerCase();return f.name.toLowerCase().includes(S)||f.host.toLowerCase().includes(S)||f.group.toLowerCase().includes(S)||f.username.toLowerCase().includes(S)})),i.$$.dirty&512&&t(5,p=u.reduce((f,S)=>(f[S.group]||(f[S.group]=[]),f[S.group].push(S),f),{}))},[m,r,d,v,h,p,_,w,n,u,x,k,g,s,l,o,c]}class js extends Qe{constructor(e){super(),Ye(this,e,zs,Ws,Je,{onConnect:0,onAddClick:1,onDelete:8,onEdit:2})}}var Xi={exports:{}};(function(i,e){(function(t,u){i.exports=u()})(globalThis,()=>(()=>{var t={4567:function(m,r,n){var d=this&&this.__decorate||function(o,c,f,S){var C,L=arguments.length,y=L<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,c,f,S);else for(var E=o.length-1;E>=0;E--)(C=o[E])&&(y=(L<3?C(y):L>3?C(c,f,y):C(c,f))||y);return L>3&&y&&Object.defineProperty(c,f,y),y},v=this&&this.__param||function(o,c){return function(f,S){c(f,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;const h=n(9042),_=n(9924),w=n(844),k=n(4725),g=n(2585),s=n(3656);let l=r.AccessibilityManager=class extends w.Disposable{constructor(o,c,f,S){super(),this._terminal=o,this._coreBrowserService=f,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,s.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(o){for(let c=0;c<o;c++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,c){this._liveRegionDebouncer.refresh(o,c,this._terminal.rows)}_renderRows(o,c){const f=this._terminal.buffer,S=f.lines.length.toString();for(let C=o;C<=c;C++){const L=f.lines.get(f.ydisp+C),y=[],E=(L==null?void 0:L.translateToString(!0,void 0,void 0,y))||"",A=(f.ydisp+C+1).toString(),T=this._rowElements[C];T&&(E.length===0?(T.innerText=" ",this._rowColumns.set(T,[0,1])):(T.textContent=E,this._rowColumns.set(T,y)),T.setAttribute("aria-posinset",A),T.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,c){const f=o.target,S=this._rowElements[c===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==S)return;let C,L;if(c===0?(C=f,L=this._rowElements.pop(),this._rowContainer.removeChild(L)):(C=this._rowElements.shift(),L=f,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),L.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleSelectionChange(){var E;if(this._rowElements.length===0)return;const o=document.getSelection();if(!o)return;if(o.isCollapsed)return void(this._rowContainer.contains(o.anchorNode)&&this._terminal.clearSelection());if(!o.anchorNode||!o.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:o.anchorNode,offset:o.anchorOffset},f={node:o.focusNode,offset:o.focusOffset};if((c.node.compareDocumentPosition(f.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===f.node&&c.offset>f.offset)&&([c,f]=[f,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const S=this._rowElements.slice(-1)[0];if(f.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(f={node:S,offset:((E=S.textContent)==null?void 0:E.length)??0}),!this._rowContainer.contains(f.node))return;const C=({node:A,offset:T})=>{const O=A instanceof Text?A.parentNode:A;let R=parseInt(O==null?void 0:O.getAttribute("aria-posinset"),10)-1;if(isNaN(R))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(O);if(!j)return console.warn("columns is null. Race condition?"),null;let K=T<j.length?j[T]:j.slice(-1)[0]+1;return K>=this._terminal.cols&&(++R,K=0),{row:R,column:K}},L=C(c),y=C(f);if(L&&y){if(L.row>y.row||L.row===y.row&&L.column>=y.column)throw new Error("invalid range");this._terminal.select(L.column,L.row,(y.row-L.row)*this._terminal.cols-L.column+y.column)}}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=this._coreBrowserService.mainDocument.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=l=d([v(1,g.IInstantiationService),v(2,k.ICoreBrowserService),v(3,k.IRenderService)],l)},3614:(m,r)=>{function n(_){return _.replace(/\r?\n/g,"\r")}function d(_,w){return w?"\x1B[200~"+_+"\x1B[201~":_}function v(_,w,k,g){_=d(_=n(_),k.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(_,!0),w.value=""}function h(_,w,k){const g=k.getBoundingClientRect(),s=_.clientX-g.left-10,l=_.clientY-g.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${s}px`,w.style.top=`${l}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=n,r.bracketTextForPaste=d,r.copyHandler=function(_,w){_.clipboardData&&_.clipboardData.setData("text/plain",w.selectionText),_.preventDefault()},r.handlePasteEvent=function(_,w,k,g){_.stopPropagation(),_.clipboardData&&v(_.clipboardData.getData("text/plain"),w,k,g)},r.paste=v,r.moveTextAreaUnderMouseCursor=h,r.rightClickHandler=function(_,w,k,g,s){h(_,w,k),s&&g.rightClickSelect(_),w.value=g.selectionText,w.select()}},7239:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;const d=n(1505);r.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(v,h,_){this._css.set(v,h,_)}getCss(v,h){return this._css.get(v,h)}setColor(v,h,_){this._color.set(v,h,_)}getColor(v,h){return this._color.get(v,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(n,d,v,h){n.addEventListener(d,v,h);let _=!1;return{dispose:()=>{_||(_=!0,n.removeEventListener(d,v,h))}}}},3551:function(m,r,n){var d=this&&this.__decorate||function(l,o,c,f){var S,C=arguments.length,L=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,c,f);else for(var y=l.length-1;y>=0;y--)(S=l[y])&&(L=(C<3?S(L):C>3?S(o,c,L):S(o,c))||L);return C>3&&L&&Object.defineProperty(o,c,L),L},v=this&&this.__param||function(l,o){return function(c,f){o(c,f,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier=void 0;const h=n(3656),_=n(8460),w=n(844),k=n(2585),g=n(4725);let s=r.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(l,o,c,f,S){super(),this._element=l,this._mouseService=o,this._renderService=c,this._bufferService=f,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){this._lastMouseEvent=l;const o=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const c=l.composedPath();for(let f=0;f<c.length;f++){const S=c[f];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,o){var f,S;this._activeProviderReplies&&o||((f=this._activeProviderReplies)==null||f.forEach(C=>{C==null||C.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let c=!1;for(const[C,L]of this._linkProviderService.linkProviders.entries())o?(S=this._activeProviderReplies)!=null&&S.get(C)&&(c=this._checkLinkProviderResult(C,l,c)):L.provideLinks(l.y,y=>{var A,T;if(this._isMouseOut)return;const E=y==null?void 0:y.map(O=>({link:O}));(A=this._activeProviderReplies)==null||A.set(C,E),c=this._checkLinkProviderResult(C,l,c),((T=this._activeProviderReplies)==null?void 0:T.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,o){const c=new Set;for(let f=0;f<o.size;f++){const S=o.get(f);if(S)for(let C=0;C<S.length;C++){const L=S[C],y=L.link.range.start.y<l?0:L.link.range.start.x,E=L.link.range.end.y>l?this._bufferService.cols:L.link.range.end.x;for(let A=y;A<=E;A++){if(c.has(A)){S.splice(C--,1);break}c.add(A)}}}}_checkLinkProviderResult(l,o,c){var C;if(!this._activeProviderReplies)return c;const f=this._activeProviderReplies.get(l);let S=!1;for(let L=0;L<l;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(S=!0);if(!S&&f){const L=f.find(y=>this._linkAtPosition(y.link,o));L&&(c=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let L=0;L<this._activeProviderReplies.size;L++){const y=(C=this._activeProviderReplies.get(L))==null?void 0:C.find(E=>this._linkAtPosition(E.link,o));if(y){c=!0,this._handleNewLink(y);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._currentLink)return;const o=this._positionFromMouseEvent(l,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,o){this._currentLink&&this._lastMouseEvent&&(!l||!o||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._lastMouseEvent)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(l.link,o)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var c,f;return(f=(c=this._currentLink)==null?void 0:c.state)==null?void 0:f.decorations.pointerCursor},set:c=>{var f;(f=this._currentLink)!=null&&f.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>{var c,f;return(f=(c=this._currentLink)==null?void 0:c.state)==null?void 0:f.decorations.underline},set:c=>{var f,S,C;(f=this._currentLink)!=null&&f.state&&((C=(S=this._currentLink)==null?void 0:S.state)==null?void 0:C.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const f=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(f,S),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(l,o,c){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(c,o.text)}_fireUnderlineEvent(l,o){const c=l.range,f=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-f-1,c.end.x,c.end.y-f-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(l,o,c){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(c,o.text)}_linkAtPosition(l,o){const c=l.range.start.y*this._bufferService.cols+l.range.start.x,f=l.range.end.y*this._bufferService.cols+l.range.end.x,S=o.y*this._bufferService.cols+o.x;return c<=S&&S<=f}_positionFromMouseEvent(l,o,c){const f=c.getCoords(l,o,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,o,c,f,S){return{x1:l,y1:o,x2:c,y2:f,cols:this._bufferService.cols,fg:S}}};r.Linkifier=s=d([v(1,g.IMouseService),v(2,g.IRenderService),v(3,k.IBufferService),v(4,g.ILinkProviderService)],s)},9042:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(m,r,n){var d=this&&this.__decorate||function(g,s,l,o){var c,f=arguments.length,S=f<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,s,l,o);else for(var C=g.length-1;C>=0;C--)(c=g[C])&&(S=(f<3?c(S):f>3?c(s,l,S):c(s,l))||S);return f>3&&S&&Object.defineProperty(s,l,S),S},v=this&&this.__param||function(g,s){return function(l,o){s(l,o,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;const h=n(511),_=n(2585);let w=r.OscLinkProvider=class{constructor(g,s,l){this._bufferService=g,this._optionsService=s,this._oscLinkService=l}provideLinks(g,s){var E;const l=this._bufferService.buffer.lines.get(g-1);if(!l)return void s(void 0);const o=[],c=this._optionsService.rawOptions.linkHandler,f=new h.CellData,S=l.getTrimmedLength();let C=-1,L=-1,y=!1;for(let A=0;A<S;A++)if(L!==-1||l.hasContent(A)){if(l.loadCell(A,f),f.hasExtendedAttrs()&&f.extended.urlId){if(L===-1){L=A,C=f.extended.urlId;continue}y=f.extended.urlId!==C}else L!==-1&&(y=!0);if(y||L!==-1&&A===S-1){const T=(E=this._oscLinkService.getLinkData(C))==null?void 0:E.uri;if(T){const O={start:{x:L+1,y:g},end:{x:A+(y||A!==S-1?0:1),y:g}};let R=!1;if(!(c!=null&&c.allowNonHttpProtocols))try{const j=new URL(T);["http:","https:"].includes(j.protocol)||(R=!0)}catch{R=!0}R||o.push({text:T,range:O,activate:(j,K)=>c?c.activate(j,K,O):k(0,K),hover:(j,K)=>{var X;return(X=c==null?void 0:c.hover)==null?void 0:X.call(c,j,K,O)},leave:(j,K)=>{var X;return(X=c==null?void 0:c.leave)==null?void 0:X.call(c,j,K,O)}})}y=!1,f.hasExtendedAttrs()&&f.extended.urlId?(L=A,C=f.extended.urlId):(L=-1,C=-1)}}s(o)}};function k(g,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=w=d([v(0,_.IBufferService),v(1,_.IOptionsService),v(2,_.IOscLinkService)],w)},6193:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(n,d){this._renderCallback=n,this._coreBrowserService=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,d,v){this._rowCount=v,n=n!==void 0?n:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;const d=n(3614),v=n(3656),h=n(3551),_=n(9042),w=n(3730),k=n(1680),g=n(3107),s=n(5744),l=n(2950),o=n(1296),c=n(428),f=n(4269),S=n(5114),C=n(8934),L=n(3230),y=n(9312),E=n(4725),A=n(6731),T=n(8055),O=n(8969),R=n(8460),j=n(844),K=n(6114),X=n(8437),Y=n(2584),Z=n(7399),M=n(5941),P=n(9074),H=n(2585),I=n(5435),U=n(4567),J=n(779);class $ extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=K,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(J.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((D,N)=>this.refresh(D,N))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(D=>this._reportWindowsOptions(D))),this.register(this._inputHandler.onColor(D=>this._handleColorEvent(D))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(D=>this._afterResize(D.cols,D.rows))),this.register((0,j.toDisposable)(()=>{var D,N;this._customKeyEventHandler=void 0,(N=(D=this.element)==null?void 0:D.parentNode)==null||N.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(const D of F){let N,z="";switch(D.index){case 256:N="foreground",z="10";break;case 257:N="background",z="11";break;case 258:N="cursor",z="12";break;default:N="ansi",z="4;"+D.index}switch(D.type){case 0:const Q=T.color.toColorRGB(N==="ansi"?this._themeService.colors.ansi[D.index]:this._themeService.colors[N]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${z};${(0,M.toRgbString)(Q)}${Y.C1_ESCAPED.ST}`);break;case 1:if(N==="ansi")this._themeService.modifyColors(te=>te.ansi[D.index]=T.channels.toColor(...D.color));else{const te=N;this._themeService.modifyColors(q=>q[te]=T.channels.toColor(...D.color))}break;case 2:this._themeService.restoreColor(D.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)==null?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const F=this.buffer.ybase+this.buffer.y,D=this.buffer.lines.get(F);if(!D)return;const N=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,Q=D.getWidth(N),te=this._renderService.dimensions.css.cell.width*Q,q=this.buffer.y*this._renderService.dimensions.css.cell.height,oe=N*this._renderService.dimensions.css.cell.width;this.textarea.style.left=oe+"px",this.textarea.style.top=q+"px",this.textarea.style.width=te+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",D=>{this.hasSelection()&&(0,d.copyHandler)(D,this._selectionService)}));const F=D=>(0,d.handlePasteEvent)(D,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,v.addDisposableDomListener)(this.element,"paste",F)),K.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",D=>{D.button===2&&(0,d.rightClickHandler)(D,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",D=>{(0,d.rightClickHandler)(D,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),K.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",D=>{D.button===1&&(0,d.moveTextAreaUnderMouseCursor)(D,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var N;if(!F)throw new Error("Terminal requires a parent element.");if(F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((N=this.element)==null?void 0:N.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=F.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);const D=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),D.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),D.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),K.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,F.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(D);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const F=this,D=this.element;function N(te){const q=F._mouseService.getMouseReportCoords(te,F.screenElement);if(!q)return!1;let oe,ee;switch(te.overrideType||te.type){case"mousemove":ee=32,te.buttons===void 0?(oe=3,te.button!==void 0&&(oe=te.button<3?te.button:3)):oe=1&te.buttons?0:4&te.buttons?1:2&te.buttons?2:3;break;case"mouseup":ee=0,oe=te.button<3?te.button:3;break;case"mousedown":ee=1,oe=te.button<3?te.button:3;break;case"wheel":if(F._customWheelEventHandler&&F._customWheelEventHandler(te)===!1||F.viewport.getLinesScrolled(te)===0)return!1;ee=te.deltaY<0?0:1,oe=4;break;default:return!1}return!(ee===void 0||oe===void 0||oe>4)&&F.coreMouseService.triggerMouseEvent({col:q.col,row:q.row,x:q.x,y:q.y,button:oe,action:ee,ctrl:te.ctrlKey,alt:te.altKey,shift:te.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:te=>(N(te),te.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(te)),wheel:te=>(N(te),this.cancel(te,!0)),mousedrag:te=>{te.buttons&&N(te)},mousemove:te=>{te.buttons||N(te)}};this.register(this.coreMouseService.onProtocolChange(te=>{te?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(te)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&te?z.mousemove||(D.addEventListener("mousemove",Q.mousemove),z.mousemove=Q.mousemove):(D.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&te?z.wheel||(D.addEventListener("wheel",Q.wheel,{passive:!1}),z.wheel=Q.wheel):(D.removeEventListener("wheel",z.wheel),z.wheel=null),2&te?z.mouseup||(z.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&te?z.mousedrag||(z.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(D,"mousedown",te=>{if(te.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(te))return N(te),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(te)})),this.register((0,v.addDisposableDomListener)(D,"wheel",te=>{if(!z.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(te)===!1)return!1;if(!this.buffer.hasScrollback){const q=this.viewport.getLinesScrolled(te);if(q===0)return;const oe=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(te.deltaY<0?"A":"B");let ee="";for(let ce=0;ce<Math.abs(q);ce++)ee+=oe;return this.coreService.triggerDataEvent(ee,!0),this.cancel(te,!0)}return this.viewport.handleWheel(te)?this.cancel(te):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(D,"touchstart",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(te),this.cancel(te)},{passive:!0})),this.register((0,v.addDisposableDomListener)(D,"touchmove",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(te)?void 0:this.cancel(te)},{passive:!1}))}refresh(F,D){var N;(N=this._renderService)==null||N.refreshRows(F,D)}updateCursorStyle(F){var D;(D=this._selectionService)!=null&&D.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,D,N=0){var z;N===1?(super.scrollLines(F,D,N),this.refresh(0,this.rows-1)):(z=this.viewport)==null||z.scrollLines(F)}paste(F){(0,d.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}attachCustomWheelEventHandler(F){this._customWheelEventHandler=F}registerLinkProvider(F){return this._linkProviderService.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const D=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),D}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,D,N){this._selectionService.setSelection(F,D,N)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)==null||F.clearSelection()}selectAll(){var F;(F=this._selectionService)==null||F.selectAll()}selectLines(F,D){var N;(N=this._selectionService)==null||N.selectLines(F,D)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;const D=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!D&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;D||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const N=(0,Z.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),N.type===3||N.type===2){const z=this.rows-1;return this.scrollLines(N.type===2?-z:z),this.cancel(F,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(N.cancel&&this.cancel(F,!0),!N.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==Y.C0.ETX&&N.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,D){const N=F.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||F.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||F.isWindows&&D.getModifierState("AltGraph");return D.type==="keypress"?N:N&&(!D.keyCode||D.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(D){return D.keyCode===16||D.keyCode===17||D.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)D=F.charCode;else if(F.which===null||F.which===void 0)D=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;D=F.which}return!(!D||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const D=F.data;return this.coreService.triggerDataEvent(D,!0),this.cancel(F),!0}return!1}resize(F,D){F!==this.cols||D!==this.rows?super.resize(F,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,D){var N,z;(N=this._charSizeService)==null||N.measure(),(z=this.viewport)==null||z.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let D=1;D<this.rows;D++)this.buffer.lines.push(this.buffer.getBlankLine(X.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)==null||F.reset(),this.refresh(0,this.rows-1)}}reset(){var D,N;this.options.rows=this.rows,this.options.cols=this.cols;const F=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)==null||D.reset(),this._decorationService.reset(),(N=this.viewport)==null||N.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)==null||F.clearTextureAtlas()}_reportFocus(){var F;(F=this.element)!=null&&F.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const D=this._renderService.dimensions.css.canvas.width.toFixed(0),N=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${N};${D}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${Q};${z}t`)}}cancel(F,D){if(this.options.cancelEvents||D)return F.preventDefault(),F.stopPropagation(),!1}}r.Terminal=$},9924:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(n,d=1e3){this._renderCallback=n,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,d,v){this._rowCount=v,n=n!==void 0?n:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=h-this._lastRefreshMs,w=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,d)}}},1680:function(m,r,n){var d=this&&this.__decorate||function(l,o,c,f){var S,C=arguments.length,L=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,c,f);else for(var y=l.length-1;y>=0;y--)(S=l[y])&&(L=(C<3?S(L):C>3?S(o,c,L):S(o,c))||L);return C>3&&L&&Object.defineProperty(o,c,L),L},v=this&&this.__param||function(l,o){return function(c,f){o(c,f,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;const h=n(3656),_=n(4725),w=n(8460),k=n(844),g=n(2585);let s=r.Viewport=class extends k.Disposable{constructor(l,o,c,f,S,C,L,y){super(),this._viewportElement=l,this._scrollArea=o,this._bufferService=c,this._optionsService=f,this._charSizeService=S,this._renderService=C,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const o=this._getPixelsScrolled(l);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(l,o))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let o=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(l,o){var y;let c,f="";const S=[],C=o??this._bufferService.buffer.lines.length,L=this._bufferService.buffer.lines;for(let E=l;E<C;E++){const A=L.get(E);if(!A)continue;const T=(y=L.get(E+1))==null?void 0:y.isWrapped;if(f+=A.translateToString(!T),!T||E===L.length-1){const O=document.createElement("div");O.textContent=f,S.push(O),f.length>0&&(c=O),f=""}}return{bufferElements:S,cursorElement:c}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let o=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(l,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const o=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(l,o))}};r.Viewport=s=d([v(2,g.IBufferService),v(3,g.IOptionsService),v(4,_.ICharSizeService),v(5,_.IRenderService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],s)},3107:function(m,r,n){var d=this&&this.__decorate||function(g,s,l,o){var c,f=arguments.length,S=f<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,s,l,o);else for(var C=g.length-1;C>=0;C--)(c=g[C])&&(S=(f<3?c(S):f>3?c(s,l,S):c(s,l))||S);return f>3&&S&&Object.defineProperty(s,l,S),S},v=this&&this.__param||function(g,s){return function(l,o){s(l,o,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;const h=n(4725),_=n(844),w=n(2585);let k=r.BufferDecorationRenderer=class extends _.Disposable{constructor(g,s,l,o,c){super(),this._screenElement=g,this._bufferService=s,this._coreBrowserService=l,this._decorationService=o,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(f=>this._removeDecoration(f))),this.register((0,_.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){var o;const s=this._coreBrowserService.mainDocument.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer",((o=g==null?void 0:g.options)==null?void 0:o.layer)==="top"),s.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",s.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const l=g.options.x??0;return l&&l>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(g,s),s}_refreshStyle(g){const s=g.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let l=this._decorationElements.get(g);l||(l=this._createElement(g),g.element=l,this._decorationElements.set(g,l),this._container.appendChild(l),g.onDispose(()=>{this._decorationElements.delete(g),l.remove()})),l.style.top=s*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(l)}}_refreshXPosition(g,s=g.element){if(!s)return;const l=g.options.x??0;(g.options.anchor||"left")==="right"?s.style.right=l?l*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=l?l*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){var s;(s=this._decorationElements.get(g))==null||s.remove(),this._decorationElements.delete(g),g.dispose()}};r.BufferDecorationRenderer=k=d([v(1,w.IBufferService),v(2,h.ICoreBrowserService),v(3,w.IDecorationService),v(4,h.IRenderService)],k)},5871:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const d of this._zones)if(d.color===n.options.overviewRulerOptions.color&&d.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,n.marker.line))return;if(this._lineAdjacentToZone(d,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(d,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,d){return d>=n.startBufferLine&&d<=n.endBufferLine}_lineAdjacentToZone(n,d,v){return d>=n.startBufferLine-this._linePadding[v||"full"]&&d<=n.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(n,d){n.startBufferLine=Math.min(n.startBufferLine,d),n.endBufferLine=Math.max(n.endBufferLine,d)}}},5744:function(m,r,n){var d=this&&this.__decorate||function(c,f,S,C){var L,y=arguments.length,E=y<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,f,S,C);else for(var A=c.length-1;A>=0;A--)(L=c[A])&&(E=(y<3?L(E):y>3?L(f,S,E):L(f,S))||E);return y>3&&E&&Object.defineProperty(f,S,E),E},v=this&&this.__param||function(c,f){return function(S,C){f(S,C,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;const h=n(5871),_=n(4725),w=n(844),k=n(2585),g={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let o=r.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,f,S,C,L,y,E){var T;super(),this._viewportElement=c,this._screenElement=f,this._bufferService=S,this._decorationService=C,this._renderService=L,this._optionsService=y,this._coreBrowserService=E,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(T=this._viewportElement.parentElement)==null||T.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var O;(O=this._canvas)==null||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=c,s.center=f,s.right=c,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=s.left,l.right=s.left+s.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);g.left=f,g.center=f,g.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const f of c)f.position!=="full"&&this._renderColorZone(f);for(const f of c)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(l[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-g[c.position||"full"]/2),s[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[c.position||"full"]))}_queueRefresh(c,f){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=o=d([v(2,k.IBufferService),v(3,k.IDecorationService),v(4,_.IRenderService),v(5,k.IOptionsService),v(6,_.ICoreBrowserService)],o)},2950:function(m,r,n){var d=this&&this.__decorate||function(g,s,l,o){var c,f=arguments.length,S=f<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,s,l,o);else for(var C=g.length-1;C>=0;C--)(c=g[C])&&(S=(f<3?c(S):f>3?c(s,l,S):c(s,l))||S);return f>3&&S&&Object.defineProperty(s,l,S),S},v=this&&this.__param||function(g,s){return function(l,o){s(l,o,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;const h=n(4725),_=n(2585),w=n(2584);let k=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,s,l,o,c,f){this._textarea=g,this._compositionView=s,this._bufferService=l,this._optionsService=o,this._coreService=c,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,l=s.replace(g,"");this._dataAlreadySent=l,s.length>g.length?this._coreService.triggerDataEvent(l,!0):s.length<g.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):s.length===g.length&&s!==g&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=k=d([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,_.ICoreService),v(5,h.IRenderService)],k)},9806:(m,r)=>{function n(d,v,h){const _=h.getBoundingClientRect(),w=d.getComputedStyle(h),k=parseInt(w.getPropertyValue("padding-left")),g=parseInt(w.getPropertyValue("padding-top"));return[v.clientX-_.left-k,v.clientY-_.top-g]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=n,r.getCoords=function(d,v,h,_,w,k,g,s,l){if(!k)return;const o=n(d,v,h);return o?(o[0]=Math.ceil((o[0]+(l?g/2:0))/g),o[1]=Math.ceil(o[1]/s),o[0]=Math.min(Math.max(o[0],1),_+(l?1:0)),o[1]=Math.min(Math.max(o[1],1),w),o):void 0}},9504:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;const d=n(2584);function v(s,l,o,c){const f=s-h(s,o),S=l-h(l,o),C=Math.abs(f-S)-function(L,y,E){let A=0;const T=L-h(L,E),O=y-h(y,E);for(let R=0;R<Math.abs(T-O);R++){const j=_(L,y)==="A"?-1:1,K=E.buffer.lines.get(T+j*R);K!=null&&K.isWrapped&&A++}return A}(s,l,o);return g(C,k(_(s,l),c))}function h(s,l){let o=0,c=l.buffer.lines.get(s),f=c==null?void 0:c.isWrapped;for(;f&&s>=0&&s<l.rows;)o++,c=l.buffer.lines.get(--s),f=c==null?void 0:c.isWrapped;return o}function _(s,l){return s>l?"A":"B"}function w(s,l,o,c,f,S){let C=s,L=l,y="";for(;C!==o||L!==c;)C+=f?1:-1,f&&C>S.cols-1?(y+=S.buffer.translateBufferLineToString(L,!1,s,C),C=0,s=0,L++):!f&&C<0&&(y+=S.buffer.translateBufferLineToString(L,!1,0,s+1),C=S.cols-1,s=C,L--);return y+S.buffer.translateBufferLineToString(L,!1,s,C)}function k(s,l){const o=l?"O":"[";return d.C0.ESC+o+s}function g(s,l){s=Math.floor(s);let o="";for(let c=0;c<s;c++)o+=l;return o}r.moveToCellSequence=function(s,l,o,c){const f=o.buffer.x,S=o.buffer.y;if(!o.buffer.hasScrollback)return function(y,E,A,T,O,R){return v(E,T,O,R).length===0?"":g(w(y,E,y,E-h(E,O),!1,O).length,k("D",R))}(f,S,0,l,o,c)+v(S,l,o,c)+function(y,E,A,T,O,R){let j;j=v(E,T,O,R).length>0?T-h(T,O):E;const K=T,X=function(Y,Z,M,P,H,I){let U;return U=v(M,P,H,I).length>0?P-h(P,H):Z,Y<M&&U<=P||Y>=M&&U<P?"C":"D"}(y,E,A,T,O,R);return g(w(y,j,A,K,X==="C",O).length,k(X,R))}(f,S,s,l,o,c);let C;if(S===l)return C=f>s?"D":"C",g(Math.abs(f-s),k(C,c));C=S>l?"D":"C";const L=Math.abs(S-l);return g(function(y,E){return E.cols-y}(S>l?s:f,o)+(L-1)*o.cols+1+((S>l?f:s)-1),k(C,c))}},1296:function(m,r,n){var d=this&&this.__decorate||function(R,j,K,X){var Y,Z=arguments.length,M=Z<3?j:X===null?X=Object.getOwnPropertyDescriptor(j,K):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(R,j,K,X);else for(var P=R.length-1;P>=0;P--)(Y=R[P])&&(M=(Z<3?Y(M):Z>3?Y(j,K,M):Y(j,K))||M);return Z>3&&M&&Object.defineProperty(j,K,M),M},v=this&&this.__param||function(R,j){return function(K,X){j(K,X,R)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;const h=n(3787),_=n(2550),w=n(2223),k=n(6171),g=n(6052),s=n(4725),l=n(8055),o=n(8460),c=n(844),f=n(2585),S="xterm-dom-renderer-owner-",C="xterm-rows",L="xterm-fg-",y="xterm-bg-",E="xterm-focus",A="xterm-selection";let T=1,O=r.DomRenderer=class extends c.Disposable{constructor(R,j,K,X,Y,Z,M,P,H,I,U,J,$){super(),this._terminal=R,this._document=j,this._element=K,this._screenElement=X,this._viewportElement=Y,this._helperContainer=Z,this._linkifier2=M,this._charSizeService=H,this._optionsService=I,this._bufferService=U,this._coreBrowserService=J,this._themeService=$,this._terminalClass=T++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ne=>this._injectCss(ne))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ne=>this._handleLinkHover(ne))),this.register(this._linkifier2.onHideLinkUnderline(ne=>this._handleLinkLeave(ne))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const K of this._rowElements)K.style.width=`${this.dimensions.css.canvas.width}px`,K.style.height=`${this.dimensions.css.cell.height}px`,K.style.lineHeight=`${this.dimensions.css.cell.height}px`,K.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${C} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${C} .xterm-dim { color: ${l.color.multiplyOpacity(R.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const K=`blink_underline_${this._terminalClass}`,X=`blink_bar_${this._terminalClass}`,Y=`blink_block_${this._terminalClass}`;j+=`@keyframes ${K} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${X} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${Y} { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,j+=`${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${K} 1s step-end infinite;}${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${R.cursor.css} !important; color: ${R.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[Z,M]of R.ansi.entries())j+=`${this._terminalSelector} .${L}${Z} { color: ${M.css}; }${this._terminalSelector} .${L}${Z}.xterm-dim { color: ${l.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${y}${Z} { background-color: ${M.css}; }`;j+=`${this._terminalSelector} .${L}${w.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(R.background).css}; }${this._terminalSelector} .${L}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${y}${w.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,j){for(let K=this._rowElements.length;K<=j;K++){const X=this._document.createElement("div");this._rowContainer.appendChild(X),this._rowElements.push(X)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,j){this._refreshRowElements(R,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,j,K){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,j,K),this.renderRows(0,this._bufferService.rows-1),!R||!j)return;this._selectionRenderModel.update(this._terminal,R,j,K);const X=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,Z=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(Z>=this._bufferService.rows||M<0)return;const P=this._document.createDocumentFragment();if(K){const H=R[0]>j[0];P.appendChild(this._createSelectionElement(Z,H?j[0]:R[0],H?R[0]:j[0],M-Z+1))}else{const H=X===Z?R[0]:0,I=Z===Y?j[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(Z,H,I));const U=M-Z-1;if(P.appendChild(this._createSelectionElement(Z+1,0,this._bufferService.cols,U)),Z!==M){const J=Y===M?j[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(M,0,J))}}this._selectionContainer.appendChild(P)}_createSelectionElement(R,j,K,X=1){const Y=this._document.createElement("div"),Z=j*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(K-j);return Z+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-Z),Y.style.height=X*this.dimensions.css.cell.height+"px",Y.style.top=R*this.dimensions.css.cell.height+"px",Y.style.left=`${Z}px`,Y.style.width=`${M}px`,Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,j){const K=this._bufferService.buffer,X=K.ybase+K.y,Y=Math.min(K.x,this._bufferService.cols-1),Z=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=R;H<=j;H++){const I=H+K.ydisp,U=this._rowElements[H],J=K.lines.get(I);if(!U||!J)break;U.replaceChildren(...this._rowFactory.createRow(J,I,I===X,M,P,Y,Z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,j,K,X,Y,Z){K<0&&(R=0),X<0&&(j=0);const M=this._bufferService.rows-1;K=Math.max(Math.min(K,M),0),X=Math.max(Math.min(X,M),0),Y=Math.min(Y,this._bufferService.cols);const P=this._bufferService.buffer,H=P.ybase+P.y,I=Math.min(P.x,Y-1),U=this._optionsService.rawOptions.cursorBlink,J=this._optionsService.rawOptions.cursorStyle,$=this._optionsService.rawOptions.cursorInactiveStyle;for(let ne=K;ne<=X;++ne){const F=ne+P.ydisp,D=this._rowElements[ne],N=P.lines.get(F);if(!D||!N)break;D.replaceChildren(...this._rowFactory.createRow(N,F,F===H,J,$,I,U,this.dimensions.css.cell.width,this._widthCache,Z?ne===K?R:0:-1,Z?(ne===X?j:Y)-1:-1))}}};r.DomRenderer=O=d([v(7,f.IInstantiationService),v(8,s.ICharSizeService),v(9,f.IOptionsService),v(10,f.IBufferService),v(11,s.ICoreBrowserService),v(12,s.IThemeService)],O)},3787:function(m,r,n){var d=this&&this.__decorate||function(C,L,y,E){var A,T=arguments.length,O=T<3?L:E===null?E=Object.getOwnPropertyDescriptor(L,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,L,y,E);else for(var R=C.length-1;R>=0;R--)(A=C[R])&&(O=(T<3?A(O):T>3?A(L,y,O):A(L,y))||O);return T>3&&O&&Object.defineProperty(L,y,O),O},v=this&&this.__param||function(C,L){return function(y,E){L(y,E,C)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;const h=n(2223),_=n(643),w=n(511),k=n(2585),g=n(8055),s=n(4725),l=n(4269),o=n(6171),c=n(3734);let f=r.DomRendererRowFactory=class{constructor(C,L,y,E,A,T,O){this._document=C,this._characterJoinerService=L,this._optionsService=y,this._coreBrowserService=E,this._coreService=A,this._decorationService=T,this._themeService=O,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,L,y){this._selectionStart=C,this._selectionEnd=L,this._columnSelectMode=y}createRow(C,L,y,E,A,T,O,R,j,K,X){const Y=[],Z=this._characterJoinerService.getJoinedCharacters(L),M=this._themeService.colors;let P,H=C.getNoBgTrimmedLength();y&&H<T+1&&(H=T+1);let I=0,U="",J=0,$=0,ne=0,F=!1,D=0,N=!1,z=0;const Q=[],te=K!==-1&&X!==-1;for(let q=0;q<H;q++){C.loadCell(q,this._workCell);let oe=this._workCell.getWidth();if(oe===0)continue;let ee=!1,ce=q,le=this._workCell;if(Z.length>0&&q===Z[0][0]){ee=!0;const me=Z.shift();le=new l.JoinedCellData(this._workCell,C.translateToString(!0,me[0],me[1]),me[1]-me[0]),ce=me[1]-1,oe=le.getWidth()}const xe=this._isCellInSelection(q,L),ye=y&&q===T,De=te&&q>=K&&q<=X;let _e=!1;this._decorationService.forEachDecorationAtCell(q,L,void 0,me=>{_e=!0});let pe=le.getChars()||_.WHITESPACE_CELL_CHAR;if(pe===" "&&(le.isUnderline()||le.isOverline())&&(pe=" "),z=oe*R-j.get(pe,le.isBold(),le.isItalic()),P){if(I&&(xe&&N||!xe&&!N&&le.bg===J)&&(xe&&N&&M.selectionForeground||le.fg===$)&&le.extended.ext===ne&&De===F&&z===D&&!ye&&!ee&&!_e){le.isInvisible()?U+=_.WHITESPACE_CELL_CHAR:U+=pe,I++;continue}I&&(P.textContent=U),P=this._document.createElement("span"),I=0,U=""}else P=this._document.createElement("span");if(J=le.bg,$=le.fg,ne=le.extended.ext,F=De,D=z,N=xe,ee&&T>=q&&T<=ce&&(T=q),!this._coreService.isCursorHidden&&ye&&this._coreService.isCursorInitialized){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&Q.push("xterm-cursor-blink"),Q.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(le.isBold()&&Q.push("xterm-bold"),le.isItalic()&&Q.push("xterm-italic"),le.isDim()&&Q.push("xterm-dim"),U=le.isInvisible()?_.WHITESPACE_CELL_CHAR:le.getChars()||_.WHITESPACE_CELL_CHAR,le.isUnderline()&&(Q.push(`xterm-underline-${le.extended.underlineStyle}`),U===" "&&(U=" "),!le.isUnderlineColorDefault()))if(le.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(le.getUnderlineColor()).join(",")})`;else{let me=le.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&le.isBold()&&me<8&&(me+=8),P.style.textDecorationColor=M.ansi[me].css}le.isOverline()&&(Q.push("xterm-overline"),U===" "&&(U=" ")),le.isStrikethrough()&&Q.push("xterm-strikethrough"),De&&(P.style.textDecoration="underline");let we=le.getFgColor(),Ke=le.getFgColorMode(),be=le.getBgColor(),Ue=le.getBgColorMode();const Xe=!!le.isInverse();if(Xe){const me=we;we=be,be=me;const it=Ke;Ke=Ue,Ue=it}let Ve,Fe,Ae,Ee=!1;switch(this._decorationService.forEachDecorationAtCell(q,L,void 0,me=>{me.options.layer!=="top"&&Ee||(me.backgroundColorRGB&&(Ue=50331648,be=me.backgroundColorRGB.rgba>>8&16777215,Ve=me.backgroundColorRGB),me.foregroundColorRGB&&(Ke=50331648,we=me.foregroundColorRGB.rgba>>8&16777215,Fe=me.foregroundColorRGB),Ee=me.options.layer==="top")}),!Ee&&xe&&(Ve=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,be=Ve.rgba>>8&16777215,Ue=50331648,Ee=!0,M.selectionForeground&&(Ke=50331648,we=M.selectionForeground.rgba>>8&16777215,Fe=M.selectionForeground)),Ee&&Q.push("xterm-decoration-top"),Ue){case 16777216:case 33554432:Ae=M.ansi[be],Q.push(`xterm-bg-${be}`);break;case 50331648:Ae=g.channels.toColor(be>>16,be>>8&255,255&be),this._addStyle(P,`background-color:#${S((be>>>0).toString(16),"0",6)}`);break;default:Xe?(Ae=M.foreground,Q.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Ae=M.background}switch(Ve||le.isDim()&&(Ve=g.color.multiplyOpacity(Ae,.5)),Ke){case 16777216:case 33554432:le.isBold()&&we<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(we+=8),this._applyMinimumContrast(P,Ae,M.ansi[we],le,Ve,void 0)||Q.push(`xterm-fg-${we}`);break;case 50331648:const me=g.channels.toColor(we>>16&255,we>>8&255,255&we);this._applyMinimumContrast(P,Ae,me,le,Ve,Fe)||this._addStyle(P,`color:#${S(we.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,Ae,M.foreground,le,Ve,Fe)||Xe&&Q.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Q.length&&(P.className=Q.join(" "),Q.length=0),ye||ee||_e?P.textContent=U:I++,z!==this.defaultSpacing&&(P.style.letterSpacing=`${z}px`),Y.push(P),q=ce}return P&&I&&(P.textContent=U),Y}_applyMinimumContrast(C,L,y,E,A,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.treatGlyphAsBackgroundColor)(E.getCode()))return!1;const O=this._getContrastCache(E);let R;if(A||T||(R=O.getColor(L.rgba,y.rgba)),R===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);R=g.color.ensureContrastRatio(A||L,T||y,j),O.setColor((A||L).rgba,(T||y).rgba,R??null)}return!!R&&(this._addStyle(C,`color:${R.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,L){C.setAttribute("style",`${C.getAttribute("style")||""}${L};`)}_isCellInSelection(C,L){const y=this._selectionStart,E=this._selectionEnd;return!(!y||!E)&&(this._columnSelectMode?y[0]<=E[0]?C>=y[0]&&L>=y[1]&&C<E[0]&&L<=E[1]:C<y[0]&&L>=y[1]&&C>=E[0]&&L<=E[1]:L>y[1]&&L<E[1]||y[1]===E[1]&&L===y[1]&&C>=y[0]&&C<E[0]||y[1]<E[1]&&L===E[1]&&C<E[0]||y[1]<E[1]&&L===y[1]&&C>=y[0])}};function S(C,L,y){for(;C.length<y;)C=L+C;return C}r.DomRendererRowFactory=f=d([v(1,s.ICharacterJoinerService),v(2,k.IOptionsService),v(3,s.ICoreBrowserService),v(4,k.ICoreService),v(5,k.IDecorationService),v(6,s.IThemeService)],f)},2550:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(n,d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=n.createElement("span");v.classList.add("xterm-char-measure-element");const h=n.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const _=n.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const w=n.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[v,h,_,w],this._container.appendChild(v),this._container.appendChild(h),this._container.appendChild(_),this._container.appendChild(w),d.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,d,v,h){n===this._font&&d===this._fontSize&&v===this._weight&&h===this._weightBold||(this._font=n,this._fontSize=d,this._weight=v,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(n,d,v){let h=0;if(!d&&!v&&n.length===1&&(h=n.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const k=this._measure(n,0);return k>0&&(this._flat[h]=k),k}let _=n;d&&(_+="B"),v&&(_+="I");let w=this._holey.get(_);if(w===void 0){let k=0;d&&(k|=1),v&&(k|=2),w=this._measure(n,k),w>0&&this._holey.set(_,w)}return w}_measure(n,d){const v=this._measureElements[d];return v.textContent=n.repeat(32),v.offsetWidth/32}}},2223:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;const d=n(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(m,r)=>{function n(v){return 57508<=v&&v<=57558}function d(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(r,"__esModule",{value:!0}),r.computeNextVariantOffset=r.createRenderDimensions=r.treatGlyphAsBackgroundColor=r.allowRescaling=r.isEmoji=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},r.isPowerlineGlyph=n,r.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},r.isEmoji=d,r.allowRescaling=function(v,h,_,w){return h===1&&_>Math.ceil(1.5*w)&&v!==void 0&&v>255&&!d(v)&&!n(v)&&!function(k){return 57344<=k&&k<=63743}(v)},r.treatGlyphAsBackgroundColor=function(v){return n(v)||function(h){return 9472<=h&&h<=9631}(v)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},r.computeNextVariantOffset=function(v,h,_=0){return(v-(2*Math.round(h)-_))%(2*Math.round(h))}},6052:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,h,_,w=!1){if(this.selectionStart=h,this.selectionEnd=_,!h||!_||h[0]===_[0]&&h[1]===_[1])return void this.clear();const k=v.buffers.active.ydisp,g=h[1]-k,s=_[1]-k,l=Math.max(g,0),o=Math.min(s,v.rows-1);l>=v.rows||o<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=g,this.viewportEndRow=s,this.viewportCappedStartRow=l,this.viewportCappedEndRow=o,this.startCol=h[0],this.endCol=_[0])}isCellSelected(v,h,_){return!!this.hasSelection&&(_-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&_>=this.viewportCappedStartRow&&h<this.endCol&&_<=this.viewportCappedEndRow:h<this.startCol&&_>=this.viewportCappedStartRow&&h>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&h>=this.startCol)}}r.createSelectionRenderModel=function(){return new n}},456:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,d=this.selectionEnd;return!(!n||!d)&&(n[1]>d[1]||n[1]===d[1]&&n[0]>d[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(m,r,n){var d=this&&this.__decorate||function(o,c,f,S){var C,L=arguments.length,y=L<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,c,f,S);else for(var E=o.length-1;E>=0;E--)(C=o[E])&&(y=(L<3?C(y):L>3?C(c,f,y):C(c,f))||y);return L>3&&y&&Object.defineProperty(c,f,y),y},v=this&&this.__param||function(o,c){return function(f,S){c(f,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;const h=n(2585),_=n(8460),w=n(844);let k=r.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,c,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new l(this._optionsService))}catch{this._measureStrategy=this.register(new s(o,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};r.CharSizeService=k=d([v(2,h.IOptionsService)],k);class g extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,f){c!==void 0&&c>0&&f!==void 0&&f>0&&(this._result.width=c,this._result.height=f)}}class s extends g{constructor(c,f,S){super(),this._document=c,this._parentElement=f,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class l extends g{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const f=this._ctx.measureText("W");if(!("width"in f&&"fontBoundingBoxAscent"in f&&"fontBoundingBoxDescent"in f))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(m,r,n){var d=this&&this.__decorate||function(l,o,c,f){var S,C=arguments.length,L=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,c,f);else for(var y=l.length-1;y>=0;y--)(S=l[y])&&(L=(C<3?S(L):C>3?S(o,c,L):S(o,c))||L);return C>3&&L&&Object.defineProperty(o,c,L),L},v=this&&this.__param||function(l,o){return function(c,f){o(c,f,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;const h=n(3734),_=n(643),w=n(511),k=n(2585);class g extends h.AttributeData{constructor(o,c,f){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=c,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=g;let s=r.CharacterJoinerService=class Zi{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(o){const c={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(c),c.id}deregister(o){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===o)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(o);if(!c||c.length===0)return[];const f=[],S=c.translateToString(!0);let C=0,L=0,y=0,E=c.getFg(0),A=c.getBg(0);for(let T=0;T<c.getTrimmedLength();T++)if(c.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==A){if(T-C>1){const O=this._getJoinedRanges(S,y,L,c,C);for(let R=0;R<O.length;R++)f.push(O[R])}C=T,y=L,E=this._workCell.fg,A=this._workCell.bg}L+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const T=this._getJoinedRanges(S,y,L,c,C);for(let O=0;O<T.length;O++)f.push(T[O])}return f}_getJoinedRanges(o,c,f,S,C){const L=o.substring(c,f);let y=[];try{y=this._characterJoiners[0].handler(L)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const A=this._characterJoiners[E].handler(L);for(let T=0;T<A.length;T++)Zi._mergeRanges(y,A[T])}catch(A){console.error(A)}return this._stringRangesToCellRanges(y,S,C),y}_stringRangesToCellRanges(o,c,f){let S=0,C=!1,L=0,y=o[S];if(y){for(let E=f;E<this._bufferService.cols;E++){const A=c.getWidth(E),T=c.getString(E).length||_.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!C&&y[0]<=L&&(y[0]=E,C=!0),y[1]<=L){if(y[1]=E,y=o[++S],!y)break;y[0]<=L?(y[0]=E,C=!0):C=!1}L+=T}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(o,c){let f=!1;for(let S=0;S<o.length;S++){const C=o[S];if(f){if(c[1]<=C[0])return o[S-1][1]=c[1],o;if(c[1]<=C[1])return o[S-1][1]=Math.max(c[1],C[1]),o.splice(S,1),o;o.splice(S,1),S--}else{if(c[1]<=C[0])return o.splice(S,0,c),o;if(c[1]<=C[1])return C[0]=Math.min(c[0],C[0]),o;c[0]<C[1]&&(C[0]=Math.min(c[0],C[0]),f=!0)}}return f?o[o.length-1][1]=c[1]:o.push(c),o}};r.CharacterJoinerService=s=d([v(0,k.IBufferService)],s)},5114:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0;const d=n(844),v=n(8460),h=n(3656);class _ extends d.Disposable{constructor(g,s,l){super(),this._textarea=g,this._window=s,this.mainDocument=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(o=>this._screenDprMonitor.setWindow(o))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}r.CoreBrowserService=_;class w extends d.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new d.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,d.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)==null||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkProviderService=void 0;const d=n(844);class v extends d.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,d.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const w=this.linkProviders.indexOf(_);w!==-1&&this.linkProviders.splice(w,1)}}}}r.LinkProviderService=v},8934:function(m,r,n){var d=this&&this.__decorate||function(k,g,s,l){var o,c=arguments.length,f=c<3?g:l===null?l=Object.getOwnPropertyDescriptor(g,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(k,g,s,l);else for(var S=k.length-1;S>=0;S--)(o=k[S])&&(f=(c<3?o(f):c>3?o(g,s,f):o(g,s))||f);return c>3&&f&&Object.defineProperty(g,s,f),f},v=this&&this.__param||function(k,g){return function(s,l){g(s,l,k)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;const h=n(4725),_=n(9806);let w=r.MouseService=class{constructor(k,g){this._renderService=k,this._charSizeService=g}getCoords(k,g,s,l,o){return(0,_.getCoords)(window,k,g,s,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(k,g){const s=(0,_.getCoordsRelativeToElement)(window,k,g);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};r.MouseService=w=d([v(0,h.IRenderService),v(1,h.ICharSizeService)],w)},3230:function(m,r,n){var d=this&&this.__decorate||function(o,c,f,S){var C,L=arguments.length,y=L<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,c,f,S);else for(var E=o.length-1;E>=0;E--)(C=o[E])&&(y=(L<3?C(y):L>3?C(c,f,y):C(c,f))||y);return L>3&&y&&Object.defineProperty(c,f,y),y},v=this&&this.__param||function(o,c){return function(f,S){c(f,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;const h=n(6193),_=n(4725),w=n(8460),k=n(844),g=n(7226),s=n(2585);let l=r.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(o,c,f,S,C,L,y,E){super(),this._rowCount=o,this._charSizeService=S,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((A,T)=>this._renderRows(A,T),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(L.onResize(()=>this._fullRefresh())),this.register(L.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)==null?void 0:A.clear()})),this.register(f.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(f.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()})),this.register(f.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(L.buffer.y,L.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,c),this.register(y.onWindowChange(A=>this._registerIntersectionObserver(A,c)))}_registerIntersectionObserver(o,c){if("IntersectionObserver"in o){const f=new o.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});f.observe(c),this._observerDisposable.value=(0,k.toDisposable)(()=>f.disconnect())}}_handleIntersectionChange(o){this._isPaused=o.isIntersecting===void 0?o.intersectionRatio===0:!o.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(o,c,f=!1){this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(o,c,this._rowCount))}_renderRows(o,c){this._renderer.value&&(o=Math.min(o,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(o,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:o,end:c}),this._onRender.fire({start:o,end:c}),this._isNextRenderRedrawOnly=!0)}resize(o,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(o){this._renderer.value=o,this._renderer.value&&(this._renderer.value.onRequestRedraw(c=>this.refreshRows(c.start,c.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(o){return this._renderDebouncer.addRefreshCallback(o)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var o,c;this._renderer.value&&((c=(o=this._renderer.value).clearTextureAtlas)==null||c.call(o),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(o,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var f;return(f=this._renderer.value)==null?void 0:f.handleResize(o,c)}):this._renderer.value.handleResize(o,c),this._fullRefresh())}handleCharSizeChanged(){var o;(o=this._renderer.value)==null||o.handleCharSizeChanged()}handleBlur(){var o;(o=this._renderer.value)==null||o.handleBlur()}handleFocus(){var o;(o=this._renderer.value)==null||o.handleFocus()}handleSelectionChanged(o,c,f){var S;this._selectionState.start=o,this._selectionState.end=c,this._selectionState.columnSelectMode=f,(S=this._renderer.value)==null||S.handleSelectionChanged(o,c,f)}handleCursorMove(){var o;(o=this._renderer.value)==null||o.handleCursorMove()}clear(){var o;(o=this._renderer.value)==null||o.clear()}};r.RenderService=l=d([v(2,s.IOptionsService),v(3,_.ICharSizeService),v(4,s.IDecorationService),v(5,s.IBufferService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],l)},9312:function(m,r,n){var d=this&&this.__decorate||function(y,E,A,T){var O,R=arguments.length,j=R<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,A):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(y,E,A,T);else for(var K=y.length-1;K>=0;K--)(O=y[K])&&(j=(R<3?O(j):R>3?O(E,A,j):O(E,A))||j);return R>3&&j&&Object.defineProperty(E,A,j),j},v=this&&this.__param||function(y,E){return function(A,T){E(A,T,y)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;const h=n(9806),_=n(9504),w=n(456),k=n(4725),g=n(8460),s=n(844),l=n(6114),o=n(4841),c=n(511),f=n(2585),S=" ",C=new RegExp(S,"g");let L=r.SelectionService=class extends s.Disposable{constructor(y,E,A,T,O,R,j,K,X){super(),this._element=y,this._screenElement=E,this._linkifier=A,this._bufferService=T,this._coreService=O,this._mouseService=R,this._optionsService=j,this._renderService=K,this._coreBrowserService=X,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Y=>this._handleTrim(Y)),this.register(this._bufferService.buffers.onBufferActivate(Y=>this._handleBufferActivate(Y))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!y||!E||y[0]===E[0]&&y[1]===E[1])}get selectionText(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!y||!E)return"";const A=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(y[0]===E[0])return"";const O=y[0]<E[0]?y[0]:E[0],R=y[0]<E[0]?E[0]:y[0];for(let j=y[1];j<=E[1];j++){const K=A.translateBufferLineToString(j,!0,O,R);T.push(K)}}else{const O=y[1]===E[1]?E[0]:void 0;T.push(A.translateBufferLineToString(y[1],!0,y[0],O));for(let R=y[1]+1;R<=E[1]-1;R++){const j=A.lines.get(R),K=A.translateBufferLineToString(R,!0);j!=null&&j.isWrapped?T[T.length-1]+=K:T.push(K)}if(y[1]!==E[1]){const R=A.lines.get(E[1]),j=A.translateBufferLineToString(E[1],!0,0,E[0]);R&&R.isWrapped?T[T.length-1]+=j:T.push(j)}}return T.map(O=>O.replace(C," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const E=this._getMouseBufferCoords(y),A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(A&&T&&E)&&this._areCoordsInSelection(E,A,T)}isCellInSelection(y,E){const A=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!A||!T)&&this._areCoordsInSelection([y,E],A,T)}_areCoordsInSelection(y,E,A){return y[1]>E[1]&&y[1]<A[1]||E[1]===A[1]&&y[1]===E[1]&&y[0]>=E[0]&&y[0]<A[0]||E[1]<A[1]&&y[1]===A[1]&&y[0]<A[0]||E[1]<A[1]&&y[1]===E[1]&&y[0]>=E[0]}_selectWordAtCursor(y,E){var O,R;const A=(R=(O=this._linkifier.currentLink)==null?void 0:O.link)==null?void 0:R.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(y);return!!T&&(this._selectWordAt(T,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,E){this._model.clearSelection(),y=Math.max(y,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const E=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(y){let E=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const A=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=A?0:(E>A&&(E-=A),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(y){return l.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const E=this._getMouseBufferCoords(y);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(y){return y.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){const T=A.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const E=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const A=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){const T=(0,_.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,A=!(!y||!E||y[0]===E[0]&&y[1]===E[1]);A?y&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,E,A)):this._oldHasSelection&&this._fireOnSelectionChange(y,E,A)}_fireOnSelectionChange(y,E,A){this._oldSelectionStart=y,this._oldSelectionEnd=E,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(y,E){let A=E;for(let T=0;E>=T;T++){const O=y.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:O>1&&E!==T&&(A+=O-1)}return A}setSelection(y,E,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,E],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,E,A=!0,T=!0){if(y[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,R=O.lines.get(y[1]);if(!R)return;const j=O.translateBufferLineToString(y[1],!1);let K=this._convertViewportColToCharacterIndex(R,y[0]),X=K;const Y=y[0]-K;let Z=0,M=0,P=0,H=0;if(j.charAt(K)===" "){for(;K>0&&j.charAt(K-1)===" ";)K--;for(;X<j.length&&j.charAt(X+1)===" ";)X++}else{let J=y[0],$=y[0];R.getWidth(J)===0&&(Z++,J--),R.getWidth($)===2&&(M++,$++);const ne=R.getString($).length;for(ne>1&&(H+=ne-1,X+=ne-1);J>0&&K>0&&!this._isCharWordSeparator(R.loadCell(J-1,this._workCell));){R.loadCell(J-1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===0?(Z++,J--):F>1&&(P+=F-1,K-=F-1),K--,J--}for(;$<R.length&&X+1<j.length&&!this._isCharWordSeparator(R.loadCell($+1,this._workCell));){R.loadCell($+1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,$++):F>1&&(H+=F-1,X+=F-1),X++,$++}}X++;let I=K+Y-Z+P,U=Math.min(this._bufferService.cols,X-K+Z+M-P-H);if(E||j.slice(K,X).trim()!==""){if(A&&I===0&&R.getCodePoint(0)!==32){const J=O.lines.get(y[1]-1);if(J&&R.isWrapped&&J.getCodePoint(this._bufferService.cols-1)!==32){const $=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if($){const ne=this._bufferService.cols-$.start;I-=ne,U+=ne}}}if(T&&I+U===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){const J=O.lines.get(y[1]+1);if(J!=null&&J.isWrapped&&J.getCodePoint(0)!==32){const $=this._getWordAt([0,y[1]+1],!1,!1,!0);$&&(U+=$.length)}}return{start:I,length:U}}}_selectWordAt(y,E){const A=this._getWordAt(y,E);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[A.start,y[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(y){const E=this._getWordAt(y,!0);if(E){let A=y[1];for(;E.start<0;)E.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,A]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const E=this._bufferService.buffer.getWrappedRangeForLine(y),A={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(A,this._bufferService.cols)}};r.SelectionService=L=d([v(3,f.IBufferService),v(4,f.ICoreService),v(5,k.IMouseService),v(6,f.IOptionsService),v(7,k.IRenderService),v(8,k.ICoreBrowserService)],L)},4725:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ILinkProviderService=r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;const d=n(8343);r.ICharSizeService=(0,d.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),r.IMouseService=(0,d.createDecorator)("MouseService"),r.IRenderService=(0,d.createDecorator)("RenderService"),r.ISelectionService=(0,d.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,d.createDecorator)("ThemeService"),r.ILinkProviderService=(0,d.createDecorator)("LinkProviderService")},6731:function(m,r,n){var d=this&&this.__decorate||function(L,y,E,A){var T,O=arguments.length,R=O<3?y:A===null?A=Object.getOwnPropertyDescriptor(y,E):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(L,y,E,A);else for(var j=L.length-1;j>=0;j--)(T=L[j])&&(R=(O<3?T(R):O>3?T(y,E,R):T(y,E))||R);return O>3&&R&&Object.defineProperty(y,E,R),R},v=this&&this.__param||function(L,y){return function(E,A){y(E,A,L)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;const h=n(7239),_=n(8055),w=n(8460),k=n(844),g=n(2585),s=_.css.toColor("#ffffff"),l=_.css.toColor("#000000"),o=_.css.toColor("#ffffff"),c=_.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let E=0;E<216;E++){const A=y[E/36%6|0],T=y[E/6%6|0],O=y[E%6];L.push({css:_.channels.toCss(A,T,O),rgba:_.channels.toRgba(A,T,O)})}for(let E=0;E<24;E++){const A=8+10*E;L.push({css:_.channels.toCss(A,A,A),rgba:_.channels.toRgba(A,A,A)})}return L})());let S=r.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:l,cursor:o,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:_.color.blend(l,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:_.color.blend(l,f),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const y=this._colors;if(y.foreground=C(L.foreground,s),y.background=C(L.background,l),y.cursor=C(L.cursor,o),y.cursorAccent=C(L.cursorAccent,c),y.selectionBackgroundTransparent=C(L.selectionBackground,f),y.selectionBackgroundOpaque=_.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=C(L.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=_.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=L.selectionForeground?C(L.selectionForeground,_.NULL_COLOR):void 0,y.selectionForeground===_.NULL_COLOR&&(y.selectionForeground=void 0),_.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=_.color.opacity(y.selectionBackgroundTransparent,.3)),_.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=_.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=r.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=C(L.black,r.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=C(L.red,r.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=C(L.green,r.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=C(L.yellow,r.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=C(L.blue,r.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=C(L.magenta,r.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=C(L.cyan,r.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=C(L.white,r.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=C(L.brightBlack,r.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=C(L.brightRed,r.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=C(L.brightGreen,r.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=C(L.brightYellow,r.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=C(L.brightBlue,r.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=C(L.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=C(L.brightCyan,r.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=C(L.brightWhite,r.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const E=Math.min(y.ansi.length-16,L.extendedAnsi.length);for(let A=0;A<E;A++)y.ansi[A+16]=C(L.extendedAnsi[A],r.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(L,y){if(L!==void 0)try{return _.css.toColor(L)}catch{}return y}r.ThemeService=S=d([v(0,g.IOptionsService)],S)},6349:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;const d=n(8460),v=n(844);class h extends v.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const k=new Array(w);for(let g=0;g<Math.min(w,this.length);g++)k[g]=this._array[this._getCyclicIndex(g)];this._array=k,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let k=this._length;k<w;k++)this._array[k]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,k){this._array[this._getCyclicIndex(w)]=k}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,k,...g){if(k){for(let s=w;s<this._length-k;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+k)];this._length-=k,this.onDeleteEmitter.fire({index:w,amount:k})}for(let s=this._length-1;s>=w;s--)this._array[this._getCyclicIndex(s+g.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<g.length;s++)this._array[this._getCyclicIndex(w+s)]=g[s];if(g.length&&this.onInsertEmitter.fire({index:w,amount:g.length}),this._length+g.length>this._maxLength){const s=this._length+g.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=g.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,k,g){if(!(k<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let l=k-1;l>=0;l--)this.set(w+l+g,this.get(w+l));const s=w+k+g-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<k;s++)this.set(w+s+g,this.get(w+s))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}r.CircularList=h},1439:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function n(d,v=5){if(typeof d!="object")return d;const h=Array.isArray(d)?[]:{};for(const _ in d)h[_]=v<=1?d[_]:d[_]&&n(d[_],v-1);return h}},8055:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let n=0,d=0,v=0,h=0;var _,w,k,g,s;function l(c){const f=c.toString(16);return f.length<2?"0"+f:f}function o(c,f){return c<f?(f+.05)/(c+.05):(c+.05)/(f+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(f,S,C,L){return L!==void 0?`#${l(f)}${l(S)}${l(C)}${l(L)}`:`#${l(f)}${l(S)}${l(C)}`},c.toRgba=function(f,S,C,L=255){return(f<<24|S<<16|C<<8|L)>>>0},c.toColor=function(f,S,C,L){return{css:c.toCss(f,S,C,L),rgba:c.toRgba(f,S,C,L)}}}(_||(r.channels=_={})),function(c){function f(S,C){return h=Math.round(255*C),[n,d,v]=s.toChannels(S.rgba),{css:_.toCss(n,d,v,h),rgba:_.toRgba(n,d,v,h)}}c.blend=function(S,C){if(h=(255&C.rgba)/255,h===1)return{css:C.css,rgba:C.rgba};const L=C.rgba>>24&255,y=C.rgba>>16&255,E=C.rgba>>8&255,A=S.rgba>>24&255,T=S.rgba>>16&255,O=S.rgba>>8&255;return n=A+Math.round((L-A)*h),d=T+Math.round((y-T)*h),v=O+Math.round((E-O)*h),{css:_.toCss(n,d,v),rgba:_.toRgba(n,d,v)}},c.isOpaque=function(S){return(255&S.rgba)==255},c.ensureContrastRatio=function(S,C,L){const y=s.ensureContrastRatio(S.rgba,C.rgba,L);if(y)return _.toColor(y>>24&255,y>>16&255,y>>8&255)},c.opaque=function(S){const C=(255|S.rgba)>>>0;return[n,d,v]=s.toChannels(C),{css:_.toCss(n,d,v),rgba:C}},c.opacity=f,c.multiplyOpacity=function(S,C){return h=255&S.rgba,f(S,h*C/255)},c.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(w||(r.color=w={})),function(c){let f,S;try{const C=document.createElement("canvas");C.width=1,C.height=1;const L=C.getContext("2d",{willReadFrequently:!0});L&&(f=L,f.globalCompositeOperation="copy",S=f.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return n=parseInt(C.slice(1,2).repeat(2),16),d=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),_.toColor(n,d,v);case 5:return n=parseInt(C.slice(1,2).repeat(2),16),d=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),h=parseInt(C.slice(4,5).repeat(2),16),_.toColor(n,d,v,h);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const L=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return n=parseInt(L[1]),d=parseInt(L[2]),v=parseInt(L[3]),h=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),_.toColor(n,d,v,h);if(!f||!S)throw new Error("css.toColor: Unsupported css format");if(f.fillStyle=S,f.fillStyle=C,typeof f.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(f.fillRect(0,0,1,1),[n,d,v,h]=f.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(n,d,v,h),css:C}}}(k||(r.css=k={})),function(c){function f(S,C,L){const y=S/255,E=C/255,A=L/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}c.relativeLuminance=function(S){return f(S>>16&255,S>>8&255,255&S)},c.relativeLuminance2=f}(g||(r.rgb=g={})),function(c){function f(C,L,y){const E=C>>24&255,A=C>>16&255,T=C>>8&255;let O=L>>24&255,R=L>>16&255,j=L>>8&255,K=o(g.relativeLuminance2(O,R,j),g.relativeLuminance2(E,A,T));for(;K<y&&(O>0||R>0||j>0);)O-=Math.max(0,Math.ceil(.1*O)),R-=Math.max(0,Math.ceil(.1*R)),j-=Math.max(0,Math.ceil(.1*j)),K=o(g.relativeLuminance2(O,R,j),g.relativeLuminance2(E,A,T));return(O<<24|R<<16|j<<8|255)>>>0}function S(C,L,y){const E=C>>24&255,A=C>>16&255,T=C>>8&255;let O=L>>24&255,R=L>>16&255,j=L>>8&255,K=o(g.relativeLuminance2(O,R,j),g.relativeLuminance2(E,A,T));for(;K<y&&(O<255||R<255||j<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),R=Math.min(255,R+Math.ceil(.1*(255-R))),j=Math.min(255,j+Math.ceil(.1*(255-j))),K=o(g.relativeLuminance2(O,R,j),g.relativeLuminance2(E,A,T));return(O<<24|R<<16|j<<8|255)>>>0}c.blend=function(C,L){if(h=(255&L)/255,h===1)return L;const y=L>>24&255,E=L>>16&255,A=L>>8&255,T=C>>24&255,O=C>>16&255,R=C>>8&255;return n=T+Math.round((y-T)*h),d=O+Math.round((E-O)*h),v=R+Math.round((A-R)*h),_.toRgba(n,d,v)},c.ensureContrastRatio=function(C,L,y){const E=g.relativeLuminance(C>>8),A=g.relativeLuminance(L>>8);if(o(E,A)<y){if(A<E){const R=f(C,L,y),j=o(E,g.relativeLuminance(R>>8));if(j<y){const K=S(C,L,y);return j>o(E,g.relativeLuminance(K>>8))?R:K}return R}const T=S(C,L,y),O=o(E,g.relativeLuminance(T>>8));if(O<y){const R=f(C,L,y);return O>o(E,g.relativeLuminance(R>>8))?T:R}return T}},c.reduceLuminance=f,c.increaseLuminance=S,c.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(s||(r.rgba=s={})),r.toPaddedHex=l,r.contrastRatio=o},8969:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;const d=n(844),v=n(2585),h=n(4348),_=n(7866),w=n(744),k=n(7302),g=n(6975),s=n(8460),l=n(1753),o=n(1480),c=n(7994),f=n(9282),S=n(5435),C=n(5981),L=n(2660);let y=!1;class E extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(T=>{var O;(O=this._onScrollApi)==null||O.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(const O in T)this.optionsService.options[O]=T[O]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new k.OptionsService(T)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((O,R)=>this._inputHandler.parse(O,R))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,O){this._writeBuffer.write(T,O)}writeSync(T,O){this._logService.logLevel<=v.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(T,O)}input(T,O=!0){this.coreService.triggerDataEvent(T,O)}resize(T,O){isNaN(T)||isNaN(O)||(T=Math.max(T,w.MINIMUM_COLS),O=Math.max(O,w.MINIMUM_ROWS),this._bufferService.resize(T,O))}scroll(T,O=!1){this._bufferService.scroll(T,O)}scrollLines(T,O,R){this._bufferService.scrollLines(T,O,R)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){const O=T-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(T,O){return this._inputHandler.registerEscHandler(T,O)}registerDcsHandler(T,O){return this._inputHandler.registerDcsHandler(T,O)}registerCsiHandler(T,O){return this._inputHandler.registerCsiHandler(T,O)}registerOscHandler(T,O){return this._inputHandler.registerOscHandler(T,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?T=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const T=[];T.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const O of T)O.dispose()})}}}r.CoreTerminal=E},8460:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.runAndSubscribe=r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===n)return void this._listeners.splice(d,1)}}})),this._event}fire(n,d){const v=[];for(let h=0;h<this._listeners.length;h++)v.push(this._listeners[h]);for(let h=0;h<v.length;h++)v[h].call(void 0,n,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(n,d){return n(v=>d.fire(v))},r.runAndSubscribe=function(n,d){return d(void 0),n(v=>d(v))}},5435:function(m,r,n){var d=this&&this.__decorate||function(Z,M,P,H){var I,U=arguments.length,J=U<3?M:H===null?H=Object.getOwnPropertyDescriptor(M,P):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(Z,M,P,H);else for(var $=Z.length-1;$>=0;$--)(I=Z[$])&&(J=(U<3?I(J):U>3?I(M,P,J):I(M,P))||J);return U>3&&J&&Object.defineProperty(M,P,J),J},v=this&&this.__param||function(Z,M){return function(P,H){M(P,H,Z)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;const h=n(2584),_=n(7116),w=n(2015),k=n(844),g=n(482),s=n(8437),l=n(8460),o=n(643),c=n(511),f=n(3734),S=n(2585),C=n(1480),L=n(6242),y=n(6351),E=n(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function O(Z,M){if(Z>24)return M.setWinLines||!1;switch(Z){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var R;(function(Z){Z[Z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Z[Z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(r.WindowsOptionsReportType=R={}));let j=0;class K extends k.Disposable{getAttrData(){return this._curAttrData}constructor(M,P,H,I,U,J,$,ne,F=new w.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=P,this._coreService=H,this._logService=I,this._optionsService=U,this._oscLinkService=J,this._coreMouseService=$,this._unicodeService=ne,this._parser=F,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new X(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:N.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,N,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:N,data:z})}),this._parser.setDcsHandlerFallback((D,N,z)=>{N==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:N,payload:z})}),this._parser.setPrintHandler((D,N,z)=>this.print(D,N,z)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new L.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new L.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new L.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new L.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new L.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new L.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new L.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new L.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new L.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new L.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new L.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new L.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((D,N)=>this.requestStatusString(D,N)))}_preserveStack(M,P,H,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=H,this._parseStack.position=I}_logSlowResolvingAsync(M){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([M,new Promise((P,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,P){let H,I=this._activeBuffer.x,U=this._activeBuffer.y,J=0;const $=this._parseStack.paused;if($){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(H),H;I=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>T&&(J=this._parseStack.position+T)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,D=>String.fromCharCode(D)).join("")}"`),typeof M=="string"?M.split("").map(D=>D.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(M.length,T))),$||this._dirtyRowTracker.clearRange(),M.length>T)for(let D=J;D<M.length;D+=T){const N=D+T<M.length?D+T:M.length,z=typeof M=="string"?this._stringDecoder.decode(M.substring(D,N),this._parseBuffer):this._utf8Decoder.decode(M.subarray(D,N),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,z))return this._preserveStack(I,U,z,D),this._logSlowResolvingAsync(H),H}else if(!$){const D=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,D))return this._preserveStack(I,U,D,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===I&&this._activeBuffer.y===U||this._onCursorMove.fire();const ne=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),F=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);F<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(F,this._bufferService.rows-1),Math.min(ne,this._bufferService.rows-1))}print(M,P,H){let I,U;const J=this._charsetService.charset,$=this._optionsService.rawOptions.screenReaderMode,ne=this._bufferService.cols,F=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,N=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-P>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodepoint(this._activeBuffer.x-1,0,1,N);let Q=this._parser.precedingJoinState;for(let te=P;te<H;++te){if(I=M[te],I<127&&J){const ce=J[String.fromCharCode(I)];ce&&(I=ce.charCodeAt(0))}const q=this._unicodeService.charProperties(I,Q);U=C.UnicodeService.extractWidth(q);const oe=C.UnicodeService.extractShouldJoin(q),ee=oe?C.UnicodeService.extractWidth(Q):0;if(Q=q,$&&this._onA11yChar.fire((0,g.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+U-ee>ne){if(F){const ce=z;let le=this._activeBuffer.x-ee;for(this._activeBuffer.x=ee,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ee>0&&z instanceof s.BufferLine&&z.copyCellsFrom(ce,le,0,ee,!1);le<ne;)ce.setCellFromCodepoint(le++,0,1,N)}else if(this._activeBuffer.x=ne-1,U===2)continue}if(oe&&this._activeBuffer.x){const ce=z.getWidth(this._activeBuffer.x-1)?1:2;z.addCodepointToCell(this._activeBuffer.x-ce,I,U);for(let le=U-ee;--le>=0;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,N)}else if(D&&(z.insertCells(this._activeBuffer.x,U-ee,this._activeBuffer.getNullCell(N)),z.getWidth(ne-1)===2&&z.setCellFromCodepoint(ne-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,N)),z.setCellFromCodepoint(this._activeBuffer.x++,I,U,N),U>0)for(;--U;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,N)}this._parser.precedingJoinState=Q,this._activeBuffer.x<ne&&H-P>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodepoint(this._activeBuffer.x,0,1,N),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,P){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,P):this._parser.registerCsiHandler(M,H=>!O(H.params[0],this._optionsService.rawOptions.windowOptions)||P(H))}registerDcsHandler(M,P){return this._parser.registerDcsHandler(M,new y.DcsHandler(P))}registerEscHandler(M,P){return this._parser.registerEscHandler(M,P)}registerOscHandler(M,P){return this._parser.registerOscHandler(M,new L.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=M,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+P)}cursorUp(M){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const P=M.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=M.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=M.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const P=M.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,P,H,I=!1,U=!1){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);J.replaceCells(P,H,this._activeBuffer.getNullCell(this._eraseAttrData()),U),I&&(J.isWrapped=!1)}_resetBufferLine(M,P=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),H.isWrapped=!1)}eraseInDisplay(M,P=!1){let H;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);H<this._bufferService.rows;H++)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(M,P=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let P=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;P--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let P=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;P--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let P=M.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let P=M.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=M.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);I.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const P=this._parser.precedingJoinState;if(!P)return!0;const H=M.params[0]||1,I=C.UnicodeService.extractWidth(P),U=this._activeBuffer.x-I,J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(U),$=new Uint32Array(J.length*H);let ne=0;for(let D=0;D<J.length;){const N=J.codePointAt(D)||0;$[ne++]=N,D+=N>65535?2:1}let F=ne;for(let D=1;D<H;++D)$.copyWithin(F,0,ne),F+=ne;return this.print($,0,F),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let P=0;P<M.length;P++)switch(M.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,P){const H=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:U}=this._coreMouseService,J=this._coreService,{buffers:$,cols:ne}=this._bufferService,{active:F,alt:D}=$,N=this._optionsService.rawOptions,z=oe=>oe?1:2,Q=M.params[0];return te=Q,q=P?Q===2?4:Q===4?z(J.modes.insertMode):Q===12?3:Q===20?z(N.convertEol):0:Q===1?z(H.applicationCursorKeys):Q===3?N.windowOptions.setWinLines?ne===80?2:ne===132?1:0:0:Q===6?z(H.origin):Q===7?z(H.wraparound):Q===8?3:Q===9?z(I==="X10"):Q===12?z(N.cursorBlink):Q===25?z(!J.isCursorHidden):Q===45?z(H.reverseWraparound):Q===66?z(H.applicationKeypad):Q===67?4:Q===1e3?z(I==="VT200"):Q===1002?z(I==="DRAG"):Q===1003?z(I==="ANY"):Q===1004?z(H.sendFocus):Q===1005?4:Q===1006?z(U==="SGR"):Q===1015?4:Q===1016?z(U==="SGR_PIXELS"):Q===1048?1:Q===47||Q===1047||Q===1049?z(F===D):Q===2004?z(H.bracketedPasteMode):0,J.triggerDataEvent(`${h.C0.ESC}[${P?"":"?"}${te};${q}$y`),!0;var te,q}_updateAttrColor(M,P,H,I,U){return P===2?(M|=50331648,M&=-16777216,M|=f.AttributeData.fromColorRGB([H,I,U])):P===5&&(M&=-50331904,M|=33554432|255&H),M}_extractColor(M,P,H){const I=[0,0,-1,0,0,0];let U=0,J=0;do{if(I[J+U]=M.params[P+J],M.hasSubParams(P+J)){const $=M.getSubParams(P+J);let ne=0;do I[1]===5&&(U=1),I[J+ne+1+U]=$[ne];while(++ne<$.length&&ne+J+1+U<I.length);break}if(I[1]===5&&J+U>=2||I[1]===2&&J+U>=5)break;I[1]&&(U=1)}while(++J+P<M.length&&J+U<I.length);for(let $=2;$<I.length;++$)I[$]===-1&&(I[$]=0);switch(I[0]){case 38:H.fg=this._updateAttrColor(H.fg,I[1],I[3],I[4],I[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,I[1],I[3],I[4],I[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,I[1],I[3],I[4],I[5])}return J}_processUnderline(M,P){P.extended=P.extended.clone(),(!~M||M>5)&&(M=1),P.extended.underlineStyle=M,P.fg|=268435456,M===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(M){M.fg=s.DEFAULT_ATTR_DATA.fg,M.bg=s.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=M.length;let H;const I=this._curAttrData;for(let U=0;U<P;U++)H=M.params[U],H>=30&&H<=37?(I.fg&=-50331904,I.fg|=16777216|H-30):H>=40&&H<=47?(I.bg&=-50331904,I.bg|=16777216|H-40):H>=90&&H<=97?(I.fg&=-50331904,I.fg|=16777224|H-90):H>=100&&H<=107?(I.bg&=-50331904,I.bg|=16777224|H-100):H===0?this._processSGR0(I):H===1?I.fg|=134217728:H===3?I.bg|=67108864:H===4?(I.fg|=268435456,this._processUnderline(M.hasSubParams(U)?M.getSubParams(U)[0]:1,I)):H===5?I.fg|=536870912:H===7?I.fg|=67108864:H===8?I.fg|=1073741824:H===9?I.fg|=2147483648:H===2?I.bg|=134217728:H===21?this._processUnderline(2,I):H===22?(I.fg&=-134217729,I.bg&=-134217729):H===23?I.bg&=-67108865:H===24?(I.fg&=-268435457,this._processUnderline(0,I)):H===25?I.fg&=-536870913:H===27?I.fg&=-67108865:H===28?I.fg&=-1073741825:H===29?I.fg&=2147483647:H===39?(I.fg&=-67108864,I.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):H===49?(I.bg&=-67108864,I.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?U+=this._extractColor(M,U,I):H===53?I.bg|=1073741824:H===55?I.bg&=-1073741825:H===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):H===100?(I.fg&=-67108864,I.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${P};${H}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const P=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${P};${H}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const P=M.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=P%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion(M){const P=M.params[0]||1;let H;return(M.length<2||(H=M.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions(M){if(!O(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const P=[],H=M.split(";");for(;H.length>1;){const I=H.shift(),U=H.shift();if(/^\d+$/.exec(I)){const J=parseInt(I);if(Y(J))if(U==="?")P.push({type:0,index:J});else{const $=(0,E.parseColor)(U);$&&P.push({type:1,index:J,color:$})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(M){const P=M.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(M,P){this._getCurrentLinkId()&&this._finishHyperlink();const H=M.split(":");let I;const U=H.findIndex(J=>J.startsWith("id="));return U!==-1&&(I=H[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,P){const H=M.split(";");for(let I=0;I<H.length&&!(P>=this._specialColors.length);++I,++P)if(H[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const U=(0,E.parseColor)(H[I]);U&&this._onColor.fire([{type:1,index:this._specialColors[P],color:U}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const P=[],H=M.split(";");for(let I=0;I<H.length;++I)if(/^\d+$/.exec(H[I])){const U=parseInt(H[I]);Y(U)&&P.push({type:2,index:U})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(A[M[0]],_.CHARSETS[M[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new c.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const H=this._activeBuffer.ybase+this._activeBuffer.y+P,I=this._activeBuffer.lines.get(H);I&&(I.fill(M),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,P){const H=this._bufferService.buffer,I=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${U}${h.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,P){this._dirtyRowTracker.markRangeDirty(M,P)}}r.InputHandler=K;let X=class{constructor(Z){this._bufferService=Z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Z){Z<this.start?this.start=Z:Z>this.end&&(this.end=Z)}markRangeDirty(Z,M){Z>M&&(j=Z,Z=M,M=j),Z<this.start&&(this.start=Z),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(Z){return 0<=Z&&Z<256}X=d([v(0,S.IBufferService)],X)},844:(m,r)=>{function n(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var v;this._isDisposed||d===this._value||((v=this._value)==null||v.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)==null||d.dispose(),this._value=void 0}},r.toDisposable=function(d){return{dispose:d}},r.disposeArray=n,r.getDisposeArrayDisposable=function(d){return{dispose:()=>n(d)}}},1505:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(v,h,_){this._data[v]||(this._data[v]={}),this._data[v][h]=_}get(v,h){return this._data[v]?this._data[v][h]:void 0}clear(){this._data={}}}r.TwoKeyMap=n,r.FourKeyMap=class{constructor(){this._data=new n}set(d,v,h,_,w){this._data.get(d,v)||this._data.set(d,v,new n),this._data.get(d,v).set(h,_,w)}get(d,v,h,_){var w;return(w=this._data.get(d,v))==null?void 0:w.get(h,_)}clear(){this._data.clear()}}},6114:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof process<"u"&&"title"in process;const n=r.isNode?"node":navigator.userAgent,d=r.isNode?"node":navigator.platform;r.isFirefox=n.includes("Firefox"),r.isLegacyEdge=n.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(n),r.getSafariVersion=function(){if(!r.isSafari)return 0;const v=n.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),r.isIpad=d==="iPad",r.isIphone=d==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),r.isLinux=d.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(n)},6106:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let n=0;r.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(n=this._search(this._getKey(d)),this._array.splice(n,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const v=this._getKey(d);if(v===void 0||(n=this._search(v),n===-1)||this._getKey(this._array[n])!==v)return!1;do if(this._array[n]===d)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===v);return!1}*getKeyIterator(d){if(this._array.length!==0&&(n=this._search(d),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===d))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===d)}forEachByKey(d,v){if(this._array.length!==0&&(n=this._search(d),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===d))do v(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===d)}values(){return[...this._array].values()}_search(d){let v=0,h=this._array.length-1;for(;h>=v;){let _=v+h>>1;const w=this._getKey(this._array[_]);if(w>d)h=_-1;else{if(!(w<d)){for(;_>0&&this._getKey(this._array[_-1])===d;)_--;return _}v=_+1}}return v}}},7226:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;const d=n(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let k=0,g=0,s=w.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),g=Math.max(k,g),l=w.timeRemaining(),1.5*g>l)return s-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-k))}ms`),void this._start();s=l}this.clear()}}class h extends v{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const k=Date.now()+w;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}r.PriorityTaskQueue=h,r.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:h,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;const d=n(643);r.updateWindowsModeWrappedState=function(v){const h=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),_=h==null?void 0:h.get(v.cols-1),w=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);w&&_&&(w.isWrapped=_[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&_[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new n;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}r.AttributeData=n;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,_=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=_}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=d},9092:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;const d=n(6349),v=n(7226),h=n(3734),_=n(8437),w=n(4634),k=n(511),g=n(643),s=n(4863),l=n(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(o,c,f){this._hasScrollback=o,this._optionsService=c,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,c){return new _.BufferLine(this._bufferService.cols,this.getNullCell(o),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const c=o+this._optionsService.rawOptions.scrollback;return c>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:c}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=_.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,c){const f=this.getNullCell(_.DEFAULT_ATTR_DATA);let S=0;const C=this._getCorrectBufferLength(c);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<o)for(let y=0;y<this.lines.length;y++)S+=+this.lines.get(y).resize(o,f);let L=0;if(this._rows<c)for(let y=this._rows;y<c;y++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(o,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(o,f)));else for(let y=this._rows;y>c;y--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const y=this.lines.length-C;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=C}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,c-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(o,c),this._cols>o))for(let L=0;L<this.lines.length;L++)S+=+this.lines.get(L).resize(o,f);this._cols=o,this._rows=c,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,c){this._cols!==o&&(o>this._cols?this._reflowLarger(o,c):this._reflowSmaller(o,c))}_reflowLarger(o,c){const f=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(f.length>0){const S=(0,w.reflowLargerCreateNewLayout)(this.lines,f);(0,w.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(o,c,S.countRemoved)}}_reflowLargerAdjustViewport(o,c,f){const S=this.getNullCell(_.DEFAULT_ATTR_DATA);let C=f;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new _.BufferLine(o,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(o,c){const f=this.getNullCell(_.DEFAULT_ATTR_DATA),S=[];let C=0;for(let L=this.lines.length-1;L>=0;L--){let y=this.lines.get(L);if(!y||!y.isWrapped&&y.getTrimmedLength()<=o)continue;const E=[y];for(;y.isWrapped&&L>0;)y=this.lines.get(--L),E.unshift(y);const A=this.ybase+this.y;if(A>=L&&A<L+E.length)continue;const T=E[E.length-1].getTrimmedLength(),O=(0,w.reflowSmallerGetNewLineLengths)(E,this._cols,o),R=O.length-E.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);const K=[];for(let H=0;H<R;H++){const I=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);K.push(I)}K.length>0&&(S.push({start:L+E.length+C,newLines:K}),C+=K.length),E.push(...K);let X=O.length-1,Y=O[X];Y===0&&(X--,Y=O[X]);let Z=E.length-R-1,M=T;for(;Z>=0;){const H=Math.min(M,Y);if(E[X]===void 0)break;if(E[X].copyCellsFrom(E[Z],M-H,Y-H,H,!0),Y-=H,Y===0&&(X--,Y=O[X]),M-=H,M===0){Z--;const I=Math.max(Z,0);M=(0,w.getWrappedLineTrimmedLength)(E,I,this._cols)}}for(let H=0;H<E.length;H++)O[H]<o&&E[H].setCell(O[H],f);let P=R-j;for(;P-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+c-1)}if(S.length>0){const L=[],y=[];for(let X=0;X<this.lines.length;X++)y.push(this.lines.get(X));const E=this.lines.length;let A=E-1,T=0,O=S[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let R=0;for(let X=Math.min(this.lines.maxLength-1,E+C-1);X>=0;X--)if(O&&O.start>A+R){for(let Y=O.newLines.length-1;Y>=0;Y--)this.lines.set(X--,O.newLines[Y]);X++,L.push({index:A+1,amount:O.newLines.length}),R+=O.newLines.length,O=S[++T]}else this.lines.set(X,y[A--]);let j=0;for(let X=L.length-1;X>=0;X--)L[X].index+=j,this.lines.onInsertEmitter.fire(L[X]),j+=L[X].amount;const K=Math.max(0,E+C-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}}translateBufferLineToString(o,c,f=0,S){const C=this.lines.get(o);return C?C.translateToString(c,f,S):""}getWrappedRangeForLine(o){let c=o,f=o;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:c,last:f}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===o&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const c=new s.Marker(o);return this.markers.push(c),c.register(this.lines.onTrim(f=>{c.line-=f,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(f=>{c.line>=f.index&&(c.line+=f.amount)})),c.register(this.lines.onDelete(f=>{c.line>=f.index&&c.line<f.index+f.amount&&c.dispose(),c.line>f.index&&(c.line-=f.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;const d=n(3734),v=n(511),h=n(643),_=n(482);r.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let w=0;class k{constructor(s,l,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const c=l||v.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let f=0;f<s;++f)this.setCell(f,c);this.length=s}get(s){const l=this._data[3*s+0],o=2097151&l;return[this._data[3*s+1],2097152&l?this._combined[s]:o?(0,_.stringFromCodePoint)(o):"",l>>22,2097152&l?this._combined[s].charCodeAt(this._combined[s].length-1):o]}set(s,l){this._data[3*s+1]=l[h.CHAR_DATA_ATTR_INDEX],l[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=l[1],this._data[3*s+0]=2097152|s|l[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const l=this._data[3*s+0];return 2097152&l?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&l}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const l=this._data[3*s+0];return 2097152&l?this._combined[s]:2097151&l?(0,_.stringFromCodePoint)(2097151&l):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,l){return w=3*s,l.content=this._data[w+0],l.fg=this._data[w+1],l.bg=this._data[w+2],2097152&l.content&&(l.combinedData=this._combined[s]),268435456&l.bg&&(l.extended=this._extendedAttrs[s]),l}setCell(s,l){2097152&l.content&&(this._combined[s]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[s]=l.extended),this._data[3*s+0]=l.content,this._data[3*s+1]=l.fg,this._data[3*s+2]=l.bg}setCellFromCodepoint(s,l,o,c){268435456&c.bg&&(this._extendedAttrs[s]=c.extended),this._data[3*s+0]=l|o<<22,this._data[3*s+1]=c.fg,this._data[3*s+2]=c.bg}addCodepointToCell(s,l,o){let c=this._data[3*s+0];2097152&c?this._combined[s]+=(0,_.stringFromCodePoint)(l):2097151&c?(this._combined[s]=(0,_.stringFromCodePoint)(2097151&c)+(0,_.stringFromCodePoint)(l),c&=-2097152,c|=2097152):c=l|4194304,o&&(c&=-12582913,c|=o<<22),this._data[3*s+0]=c}insertCells(s,l,o){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,o),l<this.length-s){const c=new v.CellData;for(let f=this.length-s-l-1;f>=0;--f)this.setCell(s+l+f,this.loadCell(s+f,c));for(let f=0;f<l;++f)this.setCell(s+f,o)}else for(let c=s;c<this.length;++c)this.setCell(c,o);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,o)}deleteCells(s,l,o){if(s%=this.length,l<this.length-s){const c=new v.CellData;for(let f=0;f<this.length-s-l;++f)this.setCell(s+f,this.loadCell(s+l+f,c));for(let f=this.length-l;f<this.length;++f)this.setCell(f,o)}else for(let c=s;c<this.length;++c)this.setCell(c,o);s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,o),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodepoint(s,0,1,o)}replaceCells(s,l,o,c=!1){if(c)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodepoint(s-1,0,1,o),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodepoint(l,0,1,o);s<l&&s<this.length;)this.isProtected(s)||this.setCell(s,o),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,o),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l,0,1,o);s<l&&s<this.length;)this.setCell(s++,o)}resize(s,l){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const c=new Uint32Array(o);c.set(this._data),this._data=c}for(let c=this.length;c<s;++c)this.setCell(c,l)}else{this._data=this._data.subarray(0,o);const c=Object.keys(this._combined);for(let S=0;S<c.length;S++){const C=parseInt(c[S],10);C>=s&&delete this._combined[C]}const f=Object.keys(this._extendedAttrs);for(let S=0;S<f.length;S++){const C=parseInt(f[S],10);C>=s&&delete this._extendedAttrs[C]}}return this.length=s,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,l=!1){if(l)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,s);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const l in s._combined)this._combined[l]=s._combined[l];this._extendedAttrs={};for(const l in s._extendedAttrs)this._extendedAttrs[l]=s._extendedAttrs[l];this.isWrapped=s.isWrapped}clone(){const s=new k(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const l in this._combined)s._combined[l]=this._combined[l];for(const l in this._extendedAttrs)s._extendedAttrs[l]=this._extendedAttrs[l];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,l,o,c,f){const S=s._data;if(f)for(let L=c-1;L>=0;L--){for(let y=0;y<3;y++)this._data[3*(o+L)+y]=S[3*(l+L)+y];268435456&S[3*(l+L)+2]&&(this._extendedAttrs[o+L]=s._extendedAttrs[l+L])}else for(let L=0;L<c;L++){for(let y=0;y<3;y++)this._data[3*(o+L)+y]=S[3*(l+L)+y];268435456&S[3*(l+L)+2]&&(this._extendedAttrs[o+L]=s._extendedAttrs[l+L])}const C=Object.keys(s._combined);for(let L=0;L<C.length;L++){const y=parseInt(C[L],10);y>=l&&(this._combined[y-l+o]=s._combined[y])}}translateToString(s,l,o,c){l=l??0,o=o??this.length,s&&(o=Math.min(o,this.getTrimmedLength())),c&&(c.length=0);let f="";for(;l<o;){const S=this._data[3*l+0],C=2097151&S,L=2097152&S?this._combined[l]:C?(0,_.stringFromCodePoint)(C):h.WHITESPACE_CELL_CHAR;if(f+=L,c)for(let y=0;y<L.length;++y)c.push(l);l+=S>>22||1}return c&&c.push(l),f}}r.BufferLine=k},4841:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(n,d){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return d*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(m,r)=>{function n(d,v,h){if(v===d.length-1)return d[v].getTrimmedLength();const _=!d[v].hasContent(h-1)&&d[v].getWidth(h-1)===1,w=d[v+1].getWidth(0)===2;return _&&w?h-1:h}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(d,v,h,_,w){const k=[];for(let g=0;g<d.length-1;g++){let s=g,l=d.get(++s);if(!l.isWrapped)continue;const o=[d.get(g)];for(;s<d.length&&l.isWrapped;)o.push(l),l=d.get(++s);if(_>=g&&_<s){g+=o.length-1;continue}let c=0,f=n(o,c,v),S=1,C=0;for(;S<o.length;){const y=n(o,S,v),E=y-C,A=h-f,T=Math.min(E,A);o[c].copyCellsFrom(o[S],C,f,T,!1),f+=T,f===h&&(c++,f=0),C+=T,C===y&&(S++,C=0),f===0&&c!==0&&o[c-1].getWidth(h-1)===2&&(o[c].copyCellsFrom(o[c-1],h-1,f++,1,!1),o[c-1].setCell(h-1,w))}o[c].replaceCells(f,h,w);let L=0;for(let y=o.length-1;y>0&&(y>c||o[y].getTrimmedLength()===0);y--)L++;L>0&&(k.push(g+o.length-L),k.push(L)),g+=o.length-1}return k},r.reflowLargerCreateNewLayout=function(d,v){const h=[];let _=0,w=v[_],k=0;for(let g=0;g<d.length;g++)if(w===g){const s=v[++_];d.onDeleteEmitter.fire({index:g-k,amount:s}),g+=s-1,k+=s,w=v[++_]}else h.push(g);return{layout:h,countRemoved:k}},r.reflowLargerApplyNewLayout=function(d,v){const h=[];for(let _=0;_<v.length;_++)h.push(d.get(v[_]));for(let _=0;_<h.length;_++)d.set(_,h[_]);d.length=v.length},r.reflowSmallerGetNewLineLengths=function(d,v,h){const _=[],w=d.map((l,o)=>n(d,o,v)).reduce((l,o)=>l+o);let k=0,g=0,s=0;for(;s<w;){if(w-s<h){_.push(w-s);break}k+=h;const l=n(d,g,v);k>l&&(k-=l,g++);const o=d[g].getWidth(k-1)===2;o&&k--;const c=o?h-1:h;_.push(c),s+=c}return _},r.getWrappedLineTrimmedLength=n},5295:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;const d=n(8460),v=n(844),h=n(9092);class _ extends v.Disposable{constructor(k,g){super(),this._optionsService=k,this._bufferService=g,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,g){this._normal.resize(k,g),this._alt.resize(k,g),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}r.BufferSet=_},511:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;const d=n(482),v=n(643),h=n(3734);class _ extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const g=new _;return g.setFromCharData(k),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(k[v.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(k[v.CHAR_DATA_CHAR_INDEX].length===2){const s=k[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const l=k[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(s-55296)+l-56320+65536|k[v.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=k[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[v.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=k[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=_},643:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;const d=n(8460),v=n(844);class h{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}r.Marker=h,h._nextId=1},7116:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},r.CHARSETS.A={"#":"£"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},r.CHARSETS.C=r.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},r.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},r.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},r.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},r.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},r.CHARSETS.E=r.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},r.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},r.CHARSETS.H=r.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},r.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(m,r)=>{var n,d,v;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(n||(r.C0=n={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(d||(r.C1=d={})),function(h){h.ST=`${n.ESC}\\`}(v||(r.C1_ESCAPED=v={}))},7399:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;const d=n(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(h,_,w,k){const g={type:0,cancel:!1,key:void 0},s=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?g.key=_?d.C0.ESC+"OA":d.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?g.key=_?d.C0.ESC+"OD":d.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?g.key=_?d.C0.ESC+"OC":d.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(g.key=_?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:g.key=h.ctrlKey?"\b":d.C0.DEL,h.altKey&&(g.key=d.C0.ESC+g.key);break;case 9:if(h.shiftKey){g.key=d.C0.ESC+"[Z";break}g.key=d.C0.HT,g.cancel=!0;break;case 13:g.key=h.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,g.cancel=!0;break;case 27:g.key=d.C0.ESC,h.altKey&&(g.key=d.C0.ESC+d.C0.ESC),g.cancel=!0;break;case 37:if(h.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"D",g.key===d.C0.ESC+"[1;3D"&&(g.key=d.C0.ESC+(w?"b":"[1;5D"))):g.key=_?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(h.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"C",g.key===d.C0.ESC+"[1;3C"&&(g.key=d.C0.ESC+(w?"f":"[1;5C"))):g.key=_?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(h.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"A",w||g.key!==d.C0.ESC+"[1;3A"||(g.key=d.C0.ESC+"[1;5A")):g.key=_?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(h.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"B",w||g.key!==d.C0.ESC+"[1;3B"||(g.key=d.C0.ESC+"[1;5B")):g.key=_?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(g.key=d.C0.ESC+"[2~");break;case 46:g.key=s?d.C0.ESC+"[3;"+(s+1)+"~":d.C0.ESC+"[3~";break;case 36:g.key=s?d.C0.ESC+"[1;"+(s+1)+"H":_?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:g.key=s?d.C0.ESC+"[1;"+(s+1)+"F":_?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:h.shiftKey?g.type=2:h.ctrlKey?g.key=d.C0.ESC+"[5;"+(s+1)+"~":g.key=d.C0.ESC+"[5~";break;case 34:h.shiftKey?g.type=3:h.ctrlKey?g.key=d.C0.ESC+"[6;"+(s+1)+"~":g.key=d.C0.ESC+"[6~";break;case 112:g.key=s?d.C0.ESC+"[1;"+(s+1)+"P":d.C0.ESC+"OP";break;case 113:g.key=s?d.C0.ESC+"[1;"+(s+1)+"Q":d.C0.ESC+"OQ";break;case 114:g.key=s?d.C0.ESC+"[1;"+(s+1)+"R":d.C0.ESC+"OR";break;case 115:g.key=s?d.C0.ESC+"[1;"+(s+1)+"S":d.C0.ESC+"OS";break;case 116:g.key=s?d.C0.ESC+"[15;"+(s+1)+"~":d.C0.ESC+"[15~";break;case 117:g.key=s?d.C0.ESC+"[17;"+(s+1)+"~":d.C0.ESC+"[17~";break;case 118:g.key=s?d.C0.ESC+"[18;"+(s+1)+"~":d.C0.ESC+"[18~";break;case 119:g.key=s?d.C0.ESC+"[19;"+(s+1)+"~":d.C0.ESC+"[19~";break;case 120:g.key=s?d.C0.ESC+"[20;"+(s+1)+"~":d.C0.ESC+"[20~";break;case 121:g.key=s?d.C0.ESC+"[21;"+(s+1)+"~":d.C0.ESC+"[21~";break;case 122:g.key=s?d.C0.ESC+"[23;"+(s+1)+"~":d.C0.ESC+"[23~";break;case 123:g.key=s?d.C0.ESC+"[24;"+(s+1)+"~":d.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(w&&!k||!h.altKey||h.metaKey)!w||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?g.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(g.key=d.C0.US),h.key==="@"&&(g.key=d.C0.NUL)):h.keyCode===65&&(g.type=1);else{const l=v[h.keyCode],o=l==null?void 0:l[h.shiftKey?1:0];if(o)g.key=d.C0.ESC+o;else if(h.keyCode>=65&&h.keyCode<=90){const c=h.ctrlKey?h.keyCode-64:h.keyCode+32;let f=String.fromCharCode(c);h.shiftKey&&(f=f.toUpperCase()),g.key=d.C0.ESC+f}else if(h.keyCode===32)g.key=d.C0.ESC+(h.ctrlKey?d.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let c=h.code.slice(3,4);h.shiftKey||(c=c.toLowerCase()),g.key=d.C0.ESC+c,g.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?g.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?g.key=d.C0.NUL:h.keyCode>=51&&h.keyCode<=55?g.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?g.key=d.C0.DEL:h.keyCode===219?g.key=d.C0.ESC:h.keyCode===220?g.key=d.C0.FS:h.keyCode===221&&(g.key=d.C0.GS)}return g}},482:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},r.utf32ToString=function(n,d=0,v=n.length){let h="";for(let _=d;_<v;++_){let w=n[_];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,d){const v=n.length;if(!v)return 0;let h=0,_=0;if(this._interim){const w=n.charCodeAt(_++);56320<=w&&w<=57343?d[h++]=1024*(this._interim-55296)+w-56320+65536:(d[h++]=this._interim,d[h++]=w),this._interim=0}for(let w=_;w<v;++w){const k=n.charCodeAt(w);if(55296<=k&&k<=56319){if(++w>=v)return this._interim=k,h;const g=n.charCodeAt(w);56320<=g&&g<=57343?d[h++]=1024*(k-55296)+g-56320+65536:(d[h++]=k,d[h++]=g)}else k!==65279&&(d[h++]=k)}return h}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,d){const v=n.length;if(!v)return 0;let h,_,w,k,g=0,s=0,l=0;if(this.interim[0]){let f=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let C,L=0;for(;(C=63&this.interim[++L])&&L<4;)S<<=6,S|=C;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=y-L;for(;l<E;){if(l>=v)return 0;if(C=n[l++],(192&C)!=128){l--,f=!0;break}this.interim[L++]=C,S<<=6,S|=63&C}f||(y===2?S<128?l--:d[g++]=S:y===3?S<2048||S>=55296&&S<=57343||S===65279||(d[g++]=S):S<65536||S>1114111||(d[g++]=S)),this.interim.fill(0)}const o=v-4;let c=l;for(;c<v;){for(;!(!(c<o)||128&(h=n[c])||128&(_=n[c+1])||128&(w=n[c+2])||128&(k=n[c+3]));)d[g++]=h,d[g++]=_,d[g++]=w,d[g++]=k,c+=4;if(h=n[c++],h<128)d[g++]=h;else if((224&h)==192){if(c>=v)return this.interim[0]=h,g;if(_=n[c++],(192&_)!=128){c--;continue}if(s=(31&h)<<6|63&_,s<128){c--;continue}d[g++]=s}else if((240&h)==224){if(c>=v)return this.interim[0]=h,g;if(_=n[c++],(192&_)!=128){c--;continue}if(c>=v)return this.interim[0]=h,this.interim[1]=_,g;if(w=n[c++],(192&w)!=128){c--;continue}if(s=(15&h)<<12|(63&_)<<6|63&w,s<2048||s>=55296&&s<=57343||s===65279)continue;d[g++]=s}else if((248&h)==240){if(c>=v)return this.interim[0]=h,g;if(_=n[c++],(192&_)!=128){c--;continue}if(c>=v)return this.interim[0]=h,this.interim[1]=_,g;if(w=n[c++],(192&w)!=128){c--;continue}if(c>=v)return this.interim[0]=h,this.interim[1]=_,this.interim[2]=w,g;if(k=n[c++],(192&k)!=128){c--;continue}if(s=(7&h)<<18|(63&_)<<12|(63&w)<<6|63&k,s<65536||s>1114111)continue;d[g++]=s}}return g}}},225:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;const d=n(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;r.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let w=0;w<v.length;++w)_.fill(0,v[w][0],v[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?_[w]:function(k,g){let s,l=0,o=g.length-1;if(k<g[0][0]||k>g[o][1])return!1;for(;o>=l;)if(s=l+o>>1,k>g[s][1])l=s+1;else{if(!(k<g[s][0]))return!0;o=s-1}return!1}(w,h)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,k){let g=this.wcwidth(w),s=g===0&&k!==0;if(s){const l=d.UnicodeService.extractWidth(k);l===0?s=!1:l>g&&(g=l)}return d.UnicodeService.createPropertyValue(0,g,s)}}},5981:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;const d=n(8460),v=n(844);class h extends v.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(k)}_innerWrite(w=0,k=!0){const g=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],l=this._action(s,k);if(l){const c=f=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,f)):this._innerWrite(g,f);return void l.catch(f=>(queueMicrotask(()=>{throw f}),Promise.resolve(!1))).then(c)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=h},5941:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function v(h,_){const w=h.toString(16),k=w.length<2?"0"+w:w;switch(_){case 4:return w[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}r.parseColor=function(h){if(!h)return;let _=h.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const w=n.exec(_);if(w){const k=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/k*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/k*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/k*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),d.exec(_)&&[3,6,9,12].includes(_.length))){const w=_.length/3,k=[0,0,0];for(let g=0;g<3;++g){const s=parseInt(_.slice(w*g,w*g+w),16);k[g]=w===1?s<<4:w===2?s:w===3?s>>4:s>>8}return k}},r.toRgbString=function(h,_=16){const[w,k,g]=h;return`rgb:${v(w,_)}/${v(k,_)}/${v(g,_)}`}},5770:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;const d=n(482),v=n(8742),h=n(5770),_=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(k,g){this._handlers[k]===void 0&&(this._handlers[k]=[]);const s=this._handlers[k];return s.push(g),{dispose:()=>{const l=s.indexOf(g);l!==-1&&s.splice(l,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(k,g){if(this.reset(),this._ident=k,this._active=this._handlers[k]||_,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(k,g,s){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(k,g,s);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(k,g,s))}unhook(k,g=!0){if(this._active.length){let s=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,s=g,o=this._stack.fallThrough,this._stack.paused=!1),!o&&s===!1){for(;l>=0&&(s=this._active[l].unhook(k),s!==!0);l--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,s;l--}for(;l>=0;l--)if(s=this._active[l].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",k);this._active=_,this._ident=0}};const w=new v.Params;w.addParam(0),r.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=w,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():w,this._data="",this._hitLimit=!1}put(k,g,s){this._hitLimit||(this._data+=(0,d.utf32ToString)(k,g,s),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let g=!1;if(this._hitLimit)g=!1;else if(k&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(s=>(this._params=w,this._data="",this._hitLimit=!1,s));return this._params=w,this._data="",this._hitLimit=!1,g}}},2015:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;const d=n(844),v=n(8742),h=n(6242),_=n(6351);class w{constructor(l){this.table=new Uint8Array(l)}setDefault(l,o){this.table.fill(l<<4|o)}add(l,o,c,f){this.table[o<<8|l]=c<<4|f}addMany(l,o,c,f){for(let S=0;S<l.length;S++)this.table[o<<8|l[S]]=c<<4|f}}r.TransitionTable=w;const k=160;r.VT500_TRANSITION_TABLE=function(){const s=new w(4095),l=Array.apply(null,Array(256)).map((L,y)=>y),o=(L,y)=>l.slice(L,y),c=o(32,127),f=o(0,24);f.push(25),f.push.apply(f,o(28,32));const S=o(0,14);let C;for(C in s.setDefault(1,0),s.addMany(c,0,2,0),S)s.addMany([24,26,153,154],C,3,0),s.addMany(o(128,144),C,3,0),s.addMany(o(144,152),C,3,0),s.add(156,C,0,0),s.add(27,C,11,1),s.add(157,C,4,8),s.addMany([152,158,159],C,0,7),s.add(155,C,11,3),s.add(144,C,11,9);return s.addMany(f,0,3,0),s.addMany(f,1,3,1),s.add(127,1,0,1),s.addMany(f,8,0,8),s.addMany(f,3,3,3),s.add(127,3,0,3),s.addMany(f,4,3,4),s.add(127,4,0,4),s.addMany(f,6,3,6),s.addMany(f,5,3,5),s.add(127,5,0,5),s.addMany(f,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(c,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(o(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(c,7,0,7),s.addMany(f,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(o(64,127),3,7,0),s.addMany(o(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(o(48,60),4,8,4),s.addMany(o(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(o(32,64),6,0,6),s.add(127,6,0,6),s.addMany(o(64,127),6,0,0),s.addMany(o(32,48),3,9,5),s.addMany(o(32,48),5,9,5),s.addMany(o(48,64),5,0,6),s.addMany(o(64,127),5,7,0),s.addMany(o(32,48),4,9,5),s.addMany(o(32,48),1,9,2),s.addMany(o(32,48),2,9,2),s.addMany(o(48,127),2,10,0),s.addMany(o(48,80),1,10,0),s.addMany(o(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(o(96,127),1,10,0),s.add(80,1,11,9),s.addMany(f,9,0,9),s.add(127,9,0,9),s.addMany(o(28,32),9,0,9),s.addMany(o(32,48),9,9,12),s.addMany(o(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(f,11,0,11),s.addMany(o(32,128),11,0,11),s.addMany(o(28,32),11,0,11),s.addMany(f,10,0,10),s.add(127,10,0,10),s.addMany(o(28,32),10,0,10),s.addMany(o(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(o(32,48),10,9,12),s.addMany(f,12,0,12),s.add(127,12,0,12),s.addMany(o(28,32),12,0,12),s.addMany(o(32,48),12,9,12),s.addMany(o(48,64),12,0,11),s.addMany(o(64,127),12,12,13),s.addMany(o(64,127),10,12,13),s.addMany(o(64,127),9,12,13),s.addMany(f,13,13,13),s.addMany(c,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(k,0,2,0),s.add(k,8,5,8),s.add(k,6,0,6),s.add(k,11,0,11),s.add(k,13,13,13),s}();class g extends d.Disposable{constructor(l=r.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(o,c,f)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,c)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,o=[64,126]){let c=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=l.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<l.intermediates.length;++S){const C=l.intermediates.charCodeAt(S);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=C}}if(l.final.length!==1)throw new Error("final must be a single byte");const f=l.final.charCodeAt(0);if(o[0]>f||f>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return c<<=8,c|=f,c}identToString(l){const o=[];for(;l;)o.push(String.fromCharCode(255&l)),l>>=8;return o.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,o){const c=this._identifier(l,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const f=this._escHandlers[c];return f.push(o),{dispose:()=>{const S=f.indexOf(o);S!==-1&&f.splice(S,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,o){this._executeHandlers[l.charCodeAt(0)]=o}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,o){const c=this._identifier(l);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const f=this._csiHandlers[c];return f.push(o),{dispose:()=>{const S=f.indexOf(o);S!==-1&&f.splice(S,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,o){return this._dcsParser.registerHandler(this._identifier(l),o)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,o){return this._oscParser.registerHandler(l,o)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,o,c,f,S){this._parseStack.state=l,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=f,this._parseStack.chunkPos=S}parse(l,o,c){let f,S=0,C=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&E>-1){for(;E>=0&&(f=y[E](this._params),f!==!0);E--)if(f instanceof Promise)return this._parseStack.handlerPos=E,f}this._parseStack.handlers=[];break;case 4:if(c===!1&&E>-1){for(;E>=0&&(f=y[E](),f!==!0);E--)if(f instanceof Promise)return this._parseStack.handlerPos=E,f}this._parseStack.handlers=[];break;case 6:if(S=l[this._parseStack.chunkPos],f=this._dcsParser.unhook(S!==24&&S!==26,c),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=l[this._parseStack.chunkPos],f=this._oscParser.end(S!==24&&S!==26,c),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=L;y<o;++y){switch(S=l[y],C=this._transitions.table[this.currentState<<8|(S<160?S:k)],C>>4){case 2:for(let R=y+1;;++R){if(R>=o||(S=l[R])<32||S>126&&S<k){this._printHandler(l,y,R),y=R-1;break}if(++R>=o||(S=l[R])<32||S>126&&S<k){this._printHandler(l,y,R),y=R-1;break}if(++R>=o||(S=l[R])<32||S>126&&S<k){this._printHandler(l,y,R),y=R-1;break}if(++R>=o||(S=l[R])<32||S>126&&S<k){this._printHandler(l,y,R),y=R-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|S];let A=E?E.length-1:-1;for(;A>=0&&(f=E[A](this._params),f!==!0);A--)if(f instanceof Promise)return this._preserveStack(3,E,A,C,y),f;A<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++y<o&&(S=l[y])>47&&S<60);y--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const T=this._escHandlers[this._collect<<8|S];let O=T?T.length-1:-1;for(;O>=0&&(f=T[O](),f!==!0);O--)if(f instanceof Promise)return this._preserveStack(4,T,O,C,y),f;O<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let R=y+1;;++R)if(R>=o||(S=l[R])===24||S===26||S===27||S>127&&S<k){this._dcsParser.put(l,y,R),y=R-1;break}break;case 14:if(f=this._dcsParser.unhook(S!==24&&S!==26),f)return this._preserveStack(6,[],0,C,y),f;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let R=y+1;;R++)if(R>=o||(S=l[R])<32||S>127&&S<k){this._oscParser.put(l,y,R),y=R-1;break}break;case 6:if(f=this._oscParser.end(S!==24&&S!==26),f)return this._preserveStack(5,[],0,C,y),f;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}r.EscapeSequenceParser=g},6242:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;const d=n(5770),v=n(482),h=[];r.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,w){this._handlers[_]===void 0&&(this._handlers[_]=[]);const k=this._handlers[_];return k.push(w),{dispose:()=>{const g=k.indexOf(w);g!==-1&&k.splice(g,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,w,k){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(_,w,k);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(_,w,k))}start(){this.reset(),this._state=1}put(_,w,k){if(this._state!==3){if(this._state===1)for(;w<k;){const g=_[w++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&k-w>0&&this._put(_,w,k)}}end(_,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,g=this._active.length-1,s=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,k=w,s=this._stack.fallThrough,this._stack.paused=!1),!s&&k===!1){for(;g>=0&&(k=this._active[g].end(_),k!==!0);g--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,k;g--}for(;g>=0;g--)if(k=this._active[g].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",_);this._active=h,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,w,k){this._hitLimit||(this._data+=(0,v.utf32ToString)(_,w,k),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let w=!1;if(this._hitLimit)w=!1;else if(_&&(w=this._handler(this._data),w instanceof Promise))return w.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,w}}},8742:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;const n=2147483647;class d{static fromArray(h){const _=new d;if(!h.length)return _;for(let w=Array.isArray(h[0])?1:0;w<h.length;++w){const k=h[w];if(Array.isArray(k))for(let g=0;g<k.length;++g)_.addSubParam(k[g]);else _.addParam(k)}return _}constructor(h=32,_=32){if(this.maxLength=h,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new d(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let _=0;_<this.length;++_){h.push(this.params[_]);const w=this._subParamsIdx[_]>>8,k=255&this._subParamsIdx[_];k-w>0&&h.push(Array.prototype.slice.call(this._subParams,w,k))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>n?n:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>n?n:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const _=this._subParamsIdx[h]>>8,w=255&this._subParamsIdx[h];return w-_>0?this._subParams.subarray(_,w):null}getSubParamsAll(){const h={};for(let _=0;_<this.length;++_){const w=this._subParamsIdx[_]>>8,k=255&this._subParamsIdx[_];k-w>0&&(h[_]=this._subParams.slice(w,k))}return h}addDigit(h){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,k=w[_-1];w[_-1]=~k?Math.min(10*k+h,n):h}}r.Params=d},5741:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,d){const v={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(v),d.dispose=()=>this._wrappedAddonDispose(v),d.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let d=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===n){d=v;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(d,1)}}},8771:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;const d=n(3785),v=n(511);r.BufferApiView=class{constructor(h,_){this._buffer=h,this.type=_}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const _=this._buffer.lines.get(h);if(_)return new d.BufferLineApiView(_)}getNullCell(){return new v.CellData}}},3785:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;const d=n(511);r.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,h){if(!(v<0||v>=this._line.length))return h?(this._line.loadCell(v,h),h):this._line.loadCell(v,new d.CellData)}translateToString(v,h,_){return this._line.translateToString(v,h,_)}}},8285:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;const d=n(8771),v=n(8460),h=n(844);class _ extends h.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=_},7975:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,d){return this._core.registerCsiHandler(n,v=>d(v.toArray()))}addCsiHandler(n,d){return this.registerCsiHandler(n,d)}registerDcsHandler(n,d){return this._core.registerDcsHandler(n,(v,h)=>d(v,h.toArray()))}addDcsHandler(n,d){return this.registerDcsHandler(n,d)}registerEscHandler(n,d){return this._core.registerEscHandler(n,d)}addEscHandler(n,d){return this.registerEscHandler(n,d)}registerOscHandler(n,d){return this._core.registerOscHandler(n,d)}addOscHandler(n,d){return this.registerOscHandler(n,d)}}},7090:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(m,r,n){var d=this&&this.__decorate||function(s,l,o,c){var f,S=arguments.length,C=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,l,o,c);else for(var L=s.length-1;L>=0;L--)(f=s[L])&&(C=(S<3?f(C):S>3?f(l,o,C):f(l,o))||C);return S>3&&C&&Object.defineProperty(l,o,C),C},v=this&&this.__param||function(s,l){return function(o,c){l(o,c,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;const h=n(8460),_=n(844),w=n(5295),k=n(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let g=r.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(s,this))}resize(s,l){this.cols=s,this.rows=l,this.buffers.resize(s,l),this._onResize.fire({cols:s,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,l=!1){const o=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===s.fg&&c.getBg(0)===s.bg||(c=o.getBlankLine(s,l),this._cachedBlankLine=c),c.isWrapped=l;const f=o.ybase+o.scrollTop,S=o.ybase+o.scrollBottom;if(o.scrollTop===0){const C=o.lines.isFull;S===o.lines.length-1?C?o.lines.recycle().copyFrom(c):o.lines.push(c.clone()):o.lines.splice(S+1,0,c.clone()),C?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const C=S-f+1;o.lines.shiftElements(f+1,C-1,-1),o.lines.set(S,c.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(s,l,o){const c=this.buffer;if(s<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else s+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const f=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+s,c.ybase),0),f!==c.ydisp&&(l||this._onScroll.fire(c.ydisp))}};r.BufferService=g=d([v(0,k.IOptionsService)],g)},7994:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,d){this._charsets[n]=d,this.glevel===n&&(this.charset=d)}}},1753:function(m,r,n){var d=this&&this.__decorate||function(c,f,S,C){var L,y=arguments.length,E=y<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,f,S,C);else for(var A=c.length-1;A>=0;A--)(L=c[A])&&(E=(y<3?L(E):y>3?L(f,S,E):L(f,S))||E);return y>3&&E&&Object.defineProperty(f,S,E),E},v=this&&this.__param||function(c,f){return function(S,C){f(S,C,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;const h=n(2585),_=n(8460),w=n(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function g(c,f){let S=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(S|=64,S|=c.action):(S|=3&c.button,4&c.button&&(S|=64),8&c.button&&(S|=128),c.action===32?S|=32:c.action!==0||f||(S|=3)),S}const s=String.fromCharCode,l={DEFAULT:c=>{const f=[g(c,!1)+32,c.col+32,c.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${s(f[0])}${s(f[1])}${s(f[2])}`},SGR:c=>{const f=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${g(c,!0)};${c.col};${c.row}${f}`},SGR_PIXELS:c=>{const f=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${g(c,!0)};${c.x};${c.y}${f}`}};let o=r.CoreMouseService=class extends w.Disposable{constructor(c,f){super(),this._bufferService=c,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(k))this.addProtocol(S,k[S]);for(const S of Object.keys(l))this.addEncoding(S,l[S]);this.reset()}addProtocol(c,f){this._protocols[c]=f}addEncoding(c,f){this._encodings[c]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const f=this._encodings[this._activeEncoding](c);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,f,S){if(S){if(c.x!==f.x||c.y!==f.y)return!1}else if(c.col!==f.col||c.row!==f.row)return!1;return c.button===f.button&&c.action===f.action&&c.ctrl===f.ctrl&&c.alt===f.alt&&c.shift===f.shift}};r.CoreMouseService=o=d([v(0,h.IBufferService),v(1,h.ICoreService)],o)},6975:function(m,r,n){var d=this&&this.__decorate||function(o,c,f,S){var C,L=arguments.length,y=L<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,c,f,S);else for(var E=o.length-1;E>=0;E--)(C=o[E])&&(y=(L<3?C(y):L>3?C(c,f,y):C(c,f))||y);return L>3&&y&&Object.defineProperty(c,f,y),y},v=this&&this.__param||function(o,c){return function(f,S){c(f,S,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;const h=n(1439),_=n(8460),w=n(844),k=n(2585),g=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=r.CoreService=class extends w.Disposable{constructor(o,c,f){super(),this._bufferService=o,this._logService=c,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(s)}reset(){this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(s)}triggerDataEvent(o,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(S=>S.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(o))}};r.CoreService=l=d([v(0,k.IBufferService),v(1,k.ILogService),v(2,k.IOptionsService)],l)},9074:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;const d=n(8055),v=n(8460),h=n(844),_=n(6106);let w=0,k=0;class g extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const c=new s(o);if(c){const f=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),f.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,c,f){let S=0,C=0;for(const L of this._decorations.getKeyIterator(c))S=L.options.x??0,C=S+(L.options.width??1),o>=S&&o<C&&(!f||(L.options.layer??"bottom")===f)&&(yield L)}forEachDecorationAtCell(o,c,f,S){this._decorations.forEachByKey(c,C=>{w=C.options.x??0,k=w+(C.options.width??1),o>=w&&o<k&&(!f||(C.options.layer??"bottom")===f)&&S(C)})}}r.DecorationService=g;class s extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;const d=n(2585),v=n(8343);class h{constructor(...w){this._entries=new Map;for(const[k,g]of w)this.set(k,g)}set(w,k){const g=this._entries.get(w);return this._entries.set(w,k),g}forEach(w){for(const[k,g]of this._entries.entries())w(k,g)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}r.ServiceCollection=h,r.InstantiationService=class{constructor(){this._services=new h,this._services.set(d.IInstantiationService,this)}setService(_,w){this._services.set(_,w)}getService(_){return this._services.get(_)}createInstance(_,...w){const k=(0,v.getServiceDependencies)(_).sort((l,o)=>l.index-o.index),g=[];for(const l of k){const o=this._services.get(l.id);if(!o)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${l.id}.`);g.push(o)}const s=k.length>0?k[0].index:w.length;if(w.length!==s)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${s+1} conflicts with ${w.length} static arguments`);return new _(...w,...g)}}},7866:function(m,r,n){var d=this&&this.__decorate||function(s,l,o,c){var f,S=arguments.length,C=S<3?l:c===null?c=Object.getOwnPropertyDescriptor(l,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,l,o,c);else for(var L=s.length-1;L>=0;L--)(f=s[L])&&(C=(S<3?f(C):S>3?f(l,o,C):f(l,o))||C);return S>3&&C&&Object.defineProperty(l,o,C),C},v=this&&this.__param||function(s,l){return function(o,c){l(o,c,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;const h=n(844),_=n(2585),w={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let k,g=r.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let l=0;l<s.length;l++)typeof s[l]=="function"&&(s[l]=s[l]())}_log(s,l,o){this._evalLazyOptionalParams(o),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...o)}trace(s,...l){var o;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.trace.bind(this._optionsService.options.logger))??console.log,s,l)}debug(s,...l){var o;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.debug.bind(this._optionsService.options.logger))??console.log,s,l)}info(s,...l){var o;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.info.bind(this._optionsService.options.logger))??console.info,s,l)}warn(s,...l){var o;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.warn.bind(this._optionsService.options.logger))??console.warn,s,l)}error(s,...l){var o;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.error.bind(this._optionsService.options.logger))??console.error,s,l)}};r.LogService=g=d([v(0,_.IOptionsService)],g),r.setTraceLogger=function(s){k=s},r.traceCall=function(s,l,o){if(typeof o.value!="function")throw new Error("not supported");const c=o.value;o.value=function(...f){if(k.logLevel!==_.LogLevelEnum.TRACE)return c.apply(this,f);k.trace(`GlyphRenderer#${c.name}(${f.map(C=>JSON.stringify(C)).join(", ")})`);const S=c.apply(this,f);return k.trace(`GlyphRenderer#${c.name} return`,S),S}}},7302:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;const d=n(8460),v=n(844),h=n(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends v.Disposable{constructor(g){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s={...r.DEFAULT_OPTIONS};for(const l in g)if(l in s)try{const o=g[l];s[l]=this._sanitizeAndValidateOption(l,o)}catch(o){console.error(o)}this.rawOptions=s,this.options={...s},this._setupOptions(),this.register((0,v.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,s){return this.onOptionChange(l=>{l===g&&s(this.rawOptions[g])})}onMultipleOptionChange(g,s){return this.onOptionChange(l=>{g.indexOf(l)!==-1&&s()})}_setupOptions(){const g=l=>{if(!(l in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},s=(l,o)=>{if(!(l in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);o=this._sanitizeAndValidateOption(l,o),this.rawOptions[l]!==o&&(this.rawOptions[l]=o,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const o={get:g.bind(this,l),set:s.bind(this,l)};Object.defineProperty(this.options,l,o)}}_sanitizeAndValidateOption(g,s){switch(g){case"cursorStyle":if(s||(s=r.DEFAULT_OPTIONS[g]),!function(l){return l==="block"||l==="underline"||l==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${g}`);break;case"wordSeparator":s||(s=r.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=_.includes(s)?s:r.DEFAULT_OPTIONS[g];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${g} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${g} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}r.OptionsService=w},2660:function(m,r,n){var d=this&&this.__decorate||function(w,k,g,s){var l,o=arguments.length,c=o<3?k:s===null?s=Object.getOwnPropertyDescriptor(k,g):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(w,k,g,s);else for(var f=w.length-1;f>=0;f--)(l=w[f])&&(c=(o<3?l(c):o>3?l(k,g,c):l(k,g))||c);return o>3&&c&&Object.defineProperty(k,g,c),c},v=this&&this.__param||function(w,k){return function(g,s){k(g,s,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;const h=n(2585);let _=r.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const k=this._bufferService.buffer;if(w.id===void 0){const f=k.addMarker(k.ybase+k.y),S={data:w,id:this._nextId++,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(S,f)),this._dataByLinkId.set(S.id,S),S.id}const g=w,s=this._getEntryIdKey(g),l=this._entriesWithId.get(s);if(l)return this.addLineToLink(l.id,k.ybase+k.y),l.id;const o=k.addMarker(k.ybase+k.y),c={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(c,o)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(w,k){const g=this._dataByLinkId.get(w);if(g&&g.lines.every(s=>s.line!==k)){const s=this._bufferService.buffer.addMarker(k);g.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(g,s))}}getLinkData(w){var k;return(k=this._dataByLinkId.get(w))==null?void 0:k.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,k){const g=w.lines.indexOf(k);g!==-1&&(w.lines.splice(g,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};r.OscLinkService=_=d([v(0,h.IBufferService)],_)},8343:(m,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;const n="di$target",d="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(v){return v[d]||[]},r.createDecorator=function(v){if(r.serviceRegistry.has(v))return r.serviceRegistry.get(v);const h=function(_,w,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,s,l){s[n]===s?s[d].push({id:g,index:l}):(s[d]=[{id:g,index:l}],s[n]=s)})(h,_,k)};return h.toString=()=>v,r.serviceRegistry.set(v,h),h}},2585:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;const d=n(8343);var v;r.IBufferService=(0,d.createDecorator)("BufferService"),r.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),r.ICoreService=(0,d.createDecorator)("CoreService"),r.ICharsetService=(0,d.createDecorator)("CharsetService"),r.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(v||(r.LogLevelEnum=v={})),r.ILogService=(0,d.createDecorator)("LogService"),r.IOptionsService=(0,d.createDecorator)("OptionsService"),r.IOscLinkService=(0,d.createDecorator)("OscLinkService"),r.IUnicodeService=(0,d.createDecorator)("UnicodeService"),r.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(m,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;const d=n(8460),v=n(225);class h{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,k,g=!1){return(16777215&w)<<3|(3&k)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const w=new v.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let k=0,g=0;const s=w.length;for(let l=0;l<s;++l){let o=w.charCodeAt(l);if(55296<=o&&o<=56319){if(++l>=s)return k+this.wcwidth(o);const S=w.charCodeAt(l);56320<=S&&S<=57343?o=1024*(o-55296)+S-56320+65536:k+=this.wcwidth(S)}const c=this.charProperties(o,g);let f=h.extractWidth(c);h.extractShouldJoin(c)&&(f-=h.extractWidth(g)),k+=f,g=c}return k}charProperties(w,k){return this._activeProvider.charProperties(w,k)}}r.UnicodeService=h}},u={};function p(m){var r=u[m];if(r!==void 0)return r.exports;var n=u[m]={exports:{}};return t[m].call(n.exports,n,n.exports,p),n.exports}var x={};return(()=>{var m=x;Object.defineProperty(m,"__esModule",{value:!0}),m.Terminal=void 0;const r=p(9042),n=p(3236),d=p(844),v=p(5741),h=p(8285),_=p(7975),w=p(7090),k=["cols","rows"];class g extends d.Disposable{constructor(l){super(),this._core=this.register(new n.Terminal(l)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const o=f=>this._core.options[f],c=(f,S)=>{this._checkReadonlyOptions(f),this._core.options[f]=S};for(const f in this._core.options){const S={get:o.bind(this,f),set:c.bind(this,f)};Object.defineProperty(this._publicOptions,f,S)}}_checkReadonlyOptions(l){if(k.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const o in l)this._publicOptions[o]=l[o]}blur(){this._core.blur()}focus(){this._core.focus()}input(l,o=!0){this._core.input(l,o)}resize(l,o){this._verifyIntegers(l,o),this._core.resize(l,o)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}attachCustomWheelEventHandler(l){this._core.attachCustomWheelEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){return this._checkProposedApi(),this._verifyPositiveIntegers(l.x??0,l.width??0,l.height??0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,o,c){this._verifyIntegers(l,o,c),this._core.select(l,o,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,o){this._verifyIntegers(l,o),this._core.selectLines(l,o)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,o){this._core.write(l,o)}writeln(l,o){this._core.write(l),this._core.write(`\r
`,o)}paste(l){this._core.paste(l)}refresh(l,o){this._verifyIntegers(l,o),this._core.refresh(l,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return r}_verifyIntegers(...l){for(const o of l)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const o of l)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}m.Terminal=g})(),x})())})(Xi);var Us=Xi.exports,Yi={exports:{}};(function(i,e){(function(t,u){i.exports=u()})(self,()=>(()=>{var t={};return(()=>{var u=t;Object.defineProperty(u,"__esModule",{value:!0}),u.FitAddon=void 0,u.FitAddon=class{activate(p){this._terminal=p}dispose(){}fit(){const p=this.proposeDimensions();if(!p||!this._terminal||isNaN(p.cols)||isNaN(p.rows))return;const x=this._terminal._core;this._terminal.rows===p.rows&&this._terminal.cols===p.cols||(x._renderService.clear(),this._terminal.resize(p.cols,p.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const p=this._terminal._core,x=p._renderService.dimensions;if(x.css.cell.width===0||x.css.cell.height===0)return;const m=this._terminal.options.scrollback===0?0:p.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),d=Math.max(0,parseInt(r.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),h=n-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),_=d-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-m;return{cols:Math.max(2,Math.floor(_/x.css.cell.width)),rows:Math.max(1,Math.floor(h/x.css.cell.height))}}}})(),t})())})(Yi);var Ns=Yi.exports,Qi={exports:{}};(function(i,e){(function(t,u){i.exports=u()})(self,()=>(()=>{var t={6:(m,r)=>{function n(v){try{const h=new URL(v),_=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return v.toLocaleLowerCase().startsWith(_.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(v,h,_,w={}){this._terminal=v,this._regex=h,this._handler=_,this._options=w}provideLinks(v,h){const _=d.computeLink(v,this._regex,this._terminal,this._handler);h(this._addCallbacks(_))}_addCallbacks(v){return v.map(h=>(h.leave=this._options.leave,h.hover=(_,w)=>{if(this._options.hover){const{range:k}=h;this._options.hover(_,w,k)}},h))}};class d{static computeLink(h,_,w,k){const g=new RegExp(_.source,(_.flags||"")+"g"),[s,l]=d._getWindowedLineStrings(h-1,w),o=s.join("");let c;const f=[];for(;c=g.exec(o);){const S=c[0];if(!n(S))continue;const[C,L]=d._mapStrIdx(w,l,0,c.index),[y,E]=d._mapStrIdx(w,C,L,S.length);if(C===-1||L===-1||y===-1||E===-1)continue;const A={start:{x:L+1,y:C+1},end:{x:E,y:y+1}};f.push({range:A,text:S,activate:k})}return f}static _getWindowedLineStrings(h,_){let w,k=h,g=h,s=0,l="";const o=[];if(w=_.buffer.active.getLine(h)){const c=w.translateToString(!0);if(w.isWrapped&&c[0]!==" "){for(s=0;(w=_.buffer.active.getLine(--k))&&s<2048&&(l=w.translateToString(!0),s+=l.length,o.push(l),w.isWrapped&&l.indexOf(" ")===-1););o.reverse()}for(o.push(c),s=0;(w=_.buffer.active.getLine(++g))&&w.isWrapped&&s<2048&&(l=w.translateToString(!0),s+=l.length,o.push(l),l.indexOf(" ")===-1););}return[o,k]}static _mapStrIdx(h,_,w,k){const g=h.buffer.active,s=g.getNullCell();let l=w;for(;k;){const o=g.getLine(_);if(!o)return[-1,-1];for(let c=l;c<o.length;++c){o.getCell(c,s);const f=s.getChars();if(s.getWidth()&&(k-=f.length||1,c===o.length-1&&f==="")){const S=g.getLine(_+1);S&&S.isWrapped&&(S.getCell(0,s),s.getWidth()===2&&(k+=1))}if(k<0)return[_,c]}_++,l=0}return[_,l]}}r.LinkComputer=d}},u={};function p(m){var r=u[m];if(r!==void 0)return r.exports;var n=u[m]={exports:{}};return t[m](n,n.exports,p),n.exports}var x={};return(()=>{var m=x;Object.defineProperty(m,"__esModule",{value:!0}),m.WebLinksAddon=void 0;const r=p(6),n=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function d(v,h){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}m.WebLinksAddon=class{constructor(v=d,h={}){this._handler=v,this._options=h}activate(v){this._terminal=v;const h=this._options,_=h.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,_,this._handler,h))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),x})())})(Qi);var Ks=Qi.exports;function zr(i){let e,t,u,p,x,m,r,n,d,v,h,_=i[1].name+"",w,k,g,s=Vr(i[1].size)+"",l,o,c,f,S,C,L,y=i[3]&&jr(i),E=i[2]==="pending"&&Ur(i),A=i[2]==="accepting"&&Nr(),T=i[2]==="completed"&&Kr(i);return{c(){e=B("div"),t=B("div"),u=B("div"),u.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',p=W(),x=B("div"),m=B("div"),r=B("div"),n=B("span"),n.textContent="📄",d=W(),v=B("div"),h=B("span"),w=se(_),k=W(),g=B("span"),l=se(s),o=se(" 字节"),c=W(),f=B("div"),y&&y.c(),S=W(),E&&E.c(),C=W(),A&&A.c(),L=W(),T&&T.c(),a(u,"class","zmodem-download-header"),a(n,"class","zmodem-download-icon"),a(h,"class","zmodem-download-name"),a(g,"class","zmodem-download-size"),a(v,"class","zmodem-download-details"),a(r,"class","zmodem-download-file"),a(m,"class","zmodem-download-info"),a(f,"class","zmodem-download-actions"),a(x,"class","zmodem-download-body"),a(t,"class","zmodem-download-content"),a(e,"class","zmodem-download-modal")},m(O,R){G(O,e,R),b(e,t),b(t,u),b(t,p),b(t,x),b(x,m),b(m,r),b(r,n),b(r,d),b(r,v),b(v,h),b(h,w),b(v,k),b(v,g),b(g,l),b(g,o),b(x,c),b(x,f),y&&y.m(f,null),b(f,S),E&&E.m(f,null),b(f,C),A&&A.m(f,null),b(f,L),T&&T.m(f,null)},p(O,R){R[0]&2&&_!==(_=O[1].name+"")&&he(w,_),R[0]&2&&s!==(s=Vr(O[1].size)+"")&&he(l,s),O[3]?y?y.p(O,R):(y=jr(O),y.c(),y.m(f,S)):y&&(y.d(1),y=null),O[2]==="pending"?E?E.p(O,R):(E=Ur(O),E.c(),E.m(f,C)):E&&(E.d(1),E=null),O[2]==="accepting"?A||(A=Nr(),A.c(),A.m(f,L)):A&&(A.d(1),A=null),O[2]==="completed"?T?T.p(O,R):(T=Kr(O),T.c(),T.m(f,null)):T&&(T.d(1),T=null)},d(O){O&&V(e),y&&y.d(),E&&E.d(),A&&A.d(),T&&T.d()}}}function jr(i){let e,t,u;return{c(){e=B("div"),t=se("❌ "),u=se(i[3]),a(e,"class","zmodem-error-message")},m(p,x){G(p,e,x),b(e,t),b(e,u)},p(p,x){x[0]&8&&he(u,p[3])},d(p){p&&V(e)}}}function Ur(i){let e,t,u,p,x,m,r,n;return{c(){e=B("p"),e.textContent="服务器正在发送文件，是否接收？",t=W(),u=B("div"),p=B("button"),p.textContent="拒绝",x=W(),m=B("button"),m.textContent="接收文件",a(e,"class","zmodem-download-prompt"),a(p,"class","zmodem-download-btn zmodem-btn-reject"),a(m,"class","zmodem-download-btn zmodem-btn-accept"),a(u,"class","zmodem-download-buttons")},m(d,v){G(d,e,v),G(d,t,v),G(d,u,v),b(u,p),b(u,x),b(u,m),r||(n=[ie(p,"click",i[6]),ie(m,"click",i[5])],r=!0)},p:ve,d(d){d&&(V(e),V(t),V(u)),r=!1,Le(n)}}}function Nr(i){let e;return{c(){e=B("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',a(e,"class","zmodem-downloading")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function Kr(i){let e,t,u,p,x,m=(i[4]||i[1].name)+"",r;return{c(){e=B("div"),t=B("span"),t.textContent="✓",u=W(),p=B("span"),x=se("文件接收完成，已保存到："),r=se(m),a(t,"class","zmodem-success-icon"),a(e,"class","zmodem-completed")},m(n,d){G(n,e,d),b(e,t),b(e,u),b(e,p),b(p,x),b(p,r)},p(n,d){d[0]&18&&m!==(m=(n[4]||n[1].name)+"")&&he(r,m)},d(n){n&&V(e)}}}function Vs(i){let e,t,u,p=i[1]&&zr(i);return{c(){e=B("div"),e.innerHTML="",t=W(),p&&p.c(),u=nt(),a(e,"class","terminal-container svelte-14g4vw6")},m(x,m){G(x,e,m),i[16](e),G(x,t,m),p&&p.m(x,m),G(x,u,m)},p(x,m){x[1]?p?p.p(x,m):(p=zr(x),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},i:ve,o:ve,d(x){x&&(V(e),V(t),V(u)),i[16](null),p&&p.d(x)}}}function qs(i,e){try{const t=new Blob([i],{type:"application/octet-stream"}),u=window.URL.createObjectURL(t),p=document.createElement("a");p.href=u,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(u),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function Gs(i){let e="";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e}async function Js(i){const e=[];let t=0;for await(const x of i)e.push(x),t+=x.length;const u=new Uint8Array(t);let p=0;for(const x of e)u.set(x,p),p+=x.length;return u}async function Xs(i,e){const t=await Js(i),{SaveBinaryFile:u}=window.wailsBindings||{};if(typeof u=="function"){const p=btoa(Gs(t));return await u(e,p)}return qs(t,e),null}function Vr(i){return i?i<1024?i+" B":i<1024*1024?(i/1024).toFixed(2)+" KB":i<1024*1024*1024?(i/(1024*1024)).toFixed(2)+" MB":(i/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function Zs(i,e,t){let{sessionId:u=null}=e,{onData:p=null}=e,{onResize:x=null}=e,{onZModemTransfer:m=null}=e,r,n,d,v=null,h=null,_=null,w=!1,k=null,g=!1,s=null,l="pending",o=null,c=null,f=null,S=us(Rt);const C={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},L={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},y=Rt.subscribe(U=>{S=U,n&&(n.options.theme=S==="light"?L:C)});Tt(async()=>{n=new Us.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:S==="light"?L:C,allowProposedApi:!0,scrollback:1e3,convertEol:!1,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),d=new Ns.FitAddon,n.loadAddon(d),n.loadAddon(new Ks.WebLinksAddon),n.open(r),d.fit(),n.attachCustomKeyEventHandler(J=>{if(J.metaKey&&J.key.toLowerCase()==="c"&&!J.shiftKey&&!J.ctrlKey){if(n.hasSelection()){const $=n.getSelection();return navigator.clipboard.writeText($).catch(ne=>{console.error("Failed to copy:",ne)}),!1}return!0}if(J.ctrlKey&&!J.metaKey&&J.key.toLowerCase()==="c"&&!J.shiftKey){if(n.hasSelection()){const $=n.getSelection();return navigator.clipboard.writeText($).catch(ne=>{console.error("Failed to copy:",ne)}),!1}return!0}return J.metaKey&&J.key.toLowerCase()==="v"&&!J.shiftKey&&!J.ctrlKey?(J.preventDefault(),navigator.clipboard.readText().then($=>{$&&p&&u&&p(u,$)}).catch($=>{console.error("Failed to read clipboard:",$)}),!1):J.ctrlKey&&!J.metaKey&&J.key.toLowerCase()==="v"&&!J.shiftKey?(J.preventDefault(),navigator.clipboard.readText().then($=>{$&&p&&u&&p(u,$)}).catch($=>{console.error("Failed to read clipboard:",$)}),!1):!0});try{const J=await Qt(()=>import("./index2.js").then($=>$.i),[]);v=J.default||J,h=new v.Sentry({to_terminal:$=>{n&&n.write(new Uint8Array($))},sender:$=>{if(u){if(m){m(u,new Uint8Array($));return}if(p){let ne="";for(let F=0;F<$.length;F++)ne+=String.fromCharCode($[F]);p(u,ne)}}},on_detect:$=>{if(console.log("ZMODEM detected:",$.type),console.log("Detection object:",$),_=$.confirm(),console.log("ZMODEM confirmed, type:",_.type,"has zsession:",!!_),!_){console.error("ERROR: zsession is null after confirm()");return}g=!0,n&&(n.options.disableStdin=!0),_.type==="receive"?(console.log("Calling handleZModemReceive for download"),O(_)):(console.log("Calling handleZModemSend for upload"),K(_))},on_retract:()=>{console.log("ZMODEM retracted"),_=null}}),console.log("ZMODEM initialized successfully")}catch(J){console.error("Failed to initialize ZMODEM:",J)}n.onData(J=>{p&&u&&p(u,J)}),n.onResize(({cols:J,rows:$})=>{x&&u&&x(u,J,$)});const U=new ResizeObserver(()=>{d.fit()});return U.observe(r),()=>{U.disconnect()}}),rr(()=>{y&&y(),n&&n.dispose()});function E(U){f||(f=document.createElement("div"),f.className="zmodem-progress-modal",f.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${U}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(f))}function A(U,J,$,ne,F){if(!f)return;const D=Math.min(100,Math.round(ne/F*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${$}`,document.getElementById("zmodem-progress-bar").style.width=`${D}%`,document.getElementById("zmodem-progress-text").textContent=`${D}%`,document.getElementById("zmodem-files-progress").textContent=`${U+1} / ${J}`}function T(){f&&(document.body.removeChild(f),f=null)}function O(U){t(1,s=null),k=null,t(2,l="pending"),t(3,o=null),t(4,c=null),U.on("offer",J=>{const $=J.get_details();k=J,t(1,s=$),t(2,l="pending"),t(3,o=null),t(4,c=null)}),U.on("session_end",()=>{k=null,_=null,g=!1,n&&(n.options.disableStdin=!1),l==="accepting"?(t(2,l="completed"),setTimeout(()=>{t(1,s=null),t(2,l="pending"),t(4,c=null)},1500)):(t(1,s=null),t(2,l="pending"),t(4,c=null))}),U.start()}async function R(){if(k){t(2,l="accepting"),t(3,o=null);try{await k.accept();const U=k.get_payloads(),J=k.get_details().name;t(4,c=await Xs(U,J)),k=null,t(2,l="completed")}catch(U){console.error("接收文件失败:",U),t(3,o=U.message||String(U)),t(2,l="pending")}}}function j(){k&&k.skip(),k=null,t(1,s=null),t(2,l="pending"),t(3,o=null),t(4,c=null)}async function K(U){console.log("handleZModemSend called, session:",U);const J=document.createElement("input");return J.type="file",J.multiple=!0,new Promise($=>{J.onchange=async ne=>{const F=Array.from(ne.target.files);if(console.log("Files selected:",F.length,F.map(D=>D.name)),F.length===0){console.log("No files selected, closing session"),U.close(),w=!1,$();return}try{E(F.length),console.log("Starting to send files...");for(let D=0;D<F.length;D++){const N=F[D],z={name:N.name,size:N.size,mtime:new Date(N.lastModified)};console.log(`Sending file ${D+1}/${F.length}:`,N.name,N.size),await X(U,N,z,D,F.length)}console.log("All files sent, closing session"),await U.close(),setTimeout(()=>{w=!1,T(),g=!1,n&&(n.options.disableStdin=!1),$()},500)}catch(D){console.error("发送文件失败:",D),console.error("Error details:",D.stack),U.close(),w=!1,T(),g=!1,n&&(n.options.disableStdin=!1),$()}},J.click()})}async function X(U,J,$,ne,F){return new Promise((D,N)=>{U.send_offer($).then(z=>{if(!z){D();return}const Q=new FileReader,te=8192;Q.onload=q=>{const oe=q.target.result;let ee=0,ce=0;function le(){if(ee<oe.byteLength){const xe=new Uint8Array(oe,ee,Math.min(te,oe.byteLength-ee));z.send(xe),ee+=te,ce+=xe.byteLength,A(ne,F,J.name,ce,J.size),setTimeout(le,0)}else z.end().then(D).catch(N)}le()},Q.onerror=()=>{N(new Error("读取文件失败"))},Q.readAsArrayBuffer(J)})})}function Y(U){if(!n)return;let J;if(typeof U=="string"?J=new Uint8Array(U.split("").map($=>$.charCodeAt(0))):U instanceof Uint8Array?J=U:J=new Uint8Array(U),h&&!w)try{h.consume(J);return}catch($){console.warn("ZMODEM consume failed:",$),_=null,k=null,g=!1,w=!1,n&&(n.options.disableStdin=!1)}n.write(J)}function Z(U){n&&n.writeln(U)}function M(){n&&n.clear()}function P(){n&&n.focus()}function H(){return n?{cols:n.cols,rows:n.rows}:{cols:80,rows:24}}function I(U){et[U?"unshift":"push"](()=>{r=U,t(0,r)})}return i.$$set=U=>{"sessionId"in U&&t(7,u=U.sessionId),"onData"in U&&t(8,p=U.onData),"onResize"in U&&t(9,x=U.onResize),"onZModemTransfer"in U&&t(10,m=U.onZModemTransfer)},[r,s,l,o,c,R,j,u,p,x,m,Y,Z,M,P,H,I]}class Ys extends Qe{constructor(e){super(),Ye(this,e,Zs,Vs,Je,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function qr(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k;const g=i[6].default,s=fs(g,i,i[5],null);return{c(){e=B("div"),t=B("div"),u=W(),p=B("div"),x=B("div"),m=B("h2"),r=se(i[2]),n=W(),d=B("button"),d.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',v=W(),h=B("div"),s&&s.c(),a(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),a(m,"class","text-base font-semibold text-gray-900 dark:text-white"),a(d,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),a(x,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),a(h,"class","flex-1 overflow-y-auto p-6"),a(p,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),a(e,"class","fixed inset-0 z-50 flex items-center justify-center"),a(e,"role","dialog"),a(e,"aria-modal","true")},m(l,o){G(l,e,o),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),b(m,r),b(x,n),b(x,d),b(p,v),b(p,h),s&&s.m(h,null),_=!0,w||(k=[ie(d,"click",function(){kt(i[1])&&i[1].apply(this,arguments)}),ie(e,"click",i[3])],w=!0)},p(l,o){i=l,(!_||o&4)&&he(r,i[2]),s&&s.p&&(!_||o&32)&&ps(s,g,i,i[5],_?_s(g,i[5],o,null):gs(i[5]),null)},i(l){_||(ke(s,l),_=!0)},o(l){Ce(s,l),_=!1},d(l){l&&V(e),s&&s.d(l),w=!1,Le(k)}}}function Qs(i){let e,t,u=i[0]&&qr(i);return{c(){u&&u.c(),e=nt()},m(p,x){u&&u.m(p,x),G(p,e,x),t=!0},p(p,[x]){p[0]?u?(u.p(p,x),x&1&&ke(u,1)):(u=qr(p),u.c(),ke(u,1),u.m(e.parentNode,e)):u&&(ot(),Ce(u,1,1,()=>{u=null}),at())},i(p){t||(ke(u),t=!0)},o(p){Ce(u),t=!1},d(p){p&&V(e),u&&u.d(p)}}}function $s(i,e,t){let{$$slots:u={},$$scope:p}=e,{isOpen:x=!1}=e,{onClose:m=()=>{}}=e,{title:r=""}=e,{size:n="md"}=e;function d(h){h.target===h.currentTarget&&m()}function v(h){h.key==="Escape"&&x&&m()}return i.$$set=h=>{"isOpen"in h&&t(0,x=h.isOpen),"onClose"in h&&t(1,m=h.onClose),"title"in h&&t(2,r=h.title),"size"in h&&t(4,n=h.size),"$$scope"in h&&t(5,p=h.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&(x?document.addEventListener("keydown",v):document.removeEventListener("keydown",v))},[x,m,r,d,n,p,u]}class pr extends Qe{constructor(e){super(),Ye(this,e,$s,Qs,Je,{isOpen:0,onClose:1,title:2,size:4})}}function en(i){let e,t,u,p,x,m,r,n,d,v,h,_,w;return{c(){e=B("div"),t=B("p"),u=se(i[2]),p=W(),x=B("div"),m=B("button"),r=se(i[4]),n=W(),d=B("button"),v=se(i[3]),a(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),a(m,"type","button"),a(m,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),a(d,"type","button"),a(d,"class",h="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(i[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":i[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),a(x,"class","flex gap-2 pt-2"),a(e,"class","space-y-4")},m(k,g){G(k,e,g),b(e,t),b(t,u),b(e,p),b(e,x),b(x,m),b(m,r),b(x,n),b(x,d),b(d,v),_||(w=[ie(m,"click",function(){kt(i[6])&&i[6].apply(this,arguments)}),ie(d,"click",function(){kt(i[5])&&i[5].apply(this,arguments)})],_=!0)},p(k,g){i=k,g&4&&he(u,i[2]),g&16&&he(r,i[4]),g&8&&he(v,i[3]),g&128&&h!==(h="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(i[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":i[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&a(d,"class",h)},d(k){k&&V(e),_=!1,Le(w)}}}function tn(i){let e,t,u;function p(m){i[8](m)}let x={onClose:i[6],title:i[1],size:"sm",$$slots:{default:[en]},$$scope:{ctx:i}};return i[0]!==void 0&&(x.isOpen=i[0]),e=new pr({props:x}),et.push(()=>St(e,"isOpen",p)),{c(){ze(e.$$.fragment)},m(m,r){Ie(e,m,r),u=!0},p(m,[r]){const n={};r&64&&(n.onClose=m[6]),r&2&&(n.title=m[1]),r&764&&(n.$$scope={dirty:r,ctx:m}),!t&&r&1&&(t=!0,n.isOpen=m[0],yt(()=>t=!1)),e.$set(n)},i(m){u||(ke(e.$$.fragment,m),u=!0)},o(m){Ce(e.$$.fragment,m),u=!1},d(m){He(e,m)}}}function rn(i,e,t){let{isOpen:u=!1}=e,{title:p=""}=e,{message:x=""}=e,{confirmText:m="确定"}=e,{cancelText:r="取消"}=e,{onConfirm:n=()=>{}}=e,{onCancel:d=()=>{}}=e,{type:v="default"}=e;function h(_){u=_,t(0,u)}return i.$$set=_=>{"isOpen"in _&&t(0,u=_.isOpen),"title"in _&&t(1,p=_.title),"message"in _&&t(2,x=_.message),"confirmText"in _&&t(3,m=_.confirmText),"cancelText"in _&&t(4,r=_.cancelText),"onConfirm"in _&&t(5,n=_.onConfirm),"onCancel"in _&&t(6,d=_.onCancel),"type"in _&&t(7,v=_.type)},[u,p,x,m,r,n,d,v,h]}class sn extends Qe{constructor(e){super(),Ye(this,e,rn,tn,Je,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function nn(i){window.runtime.LogPrint(i)}function on(i){window.runtime.LogTrace(i)}function an(i){window.runtime.LogDebug(i)}function ln(i){window.runtime.LogInfo(i)}function cn(i){window.runtime.LogWarning(i)}function hn(i){window.runtime.LogError(i)}function dn(i){window.runtime.LogFatal(i)}function gr(i,e,t){return window.runtime.EventsOnMultiple(i,e,t)}function er(i,e){return gr(i,e,-1)}function un(i,...e){return window.runtime.EventsOff(i,...e)}function fn(){return window.runtime.EventsOffAll()}function _n(i,e){return gr(i,e,1)}function pn(i){let e=[i].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function gn(){window.runtime.WindowReload()}function mn(){window.runtime.WindowReloadApp()}function vn(i){window.runtime.WindowSetAlwaysOnTop(i)}function bn(){window.runtime.WindowSetSystemDefaultTheme()}function wn(){window.runtime.WindowSetLightTheme()}function yn(){window.runtime.WindowSetDarkTheme()}function Sn(){window.runtime.WindowCenter()}function kn(i){window.runtime.WindowSetTitle(i)}function Cn(){window.runtime.WindowFullscreen()}function xn(){window.runtime.WindowUnfullscreen()}function En(){return window.runtime.WindowIsFullscreen()}function Ln(){return window.runtime.WindowGetSize()}function Dn(i,e){window.runtime.WindowSetSize(i,e)}function Mn(i,e){window.runtime.WindowSetMaxSize(i,e)}function Bn(i,e){window.runtime.WindowSetMinSize(i,e)}function An(i,e){window.runtime.WindowSetPosition(i,e)}function Rn(){return window.runtime.WindowGetPosition()}function Tn(){window.runtime.WindowHide()}function On(){window.runtime.WindowShow()}function Pn(){window.runtime.WindowMaximise()}function In(){window.runtime.WindowToggleMaximise()}function Hn(){window.runtime.WindowUnmaximise()}function Fn(){return window.runtime.WindowIsMaximised()}function Wn(){window.runtime.WindowMinimise()}function zn(){window.runtime.WindowUnminimise()}function jn(i,e,t,u){window.runtime.WindowSetBackgroundColour(i,e,t,u)}function Un(){return window.runtime.ScreenGetAll()}function Nn(){return window.runtime.WindowIsMinimised()}function Kn(){return window.runtime.WindowIsNormal()}function Vn(i){window.runtime.BrowserOpenURL(i)}function qn(){return window.runtime.Environment()}function Gn(){window.runtime.Quit()}function Jn(){window.runtime.Hide()}function Xn(){window.runtime.Show()}function Zn(){return window.runtime.ClipboardGetText()}function Yn(i){return window.runtime.ClipboardSetText(i)}function Qn(i,e){return window.runtime.OnFileDrop(i,e)}function $n(){return window.runtime.OnFileDropOff()}function eo(){return window.runtime.CanResolveFilePaths()}function to(i){return window.runtime.ResolveFilePaths(i)}const $i=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:Vn,CanResolveFilePaths:eo,ClipboardGetText:Zn,ClipboardSetText:Yn,Environment:qn,EventsEmit:pn,EventsOff:un,EventsOffAll:fn,EventsOn:er,EventsOnMultiple:gr,EventsOnce:_n,Hide:Jn,LogDebug:an,LogError:hn,LogFatal:dn,LogInfo:ln,LogPrint:nn,LogTrace:on,LogWarning:cn,OnFileDrop:Qn,OnFileDropOff:$n,Quit:Gn,ResolveFilePaths:to,ScreenGetAll:Un,Show:Xn,WindowCenter:Sn,WindowFullscreen:Cn,WindowGetPosition:Rn,WindowGetSize:Ln,WindowHide:Tn,WindowIsFullscreen:En,WindowIsMaximised:Fn,WindowIsMinimised:Nn,WindowIsNormal:Kn,WindowMaximise:Pn,WindowMinimise:Wn,WindowReload:gn,WindowReloadApp:mn,WindowSetAlwaysOnTop:vn,WindowSetBackgroundColour:jn,WindowSetDarkTheme:yn,WindowSetLightTheme:wn,WindowSetMaxSize:Mn,WindowSetMinSize:Bn,WindowSetPosition:An,WindowSetSize:Dn,WindowSetSystemDefaultTheme:bn,WindowSetTitle:kn,WindowShow:On,WindowToggleMaximise:In,WindowUnfullscreen:xn,WindowUnmaximise:Hn,WindowUnminimise:zn},Symbol.toStringTag,{value:"Module"})),{Map:es}=Ui;function Gr(i,e,t){const u=i.slice();return u[41]=e[t],u[42]=e,u[43]=t,u}function Jr(i,e,t){const u=i.slice();return u[41]=e[t],u}function ro(i){let e=[],t=new es,u,p=qe(i[1]);const x=m=>m[41].sessionId;for(let m=0;m<p.length;m+=1){let r=Jr(i,p,m),n=x(r);t.set(n,e[m]=Xr(n,r))}return{c(){for(let m=0;m<e.length;m+=1)e[m].c();u=nt()},m(m,r){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(m,r);G(m,u,r)},p(m,r){r[0]&29666&&(p=qe(m[1]),e=Ht(e,r,x,1,m,p,t,u.parentNode,ir,Xr,u,Jr))},d(m){m&&V(u);for(let r=0;r<e.length;r+=1)e[r].d(m)}}}function io(i){let e;return{c(){e=B("div"),e.textContent="没有活动连接",a(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function so(i){let e,t=(i[41].tabName||i[41].connection.name)+"",u;return{c(){e=B("span"),u=se(t),a(e,"class","text-sm font-medium truncate flex-1")},m(p,x){G(p,e,x),b(e,u)},p(p,x){x[0]&2&&t!==(t=(p[41].tabName||p[41].connection.name)+"")&&he(u,t)},d(p){p&&V(e)}}}function no(i){let e,t,u;return{c(){e=B("input"),a(e,"type","text"),a(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),a(e,"focus","")},m(p,x){G(p,e,x),ge(e,i[6]),t||(u=[ie(e,"input",i[24]),ie(e,"blur",i[13]),ie(e,"keydown",i[14])],t=!0)},p(p,x){x[0]&64&&e.value!==p[6]&&ge(e,p[6])},d(p){p&&V(e),t=!1,Le(u)}}}function Xr(i,e){let t,u,p,x,m,r,n,d,v,h;function _(c,f){return c[5]===c[41].sessionId?no:so}let w=_(e),k=w(e);function g(...c){return e[25](e[41],...c)}function s(){return e[26](e[41])}function l(){return e[27](e[41])}function o(...c){return e[28](e[41],...c)}return{key:i,first:null,c(){t=B("div"),u=B("div"),x=W(),k.c(),m=W(),r=B("button"),r.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',n=W(),a(u,"class",p=Br(`w-2 h-2 rounded-full flex-shrink-0 ${e[41].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),a(r,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),a(t,"class",d="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[41].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),a(t,"role","button"),a(t,"tabindex","0"),this.first=t},m(c,f){G(c,t,f),b(t,u),b(t,x),k.m(t,null),b(t,m),b(t,r),b(t,n),v||(h=[ie(r,"click",g),ie(t,"click",s),ie(t,"dblclick",l),ie(t,"keydown",o)],v=!0)},p(c,f){e=c,f[0]&2&&p!==(p=Br(`w-2 h-2 rounded-full flex-shrink-0 ${e[41].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&a(u,"class",p),w===(w=_(e))&&k?k.p(e,f):(k.d(1),k=w(e),k&&(k.c(),k.m(t,m))),f[0]&130&&d!==(d="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[41].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&a(t,"class",d)},d(c){c&&V(t),k.d(),v=!1,Le(h)}}}function oo(i){let e;return{c(){e=B("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',a(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,u){G(t,e,u)},p:ve,i:ve,o:ve,d(t){t&&V(e)}}}function ao(i){let e,t=[],u=new es,p,x=qe(i[1]);const m=r=>r[41].sessionId;for(let r=0;r<x.length;r+=1){let n=Gr(i,x,r),d=m(n);u.set(d,t[r]=Zr(d,n))}return{c(){e=B("div");for(let r=0;r<t.length;r+=1)t[r].c();a(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(r,n){G(r,e,n);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);p=!0},p(r,n){n[0]&1835139&&(x=qe(r[1]),ot(),t=Ht(t,n,m,1,r,x,u,e,ks,Zr,null,Gr),at())},i(r){if(!p){for(let n=0;n<x.length;n+=1)ke(t[n]);p=!0}},o(r){for(let n=0;n<t.length;n+=1)Ce(t[n]);p=!1},d(r){r&&V(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function lo(i){let e=i[41].connection.username+"",t,u,p=i[41].connection.host+"",x,m,r=i[41].connection.port+"",n;return{c(){t=se(e),u=se("@"),x=se(p),m=se(":"),n=se(r)},m(d,v){G(d,t,v),G(d,u,v),G(d,x,v),G(d,m,v),G(d,n,v)},p(d,v){v[0]&2&&e!==(e=d[41].connection.username+"")&&he(t,e),v[0]&2&&p!==(p=d[41].connection.host+"")&&he(x,p),v[0]&2&&r!==(r=d[41].connection.port+"")&&he(n,r)},d(d){d&&(V(t),V(u),V(x),V(m),V(n))}}}function co(i){let e,t=i[41].connection.name!=="Local Shell"?` (${i[41].connection.name})`:"",u;return{c(){e=se("本地终端"),u=se(t)},m(p,x){G(p,e,x),G(p,u,x)},p(p,x){x[0]&2&&t!==(t=p[41].connection.name!=="Local Shell"?` (${p[41].connection.name})`:"")&&he(u,t)},d(p){p&&(V(e),V(u))}}}function Zr(i,e){let t,u,p,x,m,r,n,d,v=e[41],h,_,w;function k(f,S){return f[41].type==="local"?co:lo}let g=k(e),s=g(e);const l=()=>e[29](d,v),o=()=>e[29](null,v);let c={sessionId:e[41].sessionId,onData:e[18],onResize:e[20],onZModemTransfer:e[19]};return d=new Ys({props:c}),l(),{key:i,first:null,c(){t=B("div"),u=B("div"),p=B("div"),s.c(),x=W(),m=B("div"),m.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',r=W(),n=B("div"),ze(d.$$.fragment),h=W(),a(p,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),a(m,"class","flex items-center gap-1"),a(u,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),a(n,"class","flex-1 overflow-hidden"),a(t,"class",_="terminal-wrapper "+(e[7]===e[41].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(f,S){G(f,t,S),b(t,u),b(u,p),s.m(p,null),b(u,x),b(u,m),b(t,r),b(t,n),Ie(d,n,null),b(t,h),w=!0},p(f,S){e=f,g===(g=k(e))&&s?s.p(e,S):(s.d(1),s=g(e),s&&(s.c(),s.m(p,null))),v!==e[41]&&(o(),v=e[41],l());const C={};S[0]&2&&(C.sessionId=e[41].sessionId),d.$set(C),(!w||S[0]&130&&_!==(_="terminal-wrapper "+(e[7]===e[41].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&a(t,"class",_)},i(f){w||(ke(d.$$.fragment,f),w=!0)},o(f){Ce(d.$$.fragment,f),w=!1},d(f){f&&V(t),s.d(),o(),He(d)}}}function Yr(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o,c,f,S,C;return f=vs(i[32][0]),{c(){e=B("div"),t=B("div"),u=B("div"),u.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',p=W(),x=B("div"),m=B("label"),r=B("input"),n=W(),d=B("div"),d.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',v=W(),h=B("label"),_=B("input"),w=W(),k=B("div"),k.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',g=W(),s=B("div"),l=B("button"),l.textContent="取消",o=W(),c=B("button"),c.textContent="确定",a(u,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),a(r,"type","radio"),r.__value="powershell",ge(r,r.__value),a(r,"class","w-4 h-4 text-purple-600"),a(m,"class","flex items-center space-x-3 cursor-pointer"),a(_,"type","radio"),_.__value="cmd",ge(_,_.__value),a(_,"class","w-4 h-4 text-purple-600"),a(h,"class","flex items-center space-x-3 cursor-pointer"),a(x,"class","px-6 py-4 space-y-3"),a(l,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),a(c,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),a(s,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),a(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),f.p(r,_)},m(L,y){G(L,e,y),b(e,t),b(t,u),b(t,p),b(t,x),b(x,m),b(m,r),r.checked=r.__value===i[4],b(m,n),b(m,d),b(x,v),b(x,h),b(h,_),_.checked=_.__value===i[4],b(h,w),b(h,k),b(t,g),b(t,s),b(s,l),b(s,o),b(s,c),S||(C=[ie(r,"change",i[31]),ie(_,"change",i[33]),ie(l,"click",i[17]),ie(c,"click",i[16])],S=!0)},p(L,y){y[0]&16&&(r.checked=r.__value===L[4]),y[0]&16&&(_.checked=_.__value===L[4])},d(L){L&&V(e),f.r(),S=!1,Le(C)}}}function ho(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g;function s(E,A){return E[1].length===0?io:ro}let l=s(i),o=l(i);const c=[ao,oo],f=[];function S(E,A){return E[1].length>0?0:1}m=S(i),r=f[m]=c[m](i);function C(E){i[30](E)}let L={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:i[10],onCancel:i[11]};i[2]!==void 0&&(L.isOpen=i[2]),d=new sn({props:L}),et.push(()=>St(d,"isOpen",C));let y=i[3]&&Yr(i);return{c(){e=B("div"),t=B("div"),o.c(),u=W(),p=B("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',x=W(),r.c(),n=W(),ze(d.$$.fragment),h=W(),y&&y.c(),_=nt(),a(p,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),a(p,"title","打开本地终端"),a(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(E,A){G(E,e,A),b(e,t),o.m(t,null),b(t,u),b(t,p),b(e,x),f[m].m(e,null),G(E,n,A),Ie(d,E,A),G(E,h,A),y&&y.m(E,A),G(E,_,A),w=!0,k||(g=ie(p,"click",i[15]),k=!0)},p(E,A){l===(l=s(E))&&o?o.p(E,A):(o.d(1),o=l(E),o&&(o.c(),o.m(t,u)));let T=m;m=S(E),m===T?f[m].p(E,A):(ot(),Ce(f[T],1,1,()=>{f[T]=null}),at(),r=f[m],r?r.p(E,A):(r=f[m]=c[m](E),r.c()),ke(r,1),r.m(e,null));const O={};!v&&A[0]&4&&(v=!0,O.isOpen=E[2],yt(()=>v=!1)),d.$set(O),E[3]?y?y.p(E,A):(y=Yr(E),y.c(),y.m(_.parentNode,_)):y&&(y.d(1),y=null)},i(E){w||(ke(r),ke(d.$$.fragment,E),w=!0)},o(E){Ce(r),Ce(d.$$.fragment,E),w=!1},d(E){E&&(V(e),V(n),V(h),V(_)),o.d(),f[m].d(),He(d,E),y&&y.d(E),k=!1,g()}}}function fr(i){let e="";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e}function Qr(i){return btoa(fr(i))}function uo(i,e,t){let u,p;_t(i,wt,D=>t(7,u=D)),_t(i,ft,D=>t(23,p=D));let x={},m=[],r=new Map,n=!1,d=null,v=!1,h="powershell";async function _(D){var De;if(console.log("Connecting to:",D),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:N,GetPassword:z,HasPassword:Q,SavePassword:te}=window.wailsBindings;if(typeof N!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let q="",oe="";if(D.auth_type==="key")oe=prompt(`连接到 ${D.name}
如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：`)||"",q=D.key_path||"";else try{if(typeof Q=="function"&&await Q(D.id))q=await z(D.id),console.log("Using saved password");else if(q=prompt(`连接到 ${D.name}
请输入密码：`)||"",q&&confirm("是否保存密码以便下次自动连接？")&&typeof te=="function")try{await te(D.id,q),console.log("Password saved successfully")}catch(pe){console.error("Failed to save password:",pe)}}catch(_e){console.error("Failed to get saved password:",_e),q=prompt(`连接到 ${D.name}
请输入密码：`)||""}if(!q){console.log("Connection cancelled - no auth value provided");return}const ee=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",D.host,D.port,D.username,"auth_type:",D.auth_type);const ce={sessionId:ee,connection:D,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};ft.update(_e=>(_e.set(ee,ce),_e)),wt.set(ee),await Zt(),await new Promise(_e=>setTimeout(_e,50));let le=(De=x[ee])==null?void 0:De.getSize();if(le||(le={cols:80,rows:24},console.warn("Terminal not ready, using default size:",le)),console.log("Subscribing to events for session:",ee),Y(ee),await new Promise(_e=>setTimeout(_e,100)),!x[ee]){console.error("Terminal component not ready after delay");return}const xe=x[ee];if(!xe){console.error("Failed to get terminal reference for session:",ee);return}console.log("Terminal ready, attempting to connect...");const ye=D.auth_type==="key"?"SSH key":"password";xe.writeln(`正在连接 ${D.username}@${D.host}:${D.port} (${ye})...`),xe.writeln("");try{await N(ee,D.host,D.port,D.username,D.auth_type||"password",q,oe,le.cols,le.rows),ce.connected=!0,ft.update(_e=>(_e.set(ee,ce),_e)),setTimeout(()=>{xe.focus()},100)}catch(_e){console.error("Failed to connect:",_e),xe&&xe.writeln(`\r
连接失败: ${_e.message||_e}`),await w(ee)}}async function w(D){const N=r.get(D);N&&(N(),r.delete(D)),delete x[D];const{CloseSSH:z}=window.wailsBindings||{};if(typeof z=="function")try{await z(D)}catch(te){console.error("Failed to close session:",te)}ft.update(te=>(te.delete(D),te));const Q=Array.from(p.keys());u===D&&(Q.length>0?wt.set(Q[0]):wt.set(null))}function k(D){p.has(D)&&(wt.set(D),setTimeout(()=>{const N=x[D];if(N){N.focus();const z=N.getSize(),{ResizeSSH:Q}=window.wailsBindings||{};typeof Q=="function"&&Q(D,z.cols,z.rows).catch(console.error)}},50))}function g(D,N){N.stopPropagation();const z=p.get(D);z&&(z.connected?(d=D,t(2,n=!0)):w(D))}function s(){d&&(w(d),d=null),t(2,n=!1)}function l(){d=null,t(2,n=!1)}function o(D,N){const z=p.get(D);z&&(z.tabName=N.trim(),ft.update(Q=>(Q.set(D,z),Q)))}let c=null,f="";function S(D){const N=p.get(D);N&&(t(5,c=D),t(6,f=N.tabName||N.connection.name))}function C(){c&&f.trim()&&o(c,f.trim()),t(5,c=null),t(6,f="")}function L(){t(5,c=null),t(6,f="")}function y(D){D.key==="Enter"?C():D.key==="Escape"&&L()}async function E(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:D,SendSSHData:N,ResizeSSH:z}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(3,v=!0);return}await A("")}async function A(D){var oe;const{ConnectLocalShell:N}=window.wailsBindings,z=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Q={sessionId:z,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};ft.update(ee=>(ee.set(z,Q),ee)),wt.set(z),await Zt(),await new Promise(ee=>setTimeout(ee,50));let te=(oe=x[z])==null?void 0:oe.getSize();if(te||(te={cols:80,rows:24},console.warn("Terminal not ready, using default size:",te)),console.log("Subscribing to local events for session:",z),R(z),await new Promise(ee=>setTimeout(ee,100)),!x[z]){console.error("Terminal component not ready after delay");return}const q=x[z];if(!q){console.error("Failed to get terminal reference for session:",z);return}console.log("Terminal ready, starting local shell..."),q.writeln(`正在启动本地终端${D?` (${D})`:""}...`),q.writeln("");try{await N(z,D,te.cols,te.rows),Q.connected=!0,ft.update(ee=>(ee.set(z,Q),ee)),setTimeout(()=>{q.focus()},100)}catch(ee){console.error("Failed to start local shell:",ee),q&&q.writeln(`\r
启动本地终端失败: ${ee.message||ee}`),await w(z)}}function T(){t(3,v=!1),A(h)}function O(){t(3,v=!1)}function R(D){const N=`local:output:${D}`,z=er(N,Q=>{const te=x[D];if(te){const q=atob(Q),oe=new Uint8Array(q.length);for(let ee=0;ee<q.length;ee++)oe[ee]=q.charCodeAt(ee);te.write(oe)}});r.set(D,z)}function j(D,N){if(!p.has(D))return;const z=p.get(D),{SendSSHData:Q,SendLocalShellData:te}=window.wailsBindings||{};z&&z.type==="local"?typeof te=="function"&&te(D,N).catch(q=>{console.error("Failed to send local shell data:",q)}):typeof Q=="function"&&Q(D,N).catch(q=>{console.error("Failed to send SSH data:",q)})}function K(D,N){if(!p.has(D))return;const z=p.get(D),{SendSSHData:Q,SendSSHDataBinary:te,SendLocalShellData:q,SendLocalShellDataBinary:oe}=window.wailsBindings||{};if(z&&z.type==="local"){if(typeof oe=="function"){const ee=Qr(N);oe(D,ee).catch(ce=>{console.error("Failed to send local shell binary data:",ce)})}else if(typeof q=="function"){const ee=fr(N);q(D,ee).catch(ce=>{console.error("Failed to send local shell data:",ce)})}}else if(typeof te=="function"){const ee=Qr(N);te(D,ee).catch(ce=>{console.error("Failed to send SSH binary data:",ce)})}else if(typeof Q=="function"){const ee=fr(N);Q(D,ee).catch(ce=>{console.error("Failed to send SSH data:",ce)})}}function X(D,N,z){if(!p.has(D))return;const Q=p.get(D),{ResizeSSH:te,ResizeLocalShell:q}=window.wailsBindings||{};Q&&Q.type==="local"?typeof q=="function"&&q(D,N,z).catch(oe=>{console.error("Failed to resize local terminal:",oe)}):typeof te=="function"&&te(D,N,z).catch(oe=>{console.error("Failed to resize SSH terminal:",oe)})}function Y(D){const N=`ssh:output:${D}`,z=er(N,Q=>{const te=x[D];if(te){const q=atob(Q),oe=new Uint8Array(q.length);for(let ee=0;ee<q.length;ee++)oe[ee]=q.charCodeAt(ee);te.write(oe)}});r.set(D,z)}rr(()=>{r.forEach(D=>{D()})}),Tt(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=x,window.sessionUnsubscribers||(window.sessionUnsubscribers=r),console.log("TerminalPanel mounted, subscribing to events for sessions:",m),await Zt(),u&&x[u]&&setTimeout(()=>{x[u].focus()},100)});const Z=[[]];function M(){f=this.value,t(6,f)}const P=(D,N)=>g(D.sessionId,N),H=D=>k(D.sessionId),I=D=>S(D.sessionId),U=(D,N)=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),k(D.sessionId))};function J(D,N){et[D?"unshift":"push"](()=>{x[N.sessionId]=D,t(0,x)})}function $(D){n=D,t(2,n)}function ne(){h=this.__value,t(4,h)}function F(){h=this.__value,t(4,h)}return i.$$.update=()=>{i.$$.dirty[0]&8388608&&t(1,m=p?Array.from(p.values()):[]),i.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=x)},[x,m,n,v,h,c,f,u,k,g,s,l,S,C,y,E,T,O,j,K,X,_,Y,p,M,P,H,I,U,J,$,ne,Z,F]}class fo extends Qe{constructor(e){super(),Ye(this,e,uo,ho,Je,{handleConnect:21,subscribeToOutput:22},null,[-1,-1])}get handleConnect(){return this.$$.ctx[21]}get subscribeToOutput(){return this.$$.ctx[22]}}function _o(i){return window.go.main.App.AddConnection(i)}function po(i,e){return window.go.main.App.CalculateHash(i,e)}function go(i){return window.go.main.App.CancelTransfer(i)}function mo(i,e){return window.go.main.App.ChangeDirectory(i,e)}function vo(i){return window.go.main.App.CloseSSH(i)}function bo(i,e,t,u){return window.go.main.App.ConnectLocalShell(i,e,t,u)}function wo(i,e,t,u,p,x,m,r,n){return window.go.main.App.ConnectSSH(i,e,t,u,p,x,m,r,n)}function yo(i,e){return window.go.main.App.CreateDirectory(i,e)}function So(i,e){return window.go.main.App.DateTimeToTimestamp(i,e)}function ko(i){return window.go.main.App.DecodeBase64(i)}function Co(i,e){return window.go.main.App.DeleteFile(i,e)}function xo(i,e){return window.go.main.App.DeleteFiles(i,e)}function Eo(i){return window.go.main.App.DeletePassword(i)}function Lo(i,e,t){return window.go.main.App.DownloadFile(i,e,t)}function ts(i,e,t){return window.go.main.App.DownloadFiles(i,e,t)}function Do(i){return window.go.main.App.EncodeBase64(i)}function Mo(i){return window.go.main.App.EscapeJSON(i)}function Bo(i){return window.go.main.App.FormatJSON(i)}function Ao(){return window.go.main.App.GenerateUUIDv4()}function Ro(i){return window.go.main.App.GetConnection(i)}function To(){return window.go.main.App.GetConnections()}function Oo(i){return window.go.main.App.GetCurrentPath(i)}function Po(){return window.go.main.App.GetCurrentTimestamp()}function Io(i,e){return window.go.main.App.GetFileInfo(i,e)}function Ho(i){return window.go.main.App.GetMonitoringData(i)}function Fo(i){return window.go.main.App.GetPassword(i)}function Wo(){return window.go.main.App.GetSettings()}function zo(i){return window.go.main.App.GetTransferStatus(i)}function jo(i){return window.go.main.App.Greet(i)}function Uo(i){return window.go.main.App.HasPassword(i)}function rs(i,e){return window.go.main.App.ListFiles(i,e)}function No(){return window.go.main.App.ListSSHSessions()}function Ko(i){return window.go.main.App.MinifyJSON(i)}function Vo(i){return window.go.main.App.RemoveConnection(i)}function qo(i,e,t){return window.go.main.App.RenameFile(i,e,t)}function Go(i,e,t){return window.go.main.App.ResizeLocalShell(i,e,t)}function Jo(i,e,t){return window.go.main.App.ResizeSSH(i,e,t)}function Xo(i,e){return window.go.main.App.SaveBinaryFile(i,e)}function Zo(i,e){return window.go.main.App.SavePassword(i,e)}function is(){return window.go.main.App.SelectDownloadDirectory()}function Yo(){return window.go.main.App.SelectSSHKeyFile()}function ss(){return window.go.main.App.SelectUploadFiles()}function Qo(i,e){return window.go.main.App.SendLocalShellData(i,e)}function $o(i,e){return window.go.main.App.SendLocalShellDataBinary(i,e)}function ea(i,e){return window.go.main.App.SendSSHData(i,e)}function ta(i,e){return window.go.main.App.SendSSHDataBinary(i,e)}function ra(){return window.go.main.App.ShowAboutDialog()}function ia(i,e){return window.go.main.App.ShowErrorDialog(i,e)}function sa(i,e){return window.go.main.App.ShowMessageDialog(i,e)}function na(i,e){return window.go.main.App.ShowQuestionDialog(i,e)}function oa(i,e,t,u,p,x){return window.go.main.App.TestConnection(i,e,t,u,p,x)}function aa(i,e){return window.go.main.App.TimestampToDateTime(i,e)}function la(i){return window.go.main.App.UpdateConnection(i)}function ca(i){return window.go.main.App.UpdateSettings(i)}function ha(i,e,t){return window.go.main.App.UploadFile(i,e,t)}function ns(i,e,t){return window.go.main.App.UploadFiles(i,e,t)}function da(i){return window.go.main.App.ValidateJSON(i)}const ua=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:_o,CalculateHash:po,CancelTransfer:go,ChangeDirectory:mo,CloseSSH:vo,ConnectLocalShell:bo,ConnectSSH:wo,CreateDirectory:yo,DateTimeToTimestamp:So,DecodeBase64:ko,DeleteFile:Co,DeleteFiles:xo,DeletePassword:Eo,DownloadFile:Lo,DownloadFiles:ts,EncodeBase64:Do,EscapeJSON:Mo,FormatJSON:Bo,GenerateUUIDv4:Ao,GetConnection:Ro,GetConnections:To,GetCurrentPath:Oo,GetCurrentTimestamp:Po,GetFileInfo:Io,GetMonitoringData:Ho,GetPassword:Fo,GetSettings:Wo,GetTransferStatus:zo,Greet:jo,HasPassword:Uo,ListFiles:rs,ListSSHSessions:No,MinifyJSON:Ko,RemoveConnection:Vo,RenameFile:qo,ResizeLocalShell:Go,ResizeSSH:Jo,SaveBinaryFile:Xo,SavePassword:Zo,SelectDownloadDirectory:is,SelectSSHKeyFile:Yo,SelectUploadFiles:ss,SendLocalShellData:Qo,SendLocalShellDataBinary:$o,SendSSHData:ea,SendSSHDataBinary:ta,ShowAboutDialog:ra,ShowErrorDialog:ia,ShowMessageDialog:sa,ShowQuestionDialog:na,TestConnection:oa,TimestampToDateTime:aa,UpdateConnection:la,UpdateSettings:ca,UploadFile:ha,UploadFiles:ns,ValidateJSON:da},Symbol.toStringTag,{value:"Module"})),{Map:fa}=Ui;function $r(i,e,t){const u=i.slice();return u[43]=e[t],u[45]=t,u}function _a(i){let e,t,u;function p(r,n){return r[0]==="/"?ma:ga}let x=p(i),m=x(i);return{c(){e=B("span"),m.c(),a(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),a(e,"title","点击编辑路径")},m(r,n){G(r,e,n),m.m(e,null),t||(u=ie(e,"click",i[15]),t=!0)},p(r,n){x===(x=p(r))&&m?m.p(r,n):(m.d(1),m=x(r),m&&(m.c(),m.m(e,null)))},d(r){r&&V(e),m.d(),t=!1,u()}}}function pa(i){let e,t,u,p,x;return{c(){e=B("span"),e.textContent="/",t=W(),u=B("input"),a(e,"class","text-gray-400 dark:text-gray-500"),a(u,"type","text"),a(u,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(m,r){G(m,e,r),G(m,t,r),G(m,u,r),ge(u,i[6]),p||(x=[ie(u,"input",i[26]),ie(u,"keydown",i[27]),ie(u,"blur",i[16]),ji(focus.call(null,u))],p=!0)},p(m,r){r[0]&64&&u.value!==m[6]&&ge(u,m[6])},d(m){m&&(V(e),V(t),V(u)),p=!1,Le(x)}}}function ga(i){let e=i[0].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=se(e)},m(u,p){G(u,t,p)},p(u,p){p[0]&1&&e!==(e=u[0].split("/").filter(Boolean).join(" / ")+"")&&he(t,e)},d(u){u&&V(t)}}}function ma(i){let e;return{c(){e=se("/")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function ei(i){let e,t,u,p,x,m,r,n;return{c(){e=B("div"),t=B("input"),u=W(),p=B("button"),p.textContent="跳转",x=W(),m=B("button"),m.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',a(t,"type","text"),a(t,"placeholder","输入路径,如：/var/www/html"),a(t,"class","flex-1 px-3 py-2 text-xs bg-white dark:bg-gray-800 border border-purple-200 dark:border-purple-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"),a(p,"class","px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-lg transition-colors font-medium"),a(m,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),a(m,"title","取消"),a(e,"class","mt-2 flex items-center gap-2")},m(d,v){G(d,e,v),b(e,t),ge(t,i[8]),b(e,u),b(e,p),b(e,x),b(e,m),r||(n=[ie(t,"input",i[29]),ie(t,"keydown",i[30]),ji(focus.call(null,t)),ie(p,"click",i[18]),ie(m,"click",i[31])],r=!0)},p(d,v){v[0]&256&&t.value!==d[8]&&ge(t,d[8])},d(d){d&&V(e),r=!1,Le(n)}}}function va(i){let e=[],t=new fa,u,p=qe(i[9]);const x=m=>m[43].path;for(let m=0;m<p.length;m+=1){let r=$r(i,p,m),n=x(r);t.set(n,e[m]=ti(n,r))}return{c(){for(let m=0;m<e.length;m+=1)e[m].c();u=nt()},m(m,r){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(m,r);G(m,u,r)},p(m,r){r[0]&12804&&(p=qe(m[9]),e=Ht(e,r,x,1,m,p,t,u.parentNode,ir,ti,u,$r))},d(m){m&&V(u);for(let r=0;r<e.length;r+=1)e[r].d(m)}}}function ba(i){let e;return{c(){e=B("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',a(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function wa(i){let e;return{c(){e=B("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',a(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function ya(i){let e,t,u,p,x,m,r,n,d,v;return{c(){e=B("div"),t=re("svg"),u=re("path"),p=W(),x=B("span"),m=se(i[4]),r=W(),n=B("button"),n.textContent="重试",a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),a(t,"class","w-6 h-6"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),a(x,"class","text-center px-4"),a(n,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),a(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(h,_){G(h,e,_),b(e,t),b(t,u),b(e,p),b(e,x),b(x,m),b(e,r),b(e,n),d||(v=ie(n,"click",i[10]),d=!0)},p(h,_){_[0]&16&&he(m,h[4])},d(h){h&&V(e),d=!1,v()}}}function Sa(i){let e;return{c(){e=B("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',a(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function ka(i){let e,t,u,p,x,m,r,n=i[43].name+"",d,v,h,_,w=ri(i[43].size)+"",k,g,s,l,o,c=i[43].modified+"",f,S,C,L=i[43].mode+"",y;return{c(){e=B("div"),t=W(),u=re("svg"),p=re("path"),x=W(),m=B("div"),r=B("div"),d=se(n),v=W(),h=B("div"),_=B("span"),k=se(w),g=W(),s=B("span"),s.textContent="•",l=W(),o=B("span"),f=se(c),S=W(),C=B("span"),y=se(L),a(e,"class","w-3"),a(p,"stroke-linecap","round"),a(p,"stroke-linejoin","round"),a(p,"stroke-width","2"),a(p,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),a(u,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),a(u,"fill","none"),a(u,"stroke","currentColor"),a(u,"viewBox","0 0 24 24"),a(r,"class","text-gray-900 dark:text-white font-medium truncate"),a(h,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),a(m,"class","flex-1 min-w-0"),a(C,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(E,A){G(E,e,A),G(E,t,A),G(E,u,A),b(u,p),G(E,x,A),G(E,m,A),b(m,r),b(r,d),b(m,v),b(m,h),b(h,_),b(_,k),b(h,g),b(h,s),b(h,l),b(h,o),b(o,f),G(E,S,A),G(E,C,A),b(C,y)},p(E,A){A[0]&512&&n!==(n=E[43].name+"")&&he(d,n),A[0]&512&&w!==(w=ri(E[43].size)+"")&&he(k,w),A[0]&512&&c!==(c=E[43].modified+"")&&he(f,c),A[0]&512&&L!==(L=E[43].mode+"")&&he(y,L)},d(E){E&&(V(e),V(t),V(u),V(x),V(m),V(S),V(C))}}}function Ca(i){let e,t,u,p,x,m,r,n=i[43].name+"",d;function v(w,k){return k[0]&516&&(e=null),e==null&&(e=!!w[2].has(w[43].path)),e?La:Ea}let h=v(i,[-1,-1]),_=h(i);return{c(){_.c(),t=W(),u=re("svg"),p=re("path"),x=W(),m=B("div"),r=B("div"),d=se(n),a(p,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),a(u,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),a(u,"fill","currentColor"),a(u,"viewBox","0 0 24 24"),a(r,"class","text-gray-900 dark:text-white font-medium truncate"),a(m,"class","flex-1 min-w-0")},m(w,k){_.m(w,k),G(w,t,k),G(w,u,k),b(u,p),G(w,x,k),G(w,m,k),b(m,r),b(r,d)},p(w,k){h!==(h=v(w,k))&&(_.d(1),_=h(w),_&&(_.c(),_.m(t.parentNode,t))),k[0]&512&&n!==(n=w[43].name+"")&&he(d,n)},d(w){w&&(V(t),V(u),V(x),V(m)),_.d(w)}}}function xa(i){let e,t,u,p,x,m=i[43].name+"",r,n,d;return{c(){e=re("svg"),t=re("path"),u=W(),p=B("div"),x=B("div"),r=se(m),n=W(),d=B("div"),d.textContent="返回上一层",a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),a(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24"),a(x,"class","text-gray-600 dark:text-gray-300"),a(d,"class","text-gray-400 dark:text-gray-500 text-[10px]"),a(p,"class","flex-1 min-w-0")},m(v,h){G(v,e,h),b(e,t),G(v,u,h),G(v,p,h),b(p,x),b(x,r),b(p,n),b(p,d)},p(v,h){h[0]&512&&m!==(m=v[43].name+"")&&he(r,m)},d(v){v&&(V(e),V(u),V(p))}}}function Ea(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M9 5l7 7-7 7"),a(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function La(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M19 9l-7 7-7-7"),a(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function ti(i,e){let t,u,p,x,m;function r(_,w){return _[43].is_parent?xa:_[43].is_dir?Ca:ka}let n=r(e),d=n(e);function v(){return e[32](e[43])}function h(){return e[33](e[43])}return{key:i,first:null,c(){t=B("div"),d.c(),u=W(),a(t,"class",p="group flex items-center gap-2 px-3 py-2 hover:bg-purple-50 dark:hover:bg-purple-900/20 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[43].is_parent?"text-gray-500 dark:text-gray-400 italic":"")),this.first=t},m(_,w){G(_,t,w),d.m(t,null),b(t,u),x||(m=[ie(t,"click",v),ie(t,"dblclick",h)],x=!0)},p(_,w){e=_,n===(n=r(e))&&d?d.p(e,w):(d.d(1),d=n(e),d&&(d.c(),d.m(t,u))),w[0]&512&&p!==(p="group flex items-center gap-2 px-3 py-2 hover:bg-purple-50 dark:hover:bg-purple-900/20 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[43].is_parent?"text-gray-500 dark:text-gray-400 italic":""))&&a(t,"class",p)},d(_){_&&V(t),d.d(),x=!1,Le(m)}}}function Da(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o,c,f,S,C,L,y,E,A,T;function O(M,P){return M[5]?pa:_a}let R=O(i),j=R(i),K=i[7]&&ei(i);function X(M,P){return M[3]?Sa:M[4]?ya:M[9].length===0?wa:M[1]?ba:va}let Y=X(i),Z=Y(i);return{c(){e=B("div"),t=B("div"),u=B("div"),p=B("h3"),p.textContent="文件管理",x=W(),m=B("div"),r=B("button"),n=re("svg"),d=re("path"),v=W(),h=B("button"),_=re("svg"),w=re("path"),k=W(),g=B("button"),g.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',s=W(),l=B("div"),o=B("div"),c=B("button"),c.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',f=W(),j.c(),S=W(),C=B("button"),C.innerHTML='<svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',L=W(),K&&K.c(),y=W(),E=B("div"),Z.c(),a(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),a(n,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),a(n,"fill","none"),a(n,"stroke","currentColor"),a(n,"viewBox","0 0 24 24"),r.disabled=i[1],a(r,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(r,"title","刷新"),a(w,"stroke-linecap","round"),a(w,"stroke-linejoin","round"),a(w,"stroke-width","2"),a(w,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),a(_,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),a(_,"fill","none"),a(_,"stroke","currentColor"),a(_,"viewBox","0 0 24 24"),h.disabled=i[1],a(h,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(h,"title","上传到服务器"),a(g,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(g,"title","下载到本地"),a(m,"class","flex items-center gap-1"),a(u,"class","flex items-center justify-between mb-2"),a(c,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),a(c,"title","根目录"),a(o,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),a(C,"class","p-2 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors"),a(C,"title","跳转到指定目录"),a(l,"class","flex items-center gap-2"),a(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),a(E,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(M,P){G(M,e,P),b(e,t),b(t,u),b(u,p),b(u,x),b(u,m),b(m,r),b(r,n),b(n,d),b(m,v),b(m,h),b(h,_),b(_,w),b(m,k),b(m,g),b(t,s),b(t,l),b(l,o),b(o,c),b(o,f),j.m(o,null),b(l,S),b(l,C),b(t,L),K&&K.m(t,null),b(e,y),b(e,E),Z.m(E,null),A||(T=[ie(r,"click",i[10]),ie(h,"click",i[11]),ie(c,"click",i[25]),ie(C,"click",i[28])],A=!0)},p(M,P){P[0]&2&&(r.disabled=M[1]),P[0]&2&&(h.disabled=M[1]),R===(R=O(M))&&j?j.p(M,P):(j.d(1),j=R(M),j&&(j.c(),j.m(o,null))),M[7]?K?K.p(M,P):(K=ei(M),K.c(),K.m(t,null)):K&&(K.d(1),K=null),Y===(Y=X(M))&&Z?Z.p(M,P):(Z.d(1),Z=Y(M),Z&&(Z.c(),Z.m(E,null)))},i:ve,o:ve,d(M){M&&V(e),j.d(),K&&K.d(),Z.d(),A=!1,Le(T)}}}function Ma(i){return!i||i.length===0?[]:[...i].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function ri(i){if(!i)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;i>=1024&&t<e.length-1;)i/=1024,t++;return`${i.toFixed(1)} ${e[t]}`}function Ba(i,e,t){let u,p,x,m,r,n,d,v,h;_t(i,ft,D=>t(23,v=D)),_t(i,wt,D=>t(24,h=D));let _=new Map,w=new Set([]),k=[],g=!1,s=null,l=[],o=!1,c="",f=!1,S="";function C(D){return D&&_.get(D)||"/"}function L(D,N){D&&_.set(D,N)}async function y(D){if(!(!h||!p)&&!x){t(3,g=!0),t(4,s=null);try{const N=await rs(h,D);t(19,k=N||[]),L(h,D)}catch(N){console.error("Failed to load directory:",N),t(4,s=N.message||"加载目录失败")}finally{t(3,g=!1)}}}async function E(){await y(r)}async function A(){if(!(!h||!p||x))try{const D=await ss();if(!D||D.length===0)return;(await ns(h,D,r)).forEach(z=>O(z)),setTimeout(()=>y(r),2e3)}catch(D){console.error("Upload failed:",D),t(4,s=D.message||"上传失败")}}async function T(D){if(!(!h||!p||x||D.is_dir))try{const N=await is();if(!N)return;(await ts(h,[D.path],N)).forEach(Q=>O(Q))}catch(N){console.error("Download failed:",N),t(4,s=N.message||"下载失败")}}function O(D){const N=`sftp:progress:${D}`,z=er(N,Q=>{(Q.status==="completed"||Q.status==="failed")&&setTimeout(()=>{},3e3)});l.push(z)}function R(D){y(D)}function j(D){if(D===-1)R("/");else{const N="/"+d.slice(0,D+1).join("/");R(N)}}function K(){t(6,c=r),t(5,o=!0)}function X(){c.trim()&&R(c.trim()),t(5,o=!1)}function Y(){t(5,o=!1),t(6,c="")}function Z(){S.trim()&&(R(S.trim()),t(7,f=!1),t(8,S=""))}Tt(()=>{}),rr(()=>{l.forEach(D=>D())});const M=()=>j(-1);function P(){c=this.value,t(6,c)}const H=D=>{D.key==="Enter"?X():D.key==="Escape"&&Y()},I=()=>t(7,f=!f);function U(){S=this.value,t(8,S)}const J=D=>{D.key==="Enter"?Z():D.key==="Escape"&&(t(7,f=!1),t(8,S=""))},$=()=>{t(7,f=!1),t(8,S="")},ne=D=>D.is_dir&&R(D.path),F=D=>{D.is_dir||T(D)};return i.$$.update=()=>{if(i.$$.dirty[0]&25165824&&t(22,u=h?v.get(h):null),i.$$.dirty[0]&4194304&&t(21,p=(u==null?void 0:u.connected)||!1),i.$$.dirty[0]&4194304&&t(1,x=(u==null?void 0:u.type)==="local"),i.$$.dirty[0]&2097154&&t(20,m=p&&!x),i.$$.dirty[0]&16777216&&t(0,r=C(h)),i.$$.dirty[0]&524289&&t(9,n=(()=>{const D=Ma(k);return r==="/"?D:[{name:"..",path:r.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...D]})()),i.$$.dirty[0]&1&&(d=r.split("/").filter(D=>D)),i.$$.dirty[0]&17825793&&h&&m&&y(r),i.$$.dirty[0]&8388608&&v){const D=new Set(v.keys());for(const N of _.keys())D.has(N)||_.delete(N)}},[r,x,w,g,s,o,c,f,S,n,E,A,T,R,j,K,X,Y,Z,k,m,p,u,v,h,M,P,H,I,U,J,$,ne,F]}class Aa extends Qe{constructor(e){super(),Ye(this,e,Ba,Da,Je,{},null,[-1,-1])}}function ii(i,e,t){const u=i.slice();return u[19]=e[t],u[21]=t,u}function Ra(i){let e;return{c(){e=se("请先连接到服务器")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function Ta(i){let e;return{c(){e=se("实时数据获取中...")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function Oa(i){let e;return{c(){e=se("本地终端不支持服务器监控")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function si(i){let e;return{c(){e=B("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',a(e,"class","p-3 space-y-3")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function Pa(i){let e;return{c(){e=B("div"),e.textContent="等待数据...",a(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function Ia(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s;return{c(){e=re("svg"),t=re("defs"),u=re("linearGradient"),p=re("stop"),x=re("stop"),m=re("line"),r=re("line"),n=re("line"),d=re("path"),h=re("path"),w=W(),k=B("div"),k.textContent="100%",g=W(),s=B("div"),s.textContent="0%",a(p,"offset","0%"),de(p,"stop-color","rgb(139, 92, 246)"),de(p,"stop-opacity","0.3"),a(x,"offset","100%"),de(x,"stop-color","rgb(139, 92, 246)"),de(x,"stop-opacity","0.05"),a(u,"id","cpuGradient"),a(u,"x1","0%"),a(u,"y1","0%"),a(u,"x2","0%"),a(u,"y2","100%"),a(m,"x1","0"),a(m,"y1","25%"),a(m,"x2","100%"),a(m,"y2","25%"),a(m,"stroke","currentColor"),a(m,"stroke-width","0.5"),a(m,"class","text-gray-200 dark:text-gray-700"),a(r,"x1","0"),a(r,"y1","50%"),a(r,"x2","100%"),a(r,"y2","50%"),a(r,"stroke","currentColor"),a(r,"stroke-width","0.5"),a(r,"class","text-gray-200 dark:text-gray-700"),a(n,"x1","0"),a(n,"y1","75%"),a(n,"x2","100%"),a(n,"y2","75%"),a(n,"stroke","currentColor"),a(n,"stroke-width","0.5"),a(n,"class","text-gray-200 dark:text-gray-700"),a(d,"d",v=i[2].map(i[12]).join(" ")+" L 100 100 L 0 100 Z"),a(d,"fill","url(#cpuGradient)"),a(d,"transform","scale(1, 0.8) translate(0, 10)"),a(h,"d",_=i[2].map(i[13]).join(" ")),a(h,"fill","none"),a(h,"stroke","rgb(139, 92, 246)"),a(h,"stroke-width","2"),a(h,"stroke-linecap","round"),a(h,"stroke-linejoin","round"),a(h,"transform","scale(1, 0.8) translate(0, 10)"),a(e,"class","w-full h-full"),a(e,"preserveAspectRatio","none"),a(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),a(s,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(l,o){G(l,e,o),b(e,t),b(t,u),b(u,p),b(u,x),b(e,m),b(e,r),b(e,n),b(e,d),b(e,h),G(l,w,o),G(l,k,o),G(l,g,o),G(l,s,o)},p(l,o){o&4&&v!==(v=l[2].map(l[12]).join(" ")+" L 100 100 L 0 100 Z")&&a(d,"d",v),o&4&&_!==(_=l[2].map(l[13]).join(" "))&&a(h,"d",_)},d(l){l&&(V(e),V(w),V(k),V(g),V(s))}}}function ni(i){let e,t=qe(i[4]),u=[];for(let p=0;p<t.length;p+=1)u[p]=oi(ii(i,t,p));return{c(){e=B("div");for(let p=0;p<u.length;p+=1)u[p].c();a(e,"class","mt-2 flex flex-wrap gap-1")},m(p,x){G(p,e,x);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(e,null)},p(p,x){if(x&16){t=qe(p[4]);let m;for(m=0;m<t.length;m+=1){const r=ii(p,t,m);u[m]?u[m].p(r,x):(u[m]=oi(r),u[m].c(),u[m].m(e,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=t.length}},d(p){p&&V(e),tr(u,p)}}}function oi(i){let e,t,u,p,x,m;return{c(){e=B("div"),t=B("div"),u=B("div"),p=W(),x=B("span"),x.textContent=`C${i[21]+1}`,m=W(),a(u,"class","h-full rounded-full transition-all duration-300"),de(u,"width",i[19]+"%"),de(u,"background-color",ut(i[19])),a(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),a(x,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),a(e,"class","flex flex-col items-center")},m(r,n){G(r,e,n),b(e,t),b(t,u),b(e,p),b(e,x),b(e,m)},p(r,n){n&16&&de(u,"width",r[19]+"%"),n&16&&de(u,"background-color",ut(r[19]))},d(r){r&&V(e)}}}function Ha(i){let e;return{c(){e=B("div"),e.textContent="等待数据...",a(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,u){G(t,e,u)},p:ve,d(t){t&&V(e)}}}function Fa(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s;return{c(){e=re("svg"),t=re("defs"),u=re("linearGradient"),p=re("stop"),x=re("stop"),m=re("line"),r=re("line"),n=re("line"),d=re("path"),h=re("path"),w=W(),k=B("div"),k.textContent="100%",g=W(),s=B("div"),s.textContent="0%",a(p,"offset","0%"),de(p,"stop-color","rgb(16, 185, 129)"),de(p,"stop-opacity","0.3"),a(x,"offset","100%"),de(x,"stop-color","rgb(16, 185, 129)"),de(x,"stop-opacity","0.05"),a(u,"id","memoryGradient"),a(u,"x1","0%"),a(u,"y1","0%"),a(u,"x2","0%"),a(u,"y2","100%"),a(m,"x1","0"),a(m,"y1","25%"),a(m,"x2","100%"),a(m,"y2","25%"),a(m,"stroke","currentColor"),a(m,"stroke-width","0.5"),a(m,"class","text-gray-200 dark:text-gray-700"),a(r,"x1","0"),a(r,"y1","50%"),a(r,"x2","100%"),a(r,"y2","50%"),a(r,"stroke","currentColor"),a(r,"stroke-width","0.5"),a(r,"class","text-gray-200 dark:text-gray-700"),a(n,"x1","0"),a(n,"y1","75%"),a(n,"x2","100%"),a(n,"y2","75%"),a(n,"stroke","currentColor"),a(n,"stroke-width","0.5"),a(n,"class","text-gray-200 dark:text-gray-700"),a(d,"d",v=i[3].map(i[14]).join(" ")+" L 100 100 L 0 100 Z"),a(d,"fill","url(#memoryGradient)"),a(d,"transform","scale(1, 0.8) translate(0, 10)"),a(h,"d",_=i[3].map(i[15]).join(" ")),a(h,"fill","none"),a(h,"stroke","rgb(16, 185, 129)"),a(h,"stroke-width","2"),a(h,"stroke-linecap","round"),a(h,"stroke-linejoin","round"),a(h,"transform","scale(1, 0.8) translate(0, 10)"),a(e,"class","w-full h-full"),a(e,"preserveAspectRatio","none"),a(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),a(s,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(l,o){G(l,e,o),b(e,t),b(t,u),b(u,p),b(u,x),b(e,m),b(e,r),b(e,n),b(e,d),b(e,h),G(l,w,o),G(l,k,o),G(l,g,o),G(l,s,o)},p(l,o){o&8&&v!==(v=l[3].map(l[14]).join(" ")+" L 100 100 L 0 100 Z")&&a(d,"d",v),o&8&&_!==(_=l[3].map(l[15]).join(" "))&&a(h,"d",_)},d(l){l&&(V(e),V(w),V(k),V(g),V(s))}}}function Wa(i){var Cr,xr;let e,t,u,p,x,m,r,n,d,v,h,_,w,k=i[5].cpu.toFixed(1)+"",g,s,l,o,c,f,S,C,L,y,E,A=i[5].memory.toFixed(2)+"",T,O,R,j,K,X,Y,Z,M,P,H=i[5].disk+"",I,U,J,$,ne,F,D,N,z,Q=i[7].used+"",te,q,oe,ee,ce=i[7].total+"",le,xe,ye,De,_e,pe,we,Ke,be,Ue,Xe=Xt(((Cr=i[5].network)==null?void 0:Cr.in)||0)+"",Ve,Fe,Ae,Ee,me,it,Be=Xt(((xr=i[5].network)==null?void 0:xr.out)||0)+"",Oe,vt,st,Ze,gt,Ge,rt,ct,ae,ue,We=(i[6].os||"Unknown")+"",Ne,je,Re,Pe,fe,Me,Ft=(i[6].kernel||"Unknown")+"",sr,mr,Et,Wt,vr,zt,jt=(i[6].uptime||"Unknown")+"",nr,br,Lt,Ut,wr,Nt,Kt=(i[6].processes||"N/A")+"",or;function yr(Se,Te){return Se[0]?Oa:Se[1]?Ta:Ra}let Vt=yr(i),bt=Vt(i),tt=i[0]&&si();function Sr(Se,Te){return Se[2].length>1?Ia:Pa}let qt=Sr(i),ht=qt(i),$e=i[4].length>0&&ni(i);function kr(Se,Te){return Se[3].length>1?Fa:Ha}let Gt=kr(i),dt=Gt(i);return{c(){e=B("div"),t=B("div"),u=B("h3"),u.textContent="服务器监控",p=W(),x=B("div"),bt.c(),m=W(),tt&&tt.c(),r=W(),n=B("div"),d=B("div"),v=B("div"),h=B("div"),h.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',_=W(),w=B("span"),g=se(k),s=se("%"),l=W(),o=B("div"),ht.c(),c=W(),$e&&$e.c(),f=W(),S=B("div"),C=B("div"),L=B("div"),L.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',y=W(),E=B("span"),T=se(A),O=se("%"),R=W(),j=B("div"),dt.c(),K=W(),X=B("div"),Y=B("div"),Z=B("div"),Z.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',M=W(),P=B("span"),I=se(H),U=se("%"),J=W(),$=B("div"),ne=B("div"),F=W(),D=B("div"),N=B("span"),z=se("已用 "),te=se(Q),q=W(),oe=B("span"),ee=se("总计 "),le=se(ce),xe=W(),ye=B("div"),De=B("div"),De.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',_e=W(),pe=B("div"),we=B("div"),Ke=B("div"),Ke.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',be=W(),Ue=B("span"),Ve=se(Xe),Fe=W(),Ae=B("div"),Ee=B("div"),Ee.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',me=W(),it=B("span"),Oe=se(Be),vt=W(),st=B("div"),Ze=B("div"),Ze.textContent="系统信息",gt=W(),Ge=B("div"),rt=B("div"),ct=B("span"),ct.textContent="操作系统",ae=W(),ue=B("span"),Ne=se(We),je=W(),Re=B("div"),Pe=B("span"),Pe.textContent="内核版本",fe=W(),Me=B("span"),sr=se(Ft),mr=W(),Et=B("div"),Wt=B("span"),Wt.textContent="运行时间",vr=W(),zt=B("span"),nr=se(jt),br=W(),Lt=B("div"),Ut=B("span"),Ut.textContent="进程数",wr=W(),Nt=B("span"),or=se(Kt),a(u,"class","text-sm font-semibold text-gray-900 dark:text-white"),a(x,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),a(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),a(h,"class","flex items-center gap-2"),a(w,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),de(w,"color",ut(i[5].cpu)),a(v,"class","flex items-center justify-between mb-2"),a(o,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),a(d,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),a(L,"class","flex items-center gap-2"),a(E,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),de(E,"color",ut(i[5].memory)),a(C,"class","flex items-center justify-between mb-2"),a(j,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),a(S,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),a(Z,"class","flex items-center gap-2"),a(P,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),de(P,"color",ut(i[5].disk)),a(Y,"class","flex items-center justify-between mb-2"),a(ne,"class","h-2 rounded-full transition-all duration-300"),de(ne,"width",i[5].disk+"%"),de(ne,"background-color",ut(i[5].disk)),a($,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),a(D,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),a(X,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),a(De,"class","flex items-center gap-2 mb-3"),a(Ke,"class","flex items-center gap-2"),a(Ue,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),a(we,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),a(Ee,"class","flex items-center gap-2"),a(it,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),a(Ae,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),a(pe,"class","space-y-2"),a(ye,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),a(Ze,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),a(ct,"class","text-gray-600 dark:text-gray-400"),a(ue,"class","text-gray-900 dark:text-white font-medium"),a(rt,"class","flex justify-between py-1"),a(Pe,"class","text-gray-600 dark:text-gray-400"),a(Me,"class","text-gray-900 dark:text-white font-medium"),a(Re,"class","flex justify-between py-1"),a(Wt,"class","text-gray-600 dark:text-gray-400"),a(zt,"class","text-gray-900 dark:text-white font-medium"),a(Et,"class","flex justify-between py-1"),a(Ut,"class","text-gray-600 dark:text-gray-400"),a(Nt,"class","text-gray-900 dark:text-white font-medium"),a(Lt,"class","flex justify-between py-1"),a(Ge,"class","space-y-1.5 text-[10px]"),a(st,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),a(n,"class","p-3 space-y-3"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(Se,Te){G(Se,e,Te),b(e,t),b(t,u),b(t,p),b(t,x),bt.m(x,null),b(e,m),tt&&tt.m(e,null),b(e,r),b(e,n),b(n,d),b(d,v),b(v,h),b(v,_),b(v,w),b(w,g),b(w,s),b(d,l),b(d,o),ht.m(o,null),b(d,c),$e&&$e.m(d,null),b(n,f),b(n,S),b(S,C),b(C,L),b(C,y),b(C,E),b(E,T),b(E,O),b(S,R),b(S,j),dt.m(j,null),b(n,K),b(n,X),b(X,Y),b(Y,Z),b(Y,M),b(Y,P),b(P,I),b(P,U),b(X,J),b(X,$),b($,ne),b(X,F),b(X,D),b(D,N),b(N,z),b(N,te),b(D,q),b(D,oe),b(oe,ee),b(oe,le),b(n,xe),b(n,ye),b(ye,De),b(ye,_e),b(ye,pe),b(pe,we),b(we,Ke),b(we,be),b(we,Ue),b(Ue,Ve),b(pe,Fe),b(pe,Ae),b(Ae,Ee),b(Ae,me),b(Ae,it),b(it,Oe),b(n,vt),b(n,st),b(st,Ze),b(st,gt),b(st,Ge),b(Ge,rt),b(rt,ct),b(rt,ae),b(rt,ue),b(ue,Ne),b(Ge,je),b(Ge,Re),b(Re,Pe),b(Re,fe),b(Re,Me),b(Me,sr),b(Ge,mr),b(Ge,Et),b(Et,Wt),b(Et,vr),b(Et,zt),b(zt,nr),b(Ge,br),b(Ge,Lt),b(Lt,Ut),b(Lt,wr),b(Lt,Nt),b(Nt,or)},p(Se,[Te]){var Er,Lr;Vt!==(Vt=yr(Se))&&(bt.d(1),bt=Vt(Se),bt&&(bt.c(),bt.m(x,null))),Se[0]?tt||(tt=si(),tt.c(),tt.m(e,r)):tt&&(tt.d(1),tt=null),Te&32&&k!==(k=Se[5].cpu.toFixed(1)+"")&&he(g,k),Te&32&&de(w,"color",ut(Se[5].cpu)),qt===(qt=Sr(Se))&&ht?ht.p(Se,Te):(ht.d(1),ht=qt(Se),ht&&(ht.c(),ht.m(o,null))),Se[4].length>0?$e?$e.p(Se,Te):($e=ni(Se),$e.c(),$e.m(d,null)):$e&&($e.d(1),$e=null),Te&32&&A!==(A=Se[5].memory.toFixed(2)+"")&&he(T,A),Te&32&&de(E,"color",ut(Se[5].memory)),Gt===(Gt=kr(Se))&&dt?dt.p(Se,Te):(dt.d(1),dt=Gt(Se),dt&&(dt.c(),dt.m(j,null))),Te&32&&H!==(H=Se[5].disk+"")&&he(I,H),Te&32&&de(P,"color",ut(Se[5].disk)),Te&32&&de(ne,"width",Se[5].disk+"%"),Te&32&&de(ne,"background-color",ut(Se[5].disk)),Te&128&&Q!==(Q=Se[7].used+"")&&he(te,Q),Te&128&&ce!==(ce=Se[7].total+"")&&he(le,ce),Te&32&&Xe!==(Xe=Xt(((Er=Se[5].network)==null?void 0:Er.in)||0)+"")&&he(Ve,Xe),Te&32&&Be!==(Be=Xt(((Lr=Se[5].network)==null?void 0:Lr.out)||0)+"")&&he(Oe,Be),Te&64&&We!==(We=(Se[6].os||"Unknown")+"")&&he(Ne,We),Te&64&&Ft!==(Ft=(Se[6].kernel||"Unknown")+"")&&he(sr,Ft),Te&64&&jt!==(jt=(Se[6].uptime||"Unknown")+"")&&he(nr,jt),Te&64&&Kt!==(Kt=(Se[6].processes||"N/A")+"")&&he(or,Kt)},i:ve,o:ve,d(Se){Se&&V(e),bt.d(),tt&&tt.d(),ht.d(),$e&&$e.d(),dt.d()}}}function ut(i){return i<50?"#10b981":i<80?"#f59e0b":"#ef4444"}function Xt(i){if(i===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,u=i;for(;u>=1024&&t<e.length-1;)u/=1024,t++;return`${u.toFixed(1)} ${e[t]}`}function za(i,e,t){let u,p,x,m,r,n;_t(i,wt,C=>t(10,r=C)),_t(i,ft,C=>t(11,n=C));let d=[],v=[],h=[],_={cpu:45,memory:62,disk:78,network:{in:125.5,out:89.3}},w={os:"Ubuntu 22.04 LTS",kernel:"5.15.0-91-generic",uptime:"15天 7小时 32分",processes:187},k={used:"156 GB",total:"200 GB"},g=null;function s(C){var y,E,A,T,O,R,j,K,X,Y,Z,M;if(!C)return null;(y=C.cpu)!=null&&y.per_core&&Array.isArray(C.cpu.per_core)&&t(4,h=C.cpu.per_core);const L={cpu:typeof C.cpu=="number"?C.cpu:((E=C.cpu)==null?void 0:E.overall)||0,memory:typeof C.memory=="number"?C.memory:((A=C.memory)==null?void 0:A.used_percent)||0,disk:typeof C.disk=="number"?C.disk:((R=(O=(T=C.disk)==null?void 0:T.partitions)==null?void 0:O[0])==null?void 0:R.used_percent)||0,network:{in:typeof((j=C.network)==null?void 0:j.in)=="number"?C.network.in*(1024*1024):typeof((K=C.network)==null?void 0:K.rx_rate)=="number"?C.network.rx_rate:0,out:typeof((X=C.network)==null?void 0:X.out)=="number"?C.network.out*(1024*1024):typeof((Y=C.network)==null?void 0:Y.tx_rate)=="number"?C.network.tx_rate:0}};if(C.system&&t(6,w={os:C.system.os||w.os,kernel:C.system.kernel||w.kernel,uptime:C.system.uptime||w.uptime,processes:w.processes}),(M=(Z=C.disk)==null?void 0:Z.partitions)!=null&&M[0]){const P=C.disk.partitions[0],H=(P.used/(1024*1024*1024)).toFixed(1),I=(P.total/(1024*1024*1024)).toFixed(1);t(7,k={used:`${H} GB`,total:`${I} GB`})}return L}async function l(){if(!r||!p||x)return;const{GetMonitoringData:C}=window.wailsBindings||{};if(typeof C=="function")try{const L=await C(r),y=s(L);console.log("data:",L),y&&(t(5,_=y),t(2,d=[...d,y.cpu].slice(-60)),t(3,v=[...v,y.memory].slice(-60)))}catch(L){console.error("Failed to fetch monitoring data:",L)}}Tt(()=>(g=setInterval(l,2e3),()=>{clearInterval(g)})),rr(()=>{g&&clearInterval(g)});const o=(C,L)=>{const y=L/(d.length-1)*100,E=100-C;return`${L===0?"M":"L"} ${y} ${E}`},c=(C,L)=>{const y=L/(d.length-1)*100,E=100-C;return`${L===0?"M":"L"} ${y} ${E}`},f=(C,L)=>{const y=L/(v.length-1)*100,E=100-C;return`${L===0?"M":"L"} ${y} ${E}`},S=(C,L)=>{const y=L/(v.length-1)*100,E=100-C;return`${L===0?"M":"L"} ${y} ${E}`};return i.$$.update=()=>{i.$$.dirty&3072&&t(9,u=r?n.get(r):null),i.$$.dirty&512&&t(1,p=(u==null?void 0:u.connected)||!1),i.$$.dirty&512&&t(0,x=(u==null?void 0:u.type)==="local"),i.$$.dirty&3&&t(8,m=p&&!x),i.$$.dirty&1280&&r&&m&&l()},[x,p,d,v,h,_,w,k,m,u,r,n,o,c,f,S]}class ja extends Qe{constructor(e){super(),Ye(this,e,za,Wa,Je,{})}}function Ua(i){let e;return{c(){e=B("span"),e.textContent="✗ 无效",a(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function Na(i){let e;return{c(){e=B("span"),e.textContent="✓ 有效",a(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function ai(i){let e,t,u,p,x;return{c(){e=B("div"),t=re("svg"),u=re("path"),p=W(),x=se(i[3]),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),a(t,"class","w-4 h-4"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),a(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(m,r){G(m,e,r),b(e,t),b(t,u),b(e,p),b(e,x)},p(m,r){r&8&&he(x,m[3])},d(m){m&&V(e)}}}function li(i){let e,t,u;return{c(){e=B("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,a(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,x){G(p,e,x),t||(u=ie(e,"click",i[9]),t=!0)},p:ve,d(p){p&&V(e),t=!1,u()}}}function Ka(i){let e,t,u,p,x,m,r,n,d=i[5].chars+"",v,h,_=i[5].lines+"",w,k,g,s,l,o,c,f,S,C,L,y,E,A,T,O,R,j,K,X,Y,Z,M,P,H,I,U,J,$,ne,F,D,N,z,Q,te,q,oe,ee,ce;function le(pe,we){if(pe[4])return Na;if(pe[3])return Ua}let xe=le(i),ye=xe&&xe(i),De=i[3]&&ai(i),_e=i[1]&&li(i);return{c(){e=B("div"),t=B("div"),u=B("div"),p=B("label"),x=B("span"),x.textContent="输入 JSON",m=W(),ye&&ye.c(),r=W(),n=B("div"),v=se(d),h=se(" 字符 · "),w=se(_),k=se(" 行"),g=W(),s=B("textarea"),o=W(),De&&De.c(),c=W(),f=B("div"),S=B("button"),C=re("svg"),L=re("path"),y=W(),E=B("span"),E.textContent="格式化",T=W(),O=B("button"),R=re("svg"),j=re("path"),K=W(),X=B("span"),X.textContent="压缩",Z=W(),M=B("button"),P=re("svg"),H=re("path"),I=W(),U=B("span"),U.textContent="转义",$=W(),ne=B("div"),F=B("div"),D=B("label"),D.textContent="输出",N=W(),_e&&_e.c(),z=W(),Q=B("textarea"),te=W(),q=B("div"),oe=B("button"),oe.textContent="清空全部",a(p,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(n,"class","text-xs text-gray-500 dark:text-gray-400"),a(u,"class","flex items-center justify-between mb-2"),a(s,"placeholder","输入 JSON..."),a(s,"class",l="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(i[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),a(t,"class","relative"),a(L,"stroke-linecap","round"),a(L,"stroke-linejoin","round"),a(L,"stroke-width","2"),a(L,"d","M4 6h16M4 12h16m-7 6h7"),a(C,"class","w-4 h-4"),a(C,"fill","none"),a(C,"stroke","currentColor"),a(C,"viewBox","0 0 24 24"),a(E,"class","text-sm"),S.disabled=A=i[2]||!i[0].trim(),a(S,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(j,"stroke-linecap","round"),a(j,"stroke-linejoin","round"),a(j,"stroke-width","2"),a(j,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),a(R,"class","w-4 h-4"),a(R,"fill","none"),a(R,"stroke","currentColor"),a(R,"viewBox","0 0 24 24"),a(X,"class","text-sm"),O.disabled=Y=i[2]||!i[0].trim(),a(O,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(H,"stroke-linecap","round"),a(H,"stroke-linejoin","round"),a(H,"stroke-width","2"),a(H,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),a(P,"class","w-4 h-4"),a(P,"fill","none"),a(P,"stroke","currentColor"),a(P,"viewBox","0 0 24 24"),a(U,"class","text-sm"),M.disabled=J=i[2]||!i[0].trim(),a(M,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(f,"class","grid grid-cols-3 gap-3"),a(D,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),a(F,"class","flex items-center justify-between mb-2"),Q.readOnly=!0,a(Q,"placeholder","格式化后的 JSON 将显示在这里..."),a(Q,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),a(oe,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(q,"class","flex justify-end"),a(e,"class","space-y-6")},m(pe,we){G(pe,e,we),b(e,t),b(t,u),b(u,p),b(p,x),b(p,m),ye&&ye.m(p,null),b(u,r),b(u,n),b(n,v),b(n,h),b(n,w),b(n,k),b(t,g),b(t,s),ge(s,i[0]),b(t,o),De&&De.m(t,null),b(e,c),b(e,f),b(f,S),b(S,C),b(C,L),b(S,y),b(S,E),b(f,T),b(f,O),b(O,R),b(R,j),b(O,K),b(O,X),b(f,Z),b(f,M),b(M,P),b(P,H),b(M,I),b(M,U),b(e,$),b(e,ne),b(ne,F),b(F,D),b(F,N),_e&&_e.m(F,null),b(ne,z),b(ne,Q),ge(Q,i[1]),b(e,te),b(e,q),b(q,oe),ee||(ce=[ie(s,"input",i[13]),ie(s,"keydown",i[11]),ie(S,"click",i[6]),ie(O,"click",i[7]),ie(M,"click",i[8]),ie(Q,"input",i[14]),ie(oe,"click",i[10])],ee=!0)},p(pe,[we]){xe!==(xe=le(pe))&&(ye&&ye.d(1),ye=xe&&xe(pe),ye&&(ye.c(),ye.m(p,null))),we&32&&d!==(d=pe[5].chars+"")&&he(v,d),we&32&&_!==(_=pe[5].lines+"")&&he(w,_),we&8&&l!==(l="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(pe[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&a(s,"class",l),we&1&&ge(s,pe[0]),pe[3]?De?De.p(pe,we):(De=ai(pe),De.c(),De.m(t,null)):De&&(De.d(1),De=null),we&5&&A!==(A=pe[2]||!pe[0].trim())&&(S.disabled=A),we&5&&Y!==(Y=pe[2]||!pe[0].trim())&&(O.disabled=Y),we&5&&J!==(J=pe[2]||!pe[0].trim())&&(M.disabled=J),pe[1]?_e?_e.p(pe,we):(_e=li(pe),_e.c(),_e.m(F,null)):_e&&(_e.d(1),_e=null),we&2&&ge(Q,pe[1])},i:ve,o:ve,d(pe){pe&&V(e),ye&&ye.d(),De&&De.d(),_e&&_e.d(),ee=!1,Le(ce)}}}function Va(i,e,t){let{themeStore:u}=e,p="",x="",m=!1,r="",n=!1,d={chars:0,lines:0};async function v(){if(!p.trim()){t(4,n=!1),t(3,r="");return}if(!window.wailsBindings){t(4,n=!1),t(3,r="Wails 绑定未加载");return}try{const f=await window.wailsBindings.ValidateJSON(p);t(4,n=f.valid),t(3,r=f.error||"")}catch(f){t(4,n=!1),t(3,r=f.message)}}function h(){t(5,d.chars=p.length,d),t(5,d.lines=p.split(`
`).length,d)}async function _(){if(!(!p.trim()||m||!window.wailsBindings)){t(2,m=!0),t(3,r="");try{t(1,x=await window.wailsBindings.FormatJSON(p)),t(4,n=!0),t(3,r="")}catch(f){t(3,r=f.message||"格式化失败")}finally{t(2,m=!1)}}}async function w(){if(!(!p.trim()||m||!window.wailsBindings)){t(2,m=!0),t(3,r="");try{t(1,x=await window.wailsBindings.MinifyJSON(p)),t(4,n=!0),t(3,r="")}catch(f){t(3,r=f.message||"压缩失败")}finally{t(2,m=!1)}}}async function k(){if(!(!p.trim()||m||!window.wailsBindings)){t(2,m=!0),t(3,r="");try{t(1,x=await window.wailsBindings.EscapeJSON(p)),t(4,n=!0),t(3,r="")}catch(f){t(3,r=f.message||"转义失败")}finally{t(2,m=!1)}}}async function g(){if(x)try{await navigator.clipboard.writeText(x)}catch(f){console.error("复制失败:",f)}}function s(){t(0,p=""),t(1,x=""),t(4,n=!1)}function l(f){(f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="enter"&&!m&&p.trim()&&(f.preventDefault(),_())}function o(){p=this.value,t(0,p)}function c(){x=this.value,t(1,x)}return i.$$set=f=>{"themeStore"in f&&t(12,u=f.themeStore)},v(),h(),[p,x,m,r,n,d,_,w,k,g,s,l,u,o,c]}class ci extends Qe{constructor(e){super(),Ye(this,e,Va,Ka,Je,{themeStore:12})}}function qa(i){let e,t,u,p=i[2]==="encode"?"编码":"解码",x;return{c(){e=re("svg"),t=re("path"),u=W(),x=se(p),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(m,r){G(m,e,r),b(e,t),G(m,u,r),G(m,x,r)},p(m,r){r&4&&p!==(p=m[2]==="encode"?"编码":"解码")&&he(x,p)},d(m){m&&(V(e),V(u),V(x))}}}function Ga(i){let e,t,u,p;return{c(){e=re("svg"),t=re("circle"),u=re("path"),p=se(`
        处理中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(u,"class","opacity-75"),a(u,"fill","currentColor"),a(u,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-4 h-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(x,m){G(x,e,m),b(e,t),b(e,u),G(x,p,m)},p:ve,d(x){x&&(V(e),V(p))}}}function hi(i){let e,t,u;return{c(){e=B("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,a(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,x){G(p,e,x),t||(u=ie(e,"click",i[5]),t=!0)},p:ve,d(p){p&&V(e),t=!1,u()}}}function Ja(i){let e,t,u,p,x,m,r,n,d,v,h,_,w=i[2]==="encode"?"输入文本":"输入 Base64",k,g,s,l,o,c,f,S,C,L,y,E,A=i[2]==="encode"?"Base64 输出":"解码结果",T,O,R,j,K,X,Y,Z,M,P,H,I;function U(F,D){return F[3]?Ga:qa}let J=U(i),$=J(i),ne=i[1]&&hi(i);return{c(){e=B("div"),t=B("div"),u=B("button"),p=se("编码"),m=W(),r=B("button"),n=se("解码"),v=W(),h=B("div"),_=B("label"),k=se(w),g=W(),s=B("textarea"),o=W(),c=B("div"),f=B("button"),$.c(),C=W(),L=B("div"),y=B("div"),E=B("label"),T=se(A),O=W(),ne&&ne.c(),R=W(),j=B("textarea"),X=W(),Y=B("div"),Z=B("button"),Z.textContent="清空全部",M=W(),P=B("button"),P.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,a(u,"class",x="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(i[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(r,"class",d="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(i[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),a(_,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(s,"placeholder",l=i[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),a(s,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),f.disabled=S=i[3]||!i[0].trim(),a(f,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(c,"class","flex items-center justify-center"),a(E,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(y,"class","flex items-center justify-between mb-2"),j.readOnly=!0,a(j,"placeholder",K=i[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),a(j,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),a(Z,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(P,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),a(Y,"class","flex justify-between items-center"),a(e,"class","space-y-6")},m(F,D){G(F,e,D),b(e,t),b(t,u),b(u,p),b(t,m),b(t,r),b(r,n),b(e,v),b(e,h),b(h,_),b(_,k),b(h,g),b(h,s),ge(s,i[0]),b(e,o),b(e,c),b(c,f),$.m(f,null),b(e,C),b(e,L),b(L,y),b(y,E),b(E,T),b(y,O),ne&&ne.m(y,null),b(L,R),b(L,j),ge(j,i[1]),b(e,X),b(e,Y),b(Y,Z),b(Y,M),b(Y,P),H||(I=[ie(u,"click",i[10]),ie(r,"click",i[11]),ie(s,"input",i[12]),ie(s,"keydown",i[8]),ie(f,"click",i[4]),ie(j,"input",i[13]),ie(Z,"click",i[6]),ie(P,"click",i[7])],H=!0)},p(F,[D]){D&4&&x!==(x="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(F[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(u,"class",x),D&4&&d!==(d="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(F[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(r,"class",d),D&4&&w!==(w=F[2]==="encode"?"输入文本":"输入 Base64")&&he(k,w),D&4&&l!==(l=F[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&a(s,"placeholder",l),D&1&&ge(s,F[0]),J===(J=U(F))&&$?$.p(F,D):($.d(1),$=J(F),$&&($.c(),$.m(f,null))),D&9&&S!==(S=F[3]||!F[0].trim())&&(f.disabled=S),D&4&&A!==(A=F[2]==="encode"?"Base64 输出":"解码结果")&&he(T,A),F[1]?ne?ne.p(F,D):(ne=hi(F),ne.c(),ne.m(y,null)):ne&&(ne.d(1),ne=null),D&4&&K!==(K=F[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&a(j,"placeholder",K),D&2&&ge(j,F[1])},i:ve,o:ve,d(F){F&&V(e),$.d(),ne&&ne.d(),H=!1,Le(I)}}}function Xa(i,e,t){let{themeStore:u}=e,p="",x="",m="encode",r=!1;async function n(){if(!(!p.trim()||r||!window.wailsBindings)){t(3,r=!0);try{m==="encode"?t(1,x=await window.wailsBindings.EncodeBase64(p)):t(1,x=await window.wailsBindings.DecodeBase64(p))}catch(l){t(1,x=""),console.error("处理失败:",l),alert("处理失败: "+(l.message||l))}finally{t(3,r=!1)}}}async function d(){if(x)try{await navigator.clipboard.writeText(x)}catch(l){console.error("复制失败:",l)}}function v(){t(0,p=""),t(1,x="")}function h(){t(2,m=m==="encode"?"decode":"encode"),t(0,p=""),t(1,x="")}function _(l){(l.ctrlKey||l.metaKey)&&l.key.toLowerCase()==="enter"&&!r&&p.trim()&&(l.preventDefault(),n())}const w=()=>t(2,m="encode"),k=()=>t(2,m="decode");function g(){p=this.value,t(0,p)}function s(){x=this.value,t(1,x)}return i.$$set=l=>{"themeStore"in l&&t(9,u=l.themeStore)},[p,x,m,r,n,d,v,h,_,u,w,k,g,s]}class di extends Qe{constructor(e){super(),Ye(this,e,Xa,Ja,Je,{themeStore:9})}}function ui(i,e,t){const u=i.slice();return u[14]=e[t],u}function fi(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"fill-rule","evenodd"),a(t,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),a(t,"clip-rule","evenodd"),a(e,"class","absolute top-2 right-2 w-4 h-4 text-white/80"),a(e,"fill","currentColor"),a(e,"viewBox","0 0 20 20")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function _i(i){let e,t,u,p,x,m,r,n,d,v,h=i[2]===i[14].id&&fi();function _(){return i[10](i[14])}return{c(){e=B("button"),t=B("div"),u=B("span"),u.textContent=`${i[14].icon}`,p=W(),x=B("span"),x.textContent=`${i[14].name}`,m=W(),h&&h.c(),r=W(),a(u,"class","text-2xl"),a(x,"class","text-sm font-semibold"),a(t,"class","flex flex-col items-center gap-2"),a(e,"class",n="relative p-4 rounded-xl transition-all duration-200 group "+(i[2]===i[14].id?"bg-gradient-to-br "+i[14].color+" text-white shadow-lg transform scale-105":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-transparent hover:border-gray-300 dark:hover:border-gray-600"))},m(w,k){G(w,e,k),b(e,t),b(t,u),b(t,p),b(t,x),b(t,m),h&&h.m(t,null),b(e,r),d||(v=ie(e,"click",_),d=!0)},p(w,k){i=w,i[2]===i[14].id?h||(h=fi(),h.c(),h.m(t,null)):h&&(h.d(1),h=null),k&4&&n!==(n="relative p-4 rounded-xl transition-all duration-200 group "+(i[2]===i[14].id?"bg-gradient-to-br "+i[14].color+" text-white shadow-lg transform scale-105":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-transparent hover:border-gray-300 dark:hover:border-gray-600"))&&a(e,"class",n)},d(w){w&&V(e),h&&h.d(),d=!1,v()}}}function Za(i){let e,t,u;return{c(){e=re("svg"),t=re("path"),u=se(`
        计算哈希`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,x){G(p,e,x),b(e,t),G(p,u,x)},d(p){p&&(V(e),V(u))}}}function Ya(i){let e,t,u,p;return{c(){e=re("svg"),t=re("circle"),u=re("path"),p=se(`
        计算中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(u,"class","opacity-75"),a(u,"fill","currentColor"),a(u,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-4 h-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(x,m){G(x,e,m),b(e,t),b(e,u),G(x,p,m)},d(x){x&&(V(e),V(p))}}}function pi(i){var y;let e,t,u,p,x=((y=i[4].find(i[12]))==null?void 0:y.name)+"",m,r,n,d,v,h,_,w,k,g,s,l,o,c=i[1].length+"",f,S,C,L;return{c(){var E;e=B("div"),t=B("div"),u=B("label"),p=B("span"),m=se(x),n=W(),d=B("span"),d.textContent="哈希值",v=W(),h=B("button"),h.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,_=W(),w=B("div"),k=B("code"),g=se(i[1]),s=W(),l=B("div"),o=se("哈希长度: "),f=se(c),S=se(" 字符"),a(p,"class",r="bg-gradient-to-r "+((E=i[4].find(i[13]))==null?void 0:E.color)+" bg-clip-text text-transparent"),a(u,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(h,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),a(t,"class","flex items-center justify-between mb-2"),a(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),a(w,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),a(l,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(E,A){G(E,e,A),b(e,t),b(t,u),b(u,p),b(p,m),b(u,n),b(u,d),b(t,v),b(t,h),b(e,_),b(e,w),b(w,k),b(k,g),b(e,s),b(e,l),b(l,o),b(l,f),b(l,S),C||(L=ie(h,"click",i[6]),C=!0)},p(E,A){var T,O;A&4&&x!==(x=((T=E[4].find(E[12]))==null?void 0:T.name)+"")&&he(m,x),A&4&&r!==(r="bg-gradient-to-r "+((O=E[4].find(E[13]))==null?void 0:O.color)+" bg-clip-text text-transparent")&&a(p,"class",r),A&2&&he(g,E[1]),A&2&&c!==(c=E[1].length+"")&&he(f,c)},d(E){E&&V(e),C=!1,L()}}}function Qa(i){let e,t,u,p,x,m,r,n,d,v,h,_,w=i[0].length+"",k,g,s,l,o,c,f,S,C,L,y,E,A=qe(i[4]),T=[];for(let X=0;X<A.length;X+=1)T[X]=_i(ui(i,A,X));function O(X,Y){return X[3]?Ya:Za}let R=O(i),j=R(i),K=i[1]&&pi(i);return{c(){e=B("div"),t=B("div"),u=B("label"),u.textContent="选择哈希算法",p=W(),x=B("div");for(let X=0;X<T.length;X+=1)T[X].c();m=W(),r=B("div"),n=B("label"),n.textContent="输入文本",d=W(),v=B("textarea"),h=W(),_=B("div"),k=se(w),g=se(" 字符"),s=W(),l=B("div"),o=B("button"),j.c(),f=W(),K&&K.c(),S=W(),C=B("div"),L=B("button"),L.textContent="清空全部",a(u,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),a(x,"class","grid grid-cols-3 gap-3"),a(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(v,"placeholder","输入要计算哈希的文本..."),a(v,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),a(_,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),o.disabled=c=i[3]||!i[0].trim(),a(o,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(l,"class","flex justify-center"),a(L,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(C,"class","flex justify-end"),a(e,"class","space-y-6")},m(X,Y){G(X,e,Y),b(e,t),b(t,u),b(t,p),b(t,x);for(let Z=0;Z<T.length;Z+=1)T[Z]&&T[Z].m(x,null);b(e,m),b(e,r),b(r,n),b(r,d),b(r,v),ge(v,i[0]),b(r,h),b(r,_),b(_,k),b(_,g),b(e,s),b(e,l),b(l,o),j.m(o,null),b(e,f),K&&K.m(e,null),b(e,S),b(e,C),b(C,L),y||(E=[ie(v,"input",i[11]),ie(v,"keydown",i[8]),ie(o,"click",i[5]),ie(L,"click",i[7])],y=!0)},p(X,[Y]){if(Y&20){A=qe(X[4]);let Z;for(Z=0;Z<A.length;Z+=1){const M=ui(X,A,Z);T[Z]?T[Z].p(M,Y):(T[Z]=_i(M),T[Z].c(),T[Z].m(x,null))}for(;Z<T.length;Z+=1)T[Z].d(1);T.length=A.length}Y&1&&ge(v,X[0]),Y&1&&w!==(w=X[0].length+"")&&he(k,w),R!==(R=O(X))&&(j.d(1),j=R(X),j&&(j.c(),j.m(o,null))),Y&9&&c!==(c=X[3]||!X[0].trim())&&(o.disabled=c),X[1]?K?K.p(X,Y):(K=pi(X),K.c(),K.m(e,S)):K&&(K.d(1),K=null)},i:ve,o:ve,d(X){X&&V(e),tr(T,X),j.d(),K&&K.d(),y=!1,Le(E)}}}function $a(i,e,t){let{themeStore:u}=e,p="",x="",m="md5",r=!1;const n=[{id:"md5",name:"MD5",color:"from-red-500 to-pink-500",icon:"🔒"},{id:"sha256",name:"SHA-256",color:"from-blue-500 to-cyan-500",icon:"🔐"},{id:"sha512",name:"SHA-512",color:"from-purple-500 to-indigo-500",icon:"🔑"}];async function d(){if(!(!p.trim()||r||!window.wailsBindings)){t(3,r=!0),t(1,x="");try{t(1,x=await window.wailsBindings.CalculateHash(p,m))}catch(l){t(1,x=""),console.error("哈希计算失败:",l),alert("哈希计算失败: "+(l.message||l))}finally{t(3,r=!1)}}}async function v(){if(x)try{await navigator.clipboard.writeText(x)}catch(l){console.error("复制失败:",l)}}function h(){t(0,p=""),t(1,x="")}function _(l){(l.ctrlKey||l.metaKey)&&l.key.toLowerCase()==="enter"&&!r&&p.trim()&&(l.preventDefault(),d())}const w=l=>t(2,m=l.id);function k(){p=this.value,t(0,p)}const g=l=>l.id===m,s=l=>l.id===m;return i.$$set=l=>{"themeStore"in l&&t(9,u=l.themeStore)},[p,x,m,r,n,d,v,h,_,u,w,k,g,s]}class gi extends Qe{constructor(e){super(),Ye(this,e,$a,Qa,Je,{themeStore:9})}}function el(i){let e,t,u,p,x,m,r,n,d,v,h;return{c(){e=B("div"),t=B("div"),u=B("label"),u.textContent="输入日期时间",p=W(),x=B("button"),x.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,m=W(),r=B("input"),n=W(),d=B("div"),d.textContent="格式: YYYY-MM-DD HH:MM:SS",a(u,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(x,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),a(t,"class","flex items-center justify-between mb-2"),a(r,"type","datetime-local"),a(r,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),a(d,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(_,w){G(_,e,w),b(e,t),b(t,u),b(t,p),b(t,x),b(e,m),b(e,r),ge(r,i[2]),b(e,n),b(e,d),v||(h=[ie(x,"click",i[8]),ie(r,"input",i[16]),ie(r,"keydown",i[11])],v=!0)},p(_,w){w&4&&ge(r,_[2])},d(_){_&&V(e),v=!1,Le(h)}}}function tl(i){let e,t,u,p,x,m,r,n,d;return{c(){e=B("div"),t=B("div"),u=B("label"),u.textContent="输入 Unix 时间戳（秒）",p=W(),x=B("button"),x.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,m=W(),r=B("input"),a(u,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(x,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),a(t,"class","flex items-center justify-between mb-2"),a(r,"type","number"),a(r,"placeholder","例如: 1234567890"),a(r,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,h){G(v,e,h),b(e,t),b(t,u),b(t,p),b(t,x),b(e,m),b(e,r),ge(r,i[1]),n||(d=[ie(x,"click",i[7]),ie(r,"input",i[15]),ie(r,"keydown",i[11])],n=!0)},p(v,h){h&2&&Ni(r.value)!==v[1]&&ge(r,v[1])},d(v){v&&V(e),n=!1,Le(d)}}}function rl(i){let e,t,u;return{c(){e=re("svg"),t=re("path"),u=se(`
        转换`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,x){G(p,e,x),b(e,t),G(p,u,x)},d(p){p&&(V(e),V(u))}}}function il(i){let e,t,u,p;return{c(){e=re("svg"),t=re("circle"),u=re("path"),p=se(`
        转换中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(u,"class","opacity-75"),a(u,"fill","currentColor"),a(u,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-4 h-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(x,m){G(x,e,m),b(e,t),b(e,u),G(x,p,m)},d(x){x&&(V(e),V(p))}}}function mi(i){let e,t,u,p=i[0]==="toDateTime"?"日期时间":"时间戳",x,m,r,n,d,v,h,_,w;return{c(){e=B("div"),t=B("div"),u=B("label"),x=se(p),m=W(),r=B("button"),r.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n=W(),d=B("div"),v=B("code"),h=se(i[3]),a(u,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(r,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),a(t,"class","flex items-center justify-between mb-2"),a(v,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),a(d,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,g){G(k,e,g),b(e,t),b(t,u),b(u,x),b(t,m),b(t,r),b(e,n),b(e,d),b(d,v),b(v,h),_||(w=ie(r,"click",i[9]),_=!0)},p(k,g){g&1&&p!==(p=k[0]==="toDateTime"?"日期时间":"时间戳")&&he(x,p),g&8&&he(h,k[3])},d(k){k&&V(e),_=!1,w()}}}function sl(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o,c,f,S,C,L,y,E,A,T,O,R,j;function K(I,U){return I[0]==="toDateTime"?tl:el}let X=K(i),Y=X(i);function Z(I,U){return I[4]?il:rl}let M=Z(i),P=M(i),H=i[3]&&mi(i);return{c(){e=B("div"),t=B("div"),u=B("button"),p=se("时间戳 → 日期时间"),m=W(),r=B("button"),n=se("日期时间 → 时间戳"),v=W(),h=B("div"),_=B("div"),w=re("svg"),k=re("path"),g=W(),s=B("span"),l=se("当前时间戳: "),o=B("strong"),c=se(i[5]),f=W(),Y.c(),S=W(),C=B("div"),L=B("button"),P.c(),E=W(),H&&H.c(),A=W(),T=B("div"),O=B("button"),O.textContent="清空全部",a(u,"class",x="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(i[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(r,"class",d="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(i[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),a(k,"stroke-linecap","round"),a(k,"stroke-linejoin","round"),a(k,"stroke-width","2"),a(k,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),a(w,"class","w-5 h-5"),a(w,"fill","none"),a(w,"stroke","currentColor"),a(w,"viewBox","0 0 24 24"),a(o,"class","font-mono"),a(_,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),a(h,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),L.disabled=y=i[4]||(i[0]==="toDateTime"?!i[1].trim():!i[2].trim()),a(L,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(C,"class","flex justify-center"),a(O,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(T,"class","flex justify-end"),a(e,"class","space-y-6")},m(I,U){G(I,e,U),b(e,t),b(t,u),b(u,p),b(t,m),b(t,r),b(r,n),b(e,v),b(e,h),b(h,_),b(_,w),b(w,k),b(_,g),b(_,s),b(s,l),b(s,o),b(o,c),b(e,f),Y.m(e,null),b(e,S),b(e,C),b(C,L),P.m(L,null),b(e,E),H&&H.m(e,null),b(e,A),b(e,T),b(T,O),R||(j=[ie(u,"click",i[13]),ie(r,"click",i[14]),ie(L,"click",i[6]),ie(O,"click",i[10])],R=!0)},p(I,[U]){U&1&&x!==(x="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(u,"class",x),U&1&&d!==(d="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(r,"class",d),U&32&&he(c,I[5]),X===(X=K(I))&&Y?Y.p(I,U):(Y.d(1),Y=X(I),Y&&(Y.c(),Y.m(e,S))),M!==(M=Z(I))&&(P.d(1),P=M(I),P&&(P.c(),P.m(L,null))),U&23&&y!==(y=I[4]||(I[0]==="toDateTime"?!I[1].trim():!I[2].trim()))&&(L.disabled=y),I[3]?H?H.p(I,U):(H=mi(I),H.c(),H.m(e,A)):H&&(H.d(1),H=null)},i:ve,o:ve,d(I){I&&V(e),Y.d(),P.d(),H&&H.d(),R=!1,Le(j)}}}function nl(i,e,t){let{themeStore:u}=e,p="toDateTime",x="",m="",r="",n=!1,d=0;function v(){window.wailsBindings&&t(5,d=Math.floor(Date.now()/1e3))}async function h(){if(window.wailsBindings){t(4,n=!0),t(3,r="");try{if(p==="toDateTime"){const S=parseInt(x.trim());if(isNaN(S))throw new Error("请输入有效的时间戳");t(3,r=await window.wailsBindings.TimestampToDateTime(S,"2006-01-02 15:04:05"))}else{if(!m.trim())throw new Error("请输入日期时间");const S=await window.wailsBindings.DateTimeToTimestamp(m,"2006-01-02 15:04:05");t(3,r=S.toString())}}catch(S){t(3,r=""),console.error("转换失败:",S),alert("转换失败: "+(S.message||S))}finally{t(4,n=!1)}}}async function _(){if(window.wailsBindings)try{const S=await window.wailsBindings.GetCurrentTimestamp();t(1,x=S.toString())}catch(S){console.error("获取当前时间戳失败:",S)}}async function w(){if(window.wailsBindings)try{const S=await window.wailsBindings.GetCurrentTimestamp(),C=await window.wailsBindings.TimestampToDateTime(S,"2006-01-02 15:04:05");t(2,m=C)}catch(S){console.error("获取当前时间失败:",S)}}async function k(){if(r)try{await navigator.clipboard.writeText(r)}catch(S){console.error("复制失败:",S)}}function g(){t(1,x=""),t(2,m=""),t(3,r="")}function s(S){(S.ctrlKey||S.metaKey)&&S.key.toLowerCase()==="enter"&&!n&&(p==="toDateTime"&&x.trim()||p==="toTimestamp"&&m.trim())&&(S.preventDefault(),h())}const l=()=>{t(0,p="toDateTime"),g()},o=()=>{t(0,p="toTimestamp"),g()};function c(){x=Ni(this.value),t(1,x)}function f(){m=this.value,t(2,m)}return i.$$set=S=>{"themeStore"in S&&t(12,u=S.themeStore)},v(),[p,x,m,r,n,d,h,_,w,k,g,s,u,l,o,c,f]}class vi extends Qe{constructor(e){super(),Ye(this,e,nl,sl,Je,{themeStore:12})}}function bi(i,e,t){const u=i.slice();return u[12]=e[t],u[14]=t,u}function ol(i){let e,t,u,p;return{c(){e=re("svg"),t=re("path"),u=W(),p=B("span"),p.textContent="生成 UUID v4",a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),a(e,"class","w-6 h-6"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(x,m){G(x,e,m),b(e,t),G(x,u,m),G(x,p,m)},d(x){x&&(V(e),V(u),V(p))}}}function al(i){let e,t,u,p;return{c(){e=re("svg"),t=re("circle"),u=re("path"),p=se(`
        生成中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(u,"class","opacity-75"),a(u,"fill","currentColor"),a(u,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-6 h-6"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(x,m){G(x,e,m),b(e,t),b(e,u),G(x,p,m)},d(x){x&&(V(e),V(p))}}}function wi(i){let e,t,u,p,x,m,r,n,d,v,h;function _(g,s){return g[3]===g[0]?cl:ll}let w=_(i),k=w(i);return{c(){e=B("div"),t=B("div"),u=B("label"),u.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,p=W(),x=B("button"),k.c(),m=W(),r=B("div"),n=B("code"),d=se(i[0]),a(u,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(x,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),a(t,"class","flex items-center justify-between mb-3"),a(n,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),a(r,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(g,s){G(g,e,s),b(e,t),b(t,u),b(t,p),b(t,x),k.m(x,null),b(e,m),b(e,r),b(r,n),b(n,d),v||(h=ie(x,"click",i[9]),v=!0)},p(g,s){w!==(w=_(g))&&(k.d(1),k=w(g),k&&(k.c(),k.m(x,null))),s&1&&he(d,g[0])},d(g){g&&V(e),k.d(),v=!1,h()}}}function ll(i){let e,t,u;return{c(){e=re("svg"),t=re("path"),u=se(`
            复制`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,x){G(p,e,x),b(e,t),G(p,u,x)},d(p){p&&(V(e),V(u))}}}function cl(i){let e,t,u;return{c(){e=re("svg"),t=re("path"),u=se(`
            已复制`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M5 13l4 4L19 7"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,x){G(p,e,x),b(e,t),G(p,u,x)},d(p){p&&(V(e),V(u))}}}function yi(i){let e,t,u,p,x,m,r,n,d=i[1].length+"",v,h,_,w,k,g,s,l,o=qe(i[1]),c=[];for(let f=0;f<o.length;f+=1)c[f]=Si(bi(i,o,f));return{c(){e=B("div"),t=B("div"),u=B("label"),p=re("svg"),x=re("path"),m=se(`
          历史记录
          `),r=B("span"),n=se("("),v=se(d),h=se("/10)"),_=W(),w=B("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=W(),g=B("div");for(let f=0;f<c.length;f+=1)c[f].c();a(x,"stroke-linecap","round"),a(x,"stroke-linejoin","round"),a(x,"stroke-width","2"),a(x,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),a(p,"class","w-4 h-4"),a(p,"fill","none"),a(p,"stroke","currentColor"),a(p,"viewBox","0 0 24 24"),a(r,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),a(u,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(w,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),a(t,"class","flex items-center justify-between mb-3"),a(g,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(f,S){G(f,e,S),b(e,t),b(t,u),b(u,p),b(p,x),b(u,m),b(u,r),b(r,n),b(r,v),b(r,h),b(t,_),b(t,w),b(e,k),b(e,g);for(let C=0;C<c.length;C+=1)c[C]&&c[C].m(g,null);s||(l=ie(w,"click",i[6]),s=!0)},p(f,S){if(S&2&&d!==(d=f[1].length+"")&&he(v,d),S&170){o=qe(f[1]);let C;for(C=0;C<o.length;C+=1){const L=bi(f,o,C);c[C]?c[C].p(L,S):(c[C]=Si(L),c[C].c(),c[C].m(g,null))}for(;C<c.length;C+=1)c[C].d(1);c.length=o.length}},d(f){f&&V(e),tr(c,f),s=!1,l()}}}function hl(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function dl(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M5 13l4 4L19 7"),a(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Si(i){let e,t,u=i[12]+"",p,x,m,r,n,d,v,h,_;function w(){return i[10](i[12])}function k(o,c){return o[3]===o[12]?dl:hl}let g=k(i),s=g(i);function l(){return i[11](i[12])}return{c(){e=B("div"),t=B("code"),p=se(u),x=W(),m=B("div"),r=B("button"),r.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',n=W(),d=B("button"),s.c(),v=W(),a(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),a(r,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),a(r,"title","使用此 UUID"),a(d,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),a(d,"title","复制"),a(m,"class","flex items-center gap-2 shrink-0"),a(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(o,c){G(o,e,c),b(e,t),b(t,p),b(e,x),b(e,m),b(m,r),b(m,n),b(m,d),s.m(d,null),b(e,v),h||(_=[ie(r,"click",w),ie(d,"click",l)],h=!0)},p(o,c){i=o,c&2&&u!==(u=i[12]+"")&&he(p,u),g!==(g=k(i))&&(s.d(1),s=g(i),s&&(s.c(),s.m(d,null)))},d(o){o&&V(e),s.d(),h=!1,Le(_)}}}function ki(i){let e;return{c(){e=B("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',a(e,"class","text-center py-8")},m(t,u){G(t,e,u)},d(t){t&&V(e)}}}function ul(i){let e,t,u,p,x,m,r,n,d,v;function h(l,o){return l[2]?al:ol}let _=h(i),w=_(i),k=i[0]&&wi(i),g=i[1].length>0&&yi(i),s=!i[0]&&ki();return{c(){e=B("div"),t=B("div"),u=B("button"),w.c(),p=W(),x=B("div"),m=W(),k&&k.c(),r=W(),g&&g.c(),n=W(),s&&s.c(),a(x,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),u.disabled=i[2],a(u,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),a(t,"class","text-center"),a(e,"class","space-y-6")},m(l,o){G(l,e,o),b(e,t),b(t,u),w.m(u,null),b(u,p),b(u,x),b(e,m),k&&k.m(e,null),b(e,r),g&&g.m(e,null),b(e,n),s&&s.m(e,null),d||(v=ie(u,"click",i[4]),d=!0)},p(l,[o]){_!==(_=h(l))&&(w.d(1),w=_(l),w&&(w.c(),w.m(u,p))),o&4&&(u.disabled=l[2]),l[0]?k?k.p(l,o):(k=wi(l),k.c(),k.m(e,r)):k&&(k.d(1),k=null),l[1].length>0?g?g.p(l,o):(g=yi(l),g.c(),g.m(e,n)):g&&(g.d(1),g=null),l[0]?s&&(s.d(1),s=null):s||(s=ki(),s.c(),s.m(e,null))},i:ve,o:ve,d(l){l&&V(e),w.d(),k&&k.d(),g&&g.d(),s&&s.d(),d=!1,v()}}}function fl(i,e,t){let{themeStore:u}=e,p="",x=[],m=!1,r=null;async function n(){if(window.wailsBindings){t(2,m=!0);try{const g=await window.wailsBindings.GenerateUUIDv4();t(0,p=g),x.length<10?t(1,x=[g,...x]):t(1,x=[g,...x.slice(0,9)])}catch(g){console.error("UUID 生成失败:",g),alert("UUID 生成失败: "+(g.message||g))}finally{t(2,m=!1)}}}async function d(g){try{await navigator.clipboard.writeText(g),t(3,r=g),setTimeout(()=>t(3,r=null),2e3)}catch(s){console.error("复制失败:",s)}}function v(){t(1,x=[])}function h(g){t(0,p=g)}const _=()=>d(p),w=g=>h(g),k=g=>d(g);return i.$$set=g=>{"themeStore"in g&&t(8,u=g.themeStore)},[p,x,m,r,n,d,v,h,u,_,w,k]}class Ci extends Qe{constructor(e){super(),Ye(this,e,fl,ul,Je,{themeStore:8})}}function xi(i,e,t){const u=i.slice();return u[12]=e[t],u}function Ei(i){let e,t,u,p,x,m,r,n,d,v,h,_=[],w=new Map,k,g,s,l,o,c,f,S,C,L=qe(i[4]);const y=O=>O[12].id;for(let O=0;O<L.length;O+=1){let R=xi(i,L,O),j=y(R);w.set(j,_[O]=Li(j,R))}const E=[pl,_l],A=[];function T(O,R){return O[3]?0:1}return o=T(i),c=A[o]=E[o](i),{c(){e=B("div"),t=B("div"),u=W(),p=B("div"),x=B("div"),m=B("div"),r=B("h3"),r.textContent="开发工具",n=W(),d=B("button"),d.innerHTML='<svg class="w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',v=W(),h=B("div");for(let O=0;O<_.length;O+=1)_[O].c();k=W(),g=B("div"),g.innerHTML='<div class="text-xs text-gray-500 dark:text-gray-400 text-center">快捷键: 按 ESC 关闭</div>',s=W(),l=B("div"),c.c(),a(t,"class","absolute inset-0 bg-black/30 backdrop-blur-sm transition-opacity"),a(r,"class","text-lg font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent"),a(d,"class","p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-all duration-200 group"),a(d,"title","关闭"),a(m,"class","flex items-center justify-between mb-6"),a(h,"class","space-y-2 flex-1 overflow-y-auto"),a(g,"class","mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"),a(x,"class","w-72 bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 border-r border-gray-200 dark:border-gray-700 p-4 flex flex-col"),a(l,"class","flex-1 flex flex-col overflow-hidden"),a(p,"class","relative w-full max-w-5xl bg-white dark:bg-gray-900 rounded-2xl shadow-2xl m-4 max-h-[85vh] overflow-hidden flex border border-gray-200 dark:border-gray-700"),a(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-16"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"tabindex","-1")},m(O,R){G(O,e,R),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),b(m,r),b(m,n),b(m,d),b(x,v),b(x,h);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(h,null);b(x,k),b(x,g),b(p,s),b(p,l),A[o].m(l,null),i[11](e),f=!0,S||(C=[ie(d,"click",i[9]),ie(e,"click",i[5]),ie(e,"keydown",i[8])],S=!0)},p(O,R){R&88&&(L=qe(O[4]),_=Ht(_,R,y,1,O,L,w,h,ir,Li,null,xi));let j=o;o=T(O),o===j?A[o].p(O,R):(ot(),Ce(A[j],1,1,()=>{A[j]=null}),at(),c=A[o],c?c.p(O,R):(c=A[o]=E[o](O),c.c()),ke(c,1),c.m(l,null))},i(O){f||(ke(c),f=!0)},o(O){Ce(c),f=!1},d(O){O&&V(e);for(let R=0;R<_.length;R+=1)_[R].d();A[o].d(),i[11](null),S=!1,Le(C)}}}function Li(i,e){let t,u,p,x,m=e[12].name+"",r,n,d,v,h,_;function w(){return e[10](e[12])}return{key:i,first:null,c(){t=B("button"),u=B("span"),u.textContent=`${e[12].icon}`,p=W(),x=B("span"),r=se(m),d=W(),a(u,"class","text-2xl"),a(x,"class",n=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-purple-600 dark:text-purple-400":"text-gray-700 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white"}`),a(t,"class",v="w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group "+(e[3]===e[12].id?"bg-white dark:bg-gray-800 shadow-lg border-2 border-purple-500 dark:border-purple-400 transform scale-[1.02]":"hover:bg-white dark:hover:bg-gray-800 border-2 border-transparent hover:border-gray-200 dark:hover:border-gray-600")),this.first=t},m(k,g){G(k,t,g),b(t,u),b(t,p),b(t,x),b(x,r),b(t,d),h||(_=ie(t,"click",w),h=!0)},p(k,g){e=k,g&8&&n!==(n=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-purple-600 dark:text-purple-400":"text-gray-700 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white"}`)&&a(x,"class",n),g&8&&v!==(v="w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group "+(e[3]===e[12].id?"bg-white dark:bg-gray-800 shadow-lg border-2 border-purple-500 dark:border-purple-400 transform scale-[1.02]":"hover:bg-white dark:hover:bg-gray-800 border-2 border-transparent hover:border-gray-200 dark:hover:border-gray-600"))&&a(t,"class",v)},d(k){k&&V(t),h=!1,_()}}}function _l(i){let e;return{c(){e=B("div"),e.innerHTML='<div class="text-center"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2">选择一个工具</h3> <p class="text-gray-500 dark:text-gray-400">从左侧选择一个开发工具开始使用</p></div>',a(e,"class","flex-1 flex items-center justify-center p-12")},m(t,u){G(t,e,u)},p:ve,i:ve,o:ve,d(t){t&&V(e)}}}function pl(i){var g;let e,t,u,p,x=((g=i[7]())==null?void 0:g.name)+"",m,r,n,d,v,h;const _=[wl,bl,vl,ml,gl],w=[];function k(s,l){return s[3]==="json"?0:s[3]==="base64"?1:s[3]==="hash"?2:s[3]==="timestamp"?3:s[3]==="uuid"?4:-1}return~(d=k(i))&&(v=w[d]=_[d](i)),{c(){var s;e=B("div"),t=B("h2"),u=B("span"),u.textContent=`${(s=i[7]())==null?void 0:s.icon}`,p=W(),m=se(x),r=W(),n=B("div"),v&&v.c(),a(u,"class","text-2xl"),a(t,"class","text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2"),a(e,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/30 dark:to-blue-950/30"),a(n,"class","flex-1 overflow-y-auto p-6")},m(s,l){G(s,e,l),b(e,t),b(t,u),b(t,p),b(t,m),G(s,r,l),G(s,n,l),~d&&w[d].m(n,null),h=!0},p(s,l){let o=d;d=k(s),d===o?~d&&w[d].p(s,l):(v&&(ot(),Ce(w[o],1,1,()=>{w[o]=null}),at()),~d?(v=w[d],v?v.p(s,l):(v=w[d]=_[d](s),v.c()),ke(v,1),v.m(n,null)):v=null)},i(s){h||(ke(v),h=!0)},o(s){Ce(v),h=!1},d(s){s&&(V(e),V(r),V(n)),~d&&w[d].d()}}}function gl(i){let e,t,u;var p=Ci;function x(m,r){return{props:{themeStore:m[1]}}}return p&&(e=pt(p,x(i))),{c(){e&&ze(e.$$.fragment),t=nt()},m(m,r){e&&Ie(e,m,r),G(m,t,r),u=!0},p(m,r){if(p!==(p=Ci)){if(e){ot();const n=e;Ce(n.$$.fragment,1,0,()=>{He(n,1)}),at()}p?(e=pt(p,x(m)),ze(e.$$.fragment),ke(e.$$.fragment,1),Ie(e,t.parentNode,t)):e=null}else if(p){const n={};r&2&&(n.themeStore=m[1]),e.$set(n)}},i(m){u||(e&&ke(e.$$.fragment,m),u=!0)},o(m){e&&Ce(e.$$.fragment,m),u=!1},d(m){m&&V(t),e&&He(e,m)}}}function ml(i){let e,t,u;var p=vi;function x(m,r){return{props:{themeStore:m[1]}}}return p&&(e=pt(p,x(i))),{c(){e&&ze(e.$$.fragment),t=nt()},m(m,r){e&&Ie(e,m,r),G(m,t,r),u=!0},p(m,r){if(p!==(p=vi)){if(e){ot();const n=e;Ce(n.$$.fragment,1,0,()=>{He(n,1)}),at()}p?(e=pt(p,x(m)),ze(e.$$.fragment),ke(e.$$.fragment,1),Ie(e,t.parentNode,t)):e=null}else if(p){const n={};r&2&&(n.themeStore=m[1]),e.$set(n)}},i(m){u||(e&&ke(e.$$.fragment,m),u=!0)},o(m){e&&Ce(e.$$.fragment,m),u=!1},d(m){m&&V(t),e&&He(e,m)}}}function vl(i){let e,t,u;var p=gi;function x(m,r){return{props:{themeStore:m[1]}}}return p&&(e=pt(p,x(i))),{c(){e&&ze(e.$$.fragment),t=nt()},m(m,r){e&&Ie(e,m,r),G(m,t,r),u=!0},p(m,r){if(p!==(p=gi)){if(e){ot();const n=e;Ce(n.$$.fragment,1,0,()=>{He(n,1)}),at()}p?(e=pt(p,x(m)),ze(e.$$.fragment),ke(e.$$.fragment,1),Ie(e,t.parentNode,t)):e=null}else if(p){const n={};r&2&&(n.themeStore=m[1]),e.$set(n)}},i(m){u||(e&&ke(e.$$.fragment,m),u=!0)},o(m){e&&Ce(e.$$.fragment,m),u=!1},d(m){m&&V(t),e&&He(e,m)}}}function bl(i){let e,t,u;var p=di;function x(m,r){return{props:{themeStore:m[1]}}}return p&&(e=pt(p,x(i))),{c(){e&&ze(e.$$.fragment),t=nt()},m(m,r){e&&Ie(e,m,r),G(m,t,r),u=!0},p(m,r){if(p!==(p=di)){if(e){ot();const n=e;Ce(n.$$.fragment,1,0,()=>{He(n,1)}),at()}p?(e=pt(p,x(m)),ze(e.$$.fragment),ke(e.$$.fragment,1),Ie(e,t.parentNode,t)):e=null}else if(p){const n={};r&2&&(n.themeStore=m[1]),e.$set(n)}},i(m){u||(e&&ke(e.$$.fragment,m),u=!0)},o(m){e&&Ce(e.$$.fragment,m),u=!1},d(m){m&&V(t),e&&He(e,m)}}}function wl(i){let e,t,u;var p=ci;function x(m,r){return{props:{themeStore:m[1]}}}return p&&(e=pt(p,x(i))),{c(){e&&ze(e.$$.fragment),t=nt()},m(m,r){e&&Ie(e,m,r),G(m,t,r),u=!0},p(m,r){if(p!==(p=ci)){if(e){ot();const n=e;Ce(n.$$.fragment,1,0,()=>{He(n,1)}),at()}p?(e=pt(p,x(m)),ze(e.$$.fragment),ke(e.$$.fragment,1),Ie(e,t.parentNode,t)):e=null}else if(p){const n={};r&2&&(n.themeStore=m[1]),e.$set(n)}},i(m){u||(e&&ke(e.$$.fragment,m),u=!0)},o(m){e&&Ce(e.$$.fragment,m),u=!1},d(m){m&&V(t),e&&He(e,m)}}}function yl(i){let e,t,u=i[0]&&Ei(i);return{c(){u&&u.c(),e=nt()},m(p,x){u&&u.m(p,x),G(p,e,x),t=!0},p(p,[x]){p[0]?u?(u.p(p,x),x&1&&ke(u,1)):(u=Ei(p),u.c(),ke(u,1),u.m(e.parentNode,e)):u&&(ot(),Ce(u,1,1,()=>{u=null}),at())},i(p){t||(ke(u),t=!0)},o(p){Ce(u),t=!1},d(p){p&&V(e),u&&u.d(p)}}}function Sl(i,e,t){let{isOpen:u=!1}=e,{themeStore:p}=e,x=null,m;const r=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"hash",name:"Hash 计算",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function n(g){g.target===g.currentTarget&&t(0,u=!1)}function d(g){t(3,x=g)}function v(){return r.find(g=>g.id===x)}function h(g){g.key==="Escape"&&u&&(g.preventDefault(),t(0,u=!1))}const _=()=>t(0,u=!1),w=g=>d(g.id);function k(g){et[g?"unshift":"push"](()=>{m=g,t(2,m)})}return i.$$set=g=>{"isOpen"in g&&t(0,u=g.isOpen),"themeStore"in g&&t(1,p=g.themeStore)},i.$$.update=()=>{i.$$.dirty&5&&u&&Zt().then(()=>{m&&m.focus()})},[u,p,m,x,r,n,d,v,h,_,w,k]}class kl extends Qe{constructor(e){super(),Ye(this,e,Sl,yl,Je,{isOpen:0,themeStore:1})}}function Di(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l;return{c(){e=B("div"),t=B("label"),t.textContent="认证方式",u=W(),p=B("div"),x=B("button"),m=B("div"),r=se("密码"),v=W(),h=B("button"),_=B("div"),w=se("SSH 密钥"),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(m,"class",n=`text-xs font-medium ${i[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(x,"type","button"),a(x,"class",d=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${i[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(_,"class",k=`text-xs font-medium ${i[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(h,"type","button"),a(h,"class",g=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${i[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(p,"class","flex gap-2")},m(o,c){G(o,e,c),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),b(m,r),b(p,v),b(p,h),b(h,_),b(_,w),s||(l=[ie(x,"click",i[21]),ie(h,"click",i[22])],s=!0)},p(o,c){c[0]&8&&n!==(n=`text-xs font-medium ${o[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(m,"class",n),c[0]&8&&d!==(d=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${o[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(x,"class",d),c[0]&8&&k!==(k=`text-xs font-medium ${o[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(_,"class",k),c[0]&8&&g!==(g=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${o[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(h,"class",g)},d(o){o&&V(e),s=!1,Le(l)}}}function Mi(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o;function c(E,A){return E[9]?xl:Cl}let f=c(i),S=f(i);function C(E,A){return E[9]?Ll:El}let L=C(i),y=L(i);return{c(){e=B("div"),t=B("label"),t.textContent="SSH 私钥文件",u=W(),p=B("div"),x=B("input"),m=W(),r=B("button"),r.textContent="选择文件",n=W(),d=B("div"),v=B("label"),v.textContent="Passphrase（可选）",h=W(),_=B("div"),S.c(),w=W(),k=B("button"),y.c(),g=W(),s=B("p"),s.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(x,"type","text"),a(x,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),x.readOnly=!0,a(x,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),a(r,"type","button"),a(r,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),a(p,"class","flex gap-1.5"),a(v,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(k,"type","button"),a(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),a(_,"class","relative"),a(s,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(E,A){G(E,e,A),b(e,t),b(e,u),b(e,p),b(p,x),ge(x,i[4].keyPath),b(p,m),b(p,r),G(E,n,A),G(E,d,A),b(d,v),b(d,h),b(d,_),S.m(_,null),b(_,w),b(_,k),y.m(k,null),b(d,g),b(d,s),l||(o=[ie(x,"input",i[23]),ie(r,"click",i[11]),ie(k,"click",i[26])],l=!0)},p(E,A){A[0]&16&&x.value!==E[4].keyPath&&ge(x,E[4].keyPath),f===(f=c(E))&&S?S.p(E,A):(S.d(1),S=f(E),S&&(S.c(),S.m(_,w))),L!==(L=C(E))&&(y.d(1),y=L(E),y&&(y.c(),y.m(k,null)))},d(E){E&&(V(e),V(n),V(d)),S.d(),y.d(),l=!1,Le(o)}}}function Cl(i){let e,t,u;return{c(){e=B("input"),a(e,"type","password"),a(e,"placeholder","如果密钥已加密，请输入 passphrase"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,x){G(p,e,x),ge(e,i[4].passphrase),t||(u=ie(e,"input",i[25]),t=!0)},p(p,x){x[0]&16&&e.value!==p[4].passphrase&&ge(e,p[4].passphrase)},d(p){p&&V(e),t=!1,u()}}}function xl(i){let e,t,u;return{c(){e=B("input"),a(e,"type","text"),a(e,"placeholder","如果密钥已加密，请输入 passphrase"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,x){G(p,e,x),ge(e,i[4].passphrase),t||(u=ie(e,"input",i[24]),t=!0)},p(p,x){x[0]&16&&e.value!==p[4].passphrase&&ge(e,p[4].passphrase)},d(p){p&&V(e),t=!1,u()}}}function El(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Ll(i){let e,t,u;return{c(){e=re("svg"),t=re("path"),u=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,x){G(p,e,x),b(e,t),b(e,u)},d(p){p&&V(e)}}}function Bi(i){let e,t,u;return{c(){e=B("div"),t=se(i[6]),a(e,"class",u=`p-2 rounded-md text-xs ${i[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(p,x){G(p,e,x),b(e,t)},p(p,x){x[0]&64&&he(t,p[6]),x[0]&64&&u!==(u=`p-2 rounded-md text-xs ${p[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&a(e,"class",u)},d(p){p&&V(e)}}}function Ai(i){let e,t,u,p,x,m,r,n,d,v;return{c(){e=B("div"),t=B("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',u=W(),p=B("select"),x=B("option"),x.textContent="MySQL",m=B("option"),m.textContent="PostgreSQL",r=B("option"),r.textContent="MongoDB",n=B("option"),n.textContent="Redis",a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),x.__value="mysql",ge(x,x.__value),m.__value="postgresql",ge(m,m.__value),r.__value="mongodb",ge(r,r.__value),n.__value="redis",ge(n,n.__value),a(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),i[4].dbType===void 0&&$t(()=>i[27].call(p))},m(h,_){G(h,e,_),b(e,t),b(e,u),b(e,p),b(p,x),b(p,m),b(p,r),b(p,n),Rr(p,i[4].dbType,!0),d||(v=ie(p,"change",i[27]),d=!0)},p(h,_){_[0]&16&&Rr(p,h[4].dbType)},d(h){h&&V(e),d=!1,v()}}}function Ri(i){let e,t,u,p,x,m;return{c(){e=B("div"),t=B("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',u=W(),p=B("input"),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(p,"type","text"),p.required=!0,a(p,"placeholder","root"),a(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(r,n){G(r,e,n),b(e,t),b(e,u),b(e,p),ge(p,i[4].username),x||(m=ie(p,"input",i[30]),x=!0)},p(r,n){n[0]&16&&p.value!==r[4].username&&ge(p,r[4].username)},d(r){r&&V(e),x=!1,m()}}}function Ti(i){let e,t,u,p,x,m,r,n,d,v,h,_,w;function k(f,S){return f[8]?Ml:Dl}let g=k(i),s=g(i);function l(f,S){return f[8]?Al:Bl}let o=l(i),c=o(i);return{c(){e=B("div"),t=B("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',u=W(),p=B("div"),s.c(),x=W(),m=B("button"),c.c(),r=W(),n=B("div"),d=B("input"),v=W(),h=B("span"),h.textContent="保存密码",a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(m,"type","button"),a(m,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),a(p,"class","relative"),a(d,"type","checkbox"),a(d,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),a(h,"class","text-xs text-gray-700 dark:text-gray-300"),a(n,"class","flex items-center gap-1.5 cursor-pointer")},m(f,S){G(f,e,S),b(e,t),b(e,u),b(e,p),s.m(p,null),b(p,x),b(p,m),c.m(m,null),G(f,r,S),G(f,n,S),b(n,d),d.checked=i[4].savePassword,b(n,v),b(n,h),_||(w=[ie(m,"click",i[33]),ie(d,"change",i[34])],_=!0)},p(f,S){g===(g=k(f))&&s?s.p(f,S):(s.d(1),s=g(f),s&&(s.c(),s.m(p,x))),o!==(o=l(f))&&(c.d(1),c=o(f),c&&(c.c(),c.m(m,null))),S[0]&16&&(d.checked=f[4].savePassword)},d(f){f&&(V(e),V(r),V(n)),s.d(),c.d(),_=!1,Le(w)}}}function Dl(i){let e,t,u;return{c(){e=B("input"),a(e,"type","password"),a(e,"placeholder","输入密码"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,x){G(p,e,x),ge(e,i[4].password),t||(u=ie(e,"input",i[32]),t=!0)},p(p,x){x[0]&16&&e.value!==p[4].password&&ge(e,p[4].password)},d(p){p&&V(e),t=!1,u()}}}function Ml(i){let e,t,u;return{c(){e=B("input"),a(e,"type","text"),a(e,"placeholder","输入密码"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,x){G(p,e,x),ge(e,i[4].password),t||(u=ie(e,"input",i[31]),t=!0)},p(p,x){x[0]&16&&e.value!==p[4].password&&ge(e,p[4].password)},d(p){p&&V(e),t=!1,u()}}}function Bl(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Al(i){let e,t,u;return{c(){e=re("svg"),t=re("path"),u=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,x){G(p,e,x),b(e,t),b(e,u)},d(p){p&&V(e)}}}function Oi(i){let e,t,u,p,x,m;return{c(){e=B("div"),t=B("label"),t.textContent="数据库名",u=W(),p=B("input"),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(p,"type","text"),a(p,"placeholder","例如：production_db"),a(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(r,n){G(r,e,n),b(e,t),b(e,u),b(e,p),ge(p,i[4].database),x||(m=ie(p,"input",i[35]),x=!0)},p(r,n){n[0]&16&&p.value!==r[4].database&&ge(p,r[4].database)},d(r){r&&V(e),x=!1,m()}}}function Rl(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o,c,f,S,C,L,y,E,A,T,O,R,j,K,X,Y,Z,M,P,H,I,U,J,$,ne,F,D,N,z,Q,te,q,oe,ee,ce,le,xe,ye,De,_e,pe,we,Ke,be,Ue,Xe,Ve,Fe,Ae,Ee,me,it,Be,Oe=i[5]?"测试中...":"测试连接",vt,st,Ze,gt=i[7]?"保存中...":i[1]?"更新连接":"添加连接",Ge,rt,ct,ae=i[2]==="ssh"&&Di(i),ue=i[3]==="key"&&Mi(i),We=i[6]&&Bi(i),Ne=i[2]==="database"&&Ai(i),je=(i[3]==="password"||i[2]==="database"||i[2]==="docker")&&Ri(i),Re=i[3]==="password"&&Ti(i),Pe=i[2]==="database"&&Oi(i);return{c(){e=B("div"),t=B("label"),t.textContent="连接类型",u=W(),p=B("div"),x=B("button"),m=B("div"),r=re("svg"),n=re("path"),v=W(),h=B("span"),_=se("SSH"),g=W(),s=B("button"),l=B("div"),o=re("svg"),c=re("path"),S=W(),C=B("span"),L=se("数据库"),A=W(),T=B("button"),O=B("div"),R=re("svg"),j=re("path"),X=W(),Y=B("span"),Z=se("Docker"),H=W(),I=B("form"),U=B("div"),J=B("label"),J.innerHTML='连接名称 <span class="text-red-500">*</span>',$=W(),ne=B("input"),F=W(),ae&&ae.c(),D=W(),ue&&ue.c(),N=W(),We&&We.c(),z=W(),Ne&&Ne.c(),Q=W(),te=B("div"),q=B("div"),oe=B("label"),oe.innerHTML='主机地址 <span class="text-red-500">*</span>',ee=W(),ce=B("input"),le=W(),xe=B("div"),ye=B("label"),ye.innerHTML='端口 <span class="text-red-500">*</span>',De=W(),_e=B("input"),pe=W(),je&&je.c(),we=W(),Re&&Re.c(),Ke=W(),Pe&&Pe.c(),be=W(),Ue=B("div"),Xe=B("label"),Xe.textContent="分组",Ve=W(),Fe=B("input"),Ae=W(),Ee=B("div"),me=B("button"),me.textContent="取消",it=W(),Be=B("button"),vt=se(Oe),st=W(),Ze=B("button"),Ge=se(gt),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),a(n,"stroke-linecap","round"),a(n,"stroke-linejoin","round"),a(n,"stroke-width","2"),a(n,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),a(r,"class",d=`w-4 h-4 ${i[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),a(r,"fill","none"),a(r,"stroke","currentColor"),a(r,"viewBox","0 0 24 24"),a(h,"class",w=`text-xs font-medium ${i[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(m,"class","flex items-center justify-center gap-1"),a(x,"type","button"),a(x,"class",k=`p-2 rounded-lg border-2 transition-all ${i[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(c,"stroke-linecap","round"),a(c,"stroke-linejoin","round"),a(c,"stroke-width","2"),a(c,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),a(o,"class",f=`w-4 h-4 ${i[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),a(o,"fill","none"),a(o,"stroke","currentColor"),a(o,"viewBox","0 0 24 24"),a(C,"class",y=`text-xs font-medium ${i[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(l,"class","flex items-center justify-center gap-1"),a(s,"type","button"),a(s,"class",E=`p-2 rounded-lg border-2 transition-all ${i[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(j,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),a(R,"class",K=`w-4 h-4 ${i[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),a(R,"fill","currentColor"),a(R,"viewBox","0 0 24 24"),a(Y,"class",M=`text-xs font-medium ${i[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(O,"class","flex items-center justify-center gap-1"),a(T,"type","button"),a(T,"class",P=`p-2 rounded-lg border-2 transition-all ${i[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(p,"class","grid grid-cols-3 gap-2"),a(e,"class","mb-4"),a(J,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(ne,"type","text"),ne.required=!0,a(ne,"placeholder","例如：生产服务器-01"),a(ne,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(oe,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(ce,"type","text"),ce.required=!0,a(ce,"placeholder","192.168.1.10 或 example.com"),a(ce,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(q,"class","col-span-2"),a(ye,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(_e,"type","text"),_e.required=!0,a(_e,"placeholder",i[13]()),a(_e,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(te,"class","grid grid-cols-3 gap-2"),a(Xe,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(Fe,"type","text"),a(Fe,"placeholder","例如：生产环境"),a(Fe,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(me,"type","button"),a(me,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),a(Be,"type","button"),Be.disabled=i[5],a(Be,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(Ze,"type","submit"),Ze.disabled=i[7],a(Ze,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),a(Ee,"class","flex gap-2 pt-3"),a(I,"class","space-y-3")},m(fe,Me){G(fe,e,Me),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),b(m,r),b(r,n),b(m,v),b(m,h),b(h,_),b(p,g),b(p,s),b(s,l),b(l,o),b(o,c),b(l,S),b(l,C),b(C,L),b(p,A),b(p,T),b(T,O),b(O,R),b(R,j),b(O,X),b(O,Y),b(Y,Z),G(fe,H,Me),G(fe,I,Me),b(I,U),b(U,J),b(U,$),b(U,ne),ge(ne,i[4].name),b(I,F),ae&&ae.m(I,null),b(I,D),ue&&ue.m(I,null),b(I,N),We&&We.m(I,null),b(I,z),Ne&&Ne.m(I,null),b(I,Q),b(I,te),b(te,q),b(q,oe),b(q,ee),b(q,ce),ge(ce,i[4].host),b(te,le),b(te,xe),b(xe,ye),b(xe,De),b(xe,_e),ge(_e,i[4].port),b(I,pe),je&&je.m(I,null),b(I,we),Re&&Re.m(I,null),b(I,Ke),Pe&&Pe.m(I,null),b(I,be),b(I,Ue),b(Ue,Xe),b(Ue,Ve),b(Ue,Fe),ge(Fe,i[4].group),b(I,Ae),b(I,Ee),b(Ee,me),b(Ee,it),b(Ee,Be),b(Be,vt),b(Ee,st),b(Ee,Ze),b(Ze,Ge),rt||(ct=[ie(x,"click",i[17]),ie(s,"click",i[18]),ie(T,"click",i[19]),ie(ne,"input",i[20]),ie(ce,"input",i[28]),ie(_e,"input",i[29]),ie(Fe,"input",i[36]),ie(me,"click",i[37]),ie(Be,"click",i[10]),ie(I,"submit",ms(i[12]))],rt=!0)},p(fe,Me){Me[0]&4&&d!==(d=`w-4 h-4 ${fe[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&a(r,"class",d),Me[0]&4&&w!==(w=`text-xs font-medium ${fe[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(h,"class",w),Me[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${fe[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(x,"class",k),Me[0]&4&&f!==(f=`w-4 h-4 ${fe[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&a(o,"class",f),Me[0]&4&&y!==(y=`text-xs font-medium ${fe[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(C,"class",y),Me[0]&4&&E!==(E=`p-2 rounded-lg border-2 transition-all ${fe[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(s,"class",E),Me[0]&4&&K!==(K=`w-4 h-4 ${fe[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&a(R,"class",K),Me[0]&4&&M!==(M=`text-xs font-medium ${fe[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(Y,"class",M),Me[0]&4&&P!==(P=`p-2 rounded-lg border-2 transition-all ${fe[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(T,"class",P),Me[0]&16&&ne.value!==fe[4].name&&ge(ne,fe[4].name),fe[2]==="ssh"?ae?ae.p(fe,Me):(ae=Di(fe),ae.c(),ae.m(I,D)):ae&&(ae.d(1),ae=null),fe[3]==="key"?ue?ue.p(fe,Me):(ue=Mi(fe),ue.c(),ue.m(I,N)):ue&&(ue.d(1),ue=null),fe[6]?We?We.p(fe,Me):(We=Bi(fe),We.c(),We.m(I,z)):We&&(We.d(1),We=null),fe[2]==="database"?Ne?Ne.p(fe,Me):(Ne=Ai(fe),Ne.c(),Ne.m(I,Q)):Ne&&(Ne.d(1),Ne=null),Me[0]&16&&ce.value!==fe[4].host&&ge(ce,fe[4].host),Me[0]&16&&_e.value!==fe[4].port&&ge(_e,fe[4].port),fe[3]==="password"||fe[2]==="database"||fe[2]==="docker"?je?je.p(fe,Me):(je=Ri(fe),je.c(),je.m(I,we)):je&&(je.d(1),je=null),fe[3]==="password"?Re?Re.p(fe,Me):(Re=Ti(fe),Re.c(),Re.m(I,Ke)):Re&&(Re.d(1),Re=null),fe[2]==="database"?Pe?Pe.p(fe,Me):(Pe=Oi(fe),Pe.c(),Pe.m(I,be)):Pe&&(Pe.d(1),Pe=null),Me[0]&16&&Fe.value!==fe[4].group&&ge(Fe,fe[4].group),Me[0]&32&&Oe!==(Oe=fe[5]?"测试中...":"测试连接")&&he(vt,Oe),Me[0]&32&&(Be.disabled=fe[5]),Me[0]&130&&gt!==(gt=fe[7]?"保存中...":fe[1]?"更新连接":"添加连接")&&he(Ge,gt),Me[0]&128&&(Ze.disabled=fe[7])},d(fe){fe&&(V(e),V(H),V(I)),ae&&ae.d(),ue&&ue.d(),We&&We.d(),Ne&&Ne.d(),je&&je.d(),Re&&Re.d(),Pe&&Pe.d(),rt=!1,Le(ct)}}}function Tl(i){let e,t,u;function p(m){i[39](m)}let x={onClose:i[38],title:i[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[Rl]},$$scope:{ctx:i}};return i[0]!==void 0&&(x.isOpen=i[0]),e=new pr({props:x}),et.push(()=>St(e,"isOpen",p)),{c(){ze(e.$$.fragment)},m(m,r){Ie(e,m,r),u=!0},p(m,r){const n={};r[0]&1&&(n.onClose=m[38]),r[0]&2&&(n.title=m[1]?"编辑连接":"添加连接"),r[0]&1023|r[1]&4096&&(n.$$scope={dirty:r,ctx:m}),!t&&r[0]&1&&(t=!0,n.isOpen=m[0],yt(()=>t=!1)),e.$set(n)},i(m){u||(ke(e.$$.fragment,m),u=!0)},o(m){Ce(e.$$.fragment,m),u=!1},d(m){He(e,m)}}}function Ol(i,e,t){let{isOpen:u=!1}=e,{onAdd:p=()=>{}}=e,{onUpdate:x=()=>{}}=e,{editingAsset:m=null}=e,r="ssh",n="password",d=!1,v="",h=!1,_=!1,w=!1,k=!1,g=!1,s={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function l(){if(!window.wailsBindings){t(6,v="Wails 绑定未加载");return}if(!s.host){t(6,v="请填写主机地址");return}if(n==="password"&&!s.password){t(6,v="请输入密码以测试连接");return}if(n==="password"&&!s.username){t(6,v="请填写用户名");return}if(n==="key"&&!s.keyPath){t(6,v="请选择 SSH 密钥文件");return}t(5,d=!0),t(6,v="");try{const z=n==="key"?s.keyPath:s.password;await window.wailsBindings.TestConnection(s.host,parseInt(s.port),s.username,n,z,s.passphrase||""),t(6,v="✓ 连接成功")}catch(z){console.error("Connection test failed:",z),t(6,v="✗ 连接失败: "+z)}finally{t(5,d=!1)}}async function o(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const z=await window.wailsBindings.SelectSSHKeyFile();z&&t(4,s.keyPath=z,s)}catch(z){console.error("Failed to select key file:",z),t(6,v="选择密钥文件失败: "+z)}}async function c(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!s.name||!s.host){alert("请填写必填字段（连接名称、主机地址）");return}if(n==="password"&&!s.username){alert("密码认证需要填写用户名");return}if(n==="password"&&!s.password){alert("密码认证需要输入密码");return}if(n==="key"&&!s.keyPath){alert("密钥认证需要选择密钥文件");return}t(7,h=!0);try{const z=!!s.id,Q={id:z?s.id:`conn_${Date.now()}`,name:s.name,host:s.host,port:parseInt(s.port),user:s.username,auth_type:n,key_path:n==="key"?s.keyPath:"",tags:[s.group||"默认分组"],type:r,metadata:{database:s.database||void 0}};z?(await window.wailsBindings.UpdateConnection(Q),n==="password"&&s.password&&s.savePassword?await window.wailsBindings.SavePassword(Q.id,s.password):n==="password"&&!s.savePassword&&await window.wailsBindings.DeletePassword(Q.id),x(Q)):(p(Q),n==="password"&&s.password&&s.savePassword&&await window.wailsBindings.SavePassword(Q.id,s.password)),t(0,u=!1)}catch(z){console.error("Failed to save connection:",z),alert("保存连接失败: "+z)}finally{t(7,h=!1)}}function f(){t(4,s={id:"",name:"",host:"",port:S(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(6,v=""),t(8,_=!1),t(9,w=!1)}function S(){switch(r){case"ssh":return"22";case"docker":return"2375";case"database":switch(s.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function C(){var z,Q,te;if(!(!m||!u||k))try{const q=await window.wailsBindings.GetConnection(m.id);if(q){t(4,s={id:q.id,name:q.name||"",host:q.host||"",port:((z=q.port)==null?void 0:z.toString())||"",username:q.user||"",password:"",savePassword:!1,keyPath:q.key_path||"",passphrase:"",group:((Q=q.tags)==null?void 0:Q[0])||"",dbType:"mysql",database:((te=q.metadata)==null?void 0:te.database)||""}),t(2,r=q.type||"ssh"),t(3,n=q.auth_type||"password"),k=!0;try{if(await window.wailsBindings.HasPassword(q.id)){t(4,s.savePassword=!0,s);const ee=await window.wailsBindings.GetPassword(q.id);t(4,s.password=ee||"",s)}}catch(oe){console.warn("Failed to load password:",oe)}}}catch(q){console.error("Failed to load connection:",q)}}const L=()=>t(2,r="ssh"),y=()=>t(2,r="database"),E=()=>t(2,r="docker");function A(){s.name=this.value,t(4,s),t(0,u),t(1,m)}const T=()=>{t(3,n="password"),t(6,v="")},O=()=>{t(3,n="key"),t(6,v="")};function R(){s.keyPath=this.value,t(4,s),t(0,u),t(1,m)}function j(){s.passphrase=this.value,t(4,s),t(0,u),t(1,m)}function K(){s.passphrase=this.value,t(4,s),t(0,u),t(1,m)}const X=()=>t(9,w=!w);function Y(){s.dbType=ws(this),t(4,s),t(0,u),t(1,m)}function Z(){s.host=this.value,t(4,s),t(0,u),t(1,m)}function M(){s.port=this.value,t(4,s),t(0,u),t(1,m)}function P(){s.username=this.value,t(4,s),t(0,u),t(1,m)}function H(){s.password=this.value,t(4,s),t(0,u),t(1,m)}function I(){s.password=this.value,t(4,s),t(0,u),t(1,m)}const U=()=>t(8,_=!_);function J(){s.savePassword=this.checked,t(4,s),t(0,u),t(1,m)}function $(){s.database=this.value,t(4,s),t(0,u),t(1,m)}function ne(){s.group=this.value,t(4,s),t(0,u),t(1,m)}const F=()=>t(0,u=!1),D=()=>{t(0,u=!1)};function N(z){u=z,t(0,u)}return i.$$set=z=>{"isOpen"in z&&t(0,u=z.isOpen),"onAdd"in z&&t(14,p=z.onAdd),"onUpdate"in z&&t(15,x=z.onUpdate),"editingAsset"in z&&t(1,m=z.editingAsset)},i.$$.update=()=>{i.$$.dirty[0]&1&&t(16,g=u),i.$$.dirty[0]&65537&&g&&!u&&f(),i.$$.dirty[0]&19&&u&&!m&&!s.id&&(s.port||t(4,s.port=S(),s)),i.$$.dirty[0]&16&&s.port===""&&t(4,s.port=S(),s),i.$$.dirty[0]&12&&(r==="ssh"?n!=="password"&&n!=="key"&&t(3,n="password"):t(3,n="password")),i.$$.dirty[0]&3&&u&&m&&C(),i.$$.dirty[0]&18&&m&&s.id!==m.id&&(k=!1),i.$$.dirty[0]&65539&&!g&&u&&m&&(k=!1)},[u,m,r,n,s,d,v,h,_,w,l,o,c,S,p,x,g,L,y,E,A,T,O,R,j,K,X,Y,Z,M,P,H,I,U,J,$,ne,F,D,N]}class Pl extends Qe{constructor(e){super(),Ye(this,e,Ol,Tl,Je,{isOpen:0,onAdd:14,onUpdate:15,editingAsset:1},null,[-1,-1])}}function Il(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o,c,f,S,C,L,y,E,A,T,O,R,j,K,X;return{c(){e=B("div"),t=B("div"),t.textContent="哈",u=W(),p=B("div"),x=B("h3"),m=se("AHaSSHTools"),n=W(),d=B("p"),v=se("啊哈 SSH 连接工具"),_=W(),w=B("p"),k=se("版本 1.0.0"),s=W(),l=B("p"),o=se("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),f=W(),S=B("button"),C=re("svg"),L=re("path"),y=W(),E=B("span"),E.textContent="访问 GitHub",T=W(),O=B("p"),R=se("© 2026 AHaSSHTools. All rights reserved."),a(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),a(x,"class",r="text-xl font-bold "+(i[2]==="dark"?"text-white":"text-gray-900")),a(d,"class",h="text-sm "+(i[2]==="dark"?"text-gray-400":"text-gray-500")),a(w,"class",g="text-xs "+(i[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),a(p,"class","text-center space-y-1"),a(l,"class",c="text-sm text-center max-w-xs "+(i[2]==="dark"?"text-gray-400":"text-gray-600")),a(L,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),a(C,"class","w-5 h-5"),a(C,"viewBox","0 0 24 24"),a(C,"fill","currentColor"),a(S,"class",A="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(i[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),a(O,"class",j="text-xs "+(i[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),a(e,"class","flex flex-col items-center gap-5 py-4")},m(Y,Z){G(Y,e,Z),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),b(p,n),b(p,d),b(d,v),b(p,_),b(p,w),b(w,k),b(e,s),b(e,l),b(l,o),b(e,f),b(e,S),b(S,C),b(C,L),b(S,y),b(S,E),b(e,T),b(e,O),b(O,R),K||(X=ie(S,"click",Fl),K=!0)},p(Y,Z){Z&4&&r!==(r="text-xl font-bold "+(Y[2]==="dark"?"text-white":"text-gray-900"))&&a(x,"class",r),Z&4&&h!==(h="text-sm "+(Y[2]==="dark"?"text-gray-400":"text-gray-500"))&&a(d,"class",h),Z&4&&g!==(g="text-xs "+(Y[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&a(w,"class",g),Z&4&&c!==(c="text-sm text-center max-w-xs "+(Y[2]==="dark"?"text-gray-400":"text-gray-600"))&&a(l,"class",c),Z&4&&A!==(A="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(Y[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&a(S,"class",A),Z&4&&j!==(j="text-xs "+(Y[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&a(O,"class",j)},d(Y){Y&&V(e),K=!1,X()}}}function Hl(i){let e,t,u;function p(m){i[4](m)}let x={onClose:i[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[Il]},$$scope:{ctx:i}};return i[0]!==void 0&&(x.isOpen=i[0]),e=new pr({props:x}),et.push(()=>St(e,"isOpen",p)),{c(){ze(e.$$.fragment)},m(m,r){Ie(e,m,r),u=!0},p(m,[r]){const n={};r&2&&(n.onClose=m[1]),r&68&&(n.$$scope={dirty:r,ctx:m}),!t&&r&1&&(t=!0,n.isOpen=m[0],yt(()=>t=!1)),e.$set(n)},i(m){u||(ke(e.$$.fragment,m),u=!0)},o(m){Ce(e.$$.fragment,m),u=!1},d(m){He(e,m)}}}async function Fl(){try{await(await Qt(()=>Promise.resolve().then(()=>$i),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(i){console.error("Failed to open GitHub:",i),window.open("https://github.com/a602017206/sshTools","_blank")}}function Wl(i,e,t){let{isOpen:u=!1}=e,{onClose:p=()=>{}}=e,{themeStore:x={subscribe:()=>()=>{}}}=e,m="light";const r=x.subscribe(d=>{t(2,m=d)});Tt(()=>()=>{r()});function n(d){u=d,t(0,u)}return i.$$set=d=>{"isOpen"in d&&t(0,u=d.isOpen),"onClose"in d&&t(1,p=d.onClose),"themeStore"in d&&t(3,x=d.themeStore)},[u,p,m,x,n]}class zl extends Qe{constructor(e){super(),Ye(this,e,Wl,Hl,Je,{isOpen:0,onClose:1,themeStore:3})}}function jl(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),a(e,"class","w-5 h-5"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Ul(i){let e,t;return{c(){e=re("svg"),t=re("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),a(e,"class","w-5 h-5"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(u,p){G(u,e,p),b(e,t)},d(u){u&&V(e)}}}function Pi(i){let e,t,u,p,x,m;return{c(){e=B("button"),t=re("svg"),u=re("path"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M9 5l7 7-7 7"),a(t,"class","w-5 h-5"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),e.disabled=i[2],a(e,"class",p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),a(e,"title","展开资产列表")},m(r,n){G(r,e,n),b(e,t),b(t,u),x||(m=ie(e,"click",i[14]),x=!0)},p(r,n){n[0]&4&&(e.disabled=r[2]),n[0]&1&&p!==(p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&a(e,"class",p)},d(r){r&&V(e),x=!1,m()}}}function Ii(i){let e,t,u,p,x,m,r,n,d;return{c(){e=B("div"),t=B("div"),u=W(),p=B("button"),x=re("svg"),m=re("path"),a(t,"class","h-full w-full rounded svelte-m8xeqv"),a(m,"stroke-linecap","round"),a(m,"stroke-linejoin","round"),a(m,"stroke-width","2"),a(m,"d","M15 19l-7-7 7-7"),a(x,"class","w-4 h-4"),a(x,"fill","none"),a(x,"stroke","currentColor"),a(x,"viewBox","0 0 24 24"),p.disabled=i[2],a(p,"class",r="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(i[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),a(p,"title","折叠资产列表"),a(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),a(e,"role","separator"),a(e,"aria-hidden","true"),de(e,"cursor",i[2]?"default":"col-resize"),de(e,"height","100%"),de(e,"padding","0 2px"),de(e,"pointer-events",i[2]?"none":"auto")},m(v,h){G(v,e,h),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),n||(d=[ie(p,"click",i[14]),ie(e,"mousedown",i[16])],n=!0)},p(v,h){h[0]&4&&(p.disabled=v[2]),h[0]&1&&r!==(r="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(v[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&a(p,"class",r),h[0]&4&&de(e,"cursor",v[2]?"default":"col-resize"),h[0]&4&&de(e,"pointer-events",v[2]?"none":"auto")},d(v){v&&V(e),n=!1,Le(d)}}}function Hi(i){let e,t,u,p,x,m,r,n,d;return{c(){e=B("div"),t=B("div"),u=W(),p=B("button"),x=re("svg"),m=re("path"),a(t,"class","h-full w-full rounded svelte-m8xeqv"),a(m,"stroke-linecap","round"),a(m,"stroke-linejoin","round"),a(m,"stroke-width","2"),a(m,"d","M9 5l7 7-7 7"),a(x,"class","w-4 h-4"),a(x,"fill","none"),a(x,"stroke","currentColor"),a(x,"viewBox","0 0 24 24"),p.disabled=i[2],a(p,"class",r="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(i[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),a(p,"title","折叠右侧面板"),a(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),a(e,"role","separator"),a(e,"aria-hidden","true"),de(e,"cursor",i[2]?"default":"col-resize"),de(e,"height","100%"),de(e,"padding","0 2px"),de(e,"pointer-events",i[2]?"none":"auto")},m(v,h){G(v,e,h),b(e,t),b(e,u),b(e,p),b(p,x),b(x,m),n||(d=[ie(p,"click",i[15]),ie(e,"mousedown",i[17])],n=!0)},p(v,h){h[0]&4&&(p.disabled=v[2]),h[0]&1&&r!==(r="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(v[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&a(p,"class",r),h[0]&4&&de(e,"cursor",v[2]?"default":"col-resize"),h[0]&4&&de(e,"pointer-events",v[2]?"none":"auto")},d(v){v&&V(e),n=!1,Le(d)}}}function Fi(i){let e,t,u,p,x,m;return{c(){e=B("button"),t=re("svg"),u=re("path"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M15 19l-7-7 7-7"),a(t,"class","w-5 h-5"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),e.disabled=i[2],a(e,"class",p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),a(e,"title","展开右侧面板")},m(r,n){G(r,e,n),b(e,t),b(t,u),x||(m=ie(e,"click",i[15]),x=!0)},p(r,n){n[0]&4&&(e.disabled=r[2]),n[0]&1&&p!==(p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&a(e,"class",p)},d(r){r&&V(e),x=!1,m()}}}function Nl(i){let e,t,u,p,x,m,r,n,d,v,h,_,w,k,g,s,l,o,c,f,S,C,L,y,E,A,T,O,R,j,K,X,Y,Z,M,P,H,I,U,J,$,ne,F,D,N,z,Q,te,q,oe,ee,ce,le,xe,ye,De,_e,pe,we,Ke,be,Ue,Xe;function Ve(ae,ue){return ae[0]==="dark"?Ul:jl}let Fe=Ve(i),Ae=Fe(i),Ee=i[4]&&Pi(i);j=new js({props:{onConnect:i[19],onAddClick:i[25],onDelete:i[26],onEdit:i[21]}});let me=!i[4]&&Ii(i),it={};M=new fo({props:it}),i[27](M);let Be=!i[5]&&Hi(i);$=new Aa({}),Q=new ja({});let Oe=i[5]&&Fi(i);function vt(ae){i[28](ae)}function st(ae){i[29](ae)}let Ze={onAdd:i[20],onUpdate:i[22]};i[2]!==void 0&&(Ze.isOpen=i[2]),i[6]!==void 0&&(Ze.editingAsset=i[6]),ee=new Pl({props:Ze}),et.push(()=>St(ee,"isOpen",vt)),et.push(()=>St(ee,"editingAsset",st));function gt(ae){i[30](ae)}let Ge={themeStore:Rt};i[1]!==void 0&&(Ge.isOpen=i[1]),ye=new kl({props:Ge}),et.push(()=>St(ye,"isOpen",gt));function rt(ae){i[32](ae)}let ct={onClose:i[31],themeStore:Rt};return i[3]!==void 0&&(ct.isOpen=i[3]),pe=new zl({props:ct}),et.push(()=>St(pe,"isOpen",rt)),{c(){e=B("div"),t=B("header"),u=B("div"),p=B("div"),p.textContent="哈",x=W(),m=B("div"),r=B("div"),n=se("啊哈 SSH 连接工具"),v=W(),h=B("div"),_=se("AHa SSH Manager"),k=W(),g=B("div"),s=B("button"),Ae.c(),c=W(),f=B("button"),S=re("svg"),C=re("path"),L=W(),y=B("span"),y.textContent="开发工具",A=W(),T=B("div"),Ee&&Ee.c(),O=W(),R=B("div"),ze(j.$$.fragment),X=W(),me&&me.c(),Y=W(),Z=B("div"),ze(M.$$.fragment),H=W(),Be&&Be.c(),I=W(),U=B("div"),J=B("div"),ze($.$$.fragment),ne=W(),F=B("div"),D=B("div"),N=W(),z=B("div"),ze(Q.$$.fragment),q=W(),Oe&&Oe.c(),oe=W(),ze(ee.$$.fragment),xe=W(),ze(ye.$$.fragment),_e=W(),ze(pe.$$.fragment),a(p,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),a(r,"class",d="font-semibold text-sm "+(i[0]==="dark"?"text-white":"text-gray-900")),a(h,"class",w="text-xs "+(i[0]==="dark"?"text-gray-400":"text-gray-500")),a(u,"class","flex items-center gap-3"),s.disabled=i[2],a(s,"class",l="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(i[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),a(s,"title",o=i[0]==="dark"?"切换到浅色模式":"切换到深色模式"),a(C,"stroke-linecap","round"),a(C,"stroke-linejoin","round"),a(C,"stroke-width","2"),a(C,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),a(S,"class","w-4 h-4"),a(S,"fill","none"),a(S,"stroke","currentColor"),a(S,"viewBox","0 0 24 24"),a(y,"class","text-sm"),f.disabled=i[2],a(f,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),a(g,"class","ml-auto flex items-center gap-3"),a(t,"class",E="h-14 flex-shrink-0 "+(i[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),de(t,"pointer-events",i[2]?"none":"auto"),a(R,"class",K="flex-shrink-0 transition-all duration-200 "+(i[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),de(R,"width",(i[4]?"0":i[10])+"px"),de(R,"min-width",(i[4]?"0":i[10])+"px"),Jt(R,"collapsed",i[4]),a(Z,"class",P="flex-1 min-w-0 min-h-0 flex flex-col "+(i[0]==="dark"?"bg-gray-900":"bg-gray-50")),a(J,"class","overflow-hidden"),de(J,"height",i[8]+"%"),de(J,"min-height","0"),a(D,"class","w-full h-full rounded svelte-m8xeqv"),a(F,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),a(F,"role","separator"),a(F,"aria-hidden","true"),de(F,"cursor",i[2]?"default":"row-resize"),de(F,"width","100%"),de(F,"padding","2px 0"),de(F,"pointer-events",i[2]?"none":"auto"),a(z,"class","overflow-hidden"),de(z,"height",100-i[8]+"%"),de(z,"min-height","0"),a(U,"data-right-panel","true"),a(U,"class",te="flex-shrink-0 flex flex-col overflow-hidden "+(i[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),de(U,"width",(i[5]?"0":i[9])+"px"),de(U,"min-width",i[5]?"0":"300px"),de(U,"max-width","600px"),Jt(U,"collapsed",i[5]),a(T,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),a(e,"class",Ke="h-screen w-full flex flex-col "+i[11]+" "+(i[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(ae,ue){G(ae,e,ue),b(e,t),b(t,u),b(u,p),b(u,x),b(u,m),b(m,r),b(r,n),b(m,v),b(m,h),b(h,_),b(t,k),b(t,g),b(g,s),Ae.m(s,null),b(g,c),b(g,f),b(f,S),b(S,C),b(f,L),b(f,y),b(e,A),b(e,T),Ee&&Ee.m(T,null),b(T,O),b(T,R),Ie(j,R,null),b(T,X),me&&me.m(T,null),b(T,Y),b(T,Z),Ie(M,Z,null),b(T,H),Be&&Be.m(T,null),b(T,I),b(T,U),b(U,J),Ie($,J,null),b(U,ne),b(U,F),b(F,D),b(U,N),b(U,z),Ie(Q,z,null),b(T,q),Oe&&Oe.m(T,null),b(e,oe),Ie(ee,e,null),b(e,xe),Ie(ye,e,null),b(e,_e),Ie(pe,e,null),be=!0,Ue||(Xe=[ie(s,"click",i[12]),ie(f,"click",i[13]),ie(F,"mousedown",i[18])],Ue=!0)},p(ae,ue){(!be||ue[0]&1&&d!==(d="font-semibold text-sm "+(ae[0]==="dark"?"text-white":"text-gray-900")))&&a(r,"class",d),(!be||ue[0]&1&&w!==(w="text-xs "+(ae[0]==="dark"?"text-gray-400":"text-gray-500")))&&a(h,"class",w),Fe!==(Fe=Ve(ae))&&(Ae.d(1),Ae=Fe(ae),Ae&&(Ae.c(),Ae.m(s,null))),(!be||ue[0]&4)&&(s.disabled=ae[2]),(!be||ue[0]&1&&l!==(l="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(ae[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&a(s,"class",l),(!be||ue[0]&1&&o!==(o=ae[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&a(s,"title",o),(!be||ue[0]&4)&&(f.disabled=ae[2]),(!be||ue[0]&1&&E!==(E="h-14 flex-shrink-0 "+(ae[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&a(t,"class",E),(!be||ue[0]&4)&&de(t,"pointer-events",ae[2]?"none":"auto"),ae[4]?Ee?Ee.p(ae,ue):(Ee=Pi(ae),Ee.c(),Ee.m(T,O)):Ee&&(Ee.d(1),Ee=null);const We={};ue[0]&68&&(We.onAddClick=ae[25]),j.$set(We),(!be||ue[0]&1&&K!==(K="flex-shrink-0 transition-all duration-200 "+(ae[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&a(R,"class",K),(!be||ue[0]&1040)&&de(R,"width",(ae[4]?"0":ae[10])+"px"),(!be||ue[0]&1040)&&de(R,"min-width",(ae[4]?"0":ae[10])+"px"),(!be||ue[0]&17)&&Jt(R,"collapsed",ae[4]),ae[4]?me&&(me.d(1),me=null):me?me.p(ae,ue):(me=Ii(ae),me.c(),me.m(T,Y));const Ne={};M.$set(Ne),(!be||ue[0]&1&&P!==(P="flex-1 min-w-0 min-h-0 flex flex-col "+(ae[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&a(Z,"class",P),ae[5]?Be&&(Be.d(1),Be=null):Be?Be.p(ae,ue):(Be=Hi(ae),Be.c(),Be.m(T,I)),(!be||ue[0]&256)&&de(J,"height",ae[8]+"%"),(!be||ue[0]&4)&&de(F,"cursor",ae[2]?"default":"row-resize"),(!be||ue[0]&4)&&de(F,"pointer-events",ae[2]?"none":"auto"),(!be||ue[0]&256)&&de(z,"height",100-ae[8]+"%"),(!be||ue[0]&1&&te!==(te="flex-shrink-0 flex flex-col overflow-hidden "+(ae[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&a(U,"class",te),(!be||ue[0]&544)&&de(U,"width",(ae[5]?"0":ae[9])+"px"),(!be||ue[0]&32)&&de(U,"min-width",ae[5]?"0":"300px"),(!be||ue[0]&33)&&Jt(U,"collapsed",ae[5]),ae[5]?Oe?Oe.p(ae,ue):(Oe=Fi(ae),Oe.c(),Oe.m(T,null)):Oe&&(Oe.d(1),Oe=null);const je={};!ce&&ue[0]&4&&(ce=!0,je.isOpen=ae[2],yt(()=>ce=!1)),!le&&ue[0]&64&&(le=!0,je.editingAsset=ae[6],yt(()=>le=!1)),ee.$set(je);const Re={};!De&&ue[0]&2&&(De=!0,Re.isOpen=ae[1],yt(()=>De=!1)),ye.$set(Re);const Pe={};ue[0]&8&&(Pe.onClose=ae[31]),!we&&ue[0]&8&&(we=!0,Pe.isOpen=ae[3],yt(()=>we=!1)),pe.$set(Pe),(!be||ue[0]&2049&&Ke!==(Ke="h-screen w-full flex flex-col "+ae[11]+" "+(ae[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&a(e,"class",Ke)},i(ae){be||(ke(j.$$.fragment,ae),ke(M.$$.fragment,ae),ke($.$$.fragment,ae),ke(Q.$$.fragment,ae),ke(ee.$$.fragment,ae),ke(ye.$$.fragment,ae),ke(pe.$$.fragment,ae),be=!0)},o(ae){Ce(j.$$.fragment,ae),Ce(M.$$.fragment,ae),Ce($.$$.fragment,ae),Ce(Q.$$.fragment,ae),Ce(ee.$$.fragment,ae),Ce(ye.$$.fragment,ae),Ce(pe.$$.fragment,ae),be=!1},d(ae){ae&&V(e),Ae.d(),Ee&&Ee.d(),He(j),me&&me.d(),i[27](null),He(M),Be&&Be.d(),He($),He(Q),Oe&&Oe.d(),He(ee),He(ye),He(pe),Ue=!1,Le(Xe)}}}function hr(){const i=document.getElementById("app");i&&(i.style.height="100vh",i.style.width="100vw")}function Kl(i,e,t){let u,p,x,m,r,n,d;_t(i,Rt,q=>t(0,r=q)),_t(i,lt,q=>t(23,n=q)),_t(i,ft,q=>t(24,d=q));let v=!1,h=!1,_=!1,w=!1,k=!1,g=null,s,l=!1,o=!1,c=!1;function f(){cr(r==="light"?"dark":"light")}function S(){h||t(1,v=!v)}function C(){h||t(4,w=!w)}function L(){h||t(5,k=!k)}function y(q){q.preventDefault(),!(w||h)&&(l=!0,document.addEventListener("mousemove",E),document.addEventListener("mouseup",A))}function E(q){if(!l)return;const oe=Math.max(200,Math.min(500,q.clientX));Os(oe)}function A(){l=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",A)}function T(q){q.preventDefault(),!h&&(o=!0,document.addEventListener("mousemove",O),document.addEventListener("mouseup",R))}function O(q){if(!o)return;const oe=window.innerWidth,ee=Math.max(300,Math.min(600,oe-q.clientX));Ps(ee)}function R(){o=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",R)}function j(q){if(q.preventDefault(),h)return;c=!0;const oe=document.querySelector("[data-right-panel]");if(oe){const ee=oe.getBoundingClientRect();K=q.clientY,X=m,Y=ee.height}document.addEventListener("mousemove",Z),document.addEventListener("mouseup",M)}let K=0,X=50,Y=0;function Z(q){if(!c)return;const ee=(q.clientY-K)/Y*100,ce=Math.max(20,Math.min(80,X+ee));Is(ce)}function M(){c=!1,document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",M)}function P(q){s&&typeof s.handleConnect=="function"?s.handleConnect(q):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function H(q){var oe;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(q);const ee={id:q.id,name:q.name,host:q.host,port:q.port,username:q.user,group:((oe=q.tags)==null?void 0:oe[0])||"默认分组",status:"online",type:q.type||"ssh",auth_type:q.auth_type,key_path:q.key_path,tags:q.tags||[]};mt.update(ce=>[...ce,ee])}catch(ee){throw console.error("Failed to add asset:",ee),ee}}function I(q){t(6,g=q),t(2,h=!0)}async function U(q){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{mt.update(oe=>oe.map(ee=>{var ce;return ee.id===q.id?{...ee,id:q.id,name:q.name,host:q.host,port:q.port,username:q.user,group:((ce=q.tags)==null?void 0:ce[0])||"默认分组",type:q.type||"ssh",auth_type:q.auth_type,key_path:q.key_path,tags:q.tags||[]}:ee}))}catch(oe){throw console.error("Failed to update asset:",oe),oe}}async function J(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const q=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",q);const oe=q.map(ee=>{var ce;return{id:ee.id,name:ee.name,host:ee.host,port:ee.port,username:ee.user,group:((ce=ee.tags)==null?void 0:ce[0])||"默认分组",status:"online",type:"ssh",auth_type:ee.auth_type,key_path:ee.key_path,tags:ee.tags||[]}});mt.set(oe)}catch(q){console.error("Failed to load connections:",q)}}Tt(async()=>{const q=localStorage.getItem("ssh-tools-theme");q?cr(q):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&cr("dark");let oe=null;try{const ee=await Qt(()=>Promise.resolve().then(()=>ua),void 0);window.wailsBindings=ee,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(ee.default||ee).join(", ")})),await J(),oe=(await Qt(()=>Promise.resolve().then(()=>$i),void 0)).EventsOn("app:show-about",()=>{t(3,_=!0)})}catch(ee){console.warn("Wails bindings not available yet:",ee.message)}return hr(),window.addEventListener("resize",hr),()=>{window.removeEventListener("resize",hr),oe&&oe()}});const $=()=>{t(6,g=null),t(2,h=!0)},ne=async q=>{if(!window.wailsBindings){mt.update(oe=>oe.filter(ee=>ee.id!==q.id));return}if(confirm(`确定要删除连接 "${q.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(q.id),mt.update(oe=>oe.filter(ee=>ee.id!==q.id))}catch(oe){console.error("Failed to delete asset:",oe),alert("删除连接失败: "+oe)}};function F(q){et[q?"unshift":"push"](()=>{s=q,t(7,s)})}function D(q){h=q,t(2,h)}function N(q){g=q,t(6,g)}function z(q){v=q,t(1,v)}const Q=()=>t(3,_=!1);function te(q){_=q,t(3,_)}return i.$$.update=()=>{i.$$.dirty[0]&16777216&&d&&Array.from(d.values()),i.$$.dirty[0]&1&&t(11,u=r==="dark"?"dark":""),i.$$.dirty[0]&8388608&&t(10,p=n.sidebarWidth),i.$$.dirty[0]&8388608&&t(9,x=n.rightPanelWidth),i.$$.dirty[0]&8388608&&t(8,m=n.fileManagerHeight)},[r,v,h,_,w,k,g,s,m,x,p,u,f,S,C,L,y,T,j,P,H,I,U,n,d,$,ne,F,D,N,z,Q,te]}class Vl extends Qe{constructor(e){super(),Ye(this,e,Kl,Nl,Je,{},null,[-1,-1])}}new Vl({target:document.getElementById("app")});
