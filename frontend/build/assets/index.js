var xn=Object.defineProperty;var En=(r,e,t)=>e in r?xn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ar=(r,e,t)=>En(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))l(_);new MutationObserver(_=>{for(const w of _)if(w.type==="childList")for(const p of w.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function t(_){const w={};return _.integrity&&(w.integrity=_.integrity),_.referrerPolicy&&(w.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?w.credentials="include":_.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function l(_){if(_.ep)return;_.ep=!0;const w=t(_);fetch(_.href,w)}})();const Ln="modulepreload",Mn=function(r){return"/"+r},Jr={},ur=function(e,t,l){let _=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),i=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));_=Promise.allSettled(t.map(n=>{if(n=Mn(n),n in Jr)return;Jr[n]=!0;const u=n.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${m}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Ln,u||(d.as="script"),d.crossOrigin="",d.href=n,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((g,y)=>{d.addEventListener("load",g),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})}))}function w(p){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=p,window.dispatchEvent(i),!i.defaultPrevented)throw p}return _.then(p=>{for(const i of p||[])i.status==="rejected"&&w(i.reason);return e().catch(w)})};function Ae(){}function Dn(r,e){for(const t in e)r[t]=e[t];return r}function Zs(r){return r()}function Xr(){return Object.create(null)}function Pe(r){r.forEach(Zs)}function It(r){return typeof r=="function"}function ut(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Tn(r){return Object.keys(r).length===0}function jr(r,...e){if(r==null){for(const l of e)l(void 0);return Ae}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Bn(r){let e;return jr(r,t=>e=t)(),e}function vt(r,e,t){r.$$.on_destroy.push(jr(e,t))}function An(r,e,t,l){if(r){const _=Qs(r,e,t,l);return r[0](_)}}function Qs(r,e,t,l){return r[1]&&l?Dn(t.ctx.slice(),r[1](l(e))):t.ctx}function Rn(r,e,t,l){return r[2],e.dirty}function On(r,e,t,l,_,w){if(_){const p=Qs(e,t,l,w);r.p(p,_)}}function Pn(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let l=0;l<t;l++)e[l]=-1;return e}return-1}function Yr(r){return r??""}function $s(r){return r&&It(r.destroy)?r.destroy:Ae}const en=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(r,e){r.appendChild(e)}function V(r,e,t){r.insertBefore(e,t||null)}function N(r){r.parentNode&&r.parentNode.removeChild(r)}function Nt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function L(r){return document.createElement(r)}function le(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Z(r){return document.createTextNode(r)}function O(){return Z(" ")}function wt(){return Z("")}function $(r,e,t,l){return r.addEventListener(e,t,l),()=>r.removeEventListener(e,t,l)}function Hn(r){return function(e){return e.preventDefault(),r.call(this,e)}}function Zr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function s(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function In(r){let e;return{p(...t){e=t,e.forEach(l=>r.push(l))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function Wr(r){return r===""?null:+r}function Fn(r){return Array.from(r.childNodes)}function de(r,e){e=""+e,r.data!==e&&(r.data=e)}function Ce(r,e){r.value=e??""}function Ee(r,e,t,l){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function Lr(r,e,t){for(let l=0;l<r.options.length;l+=1){const _=r.options[l];if(_.__value===e){_.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function tn(r){const e=r.querySelector(":checked");return e&&e.__value}function kr(r,e,t){r.classList.toggle(e,!!t)}function Ct(r,e){return new r(e)}let fr;function dr(r){fr=r}function rn(){if(!fr)throw new Error("Function called outside component initialization");return fr}function ar(r){rn().$$.on_mount.push(r)}function Mr(r){rn().$$.on_destroy.push(r)}const sr=[],lt=[];let nr=[];const Hr=[],sn=Promise.resolve();let Ir=!1;function nn(){Ir||(Ir=!0,sn.then(on))}function xr(){return nn(),sn}function _r(r){nr.push(r)}function pt(r){Hr.push(r)}const Rr=new Set;let rr=0;function on(){if(rr!==0)return;const r=fr;do{try{for(;rr<sr.length;){const e=sr[rr];rr++,dr(e),jn(e.$$)}}catch(e){throw sr.length=0,rr=0,e}for(dr(null),sr.length=0,rr=0;lt.length;)lt.pop()();for(let e=0;e<nr.length;e+=1){const t=nr[e];Rr.has(t)||(Rr.add(t),t())}nr.length=0}while(sr.length);for(;Hr.length;)Hr.pop()();Ir=!1,Rr.clear(),dr(r)}function jn(r){if(r.fragment!==null){r.update(),Pe(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(_r)}}function Wn(r){const e=[],t=[];nr.forEach(l=>r.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),nr=e}const Er=new Set;let Vt;function xt(){Vt={r:0,c:[],p:Vt}}function Et(){Vt.r||Pe(Vt.c),Vt=Vt.p}function Oe(r,e){r&&r.i&&(Er.delete(r),r.i(e))}function He(r,e,t,l){if(r&&r.o){if(Er.has(r))return;Er.add(r),Vt.c.push(()=>{Er.delete(r),l&&(t&&r.d(1),l())}),r.o(e)}else l&&l()}function ze(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Mt(r,e){r.d(1),e.delete(r.key)}function zn(r,e){He(r,1,1,()=>{e.delete(r.key)})}function Lt(r,e,t,l,_,w,p,i,n,u,m,d){let g=r.length,y=w.length,k=g;const v={};for(;k--;)v[r[k].key]=k;const o=[],h=new Map,a=new Map,f=[];for(k=y;k--;){const x=d(_,w,k),S=t(x);let M=p.get(S);M?f.push(()=>M.p(x,e)):(M=u(S,x),M.c()),h.set(S,o[k]=M),S in v&&a.set(S,Math.abs(k-v[S]))}const b=new Set,E=new Set;function C(x){Oe(x,1),x.m(i,m),p.set(x.key,x),m=x.first,y--}for(;g&&y;){const x=o[y-1],S=r[g-1],M=x.key,T=S.key;x===S?(m=x.first,g--,y--):h.has(T)?!p.has(M)||b.has(M)?C(x):E.has(T)?g--:a.get(M)>a.get(T)?(E.add(M),C(x)):(b.add(T),g--):(n(S,p),g--)}for(;g--;){const x=r[g];h.has(x.key)||n(x,p)}for(;y;)C(o[y-1]);return Pe(f),o}function gt(r,e,t){const l=r.$$.props[e];l!==void 0&&(r.$$.bound[l]=t,t(r.$$.ctx[l]))}function Ze(r){r&&r.c()}function Je(r,e,t){const{fragment:l,after_update:_}=r.$$;l&&l.m(e,t),_r(()=>{const w=r.$$.on_mount.map(Zs).filter(It);r.$$.on_destroy?r.$$.on_destroy.push(...w):Pe(w),r.$$.on_mount=[]}),_.forEach(_r)}function Xe(r,e){const t=r.$$;t.fragment!==null&&(Wn(t.after_update),Pe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Un(r,e){r.$$.dirty[0]===-1&&(sr.push(r),nn(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ft(r,e,t,l,_,w,p=null,i=[-1]){const n=fr;dr(r);const u=r.$$={fragment:null,ctx:[],props:w,update:Ae,not_equal:_,bound:Xr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(n?n.$$.context:[])),callbacks:Xr(),dirty:i,skip_bound:!1,root:e.target||n.$$.root};p&&p(u.root);let m=!1;if(u.ctx=t?t(r,e.props||{},(d,g,...y)=>{const k=y.length?y[0]:g;return u.ctx&&_(u.ctx[d],u.ctx[d]=k)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](k),m&&Un(r,d)),g}):[],u.update(),m=!0,Pe(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const d=Fn(e.target);u.fragment&&u.fragment.l(d),d.forEach(N)}else u.fragment&&u.fragment.c();e.intro&&Oe(r.$$.fragment),Je(r,e.target,e.anchor),on()}dr(n)}class _t{constructor(){Ar(this,"$$");Ar(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=Ae}$on(e,t){if(!It(t))return Ae;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const _=l.indexOf(t);_!==-1&&l.splice(_,1)}}$set(e){this.$$set&&!Tn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Nn);const ir=[];function Vn(r,e){return{subscribe:Kt(r,e).subscribe}}function Kt(r,e=Ae){let t;const l=new Set;function _(i){if(ut(r,i)&&(r=i,t)){const n=!ir.length;for(const u of l)u[1](),ir.push(u,r);if(n){for(let u=0;u<ir.length;u+=2)ir[u][0](ir[u+1]);ir.length=0}}}function w(i){_(i(r))}function p(i,n=Ae){const u=[i,n];return l.add(u),l.size===1&&(t=e(_,w)||Ae),i(r),()=>{l.delete(u),l.size===0&&t&&(t(),t=null)}}return{set:_,update:w,subscribe:p}}function Rt(r,e,t){const l=!Array.isArray(r),_=l?[r]:r;if(!_.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const w=e.length<2;return Vn(t,(p,i)=>{let n=!1;const u=[];let m=0,d=Ae;const g=()=>{if(m)return;d();const k=e(l?u[0]:u,p,i);w?p(k):d=It(k)?k:Ae},y=_.map((k,v)=>jr(k,o=>{u[v]=o,m&=~(1<<v),n&&g()},()=>{m|=1<<v}));return n=!0,g(),function(){Pe(y),d(),n=!1}})}const Ut=Kt([]),Kn=Rt(Ut,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{})),At=Kt(new Map),zt=Kt(null),ln="ssh-tools-theme";function qn(){if(typeof window>"u")return null;try{return localStorage.getItem(ln)}catch{return null}}function Gn(r){if(!(typeof window>"u"))try{localStorage.setItem(ln,r)}catch{}}const Jn=qn(),Xn=Jn||"light",or=Kt(Xn);function Or(r){or.set(r),Gn(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Yn(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const Zn={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},Qn=Yn(),Dt=Kt({...Zn,...Qn});Dt.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});Rt(Dt,r=>r.isDevToolsOpen);Rt(Dt,r=>r.isFileManagerOpen);Rt(Dt,r=>r.isMonitorOpen);Rt(Dt,r=>r.sidebarWidth);Rt(Dt,r=>r.rightPanelWidth);Rt(Dt,r=>r.fileManagerHeight);function $n(r){Dt.update(e=>({...e,sidebarWidth:r}))}function eo(r){Dt.update(e=>({...e,rightPanelWidth:r}))}function to(r){Dt.update(e=>({...e,fileManagerHeight:r}))}function Qr(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k;const v=r[6].default,o=An(v,r,r[5],null);return{c(){e=L("div"),t=L("div"),l=O(),_=L("div"),w=L("div"),p=L("h2"),i=Z(r[2]),n=O(),u=L("button"),u.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),d=L("div"),o&&o.c(),s(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),s(p,"class","text-base font-semibold text-gray-900 dark:text-white"),s(u,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(w,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex-1 overflow-y-auto p-6"),s(_,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center"),s(e,"role","dialog"),s(e,"aria-modal","true")},m(h,a){V(h,e,a),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),c(p,i),c(w,n),c(w,u),c(_,m),c(_,d),o&&o.m(d,null),g=!0,y||(k=[$(u,"click",function(){It(r[1])&&r[1].apply(this,arguments)}),$(e,"click",r[3])],y=!0)},p(h,a){r=h,(!g||a&4)&&de(i,r[2]),o&&o.p&&(!g||a&32)&&On(o,v,r,r[5],g?Rn(v,r[5],a,null):Pn(r[5]),null)},i(h){g||(Oe(o,h),g=!0)},o(h){He(o,h),g=!1},d(h){h&&N(e),o&&o.d(h),y=!1,Pe(k)}}}function ro(r){let e,t,l=r[0]&&Qr(r);return{c(){l&&l.c(),e=wt()},m(_,w){l&&l.m(_,w),V(_,e,w),t=!0},p(_,[w]){_[0]?l?(l.p(_,w),w&1&&Oe(l,1)):(l=Qr(_),l.c(),Oe(l,1),l.m(e.parentNode,e)):l&&(xt(),He(l,1,1,()=>{l=null}),Et())},i(_){t||(Oe(l),t=!0)},o(_){He(l),t=!1},d(_){_&&N(e),l&&l.d(_)}}}function io(r,e,t){let{$$slots:l={},$$scope:_}=e,{isOpen:w=!1}=e,{onClose:p=()=>{}}=e,{title:i=""}=e,{size:n="md"}=e;function u(d){d.target===d.currentTarget&&p()}function m(d){d.key==="Escape"&&w&&p()}return r.$$set=d=>{"isOpen"in d&&t(0,w=d.isOpen),"onClose"in d&&t(1,p=d.onClose),"title"in d&&t(2,i=d.title),"size"in d&&t(4,n=d.size),"$$scope"in d&&t(5,_=d.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&(w?document.addEventListener("keydown",m):document.removeEventListener("keydown",m))},[w,p,i,u,n,_,l]}class gr extends _t{constructor(e){super(),ft(this,e,io,ro,ut,{isOpen:0,onClose:1,title:2,size:4})}}function so(r){let e,t,l,_,w,p,i,n,u,m,d,g,y;return{c(){e=L("div"),t=L("p"),l=Z(r[2]),_=O(),w=L("div"),p=L("button"),i=Z(r[4]),n=O(),u=L("button"),m=Z(r[3]),s(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),s(p,"type","button"),s(p,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(u,"type","button"),s(u,"class",d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),s(w,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(k,v){V(k,e,v),c(e,t),c(t,l),c(e,_),c(e,w),c(w,p),c(p,i),c(w,n),c(w,u),c(u,m),g||(y=[$(p,"click",function(){It(r[6])&&r[6].apply(this,arguments)}),$(u,"click",function(){It(r[5])&&r[5].apply(this,arguments)})],g=!0)},p(k,v){r=k,v&4&&de(l,r[2]),v&16&&de(i,r[4]),v&8&&de(m,r[3]),v&128&&d!==(d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&s(u,"class",d)},d(k){k&&N(e),g=!1,Pe(y)}}}function no(r){let e,t,l;function _(p){r[8](p)}let w={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[so]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new gr({props:w}),lt.push(()=>gt(e,"isOpen",_)),{c(){Ze(e.$$.fragment)},m(p,i){Je(e,p,i),l=!0},p(p,[i]){const n={};i&64&&(n.onClose=p[6]),i&2&&(n.title=p[1]),i&764&&(n.$$scope={dirty:i,ctx:p}),!t&&i&1&&(t=!0,n.isOpen=p[0],pt(()=>t=!1)),e.$set(n)},i(p){l||(Oe(e.$$.fragment,p),l=!0)},o(p){He(e.$$.fragment,p),l=!1},d(p){Xe(e,p)}}}function oo(r,e,t){let{isOpen:l=!1}=e,{title:_=""}=e,{message:w=""}=e,{confirmText:p="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:n=()=>{}}=e,{onCancel:u=()=>{}}=e,{type:m="default"}=e;function d(g){l=g,t(0,l)}return r.$$set=g=>{"isOpen"in g&&t(0,l=g.isOpen),"title"in g&&t(1,_=g.title),"message"in g&&t(2,w=g.message),"confirmText"in g&&t(3,p=g.confirmText),"cancelText"in g&&t(4,i=g.cancelText),"onConfirm"in g&&t(5,n=g.onConfirm),"onCancel"in g&&t(6,u=g.onCancel),"type"in g&&t(7,m=g.type)},[l,_,w,p,i,n,u,m,d]}class lr extends _t{constructor(e){super(),ft(this,e,oo,no,ut,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function $r(r,e,t){const l=r.slice();return l[47]=e[t][0],l[48]=e[t][1],l}function ei(r,e,t){const l=r.slice();return l[51]=e[t],l}function ti(r,e,t){const l=r.slice();return l[47]=e[t][0],l[48]=e[t][1],l}function ri(r,e,t){const l=r.slice();return l[51]=e[t],l}function ii(r){let e,t,l,_,w,p,i,n,u,m;return{c(){e=L("div"),t=L("button"),t.innerHTML='<svg class="w-4 h-4 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> <span>导出(加密)</span>',l=O(),_=L("button"),_.innerHTML='<svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导出(明文)</span>',w=O(),p=L("div"),i=O(),n=L("button"),n.innerHTML='<svg class="w-4 h-4 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>导入连接</span>',s(t,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(_,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(p,"class","border-t border-gray-200 dark:border-gray-700 my-1"),s(n,"class","w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10 py-1 min-w-[140px]")},m(d,g){V(d,e,g),c(e,t),c(e,l),c(e,_),c(e,w),c(e,p),c(e,i),c(e,n),u||(m=[$(t,"click",r[33]),$(_,"click",r[34]),$(n,"click",r[23])],u=!0)},p:Ae,d(d){d&&N(e),u=!1,Pe(m)}}}function lo(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function ao(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function si(r){let e,t=[],l=new Map,_=ze(r[48]);const w=p=>p[51].id;for(let p=0;p<_.length;p+=1){let i=ri(r,_,p),n=w(i);l.set(n,t[p]=oi(n,i))}return{c(){e=L("div");for(let p=0;p<t.length;p+=1)t[p].c();s(e,"class","ml-4")},m(p,i){V(p,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(p,i){i[0]&33562629&&(_=ze(p[48]),t=Lt(t,i,w,1,p,_,l,e,Mt,oi,null,ri))},d(p){p&&N(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ni(r){let e,t=r[51].dbType.toUpperCase()+"",l;return{c(){e=Z("• "),l=Z(t)},m(_,w){V(_,e,w),V(_,l,w)},p(_,w){w[0]&8192&&t!==(t=_[51].dbType.toUpperCase()+"")&&de(l,t)},d(_){_&&(N(e),N(l))}}}function oi(r,e){let t,l,_=hi(e[51].type)+"",w,p,i,n,u=e[51].name+"",m,d,g,y,k,v,o=e[51].username+"",h,a,f=e[51].host+"",b,E,C=e[51].port+"",x,S,M,T,R,P,A,z,q,X,ie,G,D=e[51].type==="database"&&e[51].dbType&&ni(e);function H(){return e[37](e[51])}function F(){return e[38](e[51])}function W(...j){return e[39](e[51],...j)}function J(){return e[40](e[51])}return{key:r,first:null,c(){t=L("div"),l=L("div"),w=O(),p=L("div"),i=L("div"),n=L("span"),m=Z(u),d=O(),g=L("div"),k=O(),v=L("div"),h=Z(o),a=Z("@"),b=Z(f),E=Z(":"),x=Z(C),S=O(),D&&D.c(),M=O(),T=L("div"),R=L("button"),R.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',P=O(),A=L("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',z=O(),q=L("button"),q.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',X=O(),s(l,"class","flex-shrink-0"),s(n,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),s(g,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[51].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),s(i,"class","flex items-center gap-2"),s(v,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),s(p,"class","flex-1 min-w-0"),s(R,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),s(R,"title","连接"),s(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),s(q,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),s(T,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),s(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(j,K){V(j,t,K),c(t,l),l.innerHTML=_,c(t,w),c(t,p),c(p,i),c(i,n),c(n,m),c(i,d),c(i,g),c(p,k),c(p,v),c(v,h),c(v,a),c(v,b),c(v,E),c(v,x),c(v,S),D&&D.m(v,null),c(t,M),c(t,T),c(T,R),c(T,P),c(T,A),c(T,z),c(T,q),c(t,X),ie||(G=[$(R,"click",Zr(H)),$(A,"click",Zr(F)),$(q,"click",W),$(t,"click",J)],ie=!0)},p(j,K){e=j,K[0]&8192&&_!==(_=hi(e[51].type)+"")&&(l.innerHTML=_),K[0]&8192&&u!==(u=e[51].name+"")&&de(m,u),K[0]&8192&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[51].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&s(g,"class",y),K[0]&8192&&o!==(o=e[51].username+"")&&de(h,o),K[0]&8192&&f!==(f=e[51].host+"")&&de(b,f),K[0]&8192&&C!==(C=e[51].port+"")&&de(x,C),e[51].type==="database"&&e[51].dbType?D?D.p(e,K):(D=ni(e),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},d(j){j&&N(t),D&&D.d(),ie=!1,Pe(G)}}}function li(r){let e,t,l,_,w,p,i,n,u=r[47]+"",m,d,g,y,k=r[48].length+"",v,o,h,a=r[5].has(r[47]),f,b,E;function C(R,P){return P[0]&8224&&(l=null),l==null&&(l=!!R[5].has(R[47])),l?ao:lo}let x=C(r,[-1,-1]),S=x(r);function M(){return r[36](r[47])}let T=a&&si(r);return{c(){e=L("div"),t=L("div"),S.c(),_=O(),w=le("svg"),p=le("path"),i=O(),n=L("span"),m=Z(u),d=O(),g=L("span"),y=Z("("),v=Z(k),o=Z(")"),h=O(),T&&T.c(),f=O(),s(p,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(w,"class","w-4 h-4 text-amber-500"),s(w,"fill","currentColor"),s(w,"viewBox","0 0 24 24"),s(n,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(g,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),s(e,"class","mb-1")},m(R,P){V(R,e,P),c(e,t),S.m(t,null),c(t,_),c(t,w),c(w,p),c(t,i),c(t,n),c(n,m),c(t,d),c(t,g),c(g,y),c(g,v),c(g,o),c(e,h),T&&T.m(e,null),c(e,f),b||(E=$(t,"click",M),b=!0)},p(R,P){r=R,x!==(x=C(r,P))&&(S.d(1),S=x(r),S&&(S.c(),S.m(t,_))),P[0]&8192&&u!==(u=r[47]+"")&&de(m,u),P[0]&8192&&k!==(k=r[48].length+"")&&de(v,k),P[0]&8224&&(a=r[5].has(r[47])),a?T?T.p(r,P):(T=si(r),T.c(),T.m(e,f)):T&&(T.d(1),T=null)},d(R){R&&N(e),S.d(),T&&T.d(),b=!1,E()}}}function ai(r,e){let t,l,_,w,p,i=e[51].name+"",n,u,m,d=e[51].username+"",g,y,k=e[51].host+"",v,o,h,a;function f(){return e[44](e[51])}return{key:r,first:null,c(){t=L("label"),l=L("input"),w=O(),p=L("span"),n=Z(i),u=O(),m=L("span"),g=Z(d),y=Z("@"),v=Z(k),o=O(),s(l,"type","checkbox"),l.checked=_=e[12].has(e[51].id),s(l,"class","w-4 h-4 text-purple-600"),s(p,"class","truncate"),s(m,"class","text-xs text-gray-400 dark:text-gray-500 truncate"),s(t,"class","flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300"),this.first=t},m(b,E){V(b,t,E),c(t,l),c(t,w),c(t,p),c(p,n),c(t,u),c(t,m),c(m,g),c(m,y),c(m,v),c(t,o),h||(a=$(l,"change",f),h=!0)},p(b,E){e=b,E[0]&20480&&_!==(_=e[12].has(e[51].id))&&(l.checked=_),E[0]&16384&&i!==(i=e[51].name+"")&&de(n,i),E[0]&16384&&d!==(d=e[51].username+"")&&de(g,d),E[0]&16384&&k!==(k=e[51].host+"")&&de(v,k)},d(b){b&&N(t),h=!1,a()}}}function ci(r){let e,t,l,_,w,p,i=r[47]+"",n,u,m,d,g=r[48].length+"",y,k,v,o,h=[],a=new Map,f,b,E;function C(){return r[43](r[48])}let x=ze(r[48]);const S=M=>M[51].id;for(let M=0;M<x.length;M+=1){let T=ei(r,x,M),R=S(T);a.set(R,h[M]=ai(R,T))}return{c(){e=L("div"),t=L("div"),l=L("input"),w=O(),p=L("span"),n=Z(i),u=O(),m=L("span"),d=Z("("),y=Z(g),k=Z(")"),v=O(),o=L("div");for(let M=0;M<h.length;M+=1)h[M].c();f=O(),s(l,"type","checkbox"),l.checked=_=r[22](r[48]),s(l,"class","w-4 h-4 text-purple-600"),s(p,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(m,"class","text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700/40"),s(o,"class","px-3 py-2 space-y-1"),s(e,"class","rounded-lg border border-gray-200 dark:border-gray-700")},m(M,T){V(M,e,T),c(e,t),c(t,l),c(t,w),c(t,p),c(p,n),c(t,u),c(t,m),c(m,d),c(m,y),c(m,k),c(e,v),c(e,o);for(let R=0;R<h.length;R+=1)h[R]&&h[R].m(o,null);c(e,f),b||(E=$(l,"change",C),b=!0)},p(M,T){r=M,T[0]&16384&&_!==(_=r[22](r[48]))&&(l.checked=_),T[0]&16384&&i!==(i=r[47]+"")&&de(n,i),T[0]&16384&&g!==(g=r[48].length+"")&&de(y,g),T[0]&544768&&(x=ze(r[48]),h=Lt(h,T,S,1,r,x,a,o,Mt,ai,null,ei))},d(M){M&&N(e);for(let T=0;T<h.length;T+=1)h[T].d();b=!1,E()}}}function co(r){let e,t,l,_,w=r[12].size+"",p,i,n=r[4].length+"",u,m,d,g=r[12].size===r[4].length?"取消全选":"全选",y,k,v,o,h,a,f,b,E,C,x,S,M=ze(Object.entries(r[14])),T=[];for(let R=0;R<M.length;R+=1)T[R]=ci($r(r,M,R));return{c(){e=L("div"),t=L("div"),l=L("div"),_=Z("已选 "),p=Z(w),i=Z(" / "),u=Z(n),m=O(),d=L("button"),y=Z(g),k=O(),v=L("div");for(let R=0;R<T.length;R+=1)T[R].c();o=O(),h=L("div"),a=L("button"),a.textContent="取消",f=O(),b=L("button"),E=Z("导出"),s(l,"class","text-xs text-gray-500 dark:text-gray-400"),s(d,"type","button"),s(d,"class","text-xs text-purple-600 dark:text-purple-400 hover:underline"),s(t,"class","flex items-center justify-between"),s(v,"class","max-h-64 overflow-y-auto space-y-2"),s(a,"type","button"),s(a,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(b,"type","button"),b.disabled=C=r[12].size===0,s(b,"class","px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 disabled:cursor-not-allowed"),s(h,"class","flex gap-2 justify-end"),s(e,"class","space-y-4")},m(R,P){V(R,e,P),c(e,t),c(t,l),c(l,_),c(l,p),c(l,i),c(l,u),c(t,m),c(t,d),c(d,y),c(e,k),c(e,v);for(let A=0;A<T.length;A+=1)T[A]&&T[A].m(v,null);c(e,o),c(e,h),c(h,a),c(h,f),c(h,b),c(b,E),x||(S=[$(d,"click",r[21]),$(a,"click",r[18]),$(b,"click",r[17])],x=!0)},p(R,P){if(P[0]&4096&&w!==(w=R[12].size+"")&&de(p,w),P[0]&16&&n!==(n=R[4].length+"")&&de(u,n),P[0]&4112&&g!==(g=R[12].size===R[4].length?"取消全选":"全选")&&de(y,g),P[0]&5787648){M=ze(Object.entries(R[14]));let A;for(A=0;A<M.length;A+=1){const z=$r(R,M,A);T[A]?T[A].p(z,P):(T[A]=ci(z),T[A].c(),T[A].m(v,null))}for(;A<T.length;A+=1)T[A].d(1);T.length=M.length}P[0]&4096&&C!==(C=R[12].size===0)&&(b.disabled=C)},d(R){R&&N(e),Nt(T,R),x=!1,Pe(S)}}}function ho(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X=r[6]&&ii(r),ie=ze(Object.entries(r[13])),G=[];for(let K=0;K<ie.length;K+=1)G[K]=li(ti(r,ie,K));function D(K){r[41](K)}let H={title:"删除连接",message:r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？",type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[26],onCancel:r[27]};r[7]!==void 0&&(H.isOpen=r[7]),E=new lr({props:H}),lt.push(()=>gt(E,"isOpen",D));function F(K){r[42](K)}let W={title:"导入连接",message:"确定要导入连接配置吗？导入后会合并到现有连接中。",type:"warning",confirmText:"导入",cancelText:"取消",onConfirm:r[28],onCancel:r[29]};r[9]!==void 0&&(W.isOpen=r[9]),S=new lr({props:W}),lt.push(()=>gt(S,"isOpen",F));function J(K){r[45](K)}let j={onClose:r[18],title:r[11]?"导出连接（加密）":"导出连接（明文）",size:"md",$$slots:{default:[co]},$$scope:{ctx:r}};return r[10]!==void 0&&(j.isOpen=r[10]),R=new gr({props:j}),lt.push(()=>gt(R,"isOpen",J)),{c(){e=L("div"),t=L("div"),l=L("div"),_=L("h2"),_.textContent="服务器资产",w=O(),p=L("div"),i=L("button"),i.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',n=O(),u=L("div"),m=L("button"),m.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>',d=O(),X&&X.c(),g=O(),y=L("div"),k=le("svg"),v=le("path"),o=O(),h=L("input"),a=O(),f=L("div");for(let K=0;K<G.length;K+=1)G[K].c();b=O(),Ze(E.$$.fragment),x=O(),Ze(S.$$.fragment),T=O(),Ze(R.$$.fragment),s(_,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(i,"title","添加连接"),s(m,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(m,"title","导出/导入"),s(u,"class","relative"),s(p,"class","flex gap-1"),s(l,"class","flex items-center justify-between mb-3"),s(v,"stroke-linecap","round"),s(v,"stroke-linejoin","round"),s(v,"stroke-width","2"),s(v,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(k,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),s(k,"fill","none"),s(k,"stroke","currentColor"),s(k,"viewBox","0 0 24 24"),s(h,"type","text"),s(h,"placeholder","搜索服务器..."),s(h,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(y,"class","relative"),s(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),s(f,"class","flex-1 overflow-y-auto scrollbar-thin"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(K,Q){V(K,e,Q),c(e,t),c(t,l),c(l,_),c(l,w),c(l,p),c(p,i),c(p,n),c(p,u),c(u,m),c(u,d),X&&X.m(u,null),c(t,g),c(t,y),c(y,k),c(k,v),c(y,o),c(y,h),Ce(h,r[3]),c(e,a),c(e,f);for(let I=0;I<G.length;I+=1)G[I]&&G[I].m(f,null);V(K,b,Q),Je(E,K,Q),V(K,x,Q),Je(S,K,Q),V(K,T,Q),Je(R,K,Q),A=!0,z||(q=[$(i,"click",function(){It(r[1])&&r[1].apply(this,arguments)}),$(m,"click",r[32]),$(h,"input",r[35]),$(e,"click",r[15])],z=!0)},p(K,Q){if(r=K,r[6]?X?X.p(r,Q):(X=ii(r),X.c(),X.m(u,null)):X&&(X.d(1),X=null),Q[0]&8&&h.value!==r[3]&&Ce(h,r[3]),Q[0]&50339877){ie=ze(Object.entries(r[13]));let U;for(U=0;U<ie.length;U+=1){const ae=ti(r,ie,U);G[U]?G[U].p(ae,Q):(G[U]=li(ae),G[U].c(),G[U].m(f,null))}for(;U<G.length;U+=1)G[U].d(1);G.length=ie.length}const I={};Q[0]&256&&(I.message=r[8]?`确定要删除连接 "${r[8].name}" 吗？`:"确定要删除该连接吗？"),!C&&Q[0]&128&&(C=!0,I.isOpen=r[7],pt(()=>C=!1)),E.$set(I);const B={};!M&&Q[0]&512&&(M=!0,B.isOpen=r[9],pt(()=>M=!1)),S.$set(B);const te={};Q[0]&2048&&(te.title=r[11]?"导出连接（加密）":"导出连接（明文）"),Q[0]&20496|Q[1]&134217728&&(te.$$scope={dirty:Q,ctx:r}),!P&&Q[0]&1024&&(P=!0,te.isOpen=r[10],pt(()=>P=!1)),R.$set(te)},i(K){A||(Oe(E.$$.fragment,K),Oe(S.$$.fragment,K),Oe(R.$$.fragment,K),A=!0)},o(K){He(E.$$.fragment,K),He(S.$$.fragment,K),He(R.$$.fragment,K),A=!1},d(K){K&&(N(e),N(b),N(x),N(T)),X&&X.d(),Nt(G,K),Xe(E,K),Xe(S,K),Xe(R,K),z=!1,Pe(q)}}}function hi(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function uo(r,e,t){let l,_,w,p;vt(r,Ut,ee=>t(4,w=ee)),vt(r,Kn,ee=>t(14,p=ee));let{onConnect:i}=e,{onAddClick:n}=e,{onDelete:u}=e,{onEdit:m}=e,d="",g=new Set(["生产环境","开发环境"]),y=!1,k=!1,v=null,o=!1,h="",a=!1,f=!0,b=new Set;function E(ee){t(6,y=!1),ee.stopPropagation()}function C(ee,oe){if(oe.stopPropagation(),t(6,y=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}t(11,f=ee),t(12,b=new Set(w.map(ue=>ue.id))),t(10,a=!0)}async function x(){if(!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}const ee=Array.from(b);if(ee.length===0){alert("请至少选择一个连接");return}const{ExportConnectionsByIDs:oe,SaveBinaryFile:ue}=window.wailsBindings;try{if(typeof oe!="function")throw new Error("导出功能不可用，请升级应用");const pe=await oe(ee,f),Be=btoa(unescape(encodeURIComponent(pe)));await ue("ssh-connections.json",Be),t(10,a=!1)}catch(pe){console.error("导出失败:",pe),alert("导出失败: "+pe.message)}}function S(){t(10,a=!1)}function M(ee){const oe=new Set(b);oe.has(ee)?oe.delete(ee):oe.add(ee),t(12,b=oe)}function T(ee){const oe=new Set(b);ee.every(pe=>oe.has(pe.id))?ee.forEach(pe=>oe.delete(pe.id)):ee.forEach(pe=>oe.add(pe.id)),t(12,b=oe)}function R(){if(b.size===w.length){t(12,b=new Set);return}t(12,b=new Set(w.map(ee=>ee.id)))}function P(ee){return ee.length>0&&ee.every(oe=>b.has(oe.id))}async function A(ee){if(ee.stopPropagation(),t(6,y=!1),!window.wailsBindings){alert("Wails 绑定未加载，请确保在 wails dev 模式下运行");return}try{const oe=await window.wailsBindings.SelectImportFile();if(!oe)return;h=oe,t(9,o=!0)}catch(oe){console.error("导入失败:",oe),alert("导入失败: "+oe.message)}}function z(ee){const oe=new Set(g);oe.has(ee)?oe.delete(ee):oe.add(ee),t(5,g=oe)}async function q(ee,oe){if(oe.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Ut.update(ue=>ue.filter(pe=>pe.id!==ee.id));return}t(8,v=ee),t(7,k=!0)}async function X(){if(v)try{await window.wailsBindings.RemoveConnection(v.id),Ut.update(ee=>ee.filter(oe=>oe.id!==v.id))}catch(ee){console.error("Failed to delete asset:",ee),alert("删除连接失败: "+((ee==null?void 0:ee.message)||ee))}finally{t(7,k=!1),t(8,v=null)}}function ie(){t(7,k=!1),t(8,v=null)}async function G(){if(!h){t(9,o=!1);return}try{const ee=await window.wailsBindings.ImportConnectionsFromFile(h);alert(`成功导入 ${ee} 个连接`),window.dispatchEvent(new CustomEvent("assets-changed"))}catch(ee){console.error("导入失败:",ee),alert("导入失败: "+((ee==null?void 0:ee.message)||ee))}finally{t(9,o=!1),h=""}}function D(){t(9,o=!1),h=""}const H=ee=>{ee.stopPropagation(),t(6,y=!y)},F=ee=>C(!0,ee),W=ee=>C(!1,ee);function J(){d=this.value,t(3,d)}const j=ee=>z(ee),K=ee=>i(ee),Q=ee=>m(ee),I=(ee,oe)=>q(ee,oe),B=ee=>i(ee);function te(ee){k=ee,t(7,k)}function U(ee){o=ee,t(9,o)}const ae=ee=>T(ee),ce=ee=>M(ee.id);function he(ee){a=ee,t(10,a)}return r.$$set=ee=>{"onConnect"in ee&&t(0,i=ee.onConnect),"onAddClick"in ee&&t(1,n=ee.onAddClick),"onDelete"in ee&&t(30,u=ee.onDelete),"onEdit"in ee&&t(2,m=ee.onEdit)},r.$$.update=()=>{r.$$.dirty[0]&24&&t(31,l=w.filter(ee=>{const oe=d.toLowerCase();return ee.name.toLowerCase().includes(oe)||ee.host.toLowerCase().includes(oe)||ee.group.toLowerCase().includes(oe)||ee.username.toLowerCase().includes(oe)})),r.$$.dirty[1]&1&&t(13,_=l.reduce((ee,oe)=>(ee[oe.group]||(ee[oe.group]=[]),ee[oe.group].push(oe),ee),{}))},[i,n,m,d,w,g,y,k,v,o,a,f,b,_,p,E,C,x,S,M,T,R,P,A,z,q,X,ie,G,D,u,l,H,F,W,J,j,K,Q,I,B,te,U,ae,ce,he]}class fo extends _t{constructor(e){super(),ft(this,e,uo,ho,ut,{onConnect:0,onAddClick:1,onDelete:30,onEdit:2},null,[-1,-1])}}var an={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(globalThis,()=>(()=>{var t={4567:function(p,i,n){var u=this&&this.__decorate||function(a,f,b,E){var C,x=arguments.length,S=x<3?f:E===null?E=Object.getOwnPropertyDescriptor(f,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,f,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(f,b,S):C(f,b))||S);return x>3&&S&&Object.defineProperty(f,b,S),S},m=this&&this.__param||function(a,f){return function(b,E){f(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const d=n(9042),g=n(9924),y=n(844),k=n(4725),v=n(2585),o=n(3656);let h=i.AccessibilityManager=class extends y.Disposable{constructor(a,f,b,E){super(),this._terminal=a,this._coreBrowserService=b,this._renderService=E,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,o.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let f=0;f<a;f++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(a){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(a)||this._charsToConsume.push(a)}_refreshRows(a,f){this._liveRegionDebouncer.refresh(a,f,this._terminal.rows)}_renderRows(a,f){const b=this._terminal.buffer,E=b.lines.length.toString();for(let C=a;C<=f;C++){const x=b.lines.get(b.ydisp+C),S=[],M=(x==null?void 0:x.translateToString(!0,void 0,void 0,S))||"",T=(b.ydisp+C+1).toString(),R=this._rowElements[C];R&&(M.length===0?(R.innerText=" ",this._rowColumns.set(R,[0,1])):(R.textContent=M,this._rowColumns.set(R,S)),R.setAttribute("aria-posinset",T),R.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,f){const b=a.target,E=this._rowElements[f===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(f===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==E)return;let C,x;if(f===0?(C=b,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(C=this._rowElements.shift(),x=b,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),f===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(f===0?-1:1),this._rowElements[f===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleSelectionChange(){var M;if(this._rowElements.length===0)return;const a=document.getSelection();if(!a)return;if(a.isCollapsed)return void(this._rowContainer.contains(a.anchorNode)&&this._terminal.clearSelection());if(!a.anchorNode||!a.focusNode)return void console.error("anchorNode and/or focusNode are null");let f={node:a.anchorNode,offset:a.anchorOffset},b={node:a.focusNode,offset:a.focusOffset};if((f.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||f.node===b.node&&f.offset>b.offset)&&([f,b]=[b,f]),f.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(f={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(f.node))return;const E=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(E)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:E,offset:((M=E.textContent)==null?void 0:M.length)??0}),!this._rowContainer.contains(b.node))return;const C=({node:T,offset:R})=>{const P=T instanceof Text?T.parentNode:T;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const z=this._rowColumns.get(P);if(!z)return console.warn("columns is null. Race condition?"),null;let q=R<z.length?z[R]:z.slice(-1)[0]+1;return q>=this._terminal.cols&&(++A,q=0),{row:A,column:q}},x=C(f),S=C(b);if(x&&S){if(x.row>S.row||x.row===S.row&&x.column>=S.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(S.row-x.row)*this._terminal.cols-x.column+S.column)}}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=this._coreBrowserService.mainDocument.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=h=u([m(1,v.IInstantiationService),m(2,k.ICoreBrowserService),m(3,k.IRenderService)],h)},3614:(p,i)=>{function n(g){return g.replace(/\r?\n/g,"\r")}function u(g,y){return y?"\x1B[200~"+g+"\x1B[201~":g}function m(g,y,k,v){g=u(g=n(g),k.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(g,!0),y.value=""}function d(g,y,k){const v=k.getBoundingClientRect(),o=g.clientX-v.left-10,h=g.clientY-v.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${o}px`,y.style.top=`${h}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=u,i.copyHandler=function(g,y){g.clipboardData&&g.clipboardData.setData("text/plain",y.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,y,k,v){g.stopPropagation(),g.clipboardData&&m(g.clipboardData.getData("text/plain"),y,k,v)},i.paste=m,i.moveTextAreaUnderMouseCursor=d,i.rightClickHandler=function(g,y,k,v,o){d(g,y,k),o&&v.rightClickSelect(g),y.value=v.selectionText,y.select()}},7239:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=n(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(m,d,g){this._css.set(m,d,g)}getCss(m,d){return this._css.get(m,d)}setColor(m,d,g){this._color.set(m,d,g)}getColor(m,d){return this._color.get(m,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,u,m,d){n.addEventListener(u,m,d);let g=!1;return{dispose:()=>{g||(g=!0,n.removeEventListener(u,m,d))}}}},3551:function(p,i,n){var u=this&&this.__decorate||function(h,a,f,b){var E,C=arguments.length,x=C<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,f):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,a,f,b);else for(var S=h.length-1;S>=0;S--)(E=h[S])&&(x=(C<3?E(x):C>3?E(a,f,x):E(a,f))||x);return C>3&&x&&Object.defineProperty(a,f,x),x},m=this&&this.__param||function(h,a){return function(f,b){a(f,b,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const d=n(3656),g=n(8460),y=n(844),k=n(2585),v=n(4725);let o=i.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(h,a,f,b,E){super(),this._element=h,this._mouseService=a,this._renderService=f,this._bufferService=b,this._linkProviderService=E,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){this._lastMouseEvent=h;const a=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const f=h.composedPath();for(let b=0;b<f.length;b++){const E=f[b];if(E.classList.contains("xterm"))break;if(E.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,a){var b,E;this._activeProviderReplies&&a||((b=this._activeProviderReplies)==null||b.forEach(C=>{C==null||C.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=h.y);let f=!1;for(const[C,x]of this._linkProviderService.linkProviders.entries())a?(E=this._activeProviderReplies)!=null&&E.get(C)&&(f=this._checkLinkProviderResult(C,h,f)):x.provideLinks(h.y,S=>{var T,R;if(this._isMouseOut)return;const M=S==null?void 0:S.map(P=>({link:P}));(T=this._activeProviderReplies)==null||T.set(C,M),f=this._checkLinkProviderResult(C,h,f),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)})}_removeIntersectingLinks(h,a){const f=new Set;for(let b=0;b<a.size;b++){const E=a.get(b);if(E)for(let C=0;C<E.length;C++){const x=E[C],S=x.link.range.start.y<h?0:x.link.range.start.x,M=x.link.range.end.y>h?this._bufferService.cols:x.link.range.end.x;for(let T=S;T<=M;T++){if(f.has(T)){E.splice(C--,1);break}f.add(T)}}}}_checkLinkProviderResult(h,a,f){var C;if(!this._activeProviderReplies)return f;const b=this._activeProviderReplies.get(h);let E=!1;for(let x=0;x<h;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(E=!0);if(!E&&b){const x=b.find(S=>this._linkAtPosition(S.link,a));x&&(f=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!f)for(let x=0;x<this._activeProviderReplies.size;x++){const S=(C=this._activeProviderReplies.get(x))==null?void 0:C.find(M=>this._linkAtPosition(M.link,a));if(S){f=!0,this._handleNewLink(S);break}}return f}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._currentLink)return;const a=this._positionFromMouseEvent(h,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,a){this._currentLink&&this._lastMouseEvent&&(!h||!a||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._lastMouseEvent)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(h.link,a)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>{var f,b;return(b=(f=this._currentLink)==null?void 0:f.state)==null?void 0:b.decorations.pointerCursor},set:f=>{var b;(b=this._currentLink)!=null&&b.state&&this._currentLink.state.decorations.pointerCursor!==f&&(this._currentLink.state.decorations.pointerCursor=f,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",f))}},underline:{get:()=>{var f,b;return(b=(f=this._currentLink)==null?void 0:f.state)==null?void 0:b.decorations.underline},set:f=>{var b,E,C;(b=this._currentLink)!=null&&b.state&&((C=(E=this._currentLink)==null?void 0:E.state)==null?void 0:C.decorations.underline)!==f&&(this._currentLink.state.decorations.underline=f,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,f))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(f=>{if(!this._currentLink)return;const b=f.start===0?0:f.start+1+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.ydisp+1+f.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=E&&(this._clearCurrentLink(b,E),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(h,a,f){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(f,a.text)}_fireUnderlineEvent(h,a){const f=h.range,b=this._bufferService.buffer.ydisp,E=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-b-1,f.end.x,f.end.y-b-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(E)}_linkLeave(h,a,f){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(f,a.text)}_linkAtPosition(h,a){const f=h.range.start.y*this._bufferService.cols+h.range.start.x,b=h.range.end.y*this._bufferService.cols+h.range.end.x,E=a.y*this._bufferService.cols+a.x;return f<=E&&E<=b}_positionFromMouseEvent(h,a,f){const b=f.getCoords(h,a,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,a,f,b,E){return{x1:h,y1:a,x2:f,y2:b,cols:this._bufferService.cols,fg:E}}};i.Linkifier=o=u([m(1,v.IMouseService),m(2,v.IRenderService),m(3,k.IBufferService),m(4,v.ILinkProviderService)],o)},9042:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,i,n){var u=this&&this.__decorate||function(v,o,h,a){var f,b=arguments.length,E=b<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,o,h,a);else for(var C=v.length-1;C>=0;C--)(f=v[C])&&(E=(b<3?f(E):b>3?f(o,h,E):f(o,h))||E);return b>3&&E&&Object.defineProperty(o,h,E),E},m=this&&this.__param||function(v,o){return function(h,a){o(h,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const d=n(511),g=n(2585);let y=i.OscLinkProvider=class{constructor(v,o,h){this._bufferService=v,this._optionsService=o,this._oscLinkService=h}provideLinks(v,o){var M;const h=this._bufferService.buffer.lines.get(v-1);if(!h)return void o(void 0);const a=[],f=this._optionsService.rawOptions.linkHandler,b=new d.CellData,E=h.getTrimmedLength();let C=-1,x=-1,S=!1;for(let T=0;T<E;T++)if(x!==-1||h.hasContent(T)){if(h.loadCell(T,b),b.hasExtendedAttrs()&&b.extended.urlId){if(x===-1){x=T,C=b.extended.urlId;continue}S=b.extended.urlId!==C}else x!==-1&&(S=!0);if(S||x!==-1&&T===E-1){const R=(M=this._oscLinkService.getLinkData(C))==null?void 0:M.uri;if(R){const P={start:{x:x+1,y:v},end:{x:T+(S||T!==E-1?0:1),y:v}};let A=!1;if(!(f!=null&&f.allowNonHttpProtocols))try{const z=new URL(R);["http:","https:"].includes(z.protocol)||(A=!0)}catch{A=!0}A||a.push({text:R,range:P,activate:(z,q)=>f?f.activate(z,q,P):k(0,q),hover:(z,q)=>{var X;return(X=f==null?void 0:f.hover)==null?void 0:X.call(f,z,q,P)},leave:(z,q)=>{var X;return(X=f==null?void 0:f.leave)==null?void 0:X.call(f,z,q,P)}})}S=!1,b.hasExtendedAttrs()&&b.extended.urlId?(x=T,C=b.extended.urlId):(x=-1,C=-1)}}o(a)}};function k(v,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=y=u([m(0,g.IBufferService),m(1,g.IOptionsService),m(2,g.IOscLinkService)],y)},6193:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,u){this._renderCallback=n,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,u,m){this._rowCount=m,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=n(3614),m=n(3656),d=n(3551),g=n(9042),y=n(3730),k=n(1680),v=n(3107),o=n(5744),h=n(2950),a=n(1296),f=n(428),b=n(4269),E=n(5114),C=n(8934),x=n(3230),S=n(9312),M=n(4725),T=n(6731),R=n(8055),P=n(8969),A=n(8460),z=n(844),q=n(6114),X=n(8437),ie=n(2584),G=n(7399),D=n(5941),H=n(9074),F=n(2585),W=n(5435),J=n(4567),j=n(779);class K extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new z.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(H.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(j.LinkProviderService),this._instantiationService.setService(M.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,te)=>this.refresh(B,te))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,z.toDisposable)(()=>{var B,te;this._customKeyEventHandler=void 0,(te=(B=this.element)==null?void 0:B.parentNode)==null||te.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const B of I){let te,U="";switch(B.index){case 256:te="foreground",U="10";break;case 257:te="background",U="11";break;case 258:te="cursor",U="12";break;default:te="ansi",U="4;"+B.index}switch(B.type){case 0:const ae=R.color.toColorRGB(te==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[te]);this.coreService.triggerDataEvent(`${ie.C0.ESC}]${U};${(0,D.toRgbString)(ae)}${ie.C1_ESCAPED.ST}`);break;case 1:if(te==="ansi")this._themeService.modifyColors(ce=>ce.ansi[B.index]=R.channels.toColor(...B.color));else{const ce=te;this._themeService.modifyColors(he=>he[ce]=R.channels.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ie.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)==null?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ie.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(I);if(!B)return;const te=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,ae=B.getWidth(te),ce=this._renderService.dimensions.css.cell.width*ae,he=this.buffer.y*this._renderService.dimensions.css.cell.height,ee=te*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ee+"px",this.textarea.style.top=he+"px",this.textarea.style.width=ce+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,u.copyHandler)(B,this._selectionService)}));const I=B=>(0,u.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,m.addDisposableDomListener)(this.element,"paste",I)),q.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,u.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,u.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,u.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,m.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var te;if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((te=this.element)==null?void 0:te.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const B=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),B.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,m.addDisposableDomListener)(this.screenElement,"mousemove",U=>this.updateCursorStyle(U))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),B.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(E.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(M.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(M.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(B);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,B=this.element;function te(ce){const he=I._mouseService.getMouseReportCoords(ce,I.screenElement);if(!he)return!1;let ee,oe;switch(ce.overrideType||ce.type){case"mousemove":oe=32,ce.buttons===void 0?(ee=3,ce.button!==void 0&&(ee=ce.button<3?ce.button:3)):ee=1&ce.buttons?0:4&ce.buttons?1:2&ce.buttons?2:3;break;case"mouseup":oe=0,ee=ce.button<3?ce.button:3;break;case"mousedown":oe=1,ee=ce.button<3?ce.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler(ce)===!1||I.viewport.getLinesScrolled(ce)===0)return!1;oe=ce.deltaY<0?0:1,ee=4;break;default:return!1}return!(oe===void 0||ee===void 0||ee>4)&&I.coreMouseService.triggerMouseEvent({col:he.col,row:he.row,x:he.x,y:he.y,button:ee,action:oe,ctrl:ce.ctrlKey,alt:ce.altKey,shift:ce.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ae={mouseup:ce=>(te(ce),ce.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(ce)),wheel:ce=>(te(ce),this.cancel(ce,!0)),mousedrag:ce=>{ce.buttons&&te(ce)},mousemove:ce=>{ce.buttons||te(ce)}};this.register(this.coreMouseService.onProtocolChange(ce=>{ce?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ce)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ce?U.mousemove||(B.addEventListener("mousemove",ae.mousemove),U.mousemove=ae.mousemove):(B.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&ce?U.wheel||(B.addEventListener("wheel",ae.wheel,{passive:!1}),U.wheel=ae.wheel):(B.removeEventListener("wheel",U.wheel),U.wheel=null),2&ce?U.mouseup||(U.mouseup=ae.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&ce?U.mousedrag||(U.mousedrag=ae.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(B,"mousedown",ce=>{if(ce.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ce))return te(ce),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(ce)})),this.register((0,m.addDisposableDomListener)(B,"wheel",ce=>{if(!U.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ce)===!1)return!1;if(!this.buffer.hasScrollback){const he=this.viewport.getLinesScrolled(ce);if(he===0)return;const ee=ie.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ce.deltaY<0?"A":"B");let oe="";for(let ue=0;ue<Math.abs(he);ue++)oe+=ee;return this.coreService.triggerDataEvent(oe,!0),this.cancel(ce,!0)}return this.viewport.handleWheel(ce)?this.cancel(ce):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(B,"touchstart",ce=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ce),this.cancel(ce)},{passive:!0})),this.register((0,m.addDisposableDomListener)(B,"touchmove",ce=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ce)?void 0:this.cancel(ce)},{passive:!1}))}refresh(I,B){var te;(te=this._renderService)==null||te.refreshRows(I,B)}updateCursorStyle(I){var B;(B=this._selectionService)!=null&&B.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,B,te=0){var U;te===1?(super.scrollLines(I,B,te),this.refresh(0,this.rows-1)):(U=this.viewport)==null||U.scrollLines(I)}paste(I){(0,u.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const B=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,B,te){this._selectionService.setSelection(I,B,te)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)==null||I.clearSelection()}selectAll(){var I;(I=this._selectionService)==null||I.selectAll()}selectLines(I,B){var te;(te=this._selectionService)==null||te.selectLines(I,B)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const B=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!B&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const te=(0,G.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),te.type===3||te.type===2){const U=this.rows-1;return this.scrollLines(te.type===2?-U:U),this.cancel(I,!0)}return te.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(te.cancel&&this.cancel(I,!0),!te.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(te.key!==ie.C0.ETX&&te.key!==ie.C0.CR||(this.textarea.value=""),this._onKey.fire({key:te.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(te.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,B){const te=I.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||I.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||I.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?te:te&&(!B.keyCode||B.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)B=I.charCode;else if(I.which===null||I.which===void 0)B=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;B=I.which}return!(!B||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const B=I.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(I),!0}return!1}resize(I,B){I!==this.cols||B!==this.rows?super.resize(I,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,B){var te,U;(te=this._charSizeService)==null||te.measure(),(U=this.viewport)==null||U.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(X.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)==null||I.reset(),this.refresh(0,this.rows-1)}}reset(){var B,te;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)==null||B.reset(),this._decorationService.reset(),(te=this.viewport)==null||te.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)==null||I.clearTextureAtlas()}_reportFocus(){var I;(I=this.element)!=null&&I.classList.contains("focus")?this.coreService.triggerDataEvent(ie.C0.ESC+"[I"):this.coreService.triggerDataEvent(ie.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const B=this._renderService.dimensions.css.canvas.width.toFixed(0),te=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ie.C0.ESC}[4;${te};${B}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),ae=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ie.C0.ESC}[6;${ae};${U}t`)}}cancel(I,B){if(this.options.cancelEvents||B)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=K},9924:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,u=1e3){this._renderCallback=n,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,u,m){this._rowCount=m,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=d-this._lastRefreshMs,y=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u)}}},1680:function(p,i,n){var u=this&&this.__decorate||function(h,a,f,b){var E,C=arguments.length,x=C<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,f):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,a,f,b);else for(var S=h.length-1;S>=0;S--)(E=h[S])&&(x=(C<3?E(x):C>3?E(a,f,x):E(a,f))||x);return C>3&&x&&Object.defineProperty(a,f,x),x},m=this&&this.__param||function(h,a){return function(f,b){a(f,b,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const d=n(3656),g=n(4725),y=n(8460),k=n(844),v=n(2585);let o=i.Viewport=class extends k.Disposable{constructor(h,a,f,b,E,C,x,S){super(),this._viewportElement=h,this._scrollArea=a,this._bufferService=f,this._optionsService=b,this._charSizeService=E,this._renderService=C,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(M=>this._renderDimensions=M)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(M=>this._handleThemeChange(M))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,a){const f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&f<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const a=this._getPixelsScrolled(h);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(h,a){var S;let f,b="";const E=[],C=a??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let M=h;M<C;M++){const T=x.get(M);if(!T)continue;const R=(S=x.get(M+1))==null?void 0:S.isWrapped;if(b+=T.translateToString(!R),!R||M===x.length-1){const P=document.createElement("div");P.textContent=b,E.push(P),b.length>0&&(f=P),b=""}}return{bufferElements:E,cursorElement:f}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let a=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(h,a){const f=this._optionsService.rawOptions.fastScrollModifier;return f==="alt"&&a.altKey||f==="ctrl"&&a.ctrlKey||f==="shift"&&a.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const a=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(h,a))}};i.Viewport=o=u([m(2,v.IBufferService),m(3,v.IOptionsService),m(4,g.ICharSizeService),m(5,g.IRenderService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],o)},3107:function(p,i,n){var u=this&&this.__decorate||function(v,o,h,a){var f,b=arguments.length,E=b<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,o,h,a);else for(var C=v.length-1;C>=0;C--)(f=v[C])&&(E=(b<3?f(E):b>3?f(o,h,E):f(o,h))||E);return b>3&&E&&Object.defineProperty(o,h,E),E},m=this&&this.__param||function(v,o){return function(h,a){o(h,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const d=n(4725),g=n(844),y=n(2585);let k=i.BufferDecorationRenderer=class extends g.Disposable{constructor(v,o,h,a,f){super(),this._screenElement=v,this._bufferService=o,this._coreBrowserService=h,this._decorationService=a,this._renderService=f,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var a;const o=this._coreBrowserService.mainDocument.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((a=v==null?void 0:v.options)==null?void 0:a.layer)==="top"),o.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=v.options.x??0;return h&&h>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(v,o),o}_refreshStyle(v){const o=v.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let h=this._decorationElements.get(v);h||(h=this._createElement(v),v.element=h,this._decorationElements.set(v,h),this._container.appendChild(h),v.onDispose(()=>{this._decorationElements.delete(v),h.remove()})),h.style.top=o*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(h)}}_refreshXPosition(v,o=v.element){if(!o)return;const h=v.options.x??0;(v.options.anchor||"left")==="right"?o.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var o;(o=this._decorationElements.get(v))==null||o.remove(),this._decorationElements.delete(v),v.dispose()}};i.BufferDecorationRenderer=k=u([m(1,y.IBufferService),m(2,d.ICoreBrowserService),m(3,y.IDecorationService),m(4,d.IRenderService)],k)},5871:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const u of this._zones)if(u.color===n.options.overviewRulerOptions.color&&u.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,n.marker.line))return;if(this._lineAdjacentToZone(u,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(u,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,u){return u>=n.startBufferLine&&u<=n.endBufferLine}_lineAdjacentToZone(n,u,m){return u>=n.startBufferLine-this._linePadding[m||"full"]&&u<=n.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(n,u){n.startBufferLine=Math.min(n.startBufferLine,u),n.endBufferLine=Math.max(n.endBufferLine,u)}}},5744:function(p,i,n){var u=this&&this.__decorate||function(f,b,E,C){var x,S=arguments.length,M=S<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(f,b,E,C);else for(var T=f.length-1;T>=0;T--)(x=f[T])&&(M=(S<3?x(M):S>3?x(b,E,M):x(b,E))||M);return S>3&&M&&Object.defineProperty(b,E,M),M},m=this&&this.__param||function(f,b){return function(E,C){b(E,C,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const d=n(5871),g=n(4725),y=n(844),k=n(2585),v={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let a=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(f,b,E,C,x,S,M){var R;super(),this._viewportElement=f,this._screenElement=b,this._bufferService=E,this._decorationService=C,this._renderService=x,this._optionsService=S,this._coreBrowserService=M,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const f=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=f,o.center=b,o.right=f,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=o.left,h.right=o.left+o.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const f=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(f,12),6)*this._coreBrowserService.dpr);v.left=b,v.center=b,v.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const f=this._colorZoneStore.zones;for(const b of f)b.position!=="full"&&this._renderColorZone(b);for(const b of f)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(f){this._ctx.fillStyle=f.color,this._ctx.fillRect(h[f.position||"full"],Math.round((this._canvas.height-1)*(f.startBufferLine/this._bufferService.buffers.active.lines.length)-v[f.position||"full"]/2),o[f.position||"full"],Math.round((this._canvas.height-1)*((f.endBufferLine-f.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[f.position||"full"]))}_queueRefresh(f,b){this._shouldUpdateDimensions=f||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=a=u([m(2,k.IBufferService),m(3,k.IDecorationService),m(4,g.IRenderService),m(5,k.IOptionsService),m(6,g.ICoreBrowserService)],a)},2950:function(p,i,n){var u=this&&this.__decorate||function(v,o,h,a){var f,b=arguments.length,E=b<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,o,h,a);else for(var C=v.length-1;C>=0;C--)(f=v[C])&&(E=(b<3?f(E):b>3?f(o,h,E):f(o,h))||E);return b>3&&E&&Object.defineProperty(o,h,E),E},m=this&&this.__param||function(v,o){return function(h,a){o(h,a,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const d=n(4725),g=n(2585),y=n(2584);let k=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,o,h,a,f,b){this._textarea=v,this._compositionView=o,this._bufferService=h,this._optionsService=a,this._coreService=f,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,h=o.replace(v,"");this._dataAlreadySent=h,o.length>v.length?this._coreService.triggerDataEvent(h,!0):o.length<v.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):o.length===v.length&&o!==v&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,f=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=f+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=f+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=k=u([m(2,g.IBufferService),m(3,g.IOptionsService),m(4,g.ICoreService),m(5,d.IRenderService)],k)},9806:(p,i)=>{function n(u,m,d){const g=d.getBoundingClientRect(),y=u.getComputedStyle(d),k=parseInt(y.getPropertyValue("padding-left")),v=parseInt(y.getPropertyValue("padding-top"));return[m.clientX-g.left-k,m.clientY-g.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(u,m,d,g,y,k,v,o,h){if(!k)return;const a=n(u,m,d);return a?(a[0]=Math.ceil((a[0]+(h?v/2:0))/v),a[1]=Math.ceil(a[1]/o),a[0]=Math.min(Math.max(a[0],1),g+(h?1:0)),a[1]=Math.min(Math.max(a[1],1),y),a):void 0}},9504:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=n(2584);function m(o,h,a,f){const b=o-d(o,a),E=h-d(h,a),C=Math.abs(b-E)-function(x,S,M){let T=0;const R=x-d(x,M),P=S-d(S,M);for(let A=0;A<Math.abs(R-P);A++){const z=g(x,S)==="A"?-1:1,q=M.buffer.lines.get(R+z*A);q!=null&&q.isWrapped&&T++}return T}(o,h,a);return v(C,k(g(o,h),f))}function d(o,h){let a=0,f=h.buffer.lines.get(o),b=f==null?void 0:f.isWrapped;for(;b&&o>=0&&o<h.rows;)a++,f=h.buffer.lines.get(--o),b=f==null?void 0:f.isWrapped;return a}function g(o,h){return o>h?"A":"B"}function y(o,h,a,f,b,E){let C=o,x=h,S="";for(;C!==a||x!==f;)C+=b?1:-1,b&&C>E.cols-1?(S+=E.buffer.translateBufferLineToString(x,!1,o,C),C=0,o=0,x++):!b&&C<0&&(S+=E.buffer.translateBufferLineToString(x,!1,0,o+1),C=E.cols-1,o=C,x--);return S+E.buffer.translateBufferLineToString(x,!1,o,C)}function k(o,h){const a=h?"O":"[";return u.C0.ESC+a+o}function v(o,h){o=Math.floor(o);let a="";for(let f=0;f<o;f++)a+=h;return a}i.moveToCellSequence=function(o,h,a,f){const b=a.buffer.x,E=a.buffer.y;if(!a.buffer.hasScrollback)return function(S,M,T,R,P,A){return m(M,R,P,A).length===0?"":v(y(S,M,S,M-d(M,P),!1,P).length,k("D",A))}(b,E,0,h,a,f)+m(E,h,a,f)+function(S,M,T,R,P,A){let z;z=m(M,R,P,A).length>0?R-d(R,P):M;const q=R,X=function(ie,G,D,H,F,W){let J;return J=m(D,H,F,W).length>0?H-d(H,F):G,ie<D&&J<=H||ie>=D&&J<H?"C":"D"}(S,M,T,R,P,A);return v(y(S,z,T,q,X==="C",P).length,k(X,A))}(b,E,o,h,a,f);let C;if(E===h)return C=b>o?"D":"C",v(Math.abs(b-o),k(C,f));C=E>h?"D":"C";const x=Math.abs(E-h);return v(function(S,M){return M.cols-S}(E>h?o:b,a)+(x-1)*a.cols+1+((E>h?b:o)-1),k(C,f))}},1296:function(p,i,n){var u=this&&this.__decorate||function(A,z,q,X){var ie,G=arguments.length,D=G<3?z:X===null?X=Object.getOwnPropertyDescriptor(z,q):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(A,z,q,X);else for(var H=A.length-1;H>=0;H--)(ie=A[H])&&(D=(G<3?ie(D):G>3?ie(z,q,D):ie(z,q))||D);return G>3&&D&&Object.defineProperty(z,q,D),D},m=this&&this.__param||function(A,z){return function(q,X){z(q,X,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const d=n(3787),g=n(2550),y=n(2223),k=n(6171),v=n(6052),o=n(4725),h=n(8055),a=n(8460),f=n(844),b=n(2585),E="xterm-dom-renderer-owner-",C="xterm-rows",x="xterm-fg-",S="xterm-bg-",M="xterm-focus",T="xterm-selection";let R=1,P=i.DomRenderer=class extends f.Disposable{constructor(A,z,q,X,ie,G,D,H,F,W,J,j,K){super(),this._terminal=A,this._document=z,this._element=q,this._screenElement=X,this._viewportElement=ie,this._helperContainer=G,this._linkifier2=D,this._charSizeService=F,this._optionsService=W,this._bufferService=J,this._coreBrowserService=j,this._themeService=K,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Q=>this._injectCss(Q))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(E+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Q=>this._handleLinkHover(Q))),this.register(this._linkifier2.onHideLinkUnderline(Q=>this._handleLinkLeave(Q))),this.register((0,f.toDisposable)(()=>{this._element.classList.remove(E+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const q of this._rowElements)q.style.width=`${this.dimensions.css.canvas.width}px`,q.style.height=`${this.dimensions.css.cell.height}px`,q.style.lineHeight=`${this.dimensions.css.cell.height}px`,q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const z=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=z,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let z=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;z+=`${this._terminalSelector} .${C} .xterm-dim { color: ${h.color.multiplyOpacity(A.foreground,.5).css};}`,z+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const q=`blink_underline_${this._terminalClass}`,X=`blink_bar_${this._terminalClass}`,ie=`blink_block_${this._terminalClass}`;z+=`@keyframes ${q} { 50% {  border-bottom-style: hidden; }}`,z+=`@keyframes ${X} { 50% {  box-shadow: none; }}`,z+=`@keyframes ${ie} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,z+=`${this._terminalSelector} .${C}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${C}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${C}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${ie} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,z+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[G,D]of A.ansi.entries())z+=`${this._terminalSelector} .${x}${G} { color: ${D.css}; }${this._terminalSelector} .${x}${G}.xterm-dim { color: ${h.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${S}${G} { background-color: ${D.css}; }`;z+=`${this._terminalSelector} .${x}${y.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(A.background).css}; }${this._terminalSelector} .${x}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${S}${y.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=z}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,z){for(let q=this._rowElements.length;q<=z;q++){const X=this._document.createElement("div");this._rowContainer.appendChild(X),this._rowElements.push(X)}for(;this._rowElements.length>z;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,z){this._refreshRowElements(A,z),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(M),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(M),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,z,q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,z,q),this.renderRows(0,this._bufferService.rows-1),!A||!z)return;this._selectionRenderModel.update(this._terminal,A,z,q);const X=this._selectionRenderModel.viewportStartRow,ie=this._selectionRenderModel.viewportEndRow,G=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(G>=this._bufferService.rows||D<0)return;const H=this._document.createDocumentFragment();if(q){const F=A[0]>z[0];H.appendChild(this._createSelectionElement(G,F?z[0]:A[0],F?A[0]:z[0],D-G+1))}else{const F=X===G?A[0]:0,W=G===ie?z[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(G,F,W));const J=D-G-1;if(H.appendChild(this._createSelectionElement(G+1,0,this._bufferService.cols,J)),G!==D){const j=ie===D?z[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(D,0,j))}}this._selectionContainer.appendChild(H)}_createSelectionElement(A,z,q,X=1){const ie=this._document.createElement("div"),G=z*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(q-z);return G+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-G),ie.style.height=X*this.dimensions.css.cell.height+"px",ie.style.top=A*this.dimensions.css.cell.height+"px",ie.style.left=`${G}px`,ie.style.width=`${D}px`,ie}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,z){const q=this._bufferService.buffer,X=q.ybase+q.y,ie=Math.min(q.x,this._bufferService.cols-1),G=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,H=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=A;F<=z;F++){const W=F+q.ydisp,J=this._rowElements[F],j=q.lines.get(W);if(!J||!j)break;J.replaceChildren(...this._rowFactory.createRow(j,W,W===X,D,H,ie,G,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${E}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,z,q,X,ie,G){q<0&&(A=0),X<0&&(z=0);const D=this._bufferService.rows-1;q=Math.max(Math.min(q,D),0),X=Math.max(Math.min(X,D),0),ie=Math.min(ie,this._bufferService.cols);const H=this._bufferService.buffer,F=H.ybase+H.y,W=Math.min(H.x,ie-1),J=this._optionsService.rawOptions.cursorBlink,j=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let Q=q;Q<=X;++Q){const I=Q+H.ydisp,B=this._rowElements[Q],te=H.lines.get(I);if(!B||!te)break;B.replaceChildren(...this._rowFactory.createRow(te,I,I===F,j,K,W,J,this.dimensions.css.cell.width,this._widthCache,G?Q===q?A:0:-1,G?(Q===X?z:ie)-1:-1))}}};i.DomRenderer=P=u([m(7,b.IInstantiationService),m(8,o.ICharSizeService),m(9,b.IOptionsService),m(10,b.IBufferService),m(11,o.ICoreBrowserService),m(12,o.IThemeService)],P)},3787:function(p,i,n){var u=this&&this.__decorate||function(C,x,S,M){var T,R=arguments.length,P=R<3?x:M===null?M=Object.getOwnPropertyDescriptor(x,S):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(C,x,S,M);else for(var A=C.length-1;A>=0;A--)(T=C[A])&&(P=(R<3?T(P):R>3?T(x,S,P):T(x,S))||P);return R>3&&P&&Object.defineProperty(x,S,P),P},m=this&&this.__param||function(C,x){return function(S,M){x(S,M,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const d=n(2223),g=n(643),y=n(511),k=n(2585),v=n(8055),o=n(4725),h=n(4269),a=n(6171),f=n(3734);let b=i.DomRendererRowFactory=class{constructor(C,x,S,M,T,R,P){this._document=C,this._characterJoinerService=x,this._optionsService=S,this._coreBrowserService=M,this._coreService=T,this._decorationService=R,this._themeService=P,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,x,S){this._selectionStart=C,this._selectionEnd=x,this._columnSelectMode=S}createRow(C,x,S,M,T,R,P,A,z,q,X){const ie=[],G=this._characterJoinerService.getJoinedCharacters(x),D=this._themeService.colors;let H,F=C.getNoBgTrimmedLength();S&&F<R+1&&(F=R+1);let W=0,J="",j=0,K=0,Q=0,I=!1,B=0,te=!1,U=0;const ae=[],ce=q!==-1&&X!==-1;for(let he=0;he<F;he++){C.loadCell(he,this._workCell);let ee=this._workCell.getWidth();if(ee===0)continue;let oe=!1,ue=he,pe=this._workCell;if(G.length>0&&he===G[0][0]){oe=!0;const Te=G.shift();pe=new h.JoinedCellData(this._workCell,C.translateToString(!0,Te[0],Te[1]),Te[1]-Te[0]),ue=Te[1]-1,ee=pe.getWidth()}const Be=this._isCellInSelection(he,x),Le=S&&he===R,Se=ce&&he>=q&&he<=X;let ve=!1;this._decorationService.forEachDecorationAtCell(he,x,void 0,Te=>{ve=!0});let re=pe.getChars()||g.WHITESPACE_CELL_CHAR;if(re===" "&&(pe.isUnderline()||pe.isOverline())&&(re=" "),U=ee*A-z.get(re,pe.isBold(),pe.isItalic()),H){if(W&&(Be&&te||!Be&&!te&&pe.bg===j)&&(Be&&te&&D.selectionForeground||pe.fg===K)&&pe.extended.ext===Q&&Se===I&&U===B&&!Le&&!oe&&!ve){pe.isInvisible()?J+=g.WHITESPACE_CELL_CHAR:J+=re,W++;continue}W&&(H.textContent=J),H=this._document.createElement("span"),W=0,J=""}else H=this._document.createElement("span");if(j=pe.bg,K=pe.fg,Q=pe.extended.ext,I=Se,B=U,te=Be,oe&&R>=he&&R<=ue&&(R=he),!this._coreService.isCursorHidden&&Le&&this._coreService.isCursorInitialized){if(ae.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&ae.push("xterm-cursor-blink"),ae.push(M==="bar"?"xterm-cursor-bar":M==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":ae.push("xterm-cursor-outline");break;case"block":ae.push("xterm-cursor-block");break;case"bar":ae.push("xterm-cursor-bar");break;case"underline":ae.push("xterm-cursor-underline")}}if(pe.isBold()&&ae.push("xterm-bold"),pe.isItalic()&&ae.push("xterm-italic"),pe.isDim()&&ae.push("xterm-dim"),J=pe.isInvisible()?g.WHITESPACE_CELL_CHAR:pe.getChars()||g.WHITESPACE_CELL_CHAR,pe.isUnderline()&&(ae.push(`xterm-underline-${pe.extended.underlineStyle}`),J===" "&&(J=" "),!pe.isUnderlineColorDefault()))if(pe.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(pe.getUnderlineColor()).join(",")})`;else{let Te=pe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&pe.isBold()&&Te<8&&(Te+=8),H.style.textDecorationColor=D.ansi[Te].css}pe.isOverline()&&(ae.push("xterm-overline"),J===" "&&(J=" ")),pe.isStrikethrough()&&ae.push("xterm-strikethrough"),Se&&(H.style.textDecoration="underline");let ge=pe.getFgColor(),ne=pe.getFgColorMode(),be=pe.getBgColor(),We=pe.getBgColorMode();const Fe=!!pe.isInverse();if(Fe){const Te=ge;ge=be,be=Te;const Y=ne;ne=We,We=Y}let Qe,qe,Ke,et=!1;switch(this._decorationService.forEachDecorationAtCell(he,x,void 0,Te=>{Te.options.layer!=="top"&&et||(Te.backgroundColorRGB&&(We=50331648,be=Te.backgroundColorRGB.rgba>>8&16777215,Qe=Te.backgroundColorRGB),Te.foregroundColorRGB&&(ne=50331648,ge=Te.foregroundColorRGB.rgba>>8&16777215,qe=Te.foregroundColorRGB),et=Te.options.layer==="top")}),!et&&Be&&(Qe=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,be=Qe.rgba>>8&16777215,We=50331648,et=!0,D.selectionForeground&&(ne=50331648,ge=D.selectionForeground.rgba>>8&16777215,qe=D.selectionForeground)),et&&ae.push("xterm-decoration-top"),We){case 16777216:case 33554432:Ke=D.ansi[be],ae.push(`xterm-bg-${be}`);break;case 50331648:Ke=v.channels.toColor(be>>16,be>>8&255,255&be),this._addStyle(H,`background-color:#${E((be>>>0).toString(16),"0",6)}`);break;default:Fe?(Ke=D.foreground,ae.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):Ke=D.background}switch(Qe||pe.isDim()&&(Qe=v.color.multiplyOpacity(Ke,.5)),ne){case 16777216:case 33554432:pe.isBold()&&ge<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ge+=8),this._applyMinimumContrast(H,Ke,D.ansi[ge],pe,Qe,void 0)||ae.push(`xterm-fg-${ge}`);break;case 50331648:const Te=v.channels.toColor(ge>>16&255,ge>>8&255,255&ge);this._applyMinimumContrast(H,Ke,Te,pe,Qe,qe)||this._addStyle(H,`color:#${E(ge.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,Ke,D.foreground,pe,Qe,qe)||Fe&&ae.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}ae.length&&(H.className=ae.join(" "),ae.length=0),Le||oe||ve?H.textContent=J:W++,U!==this.defaultSpacing&&(H.style.letterSpacing=`${U}px`),ie.push(H),he=ue}return H&&W&&(H.textContent=J),ie}_applyMinimumContrast(C,x,S,M,T,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.treatGlyphAsBackgroundColor)(M.getCode()))return!1;const P=this._getContrastCache(M);let A;if(T||R||(A=P.getColor(x.rgba,S.rgba)),A===void 0){const z=this._optionsService.rawOptions.minimumContrastRatio/(M.isDim()?2:1);A=v.color.ensureContrastRatio(T||x,R||S,z),P.setColor((T||x).rgba,(R||S).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,x){C.setAttribute("style",`${C.getAttribute("style")||""}${x};`)}_isCellInSelection(C,x){const S=this._selectionStart,M=this._selectionEnd;return!(!S||!M)&&(this._columnSelectMode?S[0]<=M[0]?C>=S[0]&&x>=S[1]&&C<M[0]&&x<=M[1]:C<S[0]&&x>=S[1]&&C>=M[0]&&x<=M[1]:x>S[1]&&x<M[1]||S[1]===M[1]&&x===S[1]&&C>=S[0]&&C<M[0]||S[1]<M[1]&&x===M[1]&&C<M[0]||S[1]<M[1]&&x===S[1]&&C>=S[0])}};function E(C,x,S){for(;C.length<S;)C=x+C;return C}i.DomRendererRowFactory=b=u([m(1,o.ICharacterJoinerService),m(2,k.IOptionsService),m(3,o.ICoreBrowserService),m(4,k.ICoreService),m(5,k.IDecorationService),m(6,o.IThemeService)],b)},2550:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=n.createElement("span");m.classList.add("xterm-char-measure-element");const d=n.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const g=n.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const y=n.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[m,d,g,y],this._container.appendChild(m),this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(y),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,u,m,d){n===this._font&&u===this._fontSize&&m===this._weight&&d===this._weightBold||(this._font=n,this._fontSize=u,this._weight=m,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(n,u,m){let d=0;if(!u&&!m&&n.length===1&&(d=n.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const k=this._measure(n,0);return k>0&&(this._flat[d]=k),k}let g=n;u&&(g+="B"),m&&(g+="I");let y=this._holey.get(g);if(y===void 0){let k=0;u&&(k|=1),m&&(k|=2),y=this._measure(n,k),y>0&&this._holey.set(g,y)}return y}_measure(n,u){const m=this._measureElements[u];return m.textContent=n.repeat(32),m.offsetWidth/32}}},2223:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(p,i)=>{function n(m){return 57508<=m&&m<=57558}function u(m){return m>=128512&&m<=128591||m>=127744&&m<=128511||m>=128640&&m<=128767||m>=9728&&m<=9983||m>=9984&&m<=10175||m>=65024&&m<=65039||m>=129280&&m<=129535||m>=127462&&m<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},i.isEmoji=u,i.allowRescaling=function(m,d,g,y){return d===1&&g>Math.ceil(1.5*y)&&m!==void 0&&m>255&&!u(m)&&!n(m)&&!function(k){return 57344<=k&&k<=63743}(m)},i.treatGlyphAsBackgroundColor=function(m){return n(m)||function(d){return 9472<=d&&d<=9631}(m)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(m,d,g=0){return(m-(2*Math.round(d)-g))%(2*Math.round(d))}},6052:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(m,d,g,y=!1){if(this.selectionStart=d,this.selectionEnd=g,!d||!g||d[0]===g[0]&&d[1]===g[1])return void this.clear();const k=m.buffers.active.ydisp,v=d[1]-k,o=g[1]-k,h=Math.max(v,0),a=Math.min(o,m.rows-1);h>=m.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=v,this.viewportEndRow=o,this.viewportCappedStartRow=h,this.viewportCappedEndRow=a,this.startCol=d[0],this.endCol=g[0])}isCellSelected(m,d,g){return!!this.hasSelection&&(g-=m.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&g>=this.viewportCappedStartRow&&d<this.endCol&&g<=this.viewportCappedEndRow:d<this.startCol&&g>=this.viewportCappedStartRow&&d>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol)}}i.createSelectionRenderModel=function(){return new n}},456:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,u=this.selectionEnd;return!(!n||!u)&&(n[1]>u[1]||n[1]===u[1]&&n[0]>u[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,i,n){var u=this&&this.__decorate||function(a,f,b,E){var C,x=arguments.length,S=x<3?f:E===null?E=Object.getOwnPropertyDescriptor(f,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,f,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(f,b,S):C(f,b))||S);return x>3&&S&&Object.defineProperty(f,b,S),S},m=this&&this.__param||function(a,f){return function(b,E){f(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const d=n(2585),g=n(8460),y=n(844);let k=i.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,f,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch{this._measureStrategy=this.register(new o(a,f,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};i.CharSizeService=k=u([m(2,d.IOptionsService)],k);class v extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(f,b){f!==void 0&&f>0&&b!==void 0&&b>0&&(this._result.width=f,this._result.height=b)}}class o extends v{constructor(f,b,E){super(),this._document=f,this._parentElement=b,this._optionsService=E,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends v{constructor(f){super(),this._optionsService=f,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const f=this._ctx.measureText("W");return this._validateAndSet(f.width,f.fontBoundingBoxAscent+f.fontBoundingBoxDescent),this._result}}},4269:function(p,i,n){var u=this&&this.__decorate||function(h,a,f,b){var E,C=arguments.length,x=C<3?a:b===null?b=Object.getOwnPropertyDescriptor(a,f):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,a,f,b);else for(var S=h.length-1;S>=0;S--)(E=h[S])&&(x=(C<3?E(x):C>3?E(a,f,x):E(a,f))||x);return C>3&&x&&Object.defineProperty(a,f,x),x},m=this&&this.__param||function(h,a){return function(f,b){a(f,b,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const d=n(3734),g=n(643),y=n(511),k=n(2585);class v extends d.AttributeData{constructor(a,f,b){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=f,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let o=i.CharacterJoinerService=class cn{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(a){const f={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(f),f.id}deregister(a){for(let f=0;f<this._characterJoiners.length;f++)if(this._characterJoiners[f].id===a)return this._characterJoiners.splice(f,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const f=this._bufferService.buffer.lines.get(a);if(!f||f.length===0)return[];const b=[],E=f.translateToString(!0);let C=0,x=0,S=0,M=f.getFg(0),T=f.getBg(0);for(let R=0;R<f.getTrimmedLength();R++)if(f.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==M||this._workCell.bg!==T){if(R-C>1){const P=this._getJoinedRanges(E,S,x,f,C);for(let A=0;A<P.length;A++)b.push(P[A])}C=R,S=x,M=this._workCell.fg,T=this._workCell.bg}x+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const R=this._getJoinedRanges(E,S,x,f,C);for(let P=0;P<R.length;P++)b.push(R[P])}return b}_getJoinedRanges(a,f,b,E,C){const x=a.substring(f,b);let S=[];try{S=this._characterJoiners[0].handler(x)}catch(M){console.error(M)}for(let M=1;M<this._characterJoiners.length;M++)try{const T=this._characterJoiners[M].handler(x);for(let R=0;R<T.length;R++)cn._mergeRanges(S,T[R])}catch(T){console.error(T)}return this._stringRangesToCellRanges(S,E,C),S}_stringRangesToCellRanges(a,f,b){let E=0,C=!1,x=0,S=a[E];if(S){for(let M=b;M<this._bufferService.cols;M++){const T=f.getWidth(M),R=f.getString(M).length||g.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!C&&S[0]<=x&&(S[0]=M,C=!0),S[1]<=x){if(S[1]=M,S=a[++E],!S)break;S[0]<=x?(S[0]=M,C=!0):C=!1}x+=R}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(a,f){let b=!1;for(let E=0;E<a.length;E++){const C=a[E];if(b){if(f[1]<=C[0])return a[E-1][1]=f[1],a;if(f[1]<=C[1])return a[E-1][1]=Math.max(f[1],C[1]),a.splice(E,1),a;a.splice(E,1),E--}else{if(f[1]<=C[0])return a.splice(E,0,f),a;if(f[1]<=C[1])return C[0]=Math.min(f[0],C[0]),a;f[0]<C[1]&&(C[0]=Math.min(f[0],C[0]),b=!0)}}return b?a[a.length-1][1]=f[1]:a.push(f),a}};i.CharacterJoinerService=o=u([m(0,k.IBufferService)],o)},5114:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const u=n(844),m=n(8460),d=n(3656);class g extends u.Disposable{constructor(v,o,h){super(),this._textarea=v,this._window=o,this.mainDocument=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new m.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(a=>this._screenDprMonitor.setWindow(a))),this.register((0,m.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=g;class y extends u.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const u=n(844);class m extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const y=this.linkProviders.indexOf(g);y!==-1&&this.linkProviders.splice(y,1)}}}}i.LinkProviderService=m},8934:function(p,i,n){var u=this&&this.__decorate||function(k,v,o,h){var a,f=arguments.length,b=f<3?v:h===null?h=Object.getOwnPropertyDescriptor(v,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(k,v,o,h);else for(var E=k.length-1;E>=0;E--)(a=k[E])&&(b=(f<3?a(b):f>3?a(v,o,b):a(v,o))||b);return f>3&&b&&Object.defineProperty(v,o,b),b},m=this&&this.__param||function(k,v){return function(o,h){v(o,h,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const d=n(4725),g=n(9806);let y=i.MouseService=class{constructor(k,v){this._renderService=k,this._charSizeService=v}getCoords(k,v,o,h,a){return(0,g.getCoords)(window,k,v,o,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(k,v){const o=(0,g.getCoordsRelativeToElement)(window,k,v);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};i.MouseService=y=u([m(0,d.IRenderService),m(1,d.ICharSizeService)],y)},3230:function(p,i,n){var u=this&&this.__decorate||function(a,f,b,E){var C,x=arguments.length,S=x<3?f:E===null?E=Object.getOwnPropertyDescriptor(f,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,f,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(f,b,S):C(f,b))||S);return x>3&&S&&Object.defineProperty(f,b,S),S},m=this&&this.__param||function(a,f){return function(b,E){f(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const d=n(6193),g=n(4725),y=n(8460),k=n(844),v=n(7226),o=n(2585);let h=i.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(a,f,b,E,C,x,S,M){super(),this._rowCount=a,this._charSizeService=E,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((T,R)=>this._renderRows(T,R),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(M.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,f),this.register(S.onWindowChange(T=>this._registerIntersectionObserver(T,f)))}_registerIntersectionObserver(a,f){if("IntersectionObserver"in a){const b=new a.IntersectionObserver(E=>this._handleIntersectionChange(E[E.length-1]),{threshold:0});b.observe(f),this._observerDisposable.value=(0,k.toDisposable)(()=>b.disconnect())}}_handleIntersectionChange(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(a,f,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,f,this._rowCount))}_renderRows(a,f){this._renderer.value&&(a=Math.min(a,this._rowCount-1),f=Math.min(f,this._rowCount-1),this._renderer.value.renderRows(a,f),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:a,end:f}),this._onRender.fire({start:a,end:f}),this._isNextRenderRedrawOnly=!0)}resize(a,f){this._rowCount=f,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(a){this._renderer.value=a,this._renderer.value&&(this._renderer.value.onRequestRedraw(f=>this.refreshRows(f.start,f.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(a){return this._renderDebouncer.addRefreshCallback(a)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var a,f;this._renderer.value&&((f=(a=this._renderer.value).clearTextureAtlas)==null||f.call(a),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(a,f){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var b;return(b=this._renderer.value)==null?void 0:b.handleResize(a,f)}):this._renderer.value.handleResize(a,f),this._fullRefresh())}handleCharSizeChanged(){var a;(a=this._renderer.value)==null||a.handleCharSizeChanged()}handleBlur(){var a;(a=this._renderer.value)==null||a.handleBlur()}handleFocus(){var a;(a=this._renderer.value)==null||a.handleFocus()}handleSelectionChanged(a,f,b){var E;this._selectionState.start=a,this._selectionState.end=f,this._selectionState.columnSelectMode=b,(E=this._renderer.value)==null||E.handleSelectionChanged(a,f,b)}handleCursorMove(){var a;(a=this._renderer.value)==null||a.handleCursorMove()}clear(){var a;(a=this._renderer.value)==null||a.clear()}};i.RenderService=h=u([m(2,o.IOptionsService),m(3,g.ICharSizeService),m(4,o.IDecorationService),m(5,o.IBufferService),m(6,g.ICoreBrowserService),m(7,g.IThemeService)],h)},9312:function(p,i,n){var u=this&&this.__decorate||function(S,M,T,R){var P,A=arguments.length,z=A<3?M:R===null?R=Object.getOwnPropertyDescriptor(M,T):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(S,M,T,R);else for(var q=S.length-1;q>=0;q--)(P=S[q])&&(z=(A<3?P(z):A>3?P(M,T,z):P(M,T))||z);return A>3&&z&&Object.defineProperty(M,T,z),z},m=this&&this.__param||function(S,M){return function(T,R){M(T,R,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const d=n(9806),g=n(9504),y=n(456),k=n(4725),v=n(8460),o=n(844),h=n(6114),a=n(4841),f=n(511),b=n(2585),E=" ",C=new RegExp(E,"g");let x=i.SelectionService=class extends o.Disposable{constructor(S,M,T,R,P,A,z,q,X){super(),this._element=S,this._screenElement=M,this._linkifier=T,this._bufferService=R,this._coreService=P,this._mouseService=A,this._optionsService=z,this._renderService=q,this._coreBrowserService=X,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ie=>this._handleMouseMove(ie),this._mouseUpListener=ie=>this._handleMouseUp(ie),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(ie=>this._handleTrim(ie)),this.register(this._bufferService.buffers.onBufferActivate(ie=>this._handleBufferActivate(ie))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!S||!M||S[0]===M[0]&&S[1]===M[1])}get selectionText(){const S=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;if(!S||!M)return"";const T=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(S[0]===M[0])return"";const P=S[0]<M[0]?S[0]:M[0],A=S[0]<M[0]?M[0]:S[0];for(let z=S[1];z<=M[1];z++){const q=T.translateBufferLineToString(z,!0,P,A);R.push(q)}}else{const P=S[1]===M[1]?M[0]:void 0;R.push(T.translateBufferLineToString(S[1],!0,S[0],P));for(let A=S[1]+1;A<=M[1]-1;A++){const z=T.lines.get(A),q=T.translateBufferLineToString(A,!0);z!=null&&z.isWrapped?R[R.length-1]+=q:R.push(q)}if(S[1]!==M[1]){const A=T.lines.get(M[1]),z=T.translateBufferLineToString(M[1],!0,0,M[0]);A&&A.isWrapped?R[R.length-1]+=z:R.push(z)}}return R.map(P=>P.replace(C," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const M=this._getMouseBufferCoords(S),T=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(T&&R&&M)&&this._areCoordsInSelection(M,T,R)}isCellInSelection(S,M){const T=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!T||!R)&&this._areCoordsInSelection([S,M],T,R)}_areCoordsInSelection(S,M,T){return S[1]>M[1]&&S[1]<T[1]||M[1]===T[1]&&S[1]===M[1]&&S[0]>=M[0]&&S[0]<T[0]||M[1]<T[1]&&S[1]===T[1]&&S[0]<T[0]||M[1]<T[1]&&S[1]===M[1]&&S[0]>=M[0]}_selectWordAtCursor(S,M){var P,A;const T=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(S);return!!R&&(this._selectWordAt(R,M),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,M){this._model.clearSelection(),S=Math.max(S,0),M=Math.min(M,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,M],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const M=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(M)return M[0]--,M[1]--,M[1]+=this._bufferService.buffer.ydisp,M}_getMouseEventScrollAmount(S){let M=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return M>=0&&M<=T?0:(M>T&&(M-=T),M=Math.min(Math.max(M,-50),50),M/=50,M/Math.abs(M)+Math.round(14*M))}shouldForceSelection(S){return h.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const M=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);M&&M.length!==this._model.selectionStart[0]&&M.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const M=this._getMouseBufferCoords(S);M&&(this._activeSelectionMode=2,this._selectLineAt(M[1]))}shouldColumnSelect(S){return S.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const M=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const R=T.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}M&&M[0]===this._model.selectionEnd[0]&&M[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const M=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&M<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const R=(0,g.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,M=this._model.finalSelectionEnd,T=!(!S||!M||S[0]===M[0]&&S[1]===M[1]);T?S&&M&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&M[0]===this._oldSelectionEnd[0]&&M[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,M,T)):this._oldHasSelection&&this._fireOnSelectionChange(S,M,T)}_fireOnSelectionChange(S,M,T){this._oldSelectionStart=S,this._oldSelectionEnd=M,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(M=>this._handleTrim(M))}_convertViewportColToCharacterIndex(S,M){let T=M;for(let R=0;M>=R;R++){const P=S.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:P>1&&M!==R&&(T+=P-1)}return T}setSelection(S,M,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,M],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,M,T=!0,R=!0){if(S[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(S[1]);if(!A)return;const z=P.translateBufferLineToString(S[1],!1);let q=this._convertViewportColToCharacterIndex(A,S[0]),X=q;const ie=S[0]-q;let G=0,D=0,H=0,F=0;if(z.charAt(q)===" "){for(;q>0&&z.charAt(q-1)===" ";)q--;for(;X<z.length&&z.charAt(X+1)===" ";)X++}else{let j=S[0],K=S[0];A.getWidth(j)===0&&(G++,j--),A.getWidth(K)===2&&(D++,K++);const Q=A.getString(K).length;for(Q>1&&(F+=Q-1,X+=Q-1);j>0&&q>0&&!this._isCharWordSeparator(A.loadCell(j-1,this._workCell));){A.loadCell(j-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(G++,j--):I>1&&(H+=I-1,q-=I-1),q--,j--}for(;K<A.length&&X+1<z.length&&!this._isCharWordSeparator(A.loadCell(K+1,this._workCell));){A.loadCell(K+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,K++):I>1&&(F+=I-1,X+=I-1),X++,K++}}X++;let W=q+ie-G+H,J=Math.min(this._bufferService.cols,X-q+G+D-H-F);if(M||z.slice(q,X).trim()!==""){if(T&&W===0&&A.getCodePoint(0)!==32){const j=P.lines.get(S[1]-1);if(j&&A.isWrapped&&j.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(K){const Q=this._bufferService.cols-K.start;W-=Q,J+=Q}}}if(R&&W+J===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const j=P.lines.get(S[1]+1);if(j!=null&&j.isWrapped&&j.getCodePoint(0)!==32){const K=this._getWordAt([0,S[1]+1],!1,!1,!0);K&&(J+=K.length)}}return{start:W,length:J}}}_selectWordAt(S,M){const T=this._getWordAt(S,M);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[T.start,S[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(S){const M=this._getWordAt(S,!0);if(M){let T=S[1];for(;M.start<0;)M.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;M.start+M.length>this._bufferService.cols;)M.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?M.start:M.start+M.length,T]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const M=this._bufferService.buffer.getWrappedRangeForLine(S),T={start:{x:0,y:M.first},end:{x:this._bufferService.cols-1,y:M.last}};this._model.selectionStart=[0,M.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(T,this._bufferService.cols)}};i.SelectionService=x=u([m(3,b.IBufferService),m(4,b.ICoreService),m(5,k.IMouseService),m(6,b.IOptionsService),m(7,k.IRenderService),m(8,k.ICoreBrowserService)],x)},4725:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=n(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService"),i.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(p,i,n){var u=this&&this.__decorate||function(x,S,M,T){var R,P=arguments.length,A=P<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,M):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(x,S,M,T);else for(var z=x.length-1;z>=0;z--)(R=x[z])&&(A=(P<3?R(A):P>3?R(S,M,A):R(S,M))||A);return P>3&&A&&Object.defineProperty(S,M,A),A},m=this&&this.__param||function(x,S){return function(M,T){S(M,T,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const d=n(7239),g=n(8055),y=n(8460),k=n(844),v=n(2585),o=g.css.toColor("#ffffff"),h=g.css.toColor("#000000"),a=g.css.toColor("#ffffff"),f=g.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let M=0;M<216;M++){const T=S[M/36%6|0],R=S[M/6%6|0],P=S[M%6];x.push({css:g.channels.toCss(T,R,P),rgba:g.channels.toRgba(T,R,P)})}for(let M=0;M<24;M++){const T=8+10*M;x.push({css:g.channels.toCss(T,T,T),rgba:g.channels.toRgba(T,T,T)})}return x})());let E=i.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:h,cursor:a,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:g.color.blend(h,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:g.color.blend(h,b),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const S=this._colors;if(S.foreground=C(x.foreground,o),S.background=C(x.background,h),S.cursor=C(x.cursor,a),S.cursorAccent=C(x.cursorAccent,f),S.selectionBackgroundTransparent=C(x.selectionBackground,b),S.selectionBackgroundOpaque=g.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=C(x.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=g.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=x.selectionForeground?C(x.selectionForeground,g.NULL_COLOR):void 0,S.selectionForeground===g.NULL_COLOR&&(S.selectionForeground=void 0),g.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=g.color.opacity(S.selectionBackgroundTransparent,.3)),g.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=g.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=C(x.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=C(x.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=C(x.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=C(x.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=C(x.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=C(x.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=C(x.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=C(x.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=C(x.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=C(x.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=C(x.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=C(x.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=C(x.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=C(x.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=C(x.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=C(x.brightWhite,i.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const M=Math.min(S.ansi.length-16,x.extendedAnsi.length);for(let T=0;T<M;T++)S.ansi[T+16]=C(x.extendedAnsi[T],i.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(x,S){if(x!==void 0)try{return g.css.toColor(x)}catch{}return S}i.ThemeService=E=u([m(0,v.IOptionsService)],E)},6349:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=n(8460),m=n(844);class d extends m.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const k=new Array(y);for(let v=0;v<Math.min(y,this.length);v++)k[v]=this._array[this._getCyclicIndex(v)];this._array=k,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let k=this._length;k<y;k++)this._array[k]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,k){this._array[this._getCyclicIndex(y)]=k}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,k,...v){if(k){for(let o=y;o<this._length-k;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+k)];this._length-=k,this.onDeleteEmitter.fire({index:y,amount:k})}for(let o=this._length-1;o>=y;o--)this._array[this._getCyclicIndex(o+v.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<v.length;o++)this._array[this._getCyclicIndex(y+o)]=v[o];if(v.length&&this.onInsertEmitter.fire({index:y,amount:v.length}),this._length+v.length>this._maxLength){const o=this._length+v.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=v.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,k,v){if(!(k<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let h=k-1;h>=0;h--)this.set(y+h+v,this.get(y+h));const o=y+k+v-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<k;o++)this.set(y+o+v,this.get(y+o))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}i.CircularList=d},1439:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(u,m=5){if(typeof u!="object")return u;const d=Array.isArray(u)?[]:{};for(const g in u)d[g]=m<=1?u[g]:u[g]&&n(u[g],m-1);return d}},8055:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let n=0,u=0,m=0,d=0;var g,y,k,v,o;function h(f){const b=f.toString(16);return b.length<2?"0"+b:b}function a(f,b){return f<b?(b+.05)/(f+.05):(f+.05)/(b+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(f){f.toCss=function(b,E,C,x){return x!==void 0?`#${h(b)}${h(E)}${h(C)}${h(x)}`:`#${h(b)}${h(E)}${h(C)}`},f.toRgba=function(b,E,C,x=255){return(b<<24|E<<16|C<<8|x)>>>0},f.toColor=function(b,E,C,x){return{css:f.toCss(b,E,C,x),rgba:f.toRgba(b,E,C,x)}}}(g||(i.channels=g={})),function(f){function b(E,C){return d=Math.round(255*C),[n,u,m]=o.toChannels(E.rgba),{css:g.toCss(n,u,m,d),rgba:g.toRgba(n,u,m,d)}}f.blend=function(E,C){if(d=(255&C.rgba)/255,d===1)return{css:C.css,rgba:C.rgba};const x=C.rgba>>24&255,S=C.rgba>>16&255,M=C.rgba>>8&255,T=E.rgba>>24&255,R=E.rgba>>16&255,P=E.rgba>>8&255;return n=T+Math.round((x-T)*d),u=R+Math.round((S-R)*d),m=P+Math.round((M-P)*d),{css:g.toCss(n,u,m),rgba:g.toRgba(n,u,m)}},f.isOpaque=function(E){return(255&E.rgba)==255},f.ensureContrastRatio=function(E,C,x){const S=o.ensureContrastRatio(E.rgba,C.rgba,x);if(S)return g.toColor(S>>24&255,S>>16&255,S>>8&255)},f.opaque=function(E){const C=(255|E.rgba)>>>0;return[n,u,m]=o.toChannels(C),{css:g.toCss(n,u,m),rgba:C}},f.opacity=b,f.multiplyOpacity=function(E,C){return d=255&E.rgba,b(E,d*C/255)},f.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(y||(i.color=y={})),function(f){let b,E;try{const C=document.createElement("canvas");C.width=1,C.height=1;const x=C.getContext("2d",{willReadFrequently:!0});x&&(b=x,b.globalCompositeOperation="copy",E=b.createLinearGradient(0,0,1,1))}catch{}f.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return n=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),m=parseInt(C.slice(3,4).repeat(2),16),g.toColor(n,u,m);case 5:return n=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),m=parseInt(C.slice(3,4).repeat(2),16),d=parseInt(C.slice(4,5).repeat(2),16),g.toColor(n,u,m,d);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const x=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return n=parseInt(x[1]),u=parseInt(x[2]),m=parseInt(x[3]),d=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),g.toColor(n,u,m,d);if(!b||!E)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=E,b.fillStyle=C,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[n,u,m,d]=b.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(n,u,m,d),css:C}}}(k||(i.css=k={})),function(f){function b(E,C,x){const S=E/255,M=C/255,T=x/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}f.relativeLuminance=function(E){return b(E>>16&255,E>>8&255,255&E)},f.relativeLuminance2=b}(v||(i.rgb=v={})),function(f){function b(C,x,S){const M=C>>24&255,T=C>>16&255,R=C>>8&255;let P=x>>24&255,A=x>>16&255,z=x>>8&255,q=a(v.relativeLuminance2(P,A,z),v.relativeLuminance2(M,T,R));for(;q<S&&(P>0||A>0||z>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),z-=Math.max(0,Math.ceil(.1*z)),q=a(v.relativeLuminance2(P,A,z),v.relativeLuminance2(M,T,R));return(P<<24|A<<16|z<<8|255)>>>0}function E(C,x,S){const M=C>>24&255,T=C>>16&255,R=C>>8&255;let P=x>>24&255,A=x>>16&255,z=x>>8&255,q=a(v.relativeLuminance2(P,A,z),v.relativeLuminance2(M,T,R));for(;q<S&&(P<255||A<255||z<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),z=Math.min(255,z+Math.ceil(.1*(255-z))),q=a(v.relativeLuminance2(P,A,z),v.relativeLuminance2(M,T,R));return(P<<24|A<<16|z<<8|255)>>>0}f.blend=function(C,x){if(d=(255&x)/255,d===1)return x;const S=x>>24&255,M=x>>16&255,T=x>>8&255,R=C>>24&255,P=C>>16&255,A=C>>8&255;return n=R+Math.round((S-R)*d),u=P+Math.round((M-P)*d),m=A+Math.round((T-A)*d),g.toRgba(n,u,m)},f.ensureContrastRatio=function(C,x,S){const M=v.relativeLuminance(C>>8),T=v.relativeLuminance(x>>8);if(a(M,T)<S){if(T<M){const A=b(C,x,S),z=a(M,v.relativeLuminance(A>>8));if(z<S){const q=E(C,x,S);return z>a(M,v.relativeLuminance(q>>8))?A:q}return A}const R=E(C,x,S),P=a(M,v.relativeLuminance(R>>8));if(P<S){const A=b(C,x,S);return P>a(M,v.relativeLuminance(A>>8))?R:A}return R}},f.reduceLuminance=b,f.increaseLuminance=E,f.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(o||(i.rgba=o={})),i.toPaddedHex=h,i.contrastRatio=a},8969:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=n(844),m=n(2585),d=n(4348),g=n(7866),y=n(744),k=n(7302),v=n(6975),o=n(8460),h=n(1753),a=n(1480),f=n(7994),b=n(9282),E=n(5435),C=n(5981),x=n(2660);let S=!1;class M extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(R=>{var P;(P=this._onScrollApi)==null||P.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const P in R)this.optionsService.options[P]=R[P]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new k.OptionsService(R)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new E.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,P){this._writeBuffer.write(R,P)}writeSync(R,P){this._logService.logLevel<=m.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(R,P)}input(R,P=!0){this.coreService.triggerDataEvent(R,P)}resize(R,P){isNaN(R)||isNaN(P)||(R=Math.max(R,y.MINIMUM_COLS),P=Math.max(P,y.MINIMUM_ROWS),this._bufferService.resize(R,P))}scroll(R,P=!1){this._bufferService.scroll(R,P)}scrollLines(R,P,A){this._bufferService.scrollLines(R,P,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const P=R-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(R,P){return this._inputHandler.registerEscHandler(R,P)}registerDcsHandler(R,P){return this._inputHandler.registerDcsHandler(R,P)}registerCsiHandler(R,P){return this._inputHandler.registerCsiHandler(R,P)}registerOscHandler(R,P){return this._inputHandler.registerOscHandler(R,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?R=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const P of R)P.dispose()})}}}i.CoreTerminal=M},8460:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){const m=[];for(let d=0;d<this._listeners.length;d++)m.push(this._listeners[d]);for(let d=0;d<m.length;d++)m[d].call(void 0,n,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,u){return n(m=>u.fire(m))},i.runAndSubscribe=function(n,u){return u(void 0),n(m=>u(m))}},5435:function(p,i,n){var u=this&&this.__decorate||function(G,D,H,F){var W,J=arguments.length,j=J<3?D:F===null?F=Object.getOwnPropertyDescriptor(D,H):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(G,D,H,F);else for(var K=G.length-1;K>=0;K--)(W=G[K])&&(j=(J<3?W(j):J>3?W(D,H,j):W(D,H))||j);return J>3&&j&&Object.defineProperty(D,H,j),j},m=this&&this.__param||function(G,D){return function(H,F){D(H,F,G)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const d=n(2584),g=n(7116),y=n(2015),k=n(844),v=n(482),o=n(8437),h=n(8460),a=n(643),f=n(511),b=n(3734),E=n(2585),C=n(1480),x=n(6242),S=n(6351),M=n(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function P(G,D){if(G>24)return D.setWinLines||!1;switch(G){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var A;(function(G){G[G.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",G[G.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let z=0;class q extends k.Disposable{getAttrData(){return this._curAttrData}constructor(D,H,F,W,J,j,K,Q,I=new y.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=H,this._coreService=F,this._logService=W,this._optionsService=J,this._oscLinkService=j,this._coreMouseService=K,this._unicodeService=Q,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new X(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(B=>this._activeBuffer=B.activeBuffer)),this._parser.setCsiHandlerFallback((B,te)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:te.toArray()})}),this._parser.setEscHandlerFallback(B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})}),this._parser.setExecuteHandlerFallback(B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})}),this._parser.setOscHandlerFallback((B,te,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:te,data:U})}),this._parser.setDcsHandlerFallback((B,te,U)=>{te==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:te,payload:U})}),this._parser.setPrintHandler((B,te,U)=>this.print(B,te,U)),this._parser.registerCsiHandler({final:"@"},B=>this.insertChars(B)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},B=>this.scrollLeft(B)),this._parser.registerCsiHandler({final:"A"},B=>this.cursorUp(B)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},B=>this.scrollRight(B)),this._parser.registerCsiHandler({final:"B"},B=>this.cursorDown(B)),this._parser.registerCsiHandler({final:"C"},B=>this.cursorForward(B)),this._parser.registerCsiHandler({final:"D"},B=>this.cursorBackward(B)),this._parser.registerCsiHandler({final:"E"},B=>this.cursorNextLine(B)),this._parser.registerCsiHandler({final:"F"},B=>this.cursorPrecedingLine(B)),this._parser.registerCsiHandler({final:"G"},B=>this.cursorCharAbsolute(B)),this._parser.registerCsiHandler({final:"H"},B=>this.cursorPosition(B)),this._parser.registerCsiHandler({final:"I"},B=>this.cursorForwardTab(B)),this._parser.registerCsiHandler({final:"J"},B=>this.eraseInDisplay(B,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},B=>this.eraseInDisplay(B,!0)),this._parser.registerCsiHandler({final:"K"},B=>this.eraseInLine(B,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},B=>this.eraseInLine(B,!0)),this._parser.registerCsiHandler({final:"L"},B=>this.insertLines(B)),this._parser.registerCsiHandler({final:"M"},B=>this.deleteLines(B)),this._parser.registerCsiHandler({final:"P"},B=>this.deleteChars(B)),this._parser.registerCsiHandler({final:"S"},B=>this.scrollUp(B)),this._parser.registerCsiHandler({final:"T"},B=>this.scrollDown(B)),this._parser.registerCsiHandler({final:"X"},B=>this.eraseChars(B)),this._parser.registerCsiHandler({final:"Z"},B=>this.cursorBackwardTab(B)),this._parser.registerCsiHandler({final:"`"},B=>this.charPosAbsolute(B)),this._parser.registerCsiHandler({final:"a"},B=>this.hPositionRelative(B)),this._parser.registerCsiHandler({final:"b"},B=>this.repeatPrecedingCharacter(B)),this._parser.registerCsiHandler({final:"c"},B=>this.sendDeviceAttributesPrimary(B)),this._parser.registerCsiHandler({prefix:">",final:"c"},B=>this.sendDeviceAttributesSecondary(B)),this._parser.registerCsiHandler({final:"d"},B=>this.linePosAbsolute(B)),this._parser.registerCsiHandler({final:"e"},B=>this.vPositionRelative(B)),this._parser.registerCsiHandler({final:"f"},B=>this.hVPosition(B)),this._parser.registerCsiHandler({final:"g"},B=>this.tabClear(B)),this._parser.registerCsiHandler({final:"h"},B=>this.setMode(B)),this._parser.registerCsiHandler({prefix:"?",final:"h"},B=>this.setModePrivate(B)),this._parser.registerCsiHandler({final:"l"},B=>this.resetMode(B)),this._parser.registerCsiHandler({prefix:"?",final:"l"},B=>this.resetModePrivate(B)),this._parser.registerCsiHandler({final:"m"},B=>this.charAttributes(B)),this._parser.registerCsiHandler({final:"n"},B=>this.deviceStatus(B)),this._parser.registerCsiHandler({prefix:"?",final:"n"},B=>this.deviceStatusPrivate(B)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},B=>this.softReset(B)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},B=>this.setCursorStyle(B)),this._parser.registerCsiHandler({final:"r"},B=>this.setScrollRegion(B)),this._parser.registerCsiHandler({final:"s"},B=>this.saveCursor(B)),this._parser.registerCsiHandler({final:"t"},B=>this.windowOptions(B)),this._parser.registerCsiHandler({final:"u"},B=>this.restoreCursor(B)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},B=>this.insertColumns(B)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},B=>this.deleteColumns(B)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},B=>this.selectProtected(B)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},B=>this.requestMode(B,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},B=>this.requestMode(B,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(B=>(this.setTitle(B),this.setIconName(B),!0))),this._parser.registerOscHandler(1,new x.OscHandler(B=>this.setIconName(B))),this._parser.registerOscHandler(2,new x.OscHandler(B=>this.setTitle(B))),this._parser.registerOscHandler(4,new x.OscHandler(B=>this.setOrReportIndexedColor(B))),this._parser.registerOscHandler(8,new x.OscHandler(B=>this.setHyperlink(B))),this._parser.registerOscHandler(10,new x.OscHandler(B=>this.setOrReportFgColor(B))),this._parser.registerOscHandler(11,new x.OscHandler(B=>this.setOrReportBgColor(B))),this._parser.registerOscHandler(12,new x.OscHandler(B=>this.setOrReportCursorColor(B))),this._parser.registerOscHandler(104,new x.OscHandler(B=>this.restoreIndexedColor(B))),this._parser.registerOscHandler(110,new x.OscHandler(B=>this.restoreFgColor(B))),this._parser.registerOscHandler(111,new x.OscHandler(B=>this.restoreBgColor(B))),this._parser.registerOscHandler(112,new x.OscHandler(B=>this.restoreCursorColor(B))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const B in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},()=>this.selectCharset("("+B)),this._parser.registerEscHandler({intermediates:")",final:B},()=>this.selectCharset(")"+B)),this._parser.registerEscHandler({intermediates:"*",final:B},()=>this.selectCharset("*"+B)),this._parser.registerEscHandler({intermediates:"+",final:B},()=>this.selectCharset("+"+B)),this._parser.registerEscHandler({intermediates:"-",final:B},()=>this.selectCharset("-"+B)),this._parser.registerEscHandler({intermediates:".",final:B},()=>this.selectCharset("."+B)),this._parser.registerEscHandler({intermediates:"/",final:B},()=>this.selectCharset("/"+B));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(B=>(this._logService.error("Parsing error: ",B),B)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((B,te)=>this.requestStatusString(B,te)))}_preserveStack(D,H,F,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=F,this._parseStack.position=W}_logSlowResolvingAsync(D){this._logService.logLevel<=E.LogLevelEnum.WARN&&Promise.race([D,new Promise((H,F)=>setTimeout(()=>F("#SLOW_TIMEOUT"),5e3))]).catch(H=>{if(H!=="#SLOW_TIMEOUT")throw H;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,H){let F,W=this._activeBuffer.x,J=this._activeBuffer.y,j=0;const K=this._parseStack.paused;if(K){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync(F),F;W=this._parseStack.cursorStartX,J=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>R&&(j=this._parseStack.position+R)}if(this._logService.logLevel<=E.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,B=>String.fromCharCode(B)).join("")}"`),typeof D=="string"?D.split("").map(B=>B.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(D.length,R))),K||this._dirtyRowTracker.clearRange(),D.length>R)for(let B=j;B<D.length;B+=R){const te=B+R<D.length?B+R:D.length,U=typeof D=="string"?this._stringDecoder.decode(D.substring(B,te),this._parseBuffer):this._utf8Decoder.decode(D.subarray(B,te),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,U))return this._preserveStack(W,J,U,B),this._logSlowResolvingAsync(F),F}else if(!K){const B=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,B))return this._preserveStack(W,J,B,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===W&&this._activeBuffer.y===J||this._onCursorMove.fire();const Q=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(Q,this._bufferService.rows-1))}print(D,H,F){let W,J;const j=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,Q=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,te=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-H>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodepoint(this._activeBuffer.x-1,0,1,te);let ae=this._parser.precedingJoinState;for(let ce=H;ce<F;++ce){if(W=D[ce],W<127&&j){const ue=j[String.fromCharCode(W)];ue&&(W=ue.charCodeAt(0))}const he=this._unicodeService.charProperties(W,ae);J=C.UnicodeService.extractWidth(he);const ee=C.UnicodeService.extractShouldJoin(he),oe=ee?C.UnicodeService.extractWidth(ae):0;if(ae=he,K&&this._onA11yChar.fire((0,v.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+J-oe>Q){if(I){const ue=U;let pe=this._activeBuffer.x-oe;for(this._activeBuffer.x=oe,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),oe>0&&U instanceof o.BufferLine&&U.copyCellsFrom(ue,pe,0,oe,!1);pe<Q;)ue.setCellFromCodepoint(pe++,0,1,te)}else if(this._activeBuffer.x=Q-1,J===2)continue}if(ee&&this._activeBuffer.x){const ue=U.getWidth(this._activeBuffer.x-1)?1:2;U.addCodepointToCell(this._activeBuffer.x-ue,W,J);for(let pe=J-oe;--pe>=0;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,te)}else if(B&&(U.insertCells(this._activeBuffer.x,J-oe,this._activeBuffer.getNullCell(te)),U.getWidth(Q-1)===2&&U.setCellFromCodepoint(Q-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,te)),U.setCellFromCodepoint(this._activeBuffer.x++,W,J,te),J>0)for(;--J;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,te)}this._parser.precedingJoinState=ae,this._activeBuffer.x<Q&&F-H>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodepoint(this._activeBuffer.x,0,1,te),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,H){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,H):this._parser.registerCsiHandler(D,F=>!P(F.params[0],this._optionsService.rawOptions.windowOptions)||H(F))}registerDcsHandler(D,H){return this._parser.registerDcsHandler(D,new S.DcsHandler(H))}registerEscHandler(D,H){return this._parser.registerEscHandler(D,H)}registerOscHandler(D,H){return this._parser.registerOscHandler(D,new x.OscHandler(H))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,H){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=D,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+H)}cursorUp(D){const H=this._activeBuffer.y-this._activeBuffer.scrollTop;return H>=0?this._moveCursor(0,-Math.min(H,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return H>=0?this._moveCursor(0,Math.min(H,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const H=D.params[0];return H===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:H===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=D.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=D.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const H=D.params[0];return H===1&&(this._curAttrData.bg|=536870912),H!==2&&H!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,H,F,W=!1,J=!1){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);j.replaceCells(H,F,this._activeBuffer.getNullCell(this._eraseAttrData()),J),W&&(j.isWrapped=!1)}_resetBufferLine(D,H=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),H),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),F.isWrapped=!1)}eraseInDisplay(D,H=!1){let F;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);F<this._bufferService.rows;F++)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,H),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(D,H=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,H);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,H)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let H=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,J=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;H--;)this._activeBuffer.lines.splice(J-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let H=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;H--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let H=D.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let H=D.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const H=this._parser.precedingJoinState;if(!H)return!0;const F=D.params[0]||1,W=C.UnicodeService.extractWidth(H),J=this._activeBuffer.x-W,j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(J),K=new Uint32Array(j.length*F);let Q=0;for(let B=0;B<j.length;){const te=j.codePointAt(B)||0;K[Q++]=te,B+=te>65535?2:1}let I=Q;for(let B=1;B<F;++B)K.copyWithin(I,0,Q),I+=Q;return this.print(K,0,I),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[H]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,H){const F=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:J}=this._coreMouseService,j=this._coreService,{buffers:K,cols:Q}=this._bufferService,{active:I,alt:B}=K,te=this._optionsService.rawOptions,U=ee=>ee?1:2,ae=D.params[0];return ce=ae,he=H?ae===2?4:ae===4?U(j.modes.insertMode):ae===12?3:ae===20?U(te.convertEol):0:ae===1?U(F.applicationCursorKeys):ae===3?te.windowOptions.setWinLines?Q===80?2:Q===132?1:0:0:ae===6?U(F.origin):ae===7?U(F.wraparound):ae===8?3:ae===9?U(W==="X10"):ae===12?U(te.cursorBlink):ae===25?U(!j.isCursorHidden):ae===45?U(F.reverseWraparound):ae===66?U(F.applicationKeypad):ae===67?4:ae===1e3?U(W==="VT200"):ae===1002?U(W==="DRAG"):ae===1003?U(W==="ANY"):ae===1004?U(F.sendFocus):ae===1005?4:ae===1006?U(J==="SGR"):ae===1015?4:ae===1016?U(J==="SGR_PIXELS"):ae===1048?1:ae===47||ae===1047||ae===1049?U(I===B):ae===2004?U(F.bracketedPasteMode):0,j.triggerDataEvent(`${d.C0.ESC}[${H?"":"?"}${ce};${he}$y`),!0;var ce,he}_updateAttrColor(D,H,F,W,J){return H===2?(D|=50331648,D&=-16777216,D|=b.AttributeData.fromColorRGB([F,W,J])):H===5&&(D&=-50331904,D|=33554432|255&F),D}_extractColor(D,H,F){const W=[0,0,-1,0,0,0];let J=0,j=0;do{if(W[j+J]=D.params[H+j],D.hasSubParams(H+j)){const K=D.getSubParams(H+j);let Q=0;do W[1]===5&&(J=1),W[j+Q+1+J]=K[Q];while(++Q<K.length&&Q+j+1+J<W.length);break}if(W[1]===5&&j+J>=2||W[1]===2&&j+J>=5)break;W[1]&&(J=1)}while(++j+H<D.length&&j+J<W.length);for(let K=2;K<W.length;++K)W[K]===-1&&(W[K]=0);switch(W[0]){case 38:F.fg=this._updateAttrColor(F.fg,W[1],W[3],W[4],W[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,W[1],W[3],W[4],W[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,W[1],W[3],W[4],W[5])}return j}_processUnderline(D,H){H.extended=H.extended.clone(),(!~D||D>5)&&(D=1),H.extended.underlineStyle=D,H.fg|=268435456,D===0&&(H.fg&=-268435457),H.updateExtended()}_processSGR0(D){D.fg=o.DEFAULT_ATTR_DATA.fg,D.bg=o.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const H=D.length;let F;const W=this._curAttrData;for(let J=0;J<H;J++)F=D.params[J],F>=30&&F<=37?(W.fg&=-50331904,W.fg|=16777216|F-30):F>=40&&F<=47?(W.bg&=-50331904,W.bg|=16777216|F-40):F>=90&&F<=97?(W.fg&=-50331904,W.fg|=16777224|F-90):F>=100&&F<=107?(W.bg&=-50331904,W.bg|=16777224|F-100):F===0?this._processSGR0(W):F===1?W.fg|=134217728:F===3?W.bg|=67108864:F===4?(W.fg|=268435456,this._processUnderline(D.hasSubParams(J)?D.getSubParams(J)[0]:1,W)):F===5?W.fg|=536870912:F===7?W.fg|=67108864:F===8?W.fg|=1073741824:F===9?W.fg|=2147483648:F===2?W.bg|=134217728:F===21?this._processUnderline(2,W):F===22?(W.fg&=-134217729,W.bg&=-134217729):F===23?W.bg&=-67108865:F===24?(W.fg&=-268435457,this._processUnderline(0,W)):F===25?W.fg&=-536870913:F===27?W.fg&=-67108865:F===28?W.fg&=-1073741825:F===29?W.fg&=2147483647:F===39?(W.fg&=-67108864,W.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):F===49?(W.bg&=-67108864,W.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?J+=this._extractColor(D,J,W):F===53?W.bg|=1073741824:F===55?W.bg&=-1073741825:F===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):F===100?(W.fg&=-67108864,W.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const H=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${H};${F}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const H=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${H};${F}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const H=D.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=H%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(D){const H=D.params[0]||1;let F;return(D.length<2||(F=D.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(D){if(!P(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const H=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:H!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:H!==0&&H!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),H!==0&&H!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:H!==0&&H!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),H!==0&&H!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const H=[],F=D.split(";");for(;F.length>1;){const W=F.shift(),J=F.shift();if(/^\d+$/.exec(W)){const j=parseInt(W);if(ie(j))if(J==="?")H.push({type:0,index:j});else{const K=(0,M.parseColor)(J);K&&H.push({type:1,index:j,color:K})}}}return H.length&&this._onColor.fire(H),!0}setHyperlink(D){const H=D.split(";");return!(H.length<2)&&(H[1]?this._createHyperlink(H[0],H[1]):!H[0]&&this._finishHyperlink())}_createHyperlink(D,H){this._getCurrentLinkId()&&this._finishHyperlink();const F=D.split(":");let W;const J=F.findIndex(j=>j.startsWith("id="));return J!==-1&&(W=F[J].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:H}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,H){const F=D.split(";");for(let W=0;W<F.length&&!(H>=this._specialColors.length);++W,++H)if(F[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{const J=(0,M.parseColor)(F[W]);J&&this._onColor.fire([{type:1,index:this._specialColors[H],color:J}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const H=[],F=D.split(";");for(let W=0;W<F.length;++W)if(/^\d+$/.exec(F[W])){const J=parseInt(F[W]);ie(J)&&H.push({type:2,index:J})}return H.length&&this._onColor.fire(H),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(T[D[0]],g.CHARSETS[D[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new f.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let H=0;H<this._bufferService.rows;++H){const F=this._activeBuffer.ybase+this._activeBuffer.y+H,W=this._activeBuffer.lines.get(F);W&&(W.fill(D),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,H){const F=this._bufferService.buffer,W=this._optionsService.rawOptions;return(J=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${J}${d.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,H){this._dirtyRowTracker.markRangeDirty(D,H)}}i.InputHandler=q;let X=class{constructor(G){this._bufferService=G,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(G){G<this.start?this.start=G:G>this.end&&(this.end=G)}markRangeDirty(G,D){G>D&&(z=G,G=D,D=z),G<this.start&&(this.start=G),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function ie(G){return 0<=G&&G<256}X=u([m(0,E.IBufferService)],X)},844:(p,i)=>{function n(u){for(const m of u)m.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const m=this._disposables.indexOf(u);m!==-1&&this._disposables.splice(m,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var m;this._isDisposed||u===this._value||((m=this._value)==null||m.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=n,i.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},1505:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(m,d,g){this._data[m]||(this._data[m]={}),this._data[m][d]=g}get(m,d){return this._data[m]?this._data[m][d]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(u,m,d,g,y){this._data.get(u,m)||this._data.set(u,m,new n),this._data.get(u,m).set(d,g,y)}get(u,m,d,g){var y;return(y=this._data.get(u,m))==null?void 0:y.get(d,g)}clear(){this._data.clear()}}},6114:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const n=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const m=n.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(n=this._search(this._getKey(u)),this._array.splice(n,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const m=this._getKey(u);if(m===void 0||(n=this._search(m),n===-1)||this._getKey(this._array[n])!==m)return!1;do if(this._array[n]===u)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===m);return!1}*getKeyIterator(u){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===u)}forEachByKey(u,m){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do m(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===u)}values(){return[...this._array].values()}_search(u){let m=0,d=this._array.length-1;for(;d>=m;){let g=m+d>>1;const y=this._getKey(this._array[g]);if(y>u)d=g-1;else{if(!(y<u)){for(;g>0&&this._getKey(this._array[g-1])===u;)g--;return g}m=g+1}}return m}}},7226:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=n(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let k=0,v=0,o=y.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),v=Math.max(k,v),h=y.timeRemaining(),1.5*v>h)return o-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-k))}ms`),void this._start();o=h}this.clear()}}class d extends m{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const k=Date.now()+y;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}i.PriorityTaskQueue=d,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:d,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=n(643);i.updateWindowsModeWrappedState=function(m){const d=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),g=d==null?void 0:d.get(m.cols-1),y=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);y&&g&&(y.isWrapped=g[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&g[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new n;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=n;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,g=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=g}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=n(6349),m=n(7226),d=n(3734),g=n(8437),y=n(4634),k=n(511),v=n(643),o=n(4863),h=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(a,f,b){this._hasScrollback=a,this._optionsService=f,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,f){return new g.BufferLine(this._bufferService.cols,this.getNullCell(a),f)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const f=a+this._optionsService.rawOptions.scrollback;return f>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:f}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=g.DEFAULT_ATTR_DATA);let f=this._rows;for(;f--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,f){const b=this.getNullCell(g.DEFAULT_ATTR_DATA);let E=0;const C=this._getCorrectBufferLength(f);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<a)for(let S=0;S<this.lines.length;S++)E+=+this.lines.get(S).resize(a,b);let x=0;if(this._rows<f)for(let S=this._rows;S<f;S++)this.lines.length<f+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(a,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(a,b)));else for(let S=this._rows;S>f;S--)this.lines.length>f+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const S=this.lines.length-C;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=C}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,f-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=f-1,this._isReflowEnabled&&(this._reflow(a,f),this._cols>a))for(let x=0;x<this.lines.length;x++)E+=+this.lines.get(x).resize(a,b);this._cols=a,this._rows=f,this._memoryCleanupQueue.clear(),E>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let f=0;for(;this._memoryCleanupPosition<this.lines.length;)if(f+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),f>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,f){this._cols!==a&&(a>this._cols?this._reflowLarger(a,f):this._reflowSmaller(a,f))}_reflowLarger(a,f){const b=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(b.length>0){const E=(0,y.reflowLargerCreateNewLayout)(this.lines,b);(0,y.reflowLargerApplyNewLayout)(this.lines,E.layout),this._reflowLargerAdjustViewport(a,f,E.countRemoved)}}_reflowLargerAdjustViewport(a,f,b){const E=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=b;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<f&&this.lines.push(new g.BufferLine(a,E))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(a,f){const b=this.getNullCell(g.DEFAULT_ATTR_DATA),E=[];let C=0;for(let x=this.lines.length-1;x>=0;x--){let S=this.lines.get(x);if(!S||!S.isWrapped&&S.getTrimmedLength()<=a)continue;const M=[S];for(;S.isWrapped&&x>0;)S=this.lines.get(--x),M.unshift(S);const T=this.ybase+this.y;if(T>=x&&T<x+M.length)continue;const R=M[M.length-1].getTrimmedLength(),P=(0,y.reflowSmallerGetNewLineLengths)(M,this._cols,a),A=P.length-M.length;let z;z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const q=[];for(let F=0;F<A;F++){const W=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);q.push(W)}q.length>0&&(E.push({start:x+M.length+C,newLines:q}),C+=q.length),M.push(...q);let X=P.length-1,ie=P[X];ie===0&&(X--,ie=P[X]);let G=M.length-A-1,D=R;for(;G>=0;){const F=Math.min(D,ie);if(M[X]===void 0)break;if(M[X].copyCellsFrom(M[G],D-F,ie-F,F,!0),ie-=F,ie===0&&(X--,ie=P[X]),D-=F,D===0){G--;const W=Math.max(G,0);D=(0,y.getWrappedLineTrimmedLength)(M,W,this._cols)}}for(let F=0;F<M.length;F++)P[F]<a&&M[F].setCell(P[F],b);let H=A-z;for(;H-- >0;)this.ybase===0?this.y<f-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-f&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+f-1)}if(E.length>0){const x=[],S=[];for(let X=0;X<this.lines.length;X++)S.push(this.lines.get(X));const M=this.lines.length;let T=M-1,R=0,P=E[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let X=Math.min(this.lines.maxLength-1,M+C-1);X>=0;X--)if(P&&P.start>T+A){for(let ie=P.newLines.length-1;ie>=0;ie--)this.lines.set(X--,P.newLines[ie]);X++,x.push({index:T+1,amount:P.newLines.length}),A+=P.newLines.length,P=E[++R]}else this.lines.set(X,S[T--]);let z=0;for(let X=x.length-1;X>=0;X--)x[X].index+=z,this.lines.onInsertEmitter.fire(x[X]),z+=x[X].amount;const q=Math.max(0,M+C-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(a,f,b=0,E){const C=this.lines.get(a);return C?C.translateToString(f,b,E):""}getWrappedRangeForLine(a){let f=a,b=a;for(;f>0&&this.lines.get(f).isWrapped;)f--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:f,last:b}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].line===a&&(this.markers[f].dispose(),this.markers.splice(f--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const f=new o.Marker(a);return this.markers.push(f),f.register(this.lines.onTrim(b=>{f.line-=b,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(b=>{f.line>=b.index&&(f.line+=b.amount)})),f.register(this.lines.onDelete(b=>{f.line>=b.index&&f.line<b.index+b.amount&&f.dispose(),f.line>b.index&&(f.line-=b.amount)})),f.register(f.onDispose(()=>this._removeMarker(f))),f}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=n(3734),m=n(511),d=n(643),g=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let y=0;class k{constructor(o,h,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const f=h||m.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let b=0;b<o;++b)this.setCell(b,f);this.length=o}get(o){const h=this._data[3*o+0],a=2097151&h;return[this._data[3*o+1],2097152&h?this._combined[o]:a?(0,g.stringFromCodePoint)(a):"",h>>22,2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):a]}set(o,h){this._data[3*o+1]=h[d.CHAR_DATA_ATTR_INDEX],h[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=h[1],this._data[3*o+0]=2097152|o|h[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=h[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const h=this._data[3*o+0];return 2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&h}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const h=this._data[3*o+0];return 2097152&h?this._combined[o]:2097151&h?(0,g.stringFromCodePoint)(2097151&h):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,h){return y=3*o,h.content=this._data[y+0],h.fg=this._data[y+1],h.bg=this._data[y+2],2097152&h.content&&(h.combinedData=this._combined[o]),268435456&h.bg&&(h.extended=this._extendedAttrs[o]),h}setCell(o,h){2097152&h.content&&(this._combined[o]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[o]=h.extended),this._data[3*o+0]=h.content,this._data[3*o+1]=h.fg,this._data[3*o+2]=h.bg}setCellFromCodepoint(o,h,a,f){268435456&f.bg&&(this._extendedAttrs[o]=f.extended),this._data[3*o+0]=h|a<<22,this._data[3*o+1]=f.fg,this._data[3*o+2]=f.bg}addCodepointToCell(o,h,a){let f=this._data[3*o+0];2097152&f?this._combined[o]+=(0,g.stringFromCodePoint)(h):2097151&f?(this._combined[o]=(0,g.stringFromCodePoint)(2097151&f)+(0,g.stringFromCodePoint)(h),f&=-2097152,f|=2097152):f=h|4194304,a&&(f&=-12582913,f|=a<<22),this._data[3*o+0]=f}insertCells(o,h,a){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,a),h<this.length-o){const f=new m.CellData;for(let b=this.length-o-h-1;b>=0;--b)this.setCell(o+h+b,this.loadCell(o+b,f));for(let b=0;b<h;++b)this.setCell(o+b,a)}else for(let f=o;f<this.length;++f)this.setCell(f,a);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,a)}deleteCells(o,h,a){if(o%=this.length,h<this.length-o){const f=new m.CellData;for(let b=0;b<this.length-o-h;++b)this.setCell(o+b,this.loadCell(o+h+b,f));for(let b=this.length-h;b<this.length;++b)this.setCell(b,a)}else for(let f=o;f<this.length;++f)this.setCell(f,a);o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,a),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodepoint(o,0,1,a)}replaceCells(o,h,a,f=!1){if(f)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodepoint(o-1,0,1,a),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodepoint(h,0,1,a);o<h&&o<this.length;)this.isProtected(o)||this.setCell(o,a),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,a),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h,0,1,a);o<h&&o<this.length;)this.setCell(o++,a)}resize(o,h){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const f=new Uint32Array(a);f.set(this._data),this._data=f}for(let f=this.length;f<o;++f)this.setCell(f,h)}else{this._data=this._data.subarray(0,a);const f=Object.keys(this._combined);for(let E=0;E<f.length;E++){const C=parseInt(f[E],10);C>=o&&delete this._combined[C]}const b=Object.keys(this._extendedAttrs);for(let E=0;E<b.length;E++){const C=parseInt(b[E],10);C>=o&&delete this._extendedAttrs[C]}}return this.length=o,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,h=!1){if(h)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,o);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const h in o._combined)this._combined[h]=o._combined[h];this._extendedAttrs={};for(const h in o._extendedAttrs)this._extendedAttrs[h]=o._extendedAttrs[h];this.isWrapped=o.isWrapped}clone(){const o=new k(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const h in this._combined)o._combined[h]=this._combined[h];for(const h in this._extendedAttrs)o._extendedAttrs[h]=this._extendedAttrs[h];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,h,a,f,b){const E=o._data;if(b)for(let x=f-1;x>=0;x--){for(let S=0;S<3;S++)this._data[3*(a+x)+S]=E[3*(h+x)+S];268435456&E[3*(h+x)+2]&&(this._extendedAttrs[a+x]=o._extendedAttrs[h+x])}else for(let x=0;x<f;x++){for(let S=0;S<3;S++)this._data[3*(a+x)+S]=E[3*(h+x)+S];268435456&E[3*(h+x)+2]&&(this._extendedAttrs[a+x]=o._extendedAttrs[h+x])}const C=Object.keys(o._combined);for(let x=0;x<C.length;x++){const S=parseInt(C[x],10);S>=h&&(this._combined[S-h+a]=o._combined[S])}}translateToString(o,h,a,f){h=h??0,a=a??this.length,o&&(a=Math.min(a,this.getTrimmedLength())),f&&(f.length=0);let b="";for(;h<a;){const E=this._data[3*h+0],C=2097151&E,x=2097152&E?this._combined[h]:C?(0,g.stringFromCodePoint)(C):d.WHITESPACE_CELL_CHAR;if(b+=x,f)for(let S=0;S<x.length;++S)f.push(h);h+=E>>22||1}return f&&f.push(h),b}}i.BufferLine=k},4841:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,u){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return u*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(p,i)=>{function n(u,m,d){if(m===u.length-1)return u[m].getTrimmedLength();const g=!u[m].hasContent(d-1)&&u[m].getWidth(d-1)===1,y=u[m+1].getWidth(0)===2;return g&&y?d-1:d}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,m,d,g,y){const k=[];for(let v=0;v<u.length-1;v++){let o=v,h=u.get(++o);if(!h.isWrapped)continue;const a=[u.get(v)];for(;o<u.length&&h.isWrapped;)a.push(h),h=u.get(++o);if(g>=v&&g<o){v+=a.length-1;continue}let f=0,b=n(a,f,m),E=1,C=0;for(;E<a.length;){const S=n(a,E,m),M=S-C,T=d-b,R=Math.min(M,T);a[f].copyCellsFrom(a[E],C,b,R,!1),b+=R,b===d&&(f++,b=0),C+=R,C===S&&(E++,C=0),b===0&&f!==0&&a[f-1].getWidth(d-1)===2&&(a[f].copyCellsFrom(a[f-1],d-1,b++,1,!1),a[f-1].setCell(d-1,y))}a[f].replaceCells(b,d,y);let x=0;for(let S=a.length-1;S>0&&(S>f||a[S].getTrimmedLength()===0);S--)x++;x>0&&(k.push(v+a.length-x),k.push(x)),v+=a.length-1}return k},i.reflowLargerCreateNewLayout=function(u,m){const d=[];let g=0,y=m[g],k=0;for(let v=0;v<u.length;v++)if(y===v){const o=m[++g];u.onDeleteEmitter.fire({index:v-k,amount:o}),v+=o-1,k+=o,y=m[++g]}else d.push(v);return{layout:d,countRemoved:k}},i.reflowLargerApplyNewLayout=function(u,m){const d=[];for(let g=0;g<m.length;g++)d.push(u.get(m[g]));for(let g=0;g<d.length;g++)u.set(g,d[g]);u.length=m.length},i.reflowSmallerGetNewLineLengths=function(u,m,d){const g=[],y=u.map((h,a)=>n(u,a,m)).reduce((h,a)=>h+a);let k=0,v=0,o=0;for(;o<y;){if(y-o<d){g.push(y-o);break}k+=d;const h=n(u,v,m);k>h&&(k-=h,v++);const a=u[v].getWidth(k-1)===2;a&&k--;const f=a?d-1:d;g.push(f),o+=f}return g},i.getWrappedLineTrimmedLength=n},5295:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=n(8460),m=n(844),d=n(9092);class g extends m.Disposable{constructor(k,v){super(),this._optionsService=k,this._bufferService=v,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,v){this._normal.resize(k,v),this._alt.resize(k,v),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}i.BufferSet=g},511:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=n(482),m=n(643),d=n(3734);class g extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const v=new g;return v.setFromCharData(k),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(k[m.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(k[m.CHAR_DATA_CHAR_INDEX].length===2){const o=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const h=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|k[m.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=k[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[m.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=k[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=n(8460),m=n(844);class d{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}i.Marker=d,d._nextId=1},7116:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(p,i)=>{var n,u,m;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(n||(i.C0=n={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(u||(i.C1=u={})),function(d){d.ST=`${n.ESC}\\`}(m||(i.C1_ESCAPED=m={}))},7399:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=n(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(d,g,y,k){const v={type:0,cancel:!1,key:void 0},o=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?v.key=g?u.C0.ESC+"OA":u.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?v.key=g?u.C0.ESC+"OD":u.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?v.key=g?u.C0.ESC+"OC":u.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(v.key=g?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:v.key=d.ctrlKey?"\b":u.C0.DEL,d.altKey&&(v.key=u.C0.ESC+v.key);break;case 9:if(d.shiftKey){v.key=u.C0.ESC+"[Z";break}v.key=u.C0.HT,v.cancel=!0;break;case 13:v.key=d.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,v.cancel=!0;break;case 27:v.key=u.C0.ESC,d.altKey&&(v.key=u.C0.ESC+u.C0.ESC),v.cancel=!0;break;case 37:if(d.metaKey)break;o?(v.key=u.C0.ESC+"[1;"+(o+1)+"D",v.key===u.C0.ESC+"[1;3D"&&(v.key=u.C0.ESC+(y?"b":"[1;5D"))):v.key=g?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(d.metaKey)break;o?(v.key=u.C0.ESC+"[1;"+(o+1)+"C",v.key===u.C0.ESC+"[1;3C"&&(v.key=u.C0.ESC+(y?"f":"[1;5C"))):v.key=g?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(d.metaKey)break;o?(v.key=u.C0.ESC+"[1;"+(o+1)+"A",y||v.key!==u.C0.ESC+"[1;3A"||(v.key=u.C0.ESC+"[1;5A")):v.key=g?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(d.metaKey)break;o?(v.key=u.C0.ESC+"[1;"+(o+1)+"B",y||v.key!==u.C0.ESC+"[1;3B"||(v.key=u.C0.ESC+"[1;5B")):v.key=g?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(v.key=u.C0.ESC+"[2~");break;case 46:v.key=o?u.C0.ESC+"[3;"+(o+1)+"~":u.C0.ESC+"[3~";break;case 36:v.key=o?u.C0.ESC+"[1;"+(o+1)+"H":g?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:v.key=o?u.C0.ESC+"[1;"+(o+1)+"F":g?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:d.shiftKey?v.type=2:d.ctrlKey?v.key=u.C0.ESC+"[5;"+(o+1)+"~":v.key=u.C0.ESC+"[5~";break;case 34:d.shiftKey?v.type=3:d.ctrlKey?v.key=u.C0.ESC+"[6;"+(o+1)+"~":v.key=u.C0.ESC+"[6~";break;case 112:v.key=o?u.C0.ESC+"[1;"+(o+1)+"P":u.C0.ESC+"OP";break;case 113:v.key=o?u.C0.ESC+"[1;"+(o+1)+"Q":u.C0.ESC+"OQ";break;case 114:v.key=o?u.C0.ESC+"[1;"+(o+1)+"R":u.C0.ESC+"OR";break;case 115:v.key=o?u.C0.ESC+"[1;"+(o+1)+"S":u.C0.ESC+"OS";break;case 116:v.key=o?u.C0.ESC+"[15;"+(o+1)+"~":u.C0.ESC+"[15~";break;case 117:v.key=o?u.C0.ESC+"[17;"+(o+1)+"~":u.C0.ESC+"[17~";break;case 118:v.key=o?u.C0.ESC+"[18;"+(o+1)+"~":u.C0.ESC+"[18~";break;case 119:v.key=o?u.C0.ESC+"[19;"+(o+1)+"~":u.C0.ESC+"[19~";break;case 120:v.key=o?u.C0.ESC+"[20;"+(o+1)+"~":u.C0.ESC+"[20~";break;case 121:v.key=o?u.C0.ESC+"[21;"+(o+1)+"~":u.C0.ESC+"[21~";break;case 122:v.key=o?u.C0.ESC+"[23;"+(o+1)+"~":u.C0.ESC+"[23~";break;case 123:v.key=o?u.C0.ESC+"[24;"+(o+1)+"~":u.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(y&&!k||!d.altKey||d.metaKey)!y||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?v.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(v.key=u.C0.US),d.key==="@"&&(v.key=u.C0.NUL)):d.keyCode===65&&(v.type=1);else{const h=m[d.keyCode],a=h==null?void 0:h[d.shiftKey?1:0];if(a)v.key=u.C0.ESC+a;else if(d.keyCode>=65&&d.keyCode<=90){const f=d.ctrlKey?d.keyCode-64:d.keyCode+32;let b=String.fromCharCode(f);d.shiftKey&&(b=b.toUpperCase()),v.key=u.C0.ESC+b}else if(d.keyCode===32)v.key=u.C0.ESC+(d.ctrlKey?u.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let f=d.code.slice(3,4);d.shiftKey||(f=f.toLowerCase()),v.key=u.C0.ESC+f,v.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?v.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?v.key=u.C0.NUL:d.keyCode>=51&&d.keyCode<=55?v.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?v.key=u.C0.DEL:d.keyCode===219?v.key=u.C0.ESC:d.keyCode===220?v.key=u.C0.FS:d.keyCode===221&&(v.key=u.C0.GS)}return v}},482:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,u=0,m=n.length){let d="";for(let g=u;g<m;++g){let y=n[g];y>65535?(y-=65536,d+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):d+=String.fromCharCode(y)}return d},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){const m=n.length;if(!m)return 0;let d=0,g=0;if(this._interim){const y=n.charCodeAt(g++);56320<=y&&y<=57343?u[d++]=1024*(this._interim-55296)+y-56320+65536:(u[d++]=this._interim,u[d++]=y),this._interim=0}for(let y=g;y<m;++y){const k=n.charCodeAt(y);if(55296<=k&&k<=56319){if(++y>=m)return this._interim=k,d;const v=n.charCodeAt(y);56320<=v&&v<=57343?u[d++]=1024*(k-55296)+v-56320+65536:(u[d++]=k,u[d++]=v)}else k!==65279&&(u[d++]=k)}return d}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){const m=n.length;if(!m)return 0;let d,g,y,k,v=0,o=0,h=0;if(this.interim[0]){let b=!1,E=this.interim[0];E&=(224&E)==192?31:(240&E)==224?15:7;let C,x=0;for(;(C=63&this.interim[++x])&&x<4;)E<<=6,E|=C;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=S-x;for(;h<M;){if(h>=m)return 0;if(C=n[h++],(192&C)!=128){h--,b=!0;break}this.interim[x++]=C,E<<=6,E|=63&C}b||(S===2?E<128?h--:u[v++]=E:S===3?E<2048||E>=55296&&E<=57343||E===65279||(u[v++]=E):E<65536||E>1114111||(u[v++]=E)),this.interim.fill(0)}const a=m-4;let f=h;for(;f<m;){for(;!(!(f<a)||128&(d=n[f])||128&(g=n[f+1])||128&(y=n[f+2])||128&(k=n[f+3]));)u[v++]=d,u[v++]=g,u[v++]=y,u[v++]=k,f+=4;if(d=n[f++],d<128)u[v++]=d;else if((224&d)==192){if(f>=m)return this.interim[0]=d,v;if(g=n[f++],(192&g)!=128){f--;continue}if(o=(31&d)<<6|63&g,o<128){f--;continue}u[v++]=o}else if((240&d)==224){if(f>=m)return this.interim[0]=d,v;if(g=n[f++],(192&g)!=128){f--;continue}if(f>=m)return this.interim[0]=d,this.interim[1]=g,v;if(y=n[f++],(192&y)!=128){f--;continue}if(o=(15&d)<<12|(63&g)<<6|63&y,o<2048||o>=55296&&o<=57343||o===65279)continue;u[v++]=o}else if((248&d)==240){if(f>=m)return this.interim[0]=d,v;if(g=n[f++],(192&g)!=128){f--;continue}if(f>=m)return this.interim[0]=d,this.interim[1]=g,v;if(y=n[f++],(192&y)!=128){f--;continue}if(f>=m)return this.interim[0]=d,this.interim[1]=g,this.interim[2]=y,v;if(k=n[f++],(192&k)!=128){f--;continue}if(o=(7&d)<<18|(63&g)<<12|(63&y)<<6|63&k,o<65536||o>1114111)continue;u[v++]=o}}return v}}},225:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const u=n(1480),m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;i.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let y=0;y<m.length;++y)g.fill(0,m[y][0],m[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?g[y]:function(k,v){let o,h=0,a=v.length-1;if(k<v[0][0]||k>v[a][1])return!1;for(;a>=h;)if(o=h+a>>1,k>v[o][1])h=o+1;else{if(!(k<v[o][0]))return!0;a=o-1}return!1}(y,d)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,k){let v=this.wcwidth(y),o=v===0&&k!==0;if(o){const h=u.UnicodeService.extractWidth(k);h===0?o=!1:h>v&&(v=h)}return u.UnicodeService.createPropertyValue(0,v,o)}}},5981:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=n(8460),m=n(844);class d extends m.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k)}_innerWrite(y=0,k=!0){const v=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],h=this._action(o,k);if(h){const f=b=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(v,b);return void h.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(f)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=d},5941:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function m(d,g){const y=d.toString(16),k=y.length<2?"0"+y:y;switch(g){case 4:return y[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}i.parseColor=function(d){if(!d)return;let g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const y=n.exec(g);if(y){const k=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/k*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/k*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/k*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),u.exec(g)&&[3,6,9,12].includes(g.length))){const y=g.length/3,k=[0,0,0];for(let v=0;v<3;++v){const o=parseInt(g.slice(y*v,y*v+y),16);k[v]=y===1?o<<4:y===2?o:y===3?o>>4:o>>8}return k}},i.toRgbString=function(d,g=16){const[y,k,v]=d;return`rgb:${m(y,g)}/${m(k,g)}/${m(v,g)}`}},5770:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=n(482),m=n(8742),d=n(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(k,v){this._handlers[k]===void 0&&(this._handlers[k]=[]);const o=this._handlers[k];return o.push(v),{dispose:()=>{const h=o.indexOf(v);h!==-1&&o.splice(h,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(k,v){if(this.reset(),this._ident=k,this._active=this._handlers[k]||g,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(k,v,o){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(k,v,o);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(k,v,o))}unhook(k,v=!0){if(this._active.length){let o=!1,h=this._active.length-1,a=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,o=v,a=this._stack.fallThrough,this._stack.paused=!1),!a&&o===!1){for(;h>=0&&(o=this._active[h].unhook(k),o!==!0);h--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,o;h--}for(;h>=0;h--)if(o=this._active[h].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",k);this._active=g,this._ident=0}};const y=new m.Params;y.addParam(0),i.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=y,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():y,this._data="",this._hitLimit=!1}put(k,v,o){this._hitLimit||(this._data+=(0,u.utf32ToString)(k,v,o),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let v=!1;if(this._hitLimit)v=!1;else if(k&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(o=>(this._params=y,this._data="",this._hitLimit=!1,o));return this._params=y,this._data="",this._hitLimit=!1,v}}},2015:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=n(844),m=n(8742),d=n(6242),g=n(6351);class y{constructor(h){this.table=new Uint8Array(h)}setDefault(h,a){this.table.fill(h<<4|a)}add(h,a,f,b){this.table[a<<8|h]=f<<4|b}addMany(h,a,f,b){for(let E=0;E<h.length;E++)this.table[a<<8|h[E]]=f<<4|b}}i.TransitionTable=y;const k=160;i.VT500_TRANSITION_TABLE=function(){const o=new y(4095),h=Array.apply(null,Array(256)).map((x,S)=>S),a=(x,S)=>h.slice(x,S),f=a(32,127),b=a(0,24);b.push(25),b.push.apply(b,a(28,32));const E=a(0,14);let C;for(C in o.setDefault(1,0),o.addMany(f,0,2,0),E)o.addMany([24,26,153,154],C,3,0),o.addMany(a(128,144),C,3,0),o.addMany(a(144,152),C,3,0),o.add(156,C,0,0),o.add(27,C,11,1),o.add(157,C,4,8),o.addMany([152,158,159],C,0,7),o.add(155,C,11,3),o.add(144,C,11,9);return o.addMany(b,0,3,0),o.addMany(b,1,3,1),o.add(127,1,0,1),o.addMany(b,8,0,8),o.addMany(b,3,3,3),o.add(127,3,0,3),o.addMany(b,4,3,4),o.add(127,4,0,4),o.addMany(b,6,3,6),o.addMany(b,5,3,5),o.add(127,5,0,5),o.addMany(b,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(f,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(a(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(f,7,0,7),o.addMany(b,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(a(64,127),3,7,0),o.addMany(a(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(a(48,60),4,8,4),o.addMany(a(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(a(32,64),6,0,6),o.add(127,6,0,6),o.addMany(a(64,127),6,0,0),o.addMany(a(32,48),3,9,5),o.addMany(a(32,48),5,9,5),o.addMany(a(48,64),5,0,6),o.addMany(a(64,127),5,7,0),o.addMany(a(32,48),4,9,5),o.addMany(a(32,48),1,9,2),o.addMany(a(32,48),2,9,2),o.addMany(a(48,127),2,10,0),o.addMany(a(48,80),1,10,0),o.addMany(a(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(a(96,127),1,10,0),o.add(80,1,11,9),o.addMany(b,9,0,9),o.add(127,9,0,9),o.addMany(a(28,32),9,0,9),o.addMany(a(32,48),9,9,12),o.addMany(a(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(b,11,0,11),o.addMany(a(32,128),11,0,11),o.addMany(a(28,32),11,0,11),o.addMany(b,10,0,10),o.add(127,10,0,10),o.addMany(a(28,32),10,0,10),o.addMany(a(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(a(32,48),10,9,12),o.addMany(b,12,0,12),o.add(127,12,0,12),o.addMany(a(28,32),12,0,12),o.addMany(a(32,48),12,9,12),o.addMany(a(48,64),12,0,11),o.addMany(a(64,127),12,12,13),o.addMany(a(64,127),10,12,13),o.addMany(a(64,127),9,12,13),o.addMany(b,13,13,13),o.addMany(f,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(k,0,2,0),o.add(k,8,5,8),o.add(k,6,0,6),o.add(k,11,0,11),o.add(k,13,13,13),o}();class v extends u.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(a,f,b)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,f)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,a=[64,126]){let f=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(f=h.prefix.charCodeAt(0),f&&60>f||f>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let E=0;E<h.intermediates.length;++E){const C=h.intermediates.charCodeAt(E);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");f<<=8,f|=C}}if(h.final.length!==1)throw new Error("final must be a single byte");const b=h.final.charCodeAt(0);if(a[0]>b||b>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return f<<=8,f|=b,f}identToString(h){const a=[];for(;h;)a.push(String.fromCharCode(255&h)),h>>=8;return a.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,a){const f=this._identifier(h,[48,126]);this._escHandlers[f]===void 0&&(this._escHandlers[f]=[]);const b=this._escHandlers[f];return b.push(a),{dispose:()=>{const E=b.indexOf(a);E!==-1&&b.splice(E,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,a){this._executeHandlers[h.charCodeAt(0)]=a}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,a){const f=this._identifier(h);this._csiHandlers[f]===void 0&&(this._csiHandlers[f]=[]);const b=this._csiHandlers[f];return b.push(a),{dispose:()=>{const E=b.indexOf(a);E!==-1&&b.splice(E,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,a){return this._dcsParser.registerHandler(this._identifier(h),a)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,a){return this._oscParser.registerHandler(h,a)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,a,f,b,E){this._parseStack.state=h,this._parseStack.handlers=a,this._parseStack.handlerPos=f,this._parseStack.transition=b,this._parseStack.chunkPos=E}parse(h,a,f){let b,E=0,C=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(f===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let M=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(f===!1&&M>-1){for(;M>=0&&(b=S[M](this._params),b!==!0);M--)if(b instanceof Promise)return this._parseStack.handlerPos=M,b}this._parseStack.handlers=[];break;case 4:if(f===!1&&M>-1){for(;M>=0&&(b=S[M](),b!==!0);M--)if(b instanceof Promise)return this._parseStack.handlerPos=M,b}this._parseStack.handlers=[];break;case 6:if(E=h[this._parseStack.chunkPos],b=this._dcsParser.unhook(E!==24&&E!==26,f),b)return b;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(E=h[this._parseStack.chunkPos],b=this._oscParser.end(E!==24&&E!==26,f),b)return b;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=x;S<a;++S){switch(E=h[S],C=this._transitions.table[this.currentState<<8|(E<160?E:k)],C>>4){case 2:for(let A=S+1;;++A){if(A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=a||(E=h[A])<32||E>126&&E<k){this._printHandler(h,S,A),S=A-1;break}}break;case 3:this._executeHandlers[E]?this._executeHandlers[E]():this._executeHandlerFb(E),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:E,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const M=this._csiHandlers[this._collect<<8|E];let T=M?M.length-1:-1;for(;T>=0&&(b=M[T](this._params),b!==!0);T--)if(b instanceof Promise)return this._preserveStack(3,M,T,C,S),b;T<0&&this._csiHandlerFb(this._collect<<8|E,this._params),this.precedingJoinState=0;break;case 8:do switch(E){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(E-48)}while(++S<a&&(E=h[S])>47&&E<60);S--;break;case 9:this._collect<<=8,this._collect|=E;break;case 10:const R=this._escHandlers[this._collect<<8|E];let P=R?R.length-1:-1;for(;P>=0&&(b=R[P](),b!==!0);P--)if(b instanceof Promise)return this._preserveStack(4,R,P,C,S),b;P<0&&this._escHandlerFb(this._collect<<8|E),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|E,this._params);break;case 13:for(let A=S+1;;++A)if(A>=a||(E=h[A])===24||E===26||E===27||E>127&&E<k){this._dcsParser.put(h,S,A),S=A-1;break}break;case 14:if(b=this._dcsParser.unhook(E!==24&&E!==26),b)return this._preserveStack(6,[],0,C,S),b;E===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=S+1;;A++)if(A>=a||(E=h[A])<32||E>127&&E<k){this._oscParser.put(h,S,A),S=A-1;break}break;case 6:if(b=this._oscParser.end(E!==24&&E!==26),b)return this._preserveStack(5,[],0,C,S),b;E===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}i.EscapeSequenceParser=v},6242:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=n(5770),m=n(482),d=[];i.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,y){this._handlers[g]===void 0&&(this._handlers[g]=[]);const k=this._handlers[g];return k.push(y),{dispose:()=>{const v=k.indexOf(y);v!==-1&&k.splice(v,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,y,k){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(g,y,k);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(g,y,k))}start(){this.reset(),this._state=1}put(g,y,k){if(this._state!==3){if(this._state===1)for(;y<k;){const v=g[y++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&k-y>0&&this._put(g,y,k)}}end(g,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,v=this._active.length-1,o=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,k=y,o=this._stack.fallThrough,this._stack.paused=!1),!o&&k===!1){for(;v>=0&&(k=this._active[v].end(g),k!==!0);v--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,k;v--}for(;v>=0;v--)if(k=this._active[v].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",g);this._active=d,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,y,k){this._hitLimit||(this._data+=(0,m.utf32ToString)(g,y,k),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let y=!1;if(this._hitLimit)y=!1;else if(g&&(y=this._handler(this._data),y instanceof Promise))return y.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,y}}},8742:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class u{static fromArray(d){const g=new u;if(!d.length)return g;for(let y=Array.isArray(d[0])?1:0;y<d.length;++y){const k=d[y];if(Array.isArray(k))for(let v=0;v<k.length;++v)g.addSubParam(k[v]);else g.addParam(k)}return g}constructor(d=32,g=32){if(this.maxLength=d,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new u(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let g=0;g<this.length;++g){d.push(this.params[g]);const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&d.push(Array.prototype.slice.call(this._subParams,y,k))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>n?n:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>n?n:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const g=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];return y-g>0?this._subParams.subarray(g,y):null}getSubParamsAll(){const d={};for(let g=0;g<this.length;++g){const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&(d[g]=this._subParams.slice(y,k))}return d}addDigit(d){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,k=y[g-1];y[g-1]=~k?Math.min(10*k+d,n):d}}i.Params=u},5741:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,u){const m={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(m),u.dispose=()=>this._wrappedAddonDispose(m),u.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let u=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===n){u=m;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(u,1)}}},8771:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=n(3785),m=n(511);i.BufferApiView=class{constructor(d,g){this._buffer=d,this.type=g}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const g=this._buffer.lines.get(d);if(g)return new u.BufferLineApiView(g)}getNullCell(){return new m.CellData}}},3785:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=n(511);i.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,d){if(!(m<0||m>=this._line.length))return d?(this._line.loadCell(m,d),d):this._line.loadCell(m,new u.CellData)}translateToString(m,d,g){return this._line.translateToString(m,d,g)}}},8285:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=n(8771),m=n(8460),d=n(844);class g extends d.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,u){return this._core.registerCsiHandler(n,m=>u(m.toArray()))}addCsiHandler(n,u){return this.registerCsiHandler(n,u)}registerDcsHandler(n,u){return this._core.registerDcsHandler(n,(m,d)=>u(m,d.toArray()))}addDcsHandler(n,u){return this.registerDcsHandler(n,u)}registerEscHandler(n,u){return this._core.registerEscHandler(n,u)}addEscHandler(n,u){return this.registerEscHandler(n,u)}registerOscHandler(n,u){return this._core.registerOscHandler(n,u)}addOscHandler(n,u){return this.registerOscHandler(n,u)}}},7090:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(p,i,n){var u=this&&this.__decorate||function(o,h,a,f){var b,E=arguments.length,C=E<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,a):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,h,a,f);else for(var x=o.length-1;x>=0;x--)(b=o[x])&&(C=(E<3?b(C):E>3?b(h,a,C):b(h,a))||C);return E>3&&C&&Object.defineProperty(h,a,C),C},m=this&&this.__param||function(o,h){return function(a,f){h(a,f,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const d=n(8460),g=n(844),y=n(5295),k=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(o,this))}resize(o,h){this.cols=o,this.rows=h,this.buffers.resize(o,h),this._onResize.fire({cols:o,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,h=!1){const a=this.buffer;let f;f=this._cachedBlankLine,f&&f.length===this.cols&&f.getFg(0)===o.fg&&f.getBg(0)===o.bg||(f=a.getBlankLine(o,h),this._cachedBlankLine=f),f.isWrapped=h;const b=a.ybase+a.scrollTop,E=a.ybase+a.scrollBottom;if(a.scrollTop===0){const C=a.lines.isFull;E===a.lines.length-1?C?a.lines.recycle().copyFrom(f):a.lines.push(f.clone()):a.lines.splice(E+1,0,f.clone()),C?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const C=E-b+1;a.lines.shiftElements(b+1,C-1,-1),a.lines.set(E,f.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(o,h,a){const f=this.buffer;if(o<0){if(f.ydisp===0)return;this.isUserScrolling=!0}else o+f.ydisp>=f.ybase&&(this.isUserScrolling=!1);const b=f.ydisp;f.ydisp=Math.max(Math.min(f.ydisp+o,f.ybase),0),b!==f.ydisp&&(h||this._onScroll.fire(f.ydisp))}};i.BufferService=v=u([m(0,k.IOptionsService)],v)},7994:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,u){this._charsets[n]=u,this.glevel===n&&(this.charset=u)}}},1753:function(p,i,n){var u=this&&this.__decorate||function(f,b,E,C){var x,S=arguments.length,M=S<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(f,b,E,C);else for(var T=f.length-1;T>=0;T--)(x=f[T])&&(M=(S<3?x(M):S>3?x(b,E,M):x(b,E))||M);return S>3&&M&&Object.defineProperty(b,E,M),M},m=this&&this.__param||function(f,b){return function(E,C){b(E,C,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const d=n(2585),g=n(8460),y=n(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:f=>f.button!==4&&f.action===1&&(f.ctrl=!1,f.alt=!1,f.shift=!1,!0)},VT200:{events:19,restrict:f=>f.action!==32},DRAG:{events:23,restrict:f=>f.action!==32||f.button!==3},ANY:{events:31,restrict:f=>!0}};function v(f,b){let E=(f.ctrl?16:0)|(f.shift?4:0)|(f.alt?8:0);return f.button===4?(E|=64,E|=f.action):(E|=3&f.button,4&f.button&&(E|=64),8&f.button&&(E|=128),f.action===32?E|=32:f.action!==0||b||(E|=3)),E}const o=String.fromCharCode,h={DEFAULT:f=>{const b=[v(f,!1)+32,f.col+32,f.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${o(b[0])}${o(b[1])}${o(b[2])}`},SGR:f=>{const b=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${v(f,!0)};${f.col};${f.row}${b}`},SGR_PIXELS:f=>{const b=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${v(f,!0)};${f.x};${f.y}${b}`}};let a=i.CoreMouseService=class extends y.Disposable{constructor(f,b){super(),this._bufferService=f,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const E of Object.keys(k))this.addProtocol(E,k[E]);for(const E of Object.keys(h))this.addEncoding(E,h[E]);this.reset()}addProtocol(f,b){this._protocols[f]=b}addEncoding(f,b){this._encodings[f]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(f){if(!this._protocols[f])throw new Error(`unknown protocol "${f}"`);this._activeProtocol=f,this._onProtocolChange.fire(this._protocols[f].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(f){if(!this._encodings[f])throw new Error(`unknown encoding "${f}"`);this._activeEncoding=f}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(f){if(f.col<0||f.col>=this._bufferService.cols||f.row<0||f.row>=this._bufferService.rows||f.button===4&&f.action===32||f.button===3&&f.action!==32||f.button!==4&&(f.action===2||f.action===3)||(f.col++,f.row++,f.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,f,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(f))return!1;const b=this._encodings[this._activeEncoding](f);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=f,!0}explainEvents(f){return{down:!!(1&f),up:!!(2&f),drag:!!(4&f),move:!!(8&f),wheel:!!(16&f)}}_equalEvents(f,b,E){if(E){if(f.x!==b.x||f.y!==b.y)return!1}else if(f.col!==b.col||f.row!==b.row)return!1;return f.button===b.button&&f.action===b.action&&f.ctrl===b.ctrl&&f.alt===b.alt&&f.shift===b.shift}};i.CoreMouseService=a=u([m(0,d.IBufferService),m(1,d.ICoreService)],a)},6975:function(p,i,n){var u=this&&this.__decorate||function(a,f,b,E){var C,x=arguments.length,S=x<3?f:E===null?E=Object.getOwnPropertyDescriptor(f,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,f,b,E);else for(var M=a.length-1;M>=0;M--)(C=a[M])&&(S=(x<3?C(S):x>3?C(f,b,S):C(f,b))||S);return x>3&&S&&Object.defineProperty(f,b,S),S},m=this&&this.__param||function(a,f){return function(b,E){f(b,E,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const d=n(1439),g=n(8460),y=n(844),k=n(2585),v=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=i.CoreService=class extends y.Disposable{constructor(a,f,b){super(),this._bufferService=a,this._logService=f,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(o)}reset(){this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(o)}triggerDataEvent(a,f=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;f&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),f&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(E=>E.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(f=>f.charCodeAt(0))),this._onBinary.fire(a))}};i.CoreService=h=u([m(0,k.IBufferService),m(1,k.ILogService),m(2,k.IOptionsService)],h)},9074:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=n(8055),m=n(8460),d=n(844),g=n(6106);let y=0,k=0;class v extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(a=>a==null?void 0:a.marker.line),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const f=new o(a);if(f){const b=f.marker.onDispose(()=>f.dispose());f.onDispose(()=>{f&&(this._decorations.delete(f)&&this._onDecorationRemoved.fire(f),b.dispose())}),this._decorations.insert(f),this._onDecorationRegistered.fire(f)}return f}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,f,b){let E=0,C=0;for(const x of this._decorations.getKeyIterator(f))E=x.options.x??0,C=E+(x.options.width??1),a>=E&&a<C&&(!b||(x.options.layer??"bottom")===b)&&(yield x)}forEachDecorationAtCell(a,f,b,E){this._decorations.forEachByKey(f,C=>{y=C.options.x??0,k=y+(C.options.width??1),a>=y&&a<k&&(!b||(C.options.layer??"bottom")===b)&&E(C)})}}i.DecorationService=v;class o extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=n(2585),m=n(8343);class d{constructor(...y){this._entries=new Map;for(const[k,v]of y)this.set(k,v)}set(y,k){const v=this._entries.get(y);return this._entries.set(y,k),v}forEach(y){for(const[k,v]of this._entries.entries())y(k,v)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}i.ServiceCollection=d,i.InstantiationService=class{constructor(){this._services=new d,this._services.set(u.IInstantiationService,this)}setService(g,y){this._services.set(g,y)}getService(g){return this._services.get(g)}createInstance(g,...y){const k=(0,m.getServiceDependencies)(g).sort((h,a)=>h.index-a.index),v=[];for(const h of k){const a=this._services.get(h.id);if(!a)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${h.id}.`);v.push(a)}const o=k.length>0?k[0].index:y.length;if(y.length!==o)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${o+1} conflicts with ${y.length} static arguments`);return new g(...y,...v)}}},7866:function(p,i,n){var u=this&&this.__decorate||function(o,h,a,f){var b,E=arguments.length,C=E<3?h:f===null?f=Object.getOwnPropertyDescriptor(h,a):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,h,a,f);else for(var x=o.length-1;x>=0;x--)(b=o[x])&&(C=(E<3?b(C):E>3?b(h,a,C):b(h,a))||C);return E>3&&C&&Object.defineProperty(h,a,C),C},m=this&&this.__param||function(o,h){return function(a,f){h(a,f,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const d=n(844),g=n(2585),y={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let k,v=i.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,a){this._evalLazyOptionalParams(a),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...a)}trace(o,...h){var a;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.trace.bind(this._optionsService.options.logger))??console.log,o,h)}debug(o,...h){var a;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.debug.bind(this._optionsService.options.logger))??console.log,o,h)}info(o,...h){var a;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.info.bind(this._optionsService.options.logger))??console.info,o,h)}warn(o,...h){var a;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.warn.bind(this._optionsService.options.logger))??console.warn,o,h)}error(o,...h){var a;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((a=this._optionsService.options.logger)==null?void 0:a.error.bind(this._optionsService.options.logger))??console.error,o,h)}};i.LogService=v=u([m(0,g.IOptionsService)],v),i.setTraceLogger=function(o){k=o},i.traceCall=function(o,h,a){if(typeof a.value!="function")throw new Error("not supported");const f=a.value;a.value=function(...b){if(k.logLevel!==g.LogLevelEnum.TRACE)return f.apply(this,b);k.trace(`GlyphRenderer#${f.name}(${b.map(C=>JSON.stringify(C)).join(", ")})`);const E=f.apply(this,b);return k.trace(`GlyphRenderer#${f.name} return`,E),E}}},7302:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=n(8460),m=n(844),d=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends m.Disposable{constructor(v){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o={...i.DEFAULT_OPTIONS};for(const h in v)if(h in o)try{const a=v[h];o[h]=this._sanitizeAndValidateOption(h,a)}catch(a){console.error(a)}this.rawOptions=o,this.options={...o},this._setupOptions(),this.register((0,m.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,o){return this.onOptionChange(h=>{h===v&&o(this.rawOptions[v])})}onMultipleOptionChange(v,o){return this.onOptionChange(h=>{v.indexOf(h)!==-1&&o()})}_setupOptions(){const v=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},o=(h,a)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);a=this._sanitizeAndValidateOption(h,a),this.rawOptions[h]!==a&&(this.rawOptions[h]=a,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const a={get:v.bind(this,h),set:o.bind(this,h)};Object.defineProperty(this.options,h,a)}}_sanitizeAndValidateOption(v,o){switch(v){case"cursorStyle":if(o||(o=i.DEFAULT_OPTIONS[v]),!function(h){return h==="block"||h==="underline"||h==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${v}`);break;case"wordSeparator":o||(o=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=g.includes(o)?o:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${v} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${v} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}i.OptionsService=y},2660:function(p,i,n){var u=this&&this.__decorate||function(y,k,v,o){var h,a=arguments.length,f=a<3?k:o===null?o=Object.getOwnPropertyDescriptor(k,v):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(y,k,v,o);else for(var b=y.length-1;b>=0;b--)(h=y[b])&&(f=(a<3?h(f):a>3?h(k,v,f):h(k,v))||f);return a>3&&f&&Object.defineProperty(k,v,f),f},m=this&&this.__param||function(y,k){return function(v,o){k(v,o,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const d=n(2585);let g=i.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const k=this._bufferService.buffer;if(y.id===void 0){const b=k.addMarker(k.ybase+k.y),E={data:y,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(E,b)),this._dataByLinkId.set(E.id,E),E.id}const v=y,o=this._getEntryIdKey(v),h=this._entriesWithId.get(o);if(h)return this.addLineToLink(h.id,k.ybase+k.y),h.id;const a=k.addMarker(k.ybase+k.y),f={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(f,a)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(y,k){const v=this._dataByLinkId.get(y);if(v&&v.lines.every(o=>o.line!==k)){const o=this._bufferService.buffer.addMarker(k);v.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(v,o))}}getLinkData(y){var k;return(k=this._dataByLinkId.get(y))==null?void 0:k.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,k){const v=y.lines.indexOf(k);v!==-1&&(y.lines.splice(v,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};i.OscLinkService=g=u([m(0,d.IBufferService)],g)},8343:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const n="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(m){return m[u]||[]},i.createDecorator=function(m){if(i.serviceRegistry.has(m))return i.serviceRegistry.get(m);const d=function(g,y,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,o,h){o[n]===o?o[u].push({id:v,index:h}):(o[u]=[{id:v,index:h}],o[n]=o)})(d,g,k)};return d.toString=()=>m,i.serviceRegistry.set(m,d),d}},2585:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=n(8343);var m;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(m||(i.LogLevelEnum=m={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(p,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=n(8460),m=n(225);class d{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,k,v=!1){return(16777215&y)<<3|(3&k)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const y=new m.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let k=0,v=0;const o=y.length;for(let h=0;h<o;++h){let a=y.charCodeAt(h);if(55296<=a&&a<=56319){if(++h>=o)return k+this.wcwidth(a);const E=y.charCodeAt(h);56320<=E&&E<=57343?a=1024*(a-55296)+E-56320+65536:k+=this.wcwidth(E)}const f=this.charProperties(a,v);let b=d.extractWidth(f);d.extractShouldJoin(f)&&(b-=d.extractWidth(v)),k+=b,v=f}return k}charProperties(y,k){return this._activeProvider.charProperties(y,k)}}i.UnicodeService=d}},l={};function _(p){var i=l[p];if(i!==void 0)return i.exports;var n=l[p]={exports:{}};return t[p].call(n.exports,n,n.exports,_),n.exports}var w={};return(()=>{var p=w;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const i=_(9042),n=_(3236),u=_(844),m=_(5741),d=_(8285),g=_(7975),y=_(7090),k=["cols","rows"];class v extends u.Disposable{constructor(h){super(),this._core=this.register(new n.Terminal(h)),this._addonManager=this.register(new m.AddonManager),this._publicOptions={...this._core.options};const a=b=>this._core.options[b],f=(b,E)=>{this._checkReadonlyOptions(b),this._core.options[b]=E};for(const b in this._core.options){const E={get:a.bind(this,b),set:f.bind(this,b)};Object.defineProperty(this._publicOptions,b,E)}}_checkReadonlyOptions(h){if(k.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const a in h)this._publicOptions[a]=h[a]}blur(){this._core.blur()}focus(){this._core.focus()}input(h,a=!0){this._core.input(h,a)}resize(h,a){this._verifyIntegers(h,a),this._core.resize(h,a)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}attachCustomWheelEventHandler(h){this._core.attachCustomWheelEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){return this._checkProposedApi(),this._verifyPositiveIntegers(h.x??0,h.width??0,h.height??0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,a,f){this._verifyIntegers(h,a,f),this._core.select(h,a,f)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,a){this._verifyIntegers(h,a),this._core.selectLines(h,a)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,a){this._core.write(h,a)}writeln(h,a){this._core.write(h),this._core.write(`\r
`,a)}paste(h){this._core.paste(h)}refresh(h,a){this._verifyIntegers(h,a),this._core.refresh(h,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(const a of h)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const a of h)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}p.Terminal=v})(),w})())})(an);var _o=an.exports,hn={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(self,()=>(()=>{var t={};return(()=>{var l=t;Object.defineProperty(l,"__esModule",{value:!0}),l.FitAddon=void 0,l.FitAddon=class{activate(_){this._terminal=_}dispose(){}fit(){const _=this.proposeDimensions();if(!_||!this._terminal||isNaN(_.cols)||isNaN(_.rows))return;const w=this._terminal._core;this._terminal.rows===_.rows&&this._terminal.cols===_.cols||(w._renderService.clear(),this._terminal.resize(_.cols,_.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const _=this._terminal._core,w=_._renderService.dimensions;if(w.css.cell.width===0||w.css.cell.height===0)return;const p=this._terminal.options.scrollback===0?0:_.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),u=Math.max(0,parseInt(i.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),d=n-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),g=u-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(g/w.css.cell.width)),rows:Math.max(1,Math.floor(d/w.css.cell.height))}}}})(),t})())})(hn);var po=hn.exports,dn={exports:{}};(function(r,e){(function(t,l){r.exports=l()})(self,()=>(()=>{var t={6:(p,i)=>{function n(m){try{const d=new URL(m),g=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return m.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(m,d,g,y={}){this._terminal=m,this._regex=d,this._handler=g,this._options=y}provideLinks(m,d){const g=u.computeLink(m,this._regex,this._terminal,this._handler);d(this._addCallbacks(g))}_addCallbacks(m){return m.map(d=>(d.leave=this._options.leave,d.hover=(g,y)=>{if(this._options.hover){const{range:k}=d;this._options.hover(g,y,k)}},d))}};class u{static computeLink(d,g,y,k){const v=new RegExp(g.source,(g.flags||"")+"g"),[o,h]=u._getWindowedLineStrings(d-1,y),a=o.join("");let f;const b=[];for(;f=v.exec(a);){const E=f[0];if(!n(E))continue;const[C,x]=u._mapStrIdx(y,h,0,f.index),[S,M]=u._mapStrIdx(y,C,x,E.length);if(C===-1||x===-1||S===-1||M===-1)continue;const T={start:{x:x+1,y:C+1},end:{x:M,y:S+1}};b.push({range:T,text:E,activate:k})}return b}static _getWindowedLineStrings(d,g){let y,k=d,v=d,o=0,h="";const a=[];if(y=g.buffer.active.getLine(d)){const f=y.translateToString(!0);if(y.isWrapped&&f[0]!==" "){for(o=0;(y=g.buffer.active.getLine(--k))&&o<2048&&(h=y.translateToString(!0),o+=h.length,a.push(h),y.isWrapped&&h.indexOf(" ")===-1););a.reverse()}for(a.push(f),o=0;(y=g.buffer.active.getLine(++v))&&y.isWrapped&&o<2048&&(h=y.translateToString(!0),o+=h.length,a.push(h),h.indexOf(" ")===-1););}return[a,k]}static _mapStrIdx(d,g,y,k){const v=d.buffer.active,o=v.getNullCell();let h=y;for(;k;){const a=v.getLine(g);if(!a)return[-1,-1];for(let f=h;f<a.length;++f){a.getCell(f,o);const b=o.getChars();if(o.getWidth()&&(k-=b.length||1,f===a.length-1&&b==="")){const E=v.getLine(g+1);E&&E.isWrapped&&(E.getCell(0,o),o.getWidth()===2&&(k+=1))}if(k<0)return[g,f]}g++,h=0}return[g,h]}}i.LinkComputer=u}},l={};function _(p){var i=l[p];if(i!==void 0)return i.exports;var n=l[p]={exports:{}};return t[p](n,n.exports,_),n.exports}var w={};return(()=>{var p=w;Object.defineProperty(p,"__esModule",{value:!0}),p.WebLinksAddon=void 0;const i=_(6),n=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(m,d){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}p.WebLinksAddon=class{constructor(m=u,d={}){this._handler=m,this._options=d}activate(m){this._terminal=m;const d=this._options,g=d.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,g,this._handler,d))}dispose(){var m;(m=this._linkProvider)==null||m.dispose()}}})(),w})())})(dn);var go=dn.exports;function di(r){let e,t,l,_,w,p,i,n,u,m,d,g=r[1].name+"",y,k,v,o=gi(r[1].size)+"",h,a,f,b,E,C,x,S=r[3]&&ui(r),M=r[2]==="pending"&&fi(r),T=r[2]==="accepting"&&_i(),R=r[2]==="completed"&&pi(r);return{c(){e=L("div"),t=L("div"),l=L("div"),l.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',_=O(),w=L("div"),p=L("div"),i=L("div"),n=L("span"),n.textContent="📄",u=O(),m=L("div"),d=L("span"),y=Z(g),k=O(),v=L("span"),h=Z(o),a=Z(" 字节"),f=O(),b=L("div"),S&&S.c(),E=O(),M&&M.c(),C=O(),T&&T.c(),x=O(),R&&R.c(),s(l,"class","zmodem-download-header"),s(n,"class","zmodem-download-icon"),s(d,"class","zmodem-download-name"),s(v,"class","zmodem-download-size"),s(m,"class","zmodem-download-details"),s(i,"class","zmodem-download-file"),s(p,"class","zmodem-download-info"),s(b,"class","zmodem-download-actions"),s(w,"class","zmodem-download-body"),s(t,"class","zmodem-download-content"),s(e,"class","zmodem-download-modal")},m(P,A){V(P,e,A),c(e,t),c(t,l),c(t,_),c(t,w),c(w,p),c(p,i),c(i,n),c(i,u),c(i,m),c(m,d),c(d,y),c(m,k),c(m,v),c(v,h),c(v,a),c(w,f),c(w,b),S&&S.m(b,null),c(b,E),M&&M.m(b,null),c(b,C),T&&T.m(b,null),c(b,x),R&&R.m(b,null)},p(P,A){A[0]&2&&g!==(g=P[1].name+"")&&de(y,g),A[0]&2&&o!==(o=gi(P[1].size)+"")&&de(h,o),P[3]?S?S.p(P,A):(S=ui(P),S.c(),S.m(b,E)):S&&(S.d(1),S=null),P[2]==="pending"?M?M.p(P,A):(M=fi(P),M.c(),M.m(b,C)):M&&(M.d(1),M=null),P[2]==="accepting"?T||(T=_i(),T.c(),T.m(b,x)):T&&(T.d(1),T=null),P[2]==="completed"?R?R.p(P,A):(R=pi(P),R.c(),R.m(b,null)):R&&(R.d(1),R=null)},d(P){P&&N(e),S&&S.d(),M&&M.d(),T&&T.d(),R&&R.d()}}}function ui(r){let e,t,l;return{c(){e=L("div"),t=Z("❌ "),l=Z(r[3]),s(e,"class","zmodem-error-message")},m(_,w){V(_,e,w),c(e,t),c(e,l)},p(_,w){w[0]&8&&de(l,_[3])},d(_){_&&N(e)}}}function fi(r){let e,t,l,_,w,p,i,n;return{c(){e=L("p"),e.textContent="服务器正在发送文件，是否接收？",t=O(),l=L("div"),_=L("button"),_.textContent="拒绝",w=O(),p=L("button"),p.textContent="接收文件",s(e,"class","zmodem-download-prompt"),s(_,"class","zmodem-download-btn zmodem-btn-reject"),s(p,"class","zmodem-download-btn zmodem-btn-accept"),s(l,"class","zmodem-download-buttons")},m(u,m){V(u,e,m),V(u,t,m),V(u,l,m),c(l,_),c(l,w),c(l,p),i||(n=[$(_,"click",r[6]),$(p,"click",r[5])],i=!0)},p:Ae,d(u){u&&(N(e),N(t),N(l)),i=!1,Pe(n)}}}function _i(r){let e;return{c(){e=L("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',s(e,"class","zmodem-downloading")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function pi(r){let e,t,l,_,w,p=(r[4]||r[1].name)+"",i;return{c(){e=L("div"),t=L("span"),t.textContent="✓",l=O(),_=L("span"),w=Z("文件接收完成，已保存到："),i=Z(p),s(t,"class","zmodem-success-icon"),s(e,"class","zmodem-completed")},m(n,u){V(n,e,u),c(e,t),c(e,l),c(e,_),c(_,w),c(_,i)},p(n,u){u[0]&18&&p!==(p=(n[4]||n[1].name)+"")&&de(i,p)},d(n){n&&N(e)}}}function mo(r){let e,t,l,_=r[1]&&di(r);return{c(){e=L("div"),e.innerHTML="",t=O(),_&&_.c(),l=wt(),s(e,"class","terminal-container svelte-14g4vw6")},m(w,p){V(w,e,p),r[16](e),V(w,t,p),_&&_.m(w,p),V(w,l,p)},p(w,p){w[1]?_?_.p(w,p):(_=di(w),_.c(),_.m(l.parentNode,l)):_&&(_.d(1),_=null)},i:Ae,o:Ae,d(w){w&&(N(e),N(t),N(l)),r[16](null),_&&_.d(w)}}}function vo(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),l=window.URL.createObjectURL(t),_=document.createElement("a");_.href=l,_.download=e,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(l),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function bo(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function yo(r){const e=[];let t=0;for await(const w of r)e.push(w),t+=w.length;const l=new Uint8Array(t);let _=0;for(const w of e)l.set(w,_),_+=w.length;return l}async function wo(r,e){const t=await yo(r),{SaveBinaryFile:l}=window.wailsBindings||{};if(typeof l=="function"){const _=btoa(bo(t));return await l(e,_)}return vo(t,e),null}function gi(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function ko(r,e,t){let{sessionId:l=null}=e,{onData:_=null}=e,{onResize:w=null}=e,{onZModemTransfer:p=null}=e,i,n,u,m=null,d=null,g=null,y=!1,k=null,v=!1,o=null,h="pending",a=null,f=null,b=null,E=Bn(or);const C={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},x={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},S=or.subscribe(J=>{E=J,n&&(n.options.theme=E==="light"?x:C)});ar(async()=>{n=new _o.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:E==="light"?x:C,allowProposedApi:!0,scrollback:1e3,convertEol:!0,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),u=new po.FitAddon,n.loadAddon(u),n.loadAddon(new go.WebLinksAddon),n.open(i),u.fit(),n.attachCustomKeyEventHandler(j=>{if(j.metaKey&&j.key.toLowerCase()==="c"&&!j.shiftKey&&!j.ctrlKey){if(n.hasSelection()){const K=n.getSelection();return navigator.clipboard.writeText(K).catch(Q=>{console.error("Failed to copy:",Q)}),!1}return!0}if(j.ctrlKey&&!j.metaKey&&j.key.toLowerCase()==="c"&&!j.shiftKey){if(n.hasSelection()){const K=n.getSelection();return navigator.clipboard.writeText(K).catch(Q=>{console.error("Failed to copy:",Q)}),!1}return!0}return j.metaKey&&j.key.toLowerCase()==="v"&&!j.shiftKey&&!j.ctrlKey?(j.preventDefault(),navigator.clipboard.readText().then(K=>{K&&_&&l&&_(l,K)}).catch(K=>{console.error("Failed to read clipboard:",K)}),!1):j.ctrlKey&&!j.metaKey&&j.key.toLowerCase()==="v"&&!j.shiftKey?(j.preventDefault(),navigator.clipboard.readText().then(K=>{K&&_&&l&&_(l,K)}).catch(K=>{console.error("Failed to read clipboard:",K)}),!1):!0});try{const j=await ur(()=>import("./index2.js").then(K=>K.i),[]);m=j.default||j,d=new m.Sentry({to_terminal:K=>{n&&n.write(new Uint8Array(K))},sender:K=>{if(l){if(p){p(l,new Uint8Array(K));return}if(_){let Q="";for(let I=0;I<K.length;I++)Q+=String.fromCharCode(K[I]);_(l,Q)}}},on_detect:K=>{if(console.log("ZMODEM detected:",K.type),console.log("Detection object:",K),g=K.confirm(),console.log("ZMODEM confirmed, type:",g.type,"has zsession:",!!g),!g){console.error("ERROR: zsession is null after confirm()");return}v=!0,n&&(n.options.disableStdin=!0),g.type==="receive"?(console.log("Calling handleZModemReceive for download"),P(g)):(console.log("Calling handleZModemSend for upload"),q(g))},on_retract:()=>{console.log("ZMODEM retracted"),g=null,v=!1,n&&(n.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(j){console.error("Failed to initialize ZMODEM:",j)}n.onData(j=>{_&&l&&_(l,j)}),n.onResize(({cols:j,rows:K})=>{w&&l&&w(l,j,K)});const J=new ResizeObserver(()=>{u.fit()});return J.observe(i),()=>{J.disconnect()}}),Mr(()=>{S&&S(),n&&n.dispose()});function M(J){b||(b=document.createElement("div"),b.className="zmodem-progress-modal",b.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${J}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(b))}function T(J,j,K,Q,I){if(!b)return;const B=Math.min(100,Math.round(Q/I*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${K}`,document.getElementById("zmodem-progress-bar").style.width=`${B}%`,document.getElementById("zmodem-progress-text").textContent=`${B}%`,document.getElementById("zmodem-files-progress").textContent=`${J+1} / ${j}`}function R(){b&&(document.body.removeChild(b),b=null)}function P(J){t(1,o=null),k=null,t(2,h="pending"),t(3,a=null),t(4,f=null),J.on("offer",j=>{const K=j.get_details();k=j,t(1,o=K),t(2,h="pending"),t(3,a=null),t(4,f=null)}),J.on("session_end",()=>{k=null,g=null,v=!1,n&&(n.options.disableStdin=!1),h==="accepting"?(t(2,h="completed"),setTimeout(()=>{t(1,o=null),t(2,h="pending"),t(4,f=null)},1500)):(t(1,o=null),t(2,h="pending"),t(4,f=null))}),J.start()}async function A(){if(k){t(2,h="accepting"),t(3,a=null);try{await k.accept();const J=k.get_payloads(),j=k.get_details().name;t(4,f=await wo(J,j)),k=null,t(2,h="completed")}catch(J){console.error("接收文件失败:",J),t(3,a=J.message||String(J)),t(2,h="pending")}}}function z(){k&&k.skip(),k=null,t(1,o=null),t(2,h="pending"),t(3,a=null),t(4,f=null)}async function q(J){console.log("handleZModemSend called, session:",J);const j=document.createElement("input");return j.type="file",j.multiple=!0,new Promise(K=>{j.onchange=async Q=>{const I=Array.from(Q.target.files);if(console.log("Files selected:",I.length,I.map(B=>B.name)),I.length===0){console.log("No files selected, closing session"),J.close(),y=!1,v=!1,n&&(n.options.disableStdin=!1),K();return}try{M(I.length),console.log("Starting to send files...");for(let B=0;B<I.length;B++){const te=I[B],U={name:te.name,size:te.size,mtime:new Date(te.lastModified)};console.log(`Sending file ${B+1}/${I.length}:`,te.name,te.size),await X(J,te,U,B,I.length)}console.log("All files sent, closing session"),await J.close(),setTimeout(()=>{y=!1,R(),v=!1,n&&(n.options.disableStdin=!1),K()},500)}catch(B){console.error("发送文件失败:",B),console.error("Error details:",B.stack),J.close(),y=!1,R(),v=!1,n&&(n.options.disableStdin=!1),K()}},j.click()})}async function X(J,j,K,Q,I){return new Promise((B,te)=>{J.send_offer(K).then(U=>{if(!U){B();return}const ae=new FileReader,ce=8192;ae.onload=he=>{const ee=he.target.result;let oe=0,ue=0;function pe(){if(oe<ee.byteLength){const Be=new Uint8Array(ee,oe,Math.min(ce,ee.byteLength-oe));U.send(Be),oe+=ce,ue+=Be.byteLength,T(Q,I,j.name,ue,j.size),setTimeout(pe,0)}else U.end().then(B).catch(te)}pe()},ae.onerror=()=>{te(new Error("读取文件失败"))},ae.readAsArrayBuffer(j)})})}function ie(J){if(!n)return;let j;if(typeof J=="string"?j=new Uint8Array(J.split("").map(K=>K.charCodeAt(0))):J instanceof Uint8Array?j=J:j=new Uint8Array(J),d&&!y)try{d.consume(j);return}catch(K){console.warn("ZMODEM consume failed:",K),g=null,k=null,v=!1,y=!1,n&&(n.options.disableStdin=!1)}n.write(j)}function G(J){n&&n.writeln(J)}function D(){n&&n.clear()}function H(){n&&n.focus()}function F(){return n?{cols:n.cols,rows:n.rows}:{cols:80,rows:24}}function W(J){lt[J?"unshift":"push"](()=>{i=J,t(0,i)})}return r.$$set=J=>{"sessionId"in J&&t(7,l=J.sessionId),"onData"in J&&t(8,_=J.onData),"onResize"in J&&t(9,w=J.onResize),"onZModemTransfer"in J&&t(10,p=J.onZModemTransfer)},[i,o,h,a,f,A,z,l,_,w,p,ie,G,D,H,F,W]}class So extends _t{constructor(e){super(),ft(this,e,ko,mo,ut,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function mi(r){let e,t;return{c(){e=L("p"),t=Z(r[2]),s(e,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed")},m(l,_){V(l,e,_),c(e,t)},p(l,_){_&4&&de(t,l[2])},d(l){l&&N(e)}}}function Co(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder",r[3]),s(e,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){V(_,e,w),r[18](e),Ce(e,r[10]),t||(l=[$(e,"input",r[19]),$(e,"keydown",r[12])],t=!0)},p(_,w){w&8&&s(e,"placeholder",_[3]),w&1024&&e.value!==_[10]&&Ce(e,_[10])},d(_){_&&N(e),r[18](null),t=!1,Pe(l)}}}function xo(r){let e,t,l;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder",r[3]),s(e,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){V(_,e,w),r[16](e),Ce(e,r[10]),t||(l=[$(e,"input",r[17]),$(e,"keydown",r[12])],t=!0)},p(_,w){w&8&&s(e,"placeholder",_[3]),w&1024&&e.value!==_[10]&&Ce(e,_[10])},d(_){_&&N(e),r[16](null),t=!1,Pe(l)}}}function Eo(r){let e,t,l,_,w,p,i,n,u,m,d,g,y=r[2]&&mi(r);function k(h,a){return h[4]==="password"?xo:Co}let v=k(r),o=v(r);return{c(){e=L("div"),y&&y.c(),t=O(),o.c(),l=O(),_=L("div"),w=L("button"),p=Z(r[7]),i=O(),n=L("button"),u=Z(r[6]),s(w,"type","button"),s(w,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(n,"type","button"),n.disabled=m=!r[5]&&!r[10].trim(),s(n,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(_,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(h,a){V(h,e,a),y&&y.m(e,null),c(e,t),o.m(e,null),c(e,l),c(e,_),c(_,w),c(w,p),c(_,i),c(_,n),c(n,u),d||(g=[$(w,"click",function(){It(r[8])&&r[8].apply(this,arguments)}),$(n,"click",r[11])],d=!0)},p(h,a){r=h,r[2]?y?y.p(r,a):(y=mi(r),y.c(),y.m(e,t)):y&&(y.d(1),y=null),v===(v=k(r))&&o?o.p(r,a):(o.d(1),o=v(r),o&&(o.c(),o.m(e,l))),a&128&&de(p,r[7]),a&64&&de(u,r[6]),a&1056&&m!==(m=!r[5]&&!r[10].trim())&&(n.disabled=m)},d(h){h&&N(e),y&&y.d(),o.d(),d=!1,Pe(g)}}}function Lo(r){let e,t,l;function _(p){r[20](p)}let w={onClose:r[8],title:r[1],size:"sm",$$slots:{default:[Eo]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new gr({props:w}),lt.push(()=>gt(e,"isOpen",_)),{c(){Ze(e.$$.fragment)},m(p,i){Je(e,p,i),l=!0},p(p,[i]){const n={};i&256&&(n.onClose=p[8]),i&2&&(n.title=p[1]),i&2099196&&(n.$$scope={dirty:i,ctx:p}),!t&&i&1&&(t=!0,n.isOpen=p[0],pt(()=>t=!1)),e.$set(n)},i(p){l||(Oe(e.$$.fragment,p),l=!0)},o(p){He(e.$$.fragment,p),l=!1},d(p){Xe(e,p)}}}function Mo(r,e,t){let{isOpen:l=!1}=e,{title:_=""}=e,{message:w=""}=e,{defaultValue:p=""}=e,{placeholder:i=""}=e,{inputType:n="text"}=e,{allowEmpty:u=!1}=e,{trimValue:m=!0}=e,{confirmText:d="确定"}=e,{cancelText:g="取消"}=e,{onConfirm:y=()=>{}}=e,{onCancel:k=()=>{}}=e,v="",o;function h(){if(u){y(m?v.trim():v);return}const S=m?v.trim():v;S&&y(S)}function a(S){S.key==="Enter"&&h()}function f(S){lt[S?"unshift":"push"](()=>{o=S,t(9,o)})}function b(){v=this.value,t(10,v),t(0,l),t(13,p)}function E(S){lt[S?"unshift":"push"](()=>{o=S,t(9,o)})}function C(){v=this.value,t(10,v),t(0,l),t(13,p)}function x(S){l=S,t(0,l)}return r.$$set=S=>{"isOpen"in S&&t(0,l=S.isOpen),"title"in S&&t(1,_=S.title),"message"in S&&t(2,w=S.message),"defaultValue"in S&&t(13,p=S.defaultValue),"placeholder"in S&&t(3,i=S.placeholder),"inputType"in S&&t(4,n=S.inputType),"allowEmpty"in S&&t(5,u=S.allowEmpty),"trimValue"in S&&t(14,m=S.trimValue),"confirmText"in S&&t(6,d=S.confirmText),"cancelText"in S&&t(7,g=S.cancelText),"onConfirm"in S&&t(15,y=S.onConfirm),"onCancel"in S&&t(8,k=S.onCancel)},r.$$.update=()=>{r.$$.dirty&8193&&l&&t(10,v=p),r.$$.dirty&513&&l&&o&&setTimeout(()=>{o==null||o.focus(),o==null||o.select()},0)},[l,_,w,i,n,u,d,g,k,o,v,h,a,p,m,y,f,b,E,C,x]}class un extends _t{constructor(e){super(),ft(this,e,Mo,Lo,ut,{isOpen:0,title:1,message:2,defaultValue:13,placeholder:3,inputType:4,allowEmpty:5,trimValue:14,confirmText:6,cancelText:7,onConfirm:15,onCancel:8})}}function Do(r){window.runtime.LogPrint(r)}function To(r){window.runtime.LogTrace(r)}function Bo(r){window.runtime.LogDebug(r)}function Ao(r){window.runtime.LogInfo(r)}function Ro(r){window.runtime.LogWarning(r)}function Oo(r){window.runtime.LogError(r)}function Po(r){window.runtime.LogFatal(r)}function zr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function pr(r,e){return zr(r,e,-1)}function Ho(r,...e){return window.runtime.EventsOff(r,...e)}function Io(){return window.runtime.EventsOffAll()}function Fo(r,e){return zr(r,e,1)}function jo(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function Wo(){window.runtime.WindowReload()}function zo(){window.runtime.WindowReloadApp()}function Uo(r){window.runtime.WindowSetAlwaysOnTop(r)}function No(){window.runtime.WindowSetSystemDefaultTheme()}function Vo(){window.runtime.WindowSetLightTheme()}function Ko(){window.runtime.WindowSetDarkTheme()}function qo(){window.runtime.WindowCenter()}function Go(r){window.runtime.WindowSetTitle(r)}function Jo(){window.runtime.WindowFullscreen()}function Xo(){window.runtime.WindowUnfullscreen()}function Yo(){return window.runtime.WindowIsFullscreen()}function Zo(){return window.runtime.WindowGetSize()}function Qo(r,e){window.runtime.WindowSetSize(r,e)}function $o(r,e){window.runtime.WindowSetMaxSize(r,e)}function el(r,e){window.runtime.WindowSetMinSize(r,e)}function tl(r,e){window.runtime.WindowSetPosition(r,e)}function rl(){return window.runtime.WindowGetPosition()}function il(){window.runtime.WindowHide()}function sl(){window.runtime.WindowShow()}function nl(){window.runtime.WindowMaximise()}function ol(){window.runtime.WindowToggleMaximise()}function ll(){window.runtime.WindowUnmaximise()}function al(){return window.runtime.WindowIsMaximised()}function cl(){window.runtime.WindowMinimise()}function hl(){window.runtime.WindowUnminimise()}function dl(r,e,t,l){window.runtime.WindowSetBackgroundColour(r,e,t,l)}function ul(){return window.runtime.ScreenGetAll()}function fl(){return window.runtime.WindowIsMinimised()}function _l(){return window.runtime.WindowIsNormal()}function pl(r){window.runtime.BrowserOpenURL(r)}function gl(){return window.runtime.Environment()}function ml(){window.runtime.Quit()}function vl(){window.runtime.Hide()}function bl(){window.runtime.Show()}function yl(){return window.runtime.ClipboardGetText()}function wl(r){return window.runtime.ClipboardSetText(r)}function kl(r,e){return window.runtime.OnFileDrop(r,e)}function Sl(){return window.runtime.OnFileDropOff()}function Cl(){return window.runtime.CanResolveFilePaths()}function xl(r){return window.runtime.ResolveFilePaths(r)}const fn=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:pl,CanResolveFilePaths:Cl,ClipboardGetText:yl,ClipboardSetText:wl,Environment:gl,EventsEmit:jo,EventsOff:Ho,EventsOffAll:Io,EventsOn:pr,EventsOnMultiple:zr,EventsOnce:Fo,Hide:vl,LogDebug:Bo,LogError:Oo,LogFatal:Po,LogInfo:Ao,LogPrint:Do,LogTrace:To,LogWarning:Ro,OnFileDrop:kl,OnFileDropOff:Sl,Quit:ml,ResolveFilePaths:xl,ScreenGetAll:ul,Show:bl,WindowCenter:qo,WindowFullscreen:Jo,WindowGetPosition:rl,WindowGetSize:Zo,WindowHide:il,WindowIsFullscreen:Yo,WindowIsMaximised:al,WindowIsMinimised:fl,WindowIsNormal:_l,WindowMaximise:nl,WindowMinimise:cl,WindowReload:Wo,WindowReloadApp:zo,WindowSetAlwaysOnTop:Uo,WindowSetBackgroundColour:dl,WindowSetDarkTheme:Ko,WindowSetLightTheme:Vo,WindowSetMaxSize:$o,WindowSetMinSize:el,WindowSetPosition:tl,WindowSetSize:Qo,WindowSetSystemDefaultTheme:No,WindowSetTitle:Go,WindowShow:sl,WindowToggleMaximise:ol,WindowUnfullscreen:Xo,WindowUnmaximise:ll,WindowUnminimise:hl},Symbol.toStringTag,{value:"Module"})),{Map:_n}=en;function vi(r,e,t){const l=r.slice();return l[66]=e[t],l[67]=e,l[68]=t,l}function bi(r,e,t){const l=r.slice();return l[66]=e[t],l}function El(r){let e=[],t=new _n,l,_=ze(r[1]);const w=p=>p[66].sessionId;for(let p=0;p<_.length;p+=1){let i=bi(r,_,p),n=w(i);t.set(n,e[p]=yi(n,i))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();l=wt()},m(p,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(p,i);V(p,l,i)},p(p,i){i[0]&1930297346&&(_=ze(p[1]),e=Lt(e,i,w,1,p,_,t,l.parentNode,Mt,yi,l,bi))},d(p){p&&N(l);for(let i=0;i<e.length;i+=1)e[i].d(p)}}}function Ll(r){let e;return{c(){e=L("div"),e.textContent="没有活动连接",s(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function Ml(r){let e,t=(r[66].tabName||r[66].connection.name)+"",l;return{c(){e=L("span"),l=Z(t),s(e,"class","text-sm font-medium truncate flex-1")},m(_,w){V(_,e,w),c(e,l)},p(_,w){w[0]&2&&t!==(t=(_[66].tabName||_[66].connection.name)+"")&&de(l,t)},d(_){_&&N(e)}}}function Dl(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),s(e,"focus","")},m(_,w){V(_,e,w),Ce(e,r[18]),t||(l=[$(e,"input",r[40]),$(e,"blur",r[29]),$(e,"keydown",r[30])],t=!0)},p(_,w){w[0]&262144&&e.value!==_[18]&&Ce(e,_[18])},d(_){_&&N(e),t=!1,Pe(l)}}}function yi(r,e){let t,l,_,w,p,i,n,u,m,d;function g(f,b){return f[17]===f[66].sessionId?Dl:Ml}let y=g(e),k=y(e);function v(...f){return e[41](e[66],...f)}function o(){return e[42](e[66])}function h(){return e[43](e[66])}function a(...f){return e[44](e[66],...f)}return{key:r,first:null,c(){t=L("div"),l=L("div"),w=O(),k.c(),p=O(),i=L("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',n=O(),s(l,"class",_=Yr(`w-2 h-2 rounded-full flex-shrink-0 ${e[66].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),s(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),s(t,"class",u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[19]===e[66].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),s(t,"role","button"),s(t,"tabindex","0"),this.first=t},m(f,b){V(f,t,b),c(t,l),c(t,w),k.m(t,null),c(t,p),c(t,i),c(t,n),m||(d=[$(i,"click",v),$(t,"click",o),$(t,"dblclick",h),$(t,"keydown",a)],m=!0)},p(f,b){e=f,b[0]&2&&_!==(_=Yr(`w-2 h-2 rounded-full flex-shrink-0 ${e[66].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&s(l,"class",_),y===(y=g(e))&&k?k.p(e,b):(k.d(1),k=y(e),k&&(k.c(),k.m(t,p))),b[0]&524290&&u!==(u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[19]===e[66].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&s(t,"class",u)},d(f){f&&N(t),k.d(),m=!1,Pe(d)}}}function Tl(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',s(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,l){V(t,e,l)},p:Ae,i:Ae,o:Ae,d(t){t&&N(e)}}}function Bl(r){let e,t=[],l=new _n,_,w=ze(r[1]);const p=i=>i[66].sessionId;for(let i=0;i<w.length;i+=1){let n=vi(r,w,i),u=p(n);l.set(u,t[i]=wi(u,n))}return{c(){e=L("div");for(let i=0;i<t.length;i+=1)t[i].c();s(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,n){V(i,e,n);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);_=!0},p(i,n){n[0]&524291|n[1]&56&&(w=ze(i[1]),xt(),t=Lt(t,n,p,1,i,w,l,e,zn,wi,null,vi),Et())},i(i){if(!_){for(let n=0;n<w.length;n+=1)Oe(t[n]);_=!0}},o(i){for(let n=0;n<t.length;n+=1)He(t[n]);_=!1},d(i){i&&N(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Al(r){let e=r[66].connection.username+"",t,l,_=r[66].connection.host+"",w,p,i=r[66].connection.port+"",n;return{c(){t=Z(e),l=Z("@"),w=Z(_),p=Z(":"),n=Z(i)},m(u,m){V(u,t,m),V(u,l,m),V(u,w,m),V(u,p,m),V(u,n,m)},p(u,m){m[0]&2&&e!==(e=u[66].connection.username+"")&&de(t,e),m[0]&2&&_!==(_=u[66].connection.host+"")&&de(w,_),m[0]&2&&i!==(i=u[66].connection.port+"")&&de(n,i)},d(u){u&&(N(t),N(l),N(w),N(p),N(n))}}}function Rl(r){let e,t=r[66].connection.name!=="Local Shell"?` (${r[66].connection.name})`:"",l;return{c(){e=Z("本地终端"),l=Z(t)},m(_,w){V(_,e,w),V(_,l,w)},p(_,w){w[0]&2&&t!==(t=_[66].connection.name!=="Local Shell"?` (${_[66].connection.name})`:"")&&de(l,t)},d(_){_&&(N(e),N(l))}}}function wi(r,e){let t,l,_,w,p,i,n,u,m=e[66],d,g,y;function k(b,E){return b[66].type==="local"?Rl:Al}let v=k(e),o=v(e);const h=()=>e[45](u,m),a=()=>e[45](null,m);let f={sessionId:e[66].sessionId,onData:e[34],onResize:e[36],onZModemTransfer:e[35]};return u=new So({props:f}),h(),{key:r,first:null,c(){t=L("div"),l=L("div"),_=L("div"),o.c(),w=O(),p=L("div"),p.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=O(),n=L("div"),Ze(u.$$.fragment),d=O(),s(_,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),s(p,"class","flex items-center gap-1"),s(l,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),s(n,"class","flex-1 overflow-hidden"),s(t,"class",g="terminal-wrapper "+(e[19]===e[66].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(b,E){V(b,t,E),c(t,l),c(l,_),o.m(_,null),c(l,w),c(l,p),c(t,i),c(t,n),Je(u,n,null),c(t,d),y=!0},p(b,E){e=b,v===(v=k(e))&&o?o.p(e,E):(o.d(1),o=v(e),o&&(o.c(),o.m(_,null))),m!==e[66]&&(a(),m=e[66],h());const C={};E[0]&2&&(C.sessionId=e[66].sessionId),u.$set(C),(!y||E[0]&524290&&g!==(g="terminal-wrapper "+(e[19]===e[66].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&s(t,"class",g)},i(b){y||(Oe(u.$$.fragment,b),y=!0)},o(b){He(u.$$.fragment,b),y=!1},d(b){b&&N(t),o.d(),a(),Xe(u)}}}function ki(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C;return b=In(r[50][0]),{c(){e=L("div"),t=L("div"),l=L("div"),l.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',_=O(),w=L("div"),p=L("label"),i=L("input"),n=O(),u=L("div"),u.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',m=O(),d=L("label"),g=L("input"),y=O(),k=L("div"),k.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',v=O(),o=L("div"),h=L("button"),h.textContent="取消",a=O(),f=L("button"),f.textContent="确定",s(l,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),s(i,"type","radio"),i.__value="powershell",Ce(i,i.__value),s(i,"class","w-4 h-4 text-purple-600"),s(p,"class","flex items-center space-x-3 cursor-pointer"),s(g,"type","radio"),g.__value="cmd",Ce(g,g.__value),s(g,"class","w-4 h-4 text-purple-600"),s(d,"class","flex items-center space-x-3 cursor-pointer"),s(w,"class","px-6 py-4 space-y-3"),s(h,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),s(f,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),s(o,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),s(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),s(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),b.p(i,g)},m(x,S){V(x,e,S),c(e,t),c(t,l),c(t,_),c(t,w),c(w,p),c(p,i),i.checked=i.__value===r[13],c(p,n),c(p,u),c(w,m),c(w,d),c(d,g),g.checked=g.__value===r[13],c(d,y),c(d,k),c(t,v),c(t,o),c(o,h),c(o,a),c(o,f),E||(C=[$(i,"change",r[49]),$(g,"change",r[51]),$(h,"click",r[33]),$(f,"click",r[32])],E=!0)},p(x,S){S[0]&8192&&(i.checked=i.__value===x[13]),S[0]&8192&&(g.checked=g.__value===x[13])},d(x){x&&N(e),b.r(),E=!1,Pe(C)}}}function Ol(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E;function C(D,H){return D[1].length===0?Ll:El}let x=C(r),S=x(r);const M=[Bl,Tl],T=[];function R(D,H){return D[1].length>0?0:1}p=R(r),i=T[p]=M[p](r);function P(D){r[46](D)}let A={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[26],onCancel:r[27]};r[2]!==void 0&&(A.isOpen=r[2]),u=new lr({props:A}),lt.push(()=>gt(u,"isOpen",P));function z(D){r[47](D)}let q={title:r[14],message:r[15],type:r[16],confirmText:"确定",cancelText:"取消",onConfirm:r[22],onCancel:r[23]};r[11]!==void 0&&(q.isOpen=r[11]),g=new lr({props:q}),lt.push(()=>gt(g,"isOpen",z));function X(D){r[48](D)}let ie={title:r[4],message:r[5],placeholder:r[6],defaultValue:r[7],inputType:r[8],allowEmpty:r[9],trimValue:r[10],confirmText:"确定",cancelText:"取消",onConfirm:r[20],onCancel:r[21]};r[3]!==void 0&&(ie.isOpen=r[3]),v=new un({props:ie}),lt.push(()=>gt(v,"isOpen",X));let G=r[12]&&ki(r);return{c(){e=L("div"),t=L("div"),S.c(),l=O(),_=L("button"),_.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',w=O(),i.c(),n=O(),Ze(u.$$.fragment),d=O(),Ze(g.$$.fragment),k=O(),Ze(v.$$.fragment),h=O(),G&&G.c(),a=wt(),s(_,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),s(_,"title","打开本地终端"),s(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(D,H){V(D,e,H),c(e,t),S.m(t,null),c(t,l),c(t,_),c(e,w),T[p].m(e,null),V(D,n,H),Je(u,D,H),V(D,d,H),Je(g,D,H),V(D,k,H),Je(v,D,H),V(D,h,H),G&&G.m(D,H),V(D,a,H),f=!0,b||(E=$(_,"click",r[31]),b=!0)},p(D,H){x===(x=C(D))&&S?S.p(D,H):(S.d(1),S=x(D),S&&(S.c(),S.m(t,l)));let F=p;p=R(D),p===F?T[p].p(D,H):(xt(),He(T[F],1,1,()=>{T[F]=null}),Et(),i=T[p],i?i.p(D,H):(i=T[p]=M[p](D),i.c()),Oe(i,1),i.m(e,null));const W={};!m&&H[0]&4&&(m=!0,W.isOpen=D[2],pt(()=>m=!1)),u.$set(W);const J={};H[0]&16384&&(J.title=D[14]),H[0]&32768&&(J.message=D[15]),H[0]&65536&&(J.type=D[16]),!y&&H[0]&2048&&(y=!0,J.isOpen=D[11],pt(()=>y=!1)),g.$set(J);const j={};H[0]&16&&(j.title=D[4]),H[0]&32&&(j.message=D[5]),H[0]&64&&(j.placeholder=D[6]),H[0]&128&&(j.defaultValue=D[7]),H[0]&256&&(j.inputType=D[8]),H[0]&512&&(j.allowEmpty=D[9]),H[0]&1024&&(j.trimValue=D[10]),!o&&H[0]&8&&(o=!0,j.isOpen=D[3],pt(()=>o=!1)),v.$set(j),D[12]?G?G.p(D,H):(G=ki(D),G.c(),G.m(a.parentNode,a)):G&&(G.d(1),G=null)},i(D){f||(Oe(i),Oe(u.$$.fragment,D),Oe(g.$$.fragment,D),Oe(v.$$.fragment,D),f=!0)},o(D){He(i),He(u.$$.fragment,D),He(g.$$.fragment,D),He(v.$$.fragment,D),f=!1},d(D){D&&(N(e),N(n),N(d),N(k),N(h),N(a)),S.d(),T[p].d(),Xe(u,D),Xe(g,D),Xe(v,D),G&&G.d(D),b=!1,E()}}}function Pl(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r,0),t.set(e,r.length),t}function Hl(r){const e=[27,93,55,59];let t=-1;for(let _=r.length-e.length;_>=0;_--)if(r[_]===e[0]&&r[_+1]===e[1]&&r[_+2]===e[2]&&r[_+3]===e[3]){t=_;break}return t===-1?r.slice(Math.max(0,r.length-(e.length-1))):Il(r,t+e.length)===-1?r.slice(t):r.slice(Math.max(0,r.length-(e.length-1)))}function Il(r,e){for(let t=e;t<r.length;t++)if(r[t]===7||r[t]===27&&t+1<r.length&&r[t+1]===92)return t;return-1}function Fl(r){const e=[],t=[27,93,55,59];let l=0;for(;l<=r.length-t.length;){if(r[l]===t[0]&&r[l+1]===t[1]&&r[l+2]===t[2]&&r[l+3]===t[3]){l+=t.length;const _=l;let w=-1;for(;l<r.length;){if(r[l]===7){w=l,l+=1;break}if(r[l]===27&&l+1<r.length&&r[l+1]===92){w=l,l+=2;break}l+=1}if(w>_){const p=jl(r.slice(_,w)),i=Wl(p);i&&e.push(i)}continue}l+=1}return e}function jl(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Wl(r){if(!r)return"";let e=r;if(e.startsWith("file://")){e=e.slice(7);const t=e.indexOf("/");if(t===-1)return"/";e=e.slice(t)}else e.startsWith("file:")&&(e=e.slice(5));try{e=decodeURIComponent(e)}catch{return e}return e}function Fr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function Si(r){return btoa(Fr(r))}function zl(r,e,t){let l,_;vt(r,zt,Y=>t(19,l=Y)),vt(r,At,Y=>t(39,_=Y));let w={},p=[],i=new Map,n=new Map,u=!1,m=null,d=!1,g="",y="",k="",v="",o="text",h=!1,a=!0,f=null,b=!1,E=null,C=!1,x="powershell";async function S(Y){var bt;if(console.log("Connecting to:",Y),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:me,GetPassword:ke,HasPassword:ye,SavePassword:Me}=window.wailsBindings;if(typeof me!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let De="",Re="";if(Y.auth_type==="key"){if(Re=await M({title:`连接到 ${Y.name}`,message:"如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：",placeholder:"Passphrase（可留空）",inputType:"password",allowEmpty:!0,trimValue:!1}),Re===null)return;De=Y.key_path||""}else try{if(typeof ye=="function"&&await ye(Y.id))De=await ke(Y.id),console.log("Using saved password");else{if(De=await M({title:`连接到 ${Y.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),De===null)return;if(De&&await P("保存密码","是否保存密码以便下次自动连接？","warning")&&typeof Me=="function")try{await Me(Y.id,De),console.log("Password saved successfully")}catch(rt){console.error("Failed to save password:",rt)}}}catch(je){if(console.error("Failed to get saved password:",je),De=await M({title:`连接到 ${Y.name}`,message:"请输入密码：",placeholder:"密码",inputType:"password",allowEmpty:!1,trimValue:!1}),De===null)return}if(!De){console.log("Connection cancelled - no auth value provided");return}const we=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",Y.host,Y.port,Y.username,"auth_type:",Y.auth_type);const Ue={sessionId:we,connection:Y,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};At.update(je=>(je.set(we,Ue),je)),zt.set(we),await xr(),await new Promise(je=>setTimeout(je,50));let ht=(bt=w[we])==null?void 0:bt.getSize();if(ht||(ht={cols:80,rows:24},console.warn("Terminal not ready, using default size:",ht)),console.log("Subscribing to events for session:",we),Se(we),await new Promise(je=>setTimeout(je,100)),!w[we]){console.error("Terminal component not ready after delay");return}const Ye=w[we];if(!Ye){console.error("Failed to get terminal reference for session:",we);return}console.log("Terminal ready, attempting to connect...");const tt=Y.auth_type==="key"?"SSH key":"password";Ye.writeln(`正在连接 ${Y.username}@${Y.host}:${Y.port} (${tt})...`),Ye.writeln("");try{await me(we,Y.host,Y.port,Y.username,Y.auth_type||"password",De,Re,ht.cols,ht.rows),Ue.connected=!0,At.update(je=>(je.set(we,Ue),je)),setTimeout(()=>{Ye.focus()},100)}catch(je){console.error("Failed to connect:",je),Ye&&Ye.writeln(`\r
连接失败: ${je.message||je}`),await G(we)}}function M({title:Y,message:me,placeholder:ke,defaultValue:ye,inputType:Me,allowEmpty:De,trimValue:Re}){return new Promise(we=>{t(4,g=Y||""),t(5,y=me||""),t(6,k=ke||""),t(7,v=ye||""),t(8,o=Me),t(9,h=!!De),t(10,a=Re!==!1),f=we,t(3,d=!0)})}function T(Y){t(3,d=!1),f&&(f(Y),f=null)}function R(){t(3,d=!1),f&&(f(null),f=null)}function P(Y,me,ke="default"){return new Promise(ye=>{t(14,A=Y),t(15,z=me),t(16,q=ke),E=ye,t(11,b=!0)})}let A="",z="",q="default";function X(){t(11,b=!1),E&&(E(!0),E=null)}function ie(){t(11,b=!1),E&&(E(!1),E=null)}async function G(Y){const me=i.get(Y);me&&(me(),i.delete(Y)),delete w[Y];const{CloseSSH:ke}=window.wailsBindings||{};if(typeof ke=="function")try{await ke(Y)}catch(Me){console.error("Failed to close session:",Me)}At.update(Me=>(Me.delete(Y),Me));const ye=Array.from(_.keys());l===Y&&(ye.length>0?zt.set(ye[0]):zt.set(null))}function D(Y){_.has(Y)&&(zt.set(Y),setTimeout(()=>{const me=w[Y];if(me){me.focus();const ke=me.getSize(),{ResizeSSH:ye}=window.wailsBindings||{};typeof ye=="function"&&ye(Y,ke.cols,ke.rows).catch(console.error)}},50))}function H(Y,me){me.stopPropagation();const ke=_.get(Y);ke&&(ke.connected?(m=Y,t(2,u=!0)):G(Y))}function F(){m&&(G(m),m=null),t(2,u=!1)}function W(){m=null,t(2,u=!1)}function J(Y,me){const ke=_.get(Y);ke&&(ke.tabName=me.trim(),At.update(ye=>(ye.set(Y,ke),ye)))}let j=null,K="";function Q(Y){const me=_.get(Y);me&&(t(17,j=Y),t(18,K=me.tabName||me.connection.name))}function I(){j&&K.trim()&&J(j,K.trim()),t(17,j=null),t(18,K="")}function B(){t(17,j=null),t(18,K="")}function te(Y){Y.key==="Enter"?I():Y.key==="Escape"&&B()}async function U(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:Y,SendSSHData:me,ResizeSSH:ke}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(12,C=!0);return}await ae("")}async function ae(Y){var Re;const{ConnectLocalShell:me}=window.wailsBindings,ke=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ye={sessionId:ke,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};At.update(we=>(we.set(ke,ye),we)),zt.set(ke),await xr(),await new Promise(we=>setTimeout(we,50));let Me=(Re=w[ke])==null?void 0:Re.getSize();if(Me||(Me={cols:80,rows:24},console.warn("Terminal not ready, using default size:",Me)),console.log("Subscribing to local events for session:",ke),ee(ke),await new Promise(we=>setTimeout(we,100)),!w[ke]){console.error("Terminal component not ready after delay");return}const De=w[ke];if(!De){console.error("Failed to get terminal reference for session:",ke);return}console.log("Terminal ready, starting local shell..."),De.writeln(`正在启动本地终端${Y?` (${Y})`:""}...`),De.writeln("");try{await me(ke,Y,Me.cols,Me.rows),ye.connected=!0,At.update(we=>(we.set(ke,ye),we)),setTimeout(()=>{De.focus()},100)}catch(we){console.error("Failed to start local shell:",we),De&&De.writeln(`\r
启动本地终端失败: ${we.message||we}`),await G(ke)}}function ce(){t(12,C=!1),ae(x)}function he(){t(12,C=!1)}function ee(Y){const me=`local:output:${Y}`,ke=pr(me,ye=>{const Me=w[Y];if(Me){const De=atob(ye),Re=new Uint8Array(De.length);for(let we=0;we<De.length;we++)Re[we]=De.charCodeAt(we);oe(Y,Re,!0),Me.write(Re)}});i.set(Y,ke)}function oe(Y,me,ke){if(!Y||!me||me.length===0||ke)return;const{paths:ye,pending:Me}=ue(Y,me);if(n.set(Y,Me),ye.length===0)return;const De=ye[ye.length-1];if(!De)return;const{UpdateCurrentPath:Re}=window.wailsBindings||{};typeof Re=="function"&&Re(Y,De).catch(we=>{console.error("Failed to update current path:",we)})}function ue(Y,me){const ke=n.get(Y),ye=ke&&ke.length>0?Pl(ke,me):me,Me=Fl(ye),De=Hl(ye);return{paths:Me,pending:De}}function pe(Y,me){if(!_.has(Y))return;const ke=_.get(Y),{SendSSHData:ye,SendLocalShellData:Me}=window.wailsBindings||{};ke&&ke.type==="local"?typeof Me=="function"&&Me(Y,me).catch(De=>{console.error("Failed to send local shell data:",De)}):typeof ye=="function"&&ye(Y,me).catch(De=>{console.error("Failed to send SSH data:",De)})}function Be(Y,me){if(!_.has(Y))return;const ke=_.get(Y),{SendSSHData:ye,SendSSHDataBinary:Me,SendLocalShellData:De,SendLocalShellDataBinary:Re}=window.wailsBindings||{};if(ke&&ke.type==="local"){if(typeof Re=="function"){const we=Si(me);Re(Y,we).catch(Ue=>{console.error("Failed to send local shell binary data:",Ue)})}else if(typeof De=="function"){const we=Fr(me);De(Y,we).catch(Ue=>{console.error("Failed to send local shell data:",Ue)})}}else if(typeof Me=="function"){const we=Si(me);Me(Y,we).catch(Ue=>{console.error("Failed to send SSH binary data:",Ue)})}else if(typeof ye=="function"){const we=Fr(me);ye(Y,we).catch(Ue=>{console.error("Failed to send SSH data:",Ue)})}}function Le(Y,me,ke){if(!_.has(Y))return;const ye=_.get(Y),{ResizeSSH:Me,ResizeLocalShell:De}=window.wailsBindings||{};ye&&ye.type==="local"?typeof De=="function"&&De(Y,me,ke).catch(Re=>{console.error("Failed to resize local terminal:",Re)}):typeof Me=="function"&&Me(Y,me,ke).catch(Re=>{console.error("Failed to resize SSH terminal:",Re)})}function Se(Y){const me=`ssh:output:${Y}`,ke=pr(me,ye=>{const Me=w[Y];if(Me){const De=atob(ye),Re=new Uint8Array(De.length);for(let we=0;we<De.length;we++)Re[we]=De.charCodeAt(we);oe(Y,Re,!1),Me.write(Re)}});i.set(Y,ke)}Mr(()=>{i.forEach(Y=>{Y()})}),ar(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=w,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",p),await xr(),l&&w[l]&&setTimeout(()=>{w[l].focus()},100)});const ve=[[]];function re(){K=this.value,t(18,K)}const ge=(Y,me)=>H(Y.sessionId,me),ne=Y=>D(Y.sessionId),be=Y=>Q(Y.sessionId),We=(Y,me)=>{(me.key==="Enter"||me.key===" ")&&(me.preventDefault(),D(Y.sessionId))};function Fe(Y,me){lt[Y?"unshift":"push"](()=>{w[me.sessionId]=Y,t(0,w)})}function Qe(Y){u=Y,t(2,u)}function qe(Y){b=Y,t(11,b)}function Ke(Y){d=Y,t(3,d)}function et(){x=this.__value,t(13,x)}function Te(){x=this.__value,t(13,x)}return r.$$.update=()=>{r.$$.dirty[1]&256&&t(1,p=_?Array.from(_.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=w)},[w,p,u,d,g,y,k,v,o,h,a,b,C,x,A,z,q,j,K,l,T,R,X,ie,D,H,F,W,Q,I,te,U,ce,he,pe,Be,Le,S,Se,_,re,ge,ne,be,We,Fe,Qe,qe,Ke,et,ve,Te]}class Ul extends _t{constructor(e){super(),ft(this,e,zl,Ol,ut,{handleConnect:37,subscribeToOutput:38},null,[-1,-1,-1])}get handleConnect(){return this.$$.ctx[37]}get subscribeToOutput(){return this.$$.ctx[38]}}function Nl(r){return window.go.main.App.AddConnection(r)}function Vl(r,e){return window.go.main.App.CalculateHash(r,e)}function Ur(r){return window.go.main.App.CancelTransfer(r)}function Kl(r,e){return window.go.main.App.ChangeDirectory(r,e)}function ql(r){return window.go.main.App.CloseSSH(r)}function Gl(r,e,t,l){return window.go.main.App.ConnectLocalShell(r,e,t,l)}function Jl(r,e,t,l,_,w,p,i,n){return window.go.main.App.ConnectSSH(r,e,t,l,_,w,p,i,n)}function Xl(r,e){return window.go.main.App.CreateDirectory(r,e)}function Yl(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function Zl(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function Ql(r){return window.go.main.App.DecodeBase64(r)}function $l(r,e,t,l){return window.go.main.App.DecryptText(r,e,t,l)}function ea(r,e){return window.go.main.App.DeleteFile(r,e)}function pn(r,e){return window.go.main.App.DeleteFiles(r,e)}function ta(r){return window.go.main.App.DeletePassword(r)}function ra(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function gn(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function ia(r){return window.go.main.App.EncodeBase64(r)}function sa(r,e,t,l){return window.go.main.App.EncryptText(r,e,t,l)}function na(r){return window.go.main.App.EscapeJSON(r)}function oa(r){return window.go.main.App.ExportConnections(r)}function la(r,e){return window.go.main.App.ExportConnectionsByIDs(r,e)}function aa(r){return window.go.main.App.FormatJSON(r)}function ca(){return window.go.main.App.GenerateUUIDv4()}function ha(r){return window.go.main.App.GetConnection(r)}function da(){return window.go.main.App.GetConnections()}function ua(r){return window.go.main.App.GetCurrentPath(r)}function fa(){return window.go.main.App.GetCurrentTimestamp()}function _a(){return window.go.main.App.GetCurrentTimestampMs()}function pa(r,e){return window.go.main.App.GetFileInfo(r,e)}function ga(r){return window.go.main.App.GetFileManagerSettings(r)}function ma(r){return window.go.main.App.GetMonitoringData(r)}function va(r){return window.go.main.App.GetPassword(r)}function ba(){return window.go.main.App.GetSettings()}function ya(r){return window.go.main.App.GetTransferStatus(r)}function wa(){return window.go.main.App.GetVersion()}function ka(r){return window.go.main.App.Greet(r)}function Sa(r){return window.go.main.App.HasPassword(r)}function Ca(r){return window.go.main.App.ImportConnections(r)}function xa(r){return window.go.main.App.ImportConnectionsFromFile(r)}function mn(r,e){return window.go.main.App.ListFiles(r,e)}function Ea(){return window.go.main.App.ListSSHSessions()}function La(r){return window.go.main.App.MinifyJSON(r)}function Ma(r){return window.go.main.App.ParseURL(r)}function Da(r){return window.go.main.App.RemoveConnection(r)}function vn(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function Ta(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function Ba(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function Aa(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function Ra(r,e){return window.go.main.App.SavePassword(r,e)}function bn(r,e,t,l,_){return window.go.main.App.SearchDirectories(r,e,t,l,_)}function yn(){return window.go.main.App.SelectDownloadDirectory()}function Oa(){return window.go.main.App.SelectImportFile()}function Pa(){return window.go.main.App.SelectSSHKeyFile()}function wn(){return window.go.main.App.SelectUploadFiles()}function Ha(r,e){return window.go.main.App.SendLocalShellData(r,e)}function Ia(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function Fa(r,e){return window.go.main.App.SendSSHData(r,e)}function ja(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function Wa(){return window.go.main.App.ShowAboutDialog()}function za(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function Ua(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function Na(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function Va(r,e,t,l,_,w){return window.go.main.App.TestConnection(r,e,t,l,_,w)}function Ka(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function qa(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function Ga(r,e){return window.go.main.App.URLDecode(r,e)}function Ja(r,e){return window.go.main.App.URLEncode(r,e)}function Xa(r){return window.go.main.App.UpdateConnection(r)}function Ya(r,e){return window.go.main.App.UpdateCurrentPath(r,e)}function Za(r,e){return window.go.main.App.UpdateFileManagerSettings(r,e)}function Qa(r){return window.go.main.App.UpdateSettings(r)}function kn(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function $a(r){return window.go.main.App.ValidateJSON(r)}const Sn=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:Nl,CalculateHash:Vl,CancelTransfer:Ur,ChangeDirectory:Kl,CloseSSH:ql,ConnectLocalShell:Gl,ConnectSSH:Jl,CreateDirectory:Xl,DateTimeToTimestamp:Yl,DateTimeToTimestampMs:Zl,DecodeBase64:Ql,DecryptText:$l,DeleteFile:ea,DeleteFiles:pn,DeletePassword:ta,DownloadFile:ra,DownloadFiles:gn,EncodeBase64:ia,EncryptText:sa,EscapeJSON:na,ExportConnections:oa,ExportConnectionsByIDs:la,FormatJSON:aa,GenerateUUIDv4:ca,GetConnection:ha,GetConnections:da,GetCurrentPath:ua,GetCurrentTimestamp:fa,GetCurrentTimestampMs:_a,GetFileInfo:pa,GetFileManagerSettings:ga,GetMonitoringData:ma,GetPassword:va,GetSettings:ba,GetTransferStatus:ya,GetVersion:wa,Greet:ka,HasPassword:Sa,ImportConnections:Ca,ImportConnectionsFromFile:xa,ListFiles:mn,ListSSHSessions:Ea,MinifyJSON:La,ParseURL:Ma,RemoveConnection:Da,RenameFile:vn,ResizeLocalShell:Ta,ResizeSSH:Ba,SaveBinaryFile:Aa,SavePassword:Ra,SearchDirectories:bn,SelectDownloadDirectory:yn,SelectImportFile:Oa,SelectSSHKeyFile:Pa,SelectUploadFiles:wn,SendLocalShellData:Ha,SendLocalShellDataBinary:Ia,SendSSHData:Fa,SendSSHDataBinary:ja,ShowAboutDialog:Wa,ShowErrorDialog:za,ShowMessageDialog:Ua,ShowQuestionDialog:Na,TestConnection:Va,TimestampToDateTime:Ka,TimestampToDateTimeMs:qa,URLDecode:Ga,URLEncode:Ja,UpdateConnection:Xa,UpdateCurrentPath:Ya,UpdateFileManagerSettings:Za,UpdateSettings:Qa,UploadFiles:kn,ValidateJSON:$a},Symbol.toStringTag,{value:"Module"})),ec={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:tc,set:rc,update:Pt}=Kt(ec),Dr={subscribe:tc,set:rc,addTransfer:r=>Pt(e=>{const t=e.transfers.filter(_=>_.status!=="running");let l=e.transfers;if(t.length>=e.maxHistory){const _=t.length-e.maxHistory+1,w=t.slice(0,_).map(p=>p.id);l=e.transfers.filter(p=>!w.includes(p.id))}return{...e,transfers:[r,...l]}}),updateTransfer:(r,e)=>Pt(t=>({...t,transfers:t.transfers.map(l=>l.id===r?{...l,...e}:l)})),cancelTransfer:r=>Pt(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>Pt(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>Pt(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>Pt(r=>({...r,transfers:[]})),togglePanel:()=>Pt(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>Pt(e=>({...e,isPanelOpen:r})),setActiveTab:r=>Pt(e=>({...e,activeTab:r}))};function Ht(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function Ci(r){return r?`${Ht(r)}/s`:"0 B/s"}function Sr(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const ic=Rt(Dr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),sc=Rt(Dr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));Rt(Dr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(w=>w.status==="running");if(e.length===0)return 0;let t=0,l=0;return e.forEach(w=>{const p=w.totalBytes||0,i=w.bytesSent||0;t+=p,l+=i}),t>0?l/t*100:e.reduce((w,p)=>p.totalBytes?w+p.bytesSent/p.totalBytes*100:w+(p.percentage||0),0)/e.length});const St=Dr,{Map:Tr}=en;function xi(r,e,t){const l=r.slice();return l[113]=e[t],l[115]=t,l}function Ei(r,e,t){const l=r.slice();return l[116]=e[t],l[115]=t,l}function Li(r,e,t){const l=r.slice();return l[118]=e[t],l[115]=t,l}function Mi(r,e,t){const l=r.slice();return l[113]=e[t],l[115]=t,l}function Di(r){let e,t,l,_,w,p,i=r[4]?"跟踪中":"已暂停",n,u,m,d;return{c(){e=L("button"),t=le("svg"),l=le("path"),_=le("path"),w=O(),p=L("span"),n=Z(i),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(t,"class","w-3 h-3"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[6],s(e,"class",u=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${r[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`),s(e,"title","切换目录跟踪")},m(g,y){V(g,e,y),c(e,t),c(t,l),c(t,_),c(e,w),c(e,p),c(p,n),m||(d=$(e,"click",r[65]),m=!0)},p(g,y){y[0]&16&&i!==(i=g[4]?"跟踪中":"已暂停")&&de(n,i),y[0]&64&&(e.disabled=g[6]),y[0]&16&&u!==(u=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${g[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`)&&s(e,"class",u)},d(g){g&&N(e),m=!1,d()}}}function nc(r){let e,t,l;function _(i,n){return i[3]==="/"?ac:lc}let w=_(r),p=w(r);return{c(){e=L("span"),p.c(),s(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),s(e,"title","点击编辑路径")},m(i,n){V(i,e,n),p.m(e,null),t||(l=$(e,"click",r[51]),t=!0)},p(i,n){w===(w=_(i))&&p?p.p(i,n):(p.d(1),p=w(i),p&&(p.c(),p.m(e,null)))},d(i){i&&N(e),p.d(),t=!1,l()}}}function oc(r){let e,t,l,_,w;return{c(){e=L("span"),e.textContent="/",t=O(),l=L("input"),s(e,"class","text-gray-400 dark:text-gray-500"),s(l,"type","text"),s(l,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(p,i){V(p,e,i),V(p,t,i),V(p,l,i),Ce(l,r[21]),_||(w=[$(l,"input",r[68]),$(l,"keydown",r[69]),$(l,"blur",r[52]),$s(Cn.call(null,l))],_=!0)},p(p,i){i[0]&2097152&&l.value!==p[21]&&Ce(l,p[21])},d(p){p&&(N(e),N(t),N(l)),_=!1,Pe(w)}}}function lc(r){let e=r[3].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=Z(e)},m(l,_){V(l,t,_)},p(l,_){_[0]&8&&e!==(e=l[3].split("/").filter(Boolean).join(" / ")+"")&&de(t,e)},d(l){l&&N(t)}}}function ac(r){let e;return{c(){e=Z("/")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function Ti(r){let e,t,l,_,w,p;function i(m,d){return m[28].length>0?hc:cc}let n=i(r),u=n(r);return{c(){e=L("div"),t=L("div"),l=L("input"),_=O(),u.c(),s(l,"type","text"),s(l,"placeholder","搜索历史..."),s(l,"class","w-full px-2 py-1 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"),s(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg w-64 max-h-64 overflow-y-auto z-10")},m(m,d){V(m,e,d),c(e,t),c(t,l),Ce(l,r[2]),c(e,_),u.m(e,null),w||(p=$(l,"input",r[71]),w=!0)},p(m,d){d[0]&4&&l.value!==m[2]&&Ce(l,m[2]),n===(n=i(m))&&u?u.p(m,d):(u.d(1),u=n(m),u&&(u.c(),u.m(e,null)))},d(m){m&&N(e),u.d(),w=!1,p()}}}function cc(r){let e,t=r[2]?"无匹配的历史":"暂无历史记录",l;return{c(){e=L("div"),l=Z(t),s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(_,w){V(_,e,w),c(e,l)},p(_,w){w[0]&4&&t!==(t=_[2]?"无匹配的历史":"暂无历史记录")&&de(l,t)},d(_){_&&N(e)}}}function hc(r){let e=[],t=new Tr,l,_=ze(r[28]);const w=p=>p[113];for(let p=0;p<_.length;p+=1){let i=Mi(r,_,p),n=w(i);t.set(n,e[p]=Bi(n,i))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();l=wt()},m(p,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(p,i);V(p,l,i)},p(p,i){i[0]&268435972|i[1]&131072&&(_=ze(p[28]),e=Lt(e,i,w,1,p,_,t,l.parentNode,Mt,Bi,l,Mi))},d(p){p&&N(l);for(let i=0;i<e.length;i+=1)e[i].d(p)}}}function Bi(r,e){let t,l=e[113]+"",_,w,p,i;function n(){return e[72](e[113])}return{key:r,first:null,c(){t=L("button"),_=Z(l),w=O(),s(t,"class","w-full text-left px-3 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-purple-50 dark:hover:bg-purple-900/30 truncate"),this.first=t},m(u,m){V(u,t,m),c(t,_),c(t,w),p||(i=$(t,"click",n),p=!0)},p(u,m){e=u,m[0]&268435456&&l!==(l=e[113]+"")&&de(_,l)},d(u){u&&N(t),p=!1,i()}}}function Ai(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o=r[13]&&Ri();function h(b,E){if(E[0]&10240&&(d=null),b[12].length>0)return uc;if(d==null&&(d=!!(b[11].trim()&&!b[13])),d)return dc}let a=h(r,[-1,-1,-1,-1]),f=a&&a(r);return{c(){e=L("div"),t=L("div"),l=L("div"),_=L("div"),w=L("input"),p=O(),i=le("svg"),n=le("path"),u=O(),o&&o.c(),m=O(),f&&f.c(),g=O(),y=L("button"),y.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',s(w,"type","text"),s(w,"placeholder","搜索文件夹名称..."),s(w,"class","w-full px-3 py-2 pl-9 text-xs bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(i,"class","w-4 h-4 text-amber-500 absolute left-3 top-1/2 transform -translate-y-1/2"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(_,"class","relative"),s(l,"class","relative flex-1"),s(y,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(y,"title","取消"),s(t,"class","flex items-center gap-2"),s(e,"class","mt-2 relative")},m(b,E){V(b,e,E),c(e,t),c(t,l),c(l,_),c(_,w),Ce(w,r[11]),c(_,p),c(_,i),c(i,n),c(_,u),o&&o.m(_,null),c(l,m),f&&f.m(l,null),c(t,g),c(t,y),k||(v=[$(w,"input",r[73]),$(w,"keydown",r[55]),$(w,"input",r[54]),$s(Cn.call(null,w)),$(y,"click",r[56])],k=!0)},p(b,E){E[0]&2048&&w.value!==b[11]&&Ce(w,b[11]),b[13]?o||(o=Ri(),o.c(),o.m(_,null)):o&&(o.d(1),o=null),a===(a=h(b,E))&&f?f.p(b,E):(f&&f.d(1),f=a&&a(b),f&&(f.c(),f.m(l,null)))},d(b){b&&N(e),o&&o.d(),f&&f.d(),k=!1,Pe(v)}}}function Ri(r){let e,t,l;return{c(){e=le("svg"),t=le("circle"),l=le("path"),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","w-4 h-4 text-amber-500 absolute right-3 top-1/2 transform -translate-y-1/2 animate-spin"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(_,w){V(_,e,w),c(e,t),c(e,l)},d(_){_&&N(e)}}}function dc(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center">未找到匹配的文件夹</div>',s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function uc(r){let e,t,l,_=r[12].length+"",w,p,i,n=[],u=new Tr,m=ze(r[12]);const d=g=>g[118].path;for(let g=0;g<m.length;g+=1){let y=Li(r,m,g),k=d(y);u.set(k,n[g]=Oi(k,y))}return{c(){e=L("div"),t=L("div"),l=Z("找到 "),w=Z(_),p=Z(" 个文件夹"),i=O();for(let g=0;g<n.length;g+=1)n[g].c();s(t,"class","px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"),s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto z-10")},m(g,y){V(g,e,y),c(e,t),c(t,l),c(t,w),c(t,p),c(e,i);for(let k=0;k<n.length;k+=1)n[k]&&n[k].m(e,null)},p(g,y){y[0]&4096&&_!==(_=g[12].length+"")&&de(w,_),y[0]&22528|y[1]&33685504&&(m=ze(g[12]),n=Lt(n,y,d,1,g,m,u,e,Mt,Oi,null,Li))},d(g){g&&N(e);for(let y=0;y<n.length;y+=1)n[y].d()}}}function Oi(r,e){let t,l,_,w,p,i,n,u=zi(e[118].name,e[11])+"",m,d,g=e[118].path+"",y,k,v,o,h;function a(){return e[74](e[118])}function f(){return e[75](e[115])}return{key:r,first:null,c(){t=L("button"),l=L("div"),_=le("svg"),w=le("path"),p=O(),i=L("div"),n=L("div"),m=O(),d=L("div"),y=Z(g),k=O(),s(w,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(_,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(_,"fill","currentColor"),s(_,"viewBox","0 0 24 24"),s(n,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-400 dark:text-gray-500 text-[10px] truncate"),s(i,"class","flex-1 min-w-0"),s(l,"class","flex items-center gap-2"),s(t,"class",v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`),this.first=t},m(b,E){V(b,t,E),c(t,l),c(l,_),c(_,w),c(l,p),c(l,i),c(i,n),n.innerHTML=u,c(i,m),c(i,d),c(d,y),c(t,k),o||(h=[$(t,"click",a),$(t,"mouseenter",f)],o=!0)},p(b,E){e=b,E[0]&6144&&u!==(u=zi(e[118].name,e[11])+"")&&(n.innerHTML=u),E[0]&4096&&g!==(g=e[118].path+"")&&de(y,g),E[0]&20480&&v!==(v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`)&&s(t,"class",v)},d(b){b&&N(t),o=!1,Pe(h)}}}function fc(r){let e=[],t=new Tr,l,_=ze(r[29]);const w=p=>p[116].path;for(let p=0;p<_.length;p+=1){let i=Ei(r,_,p),n=w(i);t.set(n,e[p]=Pi(n,i))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();l=wt()},m(p,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(p,i);V(p,l,i)},p(p,i){i[0]&537165824|i[1]&131312&&(_=ze(p[29]),e=Lt(e,i,w,1,p,_,t,l.parentNode,Mt,Pi,l,Ei))},d(p){p&&N(l);for(let i=0;i<e.length;i+=1)e[i].d(p)}}}function _c(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function pc(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function gc(r){let e,t,l,_,w,p,i,n,u,m;return{c(){e=L("div"),t=le("svg"),l=le("path"),_=O(),w=L("span"),p=Z(r[17]),i=O(),n=L("button"),n.textContent="重试",s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(t,"class","w-6 h-6"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(w,"class","text-center px-4"),s(n,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),s(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(d,g){V(d,e,g),c(e,t),c(t,l),c(e,_),c(e,w),c(w,p),c(e,i),c(e,n),u||(m=$(n,"click",r[33]),u=!0)},p(d,g){g[0]&131072&&de(p,d[17])},d(d){d&&N(e),u=!1,m()}}}function mc(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function vc(r){let e,t,l,_,w,p,i,n=r[116].name+"",u,m,d,g,y=Ht(r[116].size)+"",k,v,o,h,a,f=r[116].modified+"",b,E,C,x=r[116].mode+"",S;return{c(){e=L("div"),t=O(),l=le("svg"),_=le("path"),w=O(),p=L("div"),i=L("div"),u=Z(n),m=O(),d=L("div"),g=L("span"),k=Z(y),v=O(),o=L("span"),o.textContent="•",h=O(),a=L("span"),b=Z(f),E=O(),C=L("span"),S=Z(x),s(e,"class","w-3"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),s(l,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),s(p,"class","flex-1 min-w-0"),s(C,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(M,T){V(M,e,T),V(M,t,T),V(M,l,T),c(l,_),V(M,w,T),V(M,p,T),c(p,i),c(i,u),c(p,m),c(p,d),c(d,g),c(g,k),c(d,v),c(d,o),c(d,h),c(d,a),c(a,b),V(M,E,T),V(M,C,T),c(C,S)},p(M,T){T[0]&536870912&&n!==(n=M[116].name+"")&&de(u,n),T[0]&536870912&&y!==(y=Ht(M[116].size)+"")&&de(k,y),T[0]&536870912&&f!==(f=M[116].modified+"")&&de(b,f),T[0]&536870912&&x!==(x=M[116].mode+"")&&de(S,x)},d(M){M&&(N(e),N(t),N(l),N(w),N(p),N(E),N(C))}}}function bc(r){let e,t,l,_,w,p,i,n=r[116].name+"",u;function m(y,k){return k[0]&536903680&&(e=null),e==null&&(e=!!y[15].has(y[116].path)),e?kc:wc}let d=m(r,[-1,-1,-1,-1]),g=d(r);return{c(){g.c(),t=O(),l=le("svg"),_=le("path"),w=O(),p=L("div"),i=L("div"),u=Z(n),s(_,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(l,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(l,"fill","currentColor"),s(l,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(p,"class","flex-1 min-w-0")},m(y,k){g.m(y,k),V(y,t,k),V(y,l,k),c(l,_),V(y,w,k),V(y,p,k),c(p,i),c(i,u)},p(y,k){d!==(d=m(y,k))&&(g.d(1),g=d(y),g&&(g.c(),g.m(t.parentNode,t))),k[0]&536870912&&n!==(n=y[116].name+"")&&de(u,n)},d(y){y&&(N(t),N(l),N(w),N(p)),g.d(y)}}}function yc(r){let e,t,l,_,w,p=r[116].name+"",i,n,u;return{c(){e=le("svg"),t=le("path"),l=O(),_=L("div"),w=L("div"),i=Z(p),n=O(),u=L("div"),u.textContent="返回上一层",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),s(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24"),s(w,"class","text-gray-600 dark:text-gray-300"),s(u,"class","text-gray-400 dark:text-gray-500 text-[10px]"),s(_,"class","flex-1 min-w-0")},m(m,d){V(m,e,d),c(e,t),V(m,l,d),V(m,_,d),c(_,w),c(w,i),c(_,n),c(_,u)},p(m,d){d[0]&536870912&&p!==(p=m[116].name+"")&&de(i,p)},d(m){m&&(N(e),N(l),N(_))}}}function wc(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function kc(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function Pi(r,e){let t,l,_,w,p;function i(y,k){return y[116].is_parent?yc:y[116].is_dir?bc:vc}let n=i(e),u=n(e);function m(){return e[76](e[116])}function d(){return e[77](e[116])}function g(...y){return e[78](e[116],...y)}return{key:r,first:null,c(){t=L("div"),u.c(),l=O(),s(t,"class",_="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(y,k){V(y,t,k),u.m(t,null),c(t,l),w||(p=[$(t,"click",m),$(t,"dblclick",d),$(t,"contextmenu",g)],w=!0)},p(y,k){e=y,n===(n=i(e))&&u?u.p(e,k):(u.d(1),u=n(e),u&&(u.c(),u.m(t,l))),k[0]&537133056&&_!==(_="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&s(t,"class",_)},d(y){y&&N(t),u.d(),w=!1,Pe(p)}}}function Hi(r){let e,t,l,_,w,p,i,n,u,m,d;return{c(){var g;e=L("div"),t=L("button"),l=Z("下载"),w=O(),p=L("button"),p.textContent="重命名",i=O(),n=L("button"),n.textContent="删除",s(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=_=(g=r[19].file)==null?void 0:g.is_dir,s(p,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),s(n,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),s(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),s(e,"style",u=`left: ${r[19].x}px; top: ${r[19].y}px;`)},m(g,y){V(g,e,y),c(e,t),c(t,l),c(e,w),c(e,p),c(e,i),c(e,n),m||(d=[$(t,"click",r[44]),$(p,"click",r[45]),$(n,"click",r[43])],m=!0)},p(g,y){var k;y[0]&524288&&_!==(_=(k=g[19].file)==null?void 0:k.is_dir)&&(t.disabled=_),y[0]&524288&&u!==(u=`left: ${g[19].x}px; top: ${g[19].y}px;`)&&s(e,"style",u)},d(g){g&&N(e),m=!1,Pe(d)}}}function Ii(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X,ie,G,D,H,F,W,J,j,K,Q=r[0].historyEnabled&&Fi(r),I=r[0].historyEnabled&&r[0].history.length>0&&ji(r);return{c(){e=L("div"),t=L("div"),l=O(),_=L("div"),w=L("div"),p=L("div"),i=L("div"),i.innerHTML='<div class="p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div><h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">文件管理设置</h3> <div class="text-[11px] uppercase tracking-[0.15em] text-slate-400 dark:text-slate-500 mt-0.5">Preferences</div></div>',n=O(),u=L("button"),u.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),d=L("div"),g=L("div"),y=L("div"),y.innerHTML='<svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">功能设置</span>',k=O(),v=L("div"),o=L("div"),o.innerHTML='<div class="p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">目录跟踪</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">实时同步终端目录变化</div></div>',h=O(),a=L("button"),f=L("span"),C=O(),x=L("div"),S=L("div"),S.innerHTML='<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">历史记录</span>',M=O(),T=L("div"),R=L("div"),R.innerHTML='<div class="p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">启用历史记录</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">自动记录访问过的目录</div></div>',P=O(),A=L("button"),z=L("span"),ie=O(),Q&&Q.c(),G=O(),I&&I.c(),D=O(),H=L("div"),F=L("button"),F.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            恢复默认`,W=O(),J=L("button"),J.textContent="完成",s(t,"class","fixed inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(i,"class","flex items-center gap-3"),s(u,"class","p-2 rounded-xl transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(u,"title","关闭"),s(p,"class","flex items-center justify-between"),s(w,"class","px-5 py-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-b border-slate-200/70 dark:border-slate-800/80"),s(y,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(o,"class","flex items-center gap-3"),s(f,"class",b=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].directoryTracking?"translate-x-6":"translate-x-1"}`),s(a,"class",E=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(v,"class","flex items-center justify-between py-2"),s(g,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(S,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(R,"class","flex items-center gap-3"),s(z,"class",q=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].historyEnabled?"translate-x-6":"translate-x-1"}`),s(A,"class",X=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(T,"class","flex items-center justify-between py-2 mb-4"),s(x,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(d,"class","flex-1 overflow-y-auto p-5 space-y-4 bg-slate-50/50 dark:bg-slate-950/30"),s(F,"class","px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all duration-200 flex items-center gap-1.5"),s(J,"class","px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"),s(H,"class","p-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-t border-slate-200/70 dark:border-slate-800/80 flex justify-between items-center"),s(_,"class","relative bg-white/95 dark:bg-slate-900/90 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] w-[420px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(B,te){V(B,e,te),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),c(p,i),c(p,n),c(p,u),c(_,m),c(_,d),c(d,g),c(g,y),c(g,k),c(g,v),c(v,o),c(v,h),c(v,a),c(a,f),c(d,C),c(d,x),c(x,S),c(x,M),c(x,T),c(T,R),c(T,P),c(T,A),c(A,z),c(x,ie),Q&&Q.m(x,null),c(d,G),I&&I.m(d,null),c(_,D),c(_,H),c(H,F),c(H,W),c(H,J),j||(K=[$(t,"click",r[82]),$(u,"click",r[83]),$(a,"click",r[84]),$(A,"click",r[85]),$(F,"click",r[89]),$(J,"click",r[90])],j=!0)},p(B,te){te[0]&1&&b!==(b=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${B[0].directoryTracking?"translate-x-6":"translate-x-1"}`)&&s(f,"class",b),te[0]&1&&E!==(E=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${B[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(a,"class",E),te[0]&1&&q!==(q=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${B[0].historyEnabled?"translate-x-6":"translate-x-1"}`)&&s(z,"class",q),te[0]&1&&X!==(X=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${B[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(A,"class",X),B[0].historyEnabled?Q?Q.p(B,te):(Q=Fi(B),Q.c(),Q.m(x,null)):Q&&(Q.d(1),Q=null),B[0].historyEnabled&&B[0].history.length>0?I?I.p(B,te):(I=ji(B),I.c(),I.m(d,null)):I&&(I.d(1),I=null)},d(B){B&&N(e),Q&&Q.d(),I&&I.d(),j=!1,Pe(K)}}}function Fi(r){let e,t,l,_,w,p=r[0].historyLimit+"",i,n,u,m,d,g,y,k;return{c(){e=L("div"),t=L("div"),l=L("div"),l.innerHTML='<svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="text-xs font-medium text-slate-600 dark:text-slate-400">历史记录数量</span>',_=O(),w=L("span"),i=Z(p),n=O(),u=L("div"),m=L("input"),d=O(),g=L("div"),g.innerHTML="<span>5</span> <span>50</span>",s(l,"class","flex items-center gap-2"),s(w,"class","text-sm font-bold text-purple-600 dark:text-purple-400 min-w-[2rem] text-center"),s(t,"class","flex items-center justify-between mb-3"),s(m,"type","range"),s(m,"min","5"),s(m,"max","50"),s(m,"step","5"),s(m,"class","w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500/30"),s(g,"class","flex justify-between text-[10px] text-slate-400 mt-1.5"),s(u,"class","relative"),s(e,"class","py-3 px-3 bg-slate-50/80 dark:bg-slate-800/50 rounded-xl")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(t,_),c(t,w),c(w,i),c(e,n),c(e,u),c(u,m),Ce(m,r[0].historyLimit),c(u,d),c(u,g),y||(k=[$(m,"change",r[86]),$(m,"input",r[86]),$(m,"change",r[30])],y=!0)},p(v,o){o[0]&1&&p!==(p=v[0].historyLimit+"")&&de(i,p),o[0]&1&&Ce(m,v[0].historyLimit)},d(v){v&&N(e),y=!1,Pe(k)}}}function ji(r){let e,t,l,_,w,p,i,n,u,m=r[0].history.length+"",d,g,y,k,v,o=[],h=new Tr,a,f,b=ze(r[0].history.slice().reverse());const E=C=>C[115];for(let C=0;C<b.length;C+=1){let x=xi(r,b,C),S=E(x);h.set(S,o[C]=Wi(S,x))}return{c(){e=L("div"),t=L("div"),l=L("div"),_=le("svg"),w=le("path"),p=O(),i=L("span"),n=Z(`当前历史记录
                    `),u=L("span"),d=Z(m),g=O(),y=L("button"),y.innerHTML=`<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                  清空`,k=O(),v=L("div");for(let C=0;C<o.length;C+=1)o[C].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),s(_,"class","w-4 h-4 text-emerald-500"),s(_,"fill","none"),s(_,"stroke","currentColor"),s(_,"viewBox","0 0 24 24"),s(u,"class","ml-1.5 text-xs px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-full"),s(i,"class","text-sm font-semibold text-slate-700 dark:text-slate-200"),s(l,"class","flex items-center gap-2"),s(y,"class","text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1"),s(t,"class","flex items-center justify-between mb-3 pb-2 border-b border-slate-100 dark:border-slate-800/60"),s(v,"class","space-y-1.5 max-h-40 overflow-y-auto pr-1 scrollbar-thin"),s(e,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm")},m(C,x){V(C,e,x),c(e,t),c(t,l),c(l,_),c(_,w),c(l,p),c(l,i),c(i,n),c(i,u),c(u,d),c(t,g),c(t,y),c(e,k),c(e,v);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(v,null);a||(f=$(y,"click",r[87]),a=!0)},p(C,x){x[0]&1&&m!==(m=C[0].history.length+"")&&de(d,m),x[0]&1073741825&&(b=ze(C[0].history.slice().reverse()),o=Lt(o,x,E,1,C,b,h,v,Mt,Wi,null,xi))},d(C){C&&N(e);for(let x=0;x<o.length;x+=1)o[x].d();a=!1,f()}}}function Wi(r,e){let t,l,_,w=e[0].history.length-e[115]+"",p,i,n,u=e[113]+"",m,d,g,y,k,v;function o(){return e[88](e[113])}return{key:r,first:null,c(){t=L("div"),l=L("div"),_=L("div"),p=Z(w),i=O(),n=L("span"),m=Z(u),d=O(),g=L("button"),g.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',y=O(),s(_,"class","w-5 h-5 flex items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 font-bold text-[10px]"),s(n,"class","truncate text-slate-700 dark:text-slate-300 font-medium"),s(l,"class","flex items-center gap-2 flex-1 min-w-0"),s(g,"class","ml-2 p-1 rounded-md text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100"),s(g,"title","删除记录"),s(t,"class","group flex items-center justify-between text-xs py-2 px-3 bg-slate-50 dark:bg-slate-800/60 rounded-lg border border-slate-100 dark:border-slate-700/50 hover:border-purple-300 dark:hover:border-purple-700/50 transition-all duration-200"),this.first=t},m(h,a){V(h,t,a),c(t,l),c(l,_),c(_,p),c(l,i),c(l,n),c(n,m),c(t,d),c(t,g),c(t,y),k||(v=$(g,"click",o),k=!0)},p(h,a){e=h,a[0]&1&&w!==(w=e[0].history.length-e[115]+"")&&de(p,w),a[0]&1&&u!==(u=e[113]+"")&&de(m,u)},d(h){h&&N(t),k=!1,v()}}}function Sc(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X,ie,G,D,H,F,W,J,j,K,Q,I,B,te,U,ae,ce,he,ee,oe,ue=r[0].directoryTracking&&Di(r);function pe(Y,me){return Y[20]?oc:nc}let Be=pe(r),Le=Be(r),Se=r[9]&&r[0].historyEnabled&&Ti(r),ve=r[10]&&Ai(r);function re(Y,me){return Y[16]?mc:Y[17]?gc:Y[29].length===0?pc:Y[6]?_c:fc}let ge=re(r),ne=ge(r),be=r[19].open&&Hi(r);function We(Y){r[79](Y)}let Fe={title:"删除文件",message:r[23],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[41],onCancel:r[42]};r[22]!==void 0&&(Fe.isOpen=r[22]),j=new lr({props:Fe}),lt.push(()=>gt(j,"isOpen",We));function Qe(Y){r[80](Y)}let qe={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[31],onCancel:r[32]};r[24]!==void 0&&(qe.isOpen=r[24]),I=new lr({props:qe}),lt.push(()=>gt(I,"isOpen",Qe));function Ke(Y){r[81](Y)}let et={title:r[26],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[27],confirmText:"重命名",cancelText:"取消",onConfirm:r[46],onCancel:r[47]};r[25]!==void 0&&(et.isOpen=r[25]),U=new un({props:et}),lt.push(()=>gt(U,"isOpen",Ke));let Te=r[8]&&Ii(r);return{c(){e=L("div"),t=L("div"),l=L("div"),_=L("h3"),_.textContent="文件管理",w=O(),p=L("div"),i=L("button"),n=le("svg"),u=le("path"),m=O(),ue&&ue.c(),d=O(),g=L("button"),y=le("svg"),k=le("path"),v=O(),o=L("button"),o.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',h=O(),a=L("button"),f=le("svg"),b=le("path"),C=O(),x=L("button"),x.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',S=O(),M=L("div"),T=L("div"),R=L("button"),R.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',P=O(),Le.c(),A=O(),z=L("button"),z.innerHTML='<svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>',q=O(),X=L("div"),ie=L("button"),ie.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',G=O(),Se&&Se.c(),D=O(),ve&&ve.c(),H=O(),F=L("div"),ne.c(),W=O(),be&&be.c(),J=O(),Ze(j.$$.fragment),Q=O(),Ze(I.$$.fragment),te=O(),Ze(U.$$.fragment),ce=O(),Te&&Te.c(),s(_,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","2"),s(u,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),s(n,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"viewBox","0 0 24 24"),i.disabled=r[6],s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(i,"title","刷新"),s(k,"stroke-linecap","round"),s(k,"stroke-linejoin","round"),s(k,"stroke-width","2"),s(k,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(y,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),s(y,"fill","none"),s(y,"stroke","currentColor"),s(y,"viewBox","0 0 24 24"),g.disabled=r[6],s(g,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(g,"title","上传到服务器"),s(o,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(o,"title","下载到本地"),s(b,"stroke-linecap","round"),s(b,"stroke-linejoin","round"),s(b,"stroke-width","2"),s(b,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),s(f,"class","w-4 h-4 text-red-500 dark:text-red-400"),s(f,"fill","none"),s(f,"stroke","currentColor"),s(f,"viewBox","0 0 24 24"),a.disabled=E=r[6]||r[18].size===0,s(a,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(a,"title","删除选中"),s(x,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(x,"title","文件管理设置"),s(p,"class","flex items-center gap-1"),s(l,"class","flex items-center justify-between mb-2"),s(R,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(R,"title","根目录"),s(T,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),s(z,"class","p-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors"),s(z,"title","模糊搜索文件夹"),s(ie,"class","p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors"),s(ie,"title","路径历史"),s(X,"class","relative"),s(M,"class","flex items-center gap-2"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(F,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(Y,me){V(Y,e,me),c(e,t),c(t,l),c(l,_),c(l,w),c(l,p),c(p,i),c(i,n),c(n,u),c(p,m),ue&&ue.m(p,null),c(p,d),c(p,g),c(g,y),c(y,k),c(p,v),c(p,o),c(p,h),c(p,a),c(a,f),c(f,b),c(p,C),c(p,x),c(t,S),c(t,M),c(M,T),c(T,R),c(T,P),Le.m(T,null),c(M,A),c(M,z),c(M,q),c(M,X),c(X,ie),c(X,G),Se&&Se.m(X,null),c(t,D),ve&&ve.m(t,null),c(e,H),c(e,F),ne.m(F,null),c(e,W),be&&be.m(e,null),c(e,J),Je(j,e,null),c(e,Q),Je(I,e,null),c(e,te),Je(U,e,null),c(e,ce),Te&&Te.m(e,null),he=!0,ee||(oe=[$(i,"click",r[33]),$(g,"click",r[34]),$(a,"click",r[40]),$(x,"click",r[66]),$(R,"click",r[67]),$(z,"click",r[57]),$(ie,"click",r[70]),$(F,"click",r[39])],ee=!0)},p(Y,me){(!he||me[0]&64)&&(i.disabled=Y[6]),Y[0].directoryTracking?ue?ue.p(Y,me):(ue=Di(Y),ue.c(),ue.m(p,d)):ue&&(ue.d(1),ue=null),(!he||me[0]&64)&&(g.disabled=Y[6]),(!he||me[0]&262208&&E!==(E=Y[6]||Y[18].size===0))&&(a.disabled=E),Be===(Be=pe(Y))&&Le?Le.p(Y,me):(Le.d(1),Le=Be(Y),Le&&(Le.c(),Le.m(T,null))),Y[9]&&Y[0].historyEnabled?Se?Se.p(Y,me):(Se=Ti(Y),Se.c(),Se.m(X,null)):Se&&(Se.d(1),Se=null),Y[10]?ve?ve.p(Y,me):(ve=Ai(Y),ve.c(),ve.m(t,null)):ve&&(ve.d(1),ve=null),ge===(ge=re(Y))&&ne?ne.p(Y,me):(ne.d(1),ne=ge(Y),ne&&(ne.c(),ne.m(F,null))),Y[19].open?be?be.p(Y,me):(be=Hi(Y),be.c(),be.m(e,J)):be&&(be.d(1),be=null);const ke={};me[0]&8388608&&(ke.message=Y[23]),!K&&me[0]&4194304&&(K=!0,ke.isOpen=Y[22],pt(()=>K=!1)),j.$set(ke);const ye={};!B&&me[0]&16777216&&(B=!0,ye.isOpen=Y[24],pt(()=>B=!1)),I.$set(ye);const Me={};me[0]&67108864&&(Me.title=Y[26]),me[0]&134217728&&(Me.defaultValue=Y[27]),!ae&&me[0]&33554432&&(ae=!0,Me.isOpen=Y[25],pt(()=>ae=!1)),U.$set(Me),Y[8]?Te?Te.p(Y,me):(Te=Ii(Y),Te.c(),Te.m(e,null)):Te&&(Te.d(1),Te=null)},i(Y){he||(Oe(j.$$.fragment,Y),Oe(I.$$.fragment,Y),Oe(U.$$.fragment,Y),he=!0)},o(Y){He(j.$$.fragment,Y),He(I.$$.fragment,Y),He(U.$$.fragment,Y),he=!1},d(Y){Y&&N(e),ue&&ue.d(),Le.d(),Se&&Se.d(),ve&&ve.d(),ne.d(),be&&be.d(),Xe(j),Xe(I),Xe(U),Te&&Te.d(),ee=!1,Pe(oe)}}}function Cn(r){return r.focus(),{destroy(){}}}function Cc(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function zi(r,e){if(!e)return r;const t=new RegExp(`(${xc(e)})`,"gi");return r.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100 px-0.5 rounded">$1</mark>')}function xc(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ec(r,e,t){let l,_,w,p,i,n,u,m,d,g,y,k;vt(r,At,se=>t(63,g=se)),vt(r,zt,se=>t(64,y=se)),vt(r,St,se=>t(98,k=se));let v=new Map,o={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]},h=new Map,a=null,f=!1,b=!1,E=!1,C="",x=!1,S="",M=[],T=!1,R=-1,P=null,A=new Set([]),z=[],q=!1,X=null,ie=new Set,G=[],D={open:!1,x:0,y:0,file:null},H=!1,F="",W=!1,J="",j=[],K=!1,Q=null,I=!1,B="",te="",U=null;async function ae(se){try{const{GetFileManagerSettings:xe}=window.wailsBindings;if(typeof xe!="function")return;const Ve=await xe(se);if(t(0,o={directoryTracking:(Ve==null?void 0:Ve.directory_tracking)??!1,historyEnabled:(Ve==null?void 0:Ve.history_enabled)??!0,historyLimit:(Ve==null?void 0:Ve.history_limit)??5,history:(Ve==null?void 0:Ve.history)??[]}),!h.has(se)){const ot=new Map(h);ot.set(se,o.directoryTracking||!1),t(1,h=ot)}}catch(xe){console.error("Failed to load file manager config:",xe)}}async function ce(){try{const{UpdateFileManagerSettings:se}=window.wailsBindings;if(typeof se!="function"||!m)return;await se(m,{directory_tracking:o.directoryTracking,history_enabled:o.historyEnabled,history_limit:o.historyLimit,history:o.history})}catch(se){console.error("Failed to save file manager settings:",se)}}let he="/";function ee(se){return se&&v.get(se)||"/"}function oe(se,xe){if(!se)return;const Ve=new Map(v);Ve.set(se,xe),t(58,v=Ve)}async function ue(se){if(!(!y||!_)&&!w){t(16,q=!0),t(17,X=null);try{const xe=await mn(y,se);t(59,z=xe||[]),oe(y,se),t(3,he=se)}catch(xe){console.error("Failed to load directory:",xe),t(17,X=xe.message||"加载目录失败")}finally{t(16,q=!1)}}}async function pe(){t(24,K=!1);const se=Q;if(Q=null,se)try{await Ur(se.id)}catch(xe){console.error("Cancel transfer failed:",xe)}St.cancelTransfer(se.id)}function Be(){t(24,K=!1),Q=null}async function Le(){await ue(he)}async function Se(){if(!(!y||!_||w))try{const se=await wn();if(!se||se.length===0)return;(await kn(y,se,he)).forEach(Ve=>ke(Ve,"upload")),setTimeout(()=>ue(he),2e3)}catch(se){console.error("Upload failed:",se),t(17,X=se.message||"上传失败")}}async function ve(se){if(!(!y||!_||w||se.is_dir))try{const xe=await yn();if(!xe)return;(await gn(y,[se.path],xe)).forEach(ot=>ke(ot,"download"))}catch(xe){console.error("Download failed:",xe),t(17,X=xe.message||"下载失败")}}function re(se){!se||se.is_parent||t(18,ie=new Set([se.path]))}function ge(se){!se||se.is_parent||re(se)}function ne(se){!se||!se.is_parent||ye(se.path,!0)}function be(se,xe){xe!=null&&xe.is_parent||(se.preventDefault(),re(xe),t(19,D={open:!0,x:se.clientX,y:se.clientY,file:xe}))}function We(){D.open&&t(19,D={...D,open:!1})}async function Fe(){if(!y||!_||w||ie.size===0)return;j=Array.from(ie);const se=j.length;t(23,J=se===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${se} 个文件/文件夹吗？`),t(22,W=!0)}async function Qe(){t(22,W=!1);try{await pn(y,j),t(18,ie=new Set),j=[],await ue(he)}catch(se){console.error("Delete failed:",se),t(17,X=se.message||"删除失败")}}function qe(){t(22,W=!1),j=[]}async function Ke(){const se=D.file;se&&(We(),j=[se.path],t(23,J=`确定要删除 "${se.name}" 吗？`),t(22,W=!0))}async function et(){const se=D.file;We(),se&&!se.is_dir&&await ve(se)}async function Te(){const se=D.file;We(),se&&(U=se,t(26,B="重命名"),t(27,te=se.name),t(25,I=!0))}async function Y(se){t(25,I=!1);const xe=U;if(U=null,!(!xe||!se||se.trim()===xe.name))try{const ot=`${he.endsWith("/")?he:`${he}/`}${se.trim()}`;await vn(y,xe.path,ot),await ue(he)}catch(Ve){console.error("Rename failed:",Ve),t(17,X=Ve.message||"重命名失败")}}function me(){t(25,I=!1),U=null}function ke(se,xe){const Ve=`sftp:progress:${se}`,ot=pr(Ve,it=>{if(xe==="upload"){const dt={id:se,filename:it.filename||it.fileName||"unknown",bytesSent:it.bytes_sent??it.bytesSent??0,totalBytes:it.total_bytes??it.totalBytes??0,percentage:it.percentage??0,speed:it.speed??0,status:it.status||"running",error:it.error||""};k.transfers.find(tr=>tr.id===se)?St.updateTransfer(se,dt):St.addTransfer(dt)}});G.push(ot)}function ye(se,xe=!1){if(xe&&d&&m){const Ve=new Map(h);Ve.set(m,!1),t(1,h=Ve),t(7,f=!0)}if(o.historyEnabled&&se!==he){const Ve=o.historyLimit||5,ot=[...o.history||[]],it=ot.indexOf(se);it!==-1&&ot.splice(it,1),ot.unshift(se);const dt=ot.slice(0,Ve);t(0,o.history=dt,o),ce()}ue(se)}async function Me(){if(y)try{const{GetCurrentPath:se}=window.wailsBindings;if(typeof se!="function")return;const xe=await se(y);xe&&xe!==he&&(t(7,f=!1),ye(xe,!1))}catch(se){console.error("Failed to sync directory from server:",se)}}function De(){if(!o.directoryTracking||!d||a)return;const se=y;se&&(a=pr(`ssh:cwd:${se}`,xe=>{xe&&xe!==he&&!f&&ye(xe,!1)}))}function Re(){a&&(a(),a=null)}function we(se){if(se===-1)ye("/",!0);else{const xe="/"+n.slice(0,se+1).join("/");ye(xe,!0)}}function Ue(){t(21,F=he),t(20,H=!0)}function ht(){F.trim()&&ye(F.trim(),!0),t(20,H=!1)}function Ye(){t(20,H=!1),t(21,F="")}async function tt(){if(!(!S.trim()||!y)){P&&P.abort(),P=new AbortController,t(13,T=!0),t(12,M=[]),t(14,R=-1);try{const se=await bn(y,he,S.trim(),3,50);if(P.signal.aborted)return;t(12,M=se||[])}catch(se){console.error("Directory search failed:",se),t(17,X=se.message||"搜索失败")}finally{t(13,T=!1)}}}let bt;function je(){clearTimeout(bt),S.trim().length>=1?bt=setTimeout(()=>{tt()},300):t(12,M=[])}function rt(se){se.key==="Enter"?(se.preventDefault(),R>=0&&M[R]?(ye(M[R].path,!0),at()):tt()):se.key==="Escape"?at():se.key==="ArrowDown"?(se.preventDefault(),R<M.length-1&&t(14,R++,R)):se.key==="ArrowUp"&&(se.preventDefault(),R>0&&t(14,R--,R))}function at(){t(10,x=!1),t(11,S=""),t(12,M=[]),t(14,R=-1),P&&(P.abort(),P=null)}function $e(){t(10,x=!0),t(11,S=""),t(12,M=[]),t(14,R=-1)}ar(()=>{}),Mr(()=>{G.forEach(se=>se()),Re(),clearTimeout(bt),P&&P.abort()});const nt=async()=>{if(m){const se=!d,xe=new Map(h);xe.set(m,se),t(1,h=xe),se&&(t(7,f=!1),await Me())}},ct=()=>t(8,b=!0),Ge=()=>we(-1);function fe(){F=this.value,t(21,F)}const _e=se=>{se.key==="Enter"?ht():se.key==="Escape"&&Ye()},Ne=()=>t(9,E=!E);function qt(){C=this.value,t(2,C)}const kt=se=>{ye(se,!0),t(9,E=!1),t(2,C="")};function Ot(){S=this.value,t(11,S)}const Ft=se=>{ye(se.path,!0),at()},Gt=se=>t(14,R=se),Jt=se=>se.is_parent?ne(se):ge(se),cr=se=>{se.is_dir&&!se.is_parent?ye(se.path,!0):se.is_dir||ve(se)},mr=(se,xe)=>be(xe,se);function jt(se){W=se,t(22,W)}function Xt(se){K=se,t(24,K)}function vr(se){I=se,t(25,I)}const Yt=()=>t(8,b=!1),Zt=()=>t(8,b=!1),hr=()=>{t(0,o.directoryTracking=!o.directoryTracking,o),ce()},br=()=>{t(0,o.historyEnabled=!o.historyEnabled,o),o.historyEnabled||t(0,o.history=[],o),ce()};function Wt(){o.historyLimit=Wr(this.value),t(0,o),t(64,y),t(60,p),t(62,_),t(6,w),t(61,l),t(63,g)}const Qt=()=>{t(0,o.history=[],o),ce()},yr=se=>{t(0,o.history=o.history.filter(xe=>xe!==se),o),ce()},$t=()=>{t(0,o={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),ce()},er=()=>t(8,b=!1);return r.$$.update=()=>{var se;if(r.$$.dirty[2]&6&&t(61,l=y?g.get(y):null),r.$$.dirty[1]&1073741824&&t(62,_=(l==null?void 0:l.connected)||!1),r.$$.dirty[1]&1073741824&&t(6,w=(l==null?void 0:l.type)==="local"),r.$$.dirty[0]&64|r.$$.dirty[2]&1&&t(60,p=_&&!w),r.$$.dirty[1]&1073741824&&t(5,m=((se=l==null?void 0:l.connection)==null?void 0:se.id)||null),r.$$.dirty[0]&32|r.$$.dirty[2]&4&&y&&m&&ae(m),r.$$.dirty[0]&8|r.$$.dirty[2]&4)if(y){const xe=ee(y);xe&&xe!==he&&t(3,he=xe)}else t(3,he="/");if(r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(!y||!p)&&(t(59,z=[]),t(17,X=null),t(18,ie=new Set),t(15,A=new Set),t(3,he="/"),t(58,v=new Map),t(1,h=new Map),t(0,o={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),t(8,b=!1),t(9,E=!1),t(10,x=!1),t(19,D={open:!1,x:0,y:0,file:null})),r.$$.dirty[0]&8|r.$$.dirty[1]&268435456&&t(29,i=(()=>{const xe=Cc(z);return he==="/"?xe:[{name:"..",path:he.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...xe]})()),r.$$.dirty[0]&8&&(n=he.split("/").filter(xe=>xe)),r.$$.dirty[0]&5&&t(28,u=o.historyEnabled&&C?o.history.filter(xe=>xe.toLowerCase().includes(C.toLowerCase())):o.history||[]),r.$$.dirty[0]&34&&t(4,d=m&&h.get(m)||!1),r.$$.dirty[0]&40|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&p&&m?(ae(m),ue(he),De()):Re()),r.$$.dirty[0]&17|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&p&&o.directoryTracking&&d?De():Re()),r.$$.dirty[1]&134217728|r.$$.dirty[2]&2&&g){const xe=new Set(g.keys()),Ve=new Map(v);for(const ot of Ve.keys())xe.has(ot)||Ve.delete(ot);t(58,v=Ve)}},[o,h,C,he,d,m,w,f,b,E,x,S,M,T,R,A,q,X,ie,D,H,F,W,J,K,I,B,te,u,i,ce,pe,Be,Le,Se,ve,ge,ne,be,We,Fe,Qe,qe,Ke,et,Te,Y,me,ye,Me,we,Ue,ht,Ye,je,rt,at,$e,v,z,p,l,_,g,y,nt,ct,Ge,fe,_e,Ne,qt,kt,Ot,Ft,Gt,Jt,cr,mr,jt,Xt,vr,Yt,Zt,hr,br,Wt,Qt,yr,$t,er]}class Lc extends _t{constructor(e){super(),ft(this,e,Ec,Sc,ut,{},null,[-1,-1,-1,-1])}}function Ui(r,e,t){const l=r.slice();return l[37]=e[t],l[39]=t,l}function Mc(r){let e;return{c(){e=Z("请先连接到服务器")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Dc(r){let e;return{c(){e=Z("实时数据获取中...")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Tc(r){let e;return{c(){e=Z("本地终端不支持服务器监控")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Ni(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',s(e,"class","p-3 space-y-3")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Vi(r){let e,t,l,_,w,p=r[8]["1min"].toFixed(2)+"",i,n,u,m=r[8]["5min"].toFixed(2)+"",d,g,y,k=r[8]["15min"].toFixed(2)+"",v;return{c(){e=L("div"),t=L("span"),t.textContent="负载:",l=O(),_=L("div"),w=L("span"),i=Z(p),n=O(),u=L("span"),d=Z(m),g=O(),y=L("span"),v=Z(k),s(t,"class","text-[9px] text-gray-600 dark:text-gray-400"),s(w,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Ee(w,"color",mt(r[8]["1min"]*100)),s(u,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Ee(u,"color",mt(r[8]["5min"]*100)),s(y,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),Ee(y,"color",mt(r[8]["15min"]*100)),s(_,"class","flex gap-2 text-[9px]"),s(e,"class","flex items-center gap-2 mb-2")},m(o,h){V(o,e,h),c(e,t),c(e,l),c(e,_),c(_,w),c(w,i),c(_,n),c(_,u),c(u,d),c(_,g),c(_,y),c(y,v)},p(o,h){h[0]&256&&p!==(p=o[8]["1min"].toFixed(2)+"")&&de(i,p),h[0]&256&&Ee(w,"color",mt(o[8]["1min"]*100)),h[0]&256&&m!==(m=o[8]["5min"].toFixed(2)+"")&&de(d,m),h[0]&256&&Ee(u,"color",mt(o[8]["5min"]*100)),h[0]&256&&k!==(k=o[8]["15min"].toFixed(2)+"")&&de(v,k),h[0]&256&&Ee(y,"color",mt(o[8]["15min"]*100))},d(o){o&&N(e)}}}function Bc(r){let e;return{c(){e=L("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function Ac(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o;return{c(){e=le("svg"),t=le("defs"),l=le("linearGradient"),_=le("stop"),w=le("stop"),p=le("line"),i=le("line"),n=le("line"),u=le("path"),d=le("path"),y=O(),k=L("div"),k.textContent="100%",v=O(),o=L("div"),o.textContent="0%",s(_,"offset","0%"),Ee(_,"stop-color","rgb(139, 92, 246)"),Ee(_,"stop-opacity","0.3"),s(w,"offset","100%"),Ee(w,"stop-color","rgb(139, 92, 246)"),Ee(w,"stop-opacity","0.05"),s(l,"id","cpuGradient"),s(l,"x1","0%"),s(l,"y1","0%"),s(l,"x2","0%"),s(l,"y2","100%"),s(p,"x1","0"),s(p,"y1","25%"),s(p,"x2","100%"),s(p,"y2","25%"),s(p,"stroke","currentColor"),s(p,"stroke-width","0.5"),s(p,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(n,"x1","0"),s(n,"y1","75%"),s(n,"x2","100%"),s(n,"y2","75%"),s(n,"stroke","currentColor"),s(n,"stroke-width","0.5"),s(n,"class","text-gray-200 dark:text-gray-700"),s(u,"d",m=r[2].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),s(u,"fill","url(#cpuGradient)"),s(u,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[2].map(r[16]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(139, 92, 246)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(o,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(h,a){V(h,e,a),c(e,t),c(t,l),c(l,_),c(l,w),c(e,p),c(e,i),c(e,n),c(e,u),c(e,d),V(h,y,a),V(h,k,a),V(h,v,a),V(h,o,a)},p(h,a){a[0]&4&&m!==(m=h[2].map(h[15]).join(" ")+" L 100 100 L 0 100 Z")&&s(u,"d",m),a[0]&4&&g!==(g=h[2].map(h[16]).join(" "))&&s(d,"d",g)},d(h){h&&(N(e),N(y),N(k),N(v),N(o))}}}function Ki(r){let e,t=ze(r[4]),l=[];for(let _=0;_<t.length;_+=1)l[_]=qi(Ui(r,t,_));return{c(){e=L("div");for(let _=0;_<l.length;_+=1)l[_].c();s(e,"class","mt-2 flex flex-wrap gap-1")},m(_,w){V(_,e,w);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(e,null)},p(_,w){if(w[0]&16){t=ze(_[4]);let p;for(p=0;p<t.length;p+=1){const i=Ui(_,t,p);l[p]?l[p].p(i,w):(l[p]=qi(i),l[p].c(),l[p].m(e,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=t.length}},d(_){_&&N(e),Nt(l,_)}}}function qi(r){let e,t,l,_,w,p;return{c(){e=L("div"),t=L("div"),l=L("div"),_=O(),w=L("span"),w.textContent=`C${r[39]+1}`,p=O(),s(l,"class","h-full rounded-full transition-all duration-300"),Ee(l,"width",r[37]+"%"),Ee(l,"background-color",mt(r[37])),s(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),s(w,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),s(e,"class","flex flex-col items-center")},m(i,n){V(i,e,n),c(e,t),c(t,l),c(e,_),c(e,w),c(e,p)},p(i,n){n[0]&16&&Ee(l,"width",i[37]+"%"),n[0]&16&&Ee(l,"background-color",mt(i[37]))},d(i){i&&N(e)}}}function Rc(r){let e;return{c(){e=L("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function Oc(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o;return{c(){e=le("svg"),t=le("defs"),l=le("linearGradient"),_=le("stop"),w=le("stop"),p=le("line"),i=le("line"),n=le("line"),u=le("path"),d=le("path"),y=O(),k=L("div"),k.textContent="100%",v=O(),o=L("div"),o.textContent="0%",s(_,"offset","0%"),Ee(_,"stop-color","rgb(16, 185, 129)"),Ee(_,"stop-opacity","0.3"),s(w,"offset","100%"),Ee(w,"stop-color","rgb(16, 185, 129)"),Ee(w,"stop-opacity","0.05"),s(l,"id","memoryGradient"),s(l,"x1","0%"),s(l,"y1","0%"),s(l,"x2","0%"),s(l,"y2","100%"),s(p,"x1","0"),s(p,"y1","25%"),s(p,"x2","100%"),s(p,"y2","25%"),s(p,"stroke","currentColor"),s(p,"stroke-width","0.5"),s(p,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(n,"x1","0"),s(n,"y1","75%"),s(n,"x2","100%"),s(n,"y2","75%"),s(n,"stroke","currentColor"),s(n,"stroke-width","0.5"),s(n,"class","text-gray-200 dark:text-gray-700"),s(u,"d",m=r[3].map(r[17]).join(" ")+" L 100 100 L 0 100 Z"),s(u,"fill","url(#memoryGradient)"),s(u,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[3].map(r[18]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(16, 185, 129)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(o,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(h,a){V(h,e,a),c(e,t),c(t,l),c(l,_),c(l,w),c(e,p),c(e,i),c(e,n),c(e,u),c(e,d),V(h,y,a),V(h,k,a),V(h,v,a),V(h,o,a)},p(h,a){a[0]&8&&m!==(m=h[3].map(h[17]).join(" ")+" L 100 100 L 0 100 Z")&&s(u,"d",m),a[0]&8&&g!==(g=h[3].map(h[18]).join(" "))&&s(d,"d",g)},d(h){h&&(N(e),N(y),N(k),N(v),N(o))}}}function Pc(r){var Vr,Kr;let e,t,l,_,w,p,i,n,u,m,d,g,y,k=r[5].cpu.toFixed(1)+"",v,o,h,a,f,b,E,C,x,S,M,T,R,P=r[9].used+"",A,z,q=r[9].total+"",X,ie,G,D=r[5].memory.toFixed(2)+"",H,F,W,J,j,K,Q,I,B,te,U=r[5].disk+"",ae,ce,he,ee,oe,ue,pe,Be,Le,Se=r[7].used+"",ve,re,ge,ne,be=r[7].total+"",We,Fe,Qe,qe,Ke,et,Te,Y,me,ke,ye=Cr(((Vr=r[5].network)==null?void 0:Vr.in)||0)+"",Me,De,Re,we,Ue,ht,Ye=Cr(((Kr=r[5].network)==null?void 0:Kr.out)||0)+"",tt,bt,je,rt,at,$e,nt,ct,Ge,fe,_e=(r[6].os||"Unknown")+"",Ne,qt,kt,Ot,Ft,Gt,Jt=(r[6].kernel||"Unknown")+"",cr,mr,jt,Xt,vr,Yt,Zt=(r[6].uptime||"Unknown")+"",hr,br,Wt,Qt,yr,$t,er=(r[6].processes||"N/A")+"",se;function xe(Ie,st){return Ie[0]?Tc:Ie[1]?Dc:Mc}let Ve=xe(r),ot=Ve(r),it=r[0]&&Ni(),dt=r[8]["1min"]>0&&Vi(r);function Br(Ie,st){return Ie[2].length>1?Ac:Bc}let tr=Br(r),Tt=tr(r),yt=r[4].length>0&&Ki(r);function Nr(Ie,st){return Ie[3].length>1?Oc:Rc}let wr=Nr(r),Bt=wr(r);return{c(){e=L("div"),t=L("div"),l=L("h3"),l.textContent="服务器监控",_=O(),w=L("div"),ot.c(),p=O(),it&&it.c(),i=O(),n=L("div"),u=L("div"),m=L("div"),d=L("div"),d.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',g=O(),y=L("span"),v=Z(k),o=Z("%"),h=O(),dt&&dt.c(),a=O(),f=L("div"),Tt.c(),b=O(),yt&&yt.c(),E=O(),C=L("div"),x=L("div"),S=L("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',M=O(),T=L("div"),R=L("span"),A=Z(P),z=Z(" / "),X=Z(q),ie=O(),G=L("span"),H=Z(D),F=Z("%"),W=O(),J=L("div"),Bt.c(),j=O(),K=L("div"),Q=L("div"),I=L("div"),I.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',B=O(),te=L("span"),ae=Z(U),ce=Z("%"),he=O(),ee=L("div"),oe=L("div"),ue=O(),pe=L("div"),Be=L("span"),Le=Z("已用 "),ve=Z(Se),re=O(),ge=L("span"),ne=Z("总计 "),We=Z(be),Fe=O(),Qe=L("div"),qe=L("div"),qe.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',Ke=O(),et=L("div"),Te=L("div"),Y=L("div"),Y.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',me=O(),ke=L("span"),Me=Z(ye),De=O(),Re=L("div"),we=L("div"),we.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',Ue=O(),ht=L("span"),tt=Z(Ye),bt=O(),je=L("div"),rt=L("div"),rt.textContent="系统信息",at=O(),$e=L("div"),nt=L("div"),ct=L("span"),ct.textContent="操作系统",Ge=O(),fe=L("span"),Ne=Z(_e),qt=O(),kt=L("div"),Ot=L("span"),Ot.textContent="内核版本",Ft=O(),Gt=L("span"),cr=Z(Jt),mr=O(),jt=L("div"),Xt=L("span"),Xt.textContent="运行时间",vr=O(),Yt=L("span"),hr=Z(Zt),br=O(),Wt=L("div"),Qt=L("span"),Qt.textContent="进程数",yr=O(),$t=L("span"),se=Z(er),s(l,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(w,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex items-center gap-2"),s(y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Ee(y,"color",mt(r[5].cpu)),s(m,"class","flex items-center justify-between mb-2"),s(f,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(u,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),s(S,"class","flex items-center gap-2"),s(R,"class","text-[10px] text-gray-600 dark:text-gray-400"),s(G,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Ee(G,"color",mt(r[5].memory)),s(T,"class","flex items-center gap-2"),s(x,"class","flex items-center justify-between mb-2"),s(J,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(C,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),s(I,"class","flex items-center gap-2"),s(te,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),Ee(te,"color",mt(r[5].disk)),s(Q,"class","flex items-center justify-between mb-2"),s(oe,"class","h-2 rounded-full transition-all duration-300"),Ee(oe,"width",r[5].disk+"%"),Ee(oe,"background-color",mt(r[5].disk)),s(ee,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),s(pe,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),s(K,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),s(qe,"class","flex items-center gap-2 mb-3"),s(Y,"class","flex items-center gap-2"),s(ke,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(Te,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(we,"class","flex items-center gap-2"),s(ht,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(Re,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(et,"class","space-y-2"),s(Qe,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),s(rt,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),s(ct,"class","text-gray-600 dark:text-gray-400"),s(fe,"class","text-gray-900 dark:text-white font-medium"),s(nt,"class","flex justify-between py-1"),s(Ot,"class","text-gray-600 dark:text-gray-400"),s(Gt,"class","text-gray-900 dark:text-white font-medium"),s(kt,"class","flex justify-between py-1"),s(Xt,"class","text-gray-600 dark:text-gray-400"),s(Yt,"class","text-gray-900 dark:text-white font-medium"),s(jt,"class","flex justify-between py-1"),s(Qt,"class","text-gray-600 dark:text-gray-400"),s($t,"class","text-gray-900 dark:text-white font-medium"),s(Wt,"class","flex justify-between py-1"),s($e,"class","space-y-1.5 text-[10px]"),s(je,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),s(n,"class","p-3 space-y-3"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(Ie,st){V(Ie,e,st),c(e,t),c(t,l),c(t,_),c(t,w),ot.m(w,null),c(e,p),it&&it.m(e,null),c(e,i),c(e,n),c(n,u),c(u,m),c(m,d),c(m,g),c(m,y),c(y,v),c(y,o),c(u,h),dt&&dt.m(u,null),c(u,a),c(u,f),Tt.m(f,null),c(u,b),yt&&yt.m(u,null),c(n,E),c(n,C),c(C,x),c(x,S),c(x,M),c(x,T),c(T,R),c(R,A),c(R,z),c(R,X),c(T,ie),c(T,G),c(G,H),c(G,F),c(C,W),c(C,J),Bt.m(J,null),c(n,j),c(n,K),c(K,Q),c(Q,I),c(Q,B),c(Q,te),c(te,ae),c(te,ce),c(K,he),c(K,ee),c(ee,oe),c(K,ue),c(K,pe),c(pe,Be),c(Be,Le),c(Be,ve),c(pe,re),c(pe,ge),c(ge,ne),c(ge,We),c(n,Fe),c(n,Qe),c(Qe,qe),c(Qe,Ke),c(Qe,et),c(et,Te),c(Te,Y),c(Te,me),c(Te,ke),c(ke,Me),c(et,De),c(et,Re),c(Re,we),c(Re,Ue),c(Re,ht),c(ht,tt),c(n,bt),c(n,je),c(je,rt),c(je,at),c(je,$e),c($e,nt),c(nt,ct),c(nt,Ge),c(nt,fe),c(fe,Ne),c($e,qt),c($e,kt),c(kt,Ot),c(kt,Ft),c(kt,Gt),c(Gt,cr),c($e,mr),c($e,jt),c(jt,Xt),c(jt,vr),c(jt,Yt),c(Yt,hr),c($e,br),c($e,Wt),c(Wt,Qt),c(Wt,yr),c(Wt,$t),c($t,se)},p(Ie,st){var qr,Gr;Ve!==(Ve=xe(Ie))&&(ot.d(1),ot=Ve(Ie),ot&&(ot.c(),ot.m(w,null))),Ie[0]?it||(it=Ni(),it.c(),it.m(e,i)):it&&(it.d(1),it=null),st[0]&32&&k!==(k=Ie[5].cpu.toFixed(1)+"")&&de(v,k),st[0]&32&&Ee(y,"color",mt(Ie[5].cpu)),Ie[8]["1min"]>0?dt?dt.p(Ie,st):(dt=Vi(Ie),dt.c(),dt.m(u,a)):dt&&(dt.d(1),dt=null),tr===(tr=Br(Ie))&&Tt?Tt.p(Ie,st):(Tt.d(1),Tt=tr(Ie),Tt&&(Tt.c(),Tt.m(f,null))),Ie[4].length>0?yt?yt.p(Ie,st):(yt=Ki(Ie),yt.c(),yt.m(u,null)):yt&&(yt.d(1),yt=null),st[0]&512&&P!==(P=Ie[9].used+"")&&de(A,P),st[0]&512&&q!==(q=Ie[9].total+"")&&de(X,q),st[0]&32&&D!==(D=Ie[5].memory.toFixed(2)+"")&&de(H,D),st[0]&32&&Ee(G,"color",mt(Ie[5].memory)),wr===(wr=Nr(Ie))&&Bt?Bt.p(Ie,st):(Bt.d(1),Bt=wr(Ie),Bt&&(Bt.c(),Bt.m(J,null))),st[0]&32&&U!==(U=Ie[5].disk+"")&&de(ae,U),st[0]&32&&Ee(te,"color",mt(Ie[5].disk)),st[0]&32&&Ee(oe,"width",Ie[5].disk+"%"),st[0]&32&&Ee(oe,"background-color",mt(Ie[5].disk)),st[0]&128&&Se!==(Se=Ie[7].used+"")&&de(ve,Se),st[0]&128&&be!==(be=Ie[7].total+"")&&de(We,be),st[0]&32&&ye!==(ye=Cr(((qr=Ie[5].network)==null?void 0:qr.in)||0)+"")&&de(Me,ye),st[0]&32&&Ye!==(Ye=Cr(((Gr=Ie[5].network)==null?void 0:Gr.out)||0)+"")&&de(tt,Ye),st[0]&64&&_e!==(_e=(Ie[6].os||"Unknown")+"")&&de(Ne,_e),st[0]&64&&Jt!==(Jt=(Ie[6].kernel||"Unknown")+"")&&de(cr,Jt),st[0]&64&&Zt!==(Zt=(Ie[6].uptime||"Unknown")+"")&&de(hr,Zt),st[0]&64&&er!==(er=(Ie[6].processes||"N/A")+"")&&de(se,er)},i:Ae,o:Ae,d(Ie){Ie&&N(e),ot.d(),it&&it.d(),dt&&dt.d(),Tt.d(),yt&&yt.d(),Bt.d()}}}function mt(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function Cr(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,l=r;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function Gi(r){if(r===0)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0,l=r;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function Hc(r,e,t){let l,_,w,p,i,n;vt(r,zt,j=>t(13,i=j)),vt(r,At,j=>t(14,n=j));const u={cpu:0,memory:0,disk:0,network:{in:0,out:0}},m={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},d={used:"0 GB",total:"0 GB"},g={"1min":0,"5min":0,"15min":0},y={used:"0 GB",total:"0 GB"};let k=[],v=[],o=[],h={...u},a={...m},f={...d},b={...g},E={...y},C=new Map,x=new Map,S=new Map,M=new Map,T=new Map,R=new Map,P=new Map,A=new Map,z=null,q=null;function X(j){if(!j){t(2,k=[]),t(3,v=[]),t(4,o=[]),t(5,h={...u}),t(6,a={...m}),t(7,f={...d}),t(8,b={...g}),t(9,E={...y});return}t(2,k=C.get(j)||[]),t(3,v=x.get(j)||[]),t(4,o=S.get(j)||[]),t(5,h=M.get(j)||{...u}),t(6,a=T.get(j)||{...m}),t(7,f=R.get(j)||{...d}),t(8,b=P.get(j)||{...g}),t(9,E=A.get(j)||{...y})}function ie(j){j&&(C=new Map(C).set(j,k),x=new Map(x).set(j,v),S=new Map(S).set(j,o),M=new Map(M).set(j,h),T=new Map(T).set(j,a),R=new Map(R).set(j,f),P=new Map(P).set(j,b),A=new Map(A).set(j,E))}function G(j){var ae,ce,he,ee,oe,ue,pe,Be,Le,Se,ve,re,ge,ne,be;if(!j)return null;const K=(ae=j.cpu)!=null&&ae.per_core&&Array.isArray(j.cpu.per_core)?j.cpu.per_core:null,Q={cpu:typeof j.cpu=="number"?j.cpu:((ce=j.cpu)==null?void 0:ce.overall)||0,memory:typeof j.memory=="number"?j.memory:((he=j.memory)==null?void 0:he.used_percent)||0,disk:typeof j.disk=="number"?j.disk:((ue=(oe=(ee=j.disk)==null?void 0:ee.partitions)==null?void 0:oe[0])==null?void 0:ue.used_percent)||0,network:{in:typeof((pe=j.network)==null?void 0:pe.in)=="number"?j.network.in*(1024*1024):typeof((Be=j.network)==null?void 0:Be.rx_rate)=="number"?j.network.rx_rate:0,out:typeof((Le=j.network)==null?void 0:Le.out)=="number"?j.network.out*(1024*1024):typeof((Se=j.network)==null?void 0:Se.tx_rate)=="number"?j.network.tx_rate:0}},I=j.system?{os:j.system.os||m.os,kernel:j.system.kernel||m.kernel,uptime:j.system.uptime||m.uptime,processes:j.system.processes||m.processes}:null;let B=null;if((re=(ve=j.disk)==null?void 0:ve.partitions)!=null&&re[0]){const We=j.disk.partitions[0],Fe=(We.used/(1024*1024*1024)).toFixed(1),Qe=(We.total/(1024*1024*1024)).toFixed(1);B={used:`${Fe} GB`,total:`${Qe} GB`}}let te=null;(ge=j.cpu)!=null&&ge.load_average&&Array.isArray(j.cpu.load_average)&&j.cpu.load_average.length>=3&&(te={"1min":j.cpu.load_average[0]||0,"5min":j.cpu.load_average[1]||0,"15min":j.cpu.load_average[2]||0});let U=null;if(((ne=j.memory)==null?void 0:ne.used)!==void 0&&((be=j.memory)==null?void 0:be.total)!==void 0){const We=j.memory.used,Fe=j.memory.total;U={used:Gi(We),total:Gi(Fe)}}return{stats:Q,cpuPerCore:K,systemInfo:I,diskInfo:B,loadInfo:te,memoryDetail:U}}async function D(){const j=i;if(!j||!_||w)return;const{GetMonitoringData:K}=window.wailsBindings||{};if(typeof K=="function")try{const Q=await K(j),I=G(Q);if(I){const B=[...C.get(j)||[],I.stats.cpu].slice(-60),te=[...x.get(j)||[],I.stats.memory].slice(-60),U=I.cpuPerCore||S.get(j)||[],ae=I.systemInfo||T.get(j)||{...m},ce=I.diskInfo||R.get(j)||{...d},he=I.loadInfo||P.get(j)||{...g},ee=I.memoryDetail||A.get(j)||{...y},oe=I.stats;C=new Map(C).set(j,B),x=new Map(x).set(j,te),S=new Map(S).set(j,U),M=new Map(M).set(j,oe),T=new Map(T).set(j,ae),R=new Map(R).set(j,ce),P=new Map(P).set(j,he),A=new Map(A).set(j,ee),j===i&&(t(5,h=oe),t(2,k=B),t(3,v=te),t(4,o=U),t(6,a=ae),t(7,f=ce),t(8,b=he),t(9,E=ee))}}catch(Q){console.error("Failed to fetch monitoring data:",Q)}}ar(()=>(z=setInterval(D,2e3),()=>{clearInterval(z)})),Mr(()=>{z&&clearInterval(z)});const H=(j,K)=>{const Q=K/(k.length-1)*100,I=100-j;return`${K===0?"M":"L"} ${Q} ${I}`},F=(j,K)=>{const Q=K/(k.length-1)*100,I=100-j;return`${K===0?"M":"L"} ${Q} ${I}`},W=(j,K)=>{const Q=K/(v.length-1)*100,I=100-j;return`${K===0?"M":"L"} ${Q} ${I}`},J=(j,K)=>{const Q=K/(v.length-1)*100,I=100-j;return`${K===0?"M":"L"} ${Q} ${I}`};return r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,l=i?n.get(i):null),r.$$.dirty[0]&4096&&t(1,_=(l==null?void 0:l.connected)||!1),r.$$.dirty[0]&4096&&t(0,w=(l==null?void 0:l.type)==="local"),r.$$.dirty[0]&3&&t(11,p=_&&!w),r.$$.dirty[0]&8192&&t(10,q=i),r.$$.dirty[0]&9216&&q!==i&&(q&&ie(q),X(i)),r.$$.dirty[0]&10240&&i&&p&&D(),r.$$.dirty[0]&10240&&(!i||!p)&&(t(2,k=[]),t(3,v=[]),t(4,o=[]),t(5,h={...u}),t(6,a={...m}),t(7,f={...d}),t(8,b={...g}),t(9,E={...y}))},[w,_,k,v,o,h,a,f,b,E,q,p,l,i,n,H,F,W,J]}class Ic extends _t{constructor(e){super(),ft(this,e,Hc,Pc,ut,{},null,[-1,-1])}}function Fc(r){let e;return{c(){e=L("span"),e.textContent="✗ 无效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function jc(r){let e;return{c(){e=L("span"),e.textContent="✓ 有效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Ji(r){let e,t,l,_,w;return{c(){e=L("div"),t=le("svg"),l=le("path"),_=O(),w=Z(r[3]),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),s(t,"class","w-4 h-4"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(p,i){V(p,e,i),c(e,t),c(t,l),c(e,_),c(e,w)},p(p,i){i&8&&de(w,p[3])},d(p){p&&N(e)}}}function Xi(r){let e,t,l;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(_,w){V(_,e,w),t||(l=$(e,"click",r[9]),t=!0)},p:Ae,d(_){_&&N(e),t=!1,l()}}}function Wc(r){let e,t,l,_,w,p,i,n,u=r[5].chars+"",m,d,g=r[5].lines+"",y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X,ie,G,D,H,F,W,J,j,K,Q,I,B,te,U,ae,ce,he,ee,oe,ue;function pe(re,ge){if(re[4])return jc;if(re[3])return Fc}let Be=pe(r),Le=Be&&Be(r),Se=r[3]&&Ji(r),ve=r[1]&&Xi(r);return{c(){e=L("div"),t=L("div"),l=L("div"),_=L("label"),w=L("span"),w.textContent="输入 JSON",p=O(),Le&&Le.c(),i=O(),n=L("div"),m=Z(u),d=Z(" 字符 · "),y=Z(g),k=Z(" 行"),v=O(),o=L("textarea"),a=O(),Se&&Se.c(),f=O(),b=L("div"),E=L("button"),C=le("svg"),x=le("path"),S=O(),M=L("span"),M.textContent="格式化",R=O(),P=L("button"),A=le("svg"),z=le("path"),q=O(),X=L("span"),X.textContent="压缩",G=O(),D=L("button"),H=le("svg"),F=le("path"),W=O(),J=L("span"),J.textContent="转义",K=O(),Q=L("div"),I=L("div"),B=L("label"),B.textContent="输出",te=O(),ve&&ve.c(),U=O(),ae=L("textarea"),ce=O(),he=L("div"),ee=L("button"),ee.textContent="清空全部",s(_,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(n,"class","text-xs text-gray-500 dark:text-gray-400"),s(l,"class","flex items-center justify-between mb-2"),s(o,"placeholder","输入 JSON..."),s(o,"class",h="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),s(t,"class","relative"),s(x,"stroke-linecap","round"),s(x,"stroke-linejoin","round"),s(x,"stroke-width","2"),s(x,"d","M4 6h16M4 12h16m-7 6h7"),s(C,"class","w-4 h-4"),s(C,"fill","none"),s(C,"stroke","currentColor"),s(C,"viewBox","0 0 24 24"),s(M,"class","text-sm"),E.disabled=T=r[2]||!r[0].trim(),s(E,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(z,"stroke-linecap","round"),s(z,"stroke-linejoin","round"),s(z,"stroke-width","2"),s(z,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),s(A,"class","w-4 h-4"),s(A,"fill","none"),s(A,"stroke","currentColor"),s(A,"viewBox","0 0 24 24"),s(X,"class","text-sm"),P.disabled=ie=r[2]||!r[0].trim(),s(P,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(F,"stroke-linecap","round"),s(F,"stroke-linejoin","round"),s(F,"stroke-width","2"),s(F,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),s(H,"class","w-4 h-4"),s(H,"fill","none"),s(H,"stroke","currentColor"),s(H,"viewBox","0 0 24 24"),s(J,"class","text-sm"),D.disabled=j=r[2]||!r[0].trim(),s(D,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(b,"class","grid grid-cols-3 gap-3"),s(B,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(I,"class","flex items-center justify-between mb-2"),ae.readOnly=!0,s(ae,"placeholder","格式化后的 JSON 将显示在这里..."),s(ae,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(ee,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(he,"class","flex justify-end"),s(e,"class","space-y-6")},m(re,ge){V(re,e,ge),c(e,t),c(t,l),c(l,_),c(_,w),c(_,p),Le&&Le.m(_,null),c(l,i),c(l,n),c(n,m),c(n,d),c(n,y),c(n,k),c(t,v),c(t,o),Ce(o,r[0]),c(t,a),Se&&Se.m(t,null),c(e,f),c(e,b),c(b,E),c(E,C),c(C,x),c(E,S),c(E,M),c(b,R),c(b,P),c(P,A),c(A,z),c(P,q),c(P,X),c(b,G),c(b,D),c(D,H),c(H,F),c(D,W),c(D,J),c(e,K),c(e,Q),c(Q,I),c(I,B),c(I,te),ve&&ve.m(I,null),c(Q,U),c(Q,ae),Ce(ae,r[1]),c(e,ce),c(e,he),c(he,ee),oe||(ue=[$(o,"input",r[13]),$(o,"keydown",r[11]),$(E,"click",r[6]),$(P,"click",r[7]),$(D,"click",r[8]),$(ae,"input",r[14]),$(ee,"click",r[10])],oe=!0)},p(re,[ge]){Be!==(Be=pe(re))&&(Le&&Le.d(1),Le=Be&&Be(re),Le&&(Le.c(),Le.m(_,null))),ge&32&&u!==(u=re[5].chars+"")&&de(m,u),ge&32&&g!==(g=re[5].lines+"")&&de(y,g),ge&8&&h!==(h="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(re[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&s(o,"class",h),ge&1&&Ce(o,re[0]),re[3]?Se?Se.p(re,ge):(Se=Ji(re),Se.c(),Se.m(t,null)):Se&&(Se.d(1),Se=null),ge&5&&T!==(T=re[2]||!re[0].trim())&&(E.disabled=T),ge&5&&ie!==(ie=re[2]||!re[0].trim())&&(P.disabled=ie),ge&5&&j!==(j=re[2]||!re[0].trim())&&(D.disabled=j),re[1]?ve?ve.p(re,ge):(ve=Xi(re),ve.c(),ve.m(I,null)):ve&&(ve.d(1),ve=null),ge&2&&Ce(ae,re[1])},i:Ae,o:Ae,d(re){re&&N(e),Le&&Le.d(),Se&&Se.d(),ve&&ve.d(),oe=!1,Pe(ue)}}}function zc(r,e,t){let{themeStore:l}=e,_="",w="",p=!1,i="",n=!1,u={chars:0,lines:0};async function m(){if(!_.trim()){t(4,n=!1),t(3,i="");return}if(!window.wailsBindings){t(4,n=!1),t(3,i="Wails 绑定未加载");return}try{const b=await window.wailsBindings.ValidateJSON(_);t(4,n=b.valid),t(3,i=b.error||"")}catch(b){t(4,n=!1),t(3,i=b.message)}}function d(){t(5,u.chars=_.length,u),t(5,u.lines=_.split(`
`).length,u)}async function g(){if(!(!_.trim()||p||!window.wailsBindings)){t(2,p=!0),t(3,i="");try{t(1,w=await window.wailsBindings.FormatJSON(_)),t(4,n=!0),t(3,i="")}catch(b){t(3,i=b.message||"格式化失败")}finally{t(2,p=!1)}}}async function y(){if(!(!_.trim()||p||!window.wailsBindings)){t(2,p=!0),t(3,i="");try{t(1,w=await window.wailsBindings.MinifyJSON(_)),t(4,n=!0),t(3,i="")}catch(b){t(3,i=b.message||"压缩失败")}finally{t(2,p=!1)}}}async function k(){if(!(!_.trim()||p||!window.wailsBindings)){t(2,p=!0),t(3,i="");try{t(1,w=await window.wailsBindings.EscapeJSON(_)),t(4,n=!0),t(3,i="")}catch(b){t(3,i=b.message||"转义失败")}finally{t(2,p=!1)}}}async function v(){if(w)try{await navigator.clipboard.writeText(w)}catch(b){console.error("复制失败:",b)}}function o(){t(0,_=""),t(1,w=""),t(4,n=!1)}function h(b){(b.ctrlKey||b.metaKey)&&b.key.toLowerCase()==="enter"&&!p&&_.trim()&&(b.preventDefault(),g())}function a(){_=this.value,t(0,_)}function f(){w=this.value,t(1,w)}return r.$$set=b=>{"themeStore"in b&&t(12,l=b.themeStore)},m(),d(),[_,w,p,i,n,u,g,y,k,v,o,h,l,a,f]}class Yi extends _t{constructor(e){super(),ft(this,e,zc,Wc,ut,{themeStore:12})}}function Uc(r){let e,t,l,_=r[2]==="encode"?"编码":"解码",w;return{c(){e=le("svg"),t=le("path"),l=O(),w=Z(_),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,i){V(p,e,i),c(e,t),V(p,l,i),V(p,w,i)},p(p,i){i&4&&_!==(_=p[2]==="encode"?"编码":"解码")&&de(w,_)},d(p){p&&(N(e),N(l),N(w))}}}function Nc(r){let e,t,l,_;return{c(){e=le("svg"),t=le("circle"),l=le("path"),_=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){V(w,e,p),c(e,t),c(e,l),V(w,_,p)},p:Ae,d(w){w&&(N(e),N(_))}}}function Zi(r){let e,t,l;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(_,w){V(_,e,w),t||(l=$(e,"click",r[5]),t=!0)},p:Ae,d(_){_&&N(e),t=!1,l()}}}function Vc(r){let e,t,l,_,w,p,i,n,u,m,d,g,y=r[2]==="encode"?"输入文本":"输入 Base64",k,v,o,h,a,f,b,E,C,x,S,M,T=r[2]==="encode"?"Base64 输出":"解码结果",R,P,A,z,q,X,ie,G,D,H,F,W;function J(I,B){return I[3]?Nc:Uc}let j=J(r),K=j(r),Q=r[1]&&Zi(r);return{c(){e=L("div"),t=L("div"),l=L("button"),_=Z("编码"),p=O(),i=L("button"),n=Z("解码"),m=O(),d=L("div"),g=L("label"),k=Z(y),v=O(),o=L("textarea"),a=O(),f=L("div"),b=L("button"),K.c(),C=O(),x=L("div"),S=L("div"),M=L("label"),R=Z(T),P=O(),Q&&Q.c(),A=O(),z=L("textarea"),X=O(),ie=L("div"),G=L("button"),G.textContent="清空全部",D=O(),H=L("button"),H.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(o,"placeholder",h=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),s(o,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),b.disabled=E=r[3]||!r[0].trim(),s(b,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(f,"class","flex items-center justify-center"),s(M,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(S,"class","flex items-center justify-between mb-2"),z.readOnly=!0,s(z,"placeholder",q=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(z,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(G,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(H,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(ie,"class","flex justify-between items-center"),s(e,"class","space-y-6")},m(I,B){V(I,e,B),c(e,t),c(t,l),c(l,_),c(t,p),c(t,i),c(i,n),c(e,m),c(e,d),c(d,g),c(g,k),c(d,v),c(d,o),Ce(o,r[0]),c(e,a),c(e,f),c(f,b),K.m(b,null),c(e,C),c(e,x),c(x,S),c(S,M),c(M,R),c(S,P),Q&&Q.m(S,null),c(x,A),c(x,z),Ce(z,r[1]),c(e,X),c(e,ie),c(ie,G),c(ie,D),c(ie,H),F||(W=[$(l,"click",r[10]),$(i,"click",r[11]),$(o,"input",r[12]),$(o,"keydown",r[8]),$(b,"click",r[4]),$(z,"input",r[13]),$(G,"click",r[6]),$(H,"click",r[7])],F=!0)},p(I,[B]){B&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),B&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",u),B&4&&y!==(y=I[2]==="encode"?"输入文本":"输入 Base64")&&de(k,y),B&4&&h!==(h=I[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&s(o,"placeholder",h),B&1&&Ce(o,I[0]),j===(j=J(I))&&K?K.p(I,B):(K.d(1),K=j(I),K&&(K.c(),K.m(b,null))),B&9&&E!==(E=I[3]||!I[0].trim())&&(b.disabled=E),B&4&&T!==(T=I[2]==="encode"?"Base64 输出":"解码结果")&&de(R,T),I[1]?Q?Q.p(I,B):(Q=Zi(I),Q.c(),Q.m(S,null)):Q&&(Q.d(1),Q=null),B&4&&q!==(q=I[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(z,"placeholder",q),B&2&&Ce(z,I[1])},i:Ae,o:Ae,d(I){I&&N(e),K.d(),Q&&Q.d(),F=!1,Pe(W)}}}function Kc(r,e,t){let{themeStore:l}=e,_="",w="",p="encode",i=!1;async function n(){if(!(!_.trim()||i||!window.wailsBindings)){t(3,i=!0);try{p==="encode"?t(1,w=await window.wailsBindings.EncodeBase64(_)):t(1,w=await window.wailsBindings.DecodeBase64(_))}catch(h){t(1,w=""),console.error("处理失败:",h),alert("处理失败: "+(h.message||h))}finally{t(3,i=!1)}}}async function u(){if(w)try{await navigator.clipboard.writeText(w)}catch(h){console.error("复制失败:",h)}}function m(){t(0,_=""),t(1,w="")}function d(){t(2,p=p==="encode"?"decode":"encode"),t(0,_=""),t(1,w="")}function g(h){(h.ctrlKey||h.metaKey)&&h.key.toLowerCase()==="enter"&&!i&&_.trim()&&(h.preventDefault(),n())}const y=()=>t(2,p="encode"),k=()=>t(2,p="decode");function v(){_=this.value,t(0,_)}function o(){w=this.value,t(1,w)}return r.$$set=h=>{"themeStore"in h&&t(9,l=h.themeStore)},[_,w,p,i,n,u,m,d,g,l,y,k,v,o]}class Qi extends _t{constructor(e){super(),ft(this,e,Kc,Vc,ut,{themeStore:9})}}function $i(r,e,t){const l=r.slice();return l[29]=e[t],l}function es(r,e,t){const l=r.slice();return l[29]=e[t],l}function ts(r){let e,t=r[29].name+"",l;return{c(){e=L("option"),l=Z(t),e.__value=r[29].id,Ce(e,e.__value)},m(_,w){V(_,e,w),c(e,l)},p:Ae,d(_){_&&N(e)}}}function rs(r){let e,t=r[29].name+"",l;return{c(){e=L("option"),l=Z(t),e.__value=r[29].id,Ce(e,e.__value)},m(_,w){V(_,e,w),c(e,l)},p:Ae,d(_){_&&N(e)}}}function is(r){let e,t,l,_,w,p,i,n,u,m;return{c(){e=L("div"),t=L("button"),l=Z("加密"),w=O(),p=L("button"),i=Z("解密"),s(t,"class",_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(p,"class",n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(d,g){V(d,e,g),c(e,t),c(t,l),c(e,w),c(e,p),c(p,i),u||(m=[$(t,"click",r[24]),$(p,"click",r[25])],u=!0)},p(d,g){g[0]&2&&_!==(_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(t,"class",_),g[0]&2&&n!==(n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(p,"class",n)},d(d){d&&N(e),u=!1,Pe(m)}}}function ss(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z;return{c(){e=L("div"),t=L("div"),l=L("div"),_=L("label"),_.textContent="密钥（Hex）",w=O(),p=L("button"),p.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,i=O(),n=L("input"),u=O(),m=L("div"),d=Z("密钥长度: "),g=Z(r[9]),y=O(),k=L("div"),v=L("div"),o=L("label"),h=Z(r[11]),a=Z("（Hex）"),f=O(),b=L("button"),b.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,E=O(),C=L("input"),S=O(),M=L("div"),T=Z(r[11]),R=Z("长度: "),P=Z(r[10]),s(_,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(p,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(l,"class","flex items-center justify-between mb-2"),s(n,"type","text"),s(n,"placeholder","例如: 00112233445566778899aabbccddeeff"),s(n,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(o,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(b,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(v,"class","flex items-center justify-between mb-2"),s(C,"type","text"),s(C,"placeholder",x=r[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),s(C,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(M,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(q,X){V(q,e,X),c(e,t),c(t,l),c(l,_),c(l,w),c(l,p),c(t,i),c(t,n),Ce(n,r[5]),c(t,u),c(t,m),c(m,d),c(m,g),c(e,y),c(e,k),c(k,v),c(v,o),c(o,h),c(o,a),c(v,f),c(v,b),c(k,E),c(k,C),Ce(C,r[6]),c(k,S),c(k,M),c(M,T),c(M,R),c(M,P),A||(z=[$(p,"click",r[19]),$(n,"input",r[26]),$(b,"click",r[20]),$(C,"input",r[27])],A=!0)},p(q,X){X[0]&32&&n.value!==q[5]&&Ce(n,q[5]),X[0]&512&&de(g,q[9]),X[0]&2048&&de(h,q[11]),X[0]&2048&&x!==(x=q[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10")&&s(C,"placeholder",x),X[0]&64&&C.value!==q[6]&&Ce(C,q[6]),X[0]&2048&&de(T,q[11]),X[0]&1024&&de(P,q[10])},d(q){q&&N(e),A=!1,Pe(z)}}}function qc(r){let e,t,l,_=r[2]?"计算哈希":r[1]==="decrypt"?"解密":"加密",w;return{c(){e=le("svg"),t=le("path"),l=O(),w=Z(_),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,i){V(p,e,i),c(e,t),V(p,l,i),V(p,w,i)},p(p,i){i[0]&6&&_!==(_=p[2]?"计算哈希":p[1]==="decrypt"?"解密":"加密")&&de(w,_)},d(p){p&&(N(e),N(l),N(w))}}}function Gc(r){let e,t,l,_;return{c(){e=le("svg"),t=le("circle"),l=le("path"),_=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){V(w,e,p),c(e,t),c(e,l),V(w,_,p)},p:Ae,d(w){w&&(N(e),N(_))}}}function ns(r){let e,t,l,_,w,p,i,n=r[2]?"哈希值":r[1]==="decrypt"?"明文":"Base64 密文",u,m,d,g,y,k,v,o,h,a,f=r[4].length+"",b,E,C,x;return{c(){e=L("div"),t=L("div"),l=L("label"),_=L("span"),w=Z(r[12]),p=O(),i=L("span"),u=Z(n),m=O(),d=L("button"),d.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,g=O(),y=L("div"),k=L("code"),v=Z(r[4]),o=O(),h=L("div"),a=Z("长度: "),b=Z(f),E=Z(" 字符"),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(d,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),s(y,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),s(h,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(S,M){V(S,e,M),c(e,t),c(t,l),c(l,_),c(_,w),c(l,p),c(l,i),c(i,u),c(t,m),c(t,d),c(e,g),c(e,y),c(y,k),c(k,v),c(e,o),c(e,h),c(h,a),c(h,b),c(h,E),C||(x=$(d,"click",r[15]),C=!0)},p(S,M){M[0]&4096&&de(w,S[12]),M[0]&6&&n!==(n=S[2]?"哈希值":S[1]==="decrypt"?"明文":"Base64 密文")&&de(u,n),M[0]&16&&de(v,S[4]),M[0]&16&&f!==(f=S[4].length+"")&&de(b,f)},d(S){S&&N(e),C=!1,x()}}}function Jc(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v=r[2]?"输入文本":r[1]==="decrypt"?"输入 Base64 密文":"输入明文",o,h,a,f,b,E=r[3].length+"",C,x,S,M,T,R,P,A,z,q,X,ie,G=ze(r[13].filter(os)),D=[];for(let B=0;B<G.length;B+=1)D[B]=ts(es(r,G,B));let H=ze(r[13].filter(ls)),F=[];for(let B=0;B<H.length;B+=1)F[B]=rs($i(r,H,B));let W=!r[2]&&is(r),J=!r[2]&&ss(r);function j(B,te){return B[7]?Gc:qc}let K=j(r),Q=K(r),I=r[4]&&ns(r);return{c(){e=L("div"),t=L("div"),l=L("label"),l.textContent="选择算法",_=O(),w=L("div"),p=L("div"),i=L("select"),n=L("optgroup");for(let B=0;B<D.length;B+=1)D[B].c();u=L("optgroup");for(let B=0;B<F.length;B+=1)F[B].c();m=O(),W&&W.c(),d=O(),J&&J.c(),g=O(),y=L("div"),k=L("label"),o=Z(v),h=O(),a=L("textarea"),f=O(),b=L("div"),C=Z(E),x=Z(" 字符"),S=O(),M=L("div"),T=L("button"),Q.c(),P=O(),I&&I.c(),A=O(),z=L("div"),q=L("button"),q.textContent="清空全部",s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(n,"label","Hash"),s(u,"label","加密解密"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[0]===void 0&&_r(()=>r[22].call(i)),s(p,"class","flex-1"),s(w,"class","flex flex-col md:flex-row gap-3"),s(k,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(a,"placeholder",r[8]),s(a,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),T.disabled=R=r[7]||!r[3].trim()||!r[2]&&(!r[5].trim()||!r[6].trim()),s(T,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(M,"class","flex justify-center"),s(q,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(z,"class","flex justify-end"),s(e,"class","space-y-6")},m(B,te){V(B,e,te),c(e,t),c(t,l),c(t,_),c(t,w),c(w,p),c(p,i),c(i,n);for(let U=0;U<D.length;U+=1)D[U]&&D[U].m(n,null);c(i,u);for(let U=0;U<F.length;U+=1)F[U]&&F[U].m(u,null);Lr(i,r[0],!0),c(w,m),W&&W.m(w,null),c(e,d),J&&J.m(e,null),c(e,g),c(e,y),c(y,k),c(k,o),c(y,h),c(y,a),Ce(a,r[3]),c(y,f),c(y,b),c(b,C),c(b,x),c(e,S),c(e,M),c(M,T),Q.m(T,null),c(e,P),I&&I.m(e,null),c(e,A),c(e,z),c(z,q),X||(ie=[$(i,"change",r[22]),$(i,"change",r[23]),$(a,"input",r[28]),$(a,"keydown",r[18]),$(T,"click",r[14]),$(q,"click",r[16])],X=!0)},p(B,te){if(te[0]&8192){G=ze(B[13].filter(os));let U;for(U=0;U<G.length;U+=1){const ae=es(B,G,U);D[U]?D[U].p(ae,te):(D[U]=ts(ae),D[U].c(),D[U].m(n,null))}for(;U<D.length;U+=1)D[U].d(1);D.length=G.length}if(te[0]&8192){H=ze(B[13].filter(ls));let U;for(U=0;U<H.length;U+=1){const ae=$i(B,H,U);F[U]?F[U].p(ae,te):(F[U]=rs(ae),F[U].c(),F[U].m(u,null))}for(;U<F.length;U+=1)F[U].d(1);F.length=H.length}te[0]&8193&&Lr(i,B[0]),B[2]?W&&(W.d(1),W=null):W?W.p(B,te):(W=is(B),W.c(),W.m(w,null)),B[2]?J&&(J.d(1),J=null):J?J.p(B,te):(J=ss(B),J.c(),J.m(e,g)),te[0]&6&&v!==(v=B[2]?"输入文本":B[1]==="decrypt"?"输入 Base64 密文":"输入明文")&&de(o,v),te[0]&256&&s(a,"placeholder",B[8]),te[0]&8&&Ce(a,B[3]),te[0]&8&&E!==(E=B[3].length+"")&&de(C,E),K===(K=j(B))&&Q?Q.p(B,te):(Q.d(1),Q=K(B),Q&&(Q.c(),Q.m(T,null))),te[0]&236&&R!==(R=B[7]||!B[3].trim()||!B[2]&&(!B[5].trim()||!B[6].trim()))&&(T.disabled=R),B[4]?I?I.p(B,te):(I=ns(B),I.c(),I.m(e,A)):I&&(I.d(1),I=null)},i:Ae,o:Ae,d(B){B&&N(e),Nt(D,B),Nt(F,B),W&&W.d(),J&&J.d(),Q.d(),I&&I.d(),X=!1,Pe(ie)}}}const os=r=>r.type==="hash",ls=r=>r.type==="crypto";function Xc(r,e,t){let l,_,w,p,i,n,{themeStore:u}=e,m="",d="",g="md5",y="encrypt",k="",v="",o=!1;const h=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];async function a(){if(!(!m.trim()||o||!window.wailsBindings)&&!(!l&&(!k.trim()||!v.trim()))){t(7,o=!0),t(4,d="");try{l?t(4,d=await window.wailsBindings.CalculateHash(m,g)):y==="encrypt"?t(4,d=await window.wailsBindings.EncryptText(m,g,k,v)):t(4,d=await window.wailsBindings.DecryptText(m,g,k,v))}catch(X){t(4,d=""),console.error("操作失败:",X),alert("操作失败: "+(X.message||X))}finally{t(7,o=!1)}}}async function f(){if(d)try{await navigator.clipboard.writeText(d)}catch(X){console.error("复制失败:",X)}}function b(){t(3,m=""),t(4,d=""),t(5,k=""),t(6,v="")}function E(){t(3,m=""),t(4,d="")}function C(X){(X.ctrlKey||X.metaKey)&&X.key.toLowerCase()==="enter"&&!o&&m.trim()&&(X.preventDefault(),a())}function x(){let X;g==="sm4-cbc"?X=16:X=32;const ie=new Uint8Array(X);crypto.getRandomValues(ie),t(5,k=Array.from(ie).map(G=>G.toString(16).padStart(2,"0")).join(""))}function S(){const X=g==="aes-gcm"?12:16,ie=new Uint8Array(X);crypto.getRandomValues(ie),t(6,v=Array.from(ie).map(G=>G.toString(16).padStart(2,"0")).join(""))}function M(){g=tn(this),t(0,g),t(13,h)}const T=()=>{b()},R=()=>{t(1,y="encrypt"),E()},P=()=>{t(1,y="decrypt"),E()};function A(){k=this.value,t(5,k)}function z(){v=this.value,t(6,v)}function q(){m=this.value,t(3,m)}return r.$$set=X=>{"themeStore"in X&&t(21,u=X.themeStore)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,l=(()=>{const X=h.find(ie=>ie.id===g);return(X==null?void 0:X.type)==="hash"})()),r.$$.dirty[0]&1&&t(12,_=(()=>{var X;return((X=h.find(ie=>ie.id===g))==null?void 0:X.name)||""})()),r.$$.dirty[0]&1&&t(11,w=g==="aes-gcm"?"Nonce":"IV"),r.$$.dirty[0]&1&&t(10,p=g==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"),r.$$.dirty[0]&1&&t(9,i=g==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"),r.$$.dirty[0]&6&&t(8,n=l?"输入要计算哈希的文本...":y==="decrypt"?"输入 Base64 密文...":"输入要加密的明文...")},[g,y,l,m,d,k,v,o,n,i,p,w,_,h,a,f,b,E,C,x,S,u,M,T,R,P,A,z,q]}class as extends _t{constructor(e){super(),ft(this,e,Xc,Jc,ut,{themeStore:21},null,[-1,-1])}}function Yc(r){let e,t,l,_,w,p,i,n,u,m,d,g=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",y,k,v;return{c(){e=L("div"),t=L("div"),l=L("label"),l.textContent="输入日期时间",_=O(),w=L("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,p=O(),i=L("input"),u=O(),m=L("div"),d=Z("格式: "),y=Z(g),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(w,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),s(t,"class","flex items-center justify-between mb-2"),s(i,"type","text"),s(i,"placeholder",n=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(o,h){V(o,e,h),c(e,t),c(t,l),c(t,_),c(t,w),c(e,p),c(e,i),Ce(i,r[3]),c(e,u),c(e,m),c(m,d),c(m,y),k||(v=[$(w,"click",r[9]),$(i,"input",r[19]),$(i,"keydown",r[12])],k=!0)},p(o,h){h&2&&n!==(n=o[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&s(i,"placeholder",n),h&8&&i.value!==o[3]&&Ce(i,o[3]),h&2&&g!==(g=o[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&de(y,g)},d(o){o&&N(e),k=!1,Pe(v)}}}function Zc(r){let e,t,l,_,w=r[1]==="milliseconds"?"毫秒":"秒",p,i,n,u,m,d,g,y,k;return{c(){e=L("div"),t=L("div"),l=L("label"),_=Z("输入 Unix 时间戳（"),p=Z(w),i=Z("）"),n=O(),u=L("button"),u.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,m=O(),d=L("input"),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(u,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),s(t,"class","flex items-center justify-between mb-2"),s(d,"type","number"),s(d,"placeholder",g=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),s(d,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(l,_),c(l,p),c(l,i),c(t,n),c(t,u),c(e,m),c(e,d),Ce(d,r[2]),y||(k=[$(u,"click",r[8]),$(d,"input",r[18]),$(d,"keydown",r[12])],y=!0)},p(v,o){o&2&&w!==(w=v[1]==="milliseconds"?"毫秒":"秒")&&de(p,w),o&2&&g!==(g=v[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&s(d,"placeholder",g),o&4&&Wr(d.value)!==v[2]&&Ce(d,v[2])},d(v){v&&N(e),y=!1,Pe(k)}}}function Qc(r){let e,t,l;return{c(){e=le("svg"),t=le("path"),l=Z(`
        转换`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){V(_,e,w),c(e,t),V(_,l,w)},d(_){_&&(N(e),N(l))}}}function $c(r){let e,t,l,_;return{c(){e=le("svg"),t=le("circle"),l=le("path"),_=Z(`
        转换中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){V(w,e,p),c(e,t),c(e,l),V(w,_,p)},d(w){w&&(N(e),N(_))}}}function cs(r){let e,t,l,_=r[0]==="toDateTime"?"日期时间":"时间戳",w,p,i,n,u,m,d,g,y;return{c(){e=L("div"),t=L("div"),l=L("label"),w=Z(_),p=O(),i=L("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n=O(),u=L("div"),m=L("code"),d=Z(r[4]),s(l,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(m,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),s(u,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,v){V(k,e,v),c(e,t),c(t,l),c(l,w),c(t,p),c(t,i),c(e,n),c(e,u),c(u,m),c(m,d),g||(y=$(i,"click",r[10]),g=!0)},p(k,v){v&1&&_!==(_=k[0]==="toDateTime"?"日期时间":"时间戳")&&de(w,_),v&16&&de(d,k[4])},d(k){k&&N(e),g=!1,y()}}}function eh(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P=r[1]==="milliseconds"?"毫秒":"秒",A,z,q,X,ie,G,D,H,F,W,J,j,K,Q,I;function B(oe,ue){return oe[0]==="toDateTime"?Zc:Yc}let te=B(r),U=te(r);function ae(oe,ue){return oe[5]?$c:Qc}let ce=ae(r),he=ce(r),ee=r[4]&&cs(r);return{c(){e=L("div"),t=L("div"),l=L("button"),_=Z("时间戳 → 日期时间"),p=O(),i=L("button"),n=Z("日期时间 → 时间戳"),m=O(),d=L("div"),g=L("div"),y=L("button"),k=Z("秒"),o=O(),h=L("button"),a=Z("毫秒"),b=O(),E=L("div"),C=L("div"),x=le("svg"),S=le("path"),M=O(),T=L("span"),R=Z("当前时间戳（"),A=Z(P),z=Z("）: "),q=L("strong"),X=Z(r[6]),ie=O(),U.c(),G=O(),D=L("div"),H=L("button"),he.c(),W=O(),ee&&ee.c(),J=O(),j=L("div"),K=L("button"),K.textContent="清空全部",s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(y,"class",v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(h,"class",f="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(g,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(d,"class","flex justify-end"),s(S,"stroke-linecap","round"),s(S,"stroke-linejoin","round"),s(S,"stroke-width","2"),s(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(x,"class","w-5 h-5"),s(x,"fill","none"),s(x,"stroke","currentColor"),s(x,"viewBox","0 0 24 24"),s(q,"class","font-mono"),s(C,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),s(E,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),H.disabled=F=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),s(H,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(D,"class","flex justify-center"),s(K,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(j,"class","flex justify-end"),s(e,"class","space-y-6")},m(oe,ue){V(oe,e,ue),c(e,t),c(t,l),c(l,_),c(t,p),c(t,i),c(i,n),c(e,m),c(e,d),c(d,g),c(g,y),c(y,k),c(g,o),c(g,h),c(h,a),c(e,b),c(e,E),c(E,C),c(C,x),c(x,S),c(C,M),c(C,T),c(T,R),c(T,A),c(T,z),c(T,q),c(q,X),c(e,ie),U.m(e,null),c(e,G),c(e,D),c(D,H),he.m(H,null),c(e,W),ee&&ee.m(e,null),c(e,J),c(e,j),c(j,K),Q||(I=[$(l,"click",r[14]),$(i,"click",r[15]),$(y,"click",r[16]),$(h,"click",r[17]),$(H,"click",r[7]),$(K,"click",r[11])],Q=!0)},p(oe,[ue]){ue&1&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(oe[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),ue&1&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(oe[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",u),ue&2&&v!==(v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(oe[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(y,"class",v),ue&2&&f!==(f="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(oe[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(h,"class",f),ue&2&&P!==(P=oe[1]==="milliseconds"?"毫秒":"秒")&&de(A,P),ue&64&&de(X,oe[6]),te===(te=B(oe))&&U?U.p(oe,ue):(U.d(1),U=te(oe),U&&(U.c(),U.m(e,G))),ce!==(ce=ae(oe))&&(he.d(1),he=ce(oe),he&&(he.c(),he.m(H,null))),ue&45&&F!==(F=oe[5]||(oe[0]==="toDateTime"?!oe[2].trim():!oe[3].trim()))&&(H.disabled=F),oe[4]?ee?ee.p(oe,ue):(ee=cs(oe),ee.c(),ee.m(e,J)):ee&&(ee.d(1),ee=null)},i:Ae,o:Ae,d(oe){oe&&N(e),U.d(),he.d(),ee&&ee.d(),Q=!1,Pe(I)}}}const th="2006-01-02 15:04:05",rh="2006-01-02 15:04:05.000";function ih(r,e,t){let{themeStore:l}=e,_="toDateTime",w="seconds",p="",i="",n="",u=!1,m=0;function d(){const M=Date.now();t(6,m=w==="milliseconds"?M:Math.floor(M/1e3))}function g(){return w==="milliseconds"?rh:th}async function y(){if(window.wailsBindings){t(5,u=!0),t(4,n="");try{if(_==="toDateTime"){const M=parseInt(p.trim());if(isNaN(M))throw new Error("请输入有效的时间戳");w==="milliseconds"?t(4,n=await window.wailsBindings.TimestampToDateTimeMs(M,g())):t(4,n=await window.wailsBindings.TimestampToDateTime(M,g()))}else{if(!i.trim())throw new Error("请输入日期时间");if(w==="milliseconds"){const M=await window.wailsBindings.DateTimeToTimestampMs(i,g());t(4,n=M.toString())}else{const M=await window.wailsBindings.DateTimeToTimestamp(i,g());t(4,n=M.toString())}}}catch(M){t(4,n=""),console.error("转换失败:",M),alert("转换失败: "+(M.message||M))}finally{t(5,u=!1)}}}async function k(){if(window.wailsBindings)try{const M=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,p=M.toString())}catch(M){console.error("获取当前时间戳失败:",M)}}async function v(){if(window.wailsBindings)try{const M=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),T=w==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(M,g()):await window.wailsBindings.TimestampToDateTime(M,g());t(3,i=T)}catch(M){console.error("获取当前时间失败:",M)}}async function o(){if(n)try{await navigator.clipboard.writeText(n)}catch(M){console.error("复制失败:",M)}}function h(){t(2,p=""),t(3,i=""),t(4,n="")}function a(M){(M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="enter"&&!u&&(_==="toDateTime"&&p.trim()||_==="toTimestamp"&&i.trim())&&(M.preventDefault(),y())}const f=()=>{t(0,_="toDateTime"),h()},b=()=>{t(0,_="toTimestamp"),h()},E=()=>{t(1,w="seconds"),h()},C=()=>{t(1,w="milliseconds"),h()};function x(){p=Wr(this.value),t(2,p)}function S(){i=this.value,t(3,i)}return r.$$set=M=>{"themeStore"in M&&t(13,l=M.themeStore)},d(),[_,w,p,i,n,u,m,y,k,v,o,h,a,l,f,b,E,C,x,S]}class hs extends _t{constructor(e){super(),ft(this,e,ih,eh,ut,{themeStore:13})}}function ds(r,e,t){const l=r.slice();return l[12]=e[t],l[14]=t,l}function sh(r){let e,t,l,_;return{c(){e=le("svg"),t=le("path"),l=O(),_=L("span"),_.textContent="生成 UUID v4",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),s(e,"class","w-6 h-6"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(w,p){V(w,e,p),c(e,t),V(w,l,p),V(w,_,p)},d(w){w&&(N(e),N(l),N(_))}}}function nh(r){let e,t,l,_;return{c(){e=le("svg"),t=le("circle"),l=le("path"),_=Z(`
        生成中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-6 h-6"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){V(w,e,p),c(e,t),c(e,l),V(w,_,p)},d(w){w&&(N(e),N(_))}}}function us(r){let e,t,l,_,w,p,i,n,u,m,d;function g(v,o){return v[3]===v[0]?lh:oh}let y=g(r),k=y(r);return{c(){e=L("div"),t=L("div"),l=L("label"),l.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,_=O(),w=L("button"),k.c(),p=O(),i=L("div"),n=L("code"),u=Z(r[0]),s(l,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(w,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),s(t,"class","flex items-center justify-between mb-3"),s(n,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),s(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(t,_),c(t,w),k.m(w,null),c(e,p),c(e,i),c(i,n),c(n,u),m||(d=$(w,"click",r[9]),m=!0)},p(v,o){y!==(y=g(v))&&(k.d(1),k=y(v),k&&(k.c(),k.m(w,null))),o&1&&de(u,v[0])},d(v){v&&N(e),k.d(),m=!1,d()}}}function oh(r){let e,t,l;return{c(){e=le("svg"),t=le("path"),l=Z(`
            复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){V(_,e,w),c(e,t),V(_,l,w)},d(_){_&&(N(e),N(l))}}}function lh(r){let e,t,l;return{c(){e=le("svg"),t=le("path"),l=Z(`
            已复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){V(_,e,w),c(e,t),V(_,l,w)},d(_){_&&(N(e),N(l))}}}function fs(r){let e,t,l,_,w,p,i,n,u=r[1].length+"",m,d,g,y,k,v,o,h,a=ze(r[1]),f=[];for(let b=0;b<a.length;b+=1)f[b]=_s(ds(r,a,b));return{c(){e=L("div"),t=L("div"),l=L("label"),_=le("svg"),w=le("path"),p=Z(`
          历史记录
          `),i=L("span"),n=Z("("),m=Z(u),d=Z("/10)"),g=O(),y=L("button"),y.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=O(),v=L("div");for(let b=0;b<f.length;b+=1)f[b].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(_,"class","w-4 h-4"),s(_,"fill","none"),s(_,"stroke","currentColor"),s(_,"viewBox","0 0 24 24"),s(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),s(l,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(y,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),s(t,"class","flex items-center justify-between mb-3"),s(v,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(b,E){V(b,e,E),c(e,t),c(t,l),c(l,_),c(_,w),c(l,p),c(l,i),c(i,n),c(i,m),c(i,d),c(t,g),c(t,y),c(e,k),c(e,v);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(v,null);o||(h=$(y,"click",r[6]),o=!0)},p(b,E){if(E&2&&u!==(u=b[1].length+"")&&de(m,u),E&170){a=ze(b[1]);let C;for(C=0;C<a.length;C+=1){const x=ds(b,a,C);f[C]?f[C].p(x,E):(f[C]=_s(x),f[C].c(),f[C].m(v,null))}for(;C<f.length;C+=1)f[C].d(1);f.length=a.length}},d(b){b&&N(e),Nt(f,b),o=!1,h()}}}function ah(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function ch(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function _s(r){let e,t,l=r[12]+"",_,w,p,i,n,u,m,d,g;function y(){return r[10](r[12])}function k(a,f){return a[3]===a[12]?ch:ah}let v=k(r),o=v(r);function h(){return r[11](r[12])}return{c(){e=L("div"),t=L("code"),_=Z(l),w=O(),p=L("div"),i=L("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',n=O(),u=L("button"),o.c(),m=O(),s(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),s(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(i,"title","使用此 UUID"),s(u,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(u,"title","复制"),s(p,"class","flex items-center gap-2 shrink-0"),s(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(a,f){V(a,e,f),c(e,t),c(t,_),c(e,w),c(e,p),c(p,i),c(p,n),c(p,u),o.m(u,null),c(e,m),d||(g=[$(i,"click",y),$(u,"click",h)],d=!0)},p(a,f){r=a,f&2&&l!==(l=r[12]+"")&&de(_,l),v!==(v=k(r))&&(o.d(1),o=v(r),o&&(o.c(),o.m(u,null)))},d(a){a&&N(e),o.d(),d=!1,Pe(g)}}}function ps(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',s(e,"class","text-center py-8")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function hh(r){let e,t,l,_,w,p,i,n,u,m;function d(h,a){return h[2]?nh:sh}let g=d(r),y=g(r),k=r[0]&&us(r),v=r[1].length>0&&fs(r),o=!r[0]&&ps();return{c(){e=L("div"),t=L("div"),l=L("button"),y.c(),_=O(),w=L("div"),p=O(),k&&k.c(),i=O(),v&&v.c(),n=O(),o&&o.c(),s(w,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),l.disabled=r[2],s(l,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),s(t,"class","text-center"),s(e,"class","space-y-6")},m(h,a){V(h,e,a),c(e,t),c(t,l),y.m(l,null),c(l,_),c(l,w),c(e,p),k&&k.m(e,null),c(e,i),v&&v.m(e,null),c(e,n),o&&o.m(e,null),u||(m=$(l,"click",r[4]),u=!0)},p(h,[a]){g!==(g=d(h))&&(y.d(1),y=g(h),y&&(y.c(),y.m(l,_))),a&4&&(l.disabled=h[2]),h[0]?k?k.p(h,a):(k=us(h),k.c(),k.m(e,i)):k&&(k.d(1),k=null),h[1].length>0?v?v.p(h,a):(v=fs(h),v.c(),v.m(e,n)):v&&(v.d(1),v=null),h[0]?o&&(o.d(1),o=null):o||(o=ps(),o.c(),o.m(e,null))},i:Ae,o:Ae,d(h){h&&N(e),y.d(),k&&k.d(),v&&v.d(),o&&o.d(),u=!1,m()}}}function dh(r,e,t){let{themeStore:l}=e,_="",w=[],p=!1,i=null;async function n(){if(window.wailsBindings){t(2,p=!0);try{const v=await window.wailsBindings.GenerateUUIDv4();t(0,_=v),w.length<10?t(1,w=[v,...w]):t(1,w=[v,...w.slice(0,9)])}catch(v){console.error("UUID 生成失败:",v),alert("UUID 生成失败: "+(v.message||v))}finally{t(2,p=!1)}}}async function u(v){try{await navigator.clipboard.writeText(v),t(3,i=v),setTimeout(()=>t(3,i=null),2e3)}catch(o){console.error("复制失败:",o)}}function m(){t(1,w=[])}function d(v){t(0,_=v)}const g=()=>u(_),y=v=>d(v),k=v=>u(v);return r.$$set=v=>{"themeStore"in v&&t(8,l=v.themeStore)},[_,w,p,i,n,u,m,d,l,g,y,k]}class gs extends _t{constructor(e){super(),ft(this,e,dh,hh,ut,{themeStore:8})}}function ms(r,e,t){const l=r.slice();return l[19]=e[t][0],l[20]=e[t][1],l}function vs(r,e,t){const l=r.slice();return l[23]=e[t],l}function bs(r){let e,t,l=r[23].label+"",_,w,p,i,n,u,m,d;function g(){return r[16](r[23])}return{c(){e=L("button"),t=L("div"),_=Z(l),p=O(),i=L("div"),i.textContent=`${r[23].desc}`,n=O(),s(t,"class",w="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300")),s(i,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(e,"class",u="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))},m(y,k){V(y,e,k),c(e,t),c(t,_),c(e,p),c(e,i),c(e,n),m||(d=$(e,"click",g),m=!0)},p(y,k){r=y,k&8&&w!==(w="text-sm font-semibold "+(r[3]===r[23].value?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300"))&&s(t,"class",w),k&8&&u!==(u="p-3 rounded-xl border-2 text-left transition-all "+(r[3]===r[23].value?"border-purple-500 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"))&&s(e,"class",u)},d(y){y&&N(e),m=!1,d()}}}function uh(r){let e,t,l,_=r[2]==="encode"?"编码":"解码",w;return{c(){e=le("svg"),t=le("path"),l=O(),w=Z(_),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,i){V(p,e,i),c(e,t),V(p,l,i),V(p,w,i)},p(p,i){i&4&&_!==(_=p[2]==="encode"?"编码":"解码")&&de(w,_)},d(p){p&&(N(e),N(l),N(w))}}}function fh(r){let e,t,l,_;return{c(){e=le("svg"),t=le("circle"),l=le("path"),_=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(l,"class","opacity-75"),s(l,"fill","currentColor"),s(l,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){V(w,e,p),c(e,t),c(e,l),V(w,_,p)},p:Ae,d(w){w&&(N(e),N(_))}}}function ys(r){let e,t,l;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(_,w){V(_,e,w),t||(l=$(e,"click",r[9]),t=!0)},p:Ae,d(_){_&&N(e),t=!1,l()}}}function ws(r){let e,t,l,_,w=ze(Object.entries(r[5])),p=[];for(let i=0;i<w.length;i+=1)p[i]=ks(ms(r,w,i));return{c(){e=L("div"),t=L("h4"),t.textContent="查询参数",l=O(),_=L("div");for(let i=0;i<p.length;i+=1)p[i].c();s(t,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),s(_,"class","space-y-2 max-h-40 overflow-y-auto"),s(e,"class","border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-800/50")},m(i,n){V(i,e,n),c(e,t),c(e,l),c(e,_);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(_,null)},p(i,n){if(n&32){w=ze(Object.entries(i[5]));let u;for(u=0;u<w.length;u+=1){const m=ms(i,w,u);p[u]?p[u].p(m,n):(p[u]=ks(m),p[u].c(),p[u].m(_,null))}for(;u<p.length;u+=1)p[u].d(1);p.length=w.length}},d(i){i&&N(e),Nt(p,i)}}}function ks(r){let e,t,l=r[19]+"",_,w,p,i,n,u=r[20]+"",m,d;return{c(){e=L("div"),t=L("span"),_=Z(l),w=O(),p=L("span"),p.textContent="=",i=O(),n=L("span"),m=Z(u),d=O(),s(t,"class","px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg font-medium"),s(p,"class","text-gray-400"),s(n,"class","text-gray-700 dark:text-gray-300 font-mono break-all"),s(e,"class","flex items-center gap-2 text-sm")},m(g,y){V(g,e,y),c(e,t),c(t,_),c(e,w),c(e,p),c(e,i),c(e,n),c(n,m),c(e,d)},p(g,y){y&32&&l!==(l=g[19]+"")&&de(_,l),y&32&&u!==(u=g[20]+"")&&de(m,u)},d(g){g&&N(e)}}}function _h(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f=r[2]==="encode"?"输入文本":"输入 URL 编码",b,E,C,x,S,M,T,R,P,A,z,q,X,ie,G=r[2]==="encode"?"URL 编码结果":"解码结果",D,H,F,W,J,j,K=r[5]&&Object.keys(r[5]).length>0,Q,I,B,te,U,ae,ce,he,ee,oe=ze(r[6]),ue=[];for(let re=0;re<oe.length;re+=1)ue[re]=bs(vs(r,oe,re));function pe(re,ge){return re[4]?fh:uh}let Be=pe(r),Le=Be(r),Se=r[1]&&ys(r),ve=K&&ws(r);return{c(){e=L("div"),t=L("div"),l=L("button"),_=Z("编码"),p=O(),i=L("button"),n=Z("解码"),m=O(),d=L("div"),g=L("label"),g.textContent="编码/解码模式",y=O(),k=L("div");for(let re=0;re<ue.length;re+=1)ue[re].c();v=O(),o=L("div"),h=L("div"),a=L("label"),b=Z(f),E=O(),C=L("button"),C.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
        解析 URL`,x=O(),S=L("textarea"),T=O(),R=L("div"),P=L("button"),Le.c(),z=O(),q=L("div"),X=L("div"),ie=L("label"),D=Z(G),H=O(),Se&&Se.c(),F=O(),W=L("textarea"),j=O(),ve&&ve.c(),Q=O(),I=L("div"),B=L("button"),B.textContent="清空全部",te=O(),U=L("button"),U.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,ae=O(),ce=L("div"),ce.innerHTML='<p class="font-semibold mb-1">💡 提示:</p> <ul class="space-y-1 ml-4 list-disc"><li><b>Query 参数</b>：编码空格为 +，适合表单数据</li> <li><b>路径</b>：保留斜杠，适合 URL 路径部分</li> <li><b>完整 URL</b>：解析并显示 URL 各组成部分</li> <li>按 <kbd class="px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded">Ctrl+Enter</kbd> 快速执行</li></ul>',s(l,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(k,"class","grid grid-cols-3 gap-2"),s(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(C,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300"),s(h,"class","flex items-center justify-between mb-2"),s(S,"placeholder",M=r[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串..."),s(S,"class","w-full h-28 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),P.disabled=A=r[4]||!r[0].trim(),s(P,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(R,"class","flex items-center justify-center"),s(ie,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(X,"class","flex items-center justify-between mb-2"),W.readOnly=!0,s(W,"placeholder",J=r[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(W,"class","w-full h-28 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(B,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(U,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(I,"class","flex justify-between items-center"),s(ce,"class","text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg"),s(e,"class","space-y-6")},m(re,ge){V(re,e,ge),c(e,t),c(t,l),c(l,_),c(t,p),c(t,i),c(i,n),c(e,m),c(e,d),c(d,g),c(d,y),c(d,k);for(let ne=0;ne<ue.length;ne+=1)ue[ne]&&ue[ne].m(k,null);c(e,v),c(e,o),c(o,h),c(h,a),c(a,b),c(h,E),c(h,C),c(o,x),c(o,S),Ce(S,r[0]),c(e,T),c(e,R),c(R,P),Le.m(P,null),c(e,z),c(e,q),c(q,X),c(X,ie),c(ie,D),c(X,H),Se&&Se.m(X,null),c(q,F),c(q,W),Ce(W,r[1]),c(e,j),ve&&ve.m(e,null),c(e,Q),c(e,I),c(I,B),c(I,te),c(I,U),c(e,ae),c(e,ce),he||(ee=[$(l,"click",r[14]),$(i,"click",r[15]),$(C,"click",r[8]),$(S,"input",r[17]),$(S,"keydown",r[12]),$(P,"click",r[7]),$(W,"input",r[18]),$(B,"click",r[10]),$(U,"click",r[11])],he=!0)},p(re,[ge]){if(ge&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(re[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(l,"class",w),ge&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(re[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",u),ge&72){oe=ze(re[6]);let ne;for(ne=0;ne<oe.length;ne+=1){const be=vs(re,oe,ne);ue[ne]?ue[ne].p(be,ge):(ue[ne]=bs(be),ue[ne].c(),ue[ne].m(k,null))}for(;ne<ue.length;ne+=1)ue[ne].d(1);ue.length=oe.length}ge&4&&f!==(f=re[2]==="encode"?"输入文本":"输入 URL 编码")&&de(b,f),ge&4&&M!==(M=re[2]==="encode"?"输入要编码的文本...":"输入 URL 编码字符串...")&&s(S,"placeholder",M),ge&1&&Ce(S,re[0]),Be===(Be=pe(re))&&Le?Le.p(re,ge):(Le.d(1),Le=Be(re),Le&&(Le.c(),Le.m(P,null))),ge&17&&A!==(A=re[4]||!re[0].trim())&&(P.disabled=A),ge&4&&G!==(G=re[2]==="encode"?"URL 编码结果":"解码结果")&&de(D,G),re[1]?Se?Se.p(re,ge):(Se=ys(re),Se.c(),Se.m(X,null)):Se&&(Se.d(1),Se=null),ge&4&&J!==(J=re[2]==="encode"?"URL 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(W,"placeholder",J),ge&2&&Ce(W,re[1]),ge&32&&(K=re[5]&&Object.keys(re[5]).length>0),K?ve?ve.p(re,ge):(ve=ws(re),ve.c(),ve.m(e,Q)):ve&&(ve.d(1),ve=null)},i:Ae,o:Ae,d(re){re&&N(e),Nt(ue,re),Le.d(),Se&&Se.d(),ve&&ve.d(),he=!1,Pe(ee)}}}function ph(r,e,t){let{themeStore:l}=e,_="",w="",p="encode",i="query",n=!1,u=null;const m=[{value:"query",label:"Query 参数",desc:"空格转为 +"},{value:"path",label:"路径",desc:"保留斜杠"},{value:"full",label:"完整 URL",desc:"解析并编码"}];async function d(){if(!(!_.trim()||n||!window.wailsBindings)){t(4,n=!0),t(5,u=null);try{if(p==="encode"){const C=await window.wailsBindings.URLEncode(_,i);t(1,w=C.encoded)}else{const C=await window.wailsBindings.URLDecode(_,i);t(1,w=C.decoded),C.params&&t(5,u=C.params)}}catch(C){t(1,w=""),console.error("处理失败:",C),alert("处理失败: "+(C.message||C))}finally{t(4,n=!1)}}}async function g(){if(!(!_.trim()||!window.wailsBindings))try{const C=await window.wailsBindings.ParseURL(_);if(t(1,w=JSON.stringify(C,null,2)),C.queryParams){t(5,u={});for(const[x,S]of Object.entries(C.queryParams))t(5,u[x]=Array.isArray(S)?S[0]:S,u)}}catch(C){console.error("解析失败:",C),alert("URL解析失败: "+(C.message||C))}}async function y(){if(w)try{await navigator.clipboard.writeText(w)}catch(C){console.error("复制失败:",C)}}function k(){t(0,_=""),t(1,w=""),t(5,u=null)}function v(){t(2,p=p==="encode"?"decode":"encode"),t(0,_=""),t(1,w=""),t(5,u=null)}function o(C){(C.ctrlKey||C.metaKey)&&C.key.toLowerCase()==="enter"&&!n&&_.trim()&&(C.preventDefault(),d())}const h=()=>t(2,p="encode"),a=()=>t(2,p="decode"),f=C=>t(3,i=C.value);function b(){_=this.value,t(0,_)}function E(){w=this.value,t(1,w)}return r.$$set=C=>{"themeStore"in C&&t(13,l=C.themeStore)},[_,w,p,i,n,u,m,d,g,y,k,v,o,l,h,a,f,b,E]}class Ss extends _t{constructor(e){super(),ft(this,e,ph,_h,ut,{themeStore:13})}}function Cs(r,e,t){const l=r.slice();return l[12]=e[t],l}function xs(r){let e,t,l,_,w,p,i,n,u,m,d,g=[],y=new Map,k,v,o,h,a,f,b,E,C,x=ze(r[4]);const S=P=>P[12].id;for(let P=0;P<x.length;P+=1){let A=Cs(r,x,P),z=S(A);y.set(z,g[P]=Ls(z,A))}const M=[mh,gh],T=[];function R(P,A){return P[3]?0:1}return a=R(r),f=T[a]=M[a](r),{c(){e=L("div"),t=L("div"),l=O(),_=L("div"),w=L("div"),p=L("div"),i=L("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',n=O(),u=L("button"),u.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=O(),d=L("div");for(let P=0;P<g.length;P+=1)g[P].c();k=O(),v=L("div"),v.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',o=O(),h=L("div"),f.c(),s(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(u,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(u,"title","关闭"),s(p,"class","flex items-center justify-between mb-6"),s(d,"class","space-y-2 flex-1 overflow-y-auto"),s(v,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),s(w,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),s(h,"class","flex-1 flex flex-col overflow-hidden"),s(_,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),s(e,"role","dialog"),s(e,"aria-modal","true"),s(e,"tabindex","-1")},m(P,A){V(P,e,A),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),c(p,i),c(p,n),c(p,u),c(w,m),c(w,d);for(let z=0;z<g.length;z+=1)g[z]&&g[z].m(d,null);c(w,k),c(w,v),c(_,o),c(_,h),T[a].m(h,null),r[11](e),b=!0,E||(C=[$(u,"click",r[9]),$(e,"click",r[5]),$(e,"keydown",r[8])],E=!0)},p(P,A){A&88&&(x=ze(P[4]),g=Lt(g,A,S,1,P,x,y,d,Mt,Ls,null,Cs));let z=a;a=R(P),a===z?T[a].p(P,A):(xt(),He(T[z],1,1,()=>{T[z]=null}),Et(),f=T[a],f?f.p(P,A):(f=T[a]=M[a](P),f.c()),Oe(f,1),f.m(h,null))},i(P){b||(Oe(f),b=!0)},o(P){He(f),b=!1},d(P){P&&N(e);for(let A=0;A<g.length;A+=1)g[A].d();T[a].d(),r[11](null),E=!1,Pe(C)}}}function Es(r){let e;return{c(){e=L("span"),s(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-cyan-400 via-sky-500 to-indigo-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Ls(r,e){let t,l,_,w=e[12].icon+"",p,i,n,u=e[12].name+"",m,d,g,y,k,v,o=e[3]===e[12].id&&Es();function h(){return e[10](e[12])}return{key:r,first:null,c(){t=L("button"),o&&o.c(),l=O(),_=L("span"),p=Z(w),i=O(),n=L("span"),m=Z(u),g=O(),s(_,"class",`text-2xl ${e[12].color}`),s(n,"class",d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),s(t,"class",y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(a,f){V(a,t,f),o&&o.m(t,null),c(t,l),c(t,_),c(_,p),c(t,i),c(t,n),c(n,m),c(t,g),k||(v=$(t,"click",h),k=!0)},p(a,f){e=a,e[3]===e[12].id?o||(o=Es(),o.c(),o.m(t,l)):o&&(o.d(1),o=null),f&8&&d!==(d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&s(n,"class",d),f&8&&y!==(y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&s(t,"class",y)},d(a){a&&N(t),o&&o.d(),k=!1,v()}}}function gh(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',s(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,l){V(t,e,l)},p:Ae,i:Ae,o:Ae,d(t){t&&N(e)}}}function mh(r){var a,f;let e,t,l,_=((a=r[7]())==null?void 0:a.icon)+"",w,p,i=((f=r[7]())==null?void 0:f.name)+"",n,u,m,d,g,y,k;const v=[Sh,kh,wh,yh,bh,vh],o=[];function h(b,E){return b[3]==="json"?0:b[3]==="base64"?1:b[3]==="url"?2:b[3]==="hash"?3:b[3]==="timestamp"?4:b[3]==="uuid"?5:-1}return~(g=h(r))&&(y=o[g]=v[g](r)),{c(){var b;e=L("div"),t=L("h2"),l=L("span"),w=Z(_),p=O(),n=Z(i),u=O(),m=L("div"),d=L("div"),y&&y.c(),s(l,"class",`text-2xl ${(b=r[7]())==null?void 0:b.color}`),s(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),s(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),s(d,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),s(m,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(b,E){V(b,e,E),c(e,t),c(t,l),c(l,w),c(t,p),c(t,n),V(b,u,E),V(b,m,E),c(m,d),~g&&o[g].m(d,null),k=!0},p(b,E){let C=g;g=h(b),g===C?~g&&o[g].p(b,E):(y&&(xt(),He(o[C],1,1,()=>{o[C]=null}),Et()),~g?(y=o[g],y?y.p(b,E):(y=o[g]=v[g](b),y.c()),Oe(y,1),y.m(d,null)):y=null)},i(b){k||(Oe(y),k=!0)},o(b){He(y),k=!1},d(b){b&&(N(e),N(u),N(m)),~g&&o[g].d()}}}function vh(r){let e,t,l;var _=gs;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Ct(_,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(p,i){e&&Je(e,p,i),V(p,t,i),l=!0},p(p,i){if(_!==(_=gs)){if(e){xt();const n=e;He(n.$$.fragment,1,0,()=>{Xe(n,1)}),Et()}_?(e=Ct(_,w(p)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Je(e,t.parentNode,t)):e=null}else if(_){const n={};i&2&&(n.themeStore=p[1]),e.$set(n)}},i(p){l||(e&&Oe(e.$$.fragment,p),l=!0)},o(p){e&&He(e.$$.fragment,p),l=!1},d(p){p&&N(t),e&&Xe(e,p)}}}function bh(r){let e,t,l;var _=hs;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Ct(_,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(p,i){e&&Je(e,p,i),V(p,t,i),l=!0},p(p,i){if(_!==(_=hs)){if(e){xt();const n=e;He(n.$$.fragment,1,0,()=>{Xe(n,1)}),Et()}_?(e=Ct(_,w(p)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Je(e,t.parentNode,t)):e=null}else if(_){const n={};i&2&&(n.themeStore=p[1]),e.$set(n)}},i(p){l||(e&&Oe(e.$$.fragment,p),l=!0)},o(p){e&&He(e.$$.fragment,p),l=!1},d(p){p&&N(t),e&&Xe(e,p)}}}function yh(r){let e,t,l;var _=as;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Ct(_,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(p,i){e&&Je(e,p,i),V(p,t,i),l=!0},p(p,i){if(_!==(_=as)){if(e){xt();const n=e;He(n.$$.fragment,1,0,()=>{Xe(n,1)}),Et()}_?(e=Ct(_,w(p)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Je(e,t.parentNode,t)):e=null}else if(_){const n={};i&2&&(n.themeStore=p[1]),e.$set(n)}},i(p){l||(e&&Oe(e.$$.fragment,p),l=!0)},o(p){e&&He(e.$$.fragment,p),l=!1},d(p){p&&N(t),e&&Xe(e,p)}}}function wh(r){let e,t,l;var _=Ss;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Ct(_,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(p,i){e&&Je(e,p,i),V(p,t,i),l=!0},p(p,i){if(_!==(_=Ss)){if(e){xt();const n=e;He(n.$$.fragment,1,0,()=>{Xe(n,1)}),Et()}_?(e=Ct(_,w(p)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Je(e,t.parentNode,t)):e=null}else if(_){const n={};i&2&&(n.themeStore=p[1]),e.$set(n)}},i(p){l||(e&&Oe(e.$$.fragment,p),l=!0)},o(p){e&&He(e.$$.fragment,p),l=!1},d(p){p&&N(t),e&&Xe(e,p)}}}function kh(r){let e,t,l;var _=Qi;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Ct(_,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(p,i){e&&Je(e,p,i),V(p,t,i),l=!0},p(p,i){if(_!==(_=Qi)){if(e){xt();const n=e;He(n.$$.fragment,1,0,()=>{Xe(n,1)}),Et()}_?(e=Ct(_,w(p)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Je(e,t.parentNode,t)):e=null}else if(_){const n={};i&2&&(n.themeStore=p[1]),e.$set(n)}},i(p){l||(e&&Oe(e.$$.fragment,p),l=!0)},o(p){e&&He(e.$$.fragment,p),l=!1},d(p){p&&N(t),e&&Xe(e,p)}}}function Sh(r){let e,t,l;var _=Yi;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Ct(_,w(r))),{c(){e&&Ze(e.$$.fragment),t=wt()},m(p,i){e&&Je(e,p,i),V(p,t,i),l=!0},p(p,i){if(_!==(_=Yi)){if(e){xt();const n=e;He(n.$$.fragment,1,0,()=>{Xe(n,1)}),Et()}_?(e=Ct(_,w(p)),Ze(e.$$.fragment),Oe(e.$$.fragment,1),Je(e,t.parentNode,t)):e=null}else if(_){const n={};i&2&&(n.themeStore=p[1]),e.$set(n)}},i(p){l||(e&&Oe(e.$$.fragment,p),l=!0)},o(p){e&&He(e.$$.fragment,p),l=!1},d(p){p&&N(t),e&&Xe(e,p)}}}function Ch(r){let e,t,l=r[0]&&xs(r);return{c(){l&&l.c(),e=wt()},m(_,w){l&&l.m(_,w),V(_,e,w),t=!0},p(_,[w]){_[0]?l?(l.p(_,w),w&1&&Oe(l,1)):(l=xs(_),l.c(),Oe(l,1),l.m(e.parentNode,e)):l&&(xt(),He(l,1,1,()=>{l=null}),Et())},i(_){t||(Oe(l),t=!0)},o(_){He(l),t=!1},d(_){_&&N(e),l&&l.d(_)}}}function xh(r,e,t){let{isOpen:l=!1}=e,{themeStore:_}=e,w=null,p;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"url",name:"URL 编解码",icon:"🔗",color:"text-orange-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function n(v){v.target===v.currentTarget&&t(0,l=!1)}function u(v){t(3,w=v)}function m(){return i.find(v=>v.id===w)}function d(v){v.key==="Escape"&&l&&(v.preventDefault(),t(0,l=!1))}const g=()=>t(0,l=!1),y=v=>u(v.id);function k(v){lt[v?"unshift":"push"](()=>{p=v,t(2,p)})}return r.$$set=v=>{"isOpen"in v&&t(0,l=v.isOpen),"themeStore"in v&&t(1,_=v.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&l&&xr().then(()=>{p&&p.focus()})},[l,_,p,w,i,n,u,m,d,g,y,k]}class Eh extends _t{constructor(e){super(),ft(this,e,xh,Ch,ut,{isOpen:0,themeStore:1})}}function Ms(r,e,t){const l=r.slice();return l[57]=e[t],l[59]=t,l}function Ds(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h;return{c(){e=L("div"),t=L("label"),t.textContent="认证方式",l=O(),_=L("div"),w=L("button"),p=L("div"),i=Z("密码"),m=O(),d=L("button"),g=L("div"),y=Z("SSH 密钥"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"class",n=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(w,"type","button"),s(w,"class",u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(g,"class",k=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(d,"type","button"),s(d,"class",v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(_,"class","flex gap-2")},m(a,f){V(a,e,f),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),c(p,i),c(_,m),c(_,d),c(d,g),c(g,y),o||(h=[$(w,"click",r[33]),$(d,"click",r[34])],o=!0)},p(a,f){f[0]&8&&n!==(n=`text-xs font-medium ${a[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(p,"class",n),f[0]&8&&u!==(u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${a[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",u),f[0]&8&&k!==(k=`text-xs font-medium ${a[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(g,"class",k),f[0]&8&&v!==(v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${a[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(d,"class",v)},d(a){a&&N(e),o=!1,Pe(h)}}}function Ts(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a;function f(M,T){return M[11]?Mh:Lh}let b=f(r),E=b(r);function C(M,T){return M[11]?Th:Dh}let x=C(r),S=x(r);return{c(){e=L("div"),t=L("label"),t.textContent="SSH 私钥文件",l=O(),_=L("div"),w=L("input"),p=O(),i=L("button"),i.textContent="选择文件",n=O(),u=L("div"),m=L("label"),m.textContent="Passphrase（可选）",d=O(),g=L("div"),E.c(),y=O(),k=L("button"),S.c(),v=O(),o=L("p"),o.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(w,"type","text"),s(w,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),w.readOnly=!0,s(w,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),s(i,"type","button"),s(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),s(_,"class","flex gap-1.5"),s(m,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(k,"type","button"),s(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(g,"class","relative"),s(o,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(M,T){V(M,e,T),c(e,t),c(e,l),c(e,_),c(_,w),Ce(w,r[5].keyPath),c(_,p),c(_,i),V(M,n,T),V(M,u,T),c(u,m),c(u,d),c(u,g),E.m(g,null),c(g,y),c(g,k),S.m(k,null),c(u,v),c(u,o),h||(a=[$(w,"input",r[35]),$(i,"click",r[16]),$(k,"click",r[38])],h=!0)},p(M,T){T[0]&32&&w.value!==M[5].keyPath&&Ce(w,M[5].keyPath),b===(b=f(M))&&E?E.p(M,T):(E.d(1),E=b(M),E&&(E.c(),E.m(g,y))),x!==(x=C(M))&&(S.d(1),S=x(M),S&&(S.c(),S.m(k,null)))},d(M){M&&(N(e),N(n),N(u)),E.d(),S.d(),h=!1,Pe(a)}}}function Lh(r){let e,t,l;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){V(_,e,w),Ce(e,r[5].passphrase),t||(l=$(e,"input",r[37]),t=!0)},p(_,w){w[0]&32&&e.value!==_[5].passphrase&&Ce(e,_[5].passphrase)},d(_){_&&N(e),t=!1,l()}}}function Mh(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){V(_,e,w),Ce(e,r[5].passphrase),t||(l=$(e,"input",r[36]),t=!0)},p(_,w){w[0]&32&&e.value!==_[5].passphrase&&Ce(e,_[5].passphrase)},d(_){_&&N(e),t=!1,l()}}}function Dh(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function Th(r){let e,t,l;return{c(){e=le("svg"),t=le("path"),l=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){V(_,e,w),c(e,t),c(e,l)},d(_){_&&N(e)}}}function Bs(r){let e,t,l;return{c(){e=L("div"),t=Z(r[8]),s(e,"class",l=`p-2 rounded-md text-xs ${r[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(_,w){V(_,e,w),c(e,t)},p(_,w){w[0]&256&&de(t,_[8]),w[0]&256&&l!==(l=`p-2 rounded-md text-xs ${_[8].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&s(e,"class",l)},d(_){_&&N(e)}}}function As(r){let e,t,l,_,w,p,i,n,u,m;return{c(){e=L("div"),t=L("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',l=O(),_=L("select"),w=L("option"),w.textContent="MySQL",p=L("option"),p.textContent="PostgreSQL",i=L("option"),i.textContent="MongoDB",n=L("option"),n.textContent="Redis",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),w.__value="mysql",Ce(w,w.__value),p.__value="postgresql",Ce(p,p.__value),i.__value="mongodb",Ce(i,i.__value),n.__value="redis",Ce(n,n.__value),s(_,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[5].dbType===void 0&&_r(()=>r[39].call(_))},m(d,g){V(d,e,g),c(e,t),c(e,l),c(e,_),c(_,w),c(_,p),c(_,i),c(_,n),Lr(_,r[5].dbType,!0),u||(m=$(_,"change",r[39]),u=!0)},p(d,g){g[0]&32&&Lr(_,d[5].dbType)},d(d){d&&N(e),u=!1,m()}}}function Rs(r){let e,t,l,_,w,p;return{c(){e=L("div"),t=L("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',l=O(),_=L("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"type","text"),_.required=!0,s(_,"placeholder","root"),s(_,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){V(i,e,n),c(e,t),c(e,l),c(e,_),Ce(_,r[5].username),w||(p=$(_,"input",r[42]),w=!0)},p(i,n){n[0]&32&&_.value!==i[5].username&&Ce(_,i[5].username)},d(i){i&&N(e),w=!1,p()}}}function Os(r){let e,t,l,_,w,p,i,n,u,m,d,g,y;function k(b,E){return b[10]?Ah:Bh}let v=k(r),o=v(r);function h(b,E){return b[10]?Oh:Rh}let a=h(r),f=a(r);return{c(){e=L("div"),t=L("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',l=O(),_=L("div"),o.c(),w=O(),p=L("button"),f.c(),i=O(),n=L("div"),u=L("input"),m=O(),d=L("span"),d.textContent="保存密码",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"type","button"),s(p,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(_,"class","relative"),s(u,"type","checkbox"),s(u,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),s(d,"class","text-xs text-gray-700 dark:text-gray-300"),s(n,"class","flex items-center gap-1.5 cursor-pointer")},m(b,E){V(b,e,E),c(e,t),c(e,l),c(e,_),o.m(_,null),c(_,w),c(_,p),f.m(p,null),V(b,i,E),V(b,n,E),c(n,u),u.checked=r[5].savePassword,c(n,m),c(n,d),g||(y=[$(p,"click",r[45]),$(u,"change",r[46])],g=!0)},p(b,E){v===(v=k(b))&&o?o.p(b,E):(o.d(1),o=v(b),o&&(o.c(),o.m(_,w))),a!==(a=h(b))&&(f.d(1),f=a(b),f&&(f.c(),f.m(p,null))),E[0]&32&&(u.checked=b[5].savePassword)},d(b){b&&(N(e),N(i),N(n)),o.d(),f.d(),g=!1,Pe(y)}}}function Bh(r){let e,t,l;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){V(_,e,w),Ce(e,r[5].password),t||(l=$(e,"input",r[44]),t=!0)},p(_,w){w[0]&32&&e.value!==_[5].password&&Ce(e,_[5].password)},d(_){_&&N(e),t=!1,l()}}}function Ah(r){let e,t,l;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){V(_,e,w),Ce(e,r[5].password),t||(l=$(e,"input",r[43]),t=!0)},p(_,w){w[0]&32&&e.value!==_[5].password&&Ce(e,_[5].password)},d(_){_&&N(e),t=!1,l()}}}function Rh(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function Oh(r){let e,t,l;return{c(){e=le("svg"),t=le("path"),l=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){V(_,e,w),c(e,t),c(e,l)},d(_){_&&N(e)}}}function Ps(r){let e,t,l,_,w,p;return{c(){e=L("div"),t=L("label"),t.textContent="数据库名",l=O(),_=L("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"type","text"),s(_,"placeholder","例如：production_db"),s(_,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){V(i,e,n),c(e,t),c(e,l),c(e,_),Ce(_,r[5].database),w||(p=$(_,"input",r[47]),w=!0)},p(i,n){n[0]&32&&_.value!==i[5].database&&Ce(_,i[5].database)},d(i){i&&N(e),w=!1,p()}}}function Hs(r){let e,t=[],l=new Map,_,w=ze(r[14]);const p=n=>n[57];for(let n=0;n<w.length;n+=1){let u=Ms(r,w,n),m=p(u);l.set(m,t[n]=Is(m,u))}let i=r[14].length===0&&Fs();return{c(){e=L("div");for(let n=0;n<t.length;n+=1)t[n].c();_=O(),i&&i.c(),s(e,"class","absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg max-h-48 overflow-y-auto")},m(n,u){V(n,e,u);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);c(e,_),i&&i.m(e,null)},p(n,u){u[0]&2121728&&(w=ze(n[14]),t=Lt(t,u,p,1,n,w,l,e,Mt,Is,_,Ms)),n[14].length===0?i||(i=Fs(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(n){n&&N(e);for(let u=0;u<t.length;u+=1)t[u].d();i&&i.d()}}}function Is(r,e){let t,l=e[57]+"",_,w,p,i;function n(){return e[49](e[57])}function u(){return e[50](e[59])}return{key:r,first:null,c(){t=L("div"),_=Z(l),s(t,"class",w=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`),this.first=t},m(m,d){V(m,t,d),c(t,_),p||(i=[$(t,"click",n),$(t,"mouseover",u)],p=!0)},p(m,d){e=m,d[0]&16384&&l!==(l=e[57]+"")&&de(_,l),d[0]&24576&&w!==(w=`px-3 py-2 text-xs cursor-pointer transition-colors ${e[13]===e[59]?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-200":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`)&&s(t,"class",w)},d(m){m&&N(t),p=!1,Pe(i)}}}function Fs(r){let e;return{c(){e=L("div"),e.textContent="没有匹配的分组",s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Ph(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X,ie,G,D,H,F,W,J,j,K,Q,I,B,te,U,ae,ce,he,ee,oe,ue,pe,Be,Le,Se,ve,re,ge,ne,be,We,Fe,Qe,qe,Ke,et,Te,Y,me,ke,ye,Me,De=r[7]?"测试中...":"测试连接",Re,we,Ue,ht=r[9]?"保存中...":r[1]?"更新连接":"添加连接",Ye,tt,bt,je=r[2]==="ssh"&&Ds(r),rt=r[3]==="key"&&Ts(r),at=r[8]&&Bs(r),$e=r[2]==="database"&&As(r),nt=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&Rs(r),ct=r[3]==="password"&&Os(r),Ge=r[2]==="database"&&Ps(r),fe=r[12]&&r[6].length>0&&Hs(r);return{c(){e=L("div"),t=L("label"),t.textContent="连接类型",l=O(),_=L("div"),w=L("button"),p=L("div"),i=le("svg"),n=le("path"),m=O(),d=L("span"),g=Z("SSH"),v=O(),o=L("button"),h=L("div"),a=le("svg"),f=le("path"),E=O(),C=L("span"),x=Z("数据库"),T=O(),R=L("button"),P=L("div"),A=le("svg"),z=le("path"),X=O(),ie=L("span"),G=Z("Docker"),F=O(),W=L("form"),J=L("div"),j=L("label"),j.innerHTML='连接名称 <span class="text-red-500">*</span>',K=O(),Q=L("input"),I=O(),je&&je.c(),B=O(),rt&&rt.c(),te=O(),at&&at.c(),U=O(),$e&&$e.c(),ae=O(),ce=L("div"),he=L("div"),ee=L("label"),ee.innerHTML='主机地址 <span class="text-red-500">*</span>',oe=O(),ue=L("input"),pe=O(),Be=L("div"),Le=L("label"),Le.innerHTML='端口 <span class="text-red-500">*</span>',Se=O(),ve=L("input"),re=O(),nt&&nt.c(),ge=O(),ct&&ct.c(),ne=O(),Ge&&Ge.c(),be=O(),We=L("div"),Fe=L("label"),Fe.textContent="分组",Qe=O(),qe=L("div"),Ke=L("input"),Te=O(),fe&&fe.c(),Y=O(),me=L("div"),ke=L("button"),ke.textContent="取消",ye=O(),Me=L("button"),Re=Z(De),we=O(),Ue=L("button"),Ye=Z(ht),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","2"),s(n,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),s(i,"class",u=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(d,"class",y=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(p,"class","flex items-center justify-center gap-1"),s(w,"type","button"),s(w,"class",k=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"stroke-width","2"),s(f,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),s(a,"class",b=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(C,"class",S=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(h,"class","flex items-center justify-center gap-1"),s(o,"type","button"),s(o,"class",M=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(z,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),s(A,"class",q=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(A,"fill","currentColor"),s(A,"viewBox","0 0 24 24"),s(ie,"class",D=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(P,"class","flex items-center justify-center gap-1"),s(R,"type","button"),s(R,"class",H=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(_,"class","grid grid-cols-3 gap-2"),s(e,"class","mb-4"),s(j,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(Q,"type","text"),Q.required=!0,s(Q,"placeholder","例如：生产服务器-01"),s(Q,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ee,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(ue,"type","text"),ue.required=!0,s(ue,"placeholder","192.168.1.10 或 example.com"),s(ue,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(he,"class","col-span-2"),s(Le,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(ve,"type","text"),ve.required=!0,s(ve,"placeholder",r[18]()),s(ve,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ce,"class","grid grid-cols-3 gap-2"),s(Fe,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(Ke,"type","text"),s(Ke,"placeholder","例如：生产环境"),s(Ke,"class",et=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${r[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`),s(qe,"class","relative"),s(ke,"type","button"),s(ke,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(Me,"type","button"),Me.disabled=r[7],s(Me,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(Ue,"type","submit"),Ue.disabled=r[9],s(Ue,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(me,"class","flex gap-2 pt-3"),s(W,"class","space-y-3")},m(_e,Ne){V(_e,e,Ne),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),c(p,i),c(i,n),c(p,m),c(p,d),c(d,g),c(_,v),c(_,o),c(o,h),c(h,a),c(a,f),c(h,E),c(h,C),c(C,x),c(_,T),c(_,R),c(R,P),c(P,A),c(A,z),c(P,X),c(P,ie),c(ie,G),V(_e,F,Ne),V(_e,W,Ne),c(W,J),c(J,j),c(J,K),c(J,Q),Ce(Q,r[5].name),c(W,I),je&&je.m(W,null),c(W,B),rt&&rt.m(W,null),c(W,te),at&&at.m(W,null),c(W,U),$e&&$e.m(W,null),c(W,ae),c(W,ce),c(ce,he),c(he,ee),c(he,oe),c(he,ue),Ce(ue,r[5].host),c(ce,pe),c(ce,Be),c(Be,Le),c(Be,Se),c(Be,ve),Ce(ve,r[5].port),c(W,re),nt&&nt.m(W,null),c(W,ge),ct&&ct.m(W,null),c(W,ne),Ge&&Ge.m(W,null),c(W,be),c(W,We),c(We,Fe),c(We,Qe),c(We,qe),c(qe,Ke),Ce(Ke,r[4]),c(qe,Te),fe&&fe.m(qe,null),c(W,Y),c(W,me),c(me,ke),c(me,ye),c(me,Me),c(Me,Re),c(me,we),c(me,Ue),c(Ue,Ye),tt||(bt=[$(w,"click",r[29]),$(o,"click",r[30]),$(R,"click",r[31]),$(Q,"input",r[32]),$(ue,"input",r[40]),$(ve,"input",r[41]),$(Ke,"input",r[48]),$(Ke,"focus",r[19]),$(Ke,"input",r[20]),$(Ke,"keydown",r[22]),$(Ke,"blur",r[23]),$(ke,"click",r[51]),$(Me,"click",r[15]),$(W,"submit",Hn(r[17]))],tt=!0)},p(_e,Ne){Ne[0]&4&&u!==(u=`w-4 h-4 ${_e[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(i,"class",u),Ne[0]&4&&y!==(y=`text-xs font-medium ${_e[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(d,"class",y),Ne[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${_e[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",k),Ne[0]&4&&b!==(b=`w-4 h-4 ${_e[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(a,"class",b),Ne[0]&4&&S!==(S=`text-xs font-medium ${_e[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(C,"class",S),Ne[0]&4&&M!==(M=`p-2 rounded-lg border-2 transition-all ${_e[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(o,"class",M),Ne[0]&4&&q!==(q=`w-4 h-4 ${_e[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(A,"class",q),Ne[0]&4&&D!==(D=`text-xs font-medium ${_e[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(ie,"class",D),Ne[0]&4&&H!==(H=`p-2 rounded-lg border-2 transition-all ${_e[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(R,"class",H),Ne[0]&32&&Q.value!==_e[5].name&&Ce(Q,_e[5].name),_e[2]==="ssh"?je?je.p(_e,Ne):(je=Ds(_e),je.c(),je.m(W,B)):je&&(je.d(1),je=null),_e[3]==="key"?rt?rt.p(_e,Ne):(rt=Ts(_e),rt.c(),rt.m(W,te)):rt&&(rt.d(1),rt=null),_e[8]?at?at.p(_e,Ne):(at=Bs(_e),at.c(),at.m(W,U)):at&&(at.d(1),at=null),_e[2]==="database"?$e?$e.p(_e,Ne):($e=As(_e),$e.c(),$e.m(W,ae)):$e&&($e.d(1),$e=null),Ne[0]&32&&ue.value!==_e[5].host&&Ce(ue,_e[5].host),Ne[0]&32&&ve.value!==_e[5].port&&Ce(ve,_e[5].port),_e[3]==="password"||_e[2]==="database"||_e[2]==="docker"?nt?nt.p(_e,Ne):(nt=Rs(_e),nt.c(),nt.m(W,ge)):nt&&(nt.d(1),nt=null),_e[3]==="password"?ct?ct.p(_e,Ne):(ct=Os(_e),ct.c(),ct.m(W,ne)):ct&&(ct.d(1),ct=null),_e[2]==="database"?Ge?Ge.p(_e,Ne):(Ge=Ps(_e),Ge.c(),Ge.m(W,be)):Ge&&(Ge.d(1),Ge=null),Ne[0]&4096&&et!==(et=`w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${_e[12]?"ring-purple-500 border-purple-500":"border-gray-200 dark:border-gray-600 focus:border-transparent"}`)&&s(Ke,"class",et),Ne[0]&16&&Ke.value!==_e[4]&&Ce(Ke,_e[4]),_e[12]&&_e[6].length>0?fe?fe.p(_e,Ne):(fe=Hs(_e),fe.c(),fe.m(qe,null)):fe&&(fe.d(1),fe=null),Ne[0]&128&&De!==(De=_e[7]?"测试中...":"测试连接")&&de(Re,De),Ne[0]&128&&(Me.disabled=_e[7]),Ne[0]&514&&ht!==(ht=_e[9]?"保存中...":_e[1]?"更新连接":"添加连接")&&de(Ye,ht),Ne[0]&512&&(Ue.disabled=_e[9])},d(_e){_e&&(N(e),N(F),N(W)),je&&je.d(),rt&&rt.d(),at&&at.d(),$e&&$e.d(),nt&&nt.d(),ct&&ct.d(),Ge&&Ge.d(),fe&&fe.d(),tt=!1,Pe(bt)}}}function Hh(r){let e,t,l;function _(p){r[53](p)}let w={onClose:r[52],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[Ph]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new gr({props:w}),lt.push(()=>gt(e,"isOpen",_)),{c(){Ze(e.$$.fragment)},m(p,i){Je(e,p,i),l=!0},p(p,i){const n={};i[0]&1&&(n.onClose=p[52]),i[0]&2&&(n.title=p[1]?"编辑连接":"添加连接"),i[0]&32767|i[1]&536870912&&(n.$$scope={dirty:i,ctx:p}),!t&&i[0]&1&&(t=!0,n.isOpen=p[0],pt(()=>t=!1)),e.$set(n)},i(p){l||(Oe(e.$$.fragment,p),l=!0)},o(p){He(e.$$.fragment,p),l=!1},d(p){Xe(e,p)}}}function Ih(r,e,t){let l,_,w,p;vt(r,Ut,ne=>t(28,p=ne));let{isOpen:i=!1}=e,{onAdd:n=()=>{}}=e,{onUpdate:u=()=>{}}=e,{editingAsset:m=null}=e,d="ssh",g="password",y=!1,k="",v=!1,o=!1,h=!1,a=!1,f=!1,b=!1,E="",C=-1,x={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function S(){if(!window.wailsBindings){t(8,k="Wails 绑定未加载");return}if(!x.host){t(8,k="请填写主机地址");return}if(g==="password"&&!x.password){t(8,k="请输入密码以测试连接");return}if(g==="password"&&!x.username){t(8,k="请填写用户名");return}if(g==="key"&&!x.keyPath){t(8,k="请选择 SSH 密钥文件");return}t(7,y=!0),t(8,k="");try{const ne=g==="key"?x.keyPath:x.password;await window.wailsBindings.TestConnection(x.host,parseInt(x.port),x.username,g,ne,x.passphrase||""),t(8,k="✓ 连接成功")}catch(ne){console.error("Connection test failed:",ne),t(8,k="✗ 连接失败: "+ne)}finally{t(7,y=!1)}}async function M(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const ne=await window.wailsBindings.SelectSSHKeyFile();ne&&t(5,x.keyPath=ne,x)}catch(ne){console.error("Failed to select key file:",ne),t(8,k="选择密钥文件失败: "+ne)}}async function T(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!x.name||!x.host){alert("请填写必填字段（连接名称、主机地址）");return}if(g==="password"&&!x.username){alert("密码认证需要填写用户名");return}if(g==="password"&&!x.password){alert("密码认证需要输入密码");return}if(g==="key"&&!x.keyPath){alert("密钥认证需要选择密钥文件");return}t(9,v=!0);try{const ne=!!x.id,be={id:ne?x.id:`conn_${Date.now()}`,name:x.name,host:x.host,port:parseInt(x.port),user:x.username,auth_type:g,key_path:g==="key"?x.keyPath:"",tags:[x.group||"默认分组"],type:d,metadata:{database:x.database||void 0}};ne?(await window.wailsBindings.UpdateConnection(be),g==="password"&&x.password&&x.savePassword?await window.wailsBindings.SavePassword(be.id,x.password):g==="password"&&!x.savePassword&&await window.wailsBindings.DeletePassword(be.id),u(be)):(n(be),g==="password"&&x.password&&x.savePassword&&await window.wailsBindings.SavePassword(be.id,x.password)),t(0,i=!1)}catch(ne){console.error("Failed to save connection:",ne),alert("保存连接失败: "+ne)}finally{t(9,v=!1)}}function R(){t(5,x={id:"",name:"",host:"",port:P(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(8,k=""),t(10,o=!1),t(11,h=!1),t(12,b=!1),t(4,E=""),t(13,C=-1)}function P(){switch(d){case"ssh":return"22";case"docker":return"2375";case"database":switch(x.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function A(){var ne,be,We;if(!(!m||!i||a))try{const Fe=await window.wailsBindings.GetConnection(m.id);if(Fe){t(5,x={id:Fe.id,name:Fe.name||"",host:Fe.host||"",port:((ne=Fe.port)==null?void 0:ne.toString())||"",username:Fe.user||"",password:"",savePassword:!1,keyPath:Fe.key_path||"",passphrase:"",group:((be=Fe.tags)==null?void 0:be[0])||"",dbType:"mysql",database:((We=Fe.metadata)==null?void 0:We.database)||""}),t(2,d=Fe.type||"ssh"),t(3,g=Fe.auth_type||"password"),a=!0;try{if(await window.wailsBindings.HasPassword(Fe.id)){t(5,x.savePassword=!0,x);const qe=await window.wailsBindings.GetPassword(Fe.id);t(5,x.password=qe||"",x)}}catch(Qe){console.warn("Failed to load password:",Qe)}}}catch(Fe){console.error("Failed to load connection:",Fe)}}function z(){t(12,b=!b),b&&(t(4,E=x.group||""),t(13,C=w.indexOf(x.group)))}function q(ne){t(4,E=ne.target.value),t(5,x.group=ne.target.value,x),t(12,b=!0),t(13,C=-1)}function X(ne){t(5,x.group=ne,x),t(4,E=ne),t(12,b=!1),t(13,C=w.indexOf(ne))}function ie(ne){const be=w;if(!b){(ne.key==="ArrowDown"||ne.key==="ArrowUp"||ne.key==="Enter")&&(ne.preventDefault(),t(12,b=!0),t(4,E=x.group||""),t(13,C=be.indexOf(x.group)));return}switch(ne.key){case"ArrowDown":ne.preventDefault(),t(13,C=Math.min(C+1,be.length-1));break;case"ArrowUp":ne.preventDefault(),t(13,C=Math.max(C-1,0));break;case"Enter":ne.preventDefault(),C>=0&&C<be.length?X(be[C]):t(12,b=!1);break;case"Escape":ne.preventDefault(),t(12,b=!1),t(4,E=x.group||"");break;case"Tab":ne.preventDefault(),t(12,b=!1);break}}function G(){setTimeout(()=>{t(12,b=!1)},150)}const D=()=>t(2,d="ssh"),H=()=>t(2,d="database"),F=()=>t(2,d="docker");function W(){x.name=this.value,t(5,x),t(0,i),t(1,m)}const J=()=>{t(3,g="password"),t(8,k="")},j=()=>{t(3,g="key"),t(8,k="")};function K(){x.keyPath=this.value,t(5,x),t(0,i),t(1,m)}function Q(){x.passphrase=this.value,t(5,x),t(0,i),t(1,m)}function I(){x.passphrase=this.value,t(5,x),t(0,i),t(1,m)}const B=()=>t(11,h=!h);function te(){x.dbType=tn(this),t(5,x),t(0,i),t(1,m)}function U(){x.host=this.value,t(5,x),t(0,i),t(1,m)}function ae(){x.port=this.value,t(5,x),t(0,i),t(1,m)}function ce(){x.username=this.value,t(5,x),t(0,i),t(1,m)}function he(){x.password=this.value,t(5,x),t(0,i),t(1,m)}function ee(){x.password=this.value,t(5,x),t(0,i),t(1,m)}const oe=()=>t(10,o=!o);function ue(){x.savePassword=this.checked,t(5,x),t(0,i),t(1,m)}function pe(){x.database=this.value,t(5,x),t(0,i),t(1,m)}function Be(){E=this.value,t(4,E)}const Le=ne=>X(ne),Se=ne=>t(13,C=ne),ve=()=>t(0,i=!1),re=()=>{t(0,i=!1)};function ge(ne){i=ne,t(0,i)}return r.$$set=ne=>{"isOpen"in ne&&t(0,i=ne.isOpen),"onAdd"in ne&&t(24,n=ne.onAdd),"onUpdate"in ne&&t(25,u=ne.onUpdate),"editingAsset"in ne&&t(1,m=ne.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&268435456&&t(27,l=p.reduce((ne,be)=>(be.group&&!ne.includes(be.group)&&ne.push(be.group),ne),[])),r.$$.dirty[0]&134217744&&t(6,_=l.filter(ne=>ne.toLowerCase().includes(E.toLowerCase()))),r.$$.dirty[0]&35&&i&&!m&&!x.id&&(x.port||t(5,x.port=P(),x)),r.$$.dirty[0]&32&&x.port===""&&t(5,x.port=P(),x),r.$$.dirty[0]&96&&t(14,w=x.group&&!_.includes(x.group)?[..._,x.group]:_),r.$$.dirty[0]&1&&t(26,f=i),r.$$.dirty[0]&67108865&&f&&!i&&R(),r.$$.dirty[0]&12&&(d==="ssh"?g!=="password"&&g!=="key"&&t(3,g="password"):t(3,g="password")),r.$$.dirty[0]&3&&i&&m&&A(),r.$$.dirty[0]&34&&m&&x.id!==m.id&&(a=!1),r.$$.dirty[0]&67108867&&!f&&i&&m&&(a=!1)},[i,m,d,g,E,x,_,y,k,v,o,h,b,C,w,S,M,T,P,z,q,X,ie,G,n,u,f,l,p,D,H,F,W,J,j,K,Q,I,B,te,U,ae,ce,he,ee,oe,ue,pe,Be,Le,Se,ve,re,ge]}class Fh extends _t{constructor(e){super(),ft(this,e,Ih,Hh,ut,{isOpen:0,onAdd:24,onUpdate:25,editingAsset:1},null,[-1,-1])}}function jh(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X,ie;return{c(){e=L("div"),t=L("div"),t.textContent="哈",l=O(),_=L("div"),w=L("h3"),p=Z("AHaSSHTools"),n=O(),u=L("p"),m=Z("啊哈 SSH 连接工具"),g=O(),y=L("p"),k=Z("版本 "),v=Z(r[3]),h=O(),a=L("p"),f=Z("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),E=O(),C=L("button"),x=le("svg"),S=le("path"),M=O(),T=L("span"),T.textContent="访问 GitHub",P=O(),A=L("p"),z=Z("© 2026 AHaSSHTools. All rights reserved."),s(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),s(w,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),s(u,"class",d="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),s(y,"class",o="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),s(_,"class","text-center space-y-1"),s(a,"class",b="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),s(S,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),s(x,"class","w-5 h-5"),s(x,"viewBox","0 0 24 24"),s(x,"fill","currentColor"),s(C,"class",R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),s(A,"class",q="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),s(e,"class","flex flex-col items-center gap-5 py-4")},m(G,D){V(G,e,D),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),c(_,n),c(_,u),c(u,m),c(_,g),c(_,y),c(y,k),c(y,v),c(e,h),c(e,a),c(a,f),c(e,E),c(e,C),c(C,x),c(x,S),c(C,M),c(C,T),c(e,P),c(e,A),c(A,z),X||(ie=$(C,"click",zh),X=!0)},p(G,D){D&4&&i!==(i="text-xl font-bold "+(G[2]==="dark"?"text-white":"text-gray-900"))&&s(w,"class",i),D&4&&d!==(d="text-sm "+(G[2]==="dark"?"text-gray-400":"text-gray-500"))&&s(u,"class",d),D&8&&de(v,G[3]),D&4&&o!==(o="text-xs "+(G[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&s(y,"class",o),D&4&&b!==(b="text-sm text-center max-w-xs "+(G[2]==="dark"?"text-gray-400":"text-gray-600"))&&s(a,"class",b),D&4&&R!==(R="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(G[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&s(C,"class",R),D&4&&q!==(q="text-xs "+(G[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&s(A,"class",q)},d(G){G&&N(e),X=!1,ie()}}}function Wh(r){let e,t,l;function _(p){r[5](p)}let w={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[jh]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new gr({props:w}),lt.push(()=>gt(e,"isOpen",_)),{c(){Ze(e.$$.fragment)},m(p,i){Je(e,p,i),l=!0},p(p,[i]){const n={};i&2&&(n.onClose=p[1]),i&140&&(n.$$scope={dirty:i,ctx:p}),!t&&i&1&&(t=!0,n.isOpen=p[0],pt(()=>t=!1)),e.$set(n)},i(p){l||(Oe(e.$$.fragment,p),l=!0)},o(p){He(e.$$.fragment,p),l=!1},d(p){Xe(e,p)}}}async function zh(){try{await(await ur(()=>Promise.resolve().then(()=>fn),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function Uh(r,e,t){let{isOpen:l=!1}=e,{onClose:_=()=>{}}=e,{themeStore:w={subscribe:()=>()=>{}}}=e,p="light",i="loading...";const n=w.subscribe(m=>{t(2,p=m)});ar(async()=>{try{const{GetVersion:m}=await ur(async()=>{const{GetVersion:d}=await Promise.resolve().then(()=>Sn);return{GetVersion:d}},void 0);t(3,i=await m())}catch(m){console.error("Failed to get version:",m),t(3,i="unknown")}return()=>{n()}});function u(m){l=m,t(0,l)}return r.$$set=m=>{"isOpen"in m&&t(0,l=m.isOpen),"onClose"in m&&t(1,_=m.onClose),"themeStore"in m&&t(4,w=m.themeStore)},[l,_,p,i,w,u]}class Nh extends _t{constructor(e){super(),ft(this,e,Uh,Wh,ut,{isOpen:0,onClose:1,themeStore:4})}}function js(r,e,t){const l=r.slice();return l[56]=e[t],l}function Ws(r,e,t){const l=r.slice();return l[56]=e[t],l}function zs(r){let e,t=r[12].length+"",l;return{c(){e=L("span"),l=Z(t),s(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(_,w){V(_,e,w),c(e,l)},p(_,w){w[0]&4096&&t!==(t=_[12].length+"")&&de(l,t)},d(_){_&&N(e)}}}function Vh(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function Kh(r){let e,t;return{c(){e=le("svg"),t=le("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(l,_){V(l,e,_),c(e,t)},d(l){l&&N(e)}}}function Us(r){let e,t,l,_,w,p;return{c(){e=L("button"),t=le("svg"),l=le("path"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M9 5l7 7-7 7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",_="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开资产列表")},m(i,n){V(i,e,n),c(e,t),c(t,l),w||(p=$(e,"click",r[17]),w=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&_!==(_="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",_)},d(i){i&&N(e),w=!1,p()}}}function Ns(r){let e,t,l,_,w,p,i,n,u;return{c(){e=L("div"),t=L("div"),l=O(),_=L("button"),w=le("svg"),p=le("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M15 19l-7-7 7-7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),_.disabled=r[2],s(_,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(_,"title","折叠资产列表"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Ee(e,"cursor",r[2]?"default":"col-resize"),Ee(e,"height","100%"),Ee(e,"padding","0 2px"),Ee(e,"pointer-events",r[2]?"none":"auto")},m(m,d){V(m,e,d),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),n||(u=[$(_,"click",r[17]),$(e,"mousedown",r[19])],n=!0)},p(m,d){d[0]&4&&(_.disabled=m[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(m[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(_,"class",i),d[0]&4&&Ee(e,"cursor",m[2]?"default":"col-resize"),d[0]&4&&Ee(e,"pointer-events",m[2]?"none":"auto")},d(m){m&&N(e),n=!1,Pe(u)}}}function Vs(r){let e,t,l,_,w,p,i,n,u;return{c(){e=L("div"),t=L("div"),l=O(),_=L("button"),w=le("svg"),p=le("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M9 5l7 7-7 7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),_.disabled=r[2],s(_,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(_,"title","折叠右侧面板"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),Ee(e,"cursor",r[2]?"default":"col-resize"),Ee(e,"height","100%"),Ee(e,"padding","0 2px"),Ee(e,"pointer-events",r[2]?"none":"auto")},m(m,d){V(m,e,d),c(e,t),c(e,l),c(e,_),c(_,w),c(w,p),n||(u=[$(_,"click",r[18]),$(e,"mousedown",r[20])],n=!0)},p(m,d){d[0]&4&&(_.disabled=m[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(m[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(_,"class",i),d[0]&4&&Ee(e,"cursor",m[2]?"default":"col-resize"),d[0]&4&&Ee(e,"pointer-events",m[2]?"none":"auto")},d(m){m&&N(e),n=!1,Pe(u)}}}function Ks(r){let e,t,l,_,w,p;return{c(){e=L("button"),t=le("svg"),l=le("path"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","2"),s(l,"d","M15 19l-7-7 7-7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",_="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开右侧面板")},m(i,n){V(i,e,n),c(e,t),c(t,l),w||(p=$(e,"click",r[18]),w=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&_!==(_="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",_)},d(i){i&&N(e),w=!1,p()}}}function qs(r){let e,t,l,_,w,p,i,n,u,m,d=r[12].length+"",g,y,k,v,o,h,a=r[14].length+"",f,b,E,C,x,S,M,T;function R(z,q){if(z[13].activeTab==="active"&&z[12].length===0)return Xh;if(z[13].activeTab==="active")return Jh;if(z[13].activeTab==="history"&&z[14].length===0)return Gh;if(z[13].activeTab==="history")return qh}let P=R(r),A=P&&P(r);return{c(){e=L("div"),t=L("div"),l=L("div"),_=L("h3"),_.textContent="上传任务",w=O(),p=L("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=O(),n=L("div"),u=L("button"),m=Z("进行中 ("),g=Z(d),y=Z(")"),v=O(),o=L("button"),h=Z("历史 ("),f=Z(a),b=Z(")"),x=O(),A&&A.c(),s(_,"class","font-semibold text-sm"),s(p,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),s(l,"class","flex items-center justify-between mb-3"),s(u,"class",k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(o,"class",E="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(n,"class","flex gap-2"),s(t,"class",C="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(e,"class",S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),Ee(e,"height","calc(100vh - 3.5rem)")},m(z,q){V(z,e,q),c(e,t),c(t,l),c(l,_),c(l,w),c(l,p),c(t,i),c(t,n),c(n,u),c(u,m),c(u,g),c(u,y),c(n,v),c(n,o),c(o,h),c(o,f),c(o,b),c(e,x),A&&A.m(e,null),M||(T=[$(p,"click",r[36]),$(u,"click",r[37]),$(o,"click",r[38])],M=!0)},p(z,q){q[0]&4096&&d!==(d=z[12].length+"")&&de(g,d),q[0]&8193&&k!==(k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(z[13].activeTab==="active"?(z[0]==="dark","bg-blue-600 text-white"):z[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(u,"class",k),q[0]&16384&&a!==(a=z[14].length+"")&&de(f,a),q[0]&8193&&E!==(E="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(z[13].activeTab==="history"?(z[0]==="dark","bg-blue-600 text-white"):z[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(o,"class",E),q[0]&1&&C!==(C="p-4 border-b "+(z[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",C),P===(P=R(z))&&A?A.p(z,q):(A&&A.d(1),A=P&&P(z),A&&(A.c(),A.m(e,null))),q[0]&1&&S!==(S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(z[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&s(e,"class",S)},d(z){z&&N(e),A&&A.d(),M=!1,Pe(T)}}}function qh(r){let e,t,l,_,w,p,i,n,u=[],m=new Map,d,g,y=ze(r[14]);const k=v=>v[56].id;for(let v=0;v<y.length;v+=1){let o=js(r,y,v),h=k(o);m.set(h,u[v]=Js(h,o))}return{c(){e=L("div"),t=L("div"),l=L("button"),_=Z("清空历史记录"),i=O(),n=L("div");for(let v=0;v<u.length;v+=1)u[v].c();s(l,"class",w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),s(t,"class",p="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(n,"class","flex-1 overflow-y-auto p-4 space-y-3"),s(e,"class","flex-1 flex flex-col")},m(v,o){V(v,e,o),c(e,t),c(t,l),c(l,_),c(e,i),c(e,n);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(n,null);d||(g=$(l,"click",r[40]),d=!0)},p(v,o){o[0]&1&&w!==(w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(v[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&s(l,"class",w),o[0]&1&&p!==(p="p-3 border-b "+(v[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",p),o[0]&16385&&(y=ze(v[14]),u=Lt(u,o,k,1,v,y,m,n,Mt,Js,null,js))},d(v){v&&N(e);for(let o=0;o<u.length;o+=1)u[o].d();d=!1,g()}}}function Gh(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function Jh(r){let e,t=[],l=new Map,_=ze(r[12]);const w=p=>p[56].id;for(let p=0;p<_.length;p+=1){let i=Ws(r,_,p),n=w(i);l.set(n,t[p]=Ys(n,i))}return{c(){e=L("div");for(let p=0;p<t.length;p+=1)t[p].c();s(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(p,i){V(p,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(p,i){i[0]&4097&&(_=ze(p[12]),t=Lt(t,i,w,1,p,_,l,e,Mt,Ys,null,Ws))},d(p){p&&N(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Xh(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,l){V(t,e,l)},p:Ae,d(t){t&&N(e)}}}function Yh(r){let e;return{c(){e=L("span"),e.textContent="已取消",s(e,"class","text-gray-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Zh(r){let e;return{c(){e=L("span"),e.textContent="失败",s(e,"class","text-red-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Qh(r){let e;return{c(){e=L("span"),e.textContent="完成",s(e,"class","text-green-500")},m(t,l){V(t,e,l)},d(t){t&&N(e)}}}function Gs(r){let e,t=r[56].error+"",l,_;return{c(){e=L("div"),l=Z(t),s(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),s(e,"title",_=r[56].error)},m(w,p){V(w,e,p),c(e,l)},p(w,p){p[0]&16384&&t!==(t=w[56].error+"")&&de(l,t),p[0]&16384&&_!==(_=w[56].error)&&s(e,"title",_)},d(w){w&&N(e)}}}function Js(r,e){let t,l,_,w,p=e[56].filename+"",i,n,u,m,d,g,y,k,v=Ht(e[56].totalBytes)+"",o,h,a,f,b,E,C,x;function S(A,z){if(A[56].status==="completed")return Qh;if(A[56].status==="failed")return Zh;if(A[56].status==="cancelled")return Yh}let M=S(e),T=M&&M(e),R=e[56].status==="failed"&&e[56].error&&Gs(e);function P(){return e[41](e[56])}return{key:r,first:null,c(){t=L("div"),l=L("div"),_=L("div"),w=L("div"),i=Z(p),u=O(),m=L("div"),T&&T.c(),d=O(),g=L("span"),g.textContent="•",y=O(),k=L("span"),o=Z(v),h=O(),R&&R.c(),a=O(),f=L("button"),f.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=O(),s(w,"class","text-sm font-medium truncate"),s(w,"title",n=e[56].filename),s(m,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),s(_,"class","flex-1 min-w-0"),s(f,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),s(f,"title","删除记录"),s(l,"class","flex items-center justify-between"),s(t,"class",E="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(A,z){V(A,t,z),c(t,l),c(l,_),c(_,w),c(w,i),c(_,u),c(_,m),T&&T.m(m,null),c(m,d),c(m,g),c(m,y),c(m,k),c(k,o),c(_,h),R&&R.m(_,null),c(l,a),c(l,f),c(t,b),C||(x=$(f,"click",P),C=!0)},p(A,z){e=A,z[0]&16384&&p!==(p=e[56].filename+"")&&de(i,p),z[0]&16384&&n!==(n=e[56].filename)&&s(w,"title",n),M!==(M=S(e))&&(T&&T.d(1),T=M&&M(e),T&&(T.c(),T.m(m,d))),z[0]&16384&&v!==(v=Ht(e[56].totalBytes)+"")&&de(o,v),e[56].status==="failed"&&e[56].error?R?R.p(e,z):(R=Gs(e),R.c(),R.m(_,null)):R&&(R.d(1),R=null),z[0]&1&&E!==(E="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",E)},d(A){A&&N(t),T&&T.d(),R&&R.d(),C=!1,x()}}}function Xs(r){let e,t=Ci(r[56].speed)+"",l;return{c(){e=Z("• "),l=Z(t)},m(_,w){V(_,e,w),V(_,l,w)},p(_,w){w[0]&4096&&t!==(t=Ci(_[56].speed)+"")&&de(l,t)},d(_){_&&(N(e),N(l))}}}function Ys(r,e){let t,l,_,w,p=e[56].filename+"",i,n,u,m,d=Ht(e[56].bytesSent)+"",g,y,k=Ht(e[56].totalBytes)+"",v,o,h,a,f,b=Math.round(Sr(e[56]))+"",E,C,x,S,M,T,R,P,A,z,q,X,ie,G=e[56].speed&&Xs(e);function D(){return e[39](e[56])}return{key:r,first:null,c(){t=L("div"),l=L("div"),_=L("div"),w=L("div"),i=Z(p),u=O(),m=L("div"),g=Z(d),y=Z(" / "),v=Z(k),o=O(),G&&G.c(),h=O(),a=L("div"),f=L("span"),E=Z(b),C=Z("%"),x=O(),S=L("button"),S.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',M=O(),T=L("div"),R=L("div"),z=O(),s(w,"class","text-sm font-medium truncate"),s(w,"title",n=e[56].filename),s(m,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),s(_,"class","flex-1 min-w-0"),s(f,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),s(S,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),s(S,"title","取消上传"),s(a,"class","flex items-center gap-2 ml-3"),s(l,"class","flex items-center justify-between mb-2"),s(R,"class","h-full bg-blue-500 transition-all duration-300"),s(R,"style",P=`width: ${Math.min(100,Math.max(0,Sr(e[56])))}%`),s(T,"class",A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),s(t,"class",q="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(H,F){V(H,t,F),c(t,l),c(l,_),c(_,w),c(w,i),c(_,u),c(_,m),c(m,g),c(m,y),c(m,v),c(m,o),G&&G.m(m,null),c(l,h),c(l,a),c(a,f),c(f,E),c(f,C),c(a,x),c(a,S),c(t,M),c(t,T),c(T,R),c(t,z),X||(ie=$(S,"click",D),X=!0)},p(H,F){e=H,F[0]&4096&&p!==(p=e[56].filename+"")&&de(i,p),F[0]&4096&&n!==(n=e[56].filename)&&s(w,"title",n),F[0]&4096&&d!==(d=Ht(e[56].bytesSent)+"")&&de(g,d),F[0]&4096&&k!==(k=Ht(e[56].totalBytes)+"")&&de(v,k),e[56].speed?G?G.p(e,F):(G=Xs(e),G.c(),G.m(m,null)):G&&(G.d(1),G=null),F[0]&4096&&b!==(b=Math.round(Sr(e[56]))+"")&&de(E,b),F[0]&4096&&P!==(P=`width: ${Math.min(100,Math.max(0,Sr(e[56])))}%`)&&s(R,"style",P),F[0]&1&&A!==(A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&s(T,"class",A),F[0]&1&&q!==(q="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",q)},d(H){H&&N(t),G&&G.d(),X=!1,ie()}}}function $h(r){let e,t,l,_,w,p,i,n,u,m,d,g,y,k,v,o,h,a,f,b,E,C,x,S,M,T,R,P,A,z,q,X,ie,G,D,H,F,W,J,j,K,Q,I,B,te,U,ae,ce,he,ee,oe,ue,pe,Be,Le,Se,ve,re,ge,ne,be,We,Fe,Qe,qe,Ke,et,Te,Y,me,ke,ye=r[12].length>0&&zs(r);function Me(fe,_e){return fe[0]==="dark"?Kh:Vh}let De=Me(r),Re=De(r),we=r[4]&&Us(r);F=new fo({props:{onConnect:r[22],onAddClick:r[29],onEdit:r[24]}});let Ue=!r[4]&&Ns(r),ht={};Q=new Ul({props:ht}),r[30](Q);let Ye=!r[5]&&Vs(r);ce=new Lc({}),Be=new Ic({});let tt=r[5]&&Ks(r);function bt(fe){r[31](fe)}function je(fe){r[32](fe)}let rt={onAdd:r[23],onUpdate:r[25]};r[2]!==void 0&&(rt.isOpen=r[2]),r[6]!==void 0&&(rt.editingAsset=r[6]),re=new Fh({props:rt}),lt.push(()=>gt(re,"isOpen",bt)),lt.push(()=>gt(re,"editingAsset",je));function at(fe){r[33](fe)}let $e={themeStore:or};r[1]!==void 0&&($e.isOpen=r[1]),We=new Eh({props:$e}),lt.push(()=>gt(We,"isOpen",at));function nt(fe){r[35](fe)}let ct={onClose:r[34],themeStore:or};r[3]!==void 0&&(ct.isOpen=r[3]),qe=new Nh({props:ct}),lt.push(()=>gt(qe,"isOpen",nt));let Ge=r[13].isPanelOpen&&qs(r);return{c(){e=L("div"),t=L("header"),l=L("div"),_=L("div"),_.textContent="哈",w=O(),p=L("div"),i=L("div"),n=Z("啊哈 SSH 连接工具"),m=O(),d=L("div"),g=Z("AHa SSH Manager"),k=O(),v=L("div"),o=L("div"),h=L("button"),a=le("svg"),f=le("path"),E=O(),ye&&ye.c(),C=O(),x=L("button"),Re.c(),T=O(),R=L("button"),P=le("svg"),A=le("path"),z=O(),q=L("span"),q.textContent="开发工具",ie=O(),G=L("div"),we&&we.c(),D=O(),H=L("div"),Ze(F.$$.fragment),J=O(),Ue&&Ue.c(),j=O(),K=L("div"),Ze(Q.$$.fragment),B=O(),Ye&&Ye.c(),te=O(),U=L("div"),ae=L("div"),Ze(ce.$$.fragment),he=O(),ee=L("div"),oe=L("div"),ue=O(),pe=L("div"),Ze(Be.$$.fragment),Se=O(),tt&&tt.c(),ve=O(),Ze(re.$$.fragment),be=O(),Ze(We.$$.fragment),Qe=O(),Ze(qe.$$.fragment),et=O(),Ge&&Ge.c(),s(_,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),s(i,"class",u="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),s(d,"class",y="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),s(l,"class","flex items-center gap-3"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"stroke-width","2"),s(f,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(a,"class","w-5 h-5"),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(h,"class",b="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(h,"title","上传任务"),s(o,"class","relative"),x.disabled=r[2],s(x,"class",S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(x,"title",M=r[0]==="dark"?"切换到浅色模式":"切换到深色模式"),s(A,"stroke-linecap","round"),s(A,"stroke-linejoin","round"),s(A,"stroke-width","2"),s(A,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),s(P,"class","w-4 h-4"),s(P,"fill","none"),s(P,"stroke","currentColor"),s(P,"viewBox","0 0 24 24"),s(q,"class","text-sm"),R.disabled=r[2],s(R,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(v,"class","ml-auto flex items-center gap-3"),s(t,"class",X="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),Ee(t,"pointer-events",r[2]?"none":"auto"),s(H,"class",W="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),Ee(H,"width",(r[4]?"0":r[10])+"px"),Ee(H,"min-width",(r[4]?"0":r[10])+"px"),kr(H,"collapsed",r[4]),s(K,"class",I="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),s(ae,"class","overflow-hidden"),Ee(ae,"height",r[8]+"%"),Ee(ae,"min-height","0"),s(oe,"class","w-full h-full rounded svelte-m8xeqv"),s(ee,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),s(ee,"role","separator"),s(ee,"aria-hidden","true"),Ee(ee,"cursor",r[2]?"default":"row-resize"),Ee(ee,"width","100%"),Ee(ee,"padding","2px 0"),Ee(ee,"pointer-events",r[2]?"none":"auto"),s(pe,"class","overflow-hidden"),Ee(pe,"height",100-r[8]+"%"),Ee(pe,"min-height","0"),s(U,"data-right-panel","true"),s(U,"class",Le="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),Ee(U,"width",(r[5]?"0":r[9])+"px"),Ee(U,"min-width",r[5]?"0":"300px"),Ee(U,"max-width","600px"),kr(U,"collapsed",r[5]),s(G,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),s(e,"class",Te="h-screen w-full flex flex-col "+r[11]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(fe,_e){V(fe,e,_e),c(e,t),c(t,l),c(l,_),c(l,w),c(l,p),c(p,i),c(i,n),c(p,m),c(p,d),c(d,g),c(t,k),c(t,v),c(v,o),c(o,h),c(h,a),c(a,f),c(o,E),ye&&ye.m(o,null),c(v,C),c(v,x),Re.m(x,null),c(v,T),c(v,R),c(R,P),c(P,A),c(R,z),c(R,q),c(e,ie),c(e,G),we&&we.m(G,null),c(G,D),c(G,H),Je(F,H,null),c(G,J),Ue&&Ue.m(G,null),c(G,j),c(G,K),Je(Q,K,null),c(G,B),Ye&&Ye.m(G,null),c(G,te),c(G,U),c(U,ae),Je(ce,ae,null),c(U,he),c(U,ee),c(ee,oe),c(U,ue),c(U,pe),Je(Be,pe,null),c(G,Se),tt&&tt.m(G,null),c(e,ve),Je(re,e,null),c(e,be),Je(We,e,null),c(e,Qe),Je(qe,e,null),c(e,et),Ge&&Ge.m(e,null),Y=!0,me||(ke=[$(h,"click",r[28]),$(x,"click",r[15]),$(R,"click",r[16]),$(ee,"mousedown",r[21])],me=!0)},p(fe,_e){(!Y||_e[0]&1&&u!==(u="font-semibold text-sm "+(fe[0]==="dark"?"text-white":"text-gray-900")))&&s(i,"class",u),(!Y||_e[0]&1&&y!==(y="text-xs "+(fe[0]==="dark"?"text-gray-400":"text-gray-500")))&&s(d,"class",y),(!Y||_e[0]&1&&b!==(b="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(fe[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(h,"class",b),fe[12].length>0?ye?ye.p(fe,_e):(ye=zs(fe),ye.c(),ye.m(o,null)):ye&&(ye.d(1),ye=null),De!==(De=Me(fe))&&(Re.d(1),Re=De(fe),Re&&(Re.c(),Re.m(x,null))),(!Y||_e[0]&4)&&(x.disabled=fe[2]),(!Y||_e[0]&1&&S!==(S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(fe[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(x,"class",S),(!Y||_e[0]&1&&M!==(M=fe[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&s(x,"title",M),(!Y||_e[0]&4)&&(R.disabled=fe[2]),(!Y||_e[0]&1&&X!==(X="h-14 flex-shrink-0 "+(fe[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&s(t,"class",X),(!Y||_e[0]&4)&&Ee(t,"pointer-events",fe[2]?"none":"auto"),fe[4]?we?we.p(fe,_e):(we=Us(fe),we.c(),we.m(G,D)):we&&(we.d(1),we=null);const Ne={};_e[0]&68&&(Ne.onAddClick=fe[29]),F.$set(Ne),(!Y||_e[0]&1&&W!==(W="flex-shrink-0 transition-all duration-200 "+(fe[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&s(H,"class",W),(!Y||_e[0]&1040)&&Ee(H,"width",(fe[4]?"0":fe[10])+"px"),(!Y||_e[0]&1040)&&Ee(H,"min-width",(fe[4]?"0":fe[10])+"px"),(!Y||_e[0]&17)&&kr(H,"collapsed",fe[4]),fe[4]?Ue&&(Ue.d(1),Ue=null):Ue?Ue.p(fe,_e):(Ue=Ns(fe),Ue.c(),Ue.m(G,j));const qt={};Q.$set(qt),(!Y||_e[0]&1&&I!==(I="flex-1 min-w-0 min-h-0 flex flex-col "+(fe[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&s(K,"class",I),fe[5]?Ye&&(Ye.d(1),Ye=null):Ye?Ye.p(fe,_e):(Ye=Vs(fe),Ye.c(),Ye.m(G,te)),(!Y||_e[0]&256)&&Ee(ae,"height",fe[8]+"%"),(!Y||_e[0]&4)&&Ee(ee,"cursor",fe[2]?"default":"row-resize"),(!Y||_e[0]&4)&&Ee(ee,"pointer-events",fe[2]?"none":"auto"),(!Y||_e[0]&256)&&Ee(pe,"height",100-fe[8]+"%"),(!Y||_e[0]&1&&Le!==(Le="flex-shrink-0 flex flex-col overflow-hidden "+(fe[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&s(U,"class",Le),(!Y||_e[0]&544)&&Ee(U,"width",(fe[5]?"0":fe[9])+"px"),(!Y||_e[0]&32)&&Ee(U,"min-width",fe[5]?"0":"300px"),(!Y||_e[0]&33)&&kr(U,"collapsed",fe[5]),fe[5]?tt?tt.p(fe,_e):(tt=Ks(fe),tt.c(),tt.m(G,null)):tt&&(tt.d(1),tt=null);const kt={};!ge&&_e[0]&4&&(ge=!0,kt.isOpen=fe[2],pt(()=>ge=!1)),!ne&&_e[0]&64&&(ne=!0,kt.editingAsset=fe[6],pt(()=>ne=!1)),re.$set(kt);const Ot={};!Fe&&_e[0]&2&&(Fe=!0,Ot.isOpen=fe[1],pt(()=>Fe=!1)),We.$set(Ot);const Ft={};_e[0]&8&&(Ft.onClose=fe[34]),!Ke&&_e[0]&8&&(Ke=!0,Ft.isOpen=fe[3],pt(()=>Ke=!1)),qe.$set(Ft),fe[13].isPanelOpen?Ge?Ge.p(fe,_e):(Ge=qs(fe),Ge.c(),Ge.m(e,null)):Ge&&(Ge.d(1),Ge=null),(!Y||_e[0]&2049&&Te!==(Te="h-screen w-full flex flex-col "+fe[11]+" "+(fe[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&s(e,"class",Te)},i(fe){Y||(Oe(F.$$.fragment,fe),Oe(Q.$$.fragment,fe),Oe(ce.$$.fragment,fe),Oe(Be.$$.fragment,fe),Oe(re.$$.fragment,fe),Oe(We.$$.fragment,fe),Oe(qe.$$.fragment,fe),Y=!0)},o(fe){He(F.$$.fragment,fe),He(Q.$$.fragment,fe),He(ce.$$.fragment,fe),He(Be.$$.fragment,fe),He(re.$$.fragment,fe),He(We.$$.fragment,fe),He(qe.$$.fragment,fe),Y=!1},d(fe){fe&&N(e),ye&&ye.d(),Re.d(),we&&we.d(),Xe(F),Ue&&Ue.d(),r[30](null),Xe(Q),Ye&&Ye.d(),Xe(ce),Xe(Be),tt&&tt.d(),Xe(re),Xe(We),Xe(qe),Ge&&Ge.d(),me=!1,Pe(ke)}}}function Pr(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function ed(r,e,t){let l,_,w,p,i,n,u,m,d,g;vt(r,or,re=>t(0,i=re)),vt(r,Dt,re=>t(26,n=re)),vt(r,At,re=>t(27,u=re)),vt(r,ic,re=>t(12,m=re)),vt(r,St,re=>t(13,d=re)),vt(r,sc,re=>t(14,g=re));let y=!1,k=!1,v=!1,o=!1,h=!1,a=null,f,b=!1,E=!1,C=!1;function x(){Or(i==="light"?"dark":"light")}function S(){k||t(1,y=!y)}function M(){k||t(4,o=!o)}function T(){k||t(5,h=!h)}function R(re){re.preventDefault(),!(o||k)&&(b=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",A))}function P(re){if(!b)return;const ge=Math.max(200,Math.min(500,re.clientX));$n(ge)}function A(){b=!1,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",A)}function z(re){re.preventDefault(),!k&&(E=!0,document.addEventListener("mousemove",q),document.addEventListener("mouseup",X))}function q(re){if(!E)return;const ge=window.innerWidth,ne=Math.max(300,Math.min(600,ge-re.clientX));eo(ne)}function X(){E=!1,document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",X)}function ie(re){if(re.preventDefault(),k)return;C=!0;const ge=document.querySelector("[data-right-panel]");if(ge){const ne=ge.getBoundingClientRect();G=re.clientY,D=p,H=ne.height}document.addEventListener("mousemove",F),document.addEventListener("mouseup",W)}let G=0,D=50,H=0;function F(re){if(!C)return;const ne=(re.clientY-G)/H*100,be=Math.max(20,Math.min(80,D+ne));to(be)}function W(){C=!1,document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",W)}function J(re){f&&typeof f.handleConnect=="function"?f.handleConnect(re):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function j(re){var ge;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(re);const ne={id:re.id,name:re.name,host:re.host,port:re.port,username:re.user,group:((ge=re.tags)==null?void 0:ge[0])||"默认分组",status:"online",type:re.type||"ssh",auth_type:re.auth_type,key_path:re.key_path,tags:re.tags||[]};Ut.update(be=>[...be,ne])}catch(ne){throw console.error("Failed to add asset:",ne),ne}}function K(re){t(6,a=re),t(2,k=!0)}async function Q(re){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Ut.update(ge=>ge.map(ne=>{var be;return ne.id===re.id?{...ne,id:re.id,name:re.name,host:re.host,port:re.port,username:re.user,group:((be=re.tags)==null?void 0:be[0])||"默认分组",type:re.type||"ssh",auth_type:re.auth_type,key_path:re.key_path,tags:re.tags||[]}:ne}))}catch(ge){throw console.error("Failed to update asset:",ge),ge}}async function I(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const re=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",re);const ge=re.map(ne=>{var be;return{id:ne.id,name:ne.name,host:ne.host,port:ne.port,username:ne.user,group:((be=ne.tags)==null?void 0:be[0])||"默认分组",status:"online",type:"ssh",auth_type:ne.auth_type,key_path:ne.key_path,tags:ne.tags||[]}});Ut.set(ge)}catch(re){console.error("Failed to load connections:",re)}}ar(async()=>{const re=localStorage.getItem("ssh-tools-theme");re?Or(re):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&Or("dark");let ge=null;try{const ne=await ur(()=>Promise.resolve().then(()=>Sn),void 0);window.wailsBindings=ne,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(ne.default||ne).join(", ")})),await I(),ge=(await ur(()=>Promise.resolve().then(()=>fn),void 0)).EventsOn("app:show-about",()=>{t(3,v=!0)}),window.addEventListener("assets-changed",I)}catch(ne){console.warn("Wails bindings not available yet:",ne.message)}return Pr(),window.addEventListener("resize",Pr),()=>{window.removeEventListener("resize",Pr),window.removeEventListener("assets-changed",I),ge&&ge()}});const B=()=>St.togglePanel(),te=()=>{t(6,a=null),t(2,k=!0)};function U(re){lt[re?"unshift":"push"](()=>{f=re,t(7,f)})}function ae(re){k=re,t(2,k)}function ce(re){a=re,t(6,a)}function he(re){y=re,t(1,y)}const ee=()=>t(3,v=!1);function oe(re){v=re,t(3,v)}const ue=()=>St.setPanelOpen(!1),pe=()=>St.setActiveTab("active"),Be=()=>St.setActiveTab("history"),Le=async re=>{await Ur(re.id),St.cancelTransfer(re.id)},Se=()=>St.clearCompleted(),ve=re=>St.removeTransfer(re.id);return r.$$.update=()=>{r.$$.dirty[0]&134217728&&u&&Array.from(u.values()),r.$$.dirty[0]&1&&t(11,l=i==="dark"?"dark":""),r.$$.dirty[0]&67108864&&t(10,_=n.sidebarWidth),r.$$.dirty[0]&67108864&&t(9,w=n.rightPanelWidth),r.$$.dirty[0]&67108864&&t(8,p=n.fileManagerHeight)},[i,y,k,v,o,h,a,f,p,w,_,l,m,d,g,x,S,M,T,R,z,ie,J,j,K,Q,n,u,B,te,U,ae,ce,he,ee,oe,ue,pe,Be,Le,Se,ve]}class td extends _t{constructor(e){super(),ft(this,e,ed,$h,ut,{},null,[-1,-1])}}new td({target:document.getElementById("app")});
