var ln=Object.defineProperty;var an=(r,e,t)=>e in r?ln(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Br=(r,e,t)=>an(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))a(_);new MutationObserver(_=>{for(const w of _)if(w.type==="childList")for(const p of w.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function t(_){const w={};return _.integrity&&(w.integrity=_.integrity),_.referrerPolicy&&(w.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?w.credentials="include":_.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function a(_){if(_.ep)return;_.ep=!0;const w=t(_);fetch(_.href,w)}})();const cn="modulepreload",hn=function(r){return"/"+r},Jr={},Cr=function(e,t,a){let _=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),i=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));_=Promise.allSettled(t.map(o=>{if(o=hn(o),o in Jr)return;Jr[o]=!0;const f=o.endsWith(".css"),b=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${b}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":cn,f||(d.as="script"),d.crossOrigin="",d.href=o,i&&d.setAttribute("nonce",i),document.head.appendChild(d),f)return new Promise((g,y)=>{d.addEventListener("load",g),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})}))}function w(p){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=p,window.dispatchEvent(i),!i.defaultPrevented)throw p}return _.then(p=>{for(const i of p||[])i.status==="rejected"&&w(i.reason);return e().catch(w)})};function Ee(){}function dn(r,e){for(const t in e)r[t]=e[t];return r}function Ps(r){return r()}function Xr(){return Object.create(null)}function Be(r){r.forEach(Ps)}function Ht(r){return typeof r=="function"}function ht(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function un(r){return Object.keys(r).length===0}function Wr(r,...e){if(r==null){for(const a of e)a(void 0);return Ee}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function fn(r){let e;return Wr(r,t=>e=t)(),e}function gt(r,e,t){r.$$.on_destroy.push(Wr(e,t))}function _n(r,e,t,a){if(r){const _=Hs(r,e,t,a);return r[0](_)}}function Hs(r,e,t,a){return r[1]&&a?dn(t.ctx.slice(),r[1](a(e))):t.ctx}function pn(r,e,t,a){return r[2],e.dirty}function gn(r,e,t,a,_,w){if(_){const p=Hs(e,t,a,w);r.p(p,_)}}function mn(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let a=0;a<t;a++)e[a]=-1;return e}return-1}function Yr(r){return r??""}function Is(r){return r&&Ht(r.destroy)?r.destroy:Ee}const Fs=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function u(r,e){r.appendChild(e)}function q(r,e,t){r.insertBefore(e,t||null)}function K(r){r.parentNode&&r.parentNode.removeChild(r)}function hr(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function L(r){return document.createElement(r)}function oe(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Z(r){return document.createTextNode(r)}function P(){return Z(" ")}function kt(){return Z("")}function re(r,e,t,a){return r.addEventListener(e,t,a),()=>r.removeEventListener(e,t,a)}function vn(r){return function(e){return e.preventDefault(),r.call(this,e)}}function Zr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function s(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function bn(r){let e;return{p(...t){e=t,e.forEach(a=>r.push(a))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function jr(r){return r===""?null:+r}function yn(r){return Array.from(r.childNodes)}function ue(r,e){e=""+e,r.data!==e&&(r.data=e)}function we(r,e){r.value=e??""}function be(r,e,t,a){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function xr(r,e,t){for(let a=0;a<r.options.length;a+=1){const _=r.options[a];if(_.__value===e){_.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Ws(r){const e=r.querySelector(":checked");return e&&e.__value}function br(r,e,t){r.classList.toggle(e,!!t)}function Dt(r,e){return new r(e)}let dr;function cr(r){dr=r}function js(){if(!dr)throw new Error("Function called outside component initialization");return dr}function or(r){js().$$.on_mount.push(r)}function Er(r){js().$$.on_destroy.push(r)}const ir=[],at=[];let sr=[];const Pr=[],zs=Promise.resolve();let Hr=!1;function Us(){Hr||(Hr=!0,zs.then(Ns))}function kr(){return Us(),zs}function ur(r){sr.push(r)}function yt(r){Pr.push(r)}const Ar=new Set;let tr=0;function Ns(){if(tr!==0)return;const r=dr;do{try{for(;tr<ir.length;){const e=ir[tr];tr++,cr(e),wn(e.$$)}}catch(e){throw ir.length=0,tr=0,e}for(cr(null),ir.length=0,tr=0;at.length;)at.pop()();for(let e=0;e<sr.length;e+=1){const t=sr[e];Ar.has(t)||(Ar.add(t),t())}sr.length=0}while(ir.length);for(;Pr.length;)Pr.pop()();Hr=!1,Ar.clear(),cr(r)}function wn(r){if(r.fragment!==null){r.update(),Be(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ur)}}function kn(r){const e=[],t=[];sr.forEach(a=>r.indexOf(a)===-1?e.push(a):t.push(a)),t.forEach(a=>a()),sr=e}const Sr=new Set;let Nt;function St(){Nt={r:0,c:[],p:Nt}}function Ct(){Nt.r||Be(Nt.c),Nt=Nt.p}function Te(r,e){r&&r.i&&(Sr.delete(r),r.i(e))}function Re(r,e,t,a){if(r&&r.o){if(Sr.has(r))return;Sr.add(r),Nt.c.push(()=>{Sr.delete(r),a&&(t&&r.d(1),a())}),r.o(e)}else a&&a()}function ze(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function It(r,e){r.d(1),e.delete(r.key)}function Sn(r,e){Re(r,1,1,()=>{e.delete(r.key)})}function Tt(r,e,t,a,_,w,p,i,o,f,b,d){let g=r.length,y=w.length,k=g;const v={};for(;k--;)v[r[k].key]=k;const n=[],h=new Map,l=new Map,c=[];for(k=y;k--;){const M=d(_,w,k),S=t(M);let E=p.get(S);E?c.push(()=>E.p(M,e)):(E=f(S,M),E.c()),h.set(S,n[k]=E),S in v&&l.set(S,Math.abs(k-v[S]))}const m=new Set,C=new Set;function x(M){Te(M,1),M.m(i,b),p.set(M.key,M),b=M.first,y--}for(;g&&y;){const M=n[y-1],S=r[g-1],E=M.key,B=S.key;M===S?(b=M.first,g--,y--):h.has(B)?!p.has(E)||m.has(E)?x(M):C.has(B)?g--:l.get(E)>l.get(B)?(C.add(E),x(M)):(m.add(B),g--):(o(S,p),g--)}for(;g--;){const M=r[g];h.has(M.key)||o(M,p)}for(;y;)x(n[y-1]);return Be(c),n}function wt(r,e,t){const a=r.$$.props[e];a!==void 0&&(r.$$.bound[a]=t,t(r.$$.ctx[a]))}function Xe(r){r&&r.c()}function qe(r,e,t){const{fragment:a,after_update:_}=r.$$;a&&a.m(e,t),ur(()=>{const w=r.$$.on_mount.map(Ps).filter(Ht);r.$$.on_destroy?r.$$.on_destroy.push(...w):Be(w),r.$$.on_mount=[]}),_.forEach(ur)}function Ge(r,e){const t=r.$$;t.fragment!==null&&(kn(t.after_update),Be(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Cn(r,e){r.$$.dirty[0]===-1&&(ir.push(r),Us(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ut(r,e,t,a,_,w,p=null,i=[-1]){const o=dr;cr(r);const f=r.$$={fragment:null,ctx:[],props:w,update:Ee,not_equal:_,bound:Xr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Xr(),dirty:i,skip_bound:!1,root:e.target||o.$$.root};p&&p(f.root);let b=!1;if(f.ctx=t?t(r,e.props||{},(d,g,...y)=>{const k=y.length?y[0]:g;return f.ctx&&_(f.ctx[d],f.ctx[d]=k)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](k),b&&Cn(r,d)),g}):[],f.update(),b=!0,Be(f.before_update),f.fragment=a?a(f.ctx):!1,e.target){if(e.hydrate){const d=yn(e.target);f.fragment&&f.fragment.l(d),d.forEach(K)}else f.fragment&&f.fragment.c();e.intro&&Te(r.$$.fragment),qe(r,e.target,e.anchor),Ns()}cr(o)}class ft{constructor(){Br(this,"$$");Br(this,"$$set")}$destroy(){Ge(this,1),this.$destroy=Ee}$on(e,t){if(!Ht(t))return Ee;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(t),()=>{const _=a.indexOf(t);_!==-1&&a.splice(_,1)}}$set(e){this.$$set&&!un(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xn);const rr=[];function En(r,e){return{subscribe:Kt(r,e).subscribe}}function Kt(r,e=Ee){let t;const a=new Set;function _(i){if(ht(r,i)&&(r=i,t)){const o=!rr.length;for(const f of a)f[1](),rr.push(f,r);if(o){for(let f=0;f<rr.length;f+=2)rr[f][0](rr[f+1]);rr.length=0}}}function w(i){_(i(r))}function p(i,o=Ee){const f=[i,o];return a.add(f),a.size===1&&(t=e(_,w)||Ee),i(r),()=>{a.delete(f),a.size===0&&t&&(t(),t=null)}}return{set:_,update:w,subscribe:p}}function Bt(r,e,t){const a=!Array.isArray(r),_=a?[r]:r;if(!_.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const w=e.length<2;return En(t,(p,i)=>{let o=!1;const f=[];let b=0,d=Ee;const g=()=>{if(b)return;d();const k=e(a?f[0]:f,p,i);w?p(k):d=Ht(k)?k:Ee},y=_.map((k,v)=>Wr(k,n=>{f[v]=n,b&=~(1<<v),o&&g()},()=>{b|=1<<v}));return o=!0,g(),function(){Be(y),d(),o=!1}})}const Ot=Kt([]);Bt(Ot,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}));const Mt=Kt(new Map),Ut=Kt(null),Ks="ssh-tools-theme";function Ln(){if(typeof window>"u")return null;try{return localStorage.getItem(Ks)}catch{return null}}function Mn(r){if(!(typeof window>"u"))try{localStorage.setItem(Ks,r)}catch{}}const Dn=Ln(),Tn=Dn||"light",nr=Kt(Tn);function Rr(r){nr.set(r),Mn(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Bn(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const An={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},Rn=Bn(),xt=Kt({...An,...Rn});xt.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});Bt(xt,r=>r.isDevToolsOpen);Bt(xt,r=>r.isFileManagerOpen);Bt(xt,r=>r.isMonitorOpen);Bt(xt,r=>r.sidebarWidth);Bt(xt,r=>r.rightPanelWidth);Bt(xt,r=>r.fileManagerHeight);function On(r){xt.update(e=>({...e,sidebarWidth:r}))}function Pn(r){xt.update(e=>({...e,rightPanelWidth:r}))}function Hn(r){xt.update(e=>({...e,fileManagerHeight:r}))}function Qr(r,e,t){const a=r.slice();return a[17]=e[t][0],a[18]=e[t][1],a}function $r(r,e,t){const a=r.slice();return a[21]=e[t],a}function In(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function Fn(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function ei(r){let e,t=[],a=new Map,_=ze(r[18]);const w=p=>p[21].id;for(let p=0;p<_.length;p+=1){let i=$r(r,_,p),o=w(i);a.set(o,t[p]=ri(o,i))}return{c(){e=L("div");for(let p=0;p<t.length;p+=1)t[p].c();s(e,"class","ml-4")},m(p,i){q(p,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(p,i){i&165&&(_=ze(p[18]),t=Tt(t,i,w,1,p,_,a,e,It,ri,null,$r))},d(p){p&&K(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ti(r){let e,t=r[21].dbType.toUpperCase()+"",a;return{c(){e=Z("• "),a=Z(t)},m(_,w){q(_,e,w),q(_,a,w)},p(_,w){w&32&&t!==(t=_[21].dbType.toUpperCase()+"")&&ue(a,t)},d(_){_&&(K(e),K(a))}}}function ri(r,e){let t,a,_=si(e[21].type)+"",w,p,i,o,f=e[21].name+"",b,d,g,y,k,v,n=e[21].username+"",h,l,c=e[21].host+"",m,C,x=e[21].port+"",M,S,E,B,R,O,A,U,V,J,ie,Y,D=e[21].type==="database"&&e[21].dbType&&ti(e);function H(){return e[13](e[21])}function F(){return e[14](e[21])}function j(...W){return e[15](e[21],...W)}function G(){return e[16](e[21])}return{key:r,first:null,c(){t=L("div"),a=L("div"),w=P(),p=L("div"),i=L("div"),o=L("span"),b=Z(f),d=P(),g=L("div"),k=P(),v=L("div"),h=Z(n),l=Z("@"),m=Z(c),C=Z(":"),M=Z(x),S=P(),D&&D.c(),E=P(),B=L("div"),R=L("button"),R.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',O=P(),A=L("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',U=P(),V=L("button"),V.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',J=P(),s(a,"class","flex-shrink-0"),s(o,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),s(g,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),s(i,"class","flex items-center gap-2"),s(v,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),s(p,"class","flex-1 min-w-0"),s(R,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),s(R,"title","连接"),s(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),s(V,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),s(B,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),s(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(W,X){q(W,t,X),u(t,a),a.innerHTML=_,u(t,w),u(t,p),u(p,i),u(i,o),u(o,b),u(i,d),u(i,g),u(p,k),u(p,v),u(v,h),u(v,l),u(v,m),u(v,C),u(v,M),u(v,S),D&&D.m(v,null),u(t,E),u(t,B),u(B,R),u(B,O),u(B,A),u(B,U),u(B,V),u(t,J),ie||(Y=[re(R,"click",Zr(H)),re(A,"click",Zr(F)),re(V,"click",j),re(t,"click",G)],ie=!0)},p(W,X){e=W,X&32&&_!==(_=si(e[21].type)+"")&&(a.innerHTML=_),X&32&&f!==(f=e[21].name+"")&&ue(b,f),X&32&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&s(g,"class",y),X&32&&n!==(n=e[21].username+"")&&ue(h,n),X&32&&c!==(c=e[21].host+"")&&ue(m,c),X&32&&x!==(x=e[21].port+"")&&ue(M,x),e[21].type==="database"&&e[21].dbType?D?D.p(e,X):(D=ti(e),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},d(W){W&&K(t),D&&D.d(),ie=!1,Be(Y)}}}function ii(r){let e,t,a,_,w,p,i,o,f=r[17]+"",b,d,g,y,k=r[18].length+"",v,n,h,l=r[4].has(r[17]),c,m,C;function x(R,O){return O&48&&(a=null),a==null&&(a=!!R[4].has(R[17])),a?Fn:In}let M=x(r,-1),S=M(r);function E(){return r[12](r[17])}let B=l&&ei(r);return{c(){e=L("div"),t=L("div"),S.c(),_=P(),w=oe("svg"),p=oe("path"),i=P(),o=L("span"),b=Z(f),d=P(),g=L("span"),y=Z("("),v=Z(k),n=Z(")"),h=P(),B&&B.c(),c=P(),s(p,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(w,"class","w-4 h-4 text-amber-500"),s(w,"fill","currentColor"),s(w,"viewBox","0 0 24 24"),s(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),s(g,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),s(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),s(e,"class","mb-1")},m(R,O){q(R,e,O),u(e,t),S.m(t,null),u(t,_),u(t,w),u(w,p),u(t,i),u(t,o),u(o,b),u(t,d),u(t,g),u(g,y),u(g,v),u(g,n),u(e,h),B&&B.m(e,null),u(e,c),m||(C=re(t,"click",E),m=!0)},p(R,O){r=R,M!==(M=x(r,O))&&(S.d(1),S=M(r),S&&(S.c(),S.m(t,_))),O&32&&f!==(f=r[17]+"")&&ue(b,f),O&32&&k!==(k=r[18].length+"")&&ue(v,k),O&48&&(l=r[4].has(r[17])),l?B?B.p(r,O):(B=ei(r),B.c(),B.m(e,c)):B&&(B.d(1),B=null)},d(R){R&&K(e),S.d(),B&&B.d(),m=!1,C()}}}function Wn(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h=ze(Object.entries(r[5])),l=[];for(let c=0;c<h.length;c+=1)l[c]=ii(Qr(r,h,c));return{c(){e=L("div"),t=L("div"),a=L("div"),_=L("h2"),_.textContent="服务器资产",w=P(),p=L("button"),p.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',i=P(),o=L("div"),f=oe("svg"),b=oe("path"),d=P(),g=L("input"),y=P(),k=L("div");for(let c=0;c<l.length;c+=1)l[c].c();s(_,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(p,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(a,"class","flex items-center justify-between mb-3"),s(b,"stroke-linecap","round"),s(b,"stroke-linejoin","round"),s(b,"stroke-width","2"),s(b,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(f,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),s(f,"fill","none"),s(f,"stroke","currentColor"),s(f,"viewBox","0 0 24 24"),s(g,"type","text"),s(g,"placeholder","搜索服务器..."),s(g,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(o,"class","relative"),s(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),s(k,"class","flex-1 overflow-y-auto scrollbar-thin"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(c,m){q(c,e,m),u(e,t),u(t,a),u(a,_),u(a,w),u(a,p),u(t,i),u(t,o),u(o,f),u(f,b),u(o,d),u(o,g),we(g,r[3]),u(e,y),u(e,k);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(k,null);v||(n=[re(p,"click",function(){Ht(r[1])&&r[1].apply(this,arguments)}),re(g,"input",r[11])],v=!0)},p(c,[m]){if(r=c,m&8&&g.value!==r[3]&&we(g,r[3]),m&245){h=ze(Object.entries(r[5]));let C;for(C=0;C<h.length;C+=1){const x=Qr(r,h,C);l[C]?l[C].p(x,m):(l[C]=ii(x),l[C].c(),l[C].m(k,null))}for(;C<l.length;C+=1)l[C].d(1);l.length=h.length}},i:Ee,o:Ee,d(c){c&&K(e),hr(l,c),v=!1,Be(n)}}}function si(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function jn(r,e,t){let a,_,w;gt(r,Ot,m=>t(10,w=m));let{onConnect:p}=e,{onAddClick:i}=e,{onDelete:o}=e,{onEdit:f}=e,b="",d=new Set(["生产环境","开发环境"]);function g(m){const C=new Set(d);C.has(m)?C.delete(m):C.add(m),t(4,d=C)}async function y(m,C){if(C.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Ot.update(x=>x.filter(M=>M.id!==m.id));return}if(confirm(`确定要删除连接 "${m.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(m.id),Ot.update(x=>x.filter(M=>M.id!==m.id))}catch(x){console.error("Failed to delete asset:",x)}}function k(){b=this.value,t(3,b)}const v=m=>g(m),n=m=>p(m),h=m=>f(m),l=(m,C)=>y(m,C),c=m=>p(m);return r.$$set=m=>{"onConnect"in m&&t(0,p=m.onConnect),"onAddClick"in m&&t(1,i=m.onAddClick),"onDelete"in m&&t(8,o=m.onDelete),"onEdit"in m&&t(2,f=m.onEdit)},r.$$.update=()=>{r.$$.dirty&1032&&t(9,a=w.filter(m=>{const C=b.toLowerCase();return m.name.toLowerCase().includes(C)||m.host.toLowerCase().includes(C)||m.group.toLowerCase().includes(C)||m.username.toLowerCase().includes(C)})),r.$$.dirty&512&&t(5,_=a.reduce((m,C)=>(m[C.group]||(m[C.group]=[]),m[C.group].push(C),m),{}))},[p,i,f,b,d,_,g,y,o,a,w,k,v,n,h,l,c]}class zn extends ft{constructor(e){super(),ut(this,e,jn,Wn,ht,{onConnect:0,onAddClick:1,onDelete:8,onEdit:2})}}var Vs={exports:{}};(function(r,e){(function(t,a){r.exports=a()})(globalThis,()=>(()=>{var t={4567:function(p,i,o){var f=this&&this.__decorate||function(l,c,m,C){var x,M=arguments.length,S=M<3?c:C===null?C=Object.getOwnPropertyDescriptor(c,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,c,m,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(S=(M<3?x(S):M>3?x(c,m,S):x(c,m))||S);return M>3&&S&&Object.defineProperty(c,m,S),S},b=this&&this.__param||function(l,c){return function(m,C){c(m,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const d=o(9042),g=o(9924),y=o(844),k=o(4725),v=o(2585),n=o(3656);let h=i.AccessibilityManager=class extends y.Disposable{constructor(l,c,m,C){super(),this._terminal=l,this._coreBrowserService=m,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(x=>this._handleResize(x.rows))),this.register(this._terminal.onRender(x=>this._refreshRows(x.start,x.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(x=>this._handleChar(x))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(x=>this._handleTab(x))),this.register(this._terminal.onKey(x=>this._handleKey(x.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let c=0;c<l;c++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(l)||this._charsToConsume.push(l)}_refreshRows(l,c){this._liveRegionDebouncer.refresh(l,c,this._terminal.rows)}_renderRows(l,c){const m=this._terminal.buffer,C=m.lines.length.toString();for(let x=l;x<=c;x++){const M=m.lines.get(m.ydisp+x),S=[],E=(M==null?void 0:M.translateToString(!0,void 0,void 0,S))||"",B=(m.ydisp+x+1).toString(),R=this._rowElements[x];R&&(E.length===0?(R.innerText=" ",this._rowColumns.set(R,[0,1])):(R.textContent=E,this._rowColumns.set(R,S)),R.setAttribute("aria-posinset",B),R.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,c){const m=l.target,C=this._rowElements[c===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==C)return;let x,M;if(c===0?(x=m,M=this._rowElements.pop(),this._rowContainer.removeChild(M)):(x=this._rowElements.shift(),M=m,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),M.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){var E;if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:l.anchorNode,offset:l.anchorOffset},m={node:l.focusNode,offset:l.focusOffset};if((c.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===m.node&&c.offset>m.offset)&&([c,m]=[m,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const C=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:C,offset:((E=C.textContent)==null?void 0:E.length)??0}),!this._rowContainer.contains(m.node))return;const x=({node:B,offset:R})=>{const O=B instanceof Text?B.parentNode:B;let A=parseInt(O==null?void 0:O.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const U=this._rowColumns.get(O);if(!U)return console.warn("columns is null. Race condition?"),null;let V=R<U.length?U[R]:U.slice(-1)[0]+1;return V>=this._terminal.cols&&(++A,V=0),{row:A,column:V}},M=x(c),S=x(m);if(M&&S){if(M.row>S.row||M.row===S.row&&M.column>=S.column)throw new Error("invalid range");this._terminal.select(M.column,M.row,(S.row-M.row)*this._terminal.cols-M.column+S.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=h=f([b(1,v.IInstantiationService),b(2,k.ICoreBrowserService),b(3,k.IRenderService)],h)},3614:(p,i)=>{function o(g){return g.replace(/\r?\n/g,"\r")}function f(g,y){return y?"\x1B[200~"+g+"\x1B[201~":g}function b(g,y,k,v){g=f(g=o(g),k.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(g,!0),y.value=""}function d(g,y,k){const v=k.getBoundingClientRect(),n=g.clientX-v.left-10,h=g.clientY-v.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${n}px`,y.style.top=`${h}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(g,y){g.clipboardData&&g.clipboardData.setData("text/plain",y.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,y,k,v){g.stopPropagation(),g.clipboardData&&b(g.clipboardData.getData("text/plain"),y,k,v)},i.paste=b,i.moveTextAreaUnderMouseCursor=d,i.rightClickHandler=function(g,y,k,v,n){d(g,y,k),n&&v.rightClickSelect(g),y.value=v.selectionText,y.select()}},7239:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(b,d,g){this._css.set(b,d,g)}getCss(b,d){return this._css.get(b,d)}setColor(b,d,g){this._color.set(b,d,g)}getColor(b,d){return this._color.get(b,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,b,d){o.addEventListener(f,b,d);let g=!1;return{dispose:()=>{g||(g=!0,o.removeEventListener(f,b,d))}}}},3551:function(p,i,o){var f=this&&this.__decorate||function(h,l,c,m){var C,x=arguments.length,M=x<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(h,l,c,m);else for(var S=h.length-1;S>=0;S--)(C=h[S])&&(M=(x<3?C(M):x>3?C(l,c,M):C(l,c))||M);return x>3&&M&&Object.defineProperty(l,c,M),M},b=this&&this.__param||function(h,l){return function(c,m){l(c,m,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const d=o(3656),g=o(8460),y=o(844),k=o(2585),v=o(4725);let n=i.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(h,l,c,m,C){super(),this._element=h,this._mouseService=l,this._renderService=c,this._bufferService=m,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{var x;this._lastMouseEvent=void 0,(x=this._activeProviderReplies)==null||x.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){this._lastMouseEvent=h;const l=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=h.composedPath();for(let m=0;m<c.length;m++){const C=c[m];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,l){var m,C;this._activeProviderReplies&&l||((m=this._activeProviderReplies)==null||m.forEach(x=>{x==null||x.forEach(M=>{M.link.dispose&&M.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=h.y);let c=!1;for(const[x,M]of this._linkProviderService.linkProviders.entries())l?(C=this._activeProviderReplies)!=null&&C.get(x)&&(c=this._checkLinkProviderResult(x,h,c)):M.provideLinks(h.y,S=>{var B,R;if(this._isMouseOut)return;const E=S==null?void 0:S.map(O=>({link:O}));(B=this._activeProviderReplies)==null||B.set(x,E),c=this._checkLinkProviderResult(x,h,c),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)})}_removeIntersectingLinks(h,l){const c=new Set;for(let m=0;m<l.size;m++){const C=l.get(m);if(C)for(let x=0;x<C.length;x++){const M=C[x],S=M.link.range.start.y<h?0:M.link.range.start.x,E=M.link.range.end.y>h?this._bufferService.cols:M.link.range.end.x;for(let B=S;B<=E;B++){if(c.has(B)){C.splice(x--,1);break}c.add(B)}}}}_checkLinkProviderResult(h,l,c){var x;if(!this._activeProviderReplies)return c;const m=this._activeProviderReplies.get(h);let C=!1;for(let M=0;M<h;M++)this._activeProviderReplies.has(M)&&!this._activeProviderReplies.get(M)||(C=!0);if(!C&&m){const M=m.find(S=>this._linkAtPosition(S.link,l));M&&(c=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let M=0;M<this._activeProviderReplies.size;M++){const S=(x=this._activeProviderReplies.get(M))==null?void 0:x.find(E=>this._linkAtPosition(E.link,l));if(S){c=!0,this._handleNewLink(S);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._currentLink)return;const l=this._positionFromMouseEvent(h,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,l){this._currentLink&&this._lastMouseEvent&&(!h||!l||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(h.link,l)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>{var c,m;return(m=(c=this._currentLink)==null?void 0:c.state)==null?void 0:m.decorations.pointerCursor},set:c=>{var m;(m=this._currentLink)!=null&&m.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>{var c,m;return(m=(c=this._currentLink)==null?void 0:c.state)==null?void 0:m.decorations.underline},set:c=>{var m,C,x;(m=this._currentLink)!=null&&m.state&&((x=(C=this._currentLink)==null?void 0:C.state)==null?void 0:x.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const m=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(m,C),this._lastMouseEvent)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}})))}_linkHover(h,l,c){var m;(m=this._currentLink)!=null&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(h,l){const c=h.range,m=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-m-1,c.end.x,c.end.y-m-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(h,l,c){var m;(m=this._currentLink)!=null&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(h,l){const c=h.range.start.y*this._bufferService.cols+h.range.start.x,m=h.range.end.y*this._bufferService.cols+h.range.end.x,C=l.y*this._bufferService.cols+l.x;return c<=C&&C<=m}_positionFromMouseEvent(h,l,c){const m=c.getCoords(h,l,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,l,c,m,C){return{x1:h,y1:l,x2:c,y2:m,cols:this._bufferService.cols,fg:C}}};i.Linkifier=n=f([b(1,v.IMouseService),b(2,v.IRenderService),b(3,k.IBufferService),b(4,v.ILinkProviderService)],n)},9042:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,i,o){var f=this&&this.__decorate||function(v,n,h,l){var c,m=arguments.length,C=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,h):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,n,h,l);else for(var x=v.length-1;x>=0;x--)(c=v[x])&&(C=(m<3?c(C):m>3?c(n,h,C):c(n,h))||C);return m>3&&C&&Object.defineProperty(n,h,C),C},b=this&&this.__param||function(v,n){return function(h,l){n(h,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const d=o(511),g=o(2585);let y=i.OscLinkProvider=class{constructor(v,n,h){this._bufferService=v,this._optionsService=n,this._oscLinkService=h}provideLinks(v,n){var E;const h=this._bufferService.buffer.lines.get(v-1);if(!h)return void n(void 0);const l=[],c=this._optionsService.rawOptions.linkHandler,m=new d.CellData,C=h.getTrimmedLength();let x=-1,M=-1,S=!1;for(let B=0;B<C;B++)if(M!==-1||h.hasContent(B)){if(h.loadCell(B,m),m.hasExtendedAttrs()&&m.extended.urlId){if(M===-1){M=B,x=m.extended.urlId;continue}S=m.extended.urlId!==x}else M!==-1&&(S=!0);if(S||M!==-1&&B===C-1){const R=(E=this._oscLinkService.getLinkData(x))==null?void 0:E.uri;if(R){const O={start:{x:M+1,y:v},end:{x:B+(S||B!==C-1?0:1),y:v}};let A=!1;if(!(c!=null&&c.allowNonHttpProtocols))try{const U=new URL(R);["http:","https:"].includes(U.protocol)||(A=!0)}catch{A=!0}A||l.push({text:R,range:O,activate:(U,V)=>c?c.activate(U,V,O):k(0,V),hover:(U,V)=>{var J;return(J=c==null?void 0:c.hover)==null?void 0:J.call(c,U,V,O)},leave:(U,V)=>{var J;return(J=c==null?void 0:c.leave)==null?void 0:J.call(c,U,V,O)}})}S=!1,m.hasExtendedAttrs()&&m.extended.urlId?(M=B,x=m.extended.urlId):(M=-1,x=-1)}}n(l)}};function k(v,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=y=f([b(0,g.IBufferService),b(1,g.IOptionsService),b(2,g.IOscLinkService)],y)},6193:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,b){this._rowCount=b,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),b=o(3656),d=o(3551),g=o(9042),y=o(3730),k=o(1680),v=o(3107),n=o(5744),h=o(2950),l=o(1296),c=o(428),m=o(4269),C=o(5114),x=o(8934),M=o(3230),S=o(9312),E=o(4725),B=o(6731),R=o(8055),O=o(8969),A=o(8460),U=o(844),V=o(6114),J=o(8437),ie=o(2584),Y=o(7399),D=o(5941),H=o(9074),F=o(2585),j=o(5435),G=o(4567),W=o(779);class X extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=V,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new U.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(H.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(W.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((T,Q)=>this.refresh(T,Q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(T=>this._reportWindowsOptions(T))),this.register(this._inputHandler.onColor(T=>this._handleColorEvent(T))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(T=>this._afterResize(T.cols,T.rows))),this.register((0,U.toDisposable)(()=>{var T,Q;this._customKeyEventHandler=void 0,(Q=(T=this.element)==null?void 0:T.parentNode)==null||Q.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const T of I){let Q,z="";switch(T.index){case 256:Q="foreground",z="10";break;case 257:Q="background",z="11";break;case 258:Q="cursor",z="12";break;default:Q="ansi",z="4;"+T.index}switch(T.type){case 0:const N=R.color.toColorRGB(Q==="ansi"?this._themeService.colors.ansi[T.index]:this._themeService.colors[Q]);this.coreService.triggerDataEvent(`${ie.C0.ESC}]${z};${(0,D.toRgbString)(N)}${ie.C1_ESCAPED.ST}`);break;case 1:if(Q==="ansi")this._themeService.modifyColors($=>$.ansi[T.index]=R.channels.toColor(...T.color));else{const $=Q;this._themeService.modifyColors(ee=>ee[$]=R.channels.toColor(...T.color))}break;case 2:this._themeService.restoreColor(T.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ie.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)==null?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ie.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(I);if(!T)return;const Q=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,N=T.getWidth(Q),$=this._renderService.dimensions.css.cell.width*N,ee=this.buffer.y*this._renderService.dimensions.css.cell.height,le=Q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=le+"px",this.textarea.style.top=ee+"px",this.textarea.style.width=$+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",T=>{this.hasSelection()&&(0,f.copyHandler)(T,this._selectionService)}));const I=T=>(0,f.handlePasteEvent)(T,this.textarea,this.coreService,this.optionsService);this.register((0,b.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,b.addDisposableDomListener)(this.element,"paste",I)),V.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",T=>{T.button===2&&(0,f.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",T=>{(0,f.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),V.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",T=>{T.button===1&&(0,f.moveTextAreaUnderMouseCursor)(T,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,b.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var Q;if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((Q=this.element)==null?void 0:Q.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const T=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,b.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),V.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,b.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(M.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(T);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(G.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,T=this.element;function Q($){const ee=I._mouseService.getMouseReportCoords($,I.screenElement);if(!ee)return!1;let le,ae;switch($.overrideType||$.type){case"mousemove":ae=32,$.buttons===void 0?(le=3,$.button!==void 0&&(le=$.button<3?$.button:3)):le=1&$.buttons?0:4&$.buttons?1:2&$.buttons?2:3;break;case"mouseup":ae=0,le=$.button<3?$.button:3;break;case"mousedown":ae=1,le=$.button<3?$.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler($)===!1||I.viewport.getLinesScrolled($)===0)return!1;ae=$.deltaY<0?0:1,le=4;break;default:return!1}return!(ae===void 0||le===void 0||le>4)&&I.coreMouseService.triggerMouseEvent({col:ee.col,row:ee.row,x:ee.x,y:ee.y,button:le,action:ae,ctrl:$.ctrlKey,alt:$.altKey,shift:$.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},N={mouseup:$=>(Q($),$.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel($)),wheel:$=>(Q($),this.cancel($,!0)),mousedrag:$=>{$.buttons&&Q($)},mousemove:$=>{$.buttons||Q($)}};this.register(this.coreMouseService.onProtocolChange($=>{$?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents($)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&$?z.mousemove||(T.addEventListener("mousemove",N.mousemove),z.mousemove=N.mousemove):(T.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&$?z.wheel||(T.addEventListener("wheel",N.wheel,{passive:!1}),z.wheel=N.wheel):(T.removeEventListener("wheel",z.wheel),z.wheel=null),2&$?z.mouseup||(z.mouseup=N.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&$?z.mousedrag||(z.mousedrag=N.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(T,"mousedown",$=>{if($.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection($))return Q($),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel($)})),this.register((0,b.addDisposableDomListener)(T,"wheel",$=>{if(!z.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler($)===!1)return!1;if(!this.buffer.hasScrollback){const ee=this.viewport.getLinesScrolled($);if(ee===0)return;const le=ie.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+($.deltaY<0?"A":"B");let ae="";for(let ce=0;ce<Math.abs(ee);ce++)ae+=le;return this.coreService.triggerDataEvent(ae,!0),this.cancel($,!0)}return this.viewport.handleWheel($)?this.cancel($):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(T,"touchstart",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart($),this.cancel($)},{passive:!0})),this.register((0,b.addDisposableDomListener)(T,"touchmove",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove($)?void 0:this.cancel($)},{passive:!1}))}refresh(I,T){var Q;(Q=this._renderService)==null||Q.refreshRows(I,T)}updateCursorStyle(I){var T;(T=this._selectionService)!=null&&T.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,T,Q=0){var z;Q===1?(super.scrollLines(I,T,Q),this.refresh(0,this.rows-1)):(z=this.viewport)==null||z.scrollLines(I)}paste(I){(0,f.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const T=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),T}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,T,Q){this._selectionService.setSelection(I,T,Q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)==null||I.clearSelection()}selectAll(){var I;(I=this._selectionService)==null||I.selectAll()}selectLines(I,T){var Q;(Q=this._selectionService)==null||Q.selectLines(I,T)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const T=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!T&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;T||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Q=(0,Y.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),Q.type===3||Q.type===2){const z=this.rows-1;return this.scrollLines(Q.type===2?-z:z),this.cancel(I,!0)}return Q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(Q.cancel&&this.cancel(I,!0),!Q.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Q.key!==ie.C0.ETX&&Q.key!==ie.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Q.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(Q.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,T){const Q=I.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||I.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey||I.isWindows&&T.getModifierState("AltGraph");return T.type==="keypress"?Q:Q&&(!T.keyCode||T.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let T;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)T=I.charCode;else if(I.which===null||I.which===void 0)T=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;T=I.which}return!(!T||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(T,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const T=I.data;return this.coreService.triggerDataEvent(T,!0),this.cancel(I),!0}return!1}resize(I,T){I!==this.cols||T!==this.rows?super.resize(I,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,T){var Q,z;(Q=this._charSizeService)==null||Q.measure(),(z=this.viewport)==null||z.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let T=1;T<this.rows;T++)this.buffer.lines.push(this.buffer.getBlankLine(J.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)==null||I.reset(),this.refresh(0,this.rows-1)}}reset(){var T,Q;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)==null||T.reset(),this._decorationService.reset(),(Q=this.viewport)==null||Q.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)==null||I.clearTextureAtlas()}_reportFocus(){var I;(I=this.element)!=null&&I.classList.contains("focus")?this.coreService.triggerDataEvent(ie.C0.ESC+"[I"):this.coreService.triggerDataEvent(ie.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case j.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const T=this._renderService.dimensions.css.canvas.width.toFixed(0),Q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ie.C0.ESC}[4;${Q};${T}t`);break;case j.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),N=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ie.C0.ESC}[6;${N};${z}t`)}}cancel(I,T){if(this.options.cancelEvents||T)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=X},9924:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,b){this._rowCount=b,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=d-this._lastRefreshMs,y=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(p,i,o){var f=this&&this.__decorate||function(h,l,c,m){var C,x=arguments.length,M=x<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(h,l,c,m);else for(var S=h.length-1;S>=0;S--)(C=h[S])&&(M=(x<3?C(M):x>3?C(l,c,M):C(l,c))||M);return x>3&&M&&Object.defineProperty(l,c,M),M},b=this&&this.__param||function(h,l){return function(c,m){l(c,m,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const d=o(3656),g=o(4725),y=o(8460),k=o(844),v=o(2585);let n=i.Viewport=class extends k.Disposable{constructor(h,l,c,m,C,x,M,S){super(),this._viewportElement=h,this._scrollArea=l,this._bufferService=c,this._optionsService=m,this._charSizeService=C,this._renderService=x,this._coreBrowserService=M,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,l){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&c<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const l=this._getPixelsScrolled(h);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(h,l))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let l=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(h,l){var S;let c,m="";const C=[],x=l??this._bufferService.buffer.lines.length,M=this._bufferService.buffer.lines;for(let E=h;E<x;E++){const B=M.get(E);if(!B)continue;const R=(S=M.get(E+1))==null?void 0:S.isWrapped;if(m+=B.translateToString(!R),!R||E===M.length-1){const O=document.createElement("div");O.textContent=m,C.push(O),m.length>0&&(c=O),m=""}}return{bufferElements:C,cursorElement:c}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let l=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(h,l){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&l.altKey||c==="ctrl"&&l.ctrlKey||c==="shift"&&l.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const l=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(h,l))}};i.Viewport=n=f([b(2,v.IBufferService),b(3,v.IOptionsService),b(4,g.ICharSizeService),b(5,g.IRenderService),b(6,g.ICoreBrowserService),b(7,g.IThemeService)],n)},3107:function(p,i,o){var f=this&&this.__decorate||function(v,n,h,l){var c,m=arguments.length,C=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,h):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,n,h,l);else for(var x=v.length-1;x>=0;x--)(c=v[x])&&(C=(m<3?c(C):m>3?c(n,h,C):c(n,h))||C);return m>3&&C&&Object.defineProperty(n,h,C),C},b=this&&this.__param||function(v,n){return function(h,l){n(h,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const d=o(4725),g=o(844),y=o(2585);let k=i.BufferDecorationRenderer=class extends g.Disposable{constructor(v,n,h,l,c){super(),this._screenElement=v,this._bufferService=n,this._coreBrowserService=h,this._decorationService=l,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var l;const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",((l=v==null?void 0:v.options)==null?void 0:l.layer)==="top"),n.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=v.options.x??0;return h&&h>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(v,n),n}_refreshStyle(v){const n=v.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let h=this._decorationElements.get(v);h||(h=this._createElement(v),v.element=h,this._decorationElements.set(v,h),this._container.appendChild(h),v.onDispose(()=>{this._decorationElements.delete(v),h.remove()})),h.style.top=n*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(h)}}_refreshXPosition(v,n=v.element){if(!n)return;const h=v.options.x??0;(v.options.anchor||"left")==="right"?n.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var n;(n=this._decorationElements.get(v))==null||n.remove(),this._decorationElements.delete(v),v.dispose()}};i.BufferDecorationRenderer=k=f([b(1,y.IBufferService),b(2,d.ICoreBrowserService),b(3,y.IDecorationService),b(4,d.IRenderService)],k)},5871:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,b){return f>=o.startBufferLine-this._linePadding[b||"full"]&&f<=o.endBufferLine+this._linePadding[b||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(p,i,o){var f=this&&this.__decorate||function(c,m,C,x){var M,S=arguments.length,E=S<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,m,C,x);else for(var B=c.length-1;B>=0;B--)(M=c[B])&&(E=(S<3?M(E):S>3?M(m,C,E):M(m,C))||E);return S>3&&E&&Object.defineProperty(m,C,E),E},b=this&&this.__param||function(c,m){return function(C,x){m(C,x,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const d=o(5871),g=o(4725),y=o(844),k=o(2585),v={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let l=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,m,C,x,M,S,E){var R;super(),this._viewportElement=c,this._screenElement=m,this._bufferService=C,this._decorationService=x,this._renderService=M,this._optionsService=S,this._coreBrowserService=E,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var O;(O=this._canvas)==null||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=c,n.center=m,n.right=c,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=n.left,h.right=n.left+n.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);v.left=m,v.center=m,v.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const m of c)m.position!=="full"&&this._renderColorZone(m);for(const m of c)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(h[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-v[c.position||"full"]/2),n[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[c.position||"full"]))}_queueRefresh(c,m){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=l=f([b(2,k.IBufferService),b(3,k.IDecorationService),b(4,g.IRenderService),b(5,k.IOptionsService),b(6,g.ICoreBrowserService)],l)},2950:function(p,i,o){var f=this&&this.__decorate||function(v,n,h,l){var c,m=arguments.length,C=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,h):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,n,h,l);else for(var x=v.length-1;x>=0;x--)(c=v[x])&&(C=(m<3?c(C):m>3?c(n,h,C):c(n,h))||C);return m>3&&C&&Object.defineProperty(n,h,C),C},b=this&&this.__param||function(v,n){return function(h,l){n(h,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const d=o(4725),g=o(2585),y=o(2584);let k=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,n,h,l,c,m){this._textarea=v,this._compositionView=n,this._bufferService=h,this._optionsService=l,this._coreService=c,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,h=n.replace(v,"");this._dataAlreadySent=h,n.length>v.length?this._coreService.triggerDataEvent(h,!0):n.length<v.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):n.length===v.length&&n!==v&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=k=f([b(2,g.IBufferService),b(3,g.IOptionsService),b(4,g.ICoreService),b(5,d.IRenderService)],k)},9806:(p,i)=>{function o(f,b,d){const g=d.getBoundingClientRect(),y=f.getComputedStyle(d),k=parseInt(y.getPropertyValue("padding-left")),v=parseInt(y.getPropertyValue("padding-top"));return[b.clientX-g.left-k,b.clientY-g.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,b,d,g,y,k,v,n,h){if(!k)return;const l=o(f,b,d);return l?(l[0]=Math.ceil((l[0]+(h?v/2:0))/v),l[1]=Math.ceil(l[1]/n),l[0]=Math.min(Math.max(l[0],1),g+(h?1:0)),l[1]=Math.min(Math.max(l[1],1),y),l):void 0}},9504:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function b(n,h,l,c){const m=n-d(n,l),C=h-d(h,l),x=Math.abs(m-C)-function(M,S,E){let B=0;const R=M-d(M,E),O=S-d(S,E);for(let A=0;A<Math.abs(R-O);A++){const U=g(M,S)==="A"?-1:1,V=E.buffer.lines.get(R+U*A);V!=null&&V.isWrapped&&B++}return B}(n,h,l);return v(x,k(g(n,h),c))}function d(n,h){let l=0,c=h.buffer.lines.get(n),m=c==null?void 0:c.isWrapped;for(;m&&n>=0&&n<h.rows;)l++,c=h.buffer.lines.get(--n),m=c==null?void 0:c.isWrapped;return l}function g(n,h){return n>h?"A":"B"}function y(n,h,l,c,m,C){let x=n,M=h,S="";for(;x!==l||M!==c;)x+=m?1:-1,m&&x>C.cols-1?(S+=C.buffer.translateBufferLineToString(M,!1,n,x),x=0,n=0,M++):!m&&x<0&&(S+=C.buffer.translateBufferLineToString(M,!1,0,n+1),x=C.cols-1,n=x,M--);return S+C.buffer.translateBufferLineToString(M,!1,n,x)}function k(n,h){const l=h?"O":"[";return f.C0.ESC+l+n}function v(n,h){n=Math.floor(n);let l="";for(let c=0;c<n;c++)l+=h;return l}i.moveToCellSequence=function(n,h,l,c){const m=l.buffer.x,C=l.buffer.y;if(!l.buffer.hasScrollback)return function(S,E,B,R,O,A){return b(E,R,O,A).length===0?"":v(y(S,E,S,E-d(E,O),!1,O).length,k("D",A))}(m,C,0,h,l,c)+b(C,h,l,c)+function(S,E,B,R,O,A){let U;U=b(E,R,O,A).length>0?R-d(R,O):E;const V=R,J=function(ie,Y,D,H,F,j){let G;return G=b(D,H,F,j).length>0?H-d(H,F):Y,ie<D&&G<=H||ie>=D&&G<H?"C":"D"}(S,E,B,R,O,A);return v(y(S,U,B,V,J==="C",O).length,k(J,A))}(m,C,n,h,l,c);let x;if(C===h)return x=m>n?"D":"C",v(Math.abs(m-n),k(x,c));x=C>h?"D":"C";const M=Math.abs(C-h);return v(function(S,E){return E.cols-S}(C>h?n:m,l)+(M-1)*l.cols+1+((C>h?m:n)-1),k(x,c))}},1296:function(p,i,o){var f=this&&this.__decorate||function(A,U,V,J){var ie,Y=arguments.length,D=Y<3?U:J===null?J=Object.getOwnPropertyDescriptor(U,V):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(A,U,V,J);else for(var H=A.length-1;H>=0;H--)(ie=A[H])&&(D=(Y<3?ie(D):Y>3?ie(U,V,D):ie(U,V))||D);return Y>3&&D&&Object.defineProperty(U,V,D),D},b=this&&this.__param||function(A,U){return function(V,J){U(V,J,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const d=o(3787),g=o(2550),y=o(2223),k=o(6171),v=o(6052),n=o(4725),h=o(8055),l=o(8460),c=o(844),m=o(2585),C="xterm-dom-renderer-owner-",x="xterm-rows",M="xterm-fg-",S="xterm-bg-",E="xterm-focus",B="xterm-selection";let R=1,O=i.DomRenderer=class extends c.Disposable{constructor(A,U,V,J,ie,Y,D,H,F,j,G,W,X){super(),this._terminal=A,this._document=U,this._element=V,this._screenElement=J,this._viewportElement=ie,this._helperContainer=Y,this._linkifier2=D,this._charSizeService=F,this._optionsService=j,this._bufferService=G,this._coreBrowserService=W,this._themeService=X,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const V of this._rowElements)V.style.width=`${this.dimensions.css.canvas.width}px`,V.style.height=`${this.dimensions.css.cell.height}px`,V.style.lineHeight=`${this.dimensions.css.cell.height}px`,V.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const U=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=U,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let U=`${this._terminalSelector} .${x} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;U+=`${this._terminalSelector} .${x} .xterm-dim { color: ${h.color.multiplyOpacity(A.foreground,.5).css};}`,U+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const V=`blink_underline_${this._terminalClass}`,J=`blink_bar_${this._terminalClass}`,ie=`blink_block_${this._terminalClass}`;U+=`@keyframes ${V} { 50% {  border-bottom-style: hidden; }}`,U+=`@keyframes ${J} { 50% {  box-shadow: none; }}`,U+=`@keyframes ${ie} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,U+=`${this._terminalSelector} .${x}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${x}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${x}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${ie} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,U+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[Y,D]of A.ansi.entries())U+=`${this._terminalSelector} .${M}${Y} { color: ${D.css}; }${this._terminalSelector} .${M}${Y}.xterm-dim { color: ${h.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${S}${Y} { background-color: ${D.css}; }`;U+=`${this._terminalSelector} .${M}${y.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(A.background).css}; }${this._terminalSelector} .${M}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${S}${y.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=U}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,U){for(let V=this._rowElements.length;V<=U;V++){const J=this._document.createElement("div");this._rowContainer.appendChild(J),this._rowElements.push(J)}for(;this._rowElements.length>U;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,U){this._refreshRowElements(A,U),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,U,V){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,U,V),this.renderRows(0,this._bufferService.rows-1),!A||!U)return;this._selectionRenderModel.update(this._terminal,A,U,V);const J=this._selectionRenderModel.viewportStartRow,ie=this._selectionRenderModel.viewportEndRow,Y=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(Y>=this._bufferService.rows||D<0)return;const H=this._document.createDocumentFragment();if(V){const F=A[0]>U[0];H.appendChild(this._createSelectionElement(Y,F?U[0]:A[0],F?A[0]:U[0],D-Y+1))}else{const F=J===Y?A[0]:0,j=Y===ie?U[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(Y,F,j));const G=D-Y-1;if(H.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,G)),Y!==D){const W=ie===D?U[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(D,0,W))}}this._selectionContainer.appendChild(H)}_createSelectionElement(A,U,V,J=1){const ie=this._document.createElement("div"),Y=U*this.dimensions.css.cell.width;let D=this.dimensions.css.cell.width*(V-U);return Y+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-Y),ie.style.height=J*this.dimensions.css.cell.height+"px",ie.style.top=A*this.dimensions.css.cell.height+"px",ie.style.left=`${Y}px`,ie.style.width=`${D}px`,ie}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,U){const V=this._bufferService.buffer,J=V.ybase+V.y,ie=Math.min(V.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,H=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=A;F<=U;F++){const j=F+V.ydisp,G=this._rowElements[F],W=V.lines.get(j);if(!G||!W)break;G.replaceChildren(...this._rowFactory.createRow(W,j,j===J,D,H,ie,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,U,V,J,ie,Y){V<0&&(A=0),J<0&&(U=0);const D=this._bufferService.rows-1;V=Math.max(Math.min(V,D),0),J=Math.max(Math.min(J,D),0),ie=Math.min(ie,this._bufferService.cols);const H=this._bufferService.buffer,F=H.ybase+H.y,j=Math.min(H.x,ie-1),G=this._optionsService.rawOptions.cursorBlink,W=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=V;te<=J;++te){const I=te+H.ydisp,T=this._rowElements[te],Q=H.lines.get(I);if(!T||!Q)break;T.replaceChildren(...this._rowFactory.createRow(Q,I,I===F,W,X,j,G,this.dimensions.css.cell.width,this._widthCache,Y?te===V?A:0:-1,Y?(te===J?U:ie)-1:-1))}}};i.DomRenderer=O=f([b(7,m.IInstantiationService),b(8,n.ICharSizeService),b(9,m.IOptionsService),b(10,m.IBufferService),b(11,n.ICoreBrowserService),b(12,n.IThemeService)],O)},3787:function(p,i,o){var f=this&&this.__decorate||function(x,M,S,E){var B,R=arguments.length,O=R<3?M:E===null?E=Object.getOwnPropertyDescriptor(M,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(x,M,S,E);else for(var A=x.length-1;A>=0;A--)(B=x[A])&&(O=(R<3?B(O):R>3?B(M,S,O):B(M,S))||O);return R>3&&O&&Object.defineProperty(M,S,O),O},b=this&&this.__param||function(x,M){return function(S,E){M(S,E,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const d=o(2223),g=o(643),y=o(511),k=o(2585),v=o(8055),n=o(4725),h=o(4269),l=o(6171),c=o(3734);let m=i.DomRendererRowFactory=class{constructor(x,M,S,E,B,R,O){this._document=x,this._characterJoinerService=M,this._optionsService=S,this._coreBrowserService=E,this._coreService=B,this._decorationService=R,this._themeService=O,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,M,S){this._selectionStart=x,this._selectionEnd=M,this._columnSelectMode=S}createRow(x,M,S,E,B,R,O,A,U,V,J){const ie=[],Y=this._characterJoinerService.getJoinedCharacters(M),D=this._themeService.colors;let H,F=x.getNoBgTrimmedLength();S&&F<R+1&&(F=R+1);let j=0,G="",W=0,X=0,te=0,I=!1,T=0,Q=!1,z=0;const N=[],$=V!==-1&&J!==-1;for(let ee=0;ee<F;ee++){x.loadCell(ee,this._workCell);let le=this._workCell.getWidth();if(le===0)continue;let ae=!1,ce=ee,he=this._workCell;if(Y.length>0&&ee===Y[0][0]){ae=!0;const Ce=Y.shift();he=new h.JoinedCellData(this._workCell,x.translateToString(!0,Ce[0],Ce[1]),Ce[1]-Ce[0]),ce=Ce[1]-1,le=he.getWidth()}const fe=this._isCellInSelection(ee,M),Se=S&&ee===R,xe=$&&ee>=V&&ee<=J;let me=!1;this._decorationService.forEachDecorationAtCell(ee,M,void 0,Ce=>{me=!0});let ke=he.getChars()||g.WHITESPACE_CELL_CHAR;if(ke===" "&&(he.isUnderline()||he.isOverline())&&(ke=" "),z=le*A-U.get(ke,he.isBold(),he.isItalic()),H){if(j&&(fe&&Q||!fe&&!Q&&he.bg===W)&&(fe&&Q&&D.selectionForeground||he.fg===X)&&he.extended.ext===te&&xe===I&&z===T&&!Se&&!ae&&!me){he.isInvisible()?G+=g.WHITESPACE_CELL_CHAR:G+=ke,j++;continue}j&&(H.textContent=G),H=this._document.createElement("span"),j=0,G=""}else H=this._document.createElement("span");if(W=he.bg,X=he.fg,te=he.extended.ext,I=xe,T=z,Q=fe,ae&&R>=ee&&R<=ce&&(R=ee),!this._coreService.isCursorHidden&&Se&&this._coreService.isCursorInitialized){if(N.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&N.push("xterm-cursor-blink"),N.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":N.push("xterm-cursor-outline");break;case"block":N.push("xterm-cursor-block");break;case"bar":N.push("xterm-cursor-bar");break;case"underline":N.push("xterm-cursor-underline")}}if(he.isBold()&&N.push("xterm-bold"),he.isItalic()&&N.push("xterm-italic"),he.isDim()&&N.push("xterm-dim"),G=he.isInvisible()?g.WHITESPACE_CELL_CHAR:he.getChars()||g.WHITESPACE_CELL_CHAR,he.isUnderline()&&(N.push(`xterm-underline-${he.extended.underlineStyle}`),G===" "&&(G=" "),!he.isUnderlineColorDefault()))if(he.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(he.getUnderlineColor()).join(",")})`;else{let Ce=he.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&he.isBold()&&Ce<8&&(Ce+=8),H.style.textDecorationColor=D.ansi[Ce].css}he.isOverline()&&(N.push("xterm-overline"),G===" "&&(G=" ")),he.isStrikethrough()&&N.push("xterm-strikethrough"),xe&&(H.style.textDecoration="underline");let ne=he.getFgColor(),ge=he.getFgColorMode(),pe=he.getBgColor(),Le=he.getBgColorMode();const $e=!!he.isInverse();if($e){const Ce=ne;ne=pe,pe=Ce;const de=ge;ge=Le,Le=de}let Ne,We,st,Ue=!1;switch(this._decorationService.forEachDecorationAtCell(ee,M,void 0,Ce=>{Ce.options.layer!=="top"&&Ue||(Ce.backgroundColorRGB&&(Le=50331648,pe=Ce.backgroundColorRGB.rgba>>8&16777215,Ne=Ce.backgroundColorRGB),Ce.foregroundColorRGB&&(ge=50331648,ne=Ce.foregroundColorRGB.rgba>>8&16777215,We=Ce.foregroundColorRGB),Ue=Ce.options.layer==="top")}),!Ue&&fe&&(Ne=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,pe=Ne.rgba>>8&16777215,Le=50331648,Ue=!0,D.selectionForeground&&(ge=50331648,ne=D.selectionForeground.rgba>>8&16777215,We=D.selectionForeground)),Ue&&N.push("xterm-decoration-top"),Le){case 16777216:case 33554432:st=D.ansi[pe],N.push(`xterm-bg-${pe}`);break;case 50331648:st=v.channels.toColor(pe>>16,pe>>8&255,255&pe),this._addStyle(H,`background-color:#${C((pe>>>0).toString(16),"0",6)}`);break;default:$e?(st=D.foreground,N.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):st=D.background}switch(Ne||he.isDim()&&(Ne=v.color.multiplyOpacity(st,.5)),ge){case 16777216:case 33554432:he.isBold()&&ne<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ne+=8),this._applyMinimumContrast(H,st,D.ansi[ne],he,Ne,void 0)||N.push(`xterm-fg-${ne}`);break;case 50331648:const Ce=v.channels.toColor(ne>>16&255,ne>>8&255,255&ne);this._applyMinimumContrast(H,st,Ce,he,Ne,We)||this._addStyle(H,`color:#${C(ne.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,st,D.foreground,he,Ne,We)||$e&&N.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}N.length&&(H.className=N.join(" "),N.length=0),Se||ae||me?H.textContent=G:j++,z!==this.defaultSpacing&&(H.style.letterSpacing=`${z}px`),ie.push(H),ee=ce}return H&&j&&(H.textContent=G),ie}_applyMinimumContrast(x,M,S,E,B,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(E.getCode()))return!1;const O=this._getContrastCache(E);let A;if(B||R||(A=O.getColor(M.rgba,S.rgba)),A===void 0){const U=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);A=v.color.ensureContrastRatio(B||M,R||S,U),O.setColor((B||M).rgba,(R||S).rgba,A??null)}return!!A&&(this._addStyle(x,`color:${A.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,M){x.setAttribute("style",`${x.getAttribute("style")||""}${M};`)}_isCellInSelection(x,M){const S=this._selectionStart,E=this._selectionEnd;return!(!S||!E)&&(this._columnSelectMode?S[0]<=E[0]?x>=S[0]&&M>=S[1]&&x<E[0]&&M<=E[1]:x<S[0]&&M>=S[1]&&x>=E[0]&&M<=E[1]:M>S[1]&&M<E[1]||S[1]===E[1]&&M===S[1]&&x>=S[0]&&x<E[0]||S[1]<E[1]&&M===E[1]&&x<E[0]||S[1]<E[1]&&M===S[1]&&x>=S[0])}};function C(x,M,S){for(;x.length<S;)x=M+x;return x}i.DomRendererRowFactory=m=f([b(1,n.ICharacterJoinerService),b(2,k.IOptionsService),b(3,n.ICoreBrowserService),b(4,k.ICoreService),b(5,k.IDecorationService),b(6,n.IThemeService)],m)},2550:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const b=o.createElement("span");b.classList.add("xterm-char-measure-element");const d=o.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const g=o.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const y=o.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[b,d,g,y],this._container.appendChild(b),this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(y),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,b,d){o===this._font&&f===this._fontSize&&b===this._weight&&d===this._weightBold||(this._font=o,this._fontSize=f,this._weight=b,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${b}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${b}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(o,f,b){let d=0;if(!f&&!b&&o.length===1&&(d=o.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const k=this._measure(o,0);return k>0&&(this._flat[d]=k),k}let g=o;f&&(g+="B"),b&&(g+="I");let y=this._holey.get(g);if(y===void 0){let k=0;f&&(k|=1),b&&(k|=2),y=this._measure(o,k),y>0&&this._holey.set(g,y)}return y}_measure(o,f){const b=this._measureElements[f];return b.textContent=o.repeat(32),b.offsetWidth/32}}},2223:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(p,i)=>{function o(b){return 57508<=b&&b<=57558}function f(b){return b>=128512&&b<=128591||b>=127744&&b<=128511||b>=128640&&b<=128767||b>=9728&&b<=9983||b>=9984&&b<=10175||b>=65024&&b<=65039||b>=129280&&b<=129535||b>=127462&&b<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(b){if(!b)throw new Error("value must not be falsy");return b},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(b){return 57520<=b&&b<=57527},i.isEmoji=f,i.allowRescaling=function(b,d,g,y){return d===1&&g>Math.ceil(1.5*y)&&b!==void 0&&b>255&&!f(b)&&!o(b)&&!function(k){return 57344<=k&&k<=63743}(b)},i.treatGlyphAsBackgroundColor=function(b){return o(b)||function(d){return 9472<=d&&d<=9631}(b)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(b,d,g=0){return(b-(2*Math.round(d)-g))%(2*Math.round(d))}},6052:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(b,d,g,y=!1){if(this.selectionStart=d,this.selectionEnd=g,!d||!g||d[0]===g[0]&&d[1]===g[1])return void this.clear();const k=b.buffers.active.ydisp,v=d[1]-k,n=g[1]-k,h=Math.max(v,0),l=Math.min(n,b.rows-1);h>=b.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=v,this.viewportEndRow=n,this.viewportCappedStartRow=h,this.viewportCappedEndRow=l,this.startCol=d[0],this.endCol=g[0])}isCellSelected(b,d,g){return!!this.hasSelection&&(g-=b.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&g>=this.viewportCappedStartRow&&d<this.endCol&&g<=this.viewportCappedEndRow:d<this.startCol&&g>=this.viewportCappedStartRow&&d>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,i,o){var f=this&&this.__decorate||function(l,c,m,C){var x,M=arguments.length,S=M<3?c:C===null?C=Object.getOwnPropertyDescriptor(c,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,c,m,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(S=(M<3?x(S):M>3?x(c,m,S):x(c,m))||S);return M>3&&S&&Object.defineProperty(c,m,S),S},b=this&&this.__param||function(l,c){return function(m,C){c(m,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const d=o(2585),g=o(8460),y=o(844);let k=i.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,c,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch{this._measureStrategy=this.register(new n(l,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=k=f([b(2,d.IOptionsService)],k);class v extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,m){c!==void 0&&c>0&&m!==void 0&&m>0&&(this._result.width=c,this._result.height=m)}}class n extends v{constructor(c,m,C){super(),this._document=c,this._parentElement=m,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends v{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(p,i,o){var f=this&&this.__decorate||function(h,l,c,m){var C,x=arguments.length,M=x<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(h,l,c,m);else for(var S=h.length-1;S>=0;S--)(C=h[S])&&(M=(x<3?C(M):x>3?C(l,c,M):C(l,c))||M);return x>3&&M&&Object.defineProperty(l,c,M),M},b=this&&this.__param||function(h,l){return function(c,m){l(c,m,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const d=o(3734),g=o(643),y=o(511),k=o(2585);class v extends d.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let n=i.CharacterJoinerService=class qs{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],C=c.translateToString(!0);let x=0,M=0,S=0,E=c.getFg(0),B=c.getBg(0);for(let R=0;R<c.getTrimmedLength();R++)if(c.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==B){if(R-x>1){const O=this._getJoinedRanges(C,S,M,c,x);for(let A=0;A<O.length;A++)m.push(O[A])}x=R,S=M,E=this._workCell.fg,B=this._workCell.bg}M+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const R=this._getJoinedRanges(C,S,M,c,x);for(let O=0;O<R.length;O++)m.push(R[O])}return m}_getJoinedRanges(l,c,m,C,x){const M=l.substring(c,m);let S=[];try{S=this._characterJoiners[0].handler(M)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const B=this._characterJoiners[E].handler(M);for(let R=0;R<B.length;R++)qs._mergeRanges(S,B[R])}catch(B){console.error(B)}return this._stringRangesToCellRanges(S,C,x),S}_stringRangesToCellRanges(l,c,m){let C=0,x=!1,M=0,S=l[C];if(S){for(let E=m;E<this._bufferService.cols;E++){const B=c.getWidth(E),R=c.getString(E).length||g.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!x&&S[0]<=M&&(S[0]=E,x=!0),S[1]<=M){if(S[1]=E,S=l[++C],!S)break;S[0]<=M?(S[0]=E,x=!0):x=!1}M+=R}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let C=0;C<l.length;C++){const x=l[C];if(m){if(c[1]<=x[0])return l[C-1][1]=c[1],l;if(c[1]<=x[1])return l[C-1][1]=Math.max(c[1],x[1]),l.splice(C,1),l;l.splice(C,1),C--}else{if(c[1]<=x[0])return l.splice(C,0,c),l;if(c[1]<=x[1])return x[0]=Math.min(c[0],x[0]),l;c[0]<x[1]&&(x[0]=Math.min(c[0],x[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([b(0,k.IBufferService)],n)},5114:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),b=o(8460),d=o(3656);class g extends f.Disposable{constructor(v,n,h){super(),this._textarea=v,this._window=n,this.mainDocument=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new b.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,b.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=g;class y extends f.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class b extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const y=this.linkProviders.indexOf(g);y!==-1&&this.linkProviders.splice(y,1)}}}}i.LinkProviderService=b},8934:function(p,i,o){var f=this&&this.__decorate||function(k,v,n,h){var l,c=arguments.length,m=c<3?v:h===null?h=Object.getOwnPropertyDescriptor(v,n):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(k,v,n,h);else for(var C=k.length-1;C>=0;C--)(l=k[C])&&(m=(c<3?l(m):c>3?l(v,n,m):l(v,n))||m);return c>3&&m&&Object.defineProperty(v,n,m),m},b=this&&this.__param||function(k,v){return function(n,h){v(n,h,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const d=o(4725),g=o(9806);let y=i.MouseService=class{constructor(k,v){this._renderService=k,this._charSizeService=v}getCoords(k,v,n,h,l){return(0,g.getCoords)(window,k,v,n,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(k,v){const n=(0,g.getCoordsRelativeToElement)(window,k,v);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=y=f([b(0,d.IRenderService),b(1,d.ICharSizeService)],y)},3230:function(p,i,o){var f=this&&this.__decorate||function(l,c,m,C){var x,M=arguments.length,S=M<3?c:C===null?C=Object.getOwnPropertyDescriptor(c,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,c,m,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(S=(M<3?x(S):M>3?x(c,m,S):x(c,m))||S);return M>3&&S&&Object.defineProperty(c,m,S),S},b=this&&this.__param||function(l,c){return function(m,C){c(m,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const d=o(6193),g=o(4725),y=o(8460),k=o(844),v=o(7226),n=o(2585);let h=i.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,c,m,C,x,M,S,E){super(),this._rowCount=l,this._charSizeService=C,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((B,R)=>this._renderRows(B,R),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(M.onResize(()=>this._fullRefresh())),this.register(M.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)==null?void 0:B.clear()})),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(M.cols,M.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(M.buffer.y,M.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,c),this.register(S.onWindowChange(B=>this._registerIntersectionObserver(B,c)))}_registerIntersectionObserver(l,c){if("IntersectionObserver"in l){const m=new l.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});m.observe(c),this._observerDisposable.value=(0,k.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,c,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,c,this._rowCount))}_renderRows(l,c){this._renderer.value&&(l=Math.min(l,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(l,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:c}),this._onRender.fire({start:l,end:c}),this._isNextRenderRedrawOnly=!0)}resize(l,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(c=>this.refreshRows(c.start,c.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var l,c;this._renderer.value&&((c=(l=this._renderer.value).clearTextureAtlas)==null||c.call(l),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var m;return(m=this._renderer.value)==null?void 0:m.handleResize(l,c)}):this._renderer.value.handleResize(l,c),this._fullRefresh())}handleCharSizeChanged(){var l;(l=this._renderer.value)==null||l.handleCharSizeChanged()}handleBlur(){var l;(l=this._renderer.value)==null||l.handleBlur()}handleFocus(){var l;(l=this._renderer.value)==null||l.handleFocus()}handleSelectionChanged(l,c,m){var C;this._selectionState.start=l,this._selectionState.end=c,this._selectionState.columnSelectMode=m,(C=this._renderer.value)==null||C.handleSelectionChanged(l,c,m)}handleCursorMove(){var l;(l=this._renderer.value)==null||l.handleCursorMove()}clear(){var l;(l=this._renderer.value)==null||l.clear()}};i.RenderService=h=f([b(2,n.IOptionsService),b(3,g.ICharSizeService),b(4,n.IDecorationService),b(5,n.IBufferService),b(6,g.ICoreBrowserService),b(7,g.IThemeService)],h)},9312:function(p,i,o){var f=this&&this.__decorate||function(S,E,B,R){var O,A=arguments.length,U=A<3?E:R===null?R=Object.getOwnPropertyDescriptor(E,B):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(S,E,B,R);else for(var V=S.length-1;V>=0;V--)(O=S[V])&&(U=(A<3?O(U):A>3?O(E,B,U):O(E,B))||U);return A>3&&U&&Object.defineProperty(E,B,U),U},b=this&&this.__param||function(S,E){return function(B,R){E(B,R,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const d=o(9806),g=o(9504),y=o(456),k=o(4725),v=o(8460),n=o(844),h=o(6114),l=o(4841),c=o(511),m=o(2585),C=" ",x=new RegExp(C,"g");let M=i.SelectionService=class extends n.Disposable{constructor(S,E,B,R,O,A,U,V,J){super(),this._element=S,this._screenElement=E,this._linkifier=B,this._bufferService=R,this._coreService=O,this._mouseService=A,this._optionsService=U,this._renderService=V,this._coreBrowserService=J,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ie=>this._handleMouseMove(ie),this._mouseUpListener=ie=>this._handleMouseUp(ie),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(ie=>this._handleTrim(ie)),this.register(this._bufferService.buffers.onBufferActivate(ie=>this._handleBufferActivate(ie))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!S||!E||S[0]===E[0]&&S[1]===E[1])}get selectionText(){const S=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!S||!E)return"";const B=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(S[0]===E[0])return"";const O=S[0]<E[0]?S[0]:E[0],A=S[0]<E[0]?E[0]:S[0];for(let U=S[1];U<=E[1];U++){const V=B.translateBufferLineToString(U,!0,O,A);R.push(V)}}else{const O=S[1]===E[1]?E[0]:void 0;R.push(B.translateBufferLineToString(S[1],!0,S[0],O));for(let A=S[1]+1;A<=E[1]-1;A++){const U=B.lines.get(A),V=B.translateBufferLineToString(A,!0);U!=null&&U.isWrapped?R[R.length-1]+=V:R.push(V)}if(S[1]!==E[1]){const A=B.lines.get(E[1]),U=B.translateBufferLineToString(E[1],!0,0,E[0]);A&&A.isWrapped?R[R.length-1]+=U:R.push(U)}}return R.map(O=>O.replace(x," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const E=this._getMouseBufferCoords(S),B=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(B&&R&&E)&&this._areCoordsInSelection(E,B,R)}isCellInSelection(S,E){const B=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!B||!R)&&this._areCoordsInSelection([S,E],B,R)}_areCoordsInSelection(S,E,B){return S[1]>E[1]&&S[1]<B[1]||E[1]===B[1]&&S[1]===E[1]&&S[0]>=E[0]&&S[0]<B[0]||E[1]<B[1]&&S[1]===B[1]&&S[0]<B[0]||E[1]<B[1]&&S[1]===E[1]&&S[0]>=E[0]}_selectWordAtCursor(S,E){var O,A;const B=(A=(O=this._linkifier.currentLink)==null?void 0:O.link)==null?void 0:A.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(S);return!!R&&(this._selectWordAt(R,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,E){this._model.clearSelection(),S=Math.max(S,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const E=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(S){let E=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=B?0:(E>B&&(E-=B),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(S){return h.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const E=this._getMouseBufferCoords(S);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(S){return S.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const R=B.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const E=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const R=(0,g.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,B=!(!S||!E||S[0]===E[0]&&S[1]===E[1]);B?S&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,E,B)):this._oldHasSelection&&this._fireOnSelectionChange(S,E,B)}_fireOnSelectionChange(S,E,B){this._oldSelectionStart=S,this._oldSelectionEnd=E,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(S,E){let B=E;for(let R=0;E>=R;R++){const O=S.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:O>1&&E!==R&&(B+=O-1)}return B}setSelection(S,E,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,E],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,E,B=!0,R=!0){if(S[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,A=O.lines.get(S[1]);if(!A)return;const U=O.translateBufferLineToString(S[1],!1);let V=this._convertViewportColToCharacterIndex(A,S[0]),J=V;const ie=S[0]-V;let Y=0,D=0,H=0,F=0;if(U.charAt(V)===" "){for(;V>0&&U.charAt(V-1)===" ";)V--;for(;J<U.length&&U.charAt(J+1)===" ";)J++}else{let W=S[0],X=S[0];A.getWidth(W)===0&&(Y++,W--),A.getWidth(X)===2&&(D++,X++);const te=A.getString(X).length;for(te>1&&(F+=te-1,J+=te-1);W>0&&V>0&&!this._isCharWordSeparator(A.loadCell(W-1,this._workCell));){A.loadCell(W-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,W--):I>1&&(H+=I-1,V-=I-1),V--,W--}for(;X<A.length&&J+1<U.length&&!this._isCharWordSeparator(A.loadCell(X+1,this._workCell));){A.loadCell(X+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,X++):I>1&&(F+=I-1,J+=I-1),J++,X++}}J++;let j=V+ie-Y+H,G=Math.min(this._bufferService.cols,J-V+Y+D-H-F);if(E||U.slice(V,J).trim()!==""){if(B&&j===0&&A.getCodePoint(0)!==32){const W=O.lines.get(S[1]-1);if(W&&A.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){const X=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(X){const te=this._bufferService.cols-X.start;j-=te,G+=te}}}if(R&&j+G===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const W=O.lines.get(S[1]+1);if(W!=null&&W.isWrapped&&W.getCodePoint(0)!==32){const X=this._getWordAt([0,S[1]+1],!1,!1,!0);X&&(G+=X.length)}}return{start:j,length:G}}}_selectWordAt(S,E){const B=this._getWordAt(S,E);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[B.start,S[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(S){const E=this._getWordAt(S,!0);if(E){let B=S[1];for(;E.start<0;)E.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,B]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const E=this._bufferService.buffer.getWrappedRangeForLine(S),B={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(B,this._bufferService.cols)}};i.SelectionService=M=f([b(3,m.IBufferService),b(4,m.ICoreService),b(5,k.IMouseService),b(6,m.IOptionsService),b(7,k.IRenderService),b(8,k.ICoreBrowserService)],M)},4725:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(p,i,o){var f=this&&this.__decorate||function(M,S,E,B){var R,O=arguments.length,A=O<3?S:B===null?B=Object.getOwnPropertyDescriptor(S,E):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(M,S,E,B);else for(var U=M.length-1;U>=0;U--)(R=M[U])&&(A=(O<3?R(A):O>3?R(S,E,A):R(S,E))||A);return O>3&&A&&Object.defineProperty(S,E,A),A},b=this&&this.__param||function(M,S){return function(E,B){S(E,B,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const d=o(7239),g=o(8055),y=o(8460),k=o(844),v=o(2585),n=g.css.toColor("#ffffff"),h=g.css.toColor("#000000"),l=g.css.toColor("#ffffff"),c=g.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const M=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let E=0;E<216;E++){const B=S[E/36%6|0],R=S[E/6%6|0],O=S[E%6];M.push({css:g.channels.toCss(B,R,O),rgba:g.channels.toRgba(B,R,O)})}for(let E=0;E<24;E++){const B=8+10*E;M.push({css:g.channels.toCss(B,B,B),rgba:g.channels.toRgba(B,B,B)})}return M})());let C=i.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(M){super(),this._optionsService=M,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:h,cursor:l,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:g.color.blend(h,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:g.color.blend(h,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(M={}){const S=this._colors;if(S.foreground=x(M.foreground,n),S.background=x(M.background,h),S.cursor=x(M.cursor,l),S.cursorAccent=x(M.cursorAccent,c),S.selectionBackgroundTransparent=x(M.selectionBackground,m),S.selectionBackgroundOpaque=g.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=x(M.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=g.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=M.selectionForeground?x(M.selectionForeground,g.NULL_COLOR):void 0,S.selectionForeground===g.NULL_COLOR&&(S.selectionForeground=void 0),g.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=g.color.opacity(S.selectionBackgroundTransparent,.3)),g.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=g.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=x(M.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=x(M.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=x(M.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=x(M.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=x(M.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=x(M.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=x(M.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=x(M.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=x(M.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=x(M.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=x(M.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=x(M.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=x(M.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=x(M.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=x(M.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=x(M.brightWhite,i.DEFAULT_ANSI_COLORS[15]),M.extendedAnsi){const E=Math.min(S.ansi.length-16,M.extendedAnsi.length);for(let B=0;B<E;B++)S.ansi[B+16]=x(M.extendedAnsi[B],i.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(M){this._restoreColor(M),this._onChangeColors.fire(this.colors)}_restoreColor(M){if(M!==void 0)switch(M){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[M]=this._restoreColors.ansi[M]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(M){M(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(M,S){if(M!==void 0)try{return g.css.toColor(M)}catch{}return S}i.ThemeService=C=f([b(0,v.IOptionsService)],C)},6349:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),b=o(844);class d extends b.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const k=new Array(y);for(let v=0;v<Math.min(y,this.length);v++)k[v]=this._array[this._getCyclicIndex(v)];this._array=k,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let k=this._length;k<y;k++)this._array[k]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,k){this._array[this._getCyclicIndex(y)]=k}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,k,...v){if(k){for(let n=y;n<this._length-k;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+k)];this._length-=k,this.onDeleteEmitter.fire({index:y,amount:k})}for(let n=this._length-1;n>=y;n--)this._array[this._getCyclicIndex(n+v.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<v.length;n++)this._array[this._getCyclicIndex(y+n)]=v[n];if(v.length&&this.onInsertEmitter.fire({index:y,amount:v.length}),this._length+v.length>this._maxLength){const n=this._length+v.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=v.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,k,v){if(!(k<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let h=k-1;h>=0;h--)this.set(y+h+v,this.get(y+h));const n=y+k+v-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<k;n++)this.set(y+n+v,this.get(y+n))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}i.CircularList=d},1439:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,b=5){if(typeof f!="object")return f;const d=Array.isArray(f)?[]:{};for(const g in f)d[g]=b<=1?f[g]:f[g]&&o(f[g],b-1);return d}},8055:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,b=0,d=0;var g,y,k,v,n;function h(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,C,x,M){return M!==void 0?`#${h(m)}${h(C)}${h(x)}${h(M)}`:`#${h(m)}${h(C)}${h(x)}`},c.toRgba=function(m,C,x,M=255){return(m<<24|C<<16|x<<8|M)>>>0},c.toColor=function(m,C,x,M){return{css:c.toCss(m,C,x,M),rgba:c.toRgba(m,C,x,M)}}}(g||(i.channels=g={})),function(c){function m(C,x){return d=Math.round(255*x),[o,f,b]=n.toChannels(C.rgba),{css:g.toCss(o,f,b,d),rgba:g.toRgba(o,f,b,d)}}c.blend=function(C,x){if(d=(255&x.rgba)/255,d===1)return{css:x.css,rgba:x.rgba};const M=x.rgba>>24&255,S=x.rgba>>16&255,E=x.rgba>>8&255,B=C.rgba>>24&255,R=C.rgba>>16&255,O=C.rgba>>8&255;return o=B+Math.round((M-B)*d),f=R+Math.round((S-R)*d),b=O+Math.round((E-O)*d),{css:g.toCss(o,f,b),rgba:g.toRgba(o,f,b)}},c.isOpaque=function(C){return(255&C.rgba)==255},c.ensureContrastRatio=function(C,x,M){const S=n.ensureContrastRatio(C.rgba,x.rgba,M);if(S)return g.toColor(S>>24&255,S>>16&255,S>>8&255)},c.opaque=function(C){const x=(255|C.rgba)>>>0;return[o,f,b]=n.toChannels(x),{css:g.toCss(o,f,b),rgba:x}},c.opacity=m,c.multiplyOpacity=function(C,x){return d=255&C.rgba,m(C,d*x/255)},c.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(y||(i.color=y={})),function(c){let m,C;try{const x=document.createElement("canvas");x.width=1,x.height=1;const M=x.getContext("2d",{willReadFrequently:!0});M&&(m=M,m.globalCompositeOperation="copy",C=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return o=parseInt(x.slice(1,2).repeat(2),16),f=parseInt(x.slice(2,3).repeat(2),16),b=parseInt(x.slice(3,4).repeat(2),16),g.toColor(o,f,b);case 5:return o=parseInt(x.slice(1,2).repeat(2),16),f=parseInt(x.slice(2,3).repeat(2),16),b=parseInt(x.slice(3,4).repeat(2),16),d=parseInt(x.slice(4,5).repeat(2),16),g.toColor(o,f,b,d);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const M=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return o=parseInt(M[1]),f=parseInt(M[2]),b=parseInt(M[3]),d=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),g.toColor(o,f,b,d);if(!m||!C)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=C,m.fillStyle=x,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,b,d]=m.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(o,f,b,d),css:x}}}(k||(i.css=k={})),function(c){function m(C,x,M){const S=C/255,E=x/255,B=M/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}c.relativeLuminance=function(C){return m(C>>16&255,C>>8&255,255&C)},c.relativeLuminance2=m}(v||(i.rgb=v={})),function(c){function m(x,M,S){const E=x>>24&255,B=x>>16&255,R=x>>8&255;let O=M>>24&255,A=M>>16&255,U=M>>8&255,V=l(v.relativeLuminance2(O,A,U),v.relativeLuminance2(E,B,R));for(;V<S&&(O>0||A>0||U>0);)O-=Math.max(0,Math.ceil(.1*O)),A-=Math.max(0,Math.ceil(.1*A)),U-=Math.max(0,Math.ceil(.1*U)),V=l(v.relativeLuminance2(O,A,U),v.relativeLuminance2(E,B,R));return(O<<24|A<<16|U<<8|255)>>>0}function C(x,M,S){const E=x>>24&255,B=x>>16&255,R=x>>8&255;let O=M>>24&255,A=M>>16&255,U=M>>8&255,V=l(v.relativeLuminance2(O,A,U),v.relativeLuminance2(E,B,R));for(;V<S&&(O<255||A<255||U<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),A=Math.min(255,A+Math.ceil(.1*(255-A))),U=Math.min(255,U+Math.ceil(.1*(255-U))),V=l(v.relativeLuminance2(O,A,U),v.relativeLuminance2(E,B,R));return(O<<24|A<<16|U<<8|255)>>>0}c.blend=function(x,M){if(d=(255&M)/255,d===1)return M;const S=M>>24&255,E=M>>16&255,B=M>>8&255,R=x>>24&255,O=x>>16&255,A=x>>8&255;return o=R+Math.round((S-R)*d),f=O+Math.round((E-O)*d),b=A+Math.round((B-A)*d),g.toRgba(o,f,b)},c.ensureContrastRatio=function(x,M,S){const E=v.relativeLuminance(x>>8),B=v.relativeLuminance(M>>8);if(l(E,B)<S){if(B<E){const A=m(x,M,S),U=l(E,v.relativeLuminance(A>>8));if(U<S){const V=C(x,M,S);return U>l(E,v.relativeLuminance(V>>8))?A:V}return A}const R=C(x,M,S),O=l(E,v.relativeLuminance(R>>8));if(O<S){const A=m(x,M,S);return O>l(E,v.relativeLuminance(A>>8))?R:A}return R}},c.reduceLuminance=m,c.increaseLuminance=C,c.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}}(n||(i.rgba=n={})),i.toPaddedHex=h,i.contrastRatio=l},8969:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),b=o(2585),d=o(4348),g=o(7866),y=o(744),k=o(7302),v=o(6975),n=o(8460),h=o(1753),l=o(1480),c=o(7994),m=o(9282),C=o(5435),x=o(5981),M=o(2660);let S=!1;class E extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(R=>{var O;(O=this._onScrollApi)==null||O.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const O in R)this.optionsService.options[O]=R[O]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new k.OptionsService(R)),this._instantiationService.setService(b.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(b.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(b.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(b.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(b.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(b.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(b.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(M.OscLinkService),this._instantiationService.setService(b.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((O,A)=>this._inputHandler.parse(O,A))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,O){this._writeBuffer.write(R,O)}writeSync(R,O){this._logService.logLevel<=b.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(R,O)}input(R,O=!0){this.coreService.triggerDataEvent(R,O)}resize(R,O){isNaN(R)||isNaN(O)||(R=Math.max(R,y.MINIMUM_COLS),O=Math.max(O,y.MINIMUM_ROWS),this._bufferService.resize(R,O))}scroll(R,O=!1){this._bufferService.scroll(R,O)}scrollLines(R,O,A){this._bufferService.scrollLines(R,O,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const O=R-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(R,O){return this._inputHandler.registerEscHandler(R,O)}registerDcsHandler(R,O){return this._inputHandler.registerDcsHandler(R,O)}registerCsiHandler(R,O){return this._inputHandler.registerCsiHandler(R,O)}registerOscHandler(R,O){return this._inputHandler.registerOscHandler(R,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?R=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const O of R)O.dispose()})}}}i.CoreTerminal=E},8460:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const b=[];for(let d=0;d<this._listeners.length;d++)b.push(this._listeners[d]);for(let d=0;d<b.length;d++)b[d].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(b=>f.fire(b))},i.runAndSubscribe=function(o,f){return f(void 0),o(b=>f(b))}},5435:function(p,i,o){var f=this&&this.__decorate||function(Y,D,H,F){var j,G=arguments.length,W=G<3?D:F===null?F=Object.getOwnPropertyDescriptor(D,H):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(Y,D,H,F);else for(var X=Y.length-1;X>=0;X--)(j=Y[X])&&(W=(G<3?j(W):G>3?j(D,H,W):j(D,H))||W);return G>3&&W&&Object.defineProperty(D,H,W),W},b=this&&this.__param||function(Y,D){return function(H,F){D(H,F,Y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const d=o(2584),g=o(7116),y=o(2015),k=o(844),v=o(482),n=o(8437),h=o(8460),l=o(643),c=o(511),m=o(3734),C=o(2585),x=o(1480),M=o(6242),S=o(6351),E=o(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function O(Y,D){if(Y>24)return D.setWinLines||!1;switch(Y){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var A;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let U=0;class V extends k.Disposable{getAttrData(){return this._curAttrData}constructor(D,H,F,j,G,W,X,te,I=new y.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=H,this._coreService=F,this._logService=j,this._optionsService=G,this._oscLinkService=W,this._coreMouseService=X,this._unicodeService=te,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new J(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,Q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:Q.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,Q,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:Q,data:z})}),this._parser.setDcsHandlerFallback((T,Q,z)=>{Q==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:Q,payload:z})}),this._parser.setPrintHandler((T,Q,z)=>this.print(T,Q,z)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new M.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new M.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new M.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new M.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new M.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new M.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new M.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new M.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new M.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new M.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new M.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new M.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((T,Q)=>this.requestStatusString(T,Q)))}_preserveStack(D,H,F,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=F,this._parseStack.position=j}_logSlowResolvingAsync(D){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([D,new Promise((H,F)=>setTimeout(()=>F("#SLOW_TIMEOUT"),5e3))]).catch(H=>{if(H!=="#SLOW_TIMEOUT")throw H;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,H){let F,j=this._activeBuffer.x,G=this._activeBuffer.y,W=0;const X=this._parseStack.paused;if(X){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync(F),F;j=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>R&&(W=this._parseStack.position+R)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,T=>String.fromCharCode(T)).join("")}"`),typeof D=="string"?D.split("").map(T=>T.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(D.length,R))),X||this._dirtyRowTracker.clearRange(),D.length>R)for(let T=W;T<D.length;T+=R){const Q=T+R<D.length?T+R:D.length,z=typeof D=="string"?this._stringDecoder.decode(D.substring(T,Q),this._parseBuffer):this._utf8Decoder.decode(D.subarray(T,Q),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,z))return this._preserveStack(j,G,z,T),this._logSlowResolvingAsync(F),F}else if(!X){const T=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,T))return this._preserveStack(j,G,T,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===j&&this._activeBuffer.y===G||this._onCursorMove.fire();const te=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(te,this._bufferService.rows-1))}print(D,H,F){let j,G;const W=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,Q=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-H>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodepoint(this._activeBuffer.x-1,0,1,Q);let N=this._parser.precedingJoinState;for(let $=H;$<F;++$){if(j=D[$],j<127&&W){const ce=W[String.fromCharCode(j)];ce&&(j=ce.charCodeAt(0))}const ee=this._unicodeService.charProperties(j,N);G=x.UnicodeService.extractWidth(ee);const le=x.UnicodeService.extractShouldJoin(ee),ae=le?x.UnicodeService.extractWidth(N):0;if(N=ee,X&&this._onA11yChar.fire((0,v.stringFromCodePoint)(j)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+G-ae>te){if(I){const ce=z;let he=this._activeBuffer.x-ae;for(this._activeBuffer.x=ae,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ae>0&&z instanceof n.BufferLine&&z.copyCellsFrom(ce,he,0,ae,!1);he<te;)ce.setCellFromCodepoint(he++,0,1,Q)}else if(this._activeBuffer.x=te-1,G===2)continue}if(le&&this._activeBuffer.x){const ce=z.getWidth(this._activeBuffer.x-1)?1:2;z.addCodepointToCell(this._activeBuffer.x-ce,j,G);for(let he=G-ae;--he>=0;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}else if(T&&(z.insertCells(this._activeBuffer.x,G-ae,this._activeBuffer.getNullCell(Q)),z.getWidth(te-1)===2&&z.setCellFromCodepoint(te-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,Q)),z.setCellFromCodepoint(this._activeBuffer.x++,j,G,Q),G>0)for(;--G;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,Q)}this._parser.precedingJoinState=N,this._activeBuffer.x<te&&F-H>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodepoint(this._activeBuffer.x,0,1,Q),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,H){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,H):this._parser.registerCsiHandler(D,F=>!O(F.params[0],this._optionsService.rawOptions.windowOptions)||H(F))}registerDcsHandler(D,H){return this._parser.registerDcsHandler(D,new S.DcsHandler(H))}registerEscHandler(D,H){return this._parser.registerEscHandler(D,H)}registerOscHandler(D,H){return this._parser.registerOscHandler(D,new M.OscHandler(H))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,H){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=D,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+H)}cursorUp(D){const H=this._activeBuffer.y-this._activeBuffer.scrollTop;return H>=0?this._moveCursor(0,-Math.min(H,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return H>=0?this._moveCursor(0,Math.min(H,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const H=D.params[0];return H===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:H===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=D.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=D.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const H=D.params[0];return H===1&&(this._curAttrData.bg|=536870912),H!==2&&H!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,H,F,j=!1,G=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);W.replaceCells(H,F,this._activeBuffer.getNullCell(this._eraseAttrData()),G),j&&(W.isWrapped=!1)}_resetBufferLine(D,H=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),H),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),F.isWrapped=!1)}eraseInDisplay(D,H=!1){let F;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);F<this._bufferService.rows;F++)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,H),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,H);this._dirtyRowTracker.markDirty(0);break;case 3:const j=this._activeBuffer.lines.length-this._bufferService.rows;j>0&&(this._activeBuffer.lines.trimStart(j),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-j,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-j,0),this._onScroll.fire(0))}return!0}eraseInLine(D,H=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,H);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,H)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let H=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;for(;H--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let H=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let j;for(j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-j;H--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let H=D.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let H=D.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=D.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData())),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){const H=this._parser.precedingJoinState;if(!H)return!0;const F=D.params[0]||1,j=x.UnicodeService.extractWidth(H),G=this._activeBuffer.x-j,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(G),X=new Uint32Array(W.length*F);let te=0;for(let T=0;T<W.length;){const Q=W.codePointAt(T)||0;X[te++]=Q,T+=Q>65535?2:1}let I=te;for(let T=1;T<F;++T)X.copyWithin(I,0,te),I+=te;return this.print(X,0,I),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let H=0;H<D.length;H++)switch(D.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[H]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,H){const F=this._coreService.decPrivateModes,{activeProtocol:j,activeEncoding:G}=this._coreMouseService,W=this._coreService,{buffers:X,cols:te}=this._bufferService,{active:I,alt:T}=X,Q=this._optionsService.rawOptions,z=le=>le?1:2,N=D.params[0];return $=N,ee=H?N===2?4:N===4?z(W.modes.insertMode):N===12?3:N===20?z(Q.convertEol):0:N===1?z(F.applicationCursorKeys):N===3?Q.windowOptions.setWinLines?te===80?2:te===132?1:0:0:N===6?z(F.origin):N===7?z(F.wraparound):N===8?3:N===9?z(j==="X10"):N===12?z(Q.cursorBlink):N===25?z(!W.isCursorHidden):N===45?z(F.reverseWraparound):N===66?z(F.applicationKeypad):N===67?4:N===1e3?z(j==="VT200"):N===1002?z(j==="DRAG"):N===1003?z(j==="ANY"):N===1004?z(F.sendFocus):N===1005?4:N===1006?z(G==="SGR"):N===1015?4:N===1016?z(G==="SGR_PIXELS"):N===1048?1:N===47||N===1047||N===1049?z(I===T):N===2004?z(F.bracketedPasteMode):0,W.triggerDataEvent(`${d.C0.ESC}[${H?"":"?"}${$};${ee}$y`),!0;var $,ee}_updateAttrColor(D,H,F,j,G){return H===2?(D|=50331648,D&=-16777216,D|=m.AttributeData.fromColorRGB([F,j,G])):H===5&&(D&=-50331904,D|=33554432|255&F),D}_extractColor(D,H,F){const j=[0,0,-1,0,0,0];let G=0,W=0;do{if(j[W+G]=D.params[H+W],D.hasSubParams(H+W)){const X=D.getSubParams(H+W);let te=0;do j[1]===5&&(G=1),j[W+te+1+G]=X[te];while(++te<X.length&&te+W+1+G<j.length);break}if(j[1]===5&&W+G>=2||j[1]===2&&W+G>=5)break;j[1]&&(G=1)}while(++W+H<D.length&&W+G<j.length);for(let X=2;X<j.length;++X)j[X]===-1&&(j[X]=0);switch(j[0]){case 38:F.fg=this._updateAttrColor(F.fg,j[1],j[3],j[4],j[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,j[1],j[3],j[4],j[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,j[1],j[3],j[4],j[5])}return W}_processUnderline(D,H){H.extended=H.extended.clone(),(!~D||D>5)&&(D=1),H.extended.underlineStyle=D,H.fg|=268435456,D===0&&(H.fg&=-268435457),H.updateExtended()}_processSGR0(D){D.fg=n.DEFAULT_ATTR_DATA.fg,D.bg=n.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const H=D.length;let F;const j=this._curAttrData;for(let G=0;G<H;G++)F=D.params[G],F>=30&&F<=37?(j.fg&=-50331904,j.fg|=16777216|F-30):F>=40&&F<=47?(j.bg&=-50331904,j.bg|=16777216|F-40):F>=90&&F<=97?(j.fg&=-50331904,j.fg|=16777224|F-90):F>=100&&F<=107?(j.bg&=-50331904,j.bg|=16777224|F-100):F===0?this._processSGR0(j):F===1?j.fg|=134217728:F===3?j.bg|=67108864:F===4?(j.fg|=268435456,this._processUnderline(D.hasSubParams(G)?D.getSubParams(G)[0]:1,j)):F===5?j.fg|=536870912:F===7?j.fg|=67108864:F===8?j.fg|=1073741824:F===9?j.fg|=2147483648:F===2?j.bg|=134217728:F===21?this._processUnderline(2,j):F===22?(j.fg&=-134217729,j.bg&=-134217729):F===23?j.bg&=-67108865:F===24?(j.fg&=-268435457,this._processUnderline(0,j)):F===25?j.fg&=-536870913:F===27?j.fg&=-67108865:F===28?j.fg&=-1073741825:F===29?j.fg&=2147483647:F===39?(j.fg&=-67108864,j.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):F===49?(j.bg&=-67108864,j.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?G+=this._extractColor(D,G,j):F===53?j.bg|=1073741824:F===55?j.bg&=-1073741825:F===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):F===100?(j.fg&=-67108864,j.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const H=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${H};${F}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const H=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${H};${F}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const H=D.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=H%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(D){const H=D.params[0]||1;let F;return(D.length<2||(F=D.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(D){if(!O(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const H=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:H!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:H!==0&&H!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),H!==0&&H!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:H!==0&&H!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),H!==0&&H!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const H=[],F=D.split(";");for(;F.length>1;){const j=F.shift(),G=F.shift();if(/^\d+$/.exec(j)){const W=parseInt(j);if(ie(W))if(G==="?")H.push({type:0,index:W});else{const X=(0,E.parseColor)(G);X&&H.push({type:1,index:W,color:X})}}}return H.length&&this._onColor.fire(H),!0}setHyperlink(D){const H=D.split(";");return!(H.length<2)&&(H[1]?this._createHyperlink(H[0],H[1]):!H[0]&&this._finishHyperlink())}_createHyperlink(D,H){this._getCurrentLinkId()&&this._finishHyperlink();const F=D.split(":");let j;const G=F.findIndex(W=>W.startsWith("id="));return G!==-1&&(j=F[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:j,uri:H}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,H){const F=D.split(";");for(let j=0;j<F.length&&!(H>=this._specialColors.length);++j,++H)if(F[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{const G=(0,E.parseColor)(F[j]);G&&this._onColor.fire([{type:1,index:this._specialColors[H],color:G}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const H=[],F=D.split(";");for(let j=0;j<F.length;++j)if(/^\d+$/.exec(F[j])){const G=parseInt(F[j]);ie(G)&&H.push({type:2,index:G})}return H.length&&this._onColor.fire(H),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(B[D[0]],g.CHARSETS[D[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new c.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let H=0;H<this._bufferService.rows;++H){const F=this._activeBuffer.ybase+this._activeBuffer.y+H,j=this._activeBuffer.lines.get(F);j&&(j.fill(D),j.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,H){const F=this._bufferService.buffer,j=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${G}${d.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[j.cursorStyle]-(j.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,H){this._dirtyRowTracker.markRangeDirty(D,H)}}i.InputHandler=V;let J=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,D){Y>D&&(U=Y,Y=D,D=U),Y<this.start&&(this.start=Y),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function ie(Y){return 0<=Y&&Y<256}J=f([b(0,C.IBufferService)],J)},844:(p,i)=>{function o(f){for(const b of f)b.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const b=this._disposables.indexOf(f);b!==-1&&this._disposables.splice(b,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var b;this._isDisposed||f===this._value||((b=this._value)==null||b.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(b,d,g){this._data[b]||(this._data[b]={}),this._data[b][d]=g}get(b,d){return this._data[b]?this._data[b][d]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,b,d,g,y){this._data.get(f,b)||this._data.set(f,b,new o),this._data.get(f,b).set(d,g,y)}get(f,b,d,g){var y;return(y=this._data.get(f,b))==null?void 0:y.get(d,g)}clear(){this._data.clear()}}},6114:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const b=o.match(/Version\/(\d+)/);return b===null||b.length<2?0:parseInt(b[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const b=this._getKey(f);if(b===void 0||(o=this._search(b),o===-1)||this._getKey(this._array[o])!==b)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===b);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,b){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do b(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let b=0,d=this._array.length-1;for(;d>=b;){let g=b+d>>1;const y=this._getKey(this._array[g]);if(y>f)d=g-1;else{if(!(y<f)){for(;g>0&&this._getKey(this._array[g-1])===f;)g--;return g}b=g+1}}return b}}},7226:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class b{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let k=0,v=0,n=y.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),v=Math.max(k,v),h=y.timeRemaining(),1.5*v>h)return n-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-k))}ms`),void this._start();n=h}this.clear()}}class d extends b{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const k=Date.now()+y;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}i.PriorityTaskQueue=d,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends b{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:d,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(b){const d=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),g=d==null?void 0:d.get(b.cols-1),y=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);y&&g&&(y.isWrapped=g[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&g[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new o;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,g=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=g}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),b=o(7226),d=o(3734),g=o(8437),y=o(4634),k=o(511),v=o(643),n=o(4863),h=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(l,c,m){this._hasScrollback=l,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new b.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,c){return new g.BufferLine(this._bufferService.cols,this.getNullCell(l),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const c=l+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=g.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,c){const m=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=0;const x=this._getCorrectBufferLength(c);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<l)for(let S=0;S<this.lines.length;S++)C+=+this.lines.get(S).resize(l,m);let M=0;if(this._rows<c)for(let S=this._rows;S<c;S++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(l,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+M+1?(this.ybase--,M++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(l,m)));else for(let S=this._rows;S>c;S--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const S=this.lines.length-x;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=x}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,c-1),M&&(this.y+=M),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(l,c),this._cols>l))for(let M=0;M<this.lines.length;M++)C+=+this.lines.get(M).resize(l,m);this._cols=l,this._rows=c,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,c){this._cols!==l&&(l>this._cols?this._reflowLarger(l,c):this._reflowSmaller(l,c))}_reflowLarger(l,c){const m=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(m.length>0){const C=(0,y.reflowLargerCreateNewLayout)(this.lines,m);(0,y.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(l,c,C.countRemoved)}}_reflowLargerAdjustViewport(l,c,m){const C=this.getNullCell(g.DEFAULT_ATTR_DATA);let x=m;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new g.BufferLine(l,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(l,c){const m=this.getNullCell(g.DEFAULT_ATTR_DATA),C=[];let x=0;for(let M=this.lines.length-1;M>=0;M--){let S=this.lines.get(M);if(!S||!S.isWrapped&&S.getTrimmedLength()<=l)continue;const E=[S];for(;S.isWrapped&&M>0;)S=this.lines.get(--M),E.unshift(S);const B=this.ybase+this.y;if(B>=M&&B<M+E.length)continue;const R=E[E.length-1].getTrimmedLength(),O=(0,y.reflowSmallerGetNewLineLengths)(E,this._cols,l),A=O.length-E.length;let U;U=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const V=[];for(let F=0;F<A;F++){const j=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);V.push(j)}V.length>0&&(C.push({start:M+E.length+x,newLines:V}),x+=V.length),E.push(...V);let J=O.length-1,ie=O[J];ie===0&&(J--,ie=O[J]);let Y=E.length-A-1,D=R;for(;Y>=0;){const F=Math.min(D,ie);if(E[J]===void 0)break;if(E[J].copyCellsFrom(E[Y],D-F,ie-F,F,!0),ie-=F,ie===0&&(J--,ie=O[J]),D-=F,D===0){Y--;const j=Math.max(Y,0);D=(0,y.getWrappedLineTrimmedLength)(E,j,this._cols)}}for(let F=0;F<E.length;F++)O[F]<l&&E[F].setCell(O[F],m);let H=A-U;for(;H-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+c-1)}if(C.length>0){const M=[],S=[];for(let J=0;J<this.lines.length;J++)S.push(this.lines.get(J));const E=this.lines.length;let B=E-1,R=0,O=C[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let A=0;for(let J=Math.min(this.lines.maxLength-1,E+x-1);J>=0;J--)if(O&&O.start>B+A){for(let ie=O.newLines.length-1;ie>=0;ie--)this.lines.set(J--,O.newLines[ie]);J++,M.push({index:B+1,amount:O.newLines.length}),A+=O.newLines.length,O=C[++R]}else this.lines.set(J,S[B--]);let U=0;for(let J=M.length-1;J>=0;J--)M[J].index+=U,this.lines.onInsertEmitter.fire(M[J]),U+=M[J].amount;const V=Math.max(0,E+x-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}}translateBufferLineToString(l,c,m=0,C){const x=this.lines.get(l);return x?x.translateToString(c,m,C):""}getWrappedRangeForLine(l){let c=l,m=l;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===l&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const c=new n.Marker(l);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),b=o(511),d=o(643),g=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let y=0;class k{constructor(n,h,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const c=h||b.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,c);this.length=n}get(n){const h=this._data[3*n+0],l=2097151&h;return[this._data[3*n+1],2097152&h?this._combined[n]:l?(0,g.stringFromCodePoint)(l):"",h>>22,2097152&h?this._combined[n].charCodeAt(this._combined[n].length-1):l]}set(n,h){this._data[3*n+1]=h[d.CHAR_DATA_ATTR_INDEX],h[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=h[1],this._data[3*n+0]=2097152|n|h[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=h[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const h=this._data[3*n+0];return 2097152&h?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&h}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const h=this._data[3*n+0];return 2097152&h?this._combined[n]:2097151&h?(0,g.stringFromCodePoint)(2097151&h):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,h){return y=3*n,h.content=this._data[y+0],h.fg=this._data[y+1],h.bg=this._data[y+2],2097152&h.content&&(h.combinedData=this._combined[n]),268435456&h.bg&&(h.extended=this._extendedAttrs[n]),h}setCell(n,h){2097152&h.content&&(this._combined[n]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[n]=h.extended),this._data[3*n+0]=h.content,this._data[3*n+1]=h.fg,this._data[3*n+2]=h.bg}setCellFromCodepoint(n,h,l,c){268435456&c.bg&&(this._extendedAttrs[n]=c.extended),this._data[3*n+0]=h|l<<22,this._data[3*n+1]=c.fg,this._data[3*n+2]=c.bg}addCodepointToCell(n,h,l){let c=this._data[3*n+0];2097152&c?this._combined[n]+=(0,g.stringFromCodePoint)(h):2097151&c?(this._combined[n]=(0,g.stringFromCodePoint)(2097151&c)+(0,g.stringFromCodePoint)(h),c&=-2097152,c|=2097152):c=h|4194304,l&&(c&=-12582913,c|=l<<22),this._data[3*n+0]=c}insertCells(n,h,l){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),h<this.length-n){const c=new b.CellData;for(let m=this.length-n-h-1;m>=0;--m)this.setCell(n+h+m,this.loadCell(n+m,c));for(let m=0;m<h;++m)this.setCell(n+m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(n,h,l){if(n%=this.length,h<this.length-n){const c=new b.CellData;for(let m=0;m<this.length-n-h;++m)this.setCell(n+m,this.loadCell(n+h+m,c));for(let m=this.length-h;m<this.length;++m)this.setCell(m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,l)}replaceCells(n,h,l,c=!1){if(c)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,l),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodepoint(h,0,1,l);n<h&&n<this.length;)this.isProtected(n)||this.setCell(n,l),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h,0,1,l);n<h&&n<this.length;)this.setCell(n++,l)}resize(n,h){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const c=new Uint32Array(l);c.set(this._data),this._data=c}for(let c=this.length;c<n;++c)this.setCell(c,h)}else{this._data=this._data.subarray(0,l);const c=Object.keys(this._combined);for(let C=0;C<c.length;C++){const x=parseInt(c[C],10);x>=n&&delete this._combined[x]}const m=Object.keys(this._extendedAttrs);for(let C=0;C<m.length;C++){const x=parseInt(m[C],10);x>=n&&delete this._extendedAttrs[x]}}return this.length=n,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,h=!1){if(h)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,n);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const h in n._combined)this._combined[h]=n._combined[h];this._extendedAttrs={};for(const h in n._extendedAttrs)this._extendedAttrs[h]=n._extendedAttrs[h];this.isWrapped=n.isWrapped}clone(){const n=new k(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const h in this._combined)n._combined[h]=this._combined[h];for(const h in this._extendedAttrs)n._extendedAttrs[h]=this._extendedAttrs[h];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,h,l,c,m){const C=n._data;if(m)for(let M=c-1;M>=0;M--){for(let S=0;S<3;S++)this._data[3*(l+M)+S]=C[3*(h+M)+S];268435456&C[3*(h+M)+2]&&(this._extendedAttrs[l+M]=n._extendedAttrs[h+M])}else for(let M=0;M<c;M++){for(let S=0;S<3;S++)this._data[3*(l+M)+S]=C[3*(h+M)+S];268435456&C[3*(h+M)+2]&&(this._extendedAttrs[l+M]=n._extendedAttrs[h+M])}const x=Object.keys(n._combined);for(let M=0;M<x.length;M++){const S=parseInt(x[M],10);S>=h&&(this._combined[S-h+l]=n._combined[S])}}translateToString(n,h,l,c){h=h??0,l=l??this.length,n&&(l=Math.min(l,this.getTrimmedLength())),c&&(c.length=0);let m="";for(;h<l;){const C=this._data[3*h+0],x=2097151&C,M=2097152&C?this._combined[h]:x?(0,g.stringFromCodePoint)(x):d.WHITESPACE_CELL_CHAR;if(m+=M,c)for(let S=0;S<M.length;++S)c.push(h);h+=C>>22||1}return c&&c.push(h),m}}i.BufferLine=k},4841:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(p,i)=>{function o(f,b,d){if(b===f.length-1)return f[b].getTrimmedLength();const g=!f[b].hasContent(d-1)&&f[b].getWidth(d-1)===1,y=f[b+1].getWidth(0)===2;return g&&y?d-1:d}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,b,d,g,y){const k=[];for(let v=0;v<f.length-1;v++){let n=v,h=f.get(++n);if(!h.isWrapped)continue;const l=[f.get(v)];for(;n<f.length&&h.isWrapped;)l.push(h),h=f.get(++n);if(g>=v&&g<n){v+=l.length-1;continue}let c=0,m=o(l,c,b),C=1,x=0;for(;C<l.length;){const S=o(l,C,b),E=S-x,B=d-m,R=Math.min(E,B);l[c].copyCellsFrom(l[C],x,m,R,!1),m+=R,m===d&&(c++,m=0),x+=R,x===S&&(C++,x=0),m===0&&c!==0&&l[c-1].getWidth(d-1)===2&&(l[c].copyCellsFrom(l[c-1],d-1,m++,1,!1),l[c-1].setCell(d-1,y))}l[c].replaceCells(m,d,y);let M=0;for(let S=l.length-1;S>0&&(S>c||l[S].getTrimmedLength()===0);S--)M++;M>0&&(k.push(v+l.length-M),k.push(M)),v+=l.length-1}return k},i.reflowLargerCreateNewLayout=function(f,b){const d=[];let g=0,y=b[g],k=0;for(let v=0;v<f.length;v++)if(y===v){const n=b[++g];f.onDeleteEmitter.fire({index:v-k,amount:n}),v+=n-1,k+=n,y=b[++g]}else d.push(v);return{layout:d,countRemoved:k}},i.reflowLargerApplyNewLayout=function(f,b){const d=[];for(let g=0;g<b.length;g++)d.push(f.get(b[g]));for(let g=0;g<d.length;g++)f.set(g,d[g]);f.length=b.length},i.reflowSmallerGetNewLineLengths=function(f,b,d){const g=[],y=f.map((h,l)=>o(f,l,b)).reduce((h,l)=>h+l);let k=0,v=0,n=0;for(;n<y;){if(y-n<d){g.push(y-n);break}k+=d;const h=o(f,v,b);k>h&&(k-=h,v++);const l=f[v].getWidth(k-1)===2;l&&k--;const c=l?d-1:d;g.push(c),n+=c}return g},i.getWrappedLineTrimmedLength=o},5295:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),b=o(844),d=o(9092);class g extends b.Disposable{constructor(k,v){super(),this._optionsService=k,this._bufferService=v,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,v){this._normal.resize(k,v),this._alt.resize(k,v),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}i.BufferSet=g},511:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),b=o(643),d=o(3734);class g extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const v=new g;return v.setFromCharData(k),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[b.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(k[b.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(k[b.CHAR_DATA_CHAR_INDEX].length===2){const n=k[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const h=k[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(n-55296)+h-56320+65536|k[b.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=k[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[b.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=k[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[b.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),b=o(844);class d{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,b.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}i.Marker=d,d._nextId=1},7116:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(p,i)=>{var o,f,b;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(o||(i.C0=o={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(f||(i.C1=f={})),function(d){d.ST=`${o.ESC}\\`}(b||(i.C1_ESCAPED=b={}))},7399:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(d,g,y,k){const v={type:0,cancel:!1,key:void 0},n=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?v.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?v.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?v.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(v.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:v.key=d.ctrlKey?"\b":f.C0.DEL,d.altKey&&(v.key=f.C0.ESC+v.key);break;case 9:if(d.shiftKey){v.key=f.C0.ESC+"[Z";break}v.key=f.C0.HT,v.cancel=!0;break;case 13:v.key=d.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,v.cancel=!0;break;case 27:v.key=f.C0.ESC,d.altKey&&(v.key=f.C0.ESC+f.C0.ESC),v.cancel=!0;break;case 37:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"D",v.key===f.C0.ESC+"[1;3D"&&(v.key=f.C0.ESC+(y?"b":"[1;5D"))):v.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"C",v.key===f.C0.ESC+"[1;3C"&&(v.key=f.C0.ESC+(y?"f":"[1;5C"))):v.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"A",y||v.key!==f.C0.ESC+"[1;3A"||(v.key=f.C0.ESC+"[1;5A")):v.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(d.metaKey)break;n?(v.key=f.C0.ESC+"[1;"+(n+1)+"B",y||v.key!==f.C0.ESC+"[1;3B"||(v.key=f.C0.ESC+"[1;5B")):v.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(v.key=f.C0.ESC+"[2~");break;case 46:v.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:v.key=n?f.C0.ESC+"[1;"+(n+1)+"H":g?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:v.key=n?f.C0.ESC+"[1;"+(n+1)+"F":g?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:d.shiftKey?v.type=2:d.ctrlKey?v.key=f.C0.ESC+"[5;"+(n+1)+"~":v.key=f.C0.ESC+"[5~";break;case 34:d.shiftKey?v.type=3:d.ctrlKey?v.key=f.C0.ESC+"[6;"+(n+1)+"~":v.key=f.C0.ESC+"[6~";break;case 112:v.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:v.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:v.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:v.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:v.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:v.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:v.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:v.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:v.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:v.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:v.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:v.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(y&&!k||!d.altKey||d.metaKey)!y||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?v.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(v.key=f.C0.US),d.key==="@"&&(v.key=f.C0.NUL)):d.keyCode===65&&(v.type=1);else{const h=b[d.keyCode],l=h==null?void 0:h[d.shiftKey?1:0];if(l)v.key=f.C0.ESC+l;else if(d.keyCode>=65&&d.keyCode<=90){const c=d.ctrlKey?d.keyCode-64:d.keyCode+32;let m=String.fromCharCode(c);d.shiftKey&&(m=m.toUpperCase()),v.key=f.C0.ESC+m}else if(d.keyCode===32)v.key=f.C0.ESC+(d.ctrlKey?f.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let c=d.code.slice(3,4);d.shiftKey||(c=c.toLowerCase()),v.key=f.C0.ESC+c,v.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?v.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?v.key=f.C0.NUL:d.keyCode>=51&&d.keyCode<=55?v.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?v.key=f.C0.DEL:d.keyCode===219?v.key=f.C0.ESC:d.keyCode===220?v.key=f.C0.FS:d.keyCode===221&&(v.key=f.C0.GS)}return v}},482:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,b=o.length){let d="";for(let g=f;g<b;++g){let y=o[g];y>65535?(y-=65536,d+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):d+=String.fromCharCode(y)}return d},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const b=o.length;if(!b)return 0;let d=0,g=0;if(this._interim){const y=o.charCodeAt(g++);56320<=y&&y<=57343?f[d++]=1024*(this._interim-55296)+y-56320+65536:(f[d++]=this._interim,f[d++]=y),this._interim=0}for(let y=g;y<b;++y){const k=o.charCodeAt(y);if(55296<=k&&k<=56319){if(++y>=b)return this._interim=k,d;const v=o.charCodeAt(y);56320<=v&&v<=57343?f[d++]=1024*(k-55296)+v-56320+65536:(f[d++]=k,f[d++]=v)}else k!==65279&&(f[d++]=k)}return d}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const b=o.length;if(!b)return 0;let d,g,y,k,v=0,n=0,h=0;if(this.interim[0]){let m=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let x,M=0;for(;(x=63&this.interim[++M])&&M<4;)C<<=6,C|=x;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=S-M;for(;h<E;){if(h>=b)return 0;if(x=o[h++],(192&x)!=128){h--,m=!0;break}this.interim[M++]=x,C<<=6,C|=63&x}m||(S===2?C<128?h--:f[v++]=C:S===3?C<2048||C>=55296&&C<=57343||C===65279||(f[v++]=C):C<65536||C>1114111||(f[v++]=C)),this.interim.fill(0)}const l=b-4;let c=h;for(;c<b;){for(;!(!(c<l)||128&(d=o[c])||128&(g=o[c+1])||128&(y=o[c+2])||128&(k=o[c+3]));)f[v++]=d,f[v++]=g,f[v++]=y,f[v++]=k,c+=4;if(d=o[c++],d<128)f[v++]=d;else if((224&d)==192){if(c>=b)return this.interim[0]=d,v;if(g=o[c++],(192&g)!=128){c--;continue}if(n=(31&d)<<6|63&g,n<128){c--;continue}f[v++]=n}else if((240&d)==224){if(c>=b)return this.interim[0]=d,v;if(g=o[c++],(192&g)!=128){c--;continue}if(c>=b)return this.interim[0]=d,this.interim[1]=g,v;if(y=o[c++],(192&y)!=128){c--;continue}if(n=(15&d)<<12|(63&g)<<6|63&y,n<2048||n>=55296&&n<=57343||n===65279)continue;f[v++]=n}else if((248&d)==240){if(c>=b)return this.interim[0]=d,v;if(g=o[c++],(192&g)!=128){c--;continue}if(c>=b)return this.interim[0]=d,this.interim[1]=g,v;if(y=o[c++],(192&y)!=128){c--;continue}if(c>=b)return this.interim[0]=d,this.interim[1]=g,this.interim[2]=y,v;if(k=o[c++],(192&k)!=128){c--;continue}if(n=(7&d)<<18|(63&g)<<12|(63&y)<<6|63&k,n<65536||n>1114111)continue;f[v++]=n}}return v}}},225:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;i.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let y=0;y<b.length;++y)g.fill(0,b[y][0],b[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?g[y]:function(k,v){let n,h=0,l=v.length-1;if(k<v[0][0]||k>v[l][1])return!1;for(;l>=h;)if(n=h+l>>1,k>v[n][1])h=n+1;else{if(!(k<v[n][0]))return!0;l=n-1}return!1}(y,d)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,k){let v=this.wcwidth(y),n=v===0&&k!==0;if(n){const h=f.UnicodeService.extractWidth(k);h===0?n=!1:h>v&&(v=h)}return f.UnicodeService.createPropertyValue(0,v,n)}}},5981:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),b=o(844);class d extends b.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(k)}_innerWrite(y=0,k=!0){const v=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],h=this._action(n,k);if(h){const c=m=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(v,m);return void h.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(c)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=d},5941:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function b(d,g){const y=d.toString(16),k=y.length<2?"0"+y:y;switch(g){case 4:return y[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}i.parseColor=function(d){if(!d)return;let g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const y=o.exec(g);if(y){const k=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/k*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/k*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/k*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),f.exec(g)&&[3,6,9,12].includes(g.length))){const y=g.length/3,k=[0,0,0];for(let v=0;v<3;++v){const n=parseInt(g.slice(y*v,y*v+y),16);k[v]=y===1?n<<4:y===2?n:y===3?n>>4:n>>8}return k}},i.toRgbString=function(d,g=16){const[y,k,v]=d;return`rgb:${b(y,g)}/${b(k,g)}/${b(v,g)}`}},5770:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),b=o(8742),d=o(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(k,v){this._handlers[k]===void 0&&(this._handlers[k]=[]);const n=this._handlers[k];return n.push(v),{dispose:()=>{const h=n.indexOf(v);h!==-1&&n.splice(h,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(k,v){if(this.reset(),this._ident=k,this._active=this._handlers[k]||g,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(k,v,n){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(k,v,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(k,v,n))}unhook(k,v=!0){if(this._active.length){let n=!1,h=this._active.length-1,l=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,n=v,l=this._stack.fallThrough,this._stack.paused=!1),!l&&n===!1){for(;h>=0&&(n=this._active[h].unhook(k),n!==!0);h--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,n;h--}for(;h>=0;h--)if(n=this._active[h].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",k);this._active=g,this._ident=0}};const y=new b.Params;y.addParam(0),i.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=y,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():y,this._data="",this._hitLimit=!1}put(k,v,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(k,v,n),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let v=!1;if(this._hitLimit)v=!1;else if(k&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(n=>(this._params=y,this._data="",this._hitLimit=!1,n));return this._params=y,this._data="",this._hitLimit=!1,v}}},2015:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),b=o(8742),d=o(6242),g=o(6351);class y{constructor(h){this.table=new Uint8Array(h)}setDefault(h,l){this.table.fill(h<<4|l)}add(h,l,c,m){this.table[l<<8|h]=c<<4|m}addMany(h,l,c,m){for(let C=0;C<h.length;C++)this.table[l<<8|h[C]]=c<<4|m}}i.TransitionTable=y;const k=160;i.VT500_TRANSITION_TABLE=function(){const n=new y(4095),h=Array.apply(null,Array(256)).map((M,S)=>S),l=(M,S)=>h.slice(M,S),c=l(32,127),m=l(0,24);m.push(25),m.push.apply(m,l(28,32));const C=l(0,14);let x;for(x in n.setDefault(1,0),n.addMany(c,0,2,0),C)n.addMany([24,26,153,154],x,3,0),n.addMany(l(128,144),x,3,0),n.addMany(l(144,152),x,3,0),n.add(156,x,0,0),n.add(27,x,11,1),n.add(157,x,4,8),n.addMany([152,158,159],x,0,7),n.add(155,x,11,3),n.add(144,x,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(c,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(l(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(c,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(l(64,127),3,7,0),n.addMany(l(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(l(48,60),4,8,4),n.addMany(l(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(l(32,64),6,0,6),n.add(127,6,0,6),n.addMany(l(64,127),6,0,0),n.addMany(l(32,48),3,9,5),n.addMany(l(32,48),5,9,5),n.addMany(l(48,64),5,0,6),n.addMany(l(64,127),5,7,0),n.addMany(l(32,48),4,9,5),n.addMany(l(32,48),1,9,2),n.addMany(l(32,48),2,9,2),n.addMany(l(48,127),2,10,0),n.addMany(l(48,80),1,10,0),n.addMany(l(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(l(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(l(28,32),9,0,9),n.addMany(l(32,48),9,9,12),n.addMany(l(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(l(32,128),11,0,11),n.addMany(l(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(l(28,32),10,0,10),n.addMany(l(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(l(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(l(28,32),12,0,12),n.addMany(l(32,48),12,9,12),n.addMany(l(48,64),12,0,11),n.addMany(l(64,127),12,12,13),n.addMany(l(64,127),10,12,13),n.addMany(l(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(c,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(k,0,2,0),n.add(k,8,5,8),n.add(k,6,0,6),n.add(k,11,0,11),n.add(k,13,13,13),n}();class v extends f.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new b.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,c,m)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,c)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,l=[64,126]){let c=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=h.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<h.intermediates.length;++C){const x=h.intermediates.charCodeAt(C);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=x}}if(h.final.length!==1)throw new Error("final must be a single byte");const m=h.final.charCodeAt(0);if(l[0]>m||m>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return c<<=8,c|=m,c}identToString(h){const l=[];for(;h;)l.push(String.fromCharCode(255&h)),h>>=8;return l.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,l){const c=this._identifier(h,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const m=this._escHandlers[c];return m.push(l),{dispose:()=>{const C=m.indexOf(l);C!==-1&&m.splice(C,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,l){this._executeHandlers[h.charCodeAt(0)]=l}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,l){const c=this._identifier(h);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const m=this._csiHandlers[c];return m.push(l),{dispose:()=>{const C=m.indexOf(l);C!==-1&&m.splice(C,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,l){return this._dcsParser.registerHandler(this._identifier(h),l)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,l){return this._oscParser.registerHandler(h,l)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,l,c,m,C){this._parseStack.state=h,this._parseStack.handlers=l,this._parseStack.handlerPos=c,this._parseStack.transition=m,this._parseStack.chunkPos=C}parse(h,l,c){let m,C=0,x=0,M=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,M=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&E>-1){for(;E>=0&&(m=S[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._parseStack.handlerPos=E,m}this._parseStack.handlers=[];break;case 4:if(c===!1&&E>-1){for(;E>=0&&(m=S[E](),m!==!0);E--)if(m instanceof Promise)return this._parseStack.handlerPos=E,m}this._parseStack.handlers=[];break;case 6:if(C=h[this._parseStack.chunkPos],m=this._dcsParser.unhook(C!==24&&C!==26,c),m)return m;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=h[this._parseStack.chunkPos],m=this._oscParser.end(C!==24&&C!==26,c),m)return m;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,M=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=M;S<l;++S){switch(C=h[S],x=this._transitions.table[this.currentState<<8|(C<160?C:k)],x>>4){case 2:for(let A=S+1;;++A){if(A>=l||(C=h[A])<32||C>126&&C<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=l||(C=h[A])<32||C>126&&C<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=l||(C=h[A])<32||C>126&&C<k){this._printHandler(h,S,A),S=A-1;break}if(++A>=l||(C=h[A])<32||C>126&&C<k){this._printHandler(h,S,A),S=A-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|C];let B=E?E.length-1:-1;for(;B>=0&&(m=E[B](this._params),m!==!0);B--)if(m instanceof Promise)return this._preserveStack(3,E,B,x,S),m;B<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++S<l&&(C=h[S])>47&&C<60);S--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const R=this._escHandlers[this._collect<<8|C];let O=R?R.length-1:-1;for(;O>=0&&(m=R[O](),m!==!0);O--)if(m instanceof Promise)return this._preserveStack(4,R,O,x,S),m;O<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let A=S+1;;++A)if(A>=l||(C=h[A])===24||C===26||C===27||C>127&&C<k){this._dcsParser.put(h,S,A),S=A-1;break}break;case 14:if(m=this._dcsParser.unhook(C!==24&&C!==26),m)return this._preserveStack(6,[],0,x,S),m;C===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=S+1;;A++)if(A>=l||(C=h[A])<32||C>127&&C<k){this._oscParser.put(h,S,A),S=A-1;break}break;case 6:if(m=this._oscParser.end(C!==24&&C!==26),m)return this._preserveStack(5,[],0,x,S),m;C===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}i.EscapeSequenceParser=v},6242:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),b=o(482),d=[];i.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,y){this._handlers[g]===void 0&&(this._handlers[g]=[]);const k=this._handlers[g];return k.push(y),{dispose:()=>{const v=k.indexOf(y);v!==-1&&k.splice(v,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,y,k){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(g,y,k);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(g,y,k))}start(){this.reset(),this._state=1}put(g,y,k){if(this._state!==3){if(this._state===1)for(;y<k;){const v=g[y++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&k-y>0&&this._put(g,y,k)}}end(g,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,v=this._active.length-1,n=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,k=y,n=this._stack.fallThrough,this._stack.paused=!1),!n&&k===!1){for(;v>=0&&(k=this._active[v].end(g),k!==!0);v--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,k;v--}for(;v>=0;v--)if(k=this._active[v].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",g);this._active=d,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,y,k){this._hitLimit||(this._data+=(0,b.utf32ToString)(g,y,k),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let y=!1;if(this._hitLimit)y=!1;else if(g&&(y=this._handler(this._data),y instanceof Promise))return y.then(k=>(this._data="",this._hitLimit=!1,k));return this._data="",this._hitLimit=!1,y}}},8742:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(d){const g=new f;if(!d.length)return g;for(let y=Array.isArray(d[0])?1:0;y<d.length;++y){const k=d[y];if(Array.isArray(k))for(let v=0;v<k.length;++v)g.addSubParam(k[v]);else g.addParam(k)}return g}constructor(d=32,g=32){if(this.maxLength=d,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new f(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let g=0;g<this.length;++g){d.push(this.params[g]);const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&d.push(Array.prototype.slice.call(this._subParams,y,k))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>o?o:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>o?o:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const g=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];return y-g>0?this._subParams.subarray(g,y):null}getSubParamsAll(){const d={};for(let g=0;g<this.length;++g){const y=this._subParamsIdx[g]>>8,k=255&this._subParamsIdx[g];k-y>0&&(d[g]=this._subParams.slice(y,k))}return d}addDigit(d){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,k=y[g-1];y[g-1]=~k?Math.min(10*k+d,o):d}}i.Params=f},5741:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const b={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(b),f.dispose=()=>this._wrappedAddonDispose(b),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let b=0;b<this._addons.length;b++)if(this._addons[b]===o){f=b;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),b=o(511);i.BufferApiView=class{constructor(d,g){this._buffer=d,this.type=g}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const g=this._buffer.lines.get(d);if(g)return new f.BufferLineApiView(g)}getNullCell(){return new b.CellData}}},3785:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(b){this._line=b}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(b,d){if(!(b<0||b>=this._line.length))return d?(this._line.loadCell(b,d),d):this._line.loadCell(b,new f.CellData)}translateToString(b,d,g){return this._line.translateToString(b,d,g)}}},8285:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),b=o(8460),d=o(844);class g extends d.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new b.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,b=>f(b.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(b,d)=>f(b,d.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(p,i,o){var f=this&&this.__decorate||function(n,h,l,c){var m,C=arguments.length,x=C<3?h:c===null?c=Object.getOwnPropertyDescriptor(h,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,h,l,c);else for(var M=n.length-1;M>=0;M--)(m=n[M])&&(x=(C<3?m(x):C>3?m(h,l,x):m(h,l))||x);return C>3&&x&&Object.defineProperty(h,l,x),x},b=this&&this.__param||function(n,h){return function(l,c){h(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const d=o(8460),g=o(844),y=o(5295),k=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(n,this))}resize(n,h){this.cols=n,this.rows=h,this.buffers.resize(n,h),this._onResize.fire({cols:n,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,h=!1){const l=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===n.fg&&c.getBg(0)===n.bg||(c=l.getBlankLine(n,h),this._cachedBlankLine=c),c.isWrapped=h;const m=l.ybase+l.scrollTop,C=l.ybase+l.scrollBottom;if(l.scrollTop===0){const x=l.lines.isFull;C===l.lines.length-1?x?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(C+1,0,c.clone()),x?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const x=C-m+1;l.lines.shiftElements(m+1,x-1,-1),l.lines.set(C,c.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(n,h,l){const c=this.buffer;if(n<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else n+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const m=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+n,c.ybase),0),m!==c.ydisp&&(h||this._onScroll.fire(c.ydisp))}};i.BufferService=v=f([b(0,k.IOptionsService)],v)},7994:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(p,i,o){var f=this&&this.__decorate||function(c,m,C,x){var M,S=arguments.length,E=S<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,m,C,x);else for(var B=c.length-1;B>=0;B--)(M=c[B])&&(E=(S<3?M(E):S>3?M(m,C,E):M(m,C))||E);return S>3&&E&&Object.defineProperty(m,C,E),E},b=this&&this.__param||function(c,m){return function(C,x){m(C,x,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const d=o(2585),g=o(8460),y=o(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function v(c,m){let C=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(C|=64,C|=c.action):(C|=3&c.button,4&c.button&&(C|=64),8&c.button&&(C|=128),c.action===32?C|=32:c.action!==0||m||(C|=3)),C}const n=String.fromCharCode,h={DEFAULT:c=>{const m=[v(c,!1)+32,c.col+32,c.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${v(c,!0)};${c.col};${c.row}${m}`},SGR_PIXELS:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${v(c,!0)};${c.x};${c.y}${m}`}};let l=i.CoreMouseService=class extends y.Disposable{constructor(c,m){super(),this._bufferService=c,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(k))this.addProtocol(C,k[C]);for(const C of Object.keys(h))this.addEncoding(C,h[C]);this.reset()}addProtocol(c,m){this._protocols[c]=m}addEncoding(c,m){this._encodings[c]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const m=this._encodings[this._activeEncoding](c);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,m,C){if(C){if(c.x!==m.x||c.y!==m.y)return!1}else if(c.col!==m.col||c.row!==m.row)return!1;return c.button===m.button&&c.action===m.action&&c.ctrl===m.ctrl&&c.alt===m.alt&&c.shift===m.shift}};i.CoreMouseService=l=f([b(0,d.IBufferService),b(1,d.ICoreService)],l)},6975:function(p,i,o){var f=this&&this.__decorate||function(l,c,m,C){var x,M=arguments.length,S=M<3?c:C===null?C=Object.getOwnPropertyDescriptor(c,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,c,m,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(S=(M<3?x(S):M>3?x(c,m,S):x(c,m))||S);return M>3&&S&&Object.defineProperty(c,m,S),S},b=this&&this.__param||function(l,c){return function(m,C){c(m,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const d=o(1439),g=o(8460),y=o(844),k=o(2585),v=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=i.CoreService=class extends y.Disposable{constructor(l,c,m){super(),this._bufferService=l,this._logService=c,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(n)}reset(){this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(n)}triggerDataEvent(l,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(C=>C.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(l))}};i.CoreService=h=f([b(0,k.IBufferService),b(1,k.ILogService),b(2,k.IOptionsService)],h)},9074:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),b=o(8460),d=o(844),g=o(6106);let y=0,k=0;class v extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(l=>l==null?void 0:l.marker.line),this._onDecorationRegistered=this.register(new b.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new b.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const c=new n(l);if(c){const m=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),m.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,c,m){let C=0,x=0;for(const M of this._decorations.getKeyIterator(c))C=M.options.x??0,x=C+(M.options.width??1),l>=C&&l<x&&(!m||(M.options.layer??"bottom")===m)&&(yield M)}forEachDecorationAtCell(l,c,m,C){this._decorations.forEachByKey(c,x=>{y=x.options.x??0,k=y+(x.options.width??1),l>=y&&l<k&&(!m||(x.options.layer??"bottom")===m)&&C(x)})}}i.DecorationService=v;class n extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new b.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new b.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),b=o(8343);class d{constructor(...y){this._entries=new Map;for(const[k,v]of y)this.set(k,v)}set(y,k){const v=this._entries.get(y);return this._entries.set(y,k),v}forEach(y){for(const[k,v]of this._entries.entries())y(k,v)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}i.ServiceCollection=d,i.InstantiationService=class{constructor(){this._services=new d,this._services.set(f.IInstantiationService,this)}setService(g,y){this._services.set(g,y)}getService(g){return this._services.get(g)}createInstance(g,...y){const k=(0,b.getServiceDependencies)(g).sort((h,l)=>h.index-l.index),v=[];for(const h of k){const l=this._services.get(h.id);if(!l)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${h.id}.`);v.push(l)}const n=k.length>0?k[0].index:y.length;if(y.length!==n)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${n+1} conflicts with ${y.length} static arguments`);return new g(...y,...v)}}},7866:function(p,i,o){var f=this&&this.__decorate||function(n,h,l,c){var m,C=arguments.length,x=C<3?h:c===null?c=Object.getOwnPropertyDescriptor(h,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,h,l,c);else for(var M=n.length-1;M>=0;M--)(m=n[M])&&(x=(C<3?m(x):C>3?m(h,l,x):m(h,l))||x);return C>3&&x&&Object.defineProperty(h,l,x),x},b=this&&this.__param||function(n,h){return function(l,c){h(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const d=o(844),g=o(2585),y={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let k,v=i.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),k=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let h=0;h<n.length;h++)typeof n[h]=="function"&&(n[h]=n[h]())}_log(n,h,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...l)}trace(n,...h){var l;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.trace.bind(this._optionsService.options.logger))??console.log,n,h)}debug(n,...h){var l;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.debug.bind(this._optionsService.options.logger))??console.log,n,h)}info(n,...h){var l;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.info.bind(this._optionsService.options.logger))??console.info,n,h)}warn(n,...h){var l;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.warn.bind(this._optionsService.options.logger))??console.warn,n,h)}error(n,...h){var l;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.error.bind(this._optionsService.options.logger))??console.error,n,h)}};i.LogService=v=f([b(0,g.IOptionsService)],v),i.setTraceLogger=function(n){k=n},i.traceCall=function(n,h,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(k.logLevel!==g.LogLevelEnum.TRACE)return c.apply(this,m);k.trace(`GlyphRenderer#${c.name}(${m.map(x=>JSON.stringify(x)).join(", ")})`);const C=c.apply(this,m);return k.trace(`GlyphRenderer#${c.name} return`,C),C}}},7302:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),b=o(844),d=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends b.Disposable{constructor(v){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const h in v)if(h in n)try{const l=v[h];n[h]=this._sanitizeAndValidateOption(h,l)}catch(l){console.error(l)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,b.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,n){return this.onOptionChange(h=>{h===v&&n(this.rawOptions[v])})}onMultipleOptionChange(v,n){return this.onOptionChange(h=>{v.indexOf(h)!==-1&&n()})}_setupOptions(){const v=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},n=(h,l)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);l=this._sanitizeAndValidateOption(h,l),this.rawOptions[h]!==l&&(this.rawOptions[h]=l,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const l={get:v.bind(this,h),set:n.bind(this,h)};Object.defineProperty(this.options,h,l)}}_sanitizeAndValidateOption(v,n){switch(v){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[v]),!function(h){return h==="block"||h==="underline"||h==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${v}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=g.includes(n)?n:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${v} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${v} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=y},2660:function(p,i,o){var f=this&&this.__decorate||function(y,k,v,n){var h,l=arguments.length,c=l<3?k:n===null?n=Object.getOwnPropertyDescriptor(k,v):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(y,k,v,n);else for(var m=y.length-1;m>=0;m--)(h=y[m])&&(c=(l<3?h(c):l>3?h(k,v,c):h(k,v))||c);return l>3&&c&&Object.defineProperty(k,v,c),c},b=this&&this.__param||function(y,k){return function(v,n){k(v,n,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const d=o(2585);let g=i.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const k=this._bufferService.buffer;if(y.id===void 0){const m=k.addMarker(k.ybase+k.y),C={data:y,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(C,m)),this._dataByLinkId.set(C.id,C),C.id}const v=y,n=this._getEntryIdKey(v),h=this._entriesWithId.get(n);if(h)return this.addLineToLink(h.id,k.ybase+k.y),h.id;const l=k.addMarker(k.ybase+k.y),c={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(y,k){const v=this._dataByLinkId.get(y);if(v&&v.lines.every(n=>n.line!==k)){const n=this._bufferService.buffer.addMarker(k);v.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(v,n))}}getLinkData(y){var k;return(k=this._dataByLinkId.get(y))==null?void 0:k.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,k){const v=y.lines.indexOf(k);v!==-1&&(y.lines.splice(v,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};i.OscLinkService=g=f([b(0,d.IBufferService)],g)},8343:(p,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(b){return b[f]||[]},i.createDecorator=function(b){if(i.serviceRegistry.has(b))return i.serviceRegistry.get(b);const d=function(g,y,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,n,h){n[o]===n?n[f].push({id:v,index:h}):(n[f]=[{id:v,index:h}],n[o]=n)})(d,g,k)};return d.toString=()=>b,i.serviceRegistry.set(b,d),d}},2585:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var b;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(b||(i.LogLevelEnum=b={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(p,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),b=o(225);class d{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,k,v=!1){return(16777215&y)<<3|(3&k)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const y=new b.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let k=0,v=0;const n=y.length;for(let h=0;h<n;++h){let l=y.charCodeAt(h);if(55296<=l&&l<=56319){if(++h>=n)return k+this.wcwidth(l);const C=y.charCodeAt(h);56320<=C&&C<=57343?l=1024*(l-55296)+C-56320+65536:k+=this.wcwidth(C)}const c=this.charProperties(l,v);let m=d.extractWidth(c);d.extractShouldJoin(c)&&(m-=d.extractWidth(v)),k+=m,v=c}return k}charProperties(y,k){return this._activeProvider.charProperties(y,k)}}i.UnicodeService=d}},a={};function _(p){var i=a[p];if(i!==void 0)return i.exports;var o=a[p]={exports:{}};return t[p].call(o.exports,o,o.exports,_),o.exports}var w={};return(()=>{var p=w;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const i=_(9042),o=_(3236),f=_(844),b=_(5741),d=_(8285),g=_(7975),y=_(7090),k=["cols","rows"];class v extends f.Disposable{constructor(h){super(),this._core=this.register(new o.Terminal(h)),this._addonManager=this.register(new b.AddonManager),this._publicOptions={...this._core.options};const l=m=>this._core.options[m],c=(m,C)=>{this._checkReadonlyOptions(m),this._core.options[m]=C};for(const m in this._core.options){const C={get:l.bind(this,m),set:c.bind(this,m)};Object.defineProperty(this._publicOptions,m,C)}}_checkReadonlyOptions(h){if(k.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const l in h)this._publicOptions[l]=h[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(h,l=!0){this._core.input(h,l)}resize(h,l){this._verifyIntegers(h,l),this._core.resize(h,l)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}attachCustomWheelEventHandler(h){this._core.attachCustomWheelEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){return this._checkProposedApi(),this._verifyPositiveIntegers(h.x??0,h.width??0,h.height??0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,l,c){this._verifyIntegers(h,l,c),this._core.select(h,l,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,l){this._verifyIntegers(h,l),this._core.selectLines(h,l)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,l){this._core.write(h,l)}writeln(h,l){this._core.write(h),this._core.write(`\r
`,l)}paste(h){this._core.paste(h)}refresh(h,l){this._verifyIntegers(h,l),this._core.refresh(h,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(const l of h)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const l of h)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}p.Terminal=v})(),w})())})(Vs);var Un=Vs.exports,Gs={exports:{}};(function(r,e){(function(t,a){r.exports=a()})(self,()=>(()=>{var t={};return(()=>{var a=t;Object.defineProperty(a,"__esModule",{value:!0}),a.FitAddon=void 0,a.FitAddon=class{activate(_){this._terminal=_}dispose(){}fit(){const _=this.proposeDimensions();if(!_||!this._terminal||isNaN(_.cols)||isNaN(_.rows))return;const w=this._terminal._core;this._terminal.rows===_.rows&&this._terminal.cols===_.cols||(w._renderService.clear(),this._terminal.resize(_.cols,_.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const _=this._terminal._core,w=_._renderService.dimensions;if(w.css.cell.width===0||w.css.cell.height===0)return;const p=this._terminal.options.scrollback===0?0:_.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),b=window.getComputedStyle(this._terminal.element),d=o-(parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("padding-bottom"))),g=f-(parseInt(b.getPropertyValue("padding-right"))+parseInt(b.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(g/w.css.cell.width)),rows:Math.max(1,Math.floor(d/w.css.cell.height))}}}})(),t})())})(Gs);var Nn=Gs.exports,Js={exports:{}};(function(r,e){(function(t,a){r.exports=a()})(self,()=>(()=>{var t={6:(p,i)=>{function o(b){try{const d=new URL(b),g=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return b.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(b,d,g,y={}){this._terminal=b,this._regex=d,this._handler=g,this._options=y}provideLinks(b,d){const g=f.computeLink(b,this._regex,this._terminal,this._handler);d(this._addCallbacks(g))}_addCallbacks(b){return b.map(d=>(d.leave=this._options.leave,d.hover=(g,y)=>{if(this._options.hover){const{range:k}=d;this._options.hover(g,y,k)}},d))}};class f{static computeLink(d,g,y,k){const v=new RegExp(g.source,(g.flags||"")+"g"),[n,h]=f._getWindowedLineStrings(d-1,y),l=n.join("");let c;const m=[];for(;c=v.exec(l);){const C=c[0];if(!o(C))continue;const[x,M]=f._mapStrIdx(y,h,0,c.index),[S,E]=f._mapStrIdx(y,x,M,C.length);if(x===-1||M===-1||S===-1||E===-1)continue;const B={start:{x:M+1,y:x+1},end:{x:E,y:S+1}};m.push({range:B,text:C,activate:k})}return m}static _getWindowedLineStrings(d,g){let y,k=d,v=d,n=0,h="";const l=[];if(y=g.buffer.active.getLine(d)){const c=y.translateToString(!0);if(y.isWrapped&&c[0]!==" "){for(n=0;(y=g.buffer.active.getLine(--k))&&n<2048&&(h=y.translateToString(!0),n+=h.length,l.push(h),y.isWrapped&&h.indexOf(" ")===-1););l.reverse()}for(l.push(c),n=0;(y=g.buffer.active.getLine(++v))&&y.isWrapped&&n<2048&&(h=y.translateToString(!0),n+=h.length,l.push(h),h.indexOf(" ")===-1););}return[l,k]}static _mapStrIdx(d,g,y,k){const v=d.buffer.active,n=v.getNullCell();let h=y;for(;k;){const l=v.getLine(g);if(!l)return[-1,-1];for(let c=h;c<l.length;++c){l.getCell(c,n);const m=n.getChars();if(n.getWidth()&&(k-=m.length||1,c===l.length-1&&m==="")){const C=v.getLine(g+1);C&&C.isWrapped&&(C.getCell(0,n),n.getWidth()===2&&(k+=1))}if(k<0)return[g,c]}g++,h=0}return[g,h]}}i.LinkComputer=f}},a={};function _(p){var i=a[p];if(i!==void 0)return i.exports;var o=a[p]={exports:{}};return t[p](o,o.exports,_),o.exports}var w={};return(()=>{var p=w;Object.defineProperty(p,"__esModule",{value:!0}),p.WebLinksAddon=void 0;const i=_(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(b,d){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}p.WebLinksAddon=class{constructor(b=f,d={}){this._handler=b,this._options=d}activate(b){this._terminal=b;const d=this._options,g=d.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,g,this._handler,d))}dispose(){var b;(b=this._linkProvider)==null||b.dispose()}}})(),w})())})(Js);var Kn=Js.exports;function ni(r){let e,t,a,_,w,p,i,o,f,b,d,g=r[1].name+"",y,k,v,n=hi(r[1].size)+"",h,l,c,m,C,x,M,S=r[3]&&oi(r),E=r[2]==="pending"&&li(r),B=r[2]==="accepting"&&ai(),R=r[2]==="completed"&&ci(r);return{c(){e=L("div"),t=L("div"),a=L("div"),a.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',_=P(),w=L("div"),p=L("div"),i=L("div"),o=L("span"),o.textContent="📄",f=P(),b=L("div"),d=L("span"),y=Z(g),k=P(),v=L("span"),h=Z(n),l=Z(" 字节"),c=P(),m=L("div"),S&&S.c(),C=P(),E&&E.c(),x=P(),B&&B.c(),M=P(),R&&R.c(),s(a,"class","zmodem-download-header"),s(o,"class","zmodem-download-icon"),s(d,"class","zmodem-download-name"),s(v,"class","zmodem-download-size"),s(b,"class","zmodem-download-details"),s(i,"class","zmodem-download-file"),s(p,"class","zmodem-download-info"),s(m,"class","zmodem-download-actions"),s(w,"class","zmodem-download-body"),s(t,"class","zmodem-download-content"),s(e,"class","zmodem-download-modal")},m(O,A){q(O,e,A),u(e,t),u(t,a),u(t,_),u(t,w),u(w,p),u(p,i),u(i,o),u(i,f),u(i,b),u(b,d),u(d,y),u(b,k),u(b,v),u(v,h),u(v,l),u(w,c),u(w,m),S&&S.m(m,null),u(m,C),E&&E.m(m,null),u(m,x),B&&B.m(m,null),u(m,M),R&&R.m(m,null)},p(O,A){A[0]&2&&g!==(g=O[1].name+"")&&ue(y,g),A[0]&2&&n!==(n=hi(O[1].size)+"")&&ue(h,n),O[3]?S?S.p(O,A):(S=oi(O),S.c(),S.m(m,C)):S&&(S.d(1),S=null),O[2]==="pending"?E?E.p(O,A):(E=li(O),E.c(),E.m(m,x)):E&&(E.d(1),E=null),O[2]==="accepting"?B||(B=ai(),B.c(),B.m(m,M)):B&&(B.d(1),B=null),O[2]==="completed"?R?R.p(O,A):(R=ci(O),R.c(),R.m(m,null)):R&&(R.d(1),R=null)},d(O){O&&K(e),S&&S.d(),E&&E.d(),B&&B.d(),R&&R.d()}}}function oi(r){let e,t,a;return{c(){e=L("div"),t=Z("❌ "),a=Z(r[3]),s(e,"class","zmodem-error-message")},m(_,w){q(_,e,w),u(e,t),u(e,a)},p(_,w){w[0]&8&&ue(a,_[3])},d(_){_&&K(e)}}}function li(r){let e,t,a,_,w,p,i,o;return{c(){e=L("p"),e.textContent="服务器正在发送文件，是否接收？",t=P(),a=L("div"),_=L("button"),_.textContent="拒绝",w=P(),p=L("button"),p.textContent="接收文件",s(e,"class","zmodem-download-prompt"),s(_,"class","zmodem-download-btn zmodem-btn-reject"),s(p,"class","zmodem-download-btn zmodem-btn-accept"),s(a,"class","zmodem-download-buttons")},m(f,b){q(f,e,b),q(f,t,b),q(f,a,b),u(a,_),u(a,w),u(a,p),i||(o=[re(_,"click",r[6]),re(p,"click",r[5])],i=!0)},p:Ee,d(f){f&&(K(e),K(t),K(a)),i=!1,Be(o)}}}function ai(r){let e;return{c(){e=L("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',s(e,"class","zmodem-downloading")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function ci(r){let e,t,a,_,w,p=(r[4]||r[1].name)+"",i;return{c(){e=L("div"),t=L("span"),t.textContent="✓",a=P(),_=L("span"),w=Z("文件接收完成，已保存到："),i=Z(p),s(t,"class","zmodem-success-icon"),s(e,"class","zmodem-completed")},m(o,f){q(o,e,f),u(e,t),u(e,a),u(e,_),u(_,w),u(_,i)},p(o,f){f[0]&18&&p!==(p=(o[4]||o[1].name)+"")&&ue(i,p)},d(o){o&&K(e)}}}function Vn(r){let e,t,a,_=r[1]&&ni(r);return{c(){e=L("div"),e.innerHTML="",t=P(),_&&_.c(),a=kt(),s(e,"class","terminal-container svelte-14g4vw6")},m(w,p){q(w,e,p),r[16](e),q(w,t,p),_&&_.m(w,p),q(w,a,p)},p(w,p){w[1]?_?_.p(w,p):(_=ni(w),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i:Ee,o:Ee,d(w){w&&(K(e),K(t),K(a)),r[16](null),_&&_.d(w)}}}function qn(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),a=window.URL.createObjectURL(t),_=document.createElement("a");_.href=a,_.download=e,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(a),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function Gn(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function Jn(r){const e=[];let t=0;for await(const w of r)e.push(w),t+=w.length;const a=new Uint8Array(t);let _=0;for(const w of e)a.set(w,_),_+=w.length;return a}async function Xn(r,e){const t=await Jn(r),{SaveBinaryFile:a}=window.wailsBindings||{};if(typeof a=="function"){const _=btoa(Gn(t));return await a(e,_)}return qn(t,e),null}function hi(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function Yn(r,e,t){let{sessionId:a=null}=e,{onData:_=null}=e,{onResize:w=null}=e,{onZModemTransfer:p=null}=e,i,o,f,b=null,d=null,g=null,y=!1,k=null,v=!1,n=null,h="pending",l=null,c=null,m=null,C=fn(nr);const x={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},M={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},S=nr.subscribe(G=>{C=G,o&&(o.options.theme=C==="light"?M:x)});or(async()=>{o=new Un.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:C==="light"?M:x,allowProposedApi:!0,scrollback:1e3,convertEol:!1,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),f=new Nn.FitAddon,o.loadAddon(f),o.loadAddon(new Kn.WebLinksAddon),o.open(i),f.fit(),o.attachCustomKeyEventHandler(W=>{if(W.metaKey&&W.key.toLowerCase()==="c"&&!W.shiftKey&&!W.ctrlKey){if(o.hasSelection()){const X=o.getSelection();return navigator.clipboard.writeText(X).catch(te=>{console.error("Failed to copy:",te)}),!1}return!0}if(W.ctrlKey&&!W.metaKey&&W.key.toLowerCase()==="c"&&!W.shiftKey){if(o.hasSelection()){const X=o.getSelection();return navigator.clipboard.writeText(X).catch(te=>{console.error("Failed to copy:",te)}),!1}return!0}return W.metaKey&&W.key.toLowerCase()==="v"&&!W.shiftKey&&!W.ctrlKey?(W.preventDefault(),navigator.clipboard.readText().then(X=>{X&&_&&a&&_(a,X)}).catch(X=>{console.error("Failed to read clipboard:",X)}),!1):W.ctrlKey&&!W.metaKey&&W.key.toLowerCase()==="v"&&!W.shiftKey?(W.preventDefault(),navigator.clipboard.readText().then(X=>{X&&_&&a&&_(a,X)}).catch(X=>{console.error("Failed to read clipboard:",X)}),!1):!0});try{const W=await Cr(()=>import("./index2.js").then(X=>X.i),[]);b=W.default||W,d=new b.Sentry({to_terminal:X=>{o&&o.write(new Uint8Array(X))},sender:X=>{if(a){if(p){p(a,new Uint8Array(X));return}if(_){let te="";for(let I=0;I<X.length;I++)te+=String.fromCharCode(X[I]);_(a,te)}}},on_detect:X=>{if(console.log("ZMODEM detected:",X.type),console.log("Detection object:",X),g=X.confirm(),console.log("ZMODEM confirmed, type:",g.type,"has zsession:",!!g),!g){console.error("ERROR: zsession is null after confirm()");return}v=!0,o&&(o.options.disableStdin=!0),g.type==="receive"?(console.log("Calling handleZModemReceive for download"),O(g)):(console.log("Calling handleZModemSend for upload"),V(g))},on_retract:()=>{console.log("ZMODEM retracted"),g=null,v=!1,o&&(o.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(W){console.error("Failed to initialize ZMODEM:",W)}o.onData(W=>{_&&a&&_(a,W)}),o.onResize(({cols:W,rows:X})=>{w&&a&&w(a,W,X)});const G=new ResizeObserver(()=>{f.fit()});return G.observe(i),()=>{G.disconnect()}}),Er(()=>{S&&S(),o&&o.dispose()});function E(G){m||(m=document.createElement("div"),m.className="zmodem-progress-modal",m.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${G}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(m))}function B(G,W,X,te,I){if(!m)return;const T=Math.min(100,Math.round(te/I*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${X}`,document.getElementById("zmodem-progress-bar").style.width=`${T}%`,document.getElementById("zmodem-progress-text").textContent=`${T}%`,document.getElementById("zmodem-files-progress").textContent=`${G+1} / ${W}`}function R(){m&&(document.body.removeChild(m),m=null)}function O(G){t(1,n=null),k=null,t(2,h="pending"),t(3,l=null),t(4,c=null),G.on("offer",W=>{const X=W.get_details();k=W,t(1,n=X),t(2,h="pending"),t(3,l=null),t(4,c=null)}),G.on("session_end",()=>{k=null,g=null,v=!1,o&&(o.options.disableStdin=!1),h==="accepting"?(t(2,h="completed"),setTimeout(()=>{t(1,n=null),t(2,h="pending"),t(4,c=null)},1500)):(t(1,n=null),t(2,h="pending"),t(4,c=null))}),G.start()}async function A(){if(k){t(2,h="accepting"),t(3,l=null);try{await k.accept();const G=k.get_payloads(),W=k.get_details().name;t(4,c=await Xn(G,W)),k=null,t(2,h="completed")}catch(G){console.error("接收文件失败:",G),t(3,l=G.message||String(G)),t(2,h="pending")}}}function U(){k&&k.skip(),k=null,t(1,n=null),t(2,h="pending"),t(3,l=null),t(4,c=null)}async function V(G){console.log("handleZModemSend called, session:",G);const W=document.createElement("input");return W.type="file",W.multiple=!0,new Promise(X=>{W.onchange=async te=>{const I=Array.from(te.target.files);if(console.log("Files selected:",I.length,I.map(T=>T.name)),I.length===0){console.log("No files selected, closing session"),G.close(),y=!1,v=!1,o&&(o.options.disableStdin=!1),X();return}try{E(I.length),console.log("Starting to send files...");for(let T=0;T<I.length;T++){const Q=I[T],z={name:Q.name,size:Q.size,mtime:new Date(Q.lastModified)};console.log(`Sending file ${T+1}/${I.length}:`,Q.name,Q.size),await J(G,Q,z,T,I.length)}console.log("All files sent, closing session"),await G.close(),setTimeout(()=>{y=!1,R(),v=!1,o&&(o.options.disableStdin=!1),X()},500)}catch(T){console.error("发送文件失败:",T),console.error("Error details:",T.stack),G.close(),y=!1,R(),v=!1,o&&(o.options.disableStdin=!1),X()}},W.click()})}async function J(G,W,X,te,I){return new Promise((T,Q)=>{G.send_offer(X).then(z=>{if(!z){T();return}const N=new FileReader,$=8192;N.onload=ee=>{const le=ee.target.result;let ae=0,ce=0;function he(){if(ae<le.byteLength){const fe=new Uint8Array(le,ae,Math.min($,le.byteLength-ae));z.send(fe),ae+=$,ce+=fe.byteLength,B(te,I,W.name,ce,W.size),setTimeout(he,0)}else z.end().then(T).catch(Q)}he()},N.onerror=()=>{Q(new Error("读取文件失败"))},N.readAsArrayBuffer(W)})})}function ie(G){if(!o)return;let W;if(typeof G=="string"?W=new Uint8Array(G.split("").map(X=>X.charCodeAt(0))):G instanceof Uint8Array?W=G:W=new Uint8Array(G),d&&!y)try{d.consume(W);return}catch(X){console.warn("ZMODEM consume failed:",X),g=null,k=null,v=!1,y=!1,o&&(o.options.disableStdin=!1)}o.write(W)}function Y(G){o&&o.writeln(G)}function D(){o&&o.clear()}function H(){o&&o.focus()}function F(){return o?{cols:o.cols,rows:o.rows}:{cols:80,rows:24}}function j(G){at[G?"unshift":"push"](()=>{i=G,t(0,i)})}return r.$$set=G=>{"sessionId"in G&&t(7,a=G.sessionId),"onData"in G&&t(8,_=G.onData),"onResize"in G&&t(9,w=G.onResize),"onZModemTransfer"in G&&t(10,p=G.onZModemTransfer)},[i,n,h,l,c,A,U,a,_,w,p,ie,Y,D,H,F,j]}class Zn extends ft{constructor(e){super(),ut(this,e,Yn,Vn,ht,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function di(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k;const v=r[6].default,n=_n(v,r,r[5],null);return{c(){e=L("div"),t=L("div"),a=P(),_=L("div"),w=L("div"),p=L("h2"),i=Z(r[2]),o=P(),f=L("button"),f.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=P(),d=L("div"),n&&n.c(),s(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),s(p,"class","text-base font-semibold text-gray-900 dark:text-white"),s(f,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(w,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex-1 overflow-y-auto p-6"),s(_,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center"),s(e,"role","dialog"),s(e,"aria-modal","true")},m(h,l){q(h,e,l),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),u(p,i),u(w,o),u(w,f),u(_,b),u(_,d),n&&n.m(d,null),g=!0,y||(k=[re(f,"click",function(){Ht(r[1])&&r[1].apply(this,arguments)}),re(e,"click",r[3])],y=!0)},p(h,l){r=h,(!g||l&4)&&ue(i,r[2]),n&&n.p&&(!g||l&32)&&gn(n,v,r,r[5],g?pn(v,r[5],l,null):mn(r[5]),null)},i(h){g||(Te(n,h),g=!0)},o(h){Re(n,h),g=!1},d(h){h&&K(e),n&&n.d(h),y=!1,Be(k)}}}function Qn(r){let e,t,a=r[0]&&di(r);return{c(){a&&a.c(),e=kt()},m(_,w){a&&a.m(_,w),q(_,e,w),t=!0},p(_,[w]){_[0]?a?(a.p(_,w),w&1&&Te(a,1)):(a=di(_),a.c(),Te(a,1),a.m(e.parentNode,e)):a&&(St(),Re(a,1,1,()=>{a=null}),Ct())},i(_){t||(Te(a),t=!0)},o(_){Re(a),t=!1},d(_){_&&K(e),a&&a.d(_)}}}function $n(r,e,t){let{$$slots:a={},$$scope:_}=e,{isOpen:w=!1}=e,{onClose:p=()=>{}}=e,{title:i=""}=e,{size:o="md"}=e;function f(d){d.target===d.currentTarget&&p()}function b(d){d.key==="Escape"&&w&&p()}return r.$$set=d=>{"isOpen"in d&&t(0,w=d.isOpen),"onClose"in d&&t(1,p=d.onClose),"title"in d&&t(2,i=d.title),"size"in d&&t(4,o=d.size),"$$scope"in d&&t(5,_=d.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&(w?document.addEventListener("keydown",b):document.removeEventListener("keydown",b))},[w,p,i,f,o,_,a]}class Lr extends ft{constructor(e){super(),ut(this,e,$n,Qn,ht,{isOpen:0,onClose:1,title:2,size:4})}}function eo(r){let e,t,a,_,w,p,i,o,f,b,d,g,y;return{c(){e=L("div"),t=L("p"),a=Z(r[2]),_=P(),w=L("div"),p=L("button"),i=Z(r[4]),o=P(),f=L("button"),b=Z(r[3]),s(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),s(p,"type","button"),s(p,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(f,"type","button"),s(f,"class",d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),s(w,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(k,v){q(k,e,v),u(e,t),u(t,a),u(e,_),u(e,w),u(w,p),u(p,i),u(w,o),u(w,f),u(f,b),g||(y=[re(p,"click",function(){Ht(r[6])&&r[6].apply(this,arguments)}),re(f,"click",function(){Ht(r[5])&&r[5].apply(this,arguments)})],g=!0)},p(k,v){r=k,v&4&&ue(a,r[2]),v&16&&ue(i,r[4]),v&8&&ue(b,r[3]),v&128&&d!==(d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&s(f,"class",d)},d(k){k&&K(e),g=!1,Be(y)}}}function to(r){let e,t,a;function _(p){r[8](p)}let w={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[eo]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>wt(e,"isOpen",_)),{c(){Xe(e.$$.fragment)},m(p,i){qe(e,p,i),a=!0},p(p,[i]){const o={};i&64&&(o.onClose=p[6]),i&2&&(o.title=p[1]),i&764&&(o.$$scope={dirty:i,ctx:p}),!t&&i&1&&(t=!0,o.isOpen=p[0],yt(()=>t=!1)),e.$set(o)},i(p){a||(Te(e.$$.fragment,p),a=!0)},o(p){Re(e.$$.fragment,p),a=!1},d(p){Ge(e,p)}}}function ro(r,e,t){let{isOpen:a=!1}=e,{title:_=""}=e,{message:w=""}=e,{confirmText:p="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:o=()=>{}}=e,{onCancel:f=()=>{}}=e,{type:b="default"}=e;function d(g){a=g,t(0,a)}return r.$$set=g=>{"isOpen"in g&&t(0,a=g.isOpen),"title"in g&&t(1,_=g.title),"message"in g&&t(2,w=g.message),"confirmText"in g&&t(3,p=g.confirmText),"cancelText"in g&&t(4,i=g.cancelText),"onConfirm"in g&&t(5,o=g.onConfirm),"onCancel"in g&&t(6,f=g.onCancel),"type"in g&&t(7,b=g.type)},[a,_,w,p,i,o,f,b,d]}class Ir extends ft{constructor(e){super(),ut(this,e,ro,to,ht,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function io(r){window.runtime.LogPrint(r)}function so(r){window.runtime.LogTrace(r)}function no(r){window.runtime.LogDebug(r)}function oo(r){window.runtime.LogInfo(r)}function lo(r){window.runtime.LogWarning(r)}function ao(r){window.runtime.LogError(r)}function co(r){window.runtime.LogFatal(r)}function zr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function fr(r,e){return zr(r,e,-1)}function ho(r,...e){return window.runtime.EventsOff(r,...e)}function uo(){return window.runtime.EventsOffAll()}function fo(r,e){return zr(r,e,1)}function _o(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function po(){window.runtime.WindowReload()}function go(){window.runtime.WindowReloadApp()}function mo(r){window.runtime.WindowSetAlwaysOnTop(r)}function vo(){window.runtime.WindowSetSystemDefaultTheme()}function bo(){window.runtime.WindowSetLightTheme()}function yo(){window.runtime.WindowSetDarkTheme()}function wo(){window.runtime.WindowCenter()}function ko(r){window.runtime.WindowSetTitle(r)}function So(){window.runtime.WindowFullscreen()}function Co(){window.runtime.WindowUnfullscreen()}function xo(){return window.runtime.WindowIsFullscreen()}function Eo(){return window.runtime.WindowGetSize()}function Lo(r,e){window.runtime.WindowSetSize(r,e)}function Mo(r,e){window.runtime.WindowSetMaxSize(r,e)}function Do(r,e){window.runtime.WindowSetMinSize(r,e)}function To(r,e){window.runtime.WindowSetPosition(r,e)}function Bo(){return window.runtime.WindowGetPosition()}function Ao(){window.runtime.WindowHide()}function Ro(){window.runtime.WindowShow()}function Oo(){window.runtime.WindowMaximise()}function Po(){window.runtime.WindowToggleMaximise()}function Ho(){window.runtime.WindowUnmaximise()}function Io(){return window.runtime.WindowIsMaximised()}function Fo(){window.runtime.WindowMinimise()}function Wo(){window.runtime.WindowUnminimise()}function jo(r,e,t,a){window.runtime.WindowSetBackgroundColour(r,e,t,a)}function zo(){return window.runtime.ScreenGetAll()}function Uo(){return window.runtime.WindowIsMinimised()}function No(){return window.runtime.WindowIsNormal()}function Ko(r){window.runtime.BrowserOpenURL(r)}function Vo(){return window.runtime.Environment()}function qo(){window.runtime.Quit()}function Go(){window.runtime.Hide()}function Jo(){window.runtime.Show()}function Xo(){return window.runtime.ClipboardGetText()}function Yo(r){return window.runtime.ClipboardSetText(r)}function Zo(r,e){return window.runtime.OnFileDrop(r,e)}function Qo(){return window.runtime.OnFileDropOff()}function $o(){return window.runtime.CanResolveFilePaths()}function el(r){return window.runtime.ResolveFilePaths(r)}const Xs=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:Ko,CanResolveFilePaths:$o,ClipboardGetText:Xo,ClipboardSetText:Yo,Environment:Vo,EventsEmit:_o,EventsOff:ho,EventsOffAll:uo,EventsOn:fr,EventsOnMultiple:zr,EventsOnce:fo,Hide:Go,LogDebug:no,LogError:ao,LogFatal:co,LogInfo:oo,LogPrint:io,LogTrace:so,LogWarning:lo,OnFileDrop:Zo,OnFileDropOff:Qo,Quit:qo,ResolveFilePaths:el,ScreenGetAll:zo,Show:Jo,WindowCenter:wo,WindowFullscreen:So,WindowGetPosition:Bo,WindowGetSize:Eo,WindowHide:Ao,WindowIsFullscreen:xo,WindowIsMaximised:Io,WindowIsMinimised:Uo,WindowIsNormal:No,WindowMaximise:Oo,WindowMinimise:Fo,WindowReload:po,WindowReloadApp:go,WindowSetAlwaysOnTop:mo,WindowSetBackgroundColour:jo,WindowSetDarkTheme:yo,WindowSetLightTheme:bo,WindowSetMaxSize:Mo,WindowSetMinSize:Do,WindowSetPosition:To,WindowSetSize:Lo,WindowSetSystemDefaultTheme:vo,WindowSetTitle:ko,WindowShow:Ro,WindowToggleMaximise:Po,WindowUnfullscreen:Co,WindowUnmaximise:Ho,WindowUnminimise:Wo},Symbol.toStringTag,{value:"Module"})),{Map:Ys}=Fs;function ui(r,e,t){const a=r.slice();return a[44]=e[t],a[45]=e,a[46]=t,a}function fi(r,e,t){const a=r.slice();return a[44]=e[t],a}function tl(r){let e=[],t=new Ys,a,_=ze(r[1]);const w=p=>p[44].sessionId;for(let p=0;p<_.length;p+=1){let i=fi(r,_,p),o=w(i);t.set(o,e[p]=_i(o,i))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();a=kt()},m(p,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(p,i);q(p,a,i)},p(p,i){i[0]&29666&&(_=ze(p[1]),e=Tt(e,i,w,1,p,_,t,a.parentNode,It,_i,a,fi))},d(p){p&&K(a);for(let i=0;i<e.length;i+=1)e[i].d(p)}}}function rl(r){let e;return{c(){e=L("div"),e.textContent="没有活动连接",s(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function il(r){let e,t=(r[44].tabName||r[44].connection.name)+"",a;return{c(){e=L("span"),a=Z(t),s(e,"class","text-sm font-medium truncate flex-1")},m(_,w){q(_,e,w),u(e,a)},p(_,w){w[0]&2&&t!==(t=(_[44].tabName||_[44].connection.name)+"")&&ue(a,t)},d(_){_&&K(e)}}}function sl(r){let e,t,a;return{c(){e=L("input"),s(e,"type","text"),s(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),s(e,"focus","")},m(_,w){q(_,e,w),we(e,r[6]),t||(a=[re(e,"input",r[24]),re(e,"blur",r[13]),re(e,"keydown",r[14])],t=!0)},p(_,w){w[0]&64&&e.value!==_[6]&&we(e,_[6])},d(_){_&&K(e),t=!1,Be(a)}}}function _i(r,e){let t,a,_,w,p,i,o,f,b,d;function g(c,m){return c[5]===c[44].sessionId?sl:il}let y=g(e),k=y(e);function v(...c){return e[25](e[44],...c)}function n(){return e[26](e[44])}function h(){return e[27](e[44])}function l(...c){return e[28](e[44],...c)}return{key:r,first:null,c(){t=L("div"),a=L("div"),w=P(),k.c(),p=P(),i=L("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=P(),s(a,"class",_=Yr(`w-2 h-2 rounded-full flex-shrink-0 ${e[44].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),s(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),s(t,"class",f="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[44].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),s(t,"role","button"),s(t,"tabindex","0"),this.first=t},m(c,m){q(c,t,m),u(t,a),u(t,w),k.m(t,null),u(t,p),u(t,i),u(t,o),b||(d=[re(i,"click",v),re(t,"click",n),re(t,"dblclick",h),re(t,"keydown",l)],b=!0)},p(c,m){e=c,m[0]&2&&_!==(_=Yr(`w-2 h-2 rounded-full flex-shrink-0 ${e[44].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&s(a,"class",_),y===(y=g(e))&&k?k.p(e,m):(k.d(1),k=y(e),k&&(k.c(),k.m(t,p))),m[0]&130&&f!==(f="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[44].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&s(t,"class",f)},d(c){c&&K(t),k.d(),b=!1,Be(d)}}}function nl(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',s(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,a){q(t,e,a)},p:Ee,i:Ee,o:Ee,d(t){t&&K(e)}}}function ol(r){let e,t=[],a=new Ys,_,w=ze(r[1]);const p=i=>i[44].sessionId;for(let i=0;i<w.length;i+=1){let o=ui(r,w,i),f=p(o);a.set(f,t[i]=pi(f,o))}return{c(){e=L("div");for(let i=0;i<t.length;i+=1)t[i].c();s(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,o){q(i,e,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);_=!0},p(i,o){o[0]&1835139&&(w=ze(i[1]),St(),t=Tt(t,o,p,1,i,w,a,e,Sn,pi,null,ui),Ct())},i(i){if(!_){for(let o=0;o<w.length;o+=1)Te(t[o]);_=!0}},o(i){for(let o=0;o<t.length;o+=1)Re(t[o]);_=!1},d(i){i&&K(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function ll(r){let e=r[44].connection.username+"",t,a,_=r[44].connection.host+"",w,p,i=r[44].connection.port+"",o;return{c(){t=Z(e),a=Z("@"),w=Z(_),p=Z(":"),o=Z(i)},m(f,b){q(f,t,b),q(f,a,b),q(f,w,b),q(f,p,b),q(f,o,b)},p(f,b){b[0]&2&&e!==(e=f[44].connection.username+"")&&ue(t,e),b[0]&2&&_!==(_=f[44].connection.host+"")&&ue(w,_),b[0]&2&&i!==(i=f[44].connection.port+"")&&ue(o,i)},d(f){f&&(K(t),K(a),K(w),K(p),K(o))}}}function al(r){let e,t=r[44].connection.name!=="Local Shell"?` (${r[44].connection.name})`:"",a;return{c(){e=Z("本地终端"),a=Z(t)},m(_,w){q(_,e,w),q(_,a,w)},p(_,w){w[0]&2&&t!==(t=_[44].connection.name!=="Local Shell"?` (${_[44].connection.name})`:"")&&ue(a,t)},d(_){_&&(K(e),K(a))}}}function pi(r,e){let t,a,_,w,p,i,o,f,b=e[44],d,g,y;function k(m,C){return m[44].type==="local"?al:ll}let v=k(e),n=v(e);const h=()=>e[29](f,b),l=()=>e[29](null,b);let c={sessionId:e[44].sessionId,onData:e[18],onResize:e[20],onZModemTransfer:e[19]};return f=new Zn({props:c}),h(),{key:r,first:null,c(){t=L("div"),a=L("div"),_=L("div"),n.c(),w=P(),p=L("div"),p.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=P(),o=L("div"),Xe(f.$$.fragment),d=P(),s(_,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),s(p,"class","flex items-center gap-1"),s(a,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),s(o,"class","flex-1 overflow-hidden"),s(t,"class",g="terminal-wrapper "+(e[7]===e[44].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(m,C){q(m,t,C),u(t,a),u(a,_),n.m(_,null),u(a,w),u(a,p),u(t,i),u(t,o),qe(f,o,null),u(t,d),y=!0},p(m,C){e=m,v===(v=k(e))&&n?n.p(e,C):(n.d(1),n=v(e),n&&(n.c(),n.m(_,null))),b!==e[44]&&(l(),b=e[44],h());const x={};C[0]&2&&(x.sessionId=e[44].sessionId),f.$set(x),(!y||C[0]&130&&g!==(g="terminal-wrapper "+(e[7]===e[44].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&s(t,"class",g)},i(m){y||(Te(f.$$.fragment,m),y=!0)},o(m){Re(f.$$.fragment,m),y=!1},d(m){m&&K(t),n.d(),l(),Ge(f)}}}function gi(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x;return m=bn(r[32][0]),{c(){e=L("div"),t=L("div"),a=L("div"),a.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',_=P(),w=L("div"),p=L("label"),i=L("input"),o=P(),f=L("div"),f.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',b=P(),d=L("label"),g=L("input"),y=P(),k=L("div"),k.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',v=P(),n=L("div"),h=L("button"),h.textContent="取消",l=P(),c=L("button"),c.textContent="确定",s(a,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),s(i,"type","radio"),i.__value="powershell",we(i,i.__value),s(i,"class","w-4 h-4 text-purple-600"),s(p,"class","flex items-center space-x-3 cursor-pointer"),s(g,"type","radio"),g.__value="cmd",we(g,g.__value),s(g,"class","w-4 h-4 text-purple-600"),s(d,"class","flex items-center space-x-3 cursor-pointer"),s(w,"class","px-6 py-4 space-y-3"),s(h,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),s(c,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),s(n,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),s(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),s(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),m.p(i,g)},m(M,S){q(M,e,S),u(e,t),u(t,a),u(t,_),u(t,w),u(w,p),u(p,i),i.checked=i.__value===r[4],u(p,o),u(p,f),u(w,b),u(w,d),u(d,g),g.checked=g.__value===r[4],u(d,y),u(d,k),u(t,v),u(t,n),u(n,h),u(n,l),u(n,c),C||(x=[re(i,"change",r[31]),re(g,"change",r[33]),re(h,"click",r[17]),re(c,"click",r[16])],C=!0)},p(M,S){S[0]&16&&(i.checked=i.__value===M[4]),S[0]&16&&(g.checked=g.__value===M[4])},d(M){M&&K(e),m.r(),C=!1,Be(x)}}}function cl(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v;function n(E,B){return E[1].length===0?rl:tl}let h=n(r),l=h(r);const c=[ol,nl],m=[];function C(E,B){return E[1].length>0?0:1}p=C(r),i=m[p]=c[p](r);function x(E){r[30](E)}let M={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[10],onCancel:r[11]};r[2]!==void 0&&(M.isOpen=r[2]),f=new Ir({props:M}),at.push(()=>wt(f,"isOpen",x));let S=r[3]&&gi(r);return{c(){e=L("div"),t=L("div"),l.c(),a=P(),_=L("button"),_.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',w=P(),i.c(),o=P(),Xe(f.$$.fragment),d=P(),S&&S.c(),g=kt(),s(_,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),s(_,"title","打开本地终端"),s(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(E,B){q(E,e,B),u(e,t),l.m(t,null),u(t,a),u(t,_),u(e,w),m[p].m(e,null),q(E,o,B),qe(f,E,B),q(E,d,B),S&&S.m(E,B),q(E,g,B),y=!0,k||(v=re(_,"click",r[15]),k=!0)},p(E,B){h===(h=n(E))&&l?l.p(E,B):(l.d(1),l=h(E),l&&(l.c(),l.m(t,a)));let R=p;p=C(E),p===R?m[p].p(E,B):(St(),Re(m[R],1,1,()=>{m[R]=null}),Ct(),i=m[p],i?i.p(E,B):(i=m[p]=c[p](E),i.c()),Te(i,1),i.m(e,null));const O={};!b&&B[0]&4&&(b=!0,O.isOpen=E[2],yt(()=>b=!1)),f.$set(O),E[3]?S?S.p(E,B):(S=gi(E),S.c(),S.m(g.parentNode,g)):S&&(S.d(1),S=null)},i(E){y||(Te(i),Te(f.$$.fragment,E),y=!0)},o(E){Re(i),Re(f.$$.fragment,E),y=!1},d(E){E&&(K(e),K(o),K(d),K(g)),l.d(),m[p].d(),Ge(f,E),S&&S.d(E),k=!1,v()}}}function hl(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r,0),t.set(e,r.length),t}function dl(r){const e=[27,93,55,59];let t=-1;for(let _=r.length-e.length;_>=0;_--)if(r[_]===e[0]&&r[_+1]===e[1]&&r[_+2]===e[2]&&r[_+3]===e[3]){t=_;break}return t===-1?r.slice(Math.max(0,r.length-(e.length-1))):ul(r,t+e.length)===-1?r.slice(t):r.slice(Math.max(0,r.length-(e.length-1)))}function ul(r,e){for(let t=e;t<r.length;t++)if(r[t]===7||r[t]===27&&t+1<r.length&&r[t+1]===92)return t;return-1}function fl(r){const e=[],t=[27,93,55,59];let a=0;for(;a<=r.length-t.length;){if(r[a]===t[0]&&r[a+1]===t[1]&&r[a+2]===t[2]&&r[a+3]===t[3]){a+=t.length;const _=a;let w=-1;for(;a<r.length;){if(r[a]===7){w=a,a+=1;break}if(r[a]===27&&a+1<r.length&&r[a+1]===92){w=a,a+=2;break}a+=1}if(w>_){const p=_l(r.slice(_,w)),i=pl(p);i&&e.push(i)}continue}a+=1}return e}function _l(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function pl(r){if(!r)return"";let e=r;if(e.startsWith("file://")){e=e.slice(7);const t=e.indexOf("/");if(t===-1)return"/";e=e.slice(t)}else e.startsWith("file:")&&(e=e.slice(5));try{e=decodeURIComponent(e)}catch{return e}return e}function Fr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function mi(r){return btoa(Fr(r))}function gl(r,e,t){let a,_;gt(r,Ut,N=>t(7,a=N)),gt(r,Mt,N=>t(23,_=N));let w={},p=[],i=new Map,o=new Map,f=!1,b=null,d=!1,g="powershell";async function y(N){var ne;if(console.log("Connecting to:",N),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:$,GetPassword:ee,HasPassword:le,SavePassword:ae}=window.wailsBindings;if(typeof $!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let ce="",he="";if(N.auth_type==="key")he=prompt(`连接到 ${N.name}
如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：`)||"",ce=N.key_path||"";else try{if(typeof le=="function"&&await le(N.id))ce=await ee(N.id),console.log("Using saved password");else if(ce=prompt(`连接到 ${N.name}
请输入密码：`)||"",ce&&confirm("是否保存密码以便下次自动连接？")&&typeof ae=="function")try{await ae(N.id,ce),console.log("Password saved successfully")}catch(pe){console.error("Failed to save password:",pe)}}catch(ge){console.error("Failed to get saved password:",ge),ce=prompt(`连接到 ${N.name}
请输入密码：`)||""}if(!ce){console.log("Connection cancelled - no auth value provided");return}const fe=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",N.host,N.port,N.username,"auth_type:",N.auth_type);const Se={sessionId:fe,connection:N,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};Mt.update(ge=>(ge.set(fe,Se),ge)),Ut.set(fe),await kr(),await new Promise(ge=>setTimeout(ge,50));let xe=(ne=w[fe])==null?void 0:ne.getSize();if(xe||(xe={cols:80,rows:24},console.warn("Terminal not ready, using default size:",xe)),console.log("Subscribing to events for session:",fe),H(fe),await new Promise(ge=>setTimeout(ge,100)),!w[fe]){console.error("Terminal component not ready after delay");return}const me=w[fe];if(!me){console.error("Failed to get terminal reference for session:",fe);return}console.log("Terminal ready, attempting to connect...");const ke=N.auth_type==="key"?"SSH key":"password";me.writeln(`正在连接 ${N.username}@${N.host}:${N.port} (${ke})...`),me.writeln("");try{await $(fe,N.host,N.port,N.username,N.auth_type||"password",ce,he,xe.cols,xe.rows),Se.connected=!0,Mt.update(ge=>(ge.set(fe,Se),ge)),setTimeout(()=>{me.focus()},100)}catch(ge){console.error("Failed to connect:",ge),me&&me.writeln(`\r
连接失败: ${ge.message||ge}`),await k(fe)}}async function k(N){const $=i.get(N);$&&($(),i.delete(N)),delete w[N];const{CloseSSH:ee}=window.wailsBindings||{};if(typeof ee=="function")try{await ee(N)}catch(ae){console.error("Failed to close session:",ae)}Mt.update(ae=>(ae.delete(N),ae));const le=Array.from(_.keys());a===N&&(le.length>0?Ut.set(le[0]):Ut.set(null))}function v(N){_.has(N)&&(Ut.set(N),setTimeout(()=>{const $=w[N];if($){$.focus();const ee=$.getSize(),{ResizeSSH:le}=window.wailsBindings||{};typeof le=="function"&&le(N,ee.cols,ee.rows).catch(console.error)}},50))}function n(N,$){$.stopPropagation();const ee=_.get(N);ee&&(ee.connected?(b=N,t(2,f=!0)):k(N))}function h(){b&&(k(b),b=null),t(2,f=!1)}function l(){b=null,t(2,f=!1)}function c(N,$){const ee=_.get(N);ee&&(ee.tabName=$.trim(),Mt.update(le=>(le.set(N,ee),le)))}let m=null,C="";function x(N){const $=_.get(N);$&&(t(5,m=N),t(6,C=$.tabName||$.connection.name))}function M(){m&&C.trim()&&c(m,C.trim()),t(5,m=null),t(6,C="")}function S(){t(5,m=null),t(6,C="")}function E(N){N.key==="Enter"?M():N.key==="Escape"&&S()}async function B(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:N,SendSSHData:$,ResizeSSH:ee}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(3,d=!0);return}await R("")}async function R(N){var he;const{ConnectLocalShell:$}=window.wailsBindings,ee=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,le={sessionId:ee,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};Mt.update(fe=>(fe.set(ee,le),fe)),Ut.set(ee),await kr(),await new Promise(fe=>setTimeout(fe,50));let ae=(he=w[ee])==null?void 0:he.getSize();if(ae||(ae={cols:80,rows:24},console.warn("Terminal not ready, using default size:",ae)),console.log("Subscribing to local events for session:",ee),U(ee),await new Promise(fe=>setTimeout(fe,100)),!w[ee]){console.error("Terminal component not ready after delay");return}const ce=w[ee];if(!ce){console.error("Failed to get terminal reference for session:",ee);return}console.log("Terminal ready, starting local shell..."),ce.writeln(`正在启动本地终端${N?` (${N})`:""}...`),ce.writeln("");try{await $(ee,N,ae.cols,ae.rows),le.connected=!0,Mt.update(fe=>(fe.set(ee,le),fe)),setTimeout(()=>{ce.focus()},100)}catch(fe){console.error("Failed to start local shell:",fe),ce&&ce.writeln(`\r
启动本地终端失败: ${fe.message||fe}`),await k(ee)}}function O(){t(3,d=!1),R(g)}function A(){t(3,d=!1)}function U(N){const $=`local:output:${N}`,ee=fr($,le=>{const ae=w[N];if(ae){const ce=atob(le),he=new Uint8Array(ce.length);for(let fe=0;fe<ce.length;fe++)he[fe]=ce.charCodeAt(fe);V(N,he,!0),ae.write(he)}});i.set(N,ee)}function V(N,$,ee){if(!N||!$||$.length===0||ee)return;const{paths:le,pending:ae}=J(N,$);if(o.set(N,ae),le.length===0)return;const ce=le[le.length-1];if(!ce)return;const{UpdateCurrentPath:he}=window.wailsBindings||{};typeof he=="function"&&he(N,ce).catch(fe=>{console.error("Failed to update current path:",fe)})}function J(N,$){const ee=o.get(N),le=ee&&ee.length>0?hl(ee,$):$,ae=fl(le),ce=dl(le);return{paths:ae,pending:ce}}function ie(N,$){if(!_.has(N))return;const ee=_.get(N),{SendSSHData:le,SendLocalShellData:ae}=window.wailsBindings||{};ee&&ee.type==="local"?typeof ae=="function"&&ae(N,$).catch(ce=>{console.error("Failed to send local shell data:",ce)}):typeof le=="function"&&le(N,$).catch(ce=>{console.error("Failed to send SSH data:",ce)})}function Y(N,$){if(!_.has(N))return;const ee=_.get(N),{SendSSHData:le,SendSSHDataBinary:ae,SendLocalShellData:ce,SendLocalShellDataBinary:he}=window.wailsBindings||{};if(ee&&ee.type==="local"){if(typeof he=="function"){const fe=mi($);he(N,fe).catch(Se=>{console.error("Failed to send local shell binary data:",Se)})}else if(typeof ce=="function"){const fe=Fr($);ce(N,fe).catch(Se=>{console.error("Failed to send local shell data:",Se)})}}else if(typeof ae=="function"){const fe=mi($);ae(N,fe).catch(Se=>{console.error("Failed to send SSH binary data:",Se)})}else if(typeof le=="function"){const fe=Fr($);le(N,fe).catch(Se=>{console.error("Failed to send SSH data:",Se)})}}function D(N,$,ee){if(!_.has(N))return;const le=_.get(N),{ResizeSSH:ae,ResizeLocalShell:ce}=window.wailsBindings||{};le&&le.type==="local"?typeof ce=="function"&&ce(N,$,ee).catch(he=>{console.error("Failed to resize local terminal:",he)}):typeof ae=="function"&&ae(N,$,ee).catch(he=>{console.error("Failed to resize SSH terminal:",he)})}function H(N){const $=`ssh:output:${N}`,ee=fr($,le=>{const ae=w[N];if(ae){const ce=atob(le),he=new Uint8Array(ce.length);for(let fe=0;fe<ce.length;fe++)he[fe]=ce.charCodeAt(fe);V(N,he,!1),ae.write(he)}});i.set(N,ee)}Er(()=>{i.forEach(N=>{N()})}),or(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=w,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",p),await kr(),a&&w[a]&&setTimeout(()=>{w[a].focus()},100)});const F=[[]];function j(){C=this.value,t(6,C)}const G=(N,$)=>n(N.sessionId,$),W=N=>v(N.sessionId),X=N=>x(N.sessionId),te=(N,$)=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),v(N.sessionId))};function I(N,$){at[N?"unshift":"push"](()=>{w[$.sessionId]=N,t(0,w)})}function T(N){f=N,t(2,f)}function Q(){g=this.__value,t(4,g)}function z(){g=this.__value,t(4,g)}return r.$$.update=()=>{r.$$.dirty[0]&8388608&&t(1,p=_?Array.from(_.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=w)},[w,p,f,d,g,m,C,a,v,n,h,l,x,M,E,B,O,A,ie,Y,D,y,H,_,j,G,W,X,te,I,T,Q,F,z]}class ml extends ft{constructor(e){super(),ut(this,e,gl,cl,ht,{handleConnect:21,subscribeToOutput:22},null,[-1,-1])}get handleConnect(){return this.$$.ctx[21]}get subscribeToOutput(){return this.$$.ctx[22]}}function vl(r){return window.go.main.App.AddConnection(r)}function bl(r,e){return window.go.main.App.CalculateHash(r,e)}function Ur(r){return window.go.main.App.CancelTransfer(r)}function yl(r,e){return window.go.main.App.ChangeDirectory(r,e)}function wl(r){return window.go.main.App.CloseSSH(r)}function kl(r,e,t,a){return window.go.main.App.ConnectLocalShell(r,e,t,a)}function Sl(r,e,t,a,_,w,p,i,o){return window.go.main.App.ConnectSSH(r,e,t,a,_,w,p,i,o)}function Cl(r,e){return window.go.main.App.CreateDirectory(r,e)}function xl(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function El(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function Ll(r){return window.go.main.App.DecodeBase64(r)}function Ml(r,e,t,a){return window.go.main.App.DecryptText(r,e,t,a)}function Dl(r,e){return window.go.main.App.DeleteFile(r,e)}function Zs(r,e){return window.go.main.App.DeleteFiles(r,e)}function Tl(r){return window.go.main.App.DeletePassword(r)}function Bl(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function Qs(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function Al(r){return window.go.main.App.EncodeBase64(r)}function Rl(r,e,t,a){return window.go.main.App.EncryptText(r,e,t,a)}function Ol(r){return window.go.main.App.EscapeJSON(r)}function Pl(r){return window.go.main.App.FormatJSON(r)}function Hl(){return window.go.main.App.GenerateUUIDv4()}function Il(r){return window.go.main.App.GetConnection(r)}function Fl(){return window.go.main.App.GetConnections()}function Wl(r){return window.go.main.App.GetCurrentPath(r)}function jl(){return window.go.main.App.GetCurrentTimestamp()}function zl(){return window.go.main.App.GetCurrentTimestampMs()}function Ul(r,e){return window.go.main.App.GetFileInfo(r,e)}function Nl(r){return window.go.main.App.GetFileManagerSettings(r)}function Kl(r){return window.go.main.App.GetMonitoringData(r)}function Vl(r){return window.go.main.App.GetPassword(r)}function ql(){return window.go.main.App.GetSettings()}function Gl(r){return window.go.main.App.GetTransferStatus(r)}function Jl(r){return window.go.main.App.Greet(r)}function Xl(r){return window.go.main.App.HasPassword(r)}function $s(r,e){return window.go.main.App.ListFiles(r,e)}function Yl(){return window.go.main.App.ListSSHSessions()}function Zl(r){return window.go.main.App.MinifyJSON(r)}function Ql(r){return window.go.main.App.RemoveConnection(r)}function en(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function $l(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function ea(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function ta(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function ra(r,e){return window.go.main.App.SavePassword(r,e)}function tn(r,e,t,a,_){return window.go.main.App.SearchDirectories(r,e,t,a,_)}function rn(){return window.go.main.App.SelectDownloadDirectory()}function ia(){return window.go.main.App.SelectSSHKeyFile()}function sn(){return window.go.main.App.SelectUploadFiles()}function sa(r,e){return window.go.main.App.SendLocalShellData(r,e)}function na(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function oa(r,e){return window.go.main.App.SendSSHData(r,e)}function la(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function aa(){return window.go.main.App.ShowAboutDialog()}function ca(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function ha(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function da(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function ua(r,e,t,a,_,w){return window.go.main.App.TestConnection(r,e,t,a,_,w)}function fa(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function _a(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function pa(r){return window.go.main.App.UpdateConnection(r)}function ga(r,e){return window.go.main.App.UpdateCurrentPath(r,e)}function ma(r,e){return window.go.main.App.UpdateFileManagerSettings(r,e)}function va(r){return window.go.main.App.UpdateSettings(r)}function nn(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function ba(r){return window.go.main.App.ValidateJSON(r)}const ya=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:vl,CalculateHash:bl,CancelTransfer:Ur,ChangeDirectory:yl,CloseSSH:wl,ConnectLocalShell:kl,ConnectSSH:Sl,CreateDirectory:Cl,DateTimeToTimestamp:xl,DateTimeToTimestampMs:El,DecodeBase64:Ll,DecryptText:Ml,DeleteFile:Dl,DeleteFiles:Zs,DeletePassword:Tl,DownloadFile:Bl,DownloadFiles:Qs,EncodeBase64:Al,EncryptText:Rl,EscapeJSON:Ol,FormatJSON:Pl,GenerateUUIDv4:Hl,GetConnection:Il,GetConnections:Fl,GetCurrentPath:Wl,GetCurrentTimestamp:jl,GetCurrentTimestampMs:zl,GetFileInfo:Ul,GetFileManagerSettings:Nl,GetMonitoringData:Kl,GetPassword:Vl,GetSettings:ql,GetTransferStatus:Gl,Greet:Jl,HasPassword:Xl,ListFiles:$s,ListSSHSessions:Yl,MinifyJSON:Zl,RemoveConnection:Ql,RenameFile:en,ResizeLocalShell:$l,ResizeSSH:ea,SaveBinaryFile:ta,SavePassword:ra,SearchDirectories:tn,SelectDownloadDirectory:rn,SelectSSHKeyFile:ia,SelectUploadFiles:sn,SendLocalShellData:sa,SendLocalShellDataBinary:na,SendSSHData:oa,SendSSHDataBinary:la,ShowAboutDialog:aa,ShowErrorDialog:ca,ShowMessageDialog:ha,ShowQuestionDialog:da,TestConnection:ua,TimestampToDateTime:fa,TimestampToDateTimeMs:_a,UpdateConnection:pa,UpdateCurrentPath:ga,UpdateFileManagerSettings:ma,UpdateSettings:va,UploadFiles:nn,ValidateJSON:ba},Symbol.toStringTag,{value:"Module"})),wa={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:ka,set:Sa,update:Rt}=Kt(wa),Mr={subscribe:ka,set:Sa,addTransfer:r=>Rt(e=>{const t=e.transfers.filter(_=>_.status!=="running");let a=e.transfers;if(t.length>=e.maxHistory){const _=t.length-e.maxHistory+1,w=t.slice(0,_).map(p=>p.id);a=e.transfers.filter(p=>!w.includes(p.id))}return{...e,transfers:[r,...a]}}),updateTransfer:(r,e)=>Rt(t=>({...t,transfers:t.transfers.map(a=>a.id===r?{...a,...e}:a)})),cancelTransfer:r=>Rt(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>Rt(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>Rt(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>Rt(r=>({...r,transfers:[]})),togglePanel:()=>Rt(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>Rt(e=>({...e,isPanelOpen:r})),setActiveTab:r=>Rt(e=>({...e,activeTab:r}))};function Pt(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function vi(r){return r?`${Pt(r)}/s`:"0 B/s"}function yr(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const Ca=Bt(Mr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),xa=Bt(Mr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));Bt(Mr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(w=>w.status==="running");if(e.length===0)return 0;let t=0,a=0;return e.forEach(w=>{const p=w.totalBytes||0,i=w.bytesSent||0;t+=p,a+=i}),t>0?a/t*100:e.reduce((w,p)=>p.totalBytes?w+p.bytesSent/p.totalBytes*100:w+(p.percentage||0),0)/e.length});const bt=Mr;function bi(r){let e,t;return{c(){e=L("p"),t=Z(r[2]),s(e,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed")},m(a,_){q(a,e,_),u(e,t)},p(a,_){_&4&&ue(t,a[2])},d(a){a&&K(e)}}}function Ea(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k=r[2]&&bi(r);return{c(){e=L("div"),k&&k.c(),t=P(),a=L("input"),_=P(),w=L("div"),p=L("button"),i=Z(r[5]),o=P(),f=L("button"),b=Z(r[4]),s(a,"type","text"),s(a,"placeholder",r[3]),s(a,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(p,"type","button"),s(p,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(f,"type","button"),f.disabled=d=!r[8].trim(),s(f,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(w,"class","flex gap-2 pt-2"),s(e,"class","space-y-4")},m(v,n){q(v,e,n),k&&k.m(e,null),u(e,t),u(e,a),r[13](a),we(a,r[8]),u(e,_),u(e,w),u(w,p),u(p,i),u(w,o),u(w,f),u(f,b),g||(y=[re(a,"input",r[14]),re(a,"keydown",r[10]),re(p,"click",function(){Ht(r[6])&&r[6].apply(this,arguments)}),re(f,"click",r[9])],g=!0)},p(v,n){r=v,r[2]?k?k.p(r,n):(k=bi(r),k.c(),k.m(e,t)):k&&(k.d(1),k=null),n&8&&s(a,"placeholder",r[3]),n&256&&a.value!==r[8]&&we(a,r[8]),n&32&&ue(i,r[5]),n&16&&ue(b,r[4]),n&256&&d!==(d=!r[8].trim())&&(f.disabled=d)},d(v){v&&K(e),k&&k.d(),r[13](null),g=!1,Be(y)}}}function La(r){let e,t,a;function _(p){r[15](p)}let w={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[Ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>wt(e,"isOpen",_)),{c(){Xe(e.$$.fragment)},m(p,i){qe(e,p,i),a=!0},p(p,[i]){const o={};i&64&&(o.onClose=p[6]),i&2&&(o.title=p[1]),i&66044&&(o.$$scope={dirty:i,ctx:p}),!t&&i&1&&(t=!0,o.isOpen=p[0],yt(()=>t=!1)),e.$set(o)},i(p){a||(Te(e.$$.fragment,p),a=!0)},o(p){Re(e.$$.fragment,p),a=!1},d(p){Ge(e,p)}}}function Ma(r,e,t){let{isOpen:a=!1}=e,{title:_=""}=e,{message:w=""}=e,{defaultValue:p=""}=e,{placeholder:i=""}=e,{confirmText:o="确定"}=e,{cancelText:f="取消"}=e,{onConfirm:b=()=>{}}=e,{onCancel:d=()=>{}}=e,g="",y;function k(){g.trim()&&b(g.trim())}function v(c){c.key==="Enter"&&k()}function n(c){at[c?"unshift":"push"](()=>{y=c,t(7,y)})}function h(){g=this.value,t(8,g),t(0,a),t(11,p)}function l(c){a=c,t(0,a)}return r.$$set=c=>{"isOpen"in c&&t(0,a=c.isOpen),"title"in c&&t(1,_=c.title),"message"in c&&t(2,w=c.message),"defaultValue"in c&&t(11,p=c.defaultValue),"placeholder"in c&&t(3,i=c.placeholder),"confirmText"in c&&t(4,o=c.confirmText),"cancelText"in c&&t(5,f=c.cancelText),"onConfirm"in c&&t(12,b=c.onConfirm),"onCancel"in c&&t(6,d=c.onCancel)},r.$$.update=()=>{r.$$.dirty&2049&&a&&t(8,g=p),r.$$.dirty&129&&a&&y&&setTimeout(()=>{y==null||y.focus(),y==null||y.select()},0)},[a,_,w,i,o,f,d,y,g,k,v,p,b,n,h,l]}class Da extends ft{constructor(e){super(),ut(this,e,Ma,La,ht,{isOpen:0,title:1,message:2,defaultValue:11,placeholder:3,confirmText:4,cancelText:5,onConfirm:12,onCancel:6})}}const{Map:Dr}=Fs;function yi(r,e,t){const a=r.slice();return a[113]=e[t],a[115]=t,a}function wi(r,e,t){const a=r.slice();return a[116]=e[t],a[115]=t,a}function ki(r,e,t){const a=r.slice();return a[118]=e[t],a[115]=t,a}function Si(r,e,t){const a=r.slice();return a[113]=e[t],a[115]=t,a}function Ci(r){let e,t,a,_,w,p,i=r[4]?"跟踪中":"已暂停",o,f,b,d;return{c(){e=L("button"),t=oe("svg"),a=oe("path"),_=oe("path"),w=P(),p=L("span"),o=Z(i),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(t,"class","w-3 h-3"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[6],s(e,"class",f=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${r[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`),s(e,"title","切换目录跟踪")},m(g,y){q(g,e,y),u(e,t),u(t,a),u(t,_),u(e,w),u(e,p),u(p,o),b||(d=re(e,"click",r[65]),b=!0)},p(g,y){y[0]&16&&i!==(i=g[4]?"跟踪中":"已暂停")&&ue(o,i),y[0]&64&&(e.disabled=g[6]),y[0]&16&&f!==(f=`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${g[4]?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`)&&s(e,"class",f)},d(g){g&&K(e),b=!1,d()}}}function Ta(r){let e,t,a;function _(i,o){return i[3]==="/"?Ra:Aa}let w=_(r),p=w(r);return{c(){e=L("span"),p.c(),s(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),s(e,"title","点击编辑路径")},m(i,o){q(i,e,o),p.m(e,null),t||(a=re(e,"click",r[51]),t=!0)},p(i,o){w===(w=_(i))&&p?p.p(i,o):(p.d(1),p=w(i),p&&(p.c(),p.m(e,null)))},d(i){i&&K(e),p.d(),t=!1,a()}}}function Ba(r){let e,t,a,_,w;return{c(){e=L("span"),e.textContent="/",t=P(),a=L("input"),s(e,"class","text-gray-400 dark:text-gray-500"),s(a,"type","text"),s(a,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(p,i){q(p,e,i),q(p,t,i),q(p,a,i),we(a,r[21]),_||(w=[re(a,"input",r[68]),re(a,"keydown",r[69]),re(a,"blur",r[52]),Is(on.call(null,a))],_=!0)},p(p,i){i[0]&2097152&&a.value!==p[21]&&we(a,p[21])},d(p){p&&(K(e),K(t),K(a)),_=!1,Be(w)}}}function Aa(r){let e=r[3].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=Z(e)},m(a,_){q(a,t,_)},p(a,_){_[0]&8&&e!==(e=a[3].split("/").filter(Boolean).join(" / ")+"")&&ue(t,e)},d(a){a&&K(t)}}}function Ra(r){let e;return{c(){e=Z("/")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function xi(r){let e,t,a,_,w,p;function i(b,d){return b[28].length>0?Pa:Oa}let o=i(r),f=o(r);return{c(){e=L("div"),t=L("div"),a=L("input"),_=P(),f.c(),s(a,"type","text"),s(a,"placeholder","搜索历史..."),s(a,"class","w-full px-2 py-1 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"),s(t,"class","p-2 border-b border-gray-200 dark:border-gray-700"),s(e,"class","absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg w-64 max-h-64 overflow-y-auto z-10")},m(b,d){q(b,e,d),u(e,t),u(t,a),we(a,r[2]),u(e,_),f.m(e,null),w||(p=re(a,"input",r[71]),w=!0)},p(b,d){d[0]&4&&a.value!==b[2]&&we(a,b[2]),o===(o=i(b))&&f?f.p(b,d):(f.d(1),f=o(b),f&&(f.c(),f.m(e,null)))},d(b){b&&K(e),f.d(),w=!1,p()}}}function Oa(r){let e,t=r[2]?"无匹配的历史":"暂无历史记录",a;return{c(){e=L("div"),a=Z(t),s(e,"class","px-3 py-2 text-xs text-gray-500 dark:text-gray-400")},m(_,w){q(_,e,w),u(e,a)},p(_,w){w[0]&4&&t!==(t=_[2]?"无匹配的历史":"暂无历史记录")&&ue(a,t)},d(_){_&&K(e)}}}function Pa(r){let e=[],t=new Dr,a,_=ze(r[28]);const w=p=>p[113];for(let p=0;p<_.length;p+=1){let i=Si(r,_,p),o=w(i);t.set(o,e[p]=Ei(o,i))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();a=kt()},m(p,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(p,i);q(p,a,i)},p(p,i){i[0]&268435972|i[1]&131072&&(_=ze(p[28]),e=Tt(e,i,w,1,p,_,t,a.parentNode,It,Ei,a,Si))},d(p){p&&K(a);for(let i=0;i<e.length;i+=1)e[i].d(p)}}}function Ei(r,e){let t,a=e[113]+"",_,w,p,i;function o(){return e[72](e[113])}return{key:r,first:null,c(){t=L("button"),_=Z(a),w=P(),s(t,"class","w-full text-left px-3 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-purple-50 dark:hover:bg-purple-900/30 truncate"),this.first=t},m(f,b){q(f,t,b),u(t,_),u(t,w),p||(i=re(t,"click",o),p=!0)},p(f,b){e=f,b[0]&268435456&&a!==(a=e[113]+"")&&ue(_,a)},d(f){f&&K(t),p=!1,i()}}}function Li(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n=r[13]&&Mi();function h(m,C){if(C[0]&10240&&(d=null),m[12].length>0)return Ia;if(d==null&&(d=!!(m[11].trim()&&!m[13])),d)return Ha}let l=h(r,[-1,-1,-1,-1]),c=l&&l(r);return{c(){e=L("div"),t=L("div"),a=L("div"),_=L("div"),w=L("input"),p=P(),i=oe("svg"),o=oe("path"),f=P(),n&&n.c(),b=P(),c&&c.c(),g=P(),y=L("button"),y.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',s(w,"type","text"),s(w,"placeholder","搜索文件夹名称..."),s(w,"class","w-full px-3 py-2 pl-9 text-xs bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),s(i,"class","w-4 h-4 text-amber-500 absolute left-3 top-1/2 transform -translate-y-1/2"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(_,"class","relative"),s(a,"class","relative flex-1"),s(y,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(y,"title","取消"),s(t,"class","flex items-center gap-2"),s(e,"class","mt-2 relative")},m(m,C){q(m,e,C),u(e,t),u(t,a),u(a,_),u(_,w),we(w,r[11]),u(_,p),u(_,i),u(i,o),u(_,f),n&&n.m(_,null),u(a,b),c&&c.m(a,null),u(t,g),u(t,y),k||(v=[re(w,"input",r[73]),re(w,"keydown",r[55]),re(w,"input",r[54]),Is(on.call(null,w)),re(y,"click",r[56])],k=!0)},p(m,C){C[0]&2048&&w.value!==m[11]&&we(w,m[11]),m[13]?n||(n=Mi(),n.c(),n.m(_,null)):n&&(n.d(1),n=null),l===(l=h(m,C))&&c?c.p(m,C):(c&&c.d(1),c=l&&l(m),c&&(c.c(),c.m(a,null)))},d(m){m&&K(e),n&&n.d(),c&&c.d(),k=!1,Be(v)}}}function Mi(r){let e,t,a;return{c(){e=oe("svg"),t=oe("circle"),a=oe("path"),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(a,"class","opacity-75"),s(a,"fill","currentColor"),s(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","w-4 h-4 text-amber-500 absolute right-3 top-1/2 transform -translate-y-1/2 animate-spin"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(_,w){q(_,e,w),u(e,t),u(e,a)},d(_){_&&K(e)}}}function Ha(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center">未找到匹配的文件夹</div>',s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function Ia(r){let e,t,a,_=r[12].length+"",w,p,i,o=[],f=new Dr,b=ze(r[12]);const d=g=>g[118].path;for(let g=0;g<b.length;g+=1){let y=ki(r,b,g),k=d(y);f.set(k,o[g]=Di(k,y))}return{c(){e=L("div"),t=L("div"),a=Z("找到 "),w=Z(_),p=Z(" 个文件夹"),i=P();for(let g=0;g<o.length;g+=1)o[g].c();s(t,"class","px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"),s(e,"class","absolute left-0 right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto z-10")},m(g,y){q(g,e,y),u(e,t),u(t,a),u(t,w),u(t,p),u(e,i);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(e,null)},p(g,y){y[0]&4096&&_!==(_=g[12].length+"")&&ue(w,_),y[0]&22528|y[1]&33685504&&(b=ze(g[12]),o=Tt(o,y,d,1,g,b,f,e,It,Di,null,ki))},d(g){g&&K(e);for(let y=0;y<o.length;y+=1)o[y].d()}}}function Di(r,e){let t,a,_,w,p,i,o,f=Hi(e[118].name,e[11])+"",b,d,g=e[118].path+"",y,k,v,n,h;function l(){return e[74](e[118])}function c(){return e[75](e[115])}return{key:r,first:null,c(){t=L("button"),a=L("div"),_=oe("svg"),w=oe("path"),p=P(),i=L("div"),o=L("div"),b=P(),d=L("div"),y=Z(g),k=P(),s(w,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(_,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(_,"fill","currentColor"),s(_,"viewBox","0 0 24 24"),s(o,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-400 dark:text-gray-500 text-[10px] truncate"),s(i,"class","flex-1 min-w-0"),s(a,"class","flex items-center gap-2"),s(t,"class",v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`),this.first=t},m(m,C){q(m,t,C),u(t,a),u(a,_),u(_,w),u(a,p),u(a,i),u(i,o),o.innerHTML=f,u(i,b),u(i,d),u(d,y),u(t,k),n||(h=[re(t,"click",l),re(t,"mouseenter",c)],n=!0)},p(m,C){e=m,C[0]&6144&&f!==(f=Hi(e[118].name,e[11])+"")&&(o.innerHTML=f),C[0]&4096&&g!==(g=e[118].path+"")&&ue(y,g),C[0]&20480&&v!==(v=`w-full text-left px-3 py-2 text-xs hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors ${e[115]===e[14]?"bg-amber-100 dark:bg-amber-900/50":""}`)&&s(t,"class",v)},d(m){m&&K(t),n=!1,Be(h)}}}function Fa(r){let e=[],t=new Dr,a,_=ze(r[29]);const w=p=>p[116].path;for(let p=0;p<_.length;p+=1){let i=wi(r,_,p),o=w(i);t.set(o,e[p]=Ti(o,i))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();a=kt()},m(p,i){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(p,i);q(p,a,i)},p(p,i){i[0]&537165824|i[1]&131312&&(_=ze(p[29]),e=Tt(e,i,w,1,p,_,t,a.parentNode,It,Ti,a,wi))},d(p){p&&K(a);for(let i=0;i<e.length;i+=1)e[i].d(p)}}}function Wa(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function ja(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function za(r){let e,t,a,_,w,p,i,o,f,b;return{c(){e=L("div"),t=oe("svg"),a=oe("path"),_=P(),w=L("span"),p=Z(r[17]),i=P(),o=L("button"),o.textContent="重试",s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(t,"class","w-6 h-6"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(w,"class","text-center px-4"),s(o,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),s(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(d,g){q(d,e,g),u(e,t),u(t,a),u(e,_),u(e,w),u(w,p),u(e,i),u(e,o),f||(b=re(o,"click",r[33]),f=!0)},p(d,g){g[0]&131072&&ue(p,d[17])},d(d){d&&K(e),f=!1,b()}}}function Ua(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',s(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function Na(r){let e,t,a,_,w,p,i,o=r[116].name+"",f,b,d,g,y=Pt(r[116].size)+"",k,v,n,h,l,c=r[116].modified+"",m,C,x,M=r[116].mode+"",S;return{c(){e=L("div"),t=P(),a=oe("svg"),_=oe("path"),w=P(),p=L("div"),i=L("div"),f=Z(o),b=P(),d=L("div"),g=L("span"),k=Z(y),v=P(),n=L("span"),n.textContent="•",h=P(),l=L("span"),m=Z(c),C=P(),x=L("span"),S=Z(M),s(e,"class","w-3"),s(_,"stroke-linecap","round"),s(_,"stroke-linejoin","round"),s(_,"stroke-width","2"),s(_,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),s(a,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),s(a,"fill","none"),s(a,"stroke","currentColor"),s(a,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(d,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),s(p,"class","flex-1 min-w-0"),s(x,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(E,B){q(E,e,B),q(E,t,B),q(E,a,B),u(a,_),q(E,w,B),q(E,p,B),u(p,i),u(i,f),u(p,b),u(p,d),u(d,g),u(g,k),u(d,v),u(d,n),u(d,h),u(d,l),u(l,m),q(E,C,B),q(E,x,B),u(x,S)},p(E,B){B[0]&536870912&&o!==(o=E[116].name+"")&&ue(f,o),B[0]&536870912&&y!==(y=Pt(E[116].size)+"")&&ue(k,y),B[0]&536870912&&c!==(c=E[116].modified+"")&&ue(m,c),B[0]&536870912&&M!==(M=E[116].mode+"")&&ue(S,M)},d(E){E&&(K(e),K(t),K(a),K(w),K(p),K(C),K(x))}}}function Ka(r){let e,t,a,_,w,p,i,o=r[116].name+"",f;function b(y,k){return k[0]&536903680&&(e=null),e==null&&(e=!!y[15].has(y[116].path)),e?Ga:qa}let d=b(r,[-1,-1,-1,-1]),g=d(r);return{c(){g.c(),t=P(),a=oe("svg"),_=oe("path"),w=P(),p=L("div"),i=L("div"),f=Z(o),s(_,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),s(a,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),s(a,"fill","currentColor"),s(a,"viewBox","0 0 24 24"),s(i,"class","text-gray-900 dark:text-white font-medium truncate"),s(p,"class","flex-1 min-w-0")},m(y,k){g.m(y,k),q(y,t,k),q(y,a,k),u(a,_),q(y,w,k),q(y,p,k),u(p,i),u(i,f)},p(y,k){d!==(d=b(y,k))&&(g.d(1),g=d(y),g&&(g.c(),g.m(t.parentNode,t))),k[0]&536870912&&o!==(o=y[116].name+"")&&ue(f,o)},d(y){y&&(K(t),K(a),K(w),K(p)),g.d(y)}}}function Va(r){let e,t,a,_,w,p=r[116].name+"",i,o,f;return{c(){e=oe("svg"),t=oe("path"),a=P(),_=L("div"),w=L("div"),i=Z(p),o=P(),f=L("div"),f.textContent="返回上一层",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),s(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24"),s(w,"class","text-gray-600 dark:text-gray-300"),s(f,"class","text-gray-400 dark:text-gray-500 text-[10px]"),s(_,"class","flex-1 min-w-0")},m(b,d){q(b,e,d),u(e,t),q(b,a,d),q(b,_,d),u(_,w),u(w,i),u(_,o),u(_,f)},p(b,d){d[0]&536870912&&p!==(p=b[116].name+"")&&ue(i,p)},d(b){b&&(K(e),K(a),K(_))}}}function qa(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 5l7 7-7 7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function Ga(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M19 9l-7 7-7-7"),s(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function Ti(r,e){let t,a,_,w,p;function i(y,k){return y[116].is_parent?Va:y[116].is_dir?Ka:Na}let o=i(e),f=o(e);function b(){return e[76](e[116])}function d(){return e[77](e[116])}function g(...y){return e[78](e[116],...y)}return{key:r,first:null,c(){t=L("div"),f.c(),a=P(),s(t,"class",_="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(y,k){q(y,t,k),f.m(t,null),u(t,a),w||(p=[re(t,"click",b),re(t,"dblclick",d),re(t,"contextmenu",g)],w=!0)},p(y,k){e=y,o===(o=i(e))&&f?f.p(e,k):(f.d(1),f=o(e),f&&(f.c(),f.m(t,a))),k[0]&537133056&&_!==(_="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[116].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[18].has(e[116].path)&&!e[116].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&s(t,"class",_)},d(y){y&&K(t),f.d(),w=!1,Be(p)}}}function Bi(r){let e,t,a,_,w,p,i,o,f,b,d;return{c(){var g;e=L("div"),t=L("button"),a=Z("下载"),w=P(),p=L("button"),p.textContent="重命名",i=P(),o=L("button"),o.textContent="删除",s(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=_=(g=r[19].file)==null?void 0:g.is_dir,s(p,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),s(o,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),s(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),s(e,"style",f=`left: ${r[19].x}px; top: ${r[19].y}px;`)},m(g,y){q(g,e,y),u(e,t),u(t,a),u(e,w),u(e,p),u(e,i),u(e,o),b||(d=[re(t,"click",r[44]),re(p,"click",r[45]),re(o,"click",r[43])],b=!0)},p(g,y){var k;y[0]&524288&&_!==(_=(k=g[19].file)==null?void 0:k.is_dir)&&(t.disabled=_),y[0]&524288&&f!==(f=`left: ${g[19].x}px; top: ${g[19].y}px;`)&&s(e,"style",f)},d(g){g&&K(e),b=!1,Be(d)}}}function Ai(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U,V,J,ie,Y,D,H,F,j,G,W,X,te=r[0].historyEnabled&&Ri(r),I=r[0].historyEnabled&&r[0].history.length>0&&Oi(r);return{c(){e=L("div"),t=L("div"),a=P(),_=L("div"),w=L("div"),p=L("div"),i=L("div"),i.innerHTML='<div class="p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg shadow-purple-500/20"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div><h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">文件管理设置</h3> <div class="text-[11px] uppercase tracking-[0.15em] text-slate-400 dark:text-slate-500 mt-0.5">Preferences</div></div>',o=P(),f=L("button"),f.innerHTML='<svg class="w-5 h-5 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=P(),d=L("div"),g=L("div"),y=L("div"),y.innerHTML='<svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">功能设置</span>',k=P(),v=L("div"),n=L("div"),n.innerHTML='<div class="p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg"><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">目录跟踪</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">实时同步终端目录变化</div></div>',h=P(),l=L("button"),c=L("span"),x=P(),M=L("div"),S=L("div"),S.innerHTML='<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">历史记录</span>',E=P(),B=L("div"),R=L("div"),R.innerHTML='<div class="p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg"><svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><div class="text-sm font-medium text-slate-900 dark:text-white">启用历史记录</div> <div class="text-xs text-slate-500 dark:text-slate-400 mt-0.5">自动记录访问过的目录</div></div>',O=P(),A=L("button"),U=L("span"),ie=P(),te&&te.c(),Y=P(),I&&I.c(),D=P(),H=L("div"),F=L("button"),F.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            恢复默认`,j=P(),G=L("button"),G.textContent="完成",s(t,"class","fixed inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(i,"class","flex items-center gap-3"),s(f,"class","p-2 rounded-xl transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(f,"title","关闭"),s(p,"class","flex items-center justify-between"),s(w,"class","px-5 py-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-b border-slate-200/70 dark:border-slate-800/80"),s(y,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(n,"class","flex items-center gap-3"),s(c,"class",m=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].directoryTracking?"translate-x-6":"translate-x-1"}`),s(l,"class",C=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(v,"class","flex items-center justify-between py-2"),s(g,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(S,"class","flex items-center gap-2 mb-4 pb-3 border-b border-slate-100 dark:border-slate-800/60"),s(R,"class","flex items-center gap-3"),s(U,"class",V=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${r[0].historyEnabled?"translate-x-6":"translate-x-1"}`),s(A,"class",J=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${r[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`),s(B,"class","flex items-center justify-between py-2 mb-4"),s(M,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm"),s(d,"class","flex-1 overflow-y-auto p-5 space-y-4 bg-slate-50/50 dark:bg-slate-950/30"),s(F,"class","px-3 py-2 text-xs font-medium text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all duration-200 flex items-center gap-1.5"),s(G,"class","px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"),s(H,"class","p-4 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-t border-slate-200/70 dark:border-slate-800/80 flex justify-between items-center"),s(_,"class","relative bg-white/95 dark:bg-slate-900/90 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] w-[420px] max-h-[85vh] overflow-hidden flex flex-col border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-center justify-center")},m(T,Q){q(T,e,Q),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),u(p,i),u(p,o),u(p,f),u(_,b),u(_,d),u(d,g),u(g,y),u(g,k),u(g,v),u(v,n),u(v,h),u(v,l),u(l,c),u(d,x),u(d,M),u(M,S),u(M,E),u(M,B),u(B,R),u(B,O),u(B,A),u(A,U),u(M,ie),te&&te.m(M,null),u(d,Y),I&&I.m(d,null),u(_,D),u(_,H),u(H,F),u(H,j),u(H,G),W||(X=[re(t,"click",r[82]),re(f,"click",r[83]),re(l,"click",r[84]),re(A,"click",r[85]),re(F,"click",r[89]),re(G,"click",r[90])],W=!0)},p(T,Q){Q[0]&1&&m!==(m=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].directoryTracking?"translate-x-6":"translate-x-1"}`)&&s(c,"class",m),Q[0]&1&&C!==(C=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].directoryTracking?"bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg shadow-purple-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(l,"class",C),Q[0]&1&&V!==(V=`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-all duration-300 ${T[0].historyEnabled?"translate-x-6":"translate-x-1"}`)&&s(U,"class",V),Q[0]&1&&J!==(J=`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${T[0].historyEnabled?"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-600"}`)&&s(A,"class",J),T[0].historyEnabled?te?te.p(T,Q):(te=Ri(T),te.c(),te.m(M,null)):te&&(te.d(1),te=null),T[0].historyEnabled&&T[0].history.length>0?I?I.p(T,Q):(I=Oi(T),I.c(),I.m(d,null)):I&&(I.d(1),I=null)},d(T){T&&K(e),te&&te.d(),I&&I.d(),W=!1,Be(X)}}}function Ri(r){let e,t,a,_,w,p=r[0].historyLimit+"",i,o,f,b,d,g,y,k;return{c(){e=L("div"),t=L("div"),a=L("div"),a.innerHTML='<svg class="w-3.5 h-3.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg> <span class="text-xs font-medium text-slate-600 dark:text-slate-400">历史记录数量</span>',_=P(),w=L("span"),i=Z(p),o=P(),f=L("div"),b=L("input"),d=P(),g=L("div"),g.innerHTML="<span>5</span> <span>50</span>",s(a,"class","flex items-center gap-2"),s(w,"class","text-sm font-bold text-purple-600 dark:text-purple-400 min-w-[2rem] text-center"),s(t,"class","flex items-center justify-between mb-3"),s(b,"type","range"),s(b,"min","5"),s(b,"max","50"),s(b,"step","5"),s(b,"class","w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500/30"),s(g,"class","flex justify-between text-[10px] text-slate-400 mt-1.5"),s(f,"class","relative"),s(e,"class","py-3 px-3 bg-slate-50/80 dark:bg-slate-800/50 rounded-xl")},m(v,n){q(v,e,n),u(e,t),u(t,a),u(t,_),u(t,w),u(w,i),u(e,o),u(e,f),u(f,b),we(b,r[0].historyLimit),u(f,d),u(f,g),y||(k=[re(b,"change",r[86]),re(b,"input",r[86]),re(b,"change",r[30])],y=!0)},p(v,n){n[0]&1&&p!==(p=v[0].historyLimit+"")&&ue(i,p),n[0]&1&&we(b,v[0].historyLimit)},d(v){v&&K(e),y=!1,Be(k)}}}function Oi(r){let e,t,a,_,w,p,i,o,f,b=r[0].history.length+"",d,g,y,k,v,n=[],h=new Dr,l,c,m=ze(r[0].history.slice().reverse());const C=x=>x[115];for(let x=0;x<m.length;x+=1){let M=yi(r,m,x),S=C(M);h.set(S,n[x]=Pi(S,M))}return{c(){e=L("div"),t=L("div"),a=L("div"),_=oe("svg"),w=oe("path"),p=P(),i=L("span"),o=Z(`当前历史记录
                    `),f=L("span"),d=Z(b),g=P(),y=L("button"),y.innerHTML=`<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                  清空`,k=P(),v=L("div");for(let x=0;x<n.length;x+=1)n[x].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"),s(_,"class","w-4 h-4 text-emerald-500"),s(_,"fill","none"),s(_,"stroke","currentColor"),s(_,"viewBox","0 0 24 24"),s(f,"class","ml-1.5 text-xs px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-400 rounded-full"),s(i,"class","text-sm font-semibold text-slate-700 dark:text-slate-200"),s(a,"class","flex items-center gap-2"),s(y,"class","text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1"),s(t,"class","flex items-center justify-between mb-3 pb-2 border-b border-slate-100 dark:border-slate-800/60"),s(v,"class","space-y-1.5 max-h-40 overflow-y-auto pr-1 scrollbar-thin"),s(e,"class","bg-white dark:bg-slate-900/80 rounded-xl border border-slate-200/60 dark:border-slate-800/70 p-4 shadow-sm")},m(x,M){q(x,e,M),u(e,t),u(t,a),u(a,_),u(_,w),u(a,p),u(a,i),u(i,o),u(i,f),u(f,d),u(t,g),u(t,y),u(e,k),u(e,v);for(let S=0;S<n.length;S+=1)n[S]&&n[S].m(v,null);l||(c=re(y,"click",r[87]),l=!0)},p(x,M){M[0]&1&&b!==(b=x[0].history.length+"")&&ue(d,b),M[0]&1073741825&&(m=ze(x[0].history.slice().reverse()),n=Tt(n,M,C,1,x,m,h,v,It,Pi,null,yi))},d(x){x&&K(e);for(let M=0;M<n.length;M+=1)n[M].d();l=!1,c()}}}function Pi(r,e){let t,a,_,w=e[0].history.length-e[115]+"",p,i,o,f=e[113]+"",b,d,g,y,k,v;function n(){return e[88](e[113])}return{key:r,first:null,c(){t=L("div"),a=L("div"),_=L("div"),p=Z(w),i=P(),o=L("span"),b=Z(f),d=P(),g=L("button"),g.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',y=P(),s(_,"class","w-5 h-5 flex items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 font-bold text-[10px]"),s(o,"class","truncate text-slate-700 dark:text-slate-300 font-medium"),s(a,"class","flex items-center gap-2 flex-1 min-w-0"),s(g,"class","ml-2 p-1 rounded-md text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100"),s(g,"title","删除记录"),s(t,"class","group flex items-center justify-between text-xs py-2 px-3 bg-slate-50 dark:bg-slate-800/60 rounded-lg border border-slate-100 dark:border-slate-700/50 hover:border-purple-300 dark:hover:border-purple-700/50 transition-all duration-200"),this.first=t},m(h,l){q(h,t,l),u(t,a),u(a,_),u(_,p),u(a,i),u(a,o),u(o,b),u(t,d),u(t,g),u(t,y),k||(v=re(g,"click",n),k=!0)},p(h,l){e=h,l[0]&1&&w!==(w=e[0].history.length-e[115]+"")&&ue(p,w),l[0]&1&&f!==(f=e[113]+"")&&ue(b,f)},d(h){h&&K(t),k=!1,v()}}}function Ja(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U,V,J,ie,Y,D,H,F,j,G,W,X,te,I,T,Q,z,N,$,ee,le,ae,ce=r[0].directoryTracking&&Ci(r);function he(de,Oe){return de[20]?Ba:Ta}let fe=he(r),Se=fe(r),xe=r[9]&&r[0].historyEnabled&&xi(r),me=r[10]&&Li(r);function ke(de,Oe){return de[16]?Ua:de[17]?za:de[29].length===0?ja:de[6]?Wa:Fa}let ne=ke(r),ge=ne(r),pe=r[19].open&&Bi(r);function Le(de){r[79](de)}let $e={title:"删除文件",message:r[23],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[41],onCancel:r[42]};r[22]!==void 0&&($e.isOpen=r[22]),W=new Ir({props:$e}),at.push(()=>wt(W,"isOpen",Le));function Ne(de){r[80](de)}let We={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[31],onCancel:r[32]};r[24]!==void 0&&(We.isOpen=r[24]),I=new Ir({props:We}),at.push(()=>wt(I,"isOpen",Ne));function st(de){r[81](de)}let Ue={title:r[26],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[27],confirmText:"重命名",cancelText:"取消",onConfirm:r[46],onCancel:r[47]};r[25]!==void 0&&(Ue.isOpen=r[25]),z=new Da({props:Ue}),at.push(()=>wt(z,"isOpen",st));let Ce=r[8]&&Ai(r);return{c(){e=L("div"),t=L("div"),a=L("div"),_=L("h3"),_.textContent="文件管理",w=P(),p=L("div"),i=L("button"),o=oe("svg"),f=oe("path"),b=P(),ce&&ce.c(),d=P(),g=L("button"),y=oe("svg"),k=oe("path"),v=P(),n=L("button"),n.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',h=P(),l=L("button"),c=oe("svg"),m=oe("path"),x=P(),M=L("button"),M.innerHTML='<svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',S=P(),E=L("div"),B=L("div"),R=L("button"),R.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',O=P(),Se.c(),A=P(),U=L("button"),U.innerHTML='<svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>',V=P(),J=L("div"),ie=L("button"),ie.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',Y=P(),xe&&xe.c(),D=P(),me&&me.c(),H=P(),F=L("div"),ge.c(),j=P(),pe&&pe.c(),G=P(),Xe(W.$$.fragment),te=P(),Xe(I.$$.fragment),Q=P(),Xe(z.$$.fragment),$=P(),Ce&&Ce.c(),s(_,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"stroke-width","2"),s(f,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),s(o,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),s(o,"fill","none"),s(o,"stroke","currentColor"),s(o,"viewBox","0 0 24 24"),i.disabled=r[6],s(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(i,"title","刷新"),s(k,"stroke-linecap","round"),s(k,"stroke-linejoin","round"),s(k,"stroke-width","2"),s(k,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(y,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),s(y,"fill","none"),s(y,"stroke","currentColor"),s(y,"viewBox","0 0 24 24"),g.disabled=r[6],s(g,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(g,"title","上传到服务器"),s(n,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(n,"title","下载到本地"),s(m,"stroke-linecap","round"),s(m,"stroke-linejoin","round"),s(m,"stroke-width","2"),s(m,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),s(c,"class","w-4 h-4 text-red-500 dark:text-red-400"),s(c,"fill","none"),s(c,"stroke","currentColor"),s(c,"viewBox","0 0 24 24"),l.disabled=C=r[6]||r[18].size===0,s(l,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(l,"title","删除选中"),s(M,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),s(M,"title","文件管理设置"),s(p,"class","flex items-center gap-1"),s(a,"class","flex items-center justify-between mb-2"),s(R,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(R,"title","根目录"),s(B,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),s(U,"class","p-2 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors"),s(U,"title","模糊搜索文件夹"),s(ie,"class","p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors"),s(ie,"title","路径历史"),s(J,"class","relative"),s(E,"class","flex items-center gap-2"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(F,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(de,Oe){q(de,e,Oe),u(e,t),u(t,a),u(a,_),u(a,w),u(a,p),u(p,i),u(i,o),u(o,f),u(p,b),ce&&ce.m(p,null),u(p,d),u(p,g),u(g,y),u(y,k),u(p,v),u(p,n),u(p,h),u(p,l),u(l,c),u(c,m),u(p,x),u(p,M),u(t,S),u(t,E),u(E,B),u(B,R),u(B,O),Se.m(B,null),u(E,A),u(E,U),u(E,V),u(E,J),u(J,ie),u(J,Y),xe&&xe.m(J,null),u(t,D),me&&me.m(t,null),u(e,H),u(e,F),ge.m(F,null),u(e,j),pe&&pe.m(e,null),u(e,G),qe(W,e,null),u(e,te),qe(I,e,null),u(e,Q),qe(z,e,null),u(e,$),Ce&&Ce.m(e,null),ee=!0,le||(ae=[re(i,"click",r[33]),re(g,"click",r[34]),re(l,"click",r[40]),re(M,"click",r[66]),re(R,"click",r[67]),re(U,"click",r[57]),re(ie,"click",r[70]),re(F,"click",r[39])],le=!0)},p(de,Oe){(!ee||Oe[0]&64)&&(i.disabled=de[6]),de[0].directoryTracking?ce?ce.p(de,Oe):(ce=Ci(de),ce.c(),ce.m(p,d)):ce&&(ce.d(1),ce=null),(!ee||Oe[0]&64)&&(g.disabled=de[6]),(!ee||Oe[0]&262208&&C!==(C=de[6]||de[18].size===0))&&(l.disabled=C),fe===(fe=he(de))&&Se?Se.p(de,Oe):(Se.d(1),Se=fe(de),Se&&(Se.c(),Se.m(B,null))),de[9]&&de[0].historyEnabled?xe?xe.p(de,Oe):(xe=xi(de),xe.c(),xe.m(J,null)):xe&&(xe.d(1),xe=null),de[10]?me?me.p(de,Oe):(me=Li(de),me.c(),me.m(t,null)):me&&(me.d(1),me=null),ne===(ne=ke(de))&&ge?ge.p(de,Oe):(ge.d(1),ge=ne(de),ge&&(ge.c(),ge.m(F,null))),de[19].open?pe?pe.p(de,Oe):(pe=Bi(de),pe.c(),pe.m(e,G)):pe&&(pe.d(1),pe=null);const nt={};Oe[0]&8388608&&(nt.message=de[23]),!X&&Oe[0]&4194304&&(X=!0,nt.isOpen=de[22],yt(()=>X=!1)),W.$set(nt);const Pe={};!T&&Oe[0]&16777216&&(T=!0,Pe.isOpen=de[24],yt(()=>T=!1)),I.$set(Pe);const dt={};Oe[0]&67108864&&(dt.title=de[26]),Oe[0]&134217728&&(dt.defaultValue=de[27]),!N&&Oe[0]&33554432&&(N=!0,dt.isOpen=de[25],yt(()=>N=!1)),z.$set(dt),de[8]?Ce?Ce.p(de,Oe):(Ce=Ai(de),Ce.c(),Ce.m(e,null)):Ce&&(Ce.d(1),Ce=null)},i(de){ee||(Te(W.$$.fragment,de),Te(I.$$.fragment,de),Te(z.$$.fragment,de),ee=!0)},o(de){Re(W.$$.fragment,de),Re(I.$$.fragment,de),Re(z.$$.fragment,de),ee=!1},d(de){de&&K(e),ce&&ce.d(),Se.d(),xe&&xe.d(),me&&me.d(),ge.d(),pe&&pe.d(),Ge(W),Ge(I),Ge(z),Ce&&Ce.d(),le=!1,Be(ae)}}}function on(r){return r.focus(),{destroy(){}}}function Xa(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function Hi(r,e){if(!e)return r;const t=new RegExp(`(${Ya(e)})`,"gi");return r.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100 px-0.5 rounded">$1</mark>')}function Ya(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Za(r,e,t){let a,_,w,p,i,o,f,b,d,g,y,k;gt(r,Mt,se=>t(63,g=se)),gt(r,Ut,se=>t(64,y=se)),gt(r,bt,se=>t(98,k=se));let v=new Map,n={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]},h=new Map,l=null,c=!1,m=!1,C=!1,x="",M=!1,S="",E=[],B=!1,R=-1,O=null,A=new Set([]),U=[],V=!1,J=null,ie=new Set,Y=[],D={open:!1,x:0,y:0,file:null},H=!1,F="",j=!1,G="",W=[],X=!1,te=null,I=!1,T="",Q="",z=null;async function N(se){try{const{GetFileManagerSettings:ve}=window.wailsBindings;if(typeof ve!="function")return;const Ae=await ve(se);if(t(0,n={directoryTracking:(Ae==null?void 0:Ae.directory_tracking)??!1,historyEnabled:(Ae==null?void 0:Ae.history_enabled)??!0,historyLimit:(Ae==null?void 0:Ae.history_limit)??5,history:(Ae==null?void 0:Ae.history)??[]}),!h.has(se)){const Qe=new Map(h);Qe.set(se,n.directoryTracking||!1),t(1,h=Qe)}}catch(ve){console.error("Failed to load file manager config:",ve)}}async function $(){try{const{UpdateFileManagerSettings:se}=window.wailsBindings;if(typeof se!="function"||!b)return;await se(b,{directory_tracking:n.directoryTracking,history_enabled:n.historyEnabled,history_limit:n.historyLimit,history:n.history})}catch(se){console.error("Failed to save file manager settings:",se)}}let ee="/";function le(se){return se&&v.get(se)||"/"}function ae(se,ve){if(!se)return;const Ae=new Map(v);Ae.set(se,ve),t(58,v=Ae)}async function ce(se){if(!(!y||!_)&&!w){t(16,V=!0),t(17,J=null);try{const ve=await $s(y,se);t(59,U=ve||[]),ae(y,se),t(3,ee=se)}catch(ve){console.error("Failed to load directory:",ve),t(17,J=ve.message||"加载目录失败")}finally{t(16,V=!1)}}}async function he(){t(24,X=!1);const se=te;if(te=null,se)try{await Ur(se.id)}catch(ve){console.error("Cancel transfer failed:",ve)}bt.cancelTransfer(se.id)}function fe(){t(24,X=!1),te=null}async function Se(){await ce(ee)}async function xe(){if(!(!y||!_||w))try{const se=await sn();if(!se||se.length===0)return;(await nn(y,se,ee)).forEach(Ae=>nt(Ae,"upload")),setTimeout(()=>ce(ee),2e3)}catch(se){console.error("Upload failed:",se),t(17,J=se.message||"上传失败")}}async function me(se){if(!(!y||!_||w||se.is_dir))try{const ve=await rn();if(!ve)return;(await Qs(y,[se.path],ve)).forEach(Qe=>nt(Qe,"download"))}catch(ve){console.error("Download failed:",ve),t(17,J=ve.message||"下载失败")}}function ke(se){!se||se.is_parent||t(18,ie=new Set([se.path]))}function ne(se){!se||se.is_parent||ke(se)}function ge(se){!se||!se.is_parent||Pe(se.path,!0)}function pe(se,ve){ve!=null&&ve.is_parent||(se.preventDefault(),ke(ve),t(19,D={open:!0,x:se.clientX,y:se.clientY,file:ve}))}function Le(){D.open&&t(19,D={...D,open:!1})}async function $e(){if(!y||!_||w||ie.size===0)return;W=Array.from(ie);const se=W.length;t(23,G=se===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${se} 个文件/文件夹吗？`),t(22,j=!0)}async function Ne(){t(22,j=!1);try{await Zs(y,W),t(18,ie=new Set),W=[],await ce(ee)}catch(se){console.error("Delete failed:",se),t(17,J=se.message||"删除失败")}}function We(){t(22,j=!1),W=[]}async function st(){const se=D.file;se&&(Le(),W=[se.path],t(23,G=`确定要删除 "${se.name}" 吗？`),t(22,j=!0))}async function Ue(){const se=D.file;Le(),se&&!se.is_dir&&await me(se)}async function Ce(){const se=D.file;Le(),se&&(z=se,t(26,T="重命名"),t(27,Q=se.name),t(25,I=!0))}async function de(se){t(25,I=!1);const ve=z;if(z=null,!(!ve||!se||se.trim()===ve.name))try{const Qe=`${ee.endsWith("/")?ee:`${ee}/`}${se.trim()}`;await en(y,ve.path,Qe),await ce(ee)}catch(Ae){console.error("Rename failed:",Ae),t(17,J=Ae.message||"重命名失败")}}function Oe(){t(25,I=!1),z=null}function nt(se,ve){const Ae=`sftp:progress:${se}`,Qe=fr(Ae,Ke=>{if(ve==="upload"){const lt={id:se,filename:Ke.filename||Ke.fileName||"unknown",bytesSent:Ke.bytes_sent??Ke.bytesSent??0,totalBytes:Ke.total_bytes??Ke.totalBytes??0,percentage:Ke.percentage??0,speed:Ke.speed??0,status:Ke.status||"running",error:Ke.error||""};k.transfers.find(er=>er.id===se)?bt.updateTransfer(se,lt):bt.addTransfer(lt)}});Y.push(Qe)}function Pe(se,ve=!1){if(ve&&d&&b){const Ae=new Map(h);Ae.set(b,!1),t(1,h=Ae),t(7,c=!0)}if(n.historyEnabled&&se!==ee){const Ae=n.historyLimit||5,Qe=[...n.history||[]],Ke=Qe.indexOf(se);Ke!==-1&&Qe.splice(Ke,1),Qe.unshift(se);const lt=Qe.slice(0,Ae);t(0,n.history=lt,n),$()}ce(se)}async function dt(){if(y)try{const{GetCurrentPath:se}=window.wailsBindings;if(typeof se!="function")return;const ve=await se(y);ve&&ve!==ee&&(t(7,c=!1),Pe(ve,!1))}catch(se){console.error("Failed to sync directory from server:",se)}}function ct(){if(!n.directoryTracking||!d||l)return;const se=y;se&&(l=fr(`ssh:cwd:${se}`,ve=>{ve&&ve!==ee&&!c&&Pe(ve,!1)}))}function et(){l&&(l(),l=null)}function Je(se){if(se===-1)Pe("/",!0);else{const ve="/"+o.slice(0,se+1).join("/");Pe(ve,!0)}}function rt(){t(21,F=ee),t(20,H=!0)}function mt(){F.trim()&&Pe(F.trim(),!0),t(20,H=!1)}function Ie(){t(20,H=!1),t(21,F="")}async function Fe(){if(!(!S.trim()||!y)){O&&O.abort(),O=new AbortController,t(13,B=!0),t(12,E=[]),t(14,R=-1);try{const se=await tn(y,ee,S.trim(),3,50);if(O.signal.aborted)return;t(12,E=se||[])}catch(se){console.error("Directory search failed:",se),t(17,J=se.message||"搜索失败")}finally{t(13,B=!1)}}}let it;function Ye(){clearTimeout(it),S.trim().length>=1?it=setTimeout(()=>{Fe()},300):t(12,E=[])}function Ze(se){se.key==="Enter"?(se.preventDefault(),R>=0&&E[R]?(Pe(E[R].path,!0),tt()):Fe()):se.key==="Escape"?tt():se.key==="ArrowDown"?(se.preventDefault(),R<E.length-1&&t(14,R++,R)):se.key==="ArrowUp"&&(se.preventDefault(),R>0&&t(14,R--,R))}function tt(){t(10,M=!1),t(11,S=""),t(12,E=[]),t(14,R=-1),O&&(O.abort(),O=null)}function je(){t(10,M=!0),t(11,S=""),t(12,E=[]),t(14,R=-1)}or(()=>{}),Er(()=>{Y.forEach(se=>se()),et(),clearTimeout(it),O&&O.abort()});const ye=async()=>{if(b){const se=!d,ve=new Map(h);ve.set(b,se),t(1,h=ve),se&&(t(7,c=!1),await dt())}},He=()=>t(8,m=!0),ot=()=>Je(-1);function _e(){F=this.value,t(21,F)}const Me=se=>{se.key==="Enter"?mt():se.key==="Escape"&&Ie()},Ft=()=>t(9,C=!C);function Vt(){x=this.value,t(2,x)}const vt=se=>{Pe(se,!0),t(9,C=!1),t(2,x="")};function At(){S=this.value,t(11,S)}const Wt=se=>{Pe(se.path,!0),tt()},qt=se=>t(14,R=se),Gt=se=>se.is_parent?ge(se):ne(se),lr=se=>{se.is_dir&&!se.is_parent?Pe(se.path,!0):se.is_dir||me(se)},_r=(se,ve)=>pe(ve,se);function jt(se){j=se,t(22,j)}function Jt(se){X=se,t(24,X)}function pr(se){I=se,t(25,I)}const Xt=()=>t(8,m=!1),Yt=()=>t(8,m=!1),ar=()=>{t(0,n.directoryTracking=!n.directoryTracking,n),$()},gr=()=>{t(0,n.historyEnabled=!n.historyEnabled,n),n.historyEnabled||t(0,n.history=[],n),$()};function zt(){n.historyLimit=jr(this.value),t(0,n)}const Zt=()=>{t(0,n.history=[],n),$()},mr=se=>{t(0,n.history=n.history.filter(ve=>ve!==se),n),$()},Qt=()=>{t(0,n={directoryTracking:!1,historyEnabled:!0,historyLimit:5,history:[]}),$()},$t=()=>t(8,m=!1);return r.$$.update=()=>{var se;if(r.$$.dirty[2]&6&&t(61,a=y?g.get(y):null),r.$$.dirty[1]&1073741824&&t(62,_=(a==null?void 0:a.connected)||!1),r.$$.dirty[1]&1073741824&&t(6,w=(a==null?void 0:a.type)==="local"),r.$$.dirty[0]&64|r.$$.dirty[2]&1&&t(60,p=_&&!w),r.$$.dirty[1]&1073741824&&t(5,b=((se=a==null?void 0:a.connection)==null?void 0:se.id)||null),r.$$.dirty[0]&32|r.$$.dirty[2]&4&&y&&b&&N(b),r.$$.dirty[0]&8|r.$$.dirty[2]&4)if(y){const ve=le(y);ve&&ve!==ee&&t(3,ee=ve)}else t(3,ee="/");if(r.$$.dirty[0]&8|r.$$.dirty[1]&268435456&&t(29,i=(()=>{const ve=Xa(U);return ee==="/"?ve:[{name:"..",path:ee.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...ve]})()),r.$$.dirty[0]&8&&(o=ee.split("/").filter(ve=>ve)),r.$$.dirty[0]&5&&t(28,f=n.historyEnabled&&x?n.history.filter(ve=>ve.toLowerCase().includes(x.toLowerCase())):n.history||[]),r.$$.dirty[0]&34&&t(4,d=b&&h.get(b)||!1),r.$$.dirty[0]&40|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&p&&b?(N(b),ce(ee),ct()):et()),r.$$.dirty[0]&17|r.$$.dirty[1]&536870912|r.$$.dirty[2]&4&&(y&&p&&n.directoryTracking&&d?ct():et()),r.$$.dirty[1]&134217728|r.$$.dirty[2]&2&&g){const ve=new Set(g.keys()),Ae=new Map(v);for(const Qe of Ae.keys())ve.has(Qe)||Ae.delete(Qe);t(58,v=Ae)}},[n,h,x,ee,d,b,w,c,m,C,M,S,E,B,R,A,V,J,ie,D,H,F,j,G,X,I,T,Q,f,i,$,he,fe,Se,xe,me,ne,ge,pe,Le,$e,Ne,We,st,Ue,Ce,de,Oe,Pe,dt,Je,rt,mt,Ie,Ye,Ze,tt,je,v,U,p,a,_,g,y,ye,He,ot,_e,Me,Ft,Vt,vt,At,Wt,qt,Gt,lr,_r,jt,Jt,pr,Xt,Yt,ar,gr,zt,Zt,mr,Qt,$t]}class Qa extends ft{constructor(e){super(),ut(this,e,Za,Ja,ht,{},null,[-1,-1,-1,-1])}}function Ii(r,e,t){const a=r.slice();return a[37]=e[t],a[39]=t,a}function $a(r){let e;return{c(){e=Z("请先连接到服务器")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function ec(r){let e;return{c(){e=Z("实时数据获取中...")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function tc(r){let e;return{c(){e=Z("本地终端不支持服务器监控")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function Fi(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',s(e,"class","p-3 space-y-3")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function Wi(r){let e,t,a,_,w,p=r[8]["1min"].toFixed(2)+"",i,o,f,b=r[8]["5min"].toFixed(2)+"",d,g,y,k=r[8]["15min"].toFixed(2)+"",v;return{c(){e=L("div"),t=L("span"),t.textContent="负载:",a=P(),_=L("div"),w=L("span"),i=Z(p),o=P(),f=L("span"),d=Z(b),g=P(),y=L("span"),v=Z(k),s(t,"class","text-[9px] text-gray-600 dark:text-gray-400"),s(w,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),be(w,"color",_t(r[8]["1min"]*100)),s(f,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),be(f,"color",_t(r[8]["5min"]*100)),s(y,"class","px-1.5 py-0.5 bg-purple-50 dark:bg-purple-900/30 rounded font-mono"),be(y,"color",_t(r[8]["15min"]*100)),s(_,"class","flex gap-2 text-[9px]"),s(e,"class","flex items-center gap-2 mb-2")},m(n,h){q(n,e,h),u(e,t),u(e,a),u(e,_),u(_,w),u(w,i),u(_,o),u(_,f),u(f,d),u(_,g),u(_,y),u(y,v)},p(n,h){h[0]&256&&p!==(p=n[8]["1min"].toFixed(2)+"")&&ue(i,p),h[0]&256&&be(w,"color",_t(n[8]["1min"]*100)),h[0]&256&&b!==(b=n[8]["5min"].toFixed(2)+"")&&ue(d,b),h[0]&256&&be(f,"color",_t(n[8]["5min"]*100)),h[0]&256&&k!==(k=n[8]["15min"].toFixed(2)+"")&&ue(v,k),h[0]&256&&be(y,"color",_t(n[8]["15min"]*100))},d(n){n&&K(e)}}}function rc(r){let e;return{c(){e=L("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function ic(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n;return{c(){e=oe("svg"),t=oe("defs"),a=oe("linearGradient"),_=oe("stop"),w=oe("stop"),p=oe("line"),i=oe("line"),o=oe("line"),f=oe("path"),d=oe("path"),y=P(),k=L("div"),k.textContent="100%",v=P(),n=L("div"),n.textContent="0%",s(_,"offset","0%"),be(_,"stop-color","rgb(139, 92, 246)"),be(_,"stop-opacity","0.3"),s(w,"offset","100%"),be(w,"stop-color","rgb(139, 92, 246)"),be(w,"stop-opacity","0.05"),s(a,"id","cpuGradient"),s(a,"x1","0%"),s(a,"y1","0%"),s(a,"x2","0%"),s(a,"y2","100%"),s(p,"x1","0"),s(p,"y1","25%"),s(p,"x2","100%"),s(p,"y2","25%"),s(p,"stroke","currentColor"),s(p,"stroke-width","0.5"),s(p,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(o,"x1","0"),s(o,"y1","75%"),s(o,"x2","100%"),s(o,"y2","75%"),s(o,"stroke","currentColor"),s(o,"stroke-width","0.5"),s(o,"class","text-gray-200 dark:text-gray-700"),s(f,"d",b=r[2].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),s(f,"fill","url(#cpuGradient)"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[2].map(r[16]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(139, 92, 246)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(n,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(h,l){q(h,e,l),u(e,t),u(t,a),u(a,_),u(a,w),u(e,p),u(e,i),u(e,o),u(e,f),u(e,d),q(h,y,l),q(h,k,l),q(h,v,l),q(h,n,l)},p(h,l){l[0]&4&&b!==(b=h[2].map(h[15]).join(" ")+" L 100 100 L 0 100 Z")&&s(f,"d",b),l[0]&4&&g!==(g=h[2].map(h[16]).join(" "))&&s(d,"d",g)},d(h){h&&(K(e),K(y),K(k),K(v),K(n))}}}function ji(r){let e,t=ze(r[4]),a=[];for(let _=0;_<t.length;_+=1)a[_]=zi(Ii(r,t,_));return{c(){e=L("div");for(let _=0;_<a.length;_+=1)a[_].c();s(e,"class","mt-2 flex flex-wrap gap-1")},m(_,w){q(_,e,w);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null)},p(_,w){if(w[0]&16){t=ze(_[4]);let p;for(p=0;p<t.length;p+=1){const i=Ii(_,t,p);a[p]?a[p].p(i,w):(a[p]=zi(i),a[p].c(),a[p].m(e,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=t.length}},d(_){_&&K(e),hr(a,_)}}}function zi(r){let e,t,a,_,w,p;return{c(){e=L("div"),t=L("div"),a=L("div"),_=P(),w=L("span"),w.textContent=`C${r[39]+1}`,p=P(),s(a,"class","h-full rounded-full transition-all duration-300"),be(a,"width",r[37]+"%"),be(a,"background-color",_t(r[37])),s(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),s(w,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),s(e,"class","flex flex-col items-center")},m(i,o){q(i,e,o),u(e,t),u(t,a),u(e,_),u(e,w),u(e,p)},p(i,o){o[0]&16&&be(a,"width",i[37]+"%"),o[0]&16&&be(a,"background-color",_t(i[37]))},d(i){i&&K(e)}}}function sc(r){let e;return{c(){e=L("div"),e.textContent="等待数据...",s(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function nc(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n;return{c(){e=oe("svg"),t=oe("defs"),a=oe("linearGradient"),_=oe("stop"),w=oe("stop"),p=oe("line"),i=oe("line"),o=oe("line"),f=oe("path"),d=oe("path"),y=P(),k=L("div"),k.textContent="100%",v=P(),n=L("div"),n.textContent="0%",s(_,"offset","0%"),be(_,"stop-color","rgb(16, 185, 129)"),be(_,"stop-opacity","0.3"),s(w,"offset","100%"),be(w,"stop-color","rgb(16, 185, 129)"),be(w,"stop-opacity","0.05"),s(a,"id","memoryGradient"),s(a,"x1","0%"),s(a,"y1","0%"),s(a,"x2","0%"),s(a,"y2","100%"),s(p,"x1","0"),s(p,"y1","25%"),s(p,"x2","100%"),s(p,"y2","25%"),s(p,"stroke","currentColor"),s(p,"stroke-width","0.5"),s(p,"class","text-gray-200 dark:text-gray-700"),s(i,"x1","0"),s(i,"y1","50%"),s(i,"x2","100%"),s(i,"y2","50%"),s(i,"stroke","currentColor"),s(i,"stroke-width","0.5"),s(i,"class","text-gray-200 dark:text-gray-700"),s(o,"x1","0"),s(o,"y1","75%"),s(o,"x2","100%"),s(o,"y2","75%"),s(o,"stroke","currentColor"),s(o,"stroke-width","0.5"),s(o,"class","text-gray-200 dark:text-gray-700"),s(f,"d",b=r[3].map(r[17]).join(" ")+" L 100 100 L 0 100 Z"),s(f,"fill","url(#memoryGradient)"),s(f,"transform","scale(1, 0.8) translate(0, 10)"),s(d,"d",g=r[3].map(r[18]).join(" ")),s(d,"fill","none"),s(d,"stroke","rgb(16, 185, 129)"),s(d,"stroke-width","2"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"transform","scale(1, 0.8) translate(0, 10)"),s(e,"class","w-full h-full"),s(e,"preserveAspectRatio","none"),s(k,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),s(n,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(h,l){q(h,e,l),u(e,t),u(t,a),u(a,_),u(a,w),u(e,p),u(e,i),u(e,o),u(e,f),u(e,d),q(h,y,l),q(h,k,l),q(h,v,l),q(h,n,l)},p(h,l){l[0]&8&&b!==(b=h[3].map(h[17]).join(" ")+" L 100 100 L 0 100 Z")&&s(f,"d",b),l[0]&8&&g!==(g=h[3].map(h[18]).join(" "))&&s(d,"d",g)},d(h){h&&(K(e),K(y),K(k),K(v),K(n))}}}function oc(r){var Kr,Vr;let e,t,a,_,w,p,i,o,f,b,d,g,y,k=r[5].cpu.toFixed(1)+"",v,n,h,l,c,m,C,x,M,S,E,B,R,O=r[9].used+"",A,U,V=r[9].total+"",J,ie,Y,D=r[5].memory.toFixed(2)+"",H,F,j,G,W,X,te,I,T,Q,z=r[5].disk+"",N,$,ee,le,ae,ce,he,fe,Se,xe=r[7].used+"",me,ke,ne,ge,pe=r[7].total+"",Le,$e,Ne,We,st,Ue,Ce,de,Oe,nt,Pe=wr(((Kr=r[5].network)==null?void 0:Kr.in)||0)+"",dt,ct,et,Je,rt,mt,Ie=wr(((Vr=r[5].network)==null?void 0:Vr.out)||0)+"",Fe,it,Ye,Ze,tt,je,ye,He,ot,_e,Me=(r[6].os||"Unknown")+"",Ft,Vt,vt,At,Wt,qt,Gt=(r[6].kernel||"Unknown")+"",lr,_r,jt,Jt,pr,Xt,Yt=(r[6].uptime||"Unknown")+"",ar,gr,zt,Zt,mr,Qt,$t=(r[6].processes||"N/A")+"",se;function ve(De,Ve){return De[0]?tc:De[1]?ec:$a}let Ae=ve(r),Qe=Ae(r),Ke=r[0]&&Fi(),lt=r[8]["1min"]>0&&Wi(r);function Tr(De,Ve){return De[2].length>1?ic:rc}let er=Tr(r),Et=er(r),pt=r[4].length>0&&ji(r);function Nr(De,Ve){return De[3].length>1?nc:sc}let vr=Nr(r),Lt=vr(r);return{c(){e=L("div"),t=L("div"),a=L("h3"),a.textContent="服务器监控",_=P(),w=L("div"),Qe.c(),p=P(),Ke&&Ke.c(),i=P(),o=L("div"),f=L("div"),b=L("div"),d=L("div"),d.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',g=P(),y=L("span"),v=Z(k),n=Z("%"),h=P(),lt&&lt.c(),l=P(),c=L("div"),Et.c(),m=P(),pt&&pt.c(),C=P(),x=L("div"),M=L("div"),S=L("div"),S.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',E=P(),B=L("div"),R=L("span"),A=Z(O),U=Z(" / "),J=Z(V),ie=P(),Y=L("span"),H=Z(D),F=Z("%"),j=P(),G=L("div"),Lt.c(),W=P(),X=L("div"),te=L("div"),I=L("div"),I.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',T=P(),Q=L("span"),N=Z(z),$=Z("%"),ee=P(),le=L("div"),ae=L("div"),ce=P(),he=L("div"),fe=L("span"),Se=Z("已用 "),me=Z(xe),ke=P(),ne=L("span"),ge=Z("总计 "),Le=Z(pe),$e=P(),Ne=L("div"),We=L("div"),We.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',st=P(),Ue=L("div"),Ce=L("div"),de=L("div"),de.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',Oe=P(),nt=L("span"),dt=Z(Pe),ct=P(),et=L("div"),Je=L("div"),Je.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',rt=P(),mt=L("span"),Fe=Z(Ie),it=P(),Ye=L("div"),Ze=L("div"),Ze.textContent="系统信息",tt=P(),je=L("div"),ye=L("div"),He=L("span"),He.textContent="操作系统",ot=P(),_e=L("span"),Ft=Z(Me),Vt=P(),vt=L("div"),At=L("span"),At.textContent="内核版本",Wt=P(),qt=L("span"),lr=Z(Gt),_r=P(),jt=L("div"),Jt=L("span"),Jt.textContent="运行时间",pr=P(),Xt=L("span"),ar=Z(Yt),gr=P(),zt=L("div"),Zt=L("span"),Zt.textContent="进程数",mr=P(),Qt=L("span"),se=Z($t),s(a,"class","text-sm font-semibold text-gray-900 dark:text-white"),s(w,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),s(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),s(d,"class","flex items-center gap-2"),s(y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),be(y,"color",_t(r[5].cpu)),s(b,"class","flex items-center justify-between mb-2"),s(c,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(f,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),s(S,"class","flex items-center gap-2"),s(R,"class","text-[10px] text-gray-600 dark:text-gray-400"),s(Y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),be(Y,"color",_t(r[5].memory)),s(B,"class","flex items-center gap-2"),s(M,"class","flex items-center justify-between mb-2"),s(G,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),s(x,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),s(I,"class","flex items-center gap-2"),s(Q,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),be(Q,"color",_t(r[5].disk)),s(te,"class","flex items-center justify-between mb-2"),s(ae,"class","h-2 rounded-full transition-all duration-300"),be(ae,"width",r[5].disk+"%"),be(ae,"background-color",_t(r[5].disk)),s(le,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),s(he,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),s(X,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),s(We,"class","flex items-center gap-2 mb-3"),s(de,"class","flex items-center gap-2"),s(nt,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(Ce,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(Je,"class","flex items-center gap-2"),s(mt,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),s(et,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),s(Ue,"class","space-y-2"),s(Ne,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),s(Ze,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),s(He,"class","text-gray-600 dark:text-gray-400"),s(_e,"class","text-gray-900 dark:text-white font-medium"),s(ye,"class","flex justify-between py-1"),s(At,"class","text-gray-600 dark:text-gray-400"),s(qt,"class","text-gray-900 dark:text-white font-medium"),s(vt,"class","flex justify-between py-1"),s(Jt,"class","text-gray-600 dark:text-gray-400"),s(Xt,"class","text-gray-900 dark:text-white font-medium"),s(jt,"class","flex justify-between py-1"),s(Zt,"class","text-gray-600 dark:text-gray-400"),s(Qt,"class","text-gray-900 dark:text-white font-medium"),s(zt,"class","flex justify-between py-1"),s(je,"class","space-y-1.5 text-[10px]"),s(Ye,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),s(o,"class","p-3 space-y-3"),s(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(De,Ve){q(De,e,Ve),u(e,t),u(t,a),u(t,_),u(t,w),Qe.m(w,null),u(e,p),Ke&&Ke.m(e,null),u(e,i),u(e,o),u(o,f),u(f,b),u(b,d),u(b,g),u(b,y),u(y,v),u(y,n),u(f,h),lt&&lt.m(f,null),u(f,l),u(f,c),Et.m(c,null),u(f,m),pt&&pt.m(f,null),u(o,C),u(o,x),u(x,M),u(M,S),u(M,E),u(M,B),u(B,R),u(R,A),u(R,U),u(R,J),u(B,ie),u(B,Y),u(Y,H),u(Y,F),u(x,j),u(x,G),Lt.m(G,null),u(o,W),u(o,X),u(X,te),u(te,I),u(te,T),u(te,Q),u(Q,N),u(Q,$),u(X,ee),u(X,le),u(le,ae),u(X,ce),u(X,he),u(he,fe),u(fe,Se),u(fe,me),u(he,ke),u(he,ne),u(ne,ge),u(ne,Le),u(o,$e),u(o,Ne),u(Ne,We),u(Ne,st),u(Ne,Ue),u(Ue,Ce),u(Ce,de),u(Ce,Oe),u(Ce,nt),u(nt,dt),u(Ue,ct),u(Ue,et),u(et,Je),u(et,rt),u(et,mt),u(mt,Fe),u(o,it),u(o,Ye),u(Ye,Ze),u(Ye,tt),u(Ye,je),u(je,ye),u(ye,He),u(ye,ot),u(ye,_e),u(_e,Ft),u(je,Vt),u(je,vt),u(vt,At),u(vt,Wt),u(vt,qt),u(qt,lr),u(je,_r),u(je,jt),u(jt,Jt),u(jt,pr),u(jt,Xt),u(Xt,ar),u(je,gr),u(je,zt),u(zt,Zt),u(zt,mr),u(zt,Qt),u(Qt,se)},p(De,Ve){var qr,Gr;Ae!==(Ae=ve(De))&&(Qe.d(1),Qe=Ae(De),Qe&&(Qe.c(),Qe.m(w,null))),De[0]?Ke||(Ke=Fi(),Ke.c(),Ke.m(e,i)):Ke&&(Ke.d(1),Ke=null),Ve[0]&32&&k!==(k=De[5].cpu.toFixed(1)+"")&&ue(v,k),Ve[0]&32&&be(y,"color",_t(De[5].cpu)),De[8]["1min"]>0?lt?lt.p(De,Ve):(lt=Wi(De),lt.c(),lt.m(f,l)):lt&&(lt.d(1),lt=null),er===(er=Tr(De))&&Et?Et.p(De,Ve):(Et.d(1),Et=er(De),Et&&(Et.c(),Et.m(c,null))),De[4].length>0?pt?pt.p(De,Ve):(pt=ji(De),pt.c(),pt.m(f,null)):pt&&(pt.d(1),pt=null),Ve[0]&512&&O!==(O=De[9].used+"")&&ue(A,O),Ve[0]&512&&V!==(V=De[9].total+"")&&ue(J,V),Ve[0]&32&&D!==(D=De[5].memory.toFixed(2)+"")&&ue(H,D),Ve[0]&32&&be(Y,"color",_t(De[5].memory)),vr===(vr=Nr(De))&&Lt?Lt.p(De,Ve):(Lt.d(1),Lt=vr(De),Lt&&(Lt.c(),Lt.m(G,null))),Ve[0]&32&&z!==(z=De[5].disk+"")&&ue(N,z),Ve[0]&32&&be(Q,"color",_t(De[5].disk)),Ve[0]&32&&be(ae,"width",De[5].disk+"%"),Ve[0]&32&&be(ae,"background-color",_t(De[5].disk)),Ve[0]&128&&xe!==(xe=De[7].used+"")&&ue(me,xe),Ve[0]&128&&pe!==(pe=De[7].total+"")&&ue(Le,pe),Ve[0]&32&&Pe!==(Pe=wr(((qr=De[5].network)==null?void 0:qr.in)||0)+"")&&ue(dt,Pe),Ve[0]&32&&Ie!==(Ie=wr(((Gr=De[5].network)==null?void 0:Gr.out)||0)+"")&&ue(Fe,Ie),Ve[0]&64&&Me!==(Me=(De[6].os||"Unknown")+"")&&ue(Ft,Me),Ve[0]&64&&Gt!==(Gt=(De[6].kernel||"Unknown")+"")&&ue(lr,Gt),Ve[0]&64&&Yt!==(Yt=(De[6].uptime||"Unknown")+"")&&ue(ar,Yt),Ve[0]&64&&$t!==($t=(De[6].processes||"N/A")+"")&&ue(se,$t)},i:Ee,o:Ee,d(De){De&&K(e),Qe.d(),Ke&&Ke.d(),lt&&lt.d(),Et.d(),pt&&pt.d(),Lt.d()}}}function _t(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function wr(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,a=r;for(;a>=1024&&t<e.length-1;)a/=1024,t++;return`${a.toFixed(1)} ${e[t]}`}function Ui(r){if(r===0)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0,a=r;for(;a>=1024&&t<e.length-1;)a/=1024,t++;return`${a.toFixed(1)} ${e[t]}`}function lc(r,e,t){let a,_,w,p,i,o;gt(r,Ut,W=>t(13,i=W)),gt(r,Mt,W=>t(14,o=W));const f={cpu:0,memory:0,disk:0,network:{in:0,out:0}},b={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},d={used:"0 GB",total:"0 GB"},g={"1min":0,"5min":0,"15min":0},y={used:"0 GB",total:"0 GB"};let k=[],v=[],n=[],h={...f},l={...b},c={...d},m={...g},C={...y},x=new Map,M=new Map,S=new Map,E=new Map,B=new Map,R=new Map,O=new Map,A=new Map,U=null,V=null;function J(W){if(!W){t(2,k=[]),t(3,v=[]),t(4,n=[]),t(5,h={...f}),t(6,l={...b}),t(7,c={...d}),t(8,m={...g}),t(9,C={...y});return}t(2,k=x.get(W)||[]),t(3,v=M.get(W)||[]),t(4,n=S.get(W)||[]),t(5,h=E.get(W)||{...f}),t(6,l=B.get(W)||{...b}),t(7,c=R.get(W)||{...d}),t(8,m=O.get(W)||{...g}),t(9,C=A.get(W)||{...y})}function ie(W){W&&(x=new Map(x).set(W,k),M=new Map(M).set(W,v),S=new Map(S).set(W,n),E=new Map(E).set(W,h),B=new Map(B).set(W,l),R=new Map(R).set(W,c),O=new Map(O).set(W,m),A=new Map(A).set(W,C))}function Y(W){var N,$,ee,le,ae,ce,he,fe,Se,xe,me,ke,ne,ge,pe;if(!W)return null;const X=(N=W.cpu)!=null&&N.per_core&&Array.isArray(W.cpu.per_core)?W.cpu.per_core:null,te={cpu:typeof W.cpu=="number"?W.cpu:(($=W.cpu)==null?void 0:$.overall)||0,memory:typeof W.memory=="number"?W.memory:((ee=W.memory)==null?void 0:ee.used_percent)||0,disk:typeof W.disk=="number"?W.disk:((ce=(ae=(le=W.disk)==null?void 0:le.partitions)==null?void 0:ae[0])==null?void 0:ce.used_percent)||0,network:{in:typeof((he=W.network)==null?void 0:he.in)=="number"?W.network.in*(1024*1024):typeof((fe=W.network)==null?void 0:fe.rx_rate)=="number"?W.network.rx_rate:0,out:typeof((Se=W.network)==null?void 0:Se.out)=="number"?W.network.out*(1024*1024):typeof((xe=W.network)==null?void 0:xe.tx_rate)=="number"?W.network.tx_rate:0}},I=W.system?{os:W.system.os||b.os,kernel:W.system.kernel||b.kernel,uptime:W.system.uptime||b.uptime,processes:W.system.processes||b.processes}:null;let T=null;if((ke=(me=W.disk)==null?void 0:me.partitions)!=null&&ke[0]){const Le=W.disk.partitions[0],$e=(Le.used/(1024*1024*1024)).toFixed(1),Ne=(Le.total/(1024*1024*1024)).toFixed(1);T={used:`${$e} GB`,total:`${Ne} GB`}}let Q=null;(ne=W.cpu)!=null&&ne.load_average&&Array.isArray(W.cpu.load_average)&&W.cpu.load_average.length>=3&&(Q={"1min":W.cpu.load_average[0]||0,"5min":W.cpu.load_average[1]||0,"15min":W.cpu.load_average[2]||0});let z=null;if(((ge=W.memory)==null?void 0:ge.used)!==void 0&&((pe=W.memory)==null?void 0:pe.total)!==void 0){const Le=W.memory.used,$e=W.memory.total;z={used:Ui(Le),total:Ui($e)}}return{stats:te,cpuPerCore:X,systemInfo:I,diskInfo:T,loadInfo:Q,memoryDetail:z}}async function D(){const W=i;if(!W||!_||w)return;const{GetMonitoringData:X}=window.wailsBindings||{};if(typeof X=="function")try{const te=await X(W),I=Y(te);if(I){const T=[...x.get(W)||[],I.stats.cpu].slice(-60),Q=[...M.get(W)||[],I.stats.memory].slice(-60),z=I.cpuPerCore||S.get(W)||[],N=I.systemInfo||B.get(W)||{...b},$=I.diskInfo||R.get(W)||{...d},ee=I.loadInfo||O.get(W)||{...g},le=I.memoryDetail||A.get(W)||{...y},ae=I.stats;x=new Map(x).set(W,T),M=new Map(M).set(W,Q),S=new Map(S).set(W,z),E=new Map(E).set(W,ae),B=new Map(B).set(W,N),R=new Map(R).set(W,$),O=new Map(O).set(W,ee),A=new Map(A).set(W,le),W===i&&(t(5,h=ae),t(2,k=T),t(3,v=Q),t(4,n=z),t(6,l=N),t(7,c=$),t(8,m=ee),t(9,C=le))}}catch(te){console.error("Failed to fetch monitoring data:",te)}}or(()=>(U=setInterval(D,2e3),()=>{clearInterval(U)})),Er(()=>{U&&clearInterval(U)});const H=(W,X)=>{const te=X/(k.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`},F=(W,X)=>{const te=X/(k.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`},j=(W,X)=>{const te=X/(v.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`},G=(W,X)=>{const te=X/(v.length-1)*100,I=100-W;return`${X===0?"M":"L"} ${te} ${I}`};return r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,a=i?o.get(i):null),r.$$.dirty[0]&4096&&t(1,_=(a==null?void 0:a.connected)||!1),r.$$.dirty[0]&4096&&t(0,w=(a==null?void 0:a.type)==="local"),r.$$.dirty[0]&3&&t(11,p=_&&!w),r.$$.dirty[0]&8192&&t(10,V=i),r.$$.dirty[0]&9216&&V!==i&&(V&&ie(V),J(i)),r.$$.dirty[0]&10240&&i&&p&&D()},[w,_,k,v,n,h,l,c,m,C,V,p,a,i,o,H,F,j,G]}class ac extends ft{constructor(e){super(),ut(this,e,lc,oc,ht,{},null,[-1,-1])}}function cc(r){let e;return{c(){e=L("span"),e.textContent="✗ 无效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function hc(r){let e;return{c(){e=L("span"),e.textContent="✓ 有效",s(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function Ni(r){let e,t,a,_,w;return{c(){e=L("div"),t=oe("svg"),a=oe("path"),_=P(),w=Z(r[3]),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),s(t,"class","w-4 h-4"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(p,i){q(p,e,i),u(e,t),u(t,a),u(e,_),u(e,w)},p(p,i){i&8&&ue(w,p[3])},d(p){p&&K(e)}}}function Ki(r){let e,t,a;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(_,w){q(_,e,w),t||(a=re(e,"click",r[9]),t=!0)},p:Ee,d(_){_&&K(e),t=!1,a()}}}function dc(r){let e,t,a,_,w,p,i,o,f=r[5].chars+"",b,d,g=r[5].lines+"",y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U,V,J,ie,Y,D,H,F,j,G,W,X,te,I,T,Q,z,N,$,ee,le,ae,ce;function he(ke,ne){if(ke[4])return hc;if(ke[3])return cc}let fe=he(r),Se=fe&&fe(r),xe=r[3]&&Ni(r),me=r[1]&&Ki(r);return{c(){e=L("div"),t=L("div"),a=L("div"),_=L("label"),w=L("span"),w.textContent="输入 JSON",p=P(),Se&&Se.c(),i=P(),o=L("div"),b=Z(f),d=Z(" 字符 · "),y=Z(g),k=Z(" 行"),v=P(),n=L("textarea"),l=P(),xe&&xe.c(),c=P(),m=L("div"),C=L("button"),x=oe("svg"),M=oe("path"),S=P(),E=L("span"),E.textContent="格式化",R=P(),O=L("button"),A=oe("svg"),U=oe("path"),V=P(),J=L("span"),J.textContent="压缩",Y=P(),D=L("button"),H=oe("svg"),F=oe("path"),j=P(),G=L("span"),G.textContent="转义",X=P(),te=L("div"),I=L("div"),T=L("label"),T.textContent="输出",Q=P(),me&&me.c(),z=P(),N=L("textarea"),$=P(),ee=L("div"),le=L("button"),le.textContent="清空全部",s(_,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(o,"class","text-xs text-gray-500 dark:text-gray-400"),s(a,"class","flex items-center justify-between mb-2"),s(n,"placeholder","输入 JSON..."),s(n,"class",h="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),s(t,"class","relative"),s(M,"stroke-linecap","round"),s(M,"stroke-linejoin","round"),s(M,"stroke-width","2"),s(M,"d","M4 6h16M4 12h16m-7 6h7"),s(x,"class","w-4 h-4"),s(x,"fill","none"),s(x,"stroke","currentColor"),s(x,"viewBox","0 0 24 24"),s(E,"class","text-sm"),C.disabled=B=r[2]||!r[0].trim(),s(C,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(U,"stroke-linecap","round"),s(U,"stroke-linejoin","round"),s(U,"stroke-width","2"),s(U,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),s(A,"class","w-4 h-4"),s(A,"fill","none"),s(A,"stroke","currentColor"),s(A,"viewBox","0 0 24 24"),s(J,"class","text-sm"),O.disabled=ie=r[2]||!r[0].trim(),s(O,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(F,"stroke-linecap","round"),s(F,"stroke-linejoin","round"),s(F,"stroke-width","2"),s(F,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),s(H,"class","w-4 h-4"),s(H,"fill","none"),s(H,"stroke","currentColor"),s(H,"viewBox","0 0 24 24"),s(G,"class","text-sm"),D.disabled=W=r[2]||!r[0].trim(),s(D,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(m,"class","grid grid-cols-3 gap-3"),s(T,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),s(I,"class","flex items-center justify-between mb-2"),N.readOnly=!0,s(N,"placeholder","格式化后的 JSON 将显示在这里..."),s(N,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(le,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(ee,"class","flex justify-end"),s(e,"class","space-y-6")},m(ke,ne){q(ke,e,ne),u(e,t),u(t,a),u(a,_),u(_,w),u(_,p),Se&&Se.m(_,null),u(a,i),u(a,o),u(o,b),u(o,d),u(o,y),u(o,k),u(t,v),u(t,n),we(n,r[0]),u(t,l),xe&&xe.m(t,null),u(e,c),u(e,m),u(m,C),u(C,x),u(x,M),u(C,S),u(C,E),u(m,R),u(m,O),u(O,A),u(A,U),u(O,V),u(O,J),u(m,Y),u(m,D),u(D,H),u(H,F),u(D,j),u(D,G),u(e,X),u(e,te),u(te,I),u(I,T),u(I,Q),me&&me.m(I,null),u(te,z),u(te,N),we(N,r[1]),u(e,$),u(e,ee),u(ee,le),ae||(ce=[re(n,"input",r[13]),re(n,"keydown",r[11]),re(C,"click",r[6]),re(O,"click",r[7]),re(D,"click",r[8]),re(N,"input",r[14]),re(le,"click",r[10])],ae=!0)},p(ke,[ne]){fe!==(fe=he(ke))&&(Se&&Se.d(1),Se=fe&&fe(ke),Se&&(Se.c(),Se.m(_,null))),ne&32&&f!==(f=ke[5].chars+"")&&ue(b,f),ne&32&&g!==(g=ke[5].lines+"")&&ue(y,g),ne&8&&h!==(h="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(ke[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&s(n,"class",h),ne&1&&we(n,ke[0]),ke[3]?xe?xe.p(ke,ne):(xe=Ni(ke),xe.c(),xe.m(t,null)):xe&&(xe.d(1),xe=null),ne&5&&B!==(B=ke[2]||!ke[0].trim())&&(C.disabled=B),ne&5&&ie!==(ie=ke[2]||!ke[0].trim())&&(O.disabled=ie),ne&5&&W!==(W=ke[2]||!ke[0].trim())&&(D.disabled=W),ke[1]?me?me.p(ke,ne):(me=Ki(ke),me.c(),me.m(I,null)):me&&(me.d(1),me=null),ne&2&&we(N,ke[1])},i:Ee,o:Ee,d(ke){ke&&K(e),Se&&Se.d(),xe&&xe.d(),me&&me.d(),ae=!1,Be(ce)}}}function uc(r,e,t){let{themeStore:a}=e,_="",w="",p=!1,i="",o=!1,f={chars:0,lines:0};async function b(){if(!_.trim()){t(4,o=!1),t(3,i="");return}if(!window.wailsBindings){t(4,o=!1),t(3,i="Wails 绑定未加载");return}try{const m=await window.wailsBindings.ValidateJSON(_);t(4,o=m.valid),t(3,i=m.error||"")}catch(m){t(4,o=!1),t(3,i=m.message)}}function d(){t(5,f.chars=_.length,f),t(5,f.lines=_.split(`
`).length,f)}async function g(){if(!(!_.trim()||p||!window.wailsBindings)){t(2,p=!0),t(3,i="");try{t(1,w=await window.wailsBindings.FormatJSON(_)),t(4,o=!0),t(3,i="")}catch(m){t(3,i=m.message||"格式化失败")}finally{t(2,p=!1)}}}async function y(){if(!(!_.trim()||p||!window.wailsBindings)){t(2,p=!0),t(3,i="");try{t(1,w=await window.wailsBindings.MinifyJSON(_)),t(4,o=!0),t(3,i="")}catch(m){t(3,i=m.message||"压缩失败")}finally{t(2,p=!1)}}}async function k(){if(!(!_.trim()||p||!window.wailsBindings)){t(2,p=!0),t(3,i="");try{t(1,w=await window.wailsBindings.EscapeJSON(_)),t(4,o=!0),t(3,i="")}catch(m){t(3,i=m.message||"转义失败")}finally{t(2,p=!1)}}}async function v(){if(w)try{await navigator.clipboard.writeText(w)}catch(m){console.error("复制失败:",m)}}function n(){t(0,_=""),t(1,w=""),t(4,o=!1)}function h(m){(m.ctrlKey||m.metaKey)&&m.key.toLowerCase()==="enter"&&!p&&_.trim()&&(m.preventDefault(),g())}function l(){_=this.value,t(0,_)}function c(){w=this.value,t(1,w)}return r.$$set=m=>{"themeStore"in m&&t(12,a=m.themeStore)},b(),d(),[_,w,p,i,o,f,g,y,k,v,n,h,a,l,c]}class Vi extends ft{constructor(e){super(),ut(this,e,uc,dc,ht,{themeStore:12})}}function fc(r){let e,t,a,_=r[2]==="encode"?"编码":"解码",w;return{c(){e=oe("svg"),t=oe("path"),a=P(),w=Z(_),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,i){q(p,e,i),u(e,t),q(p,a,i),q(p,w,i)},p(p,i){i&4&&_!==(_=p[2]==="encode"?"编码":"解码")&&ue(w,_)},d(p){p&&(K(e),K(a),K(w))}}}function _c(r){let e,t,a,_;return{c(){e=oe("svg"),t=oe("circle"),a=oe("path"),_=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(a,"class","opacity-75"),s(a,"fill","currentColor"),s(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){q(w,e,p),u(e,t),u(e,a),q(w,_,p)},p:Ee,d(w){w&&(K(e),K(_))}}}function qi(r){let e,t,a;return{c(){e=L("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,s(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(_,w){q(_,e,w),t||(a=re(e,"click",r[5]),t=!0)},p:Ee,d(_){_&&K(e),t=!1,a()}}}function pc(r){let e,t,a,_,w,p,i,o,f,b,d,g,y=r[2]==="encode"?"输入文本":"输入 Base64",k,v,n,h,l,c,m,C,x,M,S,E,B=r[2]==="encode"?"Base64 输出":"解码结果",R,O,A,U,V,J,ie,Y,D,H,F,j;function G(I,T){return I[3]?_c:fc}let W=G(r),X=W(r),te=r[1]&&qi(r);return{c(){e=L("div"),t=L("div"),a=L("button"),_=Z("编码"),p=P(),i=L("button"),o=Z("解码"),b=P(),d=L("div"),g=L("label"),k=Z(y),v=P(),n=L("textarea"),l=P(),c=L("div"),m=L("button"),X.c(),x=P(),M=L("div"),S=L("div"),E=L("label"),R=Z(B),O=P(),te&&te.c(),A=P(),U=L("textarea"),J=P(),ie=L("div"),Y=L("button"),Y.textContent="清空全部",D=P(),H=L("button"),H.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,s(a,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(g,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(n,"placeholder",h=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),s(n,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),m.disabled=C=r[3]||!r[0].trim(),s(m,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(c,"class","flex items-center justify-center"),s(E,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(S,"class","flex items-center justify-between mb-2"),U.readOnly=!0,s(U,"placeholder",V=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),s(U,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),s(Y,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(H,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),s(ie,"class","flex justify-between items-center"),s(e,"class","space-y-6")},m(I,T){q(I,e,T),u(e,t),u(t,a),u(a,_),u(t,p),u(t,i),u(i,o),u(e,b),u(e,d),u(d,g),u(g,k),u(d,v),u(d,n),we(n,r[0]),u(e,l),u(e,c),u(c,m),X.m(m,null),u(e,x),u(e,M),u(M,S),u(S,E),u(E,R),u(S,O),te&&te.m(S,null),u(M,A),u(M,U),we(U,r[1]),u(e,J),u(e,ie),u(ie,Y),u(ie,D),u(ie,H),F||(j=[re(a,"click",r[10]),re(i,"click",r[11]),re(n,"input",r[12]),re(n,"keydown",r[8]),re(m,"click",r[4]),re(U,"input",r[13]),re(Y,"click",r[6]),re(H,"click",r[7])],F=!0)},p(I,[T]){T&4&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(a,"class",w),T&4&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(I[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),T&4&&y!==(y=I[2]==="encode"?"输入文本":"输入 Base64")&&ue(k,y),T&4&&h!==(h=I[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&s(n,"placeholder",h),T&1&&we(n,I[0]),W===(W=G(I))&&X?X.p(I,T):(X.d(1),X=W(I),X&&(X.c(),X.m(m,null))),T&9&&C!==(C=I[3]||!I[0].trim())&&(m.disabled=C),T&4&&B!==(B=I[2]==="encode"?"Base64 输出":"解码结果")&&ue(R,B),I[1]?te?te.p(I,T):(te=qi(I),te.c(),te.m(S,null)):te&&(te.d(1),te=null),T&4&&V!==(V=I[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&s(U,"placeholder",V),T&2&&we(U,I[1])},i:Ee,o:Ee,d(I){I&&K(e),X.d(),te&&te.d(),F=!1,Be(j)}}}function gc(r,e,t){let{themeStore:a}=e,_="",w="",p="encode",i=!1;async function o(){if(!(!_.trim()||i||!window.wailsBindings)){t(3,i=!0);try{p==="encode"?t(1,w=await window.wailsBindings.EncodeBase64(_)):t(1,w=await window.wailsBindings.DecodeBase64(_))}catch(h){t(1,w=""),console.error("处理失败:",h),alert("处理失败: "+(h.message||h))}finally{t(3,i=!1)}}}async function f(){if(w)try{await navigator.clipboard.writeText(w)}catch(h){console.error("复制失败:",h)}}function b(){t(0,_=""),t(1,w="")}function d(){t(2,p=p==="encode"?"decode":"encode"),t(0,_=""),t(1,w="")}function g(h){(h.ctrlKey||h.metaKey)&&h.key.toLowerCase()==="enter"&&!i&&_.trim()&&(h.preventDefault(),o())}const y=()=>t(2,p="encode"),k=()=>t(2,p="decode");function v(){_=this.value,t(0,_)}function n(){w=this.value,t(1,w)}return r.$$set=h=>{"themeStore"in h&&t(9,a=h.themeStore)},[_,w,p,i,o,f,b,d,g,a,y,k,v,n]}class Gi extends ft{constructor(e){super(),ut(this,e,gc,pc,ht,{themeStore:9})}}function Ji(r,e,t){const a=r.slice();return a[29]=e[t],a}function Xi(r,e,t){const a=r.slice();return a[29]=e[t],a}function Yi(r){let e,t=r[29].name+"",a;return{c(){e=L("option"),a=Z(t),e.__value=r[29].id,we(e,e.__value)},m(_,w){q(_,e,w),u(e,a)},p:Ee,d(_){_&&K(e)}}}function Zi(r){let e,t=r[29].name+"",a;return{c(){e=L("option"),a=Z(t),e.__value=r[29].id,we(e,e.__value)},m(_,w){q(_,e,w),u(e,a)},p:Ee,d(_){_&&K(e)}}}function Qi(r){let e,t,a,_,w,p,i,o,f,b;return{c(){e=L("div"),t=L("button"),a=Z("加密"),w=P(),p=L("button"),i=Z("解密"),s(t,"class",_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(p,"class",o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(d,g){q(d,e,g),u(e,t),u(t,a),u(e,w),u(e,p),u(p,i),f||(b=[re(t,"click",r[24]),re(p,"click",r[25])],f=!0)},p(d,g){g[0]&2&&_!==(_="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(t,"class",_),g[0]&2&&o!==(o="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[1]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(p,"class",o)},d(d){d&&K(e),f=!1,Be(b)}}}function $i(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U;return{c(){e=L("div"),t=L("div"),a=L("div"),_=L("label"),_.textContent="密钥（Hex）",w=P(),p=L("button"),p.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,i=P(),o=L("input"),f=P(),b=L("div"),d=Z("密钥长度: "),g=Z(r[9]),y=P(),k=L("div"),v=L("div"),n=L("label"),h=Z(r[11]),l=Z("（Hex）"),c=P(),m=L("button"),m.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            随机生成`,C=P(),x=L("input"),S=P(),E=L("div"),B=Z(r[11]),R=Z("长度: "),O=Z(r[10]),s(_,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(p,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(a,"class","flex items-center justify-between mb-2"),s(o,"type","text"),s(o,"placeholder","例如: 00112233445566778899aabbccddeeff"),s(o,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(n,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(m,"class","text-xs flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900 hover:bg-green-200 dark:hover:bg-green-800 rounded-lg transition-colors text-green-700 dark:text-green-300"),s(v,"class","flex items-center justify-between mb-2"),s(x,"type","text"),s(x,"placeholder",M=r[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),s(x,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(E,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),s(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(V,J){q(V,e,J),u(e,t),u(t,a),u(a,_),u(a,w),u(a,p),u(t,i),u(t,o),we(o,r[5]),u(t,f),u(t,b),u(b,d),u(b,g),u(e,y),u(e,k),u(k,v),u(v,n),u(n,h),u(n,l),u(v,c),u(v,m),u(k,C),u(k,x),we(x,r[6]),u(k,S),u(k,E),u(E,B),u(E,R),u(E,O),A||(U=[re(p,"click",r[19]),re(o,"input",r[26]),re(m,"click",r[20]),re(x,"input",r[27])],A=!0)},p(V,J){J[0]&32&&o.value!==V[5]&&we(o,V[5]),J[0]&512&&ue(g,V[9]),J[0]&2048&&ue(h,V[11]),J[0]&2048&&M!==(M=V[11]==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10")&&s(x,"placeholder",M),J[0]&64&&x.value!==V[6]&&we(x,V[6]),J[0]&2048&&ue(B,V[11]),J[0]&1024&&ue(O,V[10])},d(V){V&&K(e),A=!1,Be(U)}}}function mc(r){let e,t,a,_=r[2]?"计算哈希":r[1]==="decrypt"?"解密":"加密",w;return{c(){e=oe("svg"),t=oe("path"),a=P(),w=Z(_),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(p,i){q(p,e,i),u(e,t),q(p,a,i),q(p,w,i)},p(p,i){i[0]&6&&_!==(_=p[2]?"计算哈希":p[1]==="decrypt"?"解密":"加密")&&ue(w,_)},d(p){p&&(K(e),K(a),K(w))}}}function vc(r){let e,t,a,_;return{c(){e=oe("svg"),t=oe("circle"),a=oe("path"),_=Z(`
        处理中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(a,"class","opacity-75"),s(a,"fill","currentColor"),s(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){q(w,e,p),u(e,t),u(e,a),q(w,_,p)},p:Ee,d(w){w&&(K(e),K(_))}}}function es(r){let e,t,a,_,w,p,i,o=r[2]?"哈希值":r[1]==="decrypt"?"明文":"Base64 密文",f,b,d,g,y,k,v,n,h,l,c=r[4].length+"",m,C,x,M;return{c(){e=L("div"),t=L("div"),a=L("label"),_=L("span"),w=Z(r[12]),p=P(),i=L("span"),f=Z(o),b=P(),d=L("button"),d.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,g=P(),y=L("div"),k=L("code"),v=Z(r[4]),n=P(),h=L("div"),l=Z("长度: "),m=Z(c),C=Z(" 字符"),s(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(d,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(k,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),s(y,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),s(h,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(S,E){q(S,e,E),u(e,t),u(t,a),u(a,_),u(_,w),u(a,p),u(a,i),u(i,f),u(t,b),u(t,d),u(e,g),u(e,y),u(y,k),u(k,v),u(e,n),u(e,h),u(h,l),u(h,m),u(h,C),x||(M=re(d,"click",r[15]),x=!0)},p(S,E){E[0]&4096&&ue(w,S[12]),E[0]&6&&o!==(o=S[2]?"哈希值":S[1]==="decrypt"?"明文":"Base64 密文")&&ue(f,o),E[0]&16&&ue(v,S[4]),E[0]&16&&c!==(c=S[4].length+"")&&ue(m,c)},d(S){S&&K(e),x=!1,M()}}}function bc(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v=r[2]?"输入文本":r[1]==="decrypt"?"输入 Base64 密文":"输入明文",n,h,l,c,m,C=r[3].length+"",x,M,S,E,B,R,O,A,U,V,J,ie,Y=ze(r[13].filter(ts)),D=[];for(let T=0;T<Y.length;T+=1)D[T]=Yi(Xi(r,Y,T));let H=ze(r[13].filter(rs)),F=[];for(let T=0;T<H.length;T+=1)F[T]=Zi(Ji(r,H,T));let j=!r[2]&&Qi(r),G=!r[2]&&$i(r);function W(T,Q){return T[7]?vc:mc}let X=W(r),te=X(r),I=r[4]&&es(r);return{c(){e=L("div"),t=L("div"),a=L("label"),a.textContent="选择算法",_=P(),w=L("div"),p=L("div"),i=L("select"),o=L("optgroup");for(let T=0;T<D.length;T+=1)D[T].c();f=L("optgroup");for(let T=0;T<F.length;T+=1)F[T].c();b=P(),j&&j.c(),d=P(),G&&G.c(),g=P(),y=L("div"),k=L("label"),n=Z(v),h=P(),l=L("textarea"),c=P(),m=L("div"),x=Z(C),M=Z(" 字符"),S=P(),E=L("div"),B=L("button"),te.c(),O=P(),I&&I.c(),A=P(),U=L("div"),V=L("button"),V.textContent="清空全部",s(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(o,"label","Hash"),s(f,"label","加密解密"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[0]===void 0&&ur(()=>r[22].call(i)),s(p,"class","flex-1"),s(w,"class","flex flex-col md:flex-row gap-3"),s(k,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),s(l,"placeholder",r[8]),s(l,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),s(m,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),B.disabled=R=r[7]||!r[3].trim()||!r[2]&&(!r[5].trim()||!r[6].trim()),s(B,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(E,"class","flex justify-center"),s(V,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(U,"class","flex justify-end"),s(e,"class","space-y-6")},m(T,Q){q(T,e,Q),u(e,t),u(t,a),u(t,_),u(t,w),u(w,p),u(p,i),u(i,o);for(let z=0;z<D.length;z+=1)D[z]&&D[z].m(o,null);u(i,f);for(let z=0;z<F.length;z+=1)F[z]&&F[z].m(f,null);xr(i,r[0],!0),u(w,b),j&&j.m(w,null),u(e,d),G&&G.m(e,null),u(e,g),u(e,y),u(y,k),u(k,n),u(y,h),u(y,l),we(l,r[3]),u(y,c),u(y,m),u(m,x),u(m,M),u(e,S),u(e,E),u(E,B),te.m(B,null),u(e,O),I&&I.m(e,null),u(e,A),u(e,U),u(U,V),J||(ie=[re(i,"change",r[22]),re(i,"change",r[23]),re(l,"input",r[28]),re(l,"keydown",r[18]),re(B,"click",r[14]),re(V,"click",r[16])],J=!0)},p(T,Q){if(Q[0]&8192){Y=ze(T[13].filter(ts));let z;for(z=0;z<Y.length;z+=1){const N=Xi(T,Y,z);D[z]?D[z].p(N,Q):(D[z]=Yi(N),D[z].c(),D[z].m(o,null))}for(;z<D.length;z+=1)D[z].d(1);D.length=Y.length}if(Q[0]&8192){H=ze(T[13].filter(rs));let z;for(z=0;z<H.length;z+=1){const N=Ji(T,H,z);F[z]?F[z].p(N,Q):(F[z]=Zi(N),F[z].c(),F[z].m(f,null))}for(;z<F.length;z+=1)F[z].d(1);F.length=H.length}Q[0]&8193&&xr(i,T[0]),T[2]?j&&(j.d(1),j=null):j?j.p(T,Q):(j=Qi(T),j.c(),j.m(w,null)),T[2]?G&&(G.d(1),G=null):G?G.p(T,Q):(G=$i(T),G.c(),G.m(e,g)),Q[0]&6&&v!==(v=T[2]?"输入文本":T[1]==="decrypt"?"输入 Base64 密文":"输入明文")&&ue(n,v),Q[0]&256&&s(l,"placeholder",T[8]),Q[0]&8&&we(l,T[3]),Q[0]&8&&C!==(C=T[3].length+"")&&ue(x,C),X===(X=W(T))&&te?te.p(T,Q):(te.d(1),te=X(T),te&&(te.c(),te.m(B,null))),Q[0]&236&&R!==(R=T[7]||!T[3].trim()||!T[2]&&(!T[5].trim()||!T[6].trim()))&&(B.disabled=R),T[4]?I?I.p(T,Q):(I=es(T),I.c(),I.m(e,A)):I&&(I.d(1),I=null)},i:Ee,o:Ee,d(T){T&&K(e),hr(D,T),hr(F,T),j&&j.d(),G&&G.d(),te.d(),I&&I.d(),J=!1,Be(ie)}}}const ts=r=>r.type==="hash",rs=r=>r.type==="crypto";function yc(r,e,t){let a,_,w,p,i,o,{themeStore:f}=e,b="",d="",g="md5",y="encrypt",k="",v="",n=!1;const h=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];async function l(){if(!(!b.trim()||n||!window.wailsBindings)&&!(!a&&(!k.trim()||!v.trim()))){t(7,n=!0),t(4,d="");try{a?t(4,d=await window.wailsBindings.CalculateHash(b,g)):y==="encrypt"?t(4,d=await window.wailsBindings.EncryptText(b,g,k,v)):t(4,d=await window.wailsBindings.DecryptText(b,g,k,v))}catch(J){t(4,d=""),console.error("操作失败:",J),alert("操作失败: "+(J.message||J))}finally{t(7,n=!1)}}}async function c(){if(d)try{await navigator.clipboard.writeText(d)}catch(J){console.error("复制失败:",J)}}function m(){t(3,b=""),t(4,d=""),t(5,k=""),t(6,v="")}function C(){t(3,b=""),t(4,d="")}function x(J){(J.ctrlKey||J.metaKey)&&J.key.toLowerCase()==="enter"&&!n&&b.trim()&&(J.preventDefault(),l())}function M(){let J;g==="sm4-cbc"?J=16:J=32;const ie=new Uint8Array(J);crypto.getRandomValues(ie),t(5,k=Array.from(ie).map(Y=>Y.toString(16).padStart(2,"0")).join(""))}function S(){const J=g==="aes-gcm"?12:16,ie=new Uint8Array(J);crypto.getRandomValues(ie),t(6,v=Array.from(ie).map(Y=>Y.toString(16).padStart(2,"0")).join(""))}function E(){g=Ws(this),t(0,g),t(13,h)}const B=()=>{m()},R=()=>{t(1,y="encrypt"),C()},O=()=>{t(1,y="decrypt"),C()};function A(){k=this.value,t(5,k)}function U(){v=this.value,t(6,v)}function V(){b=this.value,t(3,b)}return r.$$set=J=>{"themeStore"in J&&t(21,f=J.themeStore)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,a=(()=>{const J=h.find(ie=>ie.id===g);return(J==null?void 0:J.type)==="hash"})()),r.$$.dirty[0]&1&&t(12,_=(()=>{var J;return((J=h.find(ie=>ie.id===g))==null?void 0:J.name)||""})()),r.$$.dirty[0]&1&&t(11,w=g==="aes-gcm"?"Nonce":"IV"),r.$$.dirty[0]&1&&t(10,p=g==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"),r.$$.dirty[0]&1&&t(9,i=g==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"),r.$$.dirty[0]&6&&t(8,o=a?"输入要计算哈希的文本...":y==="decrypt"?"输入 Base64 密文...":"输入要加密的明文...")},[g,y,a,b,d,k,v,n,o,i,p,w,_,h,l,c,m,C,x,M,S,f,E,B,R,O,A,U,V]}class is extends ft{constructor(e){super(),ut(this,e,yc,bc,ht,{themeStore:21},null,[-1,-1])}}function wc(r){let e,t,a,_,w,p,i,o,f,b,d,g=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",y,k,v;return{c(){e=L("div"),t=L("div"),a=L("label"),a.textContent="输入日期时间",_=P(),w=L("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,p=P(),i=L("input"),f=P(),b=L("div"),d=Z("格式: "),y=Z(g),s(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(w,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),s(t,"class","flex items-center justify-between mb-2"),s(i,"type","text"),s(i,"placeholder",o=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),s(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),s(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(n,h){q(n,e,h),u(e,t),u(t,a),u(t,_),u(t,w),u(e,p),u(e,i),we(i,r[3]),u(e,f),u(e,b),u(b,d),u(b,y),k||(v=[re(w,"click",r[9]),re(i,"input",r[19]),re(i,"keydown",r[12])],k=!0)},p(n,h){h&2&&o!==(o=n[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&s(i,"placeholder",o),h&8&&i.value!==n[3]&&we(i,n[3]),h&2&&g!==(g=n[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&ue(y,g)},d(n){n&&K(e),k=!1,Be(v)}}}function kc(r){let e,t,a,_,w=r[1]==="milliseconds"?"毫秒":"秒",p,i,o,f,b,d,g,y,k;return{c(){e=L("div"),t=L("div"),a=L("label"),_=Z("输入 Unix 时间戳（"),p=Z(w),i=Z("）"),o=P(),f=L("button"),f.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,b=P(),d=L("input"),s(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(f,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),s(t,"class","flex items-center justify-between mb-2"),s(d,"type","number"),s(d,"placeholder",g=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),s(d,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,n){q(v,e,n),u(e,t),u(t,a),u(a,_),u(a,p),u(a,i),u(t,o),u(t,f),u(e,b),u(e,d),we(d,r[2]),y||(k=[re(f,"click",r[8]),re(d,"input",r[18]),re(d,"keydown",r[12])],y=!0)},p(v,n){n&2&&w!==(w=v[1]==="milliseconds"?"毫秒":"秒")&&ue(p,w),n&2&&g!==(g=v[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&s(d,"placeholder",g),n&4&&jr(d.value)!==v[2]&&we(d,v[2])},d(v){v&&K(e),y=!1,Be(k)}}}function Sc(r){let e,t,a;return{c(){e=oe("svg"),t=oe("path"),a=Z(`
        转换`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){q(_,e,w),u(e,t),q(_,a,w)},d(_){_&&(K(e),K(a))}}}function Cc(r){let e,t,a,_;return{c(){e=oe("svg"),t=oe("circle"),a=oe("path"),_=Z(`
        转换中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(a,"class","opacity-75"),s(a,"fill","currentColor"),s(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-4 h-4"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){q(w,e,p),u(e,t),u(e,a),q(w,_,p)},d(w){w&&(K(e),K(_))}}}function ss(r){let e,t,a,_=r[0]==="toDateTime"?"日期时间":"时间戳",w,p,i,o,f,b,d,g,y;return{c(){e=L("div"),t=L("div"),a=L("label"),w=Z(_),p=P(),i=L("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,o=P(),f=L("div"),b=L("code"),d=Z(r[4]),s(a,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),s(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),s(t,"class","flex items-center justify-between mb-2"),s(b,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),s(f,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(k,v){q(k,e,v),u(e,t),u(t,a),u(a,w),u(t,p),u(t,i),u(e,o),u(e,f),u(f,b),u(b,d),g||(y=re(i,"click",r[10]),g=!0)},p(k,v){v&1&&_!==(_=k[0]==="toDateTime"?"日期时间":"时间戳")&&ue(w,_),v&16&&ue(d,k[4])},d(k){k&&K(e),g=!1,y()}}}function xc(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O=r[1]==="milliseconds"?"毫秒":"秒",A,U,V,J,ie,Y,D,H,F,j,G,W,X,te,I;function T(ae,ce){return ae[0]==="toDateTime"?kc:wc}let Q=T(r),z=Q(r);function N(ae,ce){return ae[5]?Cc:Sc}let $=N(r),ee=$(r),le=r[4]&&ss(r);return{c(){e=L("div"),t=L("div"),a=L("button"),_=Z("时间戳 → 日期时间"),p=P(),i=L("button"),o=Z("日期时间 → 时间戳"),b=P(),d=L("div"),g=L("div"),y=L("button"),k=Z("秒"),n=P(),h=L("button"),l=Z("毫秒"),m=P(),C=L("div"),x=L("div"),M=oe("svg"),S=oe("path"),E=P(),B=L("span"),R=Z("当前时间戳（"),A=Z(O),U=Z("）: "),V=L("strong"),J=Z(r[6]),ie=P(),z.c(),Y=P(),D=L("div"),H=L("button"),ee.c(),j=P(),le&&le.c(),G=P(),W=L("div"),X=L("button"),X.textContent="清空全部",s(a,"class",w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(i,"class",f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(y,"class",v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(h,"class",c="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),s(g,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),s(d,"class","flex justify-end"),s(S,"stroke-linecap","round"),s(S,"stroke-linejoin","round"),s(S,"stroke-width","2"),s(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(M,"class","w-5 h-5"),s(M,"fill","none"),s(M,"stroke","currentColor"),s(M,"viewBox","0 0 24 24"),s(V,"class","font-mono"),s(x,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),s(C,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),H.disabled=F=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),s(H,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),s(D,"class","flex justify-center"),s(X,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),s(W,"class","flex justify-end"),s(e,"class","space-y-6")},m(ae,ce){q(ae,e,ce),u(e,t),u(t,a),u(a,_),u(t,p),u(t,i),u(i,o),u(e,b),u(e,d),u(d,g),u(g,y),u(y,k),u(g,n),u(g,h),u(h,l),u(e,m),u(e,C),u(C,x),u(x,M),u(M,S),u(x,E),u(x,B),u(B,R),u(B,A),u(B,U),u(B,V),u(V,J),u(e,ie),z.m(e,null),u(e,Y),u(e,D),u(D,H),ee.m(H,null),u(e,j),le&&le.m(e,null),u(e,G),u(e,W),u(W,X),te||(I=[re(a,"click",r[14]),re(i,"click",r[15]),re(y,"click",r[16]),re(h,"click",r[17]),re(H,"click",r[7]),re(X,"click",r[11])],te=!0)},p(ae,[ce]){ce&1&&w!==(w="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ae[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(a,"class",w),ce&1&&f!==(f="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ae[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(i,"class",f),ce&2&&v!==(v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ae[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(y,"class",v),ce&2&&c!==(c="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ae[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&s(h,"class",c),ce&2&&O!==(O=ae[1]==="milliseconds"?"毫秒":"秒")&&ue(A,O),ce&64&&ue(J,ae[6]),Q===(Q=T(ae))&&z?z.p(ae,ce):(z.d(1),z=Q(ae),z&&(z.c(),z.m(e,Y))),$!==($=N(ae))&&(ee.d(1),ee=$(ae),ee&&(ee.c(),ee.m(H,null))),ce&45&&F!==(F=ae[5]||(ae[0]==="toDateTime"?!ae[2].trim():!ae[3].trim()))&&(H.disabled=F),ae[4]?le?le.p(ae,ce):(le=ss(ae),le.c(),le.m(e,G)):le&&(le.d(1),le=null)},i:Ee,o:Ee,d(ae){ae&&K(e),z.d(),ee.d(),le&&le.d(),te=!1,Be(I)}}}const Ec="2006-01-02 15:04:05",Lc="2006-01-02 15:04:05.000";function Mc(r,e,t){let{themeStore:a}=e,_="toDateTime",w="seconds",p="",i="",o="",f=!1,b=0;function d(){const E=Date.now();t(6,b=w==="milliseconds"?E:Math.floor(E/1e3))}function g(){return w==="milliseconds"?Lc:Ec}async function y(){if(window.wailsBindings){t(5,f=!0),t(4,o="");try{if(_==="toDateTime"){const E=parseInt(p.trim());if(isNaN(E))throw new Error("请输入有效的时间戳");w==="milliseconds"?t(4,o=await window.wailsBindings.TimestampToDateTimeMs(E,g())):t(4,o=await window.wailsBindings.TimestampToDateTime(E,g()))}else{if(!i.trim())throw new Error("请输入日期时间");if(w==="milliseconds"){const E=await window.wailsBindings.DateTimeToTimestampMs(i,g());t(4,o=E.toString())}else{const E=await window.wailsBindings.DateTimeToTimestamp(i,g());t(4,o=E.toString())}}}catch(E){t(4,o=""),console.error("转换失败:",E),alert("转换失败: "+(E.message||E))}finally{t(5,f=!1)}}}async function k(){if(window.wailsBindings)try{const E=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,p=E.toString())}catch(E){console.error("获取当前时间戳失败:",E)}}async function v(){if(window.wailsBindings)try{const E=w==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),B=w==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(E,g()):await window.wailsBindings.TimestampToDateTime(E,g());t(3,i=B)}catch(E){console.error("获取当前时间失败:",E)}}async function n(){if(o)try{await navigator.clipboard.writeText(o)}catch(E){console.error("复制失败:",E)}}function h(){t(2,p=""),t(3,i=""),t(4,o="")}function l(E){(E.ctrlKey||E.metaKey)&&E.key.toLowerCase()==="enter"&&!f&&(_==="toDateTime"&&p.trim()||_==="toTimestamp"&&i.trim())&&(E.preventDefault(),y())}const c=()=>{t(0,_="toDateTime"),h()},m=()=>{t(0,_="toTimestamp"),h()},C=()=>{t(1,w="seconds"),h()},x=()=>{t(1,w="milliseconds"),h()};function M(){p=jr(this.value),t(2,p)}function S(){i=this.value,t(3,i)}return r.$$set=E=>{"themeStore"in E&&t(13,a=E.themeStore)},d(),[_,w,p,i,o,f,b,y,k,v,n,h,l,a,c,m,C,x,M,S]}class ns extends ft{constructor(e){super(),ut(this,e,Mc,xc,ht,{themeStore:13})}}function os(r,e,t){const a=r.slice();return a[12]=e[t],a[14]=t,a}function Dc(r){let e,t,a,_;return{c(){e=oe("svg"),t=oe("path"),a=P(),_=L("span"),_.textContent="生成 UUID v4",s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),s(e,"class","w-6 h-6"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(w,p){q(w,e,p),u(e,t),q(w,a,p),q(w,_,p)},d(w){w&&(K(e),K(a),K(_))}}}function Tc(r){let e,t,a,_;return{c(){e=oe("svg"),t=oe("circle"),a=oe("path"),_=Z(`
        生成中...`),s(t,"class","opacity-25"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(t,"stroke","currentColor"),s(t,"stroke-width","4"),s(a,"class","opacity-75"),s(a,"fill","currentColor"),s(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(e,"class","animate-spin w-6 h-6"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(w,p){q(w,e,p),u(e,t),u(e,a),q(w,_,p)},d(w){w&&(K(e),K(_))}}}function ls(r){let e,t,a,_,w,p,i,o,f,b,d;function g(v,n){return v[3]===v[0]?Ac:Bc}let y=g(r),k=y(r);return{c(){e=L("div"),t=L("div"),a=L("label"),a.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,_=P(),w=L("button"),k.c(),p=P(),i=L("div"),o=L("code"),f=Z(r[0]),s(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(w,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),s(t,"class","flex items-center justify-between mb-3"),s(o,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),s(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(v,n){q(v,e,n),u(e,t),u(t,a),u(t,_),u(t,w),k.m(w,null),u(e,p),u(e,i),u(i,o),u(o,f),b||(d=re(w,"click",r[9]),b=!0)},p(v,n){y!==(y=g(v))&&(k.d(1),k=y(v),k&&(k.c(),k.m(w,null))),n&1&&ue(f,v[0])},d(v){v&&K(e),k.d(),b=!1,d()}}}function Bc(r){let e,t,a;return{c(){e=oe("svg"),t=oe("path"),a=Z(`
            复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){q(_,e,w),u(e,t),q(_,a,w)},d(_){_&&(K(e),K(a))}}}function Ac(r){let e,t,a;return{c(){e=oe("svg"),t=oe("path"),a=Z(`
            已复制`),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){q(_,e,w),u(e,t),q(_,a,w)},d(_){_&&(K(e),K(a))}}}function as(r){let e,t,a,_,w,p,i,o,f=r[1].length+"",b,d,g,y,k,v,n,h,l=ze(r[1]),c=[];for(let m=0;m<l.length;m+=1)c[m]=cs(os(r,l,m));return{c(){e=L("div"),t=L("div"),a=L("label"),_=oe("svg"),w=oe("path"),p=Z(`
          历史记录
          `),i=L("span"),o=Z("("),b=Z(f),d=Z("/10)"),g=P(),y=L("button"),y.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,k=P(),v=L("div");for(let m=0;m<c.length;m+=1)c[m].c();s(w,"stroke-linecap","round"),s(w,"stroke-linejoin","round"),s(w,"stroke-width","2"),s(w,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),s(_,"class","w-4 h-4"),s(_,"fill","none"),s(_,"stroke","currentColor"),s(_,"viewBox","0 0 24 24"),s(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),s(a,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),s(y,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),s(t,"class","flex items-center justify-between mb-3"),s(v,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(m,C){q(m,e,C),u(e,t),u(t,a),u(a,_),u(_,w),u(a,p),u(a,i),u(i,o),u(i,b),u(i,d),u(t,g),u(t,y),u(e,k),u(e,v);for(let x=0;x<c.length;x+=1)c[x]&&c[x].m(v,null);n||(h=re(y,"click",r[6]),n=!0)},p(m,C){if(C&2&&f!==(f=m[1].length+"")&&ue(b,f),C&170){l=ze(m[1]);let x;for(x=0;x<l.length;x+=1){const M=os(m,l,x);c[x]?c[x].p(M,C):(c[x]=cs(M),c[x].c(),c[x].m(v,null))}for(;x<c.length;x+=1)c[x].d(1);c.length=l.length}},d(m){m&&K(e),hr(c,m),n=!1,h()}}}function Rc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),s(e,"class","w-4 h-4"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function Oc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M5 13l4 4L19 7"),s(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function cs(r){let e,t,a=r[12]+"",_,w,p,i,o,f,b,d,g;function y(){return r[10](r[12])}function k(l,c){return l[3]===l[12]?Oc:Rc}let v=k(r),n=v(r);function h(){return r[11](r[12])}return{c(){e=L("div"),t=L("code"),_=Z(a),w=P(),p=L("div"),i=L("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',o=P(),f=L("button"),n.c(),b=P(),s(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),s(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(i,"title","使用此 UUID"),s(f,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),s(f,"title","复制"),s(p,"class","flex items-center gap-2 shrink-0"),s(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(l,c){q(l,e,c),u(e,t),u(t,_),u(e,w),u(e,p),u(p,i),u(p,o),u(p,f),n.m(f,null),u(e,b),d||(g=[re(i,"click",y),re(f,"click",h)],d=!0)},p(l,c){r=l,c&2&&a!==(a=r[12]+"")&&ue(_,a),v!==(v=k(r))&&(n.d(1),n=v(r),n&&(n.c(),n.m(f,null)))},d(l){l&&K(e),n.d(),d=!1,Be(g)}}}function hs(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',s(e,"class","text-center py-8")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function Pc(r){let e,t,a,_,w,p,i,o,f,b;function d(h,l){return h[2]?Tc:Dc}let g=d(r),y=g(r),k=r[0]&&ls(r),v=r[1].length>0&&as(r),n=!r[0]&&hs();return{c(){e=L("div"),t=L("div"),a=L("button"),y.c(),_=P(),w=L("div"),p=P(),k&&k.c(),i=P(),v&&v.c(),o=P(),n&&n.c(),s(w,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),a.disabled=r[2],s(a,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),s(t,"class","text-center"),s(e,"class","space-y-6")},m(h,l){q(h,e,l),u(e,t),u(t,a),y.m(a,null),u(a,_),u(a,w),u(e,p),k&&k.m(e,null),u(e,i),v&&v.m(e,null),u(e,o),n&&n.m(e,null),f||(b=re(a,"click",r[4]),f=!0)},p(h,[l]){g!==(g=d(h))&&(y.d(1),y=g(h),y&&(y.c(),y.m(a,_))),l&4&&(a.disabled=h[2]),h[0]?k?k.p(h,l):(k=ls(h),k.c(),k.m(e,i)):k&&(k.d(1),k=null),h[1].length>0?v?v.p(h,l):(v=as(h),v.c(),v.m(e,o)):v&&(v.d(1),v=null),h[0]?n&&(n.d(1),n=null):n||(n=hs(),n.c(),n.m(e,null))},i:Ee,o:Ee,d(h){h&&K(e),y.d(),k&&k.d(),v&&v.d(),n&&n.d(),f=!1,b()}}}function Hc(r,e,t){let{themeStore:a}=e,_="",w=[],p=!1,i=null;async function o(){if(window.wailsBindings){t(2,p=!0);try{const v=await window.wailsBindings.GenerateUUIDv4();t(0,_=v),w.length<10?t(1,w=[v,...w]):t(1,w=[v,...w.slice(0,9)])}catch(v){console.error("UUID 生成失败:",v),alert("UUID 生成失败: "+(v.message||v))}finally{t(2,p=!1)}}}async function f(v){try{await navigator.clipboard.writeText(v),t(3,i=v),setTimeout(()=>t(3,i=null),2e3)}catch(n){console.error("复制失败:",n)}}function b(){t(1,w=[])}function d(v){t(0,_=v)}const g=()=>f(_),y=v=>d(v),k=v=>f(v);return r.$$set=v=>{"themeStore"in v&&t(8,a=v.themeStore)},[_,w,p,i,o,f,b,d,a,g,y,k]}class ds extends ft{constructor(e){super(),ut(this,e,Hc,Pc,ht,{themeStore:8})}}function us(r,e,t){const a=r.slice();return a[12]=e[t],a}function fs(r){let e,t,a,_,w,p,i,o,f,b,d,g=[],y=new Map,k,v,n,h,l,c,m,C,x,M=ze(r[4]);const S=O=>O[12].id;for(let O=0;O<M.length;O+=1){let A=us(r,M,O),U=S(A);y.set(U,g[O]=ps(U,A))}const E=[Fc,Ic],B=[];function R(O,A){return O[3]?0:1}return l=R(r),c=B[l]=E[l](r),{c(){e=L("div"),t=L("div"),a=P(),_=L("div"),w=L("div"),p=L("div"),i=L("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',o=P(),f=L("button"),f.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=P(),d=L("div");for(let O=0;O<g.length;O+=1)g[O].c();k=P(),v=L("div"),v.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',n=P(),h=L("div"),c.c(),s(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),s(f,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),s(f,"title","关闭"),s(p,"class","flex items-center justify-between mb-6"),s(d,"class","space-y-2 flex-1 overflow-y-auto"),s(v,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),s(w,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),s(h,"class","flex-1 flex flex-col overflow-hidden"),s(_,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),s(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),s(e,"role","dialog"),s(e,"aria-modal","true"),s(e,"tabindex","-1")},m(O,A){q(O,e,A),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),u(p,i),u(p,o),u(p,f),u(w,b),u(w,d);for(let U=0;U<g.length;U+=1)g[U]&&g[U].m(d,null);u(w,k),u(w,v),u(_,n),u(_,h),B[l].m(h,null),r[11](e),m=!0,C||(x=[re(f,"click",r[9]),re(e,"click",r[5]),re(e,"keydown",r[8])],C=!0)},p(O,A){A&88&&(M=ze(O[4]),g=Tt(g,A,S,1,O,M,y,d,It,ps,null,us));let U=l;l=R(O),l===U?B[l].p(O,A):(St(),Re(B[U],1,1,()=>{B[U]=null}),Ct(),c=B[l],c?c.p(O,A):(c=B[l]=E[l](O),c.c()),Te(c,1),c.m(h,null))},i(O){m||(Te(c),m=!0)},o(O){Re(c),m=!1},d(O){O&&K(e);for(let A=0;A<g.length;A+=1)g[A].d();B[l].d(),r[11](null),C=!1,Be(x)}}}function _s(r){let e;return{c(){e=L("span"),s(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-cyan-400 via-sky-500 to-indigo-500")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function ps(r,e){let t,a,_,w=e[12].icon+"",p,i,o,f=e[12].name+"",b,d,g,y,k,v,n=e[3]===e[12].id&&_s();function h(){return e[10](e[12])}return{key:r,first:null,c(){t=L("button"),n&&n.c(),a=P(),_=L("span"),p=Z(w),i=P(),o=L("span"),b=Z(f),g=P(),s(_,"class",`text-2xl ${e[12].color}`),s(o,"class",d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),s(t,"class",y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(l,c){q(l,t,c),n&&n.m(t,null),u(t,a),u(t,_),u(_,p),u(t,i),u(t,o),u(o,b),u(t,g),k||(v=re(t,"click",h),k=!0)},p(l,c){e=l,e[3]===e[12].id?n||(n=_s(),n.c(),n.m(t,a)):n&&(n.d(1),n=null),c&8&&d!==(d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&s(o,"class",d),c&8&&y!==(y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&s(t,"class",y)},d(l){l&&K(t),n&&n.d(),k=!1,v()}}}function Ic(r){let e;return{c(){e=L("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',s(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,a){q(t,e,a)},p:Ee,i:Ee,o:Ee,d(t){t&&K(e)}}}function Fc(r){var l,c;let e,t,a,_=((l=r[7]())==null?void 0:l.icon)+"",w,p,i=((c=r[7]())==null?void 0:c.name)+"",o,f,b,d,g,y,k;const v=[Nc,Uc,zc,jc,Wc],n=[];function h(m,C){return m[3]==="json"?0:m[3]==="base64"?1:m[3]==="hash"?2:m[3]==="timestamp"?3:m[3]==="uuid"?4:-1}return~(g=h(r))&&(y=n[g]=v[g](r)),{c(){var m;e=L("div"),t=L("h2"),a=L("span"),w=Z(_),p=P(),o=Z(i),f=P(),b=L("div"),d=L("div"),y&&y.c(),s(a,"class",`text-2xl ${(m=r[7]())==null?void 0:m.color}`),s(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),s(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),s(d,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),s(b,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(m,C){q(m,e,C),u(e,t),u(t,a),u(a,w),u(t,p),u(t,o),q(m,f,C),q(m,b,C),u(b,d),~g&&n[g].m(d,null),k=!0},p(m,C){let x=g;g=h(m),g===x?~g&&n[g].p(m,C):(y&&(St(),Re(n[x],1,1,()=>{n[x]=null}),Ct()),~g?(y=n[g],y?y.p(m,C):(y=n[g]=v[g](m),y.c()),Te(y,1),y.m(d,null)):y=null)},i(m){k||(Te(y),k=!0)},o(m){Re(y),k=!1},d(m){m&&(K(e),K(f),K(b)),~g&&n[g].d()}}}function Wc(r){let e,t,a;var _=ds;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Dt(_,w(r))),{c(){e&&Xe(e.$$.fragment),t=kt()},m(p,i){e&&qe(e,p,i),q(p,t,i),a=!0},p(p,i){if(_!==(_=ds)){if(e){St();const o=e;Re(o.$$.fragment,1,0,()=>{Ge(o,1)}),Ct()}_?(e=Dt(_,w(p)),Xe(e.$$.fragment),Te(e.$$.fragment,1),qe(e,t.parentNode,t)):e=null}else if(_){const o={};i&2&&(o.themeStore=p[1]),e.$set(o)}},i(p){a||(e&&Te(e.$$.fragment,p),a=!0)},o(p){e&&Re(e.$$.fragment,p),a=!1},d(p){p&&K(t),e&&Ge(e,p)}}}function jc(r){let e,t,a;var _=ns;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Dt(_,w(r))),{c(){e&&Xe(e.$$.fragment),t=kt()},m(p,i){e&&qe(e,p,i),q(p,t,i),a=!0},p(p,i){if(_!==(_=ns)){if(e){St();const o=e;Re(o.$$.fragment,1,0,()=>{Ge(o,1)}),Ct()}_?(e=Dt(_,w(p)),Xe(e.$$.fragment),Te(e.$$.fragment,1),qe(e,t.parentNode,t)):e=null}else if(_){const o={};i&2&&(o.themeStore=p[1]),e.$set(o)}},i(p){a||(e&&Te(e.$$.fragment,p),a=!0)},o(p){e&&Re(e.$$.fragment,p),a=!1},d(p){p&&K(t),e&&Ge(e,p)}}}function zc(r){let e,t,a;var _=is;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Dt(_,w(r))),{c(){e&&Xe(e.$$.fragment),t=kt()},m(p,i){e&&qe(e,p,i),q(p,t,i),a=!0},p(p,i){if(_!==(_=is)){if(e){St();const o=e;Re(o.$$.fragment,1,0,()=>{Ge(o,1)}),Ct()}_?(e=Dt(_,w(p)),Xe(e.$$.fragment),Te(e.$$.fragment,1),qe(e,t.parentNode,t)):e=null}else if(_){const o={};i&2&&(o.themeStore=p[1]),e.$set(o)}},i(p){a||(e&&Te(e.$$.fragment,p),a=!0)},o(p){e&&Re(e.$$.fragment,p),a=!1},d(p){p&&K(t),e&&Ge(e,p)}}}function Uc(r){let e,t,a;var _=Gi;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Dt(_,w(r))),{c(){e&&Xe(e.$$.fragment),t=kt()},m(p,i){e&&qe(e,p,i),q(p,t,i),a=!0},p(p,i){if(_!==(_=Gi)){if(e){St();const o=e;Re(o.$$.fragment,1,0,()=>{Ge(o,1)}),Ct()}_?(e=Dt(_,w(p)),Xe(e.$$.fragment),Te(e.$$.fragment,1),qe(e,t.parentNode,t)):e=null}else if(_){const o={};i&2&&(o.themeStore=p[1]),e.$set(o)}},i(p){a||(e&&Te(e.$$.fragment,p),a=!0)},o(p){e&&Re(e.$$.fragment,p),a=!1},d(p){p&&K(t),e&&Ge(e,p)}}}function Nc(r){let e,t,a;var _=Vi;function w(p,i){return{props:{themeStore:p[1]}}}return _&&(e=Dt(_,w(r))),{c(){e&&Xe(e.$$.fragment),t=kt()},m(p,i){e&&qe(e,p,i),q(p,t,i),a=!0},p(p,i){if(_!==(_=Vi)){if(e){St();const o=e;Re(o.$$.fragment,1,0,()=>{Ge(o,1)}),Ct()}_?(e=Dt(_,w(p)),Xe(e.$$.fragment),Te(e.$$.fragment,1),qe(e,t.parentNode,t)):e=null}else if(_){const o={};i&2&&(o.themeStore=p[1]),e.$set(o)}},i(p){a||(e&&Te(e.$$.fragment,p),a=!0)},o(p){e&&Re(e.$$.fragment,p),a=!1},d(p){p&&K(t),e&&Ge(e,p)}}}function Kc(r){let e,t,a=r[0]&&fs(r);return{c(){a&&a.c(),e=kt()},m(_,w){a&&a.m(_,w),q(_,e,w),t=!0},p(_,[w]){_[0]?a?(a.p(_,w),w&1&&Te(a,1)):(a=fs(_),a.c(),Te(a,1),a.m(e.parentNode,e)):a&&(St(),Re(a,1,1,()=>{a=null}),Ct())},i(_){t||(Te(a),t=!0)},o(_){Re(a),t=!1},d(_){_&&K(e),a&&a.d(_)}}}function Vc(r,e,t){let{isOpen:a=!1}=e,{themeStore:_}=e,w=null,p;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function o(v){v.target===v.currentTarget&&t(0,a=!1)}function f(v){t(3,w=v)}function b(){return i.find(v=>v.id===w)}function d(v){v.key==="Escape"&&a&&(v.preventDefault(),t(0,a=!1))}const g=()=>t(0,a=!1),y=v=>f(v.id);function k(v){at[v?"unshift":"push"](()=>{p=v,t(2,p)})}return r.$$set=v=>{"isOpen"in v&&t(0,a=v.isOpen),"themeStore"in v&&t(1,_=v.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&a&&kr().then(()=>{p&&p.focus()})},[a,_,p,w,i,o,f,b,d,g,y,k]}class qc extends ft{constructor(e){super(),ut(this,e,Vc,Kc,ht,{isOpen:0,themeStore:1})}}function gs(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h;return{c(){e=L("div"),t=L("label"),t.textContent="认证方式",a=P(),_=L("div"),w=L("button"),p=L("div"),i=Z("密码"),b=P(),d=L("button"),g=L("div"),y=Z("SSH 密钥"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"class",o=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(w,"type","button"),s(w,"class",f=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(g,"class",k=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(d,"type","button"),s(d,"class",v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(_,"class","flex gap-2")},m(l,c){q(l,e,c),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),u(p,i),u(_,b),u(_,d),u(d,g),u(g,y),n||(h=[re(w,"click",r[21]),re(d,"click",r[22])],n=!0)},p(l,c){c[0]&8&&o!==(o=`text-xs font-medium ${l[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(p,"class",o),c[0]&8&&f!==(f=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${l[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",f),c[0]&8&&k!==(k=`text-xs font-medium ${l[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(g,"class",k),c[0]&8&&v!==(v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${l[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(d,"class",v)},d(l){l&&K(e),n=!1,Be(h)}}}function ms(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l;function c(E,B){return E[9]?Jc:Gc}let m=c(r),C=m(r);function x(E,B){return E[9]?Yc:Xc}let M=x(r),S=M(r);return{c(){e=L("div"),t=L("label"),t.textContent="SSH 私钥文件",a=P(),_=L("div"),w=L("input"),p=P(),i=L("button"),i.textContent="选择文件",o=P(),f=L("div"),b=L("label"),b.textContent="Passphrase（可选）",d=P(),g=L("div"),C.c(),y=P(),k=L("button"),S.c(),v=P(),n=L("p"),n.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(w,"type","text"),s(w,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),w.readOnly=!0,s(w,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),s(i,"type","button"),s(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),s(_,"class","flex gap-1.5"),s(b,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(k,"type","button"),s(k,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(g,"class","relative"),s(n,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(E,B){q(E,e,B),u(e,t),u(e,a),u(e,_),u(_,w),we(w,r[4].keyPath),u(_,p),u(_,i),q(E,o,B),q(E,f,B),u(f,b),u(f,d),u(f,g),C.m(g,null),u(g,y),u(g,k),S.m(k,null),u(f,v),u(f,n),h||(l=[re(w,"input",r[23]),re(i,"click",r[11]),re(k,"click",r[26])],h=!0)},p(E,B){B[0]&16&&w.value!==E[4].keyPath&&we(w,E[4].keyPath),m===(m=c(E))&&C?C.p(E,B):(C.d(1),C=m(E),C&&(C.c(),C.m(g,y))),M!==(M=x(E))&&(S.d(1),S=M(E),S&&(S.c(),S.m(k,null)))},d(E){E&&(K(e),K(o),K(f)),C.d(),S.d(),h=!1,Be(l)}}}function Gc(r){let e,t,a;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){q(_,e,w),we(e,r[4].passphrase),t||(a=re(e,"input",r[25]),t=!0)},p(_,w){w[0]&16&&e.value!==_[4].passphrase&&we(e,_[4].passphrase)},d(_){_&&K(e),t=!1,a()}}}function Jc(r){let e,t,a;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder","如果密钥已加密，请输入 passphrase"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){q(_,e,w),we(e,r[4].passphrase),t||(a=re(e,"input",r[24]),t=!0)},p(_,w){w[0]&16&&e.value!==_[4].passphrase&&we(e,_[4].passphrase)},d(_){_&&K(e),t=!1,a()}}}function Xc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function Yc(r){let e,t,a;return{c(){e=oe("svg"),t=oe("path"),a=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){q(_,e,w),u(e,t),u(e,a)},d(_){_&&K(e)}}}function vs(r){let e,t,a;return{c(){e=L("div"),t=Z(r[6]),s(e,"class",a=`p-2 rounded-md text-xs ${r[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(_,w){q(_,e,w),u(e,t)},p(_,w){w[0]&64&&ue(t,_[6]),w[0]&64&&a!==(a=`p-2 rounded-md text-xs ${_[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&s(e,"class",a)},d(_){_&&K(e)}}}function bs(r){let e,t,a,_,w,p,i,o,f,b;return{c(){e=L("div"),t=L("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',a=P(),_=L("select"),w=L("option"),w.textContent="MySQL",p=L("option"),p.textContent="PostgreSQL",i=L("option"),i.textContent="MongoDB",o=L("option"),o.textContent="Redis",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),w.__value="mysql",we(w,w.__value),p.__value="postgresql",we(p,p.__value),i.__value="mongodb",we(i,i.__value),o.__value="redis",we(o,o.__value),s(_,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[4].dbType===void 0&&ur(()=>r[27].call(_))},m(d,g){q(d,e,g),u(e,t),u(e,a),u(e,_),u(_,w),u(_,p),u(_,i),u(_,o),xr(_,r[4].dbType,!0),f||(b=re(_,"change",r[27]),f=!0)},p(d,g){g[0]&16&&xr(_,d[4].dbType)},d(d){d&&K(e),f=!1,b()}}}function ys(r){let e,t,a,_,w,p;return{c(){e=L("div"),t=L("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',a=P(),_=L("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"type","text"),_.required=!0,s(_,"placeholder","root"),s(_,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){q(i,e,o),u(e,t),u(e,a),u(e,_),we(_,r[4].username),w||(p=re(_,"input",r[30]),w=!0)},p(i,o){o[0]&16&&_.value!==i[4].username&&we(_,i[4].username)},d(i){i&&K(e),w=!1,p()}}}function ws(r){let e,t,a,_,w,p,i,o,f,b,d,g,y;function k(m,C){return m[8]?Qc:Zc}let v=k(r),n=v(r);function h(m,C){return m[8]?eh:$c}let l=h(r),c=l(r);return{c(){e=L("div"),t=L("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',a=P(),_=L("div"),n.c(),w=P(),p=L("button"),c.c(),i=P(),o=L("div"),f=L("input"),b=P(),d=L("span"),d.textContent="保存密码",s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(p,"type","button"),s(p,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),s(_,"class","relative"),s(f,"type","checkbox"),s(f,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),s(d,"class","text-xs text-gray-700 dark:text-gray-300"),s(o,"class","flex items-center gap-1.5 cursor-pointer")},m(m,C){q(m,e,C),u(e,t),u(e,a),u(e,_),n.m(_,null),u(_,w),u(_,p),c.m(p,null),q(m,i,C),q(m,o,C),u(o,f),f.checked=r[4].savePassword,u(o,b),u(o,d),g||(y=[re(p,"click",r[33]),re(f,"change",r[34])],g=!0)},p(m,C){v===(v=k(m))&&n?n.p(m,C):(n.d(1),n=v(m),n&&(n.c(),n.m(_,w))),l!==(l=h(m))&&(c.d(1),c=l(m),c&&(c.c(),c.m(p,null))),C[0]&16&&(f.checked=m[4].savePassword)},d(m){m&&(K(e),K(i),K(o)),n.d(),c.d(),g=!1,Be(y)}}}function Zc(r){let e,t,a;return{c(){e=L("input"),s(e,"type","password"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){q(_,e,w),we(e,r[4].password),t||(a=re(e,"input",r[32]),t=!0)},p(_,w){w[0]&16&&e.value!==_[4].password&&we(e,_[4].password)},d(_){_&&K(e),t=!1,a()}}}function Qc(r){let e,t,a;return{c(){e=L("input"),s(e,"type","text"),s(e,"placeholder","输入密码"),s(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(_,w){q(_,e,w),we(e,r[4].password),t||(a=re(e,"input",r[31]),t=!0)},p(_,w){w[0]&16&&e.value!==_[4].password&&we(e,_[4].password)},d(_){_&&K(e),t=!1,a()}}}function $c(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function eh(r){let e,t,a;return{c(){e=oe("svg"),t=oe("path"),a=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),s(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(_,w){q(_,e,w),u(e,t),u(e,a)},d(_){_&&K(e)}}}function ks(r){let e,t,a,_,w,p;return{c(){e=L("div"),t=L("label"),t.textContent="数据库名",a=P(),_=L("input"),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(_,"type","text"),s(_,"placeholder","例如：production_db"),s(_,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,o){q(i,e,o),u(e,t),u(e,a),u(e,_),we(_,r[4].database),w||(p=re(_,"input",r[35]),w=!0)},p(i,o){o[0]&16&&_.value!==i[4].database&&we(_,i[4].database)},d(i){i&&K(e),w=!1,p()}}}function th(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U,V,J,ie,Y,D,H,F,j,G,W,X,te,I,T,Q,z,N,$,ee,le,ae,ce,he,fe,Se,xe,me,ke,ne,ge,pe,Le,$e,Ne,We,st,Ue,Ce,de,Oe,nt=r[5]?"测试中...":"测试连接",Pe,dt,ct,et=r[7]?"保存中...":r[1]?"更新连接":"添加连接",Je,rt,mt,Ie=r[2]==="ssh"&&gs(r),Fe=r[3]==="key"&&ms(r),it=r[6]&&vs(r),Ye=r[2]==="database"&&bs(r),Ze=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&ys(r),tt=r[3]==="password"&&ws(r),je=r[2]==="database"&&ks(r);return{c(){e=L("div"),t=L("label"),t.textContent="连接类型",a=P(),_=L("div"),w=L("button"),p=L("div"),i=oe("svg"),o=oe("path"),b=P(),d=L("span"),g=Z("SSH"),v=P(),n=L("button"),h=L("div"),l=oe("svg"),c=oe("path"),C=P(),x=L("span"),M=Z("数据库"),B=P(),R=L("button"),O=L("div"),A=oe("svg"),U=oe("path"),J=P(),ie=L("span"),Y=Z("Docker"),F=P(),j=L("form"),G=L("div"),W=L("label"),W.innerHTML='连接名称 <span class="text-red-500">*</span>',X=P(),te=L("input"),I=P(),Ie&&Ie.c(),T=P(),Fe&&Fe.c(),Q=P(),it&&it.c(),z=P(),Ye&&Ye.c(),N=P(),$=L("div"),ee=L("div"),le=L("label"),le.innerHTML='主机地址 <span class="text-red-500">*</span>',ae=P(),ce=L("input"),he=P(),fe=L("div"),Se=L("label"),Se.innerHTML='端口 <span class="text-red-500">*</span>',xe=P(),me=L("input"),ke=P(),Ze&&Ze.c(),ne=P(),tt&&tt.c(),ge=P(),je&&je.c(),pe=P(),Le=L("div"),$e=L("label"),$e.textContent="分组",Ne=P(),We=L("input"),st=P(),Ue=L("div"),Ce=L("button"),Ce.textContent="取消",de=P(),Oe=L("button"),Pe=Z(nt),dt=P(),ct=L("button"),Je=Z(et),s(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),s(i,"class",f=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"viewBox","0 0 24 24"),s(d,"class",y=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(p,"class","flex items-center justify-center gap-1"),s(w,"type","button"),s(w,"class",k=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(c,"stroke-linecap","round"),s(c,"stroke-linejoin","round"),s(c,"stroke-width","2"),s(c,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),s(l,"class",m=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"viewBox","0 0 24 24"),s(x,"class",S=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(h,"class","flex items-center justify-center gap-1"),s(n,"type","button"),s(n,"class",E=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(U,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),s(A,"class",V=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),s(A,"fill","currentColor"),s(A,"viewBox","0 0 24 24"),s(ie,"class",D=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),s(O,"class","flex items-center justify-center gap-1"),s(R,"type","button"),s(R,"class",H=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),s(_,"class","grid grid-cols-3 gap-2"),s(e,"class","mb-4"),s(W,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(te,"type","text"),te.required=!0,s(te,"placeholder","例如：生产服务器-01"),s(te,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(le,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(ce,"type","text"),ce.required=!0,s(ce,"placeholder","192.168.1.10 或 example.com"),s(ce,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(ee,"class","col-span-2"),s(Se,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(me,"type","text"),me.required=!0,s(me,"placeholder",r[13]()),s(me,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s($,"class","grid grid-cols-3 gap-2"),s($e,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),s(We,"type","text"),s(We,"placeholder","例如：生产环境"),s(We,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),s(Ce,"type","button"),s(Ce,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),s(Oe,"type","button"),Oe.disabled=r[5],s(Oe,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),s(ct,"type","submit"),ct.disabled=r[7],s(ct,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(Ue,"class","flex gap-2 pt-3"),s(j,"class","space-y-3")},m(ye,He){q(ye,e,He),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),u(p,i),u(i,o),u(p,b),u(p,d),u(d,g),u(_,v),u(_,n),u(n,h),u(h,l),u(l,c),u(h,C),u(h,x),u(x,M),u(_,B),u(_,R),u(R,O),u(O,A),u(A,U),u(O,J),u(O,ie),u(ie,Y),q(ye,F,He),q(ye,j,He),u(j,G),u(G,W),u(G,X),u(G,te),we(te,r[4].name),u(j,I),Ie&&Ie.m(j,null),u(j,T),Fe&&Fe.m(j,null),u(j,Q),it&&it.m(j,null),u(j,z),Ye&&Ye.m(j,null),u(j,N),u(j,$),u($,ee),u(ee,le),u(ee,ae),u(ee,ce),we(ce,r[4].host),u($,he),u($,fe),u(fe,Se),u(fe,xe),u(fe,me),we(me,r[4].port),u(j,ke),Ze&&Ze.m(j,null),u(j,ne),tt&&tt.m(j,null),u(j,ge),je&&je.m(j,null),u(j,pe),u(j,Le),u(Le,$e),u(Le,Ne),u(Le,We),we(We,r[4].group),u(j,st),u(j,Ue),u(Ue,Ce),u(Ue,de),u(Ue,Oe),u(Oe,Pe),u(Ue,dt),u(Ue,ct),u(ct,Je),rt||(mt=[re(w,"click",r[17]),re(n,"click",r[18]),re(R,"click",r[19]),re(te,"input",r[20]),re(ce,"input",r[28]),re(me,"input",r[29]),re(We,"input",r[36]),re(Ce,"click",r[37]),re(Oe,"click",r[10]),re(j,"submit",vn(r[12]))],rt=!0)},p(ye,He){He[0]&4&&f!==(f=`w-4 h-4 ${ye[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(i,"class",f),He[0]&4&&y!==(y=`text-xs font-medium ${ye[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(d,"class",y),He[0]&4&&k!==(k=`p-2 rounded-lg border-2 transition-all ${ye[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(w,"class",k),He[0]&4&&m!==(m=`w-4 h-4 ${ye[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(l,"class",m),He[0]&4&&S!==(S=`text-xs font-medium ${ye[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(x,"class",S),He[0]&4&&E!==(E=`p-2 rounded-lg border-2 transition-all ${ye[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(n,"class",E),He[0]&4&&V!==(V=`w-4 h-4 ${ye[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&s(A,"class",V),He[0]&4&&D!==(D=`text-xs font-medium ${ye[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&s(ie,"class",D),He[0]&4&&H!==(H=`p-2 rounded-lg border-2 transition-all ${ye[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&s(R,"class",H),He[0]&16&&te.value!==ye[4].name&&we(te,ye[4].name),ye[2]==="ssh"?Ie?Ie.p(ye,He):(Ie=gs(ye),Ie.c(),Ie.m(j,T)):Ie&&(Ie.d(1),Ie=null),ye[3]==="key"?Fe?Fe.p(ye,He):(Fe=ms(ye),Fe.c(),Fe.m(j,Q)):Fe&&(Fe.d(1),Fe=null),ye[6]?it?it.p(ye,He):(it=vs(ye),it.c(),it.m(j,z)):it&&(it.d(1),it=null),ye[2]==="database"?Ye?Ye.p(ye,He):(Ye=bs(ye),Ye.c(),Ye.m(j,N)):Ye&&(Ye.d(1),Ye=null),He[0]&16&&ce.value!==ye[4].host&&we(ce,ye[4].host),He[0]&16&&me.value!==ye[4].port&&we(me,ye[4].port),ye[3]==="password"||ye[2]==="database"||ye[2]==="docker"?Ze?Ze.p(ye,He):(Ze=ys(ye),Ze.c(),Ze.m(j,ne)):Ze&&(Ze.d(1),Ze=null),ye[3]==="password"?tt?tt.p(ye,He):(tt=ws(ye),tt.c(),tt.m(j,ge)):tt&&(tt.d(1),tt=null),ye[2]==="database"?je?je.p(ye,He):(je=ks(ye),je.c(),je.m(j,pe)):je&&(je.d(1),je=null),He[0]&16&&We.value!==ye[4].group&&we(We,ye[4].group),He[0]&32&&nt!==(nt=ye[5]?"测试中...":"测试连接")&&ue(Pe,nt),He[0]&32&&(Oe.disabled=ye[5]),He[0]&130&&et!==(et=ye[7]?"保存中...":ye[1]?"更新连接":"添加连接")&&ue(Je,et),He[0]&128&&(ct.disabled=ye[7])},d(ye){ye&&(K(e),K(F),K(j)),Ie&&Ie.d(),Fe&&Fe.d(),it&&it.d(),Ye&&Ye.d(),Ze&&Ze.d(),tt&&tt.d(),je&&je.d(),rt=!1,Be(mt)}}}function rh(r){let e,t,a;function _(p){r[39](p)}let w={onClose:r[38],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[th]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>wt(e,"isOpen",_)),{c(){Xe(e.$$.fragment)},m(p,i){qe(e,p,i),a=!0},p(p,i){const o={};i[0]&1&&(o.onClose=p[38]),i[0]&2&&(o.title=p[1]?"编辑连接":"添加连接"),i[0]&1023|i[1]&4096&&(o.$$scope={dirty:i,ctx:p}),!t&&i[0]&1&&(t=!0,o.isOpen=p[0],yt(()=>t=!1)),e.$set(o)},i(p){a||(Te(e.$$.fragment,p),a=!0)},o(p){Re(e.$$.fragment,p),a=!1},d(p){Ge(e,p)}}}function ih(r,e,t){let{isOpen:a=!1}=e,{onAdd:_=()=>{}}=e,{onUpdate:w=()=>{}}=e,{editingAsset:p=null}=e,i="ssh",o="password",f=!1,b="",d=!1,g=!1,y=!1,k=!1,v=!1,n={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function h(){if(!window.wailsBindings){t(6,b="Wails 绑定未加载");return}if(!n.host){t(6,b="请填写主机地址");return}if(o==="password"&&!n.password){t(6,b="请输入密码以测试连接");return}if(o==="password"&&!n.username){t(6,b="请填写用户名");return}if(o==="key"&&!n.keyPath){t(6,b="请选择 SSH 密钥文件");return}t(5,f=!0),t(6,b="");try{const z=o==="key"?n.keyPath:n.password;await window.wailsBindings.TestConnection(n.host,parseInt(n.port),n.username,o,z,n.passphrase||""),t(6,b="✓ 连接成功")}catch(z){console.error("Connection test failed:",z),t(6,b="✗ 连接失败: "+z)}finally{t(5,f=!1)}}async function l(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const z=await window.wailsBindings.SelectSSHKeyFile();z&&t(4,n.keyPath=z,n)}catch(z){console.error("Failed to select key file:",z),t(6,b="选择密钥文件失败: "+z)}}async function c(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!n.name||!n.host){alert("请填写必填字段（连接名称、主机地址）");return}if(o==="password"&&!n.username){alert("密码认证需要填写用户名");return}if(o==="password"&&!n.password){alert("密码认证需要输入密码");return}if(o==="key"&&!n.keyPath){alert("密钥认证需要选择密钥文件");return}t(7,d=!0);try{const z=!!n.id,N={id:z?n.id:`conn_${Date.now()}`,name:n.name,host:n.host,port:parseInt(n.port),user:n.username,auth_type:o,key_path:o==="key"?n.keyPath:"",tags:[n.group||"默认分组"],type:i,metadata:{database:n.database||void 0}};z?(await window.wailsBindings.UpdateConnection(N),o==="password"&&n.password&&n.savePassword?await window.wailsBindings.SavePassword(N.id,n.password):o==="password"&&!n.savePassword&&await window.wailsBindings.DeletePassword(N.id),w(N)):(_(N),o==="password"&&n.password&&n.savePassword&&await window.wailsBindings.SavePassword(N.id,n.password)),t(0,a=!1)}catch(z){console.error("Failed to save connection:",z),alert("保存连接失败: "+z)}finally{t(7,d=!1)}}function m(){t(4,n={id:"",name:"",host:"",port:C(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(6,b=""),t(8,g=!1),t(9,y=!1)}function C(){switch(i){case"ssh":return"22";case"docker":return"2375";case"database":switch(n.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function x(){var z,N,$;if(!(!p||!a||k))try{const ee=await window.wailsBindings.GetConnection(p.id);if(ee){t(4,n={id:ee.id,name:ee.name||"",host:ee.host||"",port:((z=ee.port)==null?void 0:z.toString())||"",username:ee.user||"",password:"",savePassword:!1,keyPath:ee.key_path||"",passphrase:"",group:((N=ee.tags)==null?void 0:N[0])||"",dbType:"mysql",database:(($=ee.metadata)==null?void 0:$.database)||""}),t(2,i=ee.type||"ssh"),t(3,o=ee.auth_type||"password"),k=!0;try{if(await window.wailsBindings.HasPassword(ee.id)){t(4,n.savePassword=!0,n);const ae=await window.wailsBindings.GetPassword(ee.id);t(4,n.password=ae||"",n)}}catch(le){console.warn("Failed to load password:",le)}}}catch(ee){console.error("Failed to load connection:",ee)}}const M=()=>t(2,i="ssh"),S=()=>t(2,i="database"),E=()=>t(2,i="docker");function B(){n.name=this.value,t(4,n),t(0,a),t(1,p)}const R=()=>{t(3,o="password"),t(6,b="")},O=()=>{t(3,o="key"),t(6,b="")};function A(){n.keyPath=this.value,t(4,n),t(0,a),t(1,p)}function U(){n.passphrase=this.value,t(4,n),t(0,a),t(1,p)}function V(){n.passphrase=this.value,t(4,n),t(0,a),t(1,p)}const J=()=>t(9,y=!y);function ie(){n.dbType=Ws(this),t(4,n),t(0,a),t(1,p)}function Y(){n.host=this.value,t(4,n),t(0,a),t(1,p)}function D(){n.port=this.value,t(4,n),t(0,a),t(1,p)}function H(){n.username=this.value,t(4,n),t(0,a),t(1,p)}function F(){n.password=this.value,t(4,n),t(0,a),t(1,p)}function j(){n.password=this.value,t(4,n),t(0,a),t(1,p)}const G=()=>t(8,g=!g);function W(){n.savePassword=this.checked,t(4,n),t(0,a),t(1,p)}function X(){n.database=this.value,t(4,n),t(0,a),t(1,p)}function te(){n.group=this.value,t(4,n),t(0,a),t(1,p)}const I=()=>t(0,a=!1),T=()=>{t(0,a=!1)};function Q(z){a=z,t(0,a)}return r.$$set=z=>{"isOpen"in z&&t(0,a=z.isOpen),"onAdd"in z&&t(14,_=z.onAdd),"onUpdate"in z&&t(15,w=z.onUpdate),"editingAsset"in z&&t(1,p=z.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(16,v=a),r.$$.dirty[0]&65537&&v&&!a&&m(),r.$$.dirty[0]&19&&a&&!p&&!n.id&&(n.port||t(4,n.port=C(),n)),r.$$.dirty[0]&16&&n.port===""&&t(4,n.port=C(),n),r.$$.dirty[0]&12&&(i==="ssh"?o!=="password"&&o!=="key"&&t(3,o="password"):t(3,o="password")),r.$$.dirty[0]&3&&a&&p&&x(),r.$$.dirty[0]&18&&p&&n.id!==p.id&&(k=!1),r.$$.dirty[0]&65539&&!v&&a&&p&&(k=!1)},[a,p,i,o,n,f,b,d,g,y,h,l,c,C,_,w,v,M,S,E,B,R,O,A,U,V,J,ie,Y,D,H,F,j,G,W,X,te,I,T,Q]}class sh extends ft{constructor(e){super(),ut(this,e,ih,rh,ht,{isOpen:0,onAdd:14,onUpdate:15,editingAsset:1},null,[-1,-1])}}function nh(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U,V,J;return{c(){e=L("div"),t=L("div"),t.textContent="哈",a=P(),_=L("div"),w=L("h3"),p=Z("AHaSSHTools"),o=P(),f=L("p"),b=Z("啊哈 SSH 连接工具"),g=P(),y=L("p"),k=Z("版本 1.0.0"),n=P(),h=L("p"),l=Z("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),m=P(),C=L("button"),x=oe("svg"),M=oe("path"),S=P(),E=L("span"),E.textContent="访问 GitHub",R=P(),O=L("p"),A=Z("© 2026 AHaSSHTools. All rights reserved."),s(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),s(w,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),s(f,"class",d="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),s(y,"class",v="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),s(_,"class","text-center space-y-1"),s(h,"class",c="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),s(M,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),s(x,"class","w-5 h-5"),s(x,"viewBox","0 0 24 24"),s(x,"fill","currentColor"),s(C,"class",B="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),s(O,"class",U="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),s(e,"class","flex flex-col items-center gap-5 py-4")},m(ie,Y){q(ie,e,Y),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),u(_,o),u(_,f),u(f,b),u(_,g),u(_,y),u(y,k),u(e,n),u(e,h),u(h,l),u(e,m),u(e,C),u(C,x),u(x,M),u(C,S),u(C,E),u(e,R),u(e,O),u(O,A),V||(J=re(C,"click",lh),V=!0)},p(ie,Y){Y&4&&i!==(i="text-xl font-bold "+(ie[2]==="dark"?"text-white":"text-gray-900"))&&s(w,"class",i),Y&4&&d!==(d="text-sm "+(ie[2]==="dark"?"text-gray-400":"text-gray-500"))&&s(f,"class",d),Y&4&&v!==(v="text-xs "+(ie[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&s(y,"class",v),Y&4&&c!==(c="text-sm text-center max-w-xs "+(ie[2]==="dark"?"text-gray-400":"text-gray-600"))&&s(h,"class",c),Y&4&&B!==(B="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(ie[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&s(C,"class",B),Y&4&&U!==(U="text-xs "+(ie[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&s(O,"class",U)},d(ie){ie&&K(e),V=!1,J()}}}function oh(r){let e,t,a;function _(p){r[4](p)}let w={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[nh]},$$scope:{ctx:r}};return r[0]!==void 0&&(w.isOpen=r[0]),e=new Lr({props:w}),at.push(()=>wt(e,"isOpen",_)),{c(){Xe(e.$$.fragment)},m(p,i){qe(e,p,i),a=!0},p(p,[i]){const o={};i&2&&(o.onClose=p[1]),i&68&&(o.$$scope={dirty:i,ctx:p}),!t&&i&1&&(t=!0,o.isOpen=p[0],yt(()=>t=!1)),e.$set(o)},i(p){a||(Te(e.$$.fragment,p),a=!0)},o(p){Re(e.$$.fragment,p),a=!1},d(p){Ge(e,p)}}}async function lh(){try{await(await Cr(()=>Promise.resolve().then(()=>Xs),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function ah(r,e,t){let{isOpen:a=!1}=e,{onClose:_=()=>{}}=e,{themeStore:w={subscribe:()=>()=>{}}}=e,p="light";const i=w.subscribe(f=>{t(2,p=f)});or(()=>()=>{i()});function o(f){a=f,t(0,a)}return r.$$set=f=>{"isOpen"in f&&t(0,a=f.isOpen),"onClose"in f&&t(1,_=f.onClose),"themeStore"in f&&t(3,w=f.themeStore)},[a,_,p,w,o]}class ch extends ft{constructor(e){super(),ut(this,e,ah,oh,ht,{isOpen:0,onClose:1,themeStore:3})}}function Ss(r,e,t){const a=r.slice();return a[57]=e[t],a}function Cs(r,e,t){const a=r.slice();return a[57]=e[t],a}function xs(r){let e,t=r[12].length+"",a;return{c(){e=L("span"),a=Z(t),s(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(_,w){q(_,e,w),u(e,a)},p(_,w){w[0]&4096&&t!==(t=_[12].length+"")&&ue(a,t)},d(_){_&&K(e)}}}function hh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function dh(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),s(e,"class","w-5 h-5"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"viewBox","0 0 24 24")},m(a,_){q(a,e,_),u(e,t)},d(a){a&&K(e)}}}function Es(r){let e,t,a,_,w,p;return{c(){e=L("button"),t=oe("svg"),a=oe("path"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M9 5l7 7-7 7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",_="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开资产列表")},m(i,o){q(i,e,o),u(e,t),u(t,a),w||(p=re(e,"click",r[17]),w=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&_!==(_="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",_)},d(i){i&&K(e),w=!1,p()}}}function Ls(r){let e,t,a,_,w,p,i,o,f;return{c(){e=L("div"),t=L("div"),a=P(),_=L("button"),w=oe("svg"),p=oe("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M15 19l-7-7 7-7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),_.disabled=r[2],s(_,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(_,"title","折叠资产列表"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),be(e,"cursor",r[2]?"default":"col-resize"),be(e,"height","100%"),be(e,"padding","0 2px"),be(e,"pointer-events",r[2]?"none":"auto")},m(b,d){q(b,e,d),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),o||(f=[re(_,"click",r[17]),re(e,"mousedown",r[19])],o=!0)},p(b,d){d[0]&4&&(_.disabled=b[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(_,"class",i),d[0]&4&&be(e,"cursor",b[2]?"default":"col-resize"),d[0]&4&&be(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&K(e),o=!1,Be(f)}}}function Ms(r){let e,t,a,_,w,p,i,o,f;return{c(){e=L("div"),t=L("div"),a=P(),_=L("button"),w=oe("svg"),p=oe("path"),s(t,"class","h-full w-full rounded svelte-m8xeqv"),s(p,"stroke-linecap","round"),s(p,"stroke-linejoin","round"),s(p,"stroke-width","2"),s(p,"d","M9 5l7 7-7 7"),s(w,"class","w-4 h-4"),s(w,"fill","none"),s(w,"stroke","currentColor"),s(w,"viewBox","0 0 24 24"),_.disabled=r[2],s(_,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(_,"title","折叠右侧面板"),s(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),s(e,"role","separator"),s(e,"aria-hidden","true"),be(e,"cursor",r[2]?"default":"col-resize"),be(e,"height","100%"),be(e,"padding","0 2px"),be(e,"pointer-events",r[2]?"none":"auto")},m(b,d){q(b,e,d),u(e,t),u(e,a),u(e,_),u(_,w),u(w,p),o||(f=[re(_,"click",r[18]),re(e,"mousedown",r[20])],o=!0)},p(b,d){d[0]&4&&(_.disabled=b[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&s(_,"class",i),d[0]&4&&be(e,"cursor",b[2]?"default":"col-resize"),d[0]&4&&be(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&K(e),o=!1,Be(f)}}}function Ds(r){let e,t,a,_,w,p;return{c(){e=L("button"),t=oe("svg"),a=oe("path"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M15 19l-7-7 7-7"),s(t,"class","w-5 h-5"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),e.disabled=r[2],s(e,"class",_="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),s(e,"title","展开右侧面板")},m(i,o){q(i,e,o),u(e,t),u(t,a),w||(p=re(e,"click",r[18]),w=!0)},p(i,o){o[0]&4&&(e.disabled=i[2]),o[0]&1&&_!==(_="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&s(e,"class",_)},d(i){i&&K(e),w=!1,p()}}}function Ts(r){let e,t,a,_,w,p,i,o,f,b,d=r[12].length+"",g,y,k,v,n,h,l=r[14].length+"",c,m,C,x,M,S,E,B;function R(U,V){if(U[13].activeTab==="active"&&U[12].length===0)return ph;if(U[13].activeTab==="active")return _h;if(U[13].activeTab==="history"&&U[14].length===0)return fh;if(U[13].activeTab==="history")return uh}let O=R(r),A=O&&O(r);return{c(){e=L("div"),t=L("div"),a=L("div"),_=L("h3"),_.textContent="上传任务",w=P(),p=L("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=P(),o=L("div"),f=L("button"),b=Z("进行中 ("),g=Z(d),y=Z(")"),v=P(),n=L("button"),h=Z("历史 ("),c=Z(l),m=Z(")"),M=P(),A&&A.c(),s(_,"class","font-semibold text-sm"),s(p,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),s(a,"class","flex items-center justify-between mb-3"),s(f,"class",k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(n,"class",C="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),s(o,"class","flex gap-2"),s(t,"class",x="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(e,"class",S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),be(e,"height","calc(100vh - 3.5rem)")},m(U,V){q(U,e,V),u(e,t),u(t,a),u(a,_),u(a,w),u(a,p),u(t,i),u(t,o),u(o,f),u(f,b),u(f,g),u(f,y),u(o,v),u(o,n),u(n,h),u(n,c),u(n,m),u(e,M),A&&A.m(e,null),E||(B=[re(p,"click",r[37]),re(f,"click",r[38]),re(n,"click",r[39])],E=!0)},p(U,V){V[0]&4096&&d!==(d=U[12].length+"")&&ue(g,d),V[0]&8193&&k!==(k="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(U[13].activeTab==="active"?(U[0]==="dark","bg-blue-600 text-white"):U[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(f,"class",k),V[0]&16384&&l!==(l=U[14].length+"")&&ue(c,l),V[0]&8193&&C!==(C="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(U[13].activeTab==="history"?(U[0]==="dark","bg-blue-600 text-white"):U[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&s(n,"class",C),V[0]&1&&x!==(x="p-4 border-b "+(U[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",x),O===(O=R(U))&&A?A.p(U,V):(A&&A.d(1),A=O&&O(U),A&&(A.c(),A.m(e,null))),V[0]&1&&S!==(S="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(U[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&s(e,"class",S)},d(U){U&&K(e),A&&A.d(),E=!1,Be(B)}}}function uh(r){let e,t,a,_,w,p,i,o,f=[],b=new Map,d,g,y=ze(r[14]);const k=v=>v[57].id;for(let v=0;v<y.length;v+=1){let n=Ss(r,y,v),h=k(n);b.set(h,f[v]=As(h,n))}return{c(){e=L("div"),t=L("div"),a=L("button"),_=Z("清空历史记录"),i=P(),o=L("div");for(let v=0;v<f.length;v+=1)f[v].c();s(a,"class",w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),s(t,"class",p="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),s(o,"class","flex-1 overflow-y-auto p-4 space-y-3"),s(e,"class","flex-1 flex flex-col")},m(v,n){q(v,e,n),u(e,t),u(t,a),u(a,_),u(e,i),u(e,o);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(o,null);d||(g=re(a,"click",r[41]),d=!0)},p(v,n){n[0]&1&&w!==(w="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(v[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&s(a,"class",w),n[0]&1&&p!==(p="p-3 border-b "+(v[0]==="dark"?"border-gray-700":"border-gray-200"))&&s(t,"class",p),n[0]&16385&&(y=ze(v[14]),f=Tt(f,n,k,1,v,y,b,o,It,As,null,Ss))},d(v){v&&K(e);for(let n=0;n<f.length;n+=1)f[n].d();d=!1,g()}}}function fh(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function _h(r){let e,t=[],a=new Map,_=ze(r[12]);const w=p=>p[57].id;for(let p=0;p<_.length;p+=1){let i=Cs(r,_,p),o=w(i);a.set(o,t[p]=Os(o,i))}return{c(){e=L("div");for(let p=0;p<t.length;p+=1)t[p].c();s(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(p,i){q(p,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(p,i){i[0]&4097&&(_=ze(p[12]),t=Tt(t,i,w,1,p,_,a,e,It,Os,null,Cs))},d(p){p&&K(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ph(r){let e;return{c(){e=L("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',s(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,a){q(t,e,a)},p:Ee,d(t){t&&K(e)}}}function gh(r){let e;return{c(){e=L("span"),e.textContent="已取消",s(e,"class","text-gray-500")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function mh(r){let e;return{c(){e=L("span"),e.textContent="失败",s(e,"class","text-red-500")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function vh(r){let e;return{c(){e=L("span"),e.textContent="完成",s(e,"class","text-green-500")},m(t,a){q(t,e,a)},d(t){t&&K(e)}}}function Bs(r){let e,t=r[57].error+"",a,_;return{c(){e=L("div"),a=Z(t),s(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),s(e,"title",_=r[57].error)},m(w,p){q(w,e,p),u(e,a)},p(w,p){p[0]&16384&&t!==(t=w[57].error+"")&&ue(a,t),p[0]&16384&&_!==(_=w[57].error)&&s(e,"title",_)},d(w){w&&K(e)}}}function As(r,e){let t,a,_,w,p=e[57].filename+"",i,o,f,b,d,g,y,k,v=Pt(e[57].totalBytes)+"",n,h,l,c,m,C,x,M;function S(A,U){if(A[57].status==="completed")return vh;if(A[57].status==="failed")return mh;if(A[57].status==="cancelled")return gh}let E=S(e),B=E&&E(e),R=e[57].status==="failed"&&e[57].error&&Bs(e);function O(){return e[42](e[57])}return{key:r,first:null,c(){t=L("div"),a=L("div"),_=L("div"),w=L("div"),i=Z(p),f=P(),b=L("div"),B&&B.c(),d=P(),g=L("span"),g.textContent="•",y=P(),k=L("span"),n=Z(v),h=P(),R&&R.c(),l=P(),c=L("button"),c.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=P(),s(w,"class","text-sm font-medium truncate"),s(w,"title",o=e[57].filename),s(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),s(_,"class","flex-1 min-w-0"),s(c,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),s(c,"title","删除记录"),s(a,"class","flex items-center justify-between"),s(t,"class",C="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(A,U){q(A,t,U),u(t,a),u(a,_),u(_,w),u(w,i),u(_,f),u(_,b),B&&B.m(b,null),u(b,d),u(b,g),u(b,y),u(b,k),u(k,n),u(_,h),R&&R.m(_,null),u(a,l),u(a,c),u(t,m),x||(M=re(c,"click",O),x=!0)},p(A,U){e=A,U[0]&16384&&p!==(p=e[57].filename+"")&&ue(i,p),U[0]&16384&&o!==(o=e[57].filename)&&s(w,"title",o),E!==(E=S(e))&&(B&&B.d(1),B=E&&E(e),B&&(B.c(),B.m(b,d))),U[0]&16384&&v!==(v=Pt(e[57].totalBytes)+"")&&ue(n,v),e[57].status==="failed"&&e[57].error?R?R.p(e,U):(R=Bs(e),R.c(),R.m(_,null)):R&&(R.d(1),R=null),U[0]&1&&C!==(C="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",C)},d(A){A&&K(t),B&&B.d(),R&&R.d(),x=!1,M()}}}function Rs(r){let e,t=vi(r[57].speed)+"",a;return{c(){e=Z("• "),a=Z(t)},m(_,w){q(_,e,w),q(_,a,w)},p(_,w){w[0]&4096&&t!==(t=vi(_[57].speed)+"")&&ue(a,t)},d(_){_&&(K(e),K(a))}}}function Os(r,e){let t,a,_,w,p=e[57].filename+"",i,o,f,b,d=Pt(e[57].bytesSent)+"",g,y,k=Pt(e[57].totalBytes)+"",v,n,h,l,c,m=Math.round(yr(e[57]))+"",C,x,M,S,E,B,R,O,A,U,V,J,ie,Y=e[57].speed&&Rs(e);function D(){return e[40](e[57])}return{key:r,first:null,c(){t=L("div"),a=L("div"),_=L("div"),w=L("div"),i=Z(p),f=P(),b=L("div"),g=Z(d),y=Z(" / "),v=Z(k),n=P(),Y&&Y.c(),h=P(),l=L("div"),c=L("span"),C=Z(m),x=Z("%"),M=P(),S=L("button"),S.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',E=P(),B=L("div"),R=L("div"),U=P(),s(w,"class","text-sm font-medium truncate"),s(w,"title",o=e[57].filename),s(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),s(_,"class","flex-1 min-w-0"),s(c,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),s(S,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),s(S,"title","取消上传"),s(l,"class","flex items-center gap-2 ml-3"),s(a,"class","flex items-center justify-between mb-2"),s(R,"class","h-full bg-blue-500 transition-all duration-300"),s(R,"style",O=`width: ${Math.min(100,Math.max(0,yr(e[57])))}%`),s(B,"class",A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),s(t,"class",V="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(H,F){q(H,t,F),u(t,a),u(a,_),u(_,w),u(w,i),u(_,f),u(_,b),u(b,g),u(b,y),u(b,v),u(b,n),Y&&Y.m(b,null),u(a,h),u(a,l),u(l,c),u(c,C),u(c,x),u(l,M),u(l,S),u(t,E),u(t,B),u(B,R),u(t,U),J||(ie=re(S,"click",D),J=!0)},p(H,F){e=H,F[0]&4096&&p!==(p=e[57].filename+"")&&ue(i,p),F[0]&4096&&o!==(o=e[57].filename)&&s(w,"title",o),F[0]&4096&&d!==(d=Pt(e[57].bytesSent)+"")&&ue(g,d),F[0]&4096&&k!==(k=Pt(e[57].totalBytes)+"")&&ue(v,k),e[57].speed?Y?Y.p(e,F):(Y=Rs(e),Y.c(),Y.m(b,null)):Y&&(Y.d(1),Y=null),F[0]&4096&&m!==(m=Math.round(yr(e[57]))+"")&&ue(C,m),F[0]&4096&&O!==(O=`width: ${Math.min(100,Math.max(0,yr(e[57])))}%`)&&s(R,"style",O),F[0]&1&&A!==(A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&s(B,"class",A),F[0]&1&&V!==(V="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&s(t,"class",V)},d(H){H&&K(t),Y&&Y.d(),J=!1,ie()}}}function bh(r){let e,t,a,_,w,p,i,o,f,b,d,g,y,k,v,n,h,l,c,m,C,x,M,S,E,B,R,O,A,U,V,J,ie,Y,D,H,F,j,G,W,X,te,I,T,Q,z,N,$,ee,le,ae,ce,he,fe,Se,xe,me,ke,ne,ge,pe,Le,$e,Ne,We,st,Ue,Ce,de,Oe,nt,Pe=r[12].length>0&&xs(r);function dt(_e,Me){return _e[0]==="dark"?dh:hh}let ct=dt(r),et=ct(r),Je=r[4]&&Es(r);F=new zn({props:{onConnect:r[22],onAddClick:r[29],onDelete:r[30],onEdit:r[24]}});let rt=!r[4]&&Ls(r),mt={};te=new ml({props:mt}),r[31](te);let Ie=!r[5]&&Ms(r);$=new Qa({}),fe=new ac({});let Fe=r[5]&&Ds(r);function it(_e){r[32](_e)}function Ye(_e){r[33](_e)}let Ze={onAdd:r[23],onUpdate:r[25]};r[2]!==void 0&&(Ze.isOpen=r[2]),r[6]!==void 0&&(Ze.editingAsset=r[6]),ke=new sh({props:Ze}),at.push(()=>wt(ke,"isOpen",it)),at.push(()=>wt(ke,"editingAsset",Ye));function tt(_e){r[34](_e)}let je={themeStore:nr};r[1]!==void 0&&(je.isOpen=r[1]),Le=new qc({props:je}),at.push(()=>wt(Le,"isOpen",tt));function ye(_e){r[36](_e)}let He={onClose:r[35],themeStore:nr};r[3]!==void 0&&(He.isOpen=r[3]),We=new ch({props:He}),at.push(()=>wt(We,"isOpen",ye));let ot=r[13].isPanelOpen&&Ts(r);return{c(){e=L("div"),t=L("header"),a=L("div"),_=L("div"),_.textContent="哈",w=P(),p=L("div"),i=L("div"),o=Z("啊哈 SSH 连接工具"),b=P(),d=L("div"),g=Z("AHa SSH Manager"),k=P(),v=L("div"),n=L("div"),h=L("button"),l=oe("svg"),c=oe("path"),C=P(),Pe&&Pe.c(),x=P(),M=L("button"),et.c(),B=P(),R=L("button"),O=oe("svg"),A=oe("path"),U=P(),V=L("span"),V.textContent="开发工具",ie=P(),Y=L("div"),Je&&Je.c(),D=P(),H=L("div"),Xe(F.$$.fragment),G=P(),rt&&rt.c(),W=P(),X=L("div"),Xe(te.$$.fragment),T=P(),Ie&&Ie.c(),Q=P(),z=L("div"),N=L("div"),Xe($.$$.fragment),ee=P(),le=L("div"),ae=L("div"),ce=P(),he=L("div"),Xe(fe.$$.fragment),xe=P(),Fe&&Fe.c(),me=P(),Xe(ke.$$.fragment),pe=P(),Xe(Le.$$.fragment),Ne=P(),Xe(We.$$.fragment),Ue=P(),ot&&ot.c(),s(_,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),s(i,"class",f="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),s(d,"class",y="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),s(a,"class","flex items-center gap-3"),s(c,"stroke-linecap","round"),s(c,"stroke-linejoin","round"),s(c,"stroke-width","2"),s(c,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),s(l,"class","w-5 h-5"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"viewBox","0 0 24 24"),s(h,"class",m="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(h,"title","上传任务"),s(n,"class","relative"),M.disabled=r[2],s(M,"class",S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),s(M,"title",E=r[0]==="dark"?"切换到浅色模式":"切换到深色模式"),s(A,"stroke-linecap","round"),s(A,"stroke-linejoin","round"),s(A,"stroke-width","2"),s(A,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),s(O,"class","w-4 h-4"),s(O,"fill","none"),s(O,"stroke","currentColor"),s(O,"viewBox","0 0 24 24"),s(V,"class","text-sm"),R.disabled=r[2],s(R,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),s(v,"class","ml-auto flex items-center gap-3"),s(t,"class",J="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),be(t,"pointer-events",r[2]?"none":"auto"),s(H,"class",j="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),be(H,"width",(r[4]?"0":r[10])+"px"),be(H,"min-width",(r[4]?"0":r[10])+"px"),br(H,"collapsed",r[4]),s(X,"class",I="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),s(N,"class","overflow-hidden"),be(N,"height",r[8]+"%"),be(N,"min-height","0"),s(ae,"class","w-full h-full rounded svelte-m8xeqv"),s(le,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),s(le,"role","separator"),s(le,"aria-hidden","true"),be(le,"cursor",r[2]?"default":"row-resize"),be(le,"width","100%"),be(le,"padding","2px 0"),be(le,"pointer-events",r[2]?"none":"auto"),s(he,"class","overflow-hidden"),be(he,"height",100-r[8]+"%"),be(he,"min-height","0"),s(z,"data-right-panel","true"),s(z,"class",Se="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),be(z,"width",(r[5]?"0":r[9])+"px"),be(z,"min-width",r[5]?"0":"300px"),be(z,"max-width","600px"),br(z,"collapsed",r[5]),s(Y,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),s(e,"class",Ce="h-screen w-full flex flex-col "+r[11]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(_e,Me){q(_e,e,Me),u(e,t),u(t,a),u(a,_),u(a,w),u(a,p),u(p,i),u(i,o),u(p,b),u(p,d),u(d,g),u(t,k),u(t,v),u(v,n),u(n,h),u(h,l),u(l,c),u(n,C),Pe&&Pe.m(n,null),u(v,x),u(v,M),et.m(M,null),u(v,B),u(v,R),u(R,O),u(O,A),u(R,U),u(R,V),u(e,ie),u(e,Y),Je&&Je.m(Y,null),u(Y,D),u(Y,H),qe(F,H,null),u(Y,G),rt&&rt.m(Y,null),u(Y,W),u(Y,X),qe(te,X,null),u(Y,T),Ie&&Ie.m(Y,null),u(Y,Q),u(Y,z),u(z,N),qe($,N,null),u(z,ee),u(z,le),u(le,ae),u(z,ce),u(z,he),qe(fe,he,null),u(Y,xe),Fe&&Fe.m(Y,null),u(e,me),qe(ke,e,null),u(e,pe),qe(Le,e,null),u(e,Ne),qe(We,e,null),u(e,Ue),ot&&ot.m(e,null),de=!0,Oe||(nt=[re(h,"click",r[28]),re(M,"click",r[15]),re(R,"click",r[16]),re(le,"mousedown",r[21])],Oe=!0)},p(_e,Me){(!de||Me[0]&1&&f!==(f="font-semibold text-sm "+(_e[0]==="dark"?"text-white":"text-gray-900")))&&s(i,"class",f),(!de||Me[0]&1&&y!==(y="text-xs "+(_e[0]==="dark"?"text-gray-400":"text-gray-500")))&&s(d,"class",y),(!de||Me[0]&1&&m!==(m="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(_e[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(h,"class",m),_e[12].length>0?Pe?Pe.p(_e,Me):(Pe=xs(_e),Pe.c(),Pe.m(n,null)):Pe&&(Pe.d(1),Pe=null),ct!==(ct=dt(_e))&&(et.d(1),et=ct(_e),et&&(et.c(),et.m(M,null))),(!de||Me[0]&4)&&(M.disabled=_e[2]),(!de||Me[0]&1&&S!==(S="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(_e[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&s(M,"class",S),(!de||Me[0]&1&&E!==(E=_e[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&s(M,"title",E),(!de||Me[0]&4)&&(R.disabled=_e[2]),(!de||Me[0]&1&&J!==(J="h-14 flex-shrink-0 "+(_e[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&s(t,"class",J),(!de||Me[0]&4)&&be(t,"pointer-events",_e[2]?"none":"auto"),_e[4]?Je?Je.p(_e,Me):(Je=Es(_e),Je.c(),Je.m(Y,D)):Je&&(Je.d(1),Je=null);const Ft={};Me[0]&68&&(Ft.onAddClick=_e[29]),F.$set(Ft),(!de||Me[0]&1&&j!==(j="flex-shrink-0 transition-all duration-200 "+(_e[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&s(H,"class",j),(!de||Me[0]&1040)&&be(H,"width",(_e[4]?"0":_e[10])+"px"),(!de||Me[0]&1040)&&be(H,"min-width",(_e[4]?"0":_e[10])+"px"),(!de||Me[0]&17)&&br(H,"collapsed",_e[4]),_e[4]?rt&&(rt.d(1),rt=null):rt?rt.p(_e,Me):(rt=Ls(_e),rt.c(),rt.m(Y,W));const Vt={};te.$set(Vt),(!de||Me[0]&1&&I!==(I="flex-1 min-w-0 min-h-0 flex flex-col "+(_e[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&s(X,"class",I),_e[5]?Ie&&(Ie.d(1),Ie=null):Ie?Ie.p(_e,Me):(Ie=Ms(_e),Ie.c(),Ie.m(Y,Q)),(!de||Me[0]&256)&&be(N,"height",_e[8]+"%"),(!de||Me[0]&4)&&be(le,"cursor",_e[2]?"default":"row-resize"),(!de||Me[0]&4)&&be(le,"pointer-events",_e[2]?"none":"auto"),(!de||Me[0]&256)&&be(he,"height",100-_e[8]+"%"),(!de||Me[0]&1&&Se!==(Se="flex-shrink-0 flex flex-col overflow-hidden "+(_e[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&s(z,"class",Se),(!de||Me[0]&544)&&be(z,"width",(_e[5]?"0":_e[9])+"px"),(!de||Me[0]&32)&&be(z,"min-width",_e[5]?"0":"300px"),(!de||Me[0]&33)&&br(z,"collapsed",_e[5]),_e[5]?Fe?Fe.p(_e,Me):(Fe=Ds(_e),Fe.c(),Fe.m(Y,null)):Fe&&(Fe.d(1),Fe=null);const vt={};!ne&&Me[0]&4&&(ne=!0,vt.isOpen=_e[2],yt(()=>ne=!1)),!ge&&Me[0]&64&&(ge=!0,vt.editingAsset=_e[6],yt(()=>ge=!1)),ke.$set(vt);const At={};!$e&&Me[0]&2&&($e=!0,At.isOpen=_e[1],yt(()=>$e=!1)),Le.$set(At);const Wt={};Me[0]&8&&(Wt.onClose=_e[35]),!st&&Me[0]&8&&(st=!0,Wt.isOpen=_e[3],yt(()=>st=!1)),We.$set(Wt),_e[13].isPanelOpen?ot?ot.p(_e,Me):(ot=Ts(_e),ot.c(),ot.m(e,null)):ot&&(ot.d(1),ot=null),(!de||Me[0]&2049&&Ce!==(Ce="h-screen w-full flex flex-col "+_e[11]+" "+(_e[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&s(e,"class",Ce)},i(_e){de||(Te(F.$$.fragment,_e),Te(te.$$.fragment,_e),Te($.$$.fragment,_e),Te(fe.$$.fragment,_e),Te(ke.$$.fragment,_e),Te(Le.$$.fragment,_e),Te(We.$$.fragment,_e),de=!0)},o(_e){Re(F.$$.fragment,_e),Re(te.$$.fragment,_e),Re($.$$.fragment,_e),Re(fe.$$.fragment,_e),Re(ke.$$.fragment,_e),Re(Le.$$.fragment,_e),Re(We.$$.fragment,_e),de=!1},d(_e){_e&&K(e),Pe&&Pe.d(),et.d(),Je&&Je.d(),Ge(F),rt&&rt.d(),r[31](null),Ge(te),Ie&&Ie.d(),Ge($),Ge(fe),Fe&&Fe.d(),Ge(ke),Ge(Le),Ge(We),ot&&ot.d(),Oe=!1,Be(nt)}}}function Or(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function yh(r,e,t){let a,_,w,p,i,o,f,b,d,g;gt(r,nr,ne=>t(0,i=ne)),gt(r,xt,ne=>t(26,o=ne)),gt(r,Mt,ne=>t(27,f=ne)),gt(r,Ca,ne=>t(12,b=ne)),gt(r,bt,ne=>t(13,d=ne)),gt(r,xa,ne=>t(14,g=ne));let y=!1,k=!1,v=!1,n=!1,h=!1,l=null,c,m=!1,C=!1,x=!1;function M(){Rr(i==="light"?"dark":"light")}function S(){k||t(1,y=!y)}function E(){k||t(4,n=!n)}function B(){k||t(5,h=!h)}function R(ne){ne.preventDefault(),!(n||k)&&(m=!0,document.addEventListener("mousemove",O),document.addEventListener("mouseup",A))}function O(ne){if(!m)return;const ge=Math.max(200,Math.min(500,ne.clientX));On(ge)}function A(){m=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",A)}function U(ne){ne.preventDefault(),!k&&(C=!0,document.addEventListener("mousemove",V),document.addEventListener("mouseup",J))}function V(ne){if(!C)return;const ge=window.innerWidth,pe=Math.max(300,Math.min(600,ge-ne.clientX));Pn(pe)}function J(){C=!1,document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",J)}function ie(ne){if(ne.preventDefault(),k)return;x=!0;const ge=document.querySelector("[data-right-panel]");if(ge){const pe=ge.getBoundingClientRect();Y=ne.clientY,D=p,H=pe.height}document.addEventListener("mousemove",F),document.addEventListener("mouseup",j)}let Y=0,D=50,H=0;function F(ne){if(!x)return;const pe=(ne.clientY-Y)/H*100,Le=Math.max(20,Math.min(80,D+pe));Hn(Le)}function j(){x=!1,document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",j)}function G(ne){c&&typeof c.handleConnect=="function"?c.handleConnect(ne):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function W(ne){var ge;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(ne);const pe={id:ne.id,name:ne.name,host:ne.host,port:ne.port,username:ne.user,group:((ge=ne.tags)==null?void 0:ge[0])||"默认分组",status:"online",type:ne.type||"ssh",auth_type:ne.auth_type,key_path:ne.key_path,tags:ne.tags||[]};Ot.update(Le=>[...Le,pe])}catch(pe){throw console.error("Failed to add asset:",pe),pe}}function X(ne){t(6,l=ne),t(2,k=!0)}async function te(ne){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Ot.update(ge=>ge.map(pe=>{var Le;return pe.id===ne.id?{...pe,id:ne.id,name:ne.name,host:ne.host,port:ne.port,username:ne.user,group:((Le=ne.tags)==null?void 0:Le[0])||"默认分组",type:ne.type||"ssh",auth_type:ne.auth_type,key_path:ne.key_path,tags:ne.tags||[]}:pe}))}catch(ge){throw console.error("Failed to update asset:",ge),ge}}async function I(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const ne=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",ne);const ge=ne.map(pe=>{var Le;return{id:pe.id,name:pe.name,host:pe.host,port:pe.port,username:pe.user,group:((Le=pe.tags)==null?void 0:Le[0])||"默认分组",status:"online",type:"ssh",auth_type:pe.auth_type,key_path:pe.key_path,tags:pe.tags||[]}});Ot.set(ge)}catch(ne){console.error("Failed to load connections:",ne)}}or(async()=>{const ne=localStorage.getItem("ssh-tools-theme");ne?Rr(ne):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&Rr("dark");let ge=null;try{const pe=await Cr(()=>Promise.resolve().then(()=>ya),void 0);window.wailsBindings=pe,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(pe.default||pe).join(", ")})),await I(),ge=(await Cr(()=>Promise.resolve().then(()=>Xs),void 0)).EventsOn("app:show-about",()=>{t(3,v=!0)})}catch(pe){console.warn("Wails bindings not available yet:",pe.message)}return Or(),window.addEventListener("resize",Or),()=>{window.removeEventListener("resize",Or),ge&&ge()}});const T=()=>bt.togglePanel(),Q=()=>{t(6,l=null),t(2,k=!0)},z=async ne=>{if(!window.wailsBindings){Ot.update(ge=>ge.filter(pe=>pe.id!==ne.id));return}if(confirm(`确定要删除连接 "${ne.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(ne.id),Ot.update(ge=>ge.filter(pe=>pe.id!==ne.id))}catch(ge){console.error("Failed to delete asset:",ge),alert("删除连接失败: "+ge)}};function N(ne){at[ne?"unshift":"push"](()=>{c=ne,t(7,c)})}function $(ne){k=ne,t(2,k)}function ee(ne){l=ne,t(6,l)}function le(ne){y=ne,t(1,y)}const ae=()=>t(3,v=!1);function ce(ne){v=ne,t(3,v)}const he=()=>bt.setPanelOpen(!1),fe=()=>bt.setActiveTab("active"),Se=()=>bt.setActiveTab("history"),xe=async ne=>{await Ur(ne.id),bt.cancelTransfer(ne.id)},me=()=>bt.clearCompleted(),ke=ne=>bt.removeTransfer(ne.id);return r.$$.update=()=>{r.$$.dirty[0]&134217728&&f&&Array.from(f.values()),r.$$.dirty[0]&1&&t(11,a=i==="dark"?"dark":""),r.$$.dirty[0]&67108864&&t(10,_=o.sidebarWidth),r.$$.dirty[0]&67108864&&t(9,w=o.rightPanelWidth),r.$$.dirty[0]&67108864&&t(8,p=o.fileManagerHeight)},[i,y,k,v,n,h,l,c,p,w,_,a,b,d,g,M,S,E,B,R,U,ie,G,W,X,te,o,f,T,Q,z,N,$,ee,le,ae,ce,he,fe,Se,xe,me,ke]}class wh extends ft{constructor(e){super(),ut(this,e,yh,bh,ht,{},null,[-1,-1])}}new wh({target:document.getElementById("app")});
