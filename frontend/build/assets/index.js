var Ts=Object.defineProperty;var Bs=(r,e,t)=>e in r?Ts(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var gr=(r,e,t)=>Bs(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const S of g)if(S.type==="childList")for(const f of S.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&h(f)}).observe(document,{childList:!0,subtree:!0});function t(g){const S={};return g.integrity&&(S.integrity=g.integrity),g.referrerPolicy&&(S.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?S.credentials="include":g.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function h(g){if(g.ep)return;g.ep=!0;const S=t(g);fetch(g.href,S)}})();const As="modulepreload",Rs=function(r){return"/"+r},Hr={},ar=function(e,t,h){let g=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),i=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));g=Promise.allSettled(t.map(n=>{if(n=Rs(n),n in Hr)return;Hr[n]=!0;const u=n.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${b}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":As,u||(d.as="script"),d.crossOrigin="",d.href=n,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((m,y)=>{d.addEventListener("load",m),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})}))}function S(f){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=f,window.dispatchEvent(i),!i.defaultPrevented)throw f}return g.then(f=>{for(const i of f||[])i.status==="rejected"&&S(i.reason);return e().catch(S)})};function we(){}function Os(r,e){for(const t in e)r[t]=e[t];return r}function os(r){return r()}function Ir(){return Object.create(null)}function Oe(r){r.forEach(os)}function Mt(r){return typeof r=="function"}function it(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Ps(r){return Object.keys(r).length===0}function Cr(r,...e){if(r==null){for(const h of e)h(void 0);return we}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Hs(r){let e;return Cr(r,t=>e=t)(),e}function ct(r,e,t){r.$$.on_destroy.push(Cr(e,t))}function Is(r,e,t,h){if(r){const g=ls(r,e,t,h);return r[0](g)}}function ls(r,e,t,h){return r[1]&&h?Os(t.ctx.slice(),r[1](h(e))):t.ctx}function Fs(r,e,t,h){return r[2],e.dirty}function Ws(r,e,t,h,g,S){if(g){const f=ls(e,t,h,S);r.p(f,g)}}function zs(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let h=0;h<t;h++)e[h]=-1;return e}return-1}function Fr(r){return r??""}function as(r){return r&&Mt(r.destroy)?r.destroy:we}const cs=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _(r,e){r.appendChild(e)}function q(r,e,t){r.insertBefore(e,t||null)}function V(r){r.parentNode&&r.parentNode.removeChild(r)}function Jt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function D(r){return document.createElement(r)}function le(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function $(r){return document.createTextNode(r)}function F(){return $(" ")}function pt(){return $("")}function re(r,e,t,h){return r.addEventListener(e,t,h),()=>r.removeEventListener(e,t,h)}function js(r){return function(e){return e.preventDefault(),r.call(this,e)}}function Wr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function o(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Us(r){let e;return{p(...t){e=t,e.forEach(h=>r.push(h))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function hs(r){return r===""?null:+r}function Ns(r){return Array.from(r.childNodes)}function ue(r,e){e=""+e,r.data!==e&&(r.data=e)}function ve(r,e){r.value=e??""}function me(r,e,t,h){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function cr(r,e,t){for(let h=0;h<r.options.length;h+=1){const g=r.options[h];if(g.__value===e){g.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function ds(r){const e=r.querySelector(":checked");return e&&e.__value}function ir(r,e,t){r.classList.toggle(e,!!t)}function kt(r,e){return new r(e)}let Xt;function Gt(r){Xt=r}function us(){if(!Xt)throw new Error("Function called outside component initialization");return Xt}function Vt(r){us().$$.on_mount.push(r)}function dr(r){us().$$.on_destroy.push(r)}const Ut=[],rt=[];let Nt=[];const yr=[],fs=Promise.resolve();let wr=!1;function _s(){wr||(wr=!0,fs.then(ps))}function or(){return _s(),fs}function Yt(r){Nt.push(r)}function ft(r){yr.push(r)}const mr=new Set;let zt=0;function ps(){if(zt!==0)return;const r=Xt;do{try{for(;zt<Ut.length;){const e=Ut[zt];zt++,Gt(e),Ks(e.$$)}}catch(e){throw Ut.length=0,zt=0,e}for(Gt(null),Ut.length=0,zt=0;rt.length;)rt.pop()();for(let e=0;e<Nt.length;e+=1){const t=Nt[e];mr.has(t)||(mr.add(t),t())}Nt.length=0}while(Ut.length);for(;yr.length;)yr.pop()();wr=!1,mr.clear(),Gt(r)}function Ks(r){if(r.fragment!==null){r.update(),Oe(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Yt)}}function Vs(r){const e=[],t=[];Nt.forEach(h=>r.indexOf(h)===-1?e.push(h):t.push(h)),t.forEach(h=>h()),Nt=e}const lr=new Set;let Ot;function gt(){Ot={r:0,c:[],p:Ot}}function mt(){Ot.r||Oe(Ot.c),Ot=Ot.p}function Le(r,e){r&&r.i&&(lr.delete(r),r.i(e))}function Re(r,e,t,h){if(r&&r.o){if(lr.has(r))return;lr.add(r),Ot.c.push(()=>{lr.delete(r),h&&(t&&r.d(1),h())}),r.o(e)}else h&&h()}function Ke(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function qt(r,e){r.d(1),e.delete(r.key)}function qs(r,e){Re(r,1,1,()=>{e.delete(r.key)})}function Pt(r,e,t,h,g,S,f,i,n,u,b,d){let m=r.length,y=S.length,w=m;const v={};for(;w--;)v[r[w].key]=w;const s=[],c=new Map,l=new Map,a=[];for(w=y;w--;){const L=d(g,S,w),k=t(L);let E=f.get(k);E?a.push(()=>E.p(L,e)):(E=u(k,L),E.c()),c.set(k,s[w]=E),k in v&&l.set(k,Math.abs(w-v[k]))}const p=new Set,C=new Set;function x(L){Le(L,1),L.m(i,b),f.set(L.key,L),b=L.first,y--}for(;m&&y;){const L=s[y-1],k=r[m-1],E=L.key,B=k.key;L===k?(b=L.first,m--,y--):c.has(B)?!f.has(E)||p.has(E)?x(L):C.has(B)?m--:l.get(E)>l.get(B)?(C.add(E),x(L)):(p.add(B),m--):(n(k,f),m--)}for(;m--;){const L=r[m];c.has(L.key)||n(L,f)}for(;y;)x(s[y-1]);return Oe(a),s}function _t(r,e,t){const h=r.$$.props[e];h!==void 0&&(r.$$.bound[h]=t,t(r.$$.ctx[h]))}function ze(r){r&&r.c()}function Fe(r,e,t){const{fragment:h,after_update:g}=r.$$;h&&h.m(e,t),Yt(()=>{const S=r.$$.on_mount.map(os).filter(Mt);r.$$.on_destroy?r.$$.on_destroy.push(...S):Oe(S),r.$$.on_mount=[]}),g.forEach(Yt)}function We(r,e){const t=r.$$;t.fragment!==null&&(Vs(t.after_update),Oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Gs(r,e){r.$$.dirty[0]===-1&&(Ut.push(r),_s(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function st(r,e,t,h,g,S,f=null,i=[-1]){const n=Xt;Gt(r);const u=r.$$={fragment:null,ctx:[],props:S,update:we,not_equal:g,bound:Ir(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(n?n.$$.context:[])),callbacks:Ir(),dirty:i,skip_bound:!1,root:e.target||n.$$.root};f&&f(u.root);let b=!1;if(u.ctx=t?t(r,e.props||{},(d,m,...y)=>{const w=y.length?y[0]:m;return u.ctx&&g(u.ctx[d],u.ctx[d]=w)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](w),b&&Gs(r,d)),m}):[],u.update(),b=!0,Oe(u.before_update),u.fragment=h?h(u.ctx):!1,e.target){if(e.hydrate){const d=Ns(e.target);u.fragment&&u.fragment.l(d),d.forEach(V)}else u.fragment&&u.fragment.c();e.intro&&Le(r.$$.fragment),Fe(r,e.target,e.anchor),ps()}Gt(n)}class nt{constructor(){gr(this,"$$");gr(this,"$$set")}$destroy(){We(this,1),this.$destroy=we}$on(e,t){if(!Mt(t))return we;const h=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return h.push(t),()=>{const g=h.indexOf(t);g!==-1&&h.splice(g,1)}}$set(e){this.$$set&&!Ps(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Js="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Js);const jt=[];function Xs(r,e){return{subscribe:Ht(r,e).subscribe}}function Ht(r,e=we){let t;const h=new Set;function g(i){if(it(r,i)&&(r=i,t)){const n=!jt.length;for(const u of h)u[1](),jt.push(u,r);if(n){for(let u=0;u<jt.length;u+=2)jt[u][0](jt[u+1]);jt.length=0}}}function S(i){g(i(r))}function f(i,n=we){const u=[i,n];return h.add(u),h.size===1&&(t=e(g,S)||we),i(r),()=>{h.delete(u),h.size===0&&t&&(t(),t=null)}}return{set:g,update:S,subscribe:f}}function Ct(r,e,t){const h=!Array.isArray(r),g=h?[r]:r;if(!g.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const S=e.length<2;return Xs(t,(f,i)=>{let n=!1;const u=[];let b=0,d=we;const m=()=>{if(b)return;d();const w=e(h?u[0]:u,f,i);S?f(w):d=Mt(w)?w:we},y=g.map((w,v)=>Cr(w,s=>{u[v]=s,b&=~(1<<v),n&&m()},()=>{b|=1<<v}));return n=!0,m(),function(){Oe(y),d(),n=!1}})}const Lt=Ht([]);Ct(Lt,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}));const St=Ht(new Map),At=Ht(null),gs="ssh-tools-theme";function Ys(){if(typeof window>"u")return null;try{return localStorage.getItem(gs)}catch{return null}}function Zs(r){if(!(typeof window>"u"))try{localStorage.setItem(gs,r)}catch{}}const Qs=Ys(),$s=Qs||"light",Kt=Ht($s);function vr(r){Kt.set(r),Zs(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function en(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const tn={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},rn=en(),vt=Ht({...tn,...rn});vt.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});Ct(vt,r=>r.isDevToolsOpen);Ct(vt,r=>r.isFileManagerOpen);Ct(vt,r=>r.isMonitorOpen);Ct(vt,r=>r.sidebarWidth);Ct(vt,r=>r.rightPanelWidth);Ct(vt,r=>r.fileManagerHeight);function sn(r){vt.update(e=>({...e,sidebarWidth:r}))}function nn(r){vt.update(e=>({...e,rightPanelWidth:r}))}function on(r){vt.update(e=>({...e,fileManagerHeight:r}))}function zr(r,e,t){const h=r.slice();return h[17]=e[t][0],h[18]=e[t][1],h}function jr(r,e,t){const h=r.slice();return h[21]=e[t],h}function ln(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M9 5l7 7-7 7"),o(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function an(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M19 9l-7 7-7-7"),o(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function Ur(r){let e,t=[],h=new Map,g=Ke(r[18]);const S=f=>f[21].id;for(let f=0;f<g.length;f+=1){let i=jr(r,g,f),n=S(i);h.set(n,t[f]=Kr(n,i))}return{c(){e=D("div");for(let f=0;f<t.length;f+=1)t[f].c();o(e,"class","ml-4")},m(f,i){q(f,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(f,i){i&165&&(g=Ke(f[18]),t=Pt(t,i,S,1,f,g,h,e,qt,Kr,null,jr))},d(f){f&&V(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Nr(r){let e,t=r[21].dbType.toUpperCase()+"",h;return{c(){e=$("• "),h=$(t)},m(g,S){q(g,e,S),q(g,h,S)},p(g,S){S&32&&t!==(t=g[21].dbType.toUpperCase()+"")&&ue(h,t)},d(g){g&&(V(e),V(h))}}}function Kr(r,e){let t,h,g=qr(e[21].type)+"",S,f,i,n,u=e[21].name+"",b,d,m,y,w,v,s=e[21].username+"",c,l,a=e[21].host+"",p,C,x=e[21].port+"",L,k,E,B,O,P,A,j,X,ee,Q,U,T=e[21].type==="database"&&e[21].dbType&&Nr(e);function R(){return e[13](e[21])}function I(){return e[14](e[21])}function W(...G){return e[15](e[21],...G)}function N(){return e[16](e[21])}return{key:r,first:null,c(){t=D("div"),h=D("div"),S=F(),f=D("div"),i=D("div"),n=D("span"),b=$(u),d=F(),m=D("div"),w=F(),v=D("div"),c=$(s),l=$("@"),p=$(a),C=$(":"),L=$(x),k=F(),T&&T.c(),E=F(),B=D("div"),O=D("button"),O.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',P=F(),A=D("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',j=F(),X=D("button"),X.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',ee=F(),o(h,"class","flex-shrink-0"),o(n,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),o(m,"class",y=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),o(i,"class","flex items-center gap-2"),o(v,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),o(f,"class","flex-1 min-w-0"),o(O,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),o(O,"title","连接"),o(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),o(X,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),o(B,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),o(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(G,Z){q(G,t,Z),_(t,h),h.innerHTML=g,_(t,S),_(t,f),_(f,i),_(i,n),_(n,b),_(i,d),_(i,m),_(f,w),_(f,v),_(v,c),_(v,l),_(v,p),_(v,C),_(v,L),_(v,k),T&&T.m(v,null),_(t,E),_(t,B),_(B,O),_(B,P),_(B,A),_(B,j),_(B,X),_(t,ee),Q||(U=[re(O,"click",Wr(R)),re(A,"click",Wr(I)),re(X,"click",W),re(t,"click",N)],Q=!0)},p(G,Z){e=G,Z&32&&g!==(g=qr(e[21].type)+"")&&(h.innerHTML=g),Z&32&&u!==(u=e[21].name+"")&&ue(b,u),Z&32&&y!==(y=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&o(m,"class",y),Z&32&&s!==(s=e[21].username+"")&&ue(c,s),Z&32&&a!==(a=e[21].host+"")&&ue(p,a),Z&32&&x!==(x=e[21].port+"")&&ue(L,x),e[21].type==="database"&&e[21].dbType?T?T.p(e,Z):(T=Nr(e),T.c(),T.m(v,null)):T&&(T.d(1),T=null)},d(G){G&&V(t),T&&T.d(),Q=!1,Oe(U)}}}function Vr(r){let e,t,h,g,S,f,i,n,u=r[17]+"",b,d,m,y,w=r[18].length+"",v,s,c,l=r[4].has(r[17]),a,p,C;function x(O,P){return P&48&&(h=null),h==null&&(h=!!O[4].has(O[17])),h?an:ln}let L=x(r,-1),k=L(r);function E(){return r[12](r[17])}let B=l&&Ur(r);return{c(){e=D("div"),t=D("div"),k.c(),g=F(),S=le("svg"),f=le("path"),i=F(),n=D("span"),b=$(u),d=F(),m=D("span"),y=$("("),v=$(w),s=$(")"),c=F(),B&&B.c(),a=F(),o(f,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),o(S,"class","w-4 h-4 text-amber-500"),o(S,"fill","currentColor"),o(S,"viewBox","0 0 24 24"),o(n,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),o(m,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),o(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),o(e,"class","mb-1")},m(O,P){q(O,e,P),_(e,t),k.m(t,null),_(t,g),_(t,S),_(S,f),_(t,i),_(t,n),_(n,b),_(t,d),_(t,m),_(m,y),_(m,v),_(m,s),_(e,c),B&&B.m(e,null),_(e,a),p||(C=re(t,"click",E),p=!0)},p(O,P){r=O,L!==(L=x(r,P))&&(k.d(1),k=L(r),k&&(k.c(),k.m(t,g))),P&32&&u!==(u=r[17]+"")&&ue(b,u),P&32&&w!==(w=r[18].length+"")&&ue(v,w),P&48&&(l=r[4].has(r[17])),l?B?B.p(r,P):(B=Ur(r),B.c(),B.m(e,a)):B&&(B.d(1),B=null)},d(O){O&&V(e),k.d(),B&&B.d(),p=!1,C()}}}function cn(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c=Ke(Object.entries(r[5])),l=[];for(let a=0;a<c.length;a+=1)l[a]=Vr(zr(r,c,a));return{c(){e=D("div"),t=D("div"),h=D("div"),g=D("h2"),g.textContent="服务器资产",S=F(),f=D("button"),f.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',i=F(),n=D("div"),u=le("svg"),b=le("path"),d=F(),m=D("input"),y=F(),w=D("div");for(let a=0;a<l.length;a+=1)l[a].c();o(g,"class","text-sm font-semibold text-gray-900 dark:text-white"),o(f,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),o(h,"class","flex items-center justify-between mb-3"),o(b,"stroke-linecap","round"),o(b,"stroke-linejoin","round"),o(b,"stroke-width","2"),o(b,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),o(u,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),o(u,"fill","none"),o(u,"stroke","currentColor"),o(u,"viewBox","0 0 24 24"),o(m,"type","text"),o(m,"placeholder","搜索服务器..."),o(m,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),o(n,"class","relative"),o(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),o(w,"class","flex-1 overflow-y-auto scrollbar-thin"),o(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(a,p){q(a,e,p),_(e,t),_(t,h),_(h,g),_(h,S),_(h,f),_(t,i),_(t,n),_(n,u),_(u,b),_(n,d),_(n,m),ve(m,r[3]),_(e,y),_(e,w);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(w,null);v||(s=[re(f,"click",function(){Mt(r[1])&&r[1].apply(this,arguments)}),re(m,"input",r[11])],v=!0)},p(a,[p]){if(r=a,p&8&&m.value!==r[3]&&ve(m,r[3]),p&245){c=Ke(Object.entries(r[5]));let C;for(C=0;C<c.length;C+=1){const x=zr(r,c,C);l[C]?l[C].p(x,p):(l[C]=Vr(x),l[C].c(),l[C].m(w,null))}for(;C<l.length;C+=1)l[C].d(1);l.length=c.length}},i:we,o:we,d(a){a&&V(e),Jt(l,a),v=!1,Oe(s)}}}function qr(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function hn(r,e,t){let h,g,S;ct(r,Lt,p=>t(10,S=p));let{onConnect:f}=e,{onAddClick:i}=e,{onDelete:n}=e,{onEdit:u}=e,b="",d=new Set(["生产环境","开发环境"]);function m(p){const C=new Set(d);C.has(p)?C.delete(p):C.add(p),t(4,d=C)}async function y(p,C){if(C.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),Lt.update(x=>x.filter(L=>L.id!==p.id));return}if(confirm(`确定要删除连接 "${p.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(p.id),Lt.update(x=>x.filter(L=>L.id!==p.id))}catch(x){console.error("Failed to delete asset:",x)}}function w(){b=this.value,t(3,b)}const v=p=>m(p),s=p=>f(p),c=p=>u(p),l=(p,C)=>y(p,C),a=p=>f(p);return r.$$set=p=>{"onConnect"in p&&t(0,f=p.onConnect),"onAddClick"in p&&t(1,i=p.onAddClick),"onDelete"in p&&t(8,n=p.onDelete),"onEdit"in p&&t(2,u=p.onEdit)},r.$$.update=()=>{r.$$.dirty&1032&&t(9,h=S.filter(p=>{const C=b.toLowerCase();return p.name.toLowerCase().includes(C)||p.host.toLowerCase().includes(C)||p.group.toLowerCase().includes(C)||p.username.toLowerCase().includes(C)})),r.$$.dirty&512&&t(5,g=h.reduce((p,C)=>(p[C.group]||(p[C.group]=[]),p[C.group].push(C),p),{}))},[f,i,u,b,d,g,m,y,n,h,S,w,v,s,c,l,a]}class dn extends nt{constructor(e){super(),st(this,e,hn,cn,it,{onConnect:0,onAddClick:1,onDelete:8,onEdit:2})}}var ms={exports:{}};(function(r,e){(function(t,h){r.exports=h()})(globalThis,()=>(()=>{var t={4567:function(f,i,n){var u=this&&this.__decorate||function(l,a,p,C){var x,L=arguments.length,k=L<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,p,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(k=(L<3?x(k):L>3?x(a,p,k):x(a,p))||k);return L>3&&k&&Object.defineProperty(a,p,k),k},b=this&&this.__param||function(l,a){return function(p,C){a(p,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const d=n(9042),m=n(9924),y=n(844),w=n(4725),v=n(2585),s=n(3656);let c=i.AccessibilityManager=class extends y.Disposable{constructor(l,a,p,C){super(),this._terminal=l,this._coreBrowserService=p,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(x=>this._handleResize(x.rows))),this.register(this._terminal.onRender(x=>this._refreshRows(x.start,x.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(x=>this._handleChar(x))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(x=>this._handleTab(x))),this.register(this._terminal.onKey(x=>this._handleKey(x.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,s.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let a=0;a<l;a++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(l)||this._charsToConsume.push(l)}_refreshRows(l,a){this._liveRegionDebouncer.refresh(l,a,this._terminal.rows)}_renderRows(l,a){const p=this._terminal.buffer,C=p.lines.length.toString();for(let x=l;x<=a;x++){const L=p.lines.get(p.ydisp+x),k=[],E=(L==null?void 0:L.translateToString(!0,void 0,void 0,k))||"",B=(p.ydisp+x+1).toString(),O=this._rowElements[x];O&&(E.length===0?(O.innerText=" ",this._rowColumns.set(O,[0,1])):(O.textContent=E,this._rowColumns.set(O,k)),O.setAttribute("aria-posinset",B),O.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,a){const p=l.target,C=this._rowElements[a===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(a===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==C)return;let x,L;if(a===0?(x=p,L=this._rowElements.pop(),this._rowContainer.removeChild(L)):(x=this._rowElements.shift(),L=p,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),L.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){var E;if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let a={node:l.anchorNode,offset:l.anchorOffset},p={node:l.focusNode,offset:l.focusOffset};if((a.node.compareDocumentPosition(p.node)&Node.DOCUMENT_POSITION_PRECEDING||a.node===p.node&&a.offset>p.offset)&&([a,p]=[p,a]),a.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(a={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(a.node))return;const C=this._rowElements.slice(-1)[0];if(p.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(p={node:C,offset:((E=C.textContent)==null?void 0:E.length)??0}),!this._rowContainer.contains(p.node))return;const x=({node:B,offset:O})=>{const P=B instanceof Text?B.parentNode:B;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(P);if(!j)return console.warn("columns is null. Race condition?"),null;let X=O<j.length?j[O]:j.slice(-1)[0]+1;return X>=this._terminal.cols&&(++A,X=0),{row:A,column:X}},L=x(a),k=x(p);if(L&&k){if(L.row>k.row||L.row===k.row&&L.column>=k.column)throw new Error("invalid range");this._terminal.select(L.column,L.row,(k.row-L.row)*this._terminal.cols-L.column+k.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=c=u([b(1,v.IInstantiationService),b(2,w.ICoreBrowserService),b(3,w.IRenderService)],c)},3614:(f,i)=>{function n(m){return m.replace(/\r?\n/g,"\r")}function u(m,y){return y?"\x1B[200~"+m+"\x1B[201~":m}function b(m,y,w,v){m=u(m=n(m),w.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(m,!0),y.value=""}function d(m,y,w){const v=w.getBoundingClientRect(),s=m.clientX-v.left-10,c=m.clientY-v.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${s}px`,y.style.top=`${c}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=u,i.copyHandler=function(m,y){m.clipboardData&&m.clipboardData.setData("text/plain",y.selectionText),m.preventDefault()},i.handlePasteEvent=function(m,y,w,v){m.stopPropagation(),m.clipboardData&&b(m.clipboardData.getData("text/plain"),y,w,v)},i.paste=b,i.moveTextAreaUnderMouseCursor=d,i.rightClickHandler=function(m,y,w,v,s){d(m,y,w),s&&v.rightClickSelect(m),y.value=v.selectionText,y.select()}},7239:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=n(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(b,d,m){this._css.set(b,d,m)}getCss(b,d){return this._css.get(b,d)}setColor(b,d,m){this._color.set(b,d,m)}getColor(b,d){return this._color.get(b,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,u,b,d){n.addEventListener(u,b,d);let m=!1;return{dispose:()=>{m||(m=!0,n.removeEventListener(u,b,d))}}}},3551:function(f,i,n){var u=this&&this.__decorate||function(c,l,a,p){var C,x=arguments.length,L=x<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,l,a,p);else for(var k=c.length-1;k>=0;k--)(C=c[k])&&(L=(x<3?C(L):x>3?C(l,a,L):C(l,a))||L);return x>3&&L&&Object.defineProperty(l,a,L),L},b=this&&this.__param||function(c,l){return function(a,p){l(a,p,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const d=n(3656),m=n(8460),y=n(844),w=n(2585),v=n(4725);let s=i.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(c,l,a,p,C){super(),this._element=c,this._mouseService=l,this._renderService=a,this._bufferService=p,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{var x;this._lastMouseEvent=void 0,(x=this._activeProviderReplies)==null||x.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){this._lastMouseEvent=c;const l=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const a=c.composedPath();for(let p=0;p<a.length;p++){const C=a[p];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,l){var p,C;this._activeProviderReplies&&l||((p=this._activeProviderReplies)==null||p.forEach(x=>{x==null||x.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let a=!1;for(const[x,L]of this._linkProviderService.linkProviders.entries())l?(C=this._activeProviderReplies)!=null&&C.get(x)&&(a=this._checkLinkProviderResult(x,c,a)):L.provideLinks(c.y,k=>{var B,O;if(this._isMouseOut)return;const E=k==null?void 0:k.map(P=>({link:P}));(B=this._activeProviderReplies)==null||B.set(x,E),a=this._checkLinkProviderResult(x,c,a),((O=this._activeProviderReplies)==null?void 0:O.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,l){const a=new Set;for(let p=0;p<l.size;p++){const C=l.get(p);if(C)for(let x=0;x<C.length;x++){const L=C[x],k=L.link.range.start.y<c?0:L.link.range.start.x,E=L.link.range.end.y>c?this._bufferService.cols:L.link.range.end.x;for(let B=k;B<=E;B++){if(a.has(B)){C.splice(x--,1);break}a.add(B)}}}}_checkLinkProviderResult(c,l,a){var x;if(!this._activeProviderReplies)return a;const p=this._activeProviderReplies.get(c);let C=!1;for(let L=0;L<c;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(C=!0);if(!C&&p){const L=p.find(k=>this._linkAtPosition(k.link,l));L&&(a=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!a)for(let L=0;L<this._activeProviderReplies.size;L++){const k=(x=this._activeProviderReplies.get(L))==null?void 0:x.find(E=>this._linkAtPosition(E.link,l));if(k){a=!0,this._handleNewLink(k);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._currentLink)return;const l=this._positionFromMouseEvent(c,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,l){this._currentLink&&this._lastMouseEvent&&(!c||!l||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(c.link,l)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var a,p;return(p=(a=this._currentLink)==null?void 0:a.state)==null?void 0:p.decorations.pointerCursor},set:a=>{var p;(p=this._currentLink)!=null&&p.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",a))}},underline:{get:()=>{var a,p;return(p=(a=this._currentLink)==null?void 0:a.state)==null?void 0:p.decorations.underline},set:a=>{var p,C,x;(p=this._currentLink)!=null&&p.state&&((x=(C=this._currentLink)==null?void 0:C.state)==null?void 0:x.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,a))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const p=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(p,C),this._lastMouseEvent)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}})))}_linkHover(c,l,a){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(a,l.text)}_fireUnderlineEvent(c,l){const a=c.range,p=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-p-1,a.end.x,a.end.y-p-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(c,l,a){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(a,l.text)}_linkAtPosition(c,l){const a=c.range.start.y*this._bufferService.cols+c.range.start.x,p=c.range.end.y*this._bufferService.cols+c.range.end.x,C=l.y*this._bufferService.cols+l.x;return a<=C&&C<=p}_positionFromMouseEvent(c,l,a){const p=a.getCoords(c,l,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,l,a,p,C){return{x1:c,y1:l,x2:a,y2:p,cols:this._bufferService.cols,fg:C}}};i.Linkifier=s=u([b(1,v.IMouseService),b(2,v.IRenderService),b(3,w.IBufferService),b(4,v.ILinkProviderService)],s)},9042:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(f,i,n){var u=this&&this.__decorate||function(v,s,c,l){var a,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,s,c,l);else for(var x=v.length-1;x>=0;x--)(a=v[x])&&(C=(p<3?a(C):p>3?a(s,c,C):a(s,c))||C);return p>3&&C&&Object.defineProperty(s,c,C),C},b=this&&this.__param||function(v,s){return function(c,l){s(c,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const d=n(511),m=n(2585);let y=i.OscLinkProvider=class{constructor(v,s,c){this._bufferService=v,this._optionsService=s,this._oscLinkService=c}provideLinks(v,s){var E;const c=this._bufferService.buffer.lines.get(v-1);if(!c)return void s(void 0);const l=[],a=this._optionsService.rawOptions.linkHandler,p=new d.CellData,C=c.getTrimmedLength();let x=-1,L=-1,k=!1;for(let B=0;B<C;B++)if(L!==-1||c.hasContent(B)){if(c.loadCell(B,p),p.hasExtendedAttrs()&&p.extended.urlId){if(L===-1){L=B,x=p.extended.urlId;continue}k=p.extended.urlId!==x}else L!==-1&&(k=!0);if(k||L!==-1&&B===C-1){const O=(E=this._oscLinkService.getLinkData(x))==null?void 0:E.uri;if(O){const P={start:{x:L+1,y:v},end:{x:B+(k||B!==C-1?0:1),y:v}};let A=!1;if(!(a!=null&&a.allowNonHttpProtocols))try{const j=new URL(O);["http:","https:"].includes(j.protocol)||(A=!0)}catch{A=!0}A||l.push({text:O,range:P,activate:(j,X)=>a?a.activate(j,X,P):w(0,X),hover:(j,X)=>{var ee;return(ee=a==null?void 0:a.hover)==null?void 0:ee.call(a,j,X,P)},leave:(j,X)=>{var ee;return(ee=a==null?void 0:a.leave)==null?void 0:ee.call(a,j,X,P)}})}k=!1,p.hasExtendedAttrs()&&p.extended.urlId?(L=B,x=p.extended.urlId):(L=-1,x=-1)}}s(l)}};function w(v,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=y=u([b(0,m.IBufferService),b(1,m.IOptionsService),b(2,m.IOscLinkService)],y)},6193:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,u){this._renderCallback=n,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,u,b){this._rowCount=b,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=n(3614),b=n(3656),d=n(3551),m=n(9042),y=n(3730),w=n(1680),v=n(3107),s=n(5744),c=n(2950),l=n(1296),a=n(428),p=n(4269),C=n(5114),x=n(8934),L=n(3230),k=n(9312),E=n(4725),B=n(6731),O=n(8055),P=n(8969),A=n(8460),j=n(844),X=n(6114),ee=n(8437),Q=n(2584),U=n(7399),T=n(5941),R=n(9074),I=n(2585),W=n(5435),N=n(4567),G=n(779);class Z extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(z={}){super(z),this.browser=X,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(G.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((M,K)=>this.refresh(M,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(M=>this._reportWindowsOptions(M))),this.register(this._inputHandler.onColor(M=>this._handleColorEvent(M))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(M=>this._afterResize(M.cols,M.rows))),this.register((0,j.toDisposable)(()=>{var M,K;this._customKeyEventHandler=void 0,(K=(M=this.element)==null?void 0:M.parentNode)==null||K.removeChild(this.element)}))}_handleColorEvent(z){if(this._themeService)for(const M of z){let K,H="";switch(M.index){case 256:K="foreground",H="10";break;case 257:K="background",H="11";break;case 258:K="cursor",H="12";break;default:K="ansi",H="4;"+M.index}switch(M.type){case 0:const J=O.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${H};${(0,T.toRgbString)(J)}${Q.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(Y=>Y.ansi[M.index]=O.channels.toColor(...M.color));else{const Y=K;this._themeService.modifyColors(ne=>ne[Y]=O.channels.toColor(...M.color))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(z){z?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(N.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(z){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var z;return(z=this.textarea)==null?void 0:z.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const z=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(z);if(!M)return;const K=Math.min(this.buffer.x,this.cols-1),H=this._renderService.dimensions.css.cell.height,J=M.getWidth(K),Y=this._renderService.dimensions.css.cell.width*J,ne=this.buffer.y*this._renderService.dimensions.css.cell.height,ae=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ae+"px",this.textarea.style.top=ne+"px",this.textarea.style.width=Y+"px",this.textarea.style.height=H+"px",this.textarea.style.lineHeight=H+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",M=>{this.hasSelection()&&(0,u.copyHandler)(M,this._selectionService)}));const z=M=>(0,u.handlePasteEvent)(M,this.textarea,this.coreService,this.optionsService);this.register((0,b.addDisposableDomListener)(this.textarea,"paste",z)),this.register((0,b.addDisposableDomListener)(this.element,"paste",z)),X.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",M=>{M.button===2&&(0,u.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",M=>{(0,u.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),X.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",M=>{M.button===1&&(0,u.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",z=>this._keyUp(z),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",z=>this._keyDown(z),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",z=>this._keyPress(z),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",z=>this._compositionHelper.compositionupdate(z))),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,b.addDisposableDomListener)(this.textarea,"input",z=>this._inputEvent(z),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(z){var K;if(!z)throw new Error("Terminal requires a parent element.");if(z.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((K=this.element)==null?void 0:K.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=z.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),z.appendChild(this.element);const M=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),M.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,b.addDisposableDomListener)(this.screenElement,"mousemove",H=>this.updateCursorStyle(H))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),M.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),X.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,z.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,b.addDisposableDomListener)(this.textarea,"focus",H=>this._handleTextAreaFocus(H))),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(a.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(H=>this._onRender.fire(H))),this.onResize(H=>this._renderService.resize(H.cols,H.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(M);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(k.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(H=>this._renderService.handleSelectionChanged(H.start,H.end,H.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(H=>{this.textarea.value=H,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(H=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",H=>this._selectionService.handleMouseDown(H))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(N.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",H=>this._handleScreenReaderModeOptionChange(H))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",H=>{!this._overviewRulerRenderer&&H&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const z=this,M=this.element;function K(Y){const ne=z._mouseService.getMouseReportCoords(Y,z.screenElement);if(!ne)return!1;let ae,ie;switch(Y.overrideType||Y.type){case"mousemove":ie=32,Y.buttons===void 0?(ae=3,Y.button!==void 0&&(ae=Y.button<3?Y.button:3)):ae=1&Y.buttons?0:4&Y.buttons?1:2&Y.buttons?2:3;break;case"mouseup":ie=0,ae=Y.button<3?Y.button:3;break;case"mousedown":ie=1,ae=Y.button<3?Y.button:3;break;case"wheel":if(z._customWheelEventHandler&&z._customWheelEventHandler(Y)===!1||z.viewport.getLinesScrolled(Y)===0)return!1;ie=Y.deltaY<0?0:1,ae=4;break;default:return!1}return!(ie===void 0||ae===void 0||ae>4)&&z.coreMouseService.triggerMouseEvent({col:ne.col,row:ne.row,x:ne.x,y:ne.y,button:ae,action:ie,ctrl:Y.ctrlKey,alt:Y.altKey,shift:Y.shiftKey})}const H={mouseup:null,wheel:null,mousedrag:null,mousemove:null},J={mouseup:Y=>(K(Y),Y.buttons||(this._document.removeEventListener("mouseup",H.mouseup),H.mousedrag&&this._document.removeEventListener("mousemove",H.mousedrag)),this.cancel(Y)),wheel:Y=>(K(Y),this.cancel(Y,!0)),mousedrag:Y=>{Y.buttons&&K(Y)},mousemove:Y=>{Y.buttons||K(Y)}};this.register(this.coreMouseService.onProtocolChange(Y=>{Y?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Y)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Y?H.mousemove||(M.addEventListener("mousemove",J.mousemove),H.mousemove=J.mousemove):(M.removeEventListener("mousemove",H.mousemove),H.mousemove=null),16&Y?H.wheel||(M.addEventListener("wheel",J.wheel,{passive:!1}),H.wheel=J.wheel):(M.removeEventListener("wheel",H.wheel),H.wheel=null),2&Y?H.mouseup||(H.mouseup=J.mouseup):(this._document.removeEventListener("mouseup",H.mouseup),H.mouseup=null),4&Y?H.mousedrag||(H.mousedrag=J.mousedrag):(this._document.removeEventListener("mousemove",H.mousedrag),H.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(M,"mousedown",Y=>{if(Y.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Y))return K(Y),H.mouseup&&this._document.addEventListener("mouseup",H.mouseup),H.mousedrag&&this._document.addEventListener("mousemove",H.mousedrag),this.cancel(Y)})),this.register((0,b.addDisposableDomListener)(M,"wheel",Y=>{if(!H.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Y)===!1)return!1;if(!this.buffer.hasScrollback){const ne=this.viewport.getLinesScrolled(Y);if(ne===0)return;const ae=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Y.deltaY<0?"A":"B");let ie="";for(let fe=0;fe<Math.abs(ne);fe++)ie+=ae;return this.coreService.triggerDataEvent(ie,!0),this.cancel(Y,!0)}return this.viewport.handleWheel(Y)?this.cancel(Y):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(M,"touchstart",Y=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Y),this.cancel(Y)},{passive:!0})),this.register((0,b.addDisposableDomListener)(M,"touchmove",Y=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Y)?void 0:this.cancel(Y)},{passive:!1}))}refresh(z,M){var K;(K=this._renderService)==null||K.refreshRows(z,M)}updateCursorStyle(z){var M;(M=this._selectionService)!=null&&M.shouldColumnSelect(z)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(z,M,K=0){var H;K===1?(super.scrollLines(z,M,K),this.refresh(0,this.rows-1)):(H=this.viewport)==null||H.scrollLines(z)}paste(z){(0,u.paste)(z,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(z){this._customKeyEventHandler=z}attachCustomWheelEventHandler(z){this._customWheelEventHandler=z}registerLinkProvider(z){return this._linkProviderService.registerLinkProvider(z)}registerCharacterJoiner(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const M=this._characterJoinerService.register(z);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(z)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(z){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+z)}registerDecoration(z){return this._decorationService.registerDecoration(z)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(z,M,K){this._selectionService.setSelection(z,M,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var z;(z=this._selectionService)==null||z.clearSelection()}selectAll(){var z;(z=this._selectionService)==null||z.selectAll()}selectLines(z,M){var K;(K=this._selectionService)==null||K.selectLines(z,M)}_keyDown(z){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;const M=this.browser.isMac&&this.options.macOptionIsMeta&&z.altKey;if(!M&&!this._compositionHelper.keydown(z))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;M||z.key!=="Dead"&&z.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,U.evaluateKeyboardEvent)(z,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(z),K.type===3||K.type===2){const H=this.rows-1;return this.scrollLines(K.type===2?-H:H),this.cancel(z,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,z)||(K.cancel&&this.cancel(z,!0),!K.key||!!(z.key&&!z.ctrlKey&&!z.altKey&&!z.metaKey&&z.key.length===1&&z.key.charCodeAt(0)>=65&&z.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==Q.C0.ETX&&K.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||z.altKey||z.ctrlKey?this.cancel(z,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(z,M){const K=z.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||z.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||z.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?K:K&&(!M.keyCode||M.keyCode>47)}_keyUp(z){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(z)||this.focus(),this.updateCursorStyle(z),this._keyPressHandled=!1)}_keyPress(z){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;if(this.cancel(z),z.charCode)M=z.charCode;else if(z.which===null||z.which===void 0)M=z.keyCode;else{if(z.which===0||z.charCode===0)return!1;M=z.which}return!(!M||(z.altKey||z.ctrlKey||z.metaKey)&&!this._isThirdLevelShift(this.browser,z)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(z){if(z.data&&z.inputType==="insertText"&&(!z.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const M=z.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(z),!0}return!1}resize(z,M){z!==this.cols||M!==this.rows?super.resize(z,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(z,M){var K,H;(K=this._charSizeService)==null||K.measure(),(H=this.viewport)==null||H.syncScrollArea(!0)}clear(){var z;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let M=1;M<this.rows;M++)this.buffer.lines.push(this.buffer.getBlankLine(ee.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(z=this.viewport)==null||z.reset(),this.refresh(0,this.rows-1)}}reset(){var M,K;this.options.rows=this.rows,this.options.cols=this.cols;const z=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)==null||M.reset(),this._decorationService.reset(),(K=this.viewport)==null||K.reset(),this._customKeyEventHandler=z,this.refresh(0,this.rows-1)}clearTextureAtlas(){var z;(z=this._renderService)==null||z.clearTextureAtlas()}_reportFocus(){var z;(z=this.element)!=null&&z.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(z){if(this._renderService)switch(z){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const M=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${K};${M}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const H=this._renderService.dimensions.css.cell.width.toFixed(0),J=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${J};${H}t`)}}cancel(z,M){if(this.options.cancelEvents||M)return z.preventDefault(),z.stopPropagation(),!1}}i.Terminal=Z},9924:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,u=1e3){this._renderCallback=n,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,u,b){this._rowCount=b,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=d-this._lastRefreshMs,y=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u)}}},1680:function(f,i,n){var u=this&&this.__decorate||function(c,l,a,p){var C,x=arguments.length,L=x<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,l,a,p);else for(var k=c.length-1;k>=0;k--)(C=c[k])&&(L=(x<3?C(L):x>3?C(l,a,L):C(l,a))||L);return x>3&&L&&Object.defineProperty(l,a,L),L},b=this&&this.__param||function(c,l){return function(a,p){l(a,p,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const d=n(3656),m=n(4725),y=n(8460),w=n(844),v=n(2585);let s=i.Viewport=class extends w.Disposable{constructor(c,l,a,p,C,x,L,k){super(),this._viewportElement=c,this._scrollArea=l,this._bufferService=a,this._optionsService=p,this._charSizeService=C,this._renderService=x,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(k.colors),this.register(k.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,l){const a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&a<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const l=this._getPixelsScrolled(c);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(c,l))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let l=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(c,l){var k;let a,p="";const C=[],x=l??this._bufferService.buffer.lines.length,L=this._bufferService.buffer.lines;for(let E=c;E<x;E++){const B=L.get(E);if(!B)continue;const O=(k=L.get(E+1))==null?void 0:k.isWrapped;if(p+=B.translateToString(!O),!O||E===L.length-1){const P=document.createElement("div");P.textContent=p,C.push(P),p.length>0&&(a=P),p=""}}return{bufferElements:C,cursorElement:a}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let l=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(c,l){const a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&l.altKey||a==="ctrl"&&l.ctrlKey||a==="shift"&&l.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const l=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(c,l))}};i.Viewport=s=u([b(2,v.IBufferService),b(3,v.IOptionsService),b(4,m.ICharSizeService),b(5,m.IRenderService),b(6,m.ICoreBrowserService),b(7,m.IThemeService)],s)},3107:function(f,i,n){var u=this&&this.__decorate||function(v,s,c,l){var a,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,s,c,l);else for(var x=v.length-1;x>=0;x--)(a=v[x])&&(C=(p<3?a(C):p>3?a(s,c,C):a(s,c))||C);return p>3&&C&&Object.defineProperty(s,c,C),C},b=this&&this.__param||function(v,s){return function(c,l){s(c,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const d=n(4725),m=n(844),y=n(2585);let w=i.BufferDecorationRenderer=class extends m.Disposable{constructor(v,s,c,l,a){super(),this._screenElement=v,this._bufferService=s,this._coreBrowserService=c,this._decorationService=l,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var l;const s=this._coreBrowserService.mainDocument.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer",((l=v==null?void 0:v.options)==null?void 0:l.layer)==="top"),s.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",s.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const c=v.options.x??0;return c&&c>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(v,s),s}_refreshStyle(v){const s=v.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let c=this._decorationElements.get(v);c||(c=this._createElement(v),v.element=c,this._decorationElements.set(v,c),this._container.appendChild(c),v.onDispose(()=>{this._decorationElements.delete(v),c.remove()})),c.style.top=s*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(c)}}_refreshXPosition(v,s=v.element){if(!s)return;const c=v.options.x??0;(v.options.anchor||"left")==="right"?s.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var s;(s=this._decorationElements.get(v))==null||s.remove(),this._decorationElements.delete(v),v.dispose()}};i.BufferDecorationRenderer=w=u([b(1,y.IBufferService),b(2,d.ICoreBrowserService),b(3,y.IDecorationService),b(4,d.IRenderService)],w)},5871:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const u of this._zones)if(u.color===n.options.overviewRulerOptions.color&&u.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,n.marker.line))return;if(this._lineAdjacentToZone(u,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(u,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,u){return u>=n.startBufferLine&&u<=n.endBufferLine}_lineAdjacentToZone(n,u,b){return u>=n.startBufferLine-this._linePadding[b||"full"]&&u<=n.endBufferLine+this._linePadding[b||"full"]}_addLineToZone(n,u){n.startBufferLine=Math.min(n.startBufferLine,u),n.endBufferLine=Math.max(n.endBufferLine,u)}}},5744:function(f,i,n){var u=this&&this.__decorate||function(a,p,C,x){var L,k=arguments.length,E=k<3?p:x===null?x=Object.getOwnPropertyDescriptor(p,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,p,C,x);else for(var B=a.length-1;B>=0;B--)(L=a[B])&&(E=(k<3?L(E):k>3?L(p,C,E):L(p,C))||E);return k>3&&E&&Object.defineProperty(p,C,E),E},b=this&&this.__param||function(a,p){return function(C,x){p(C,x,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const d=n(5871),m=n(4725),y=n(844),w=n(2585),v={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let l=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(a,p,C,x,L,k,E){var O;super(),this._viewportElement=a,this._screenElement=p,this._bufferService=C,this._decorationService=x,this._renderService=L,this._optionsService=k,this._coreBrowserService=E,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)==null||O.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const a=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=a,s.center=p,s.right=a,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=s.left,c.right=s.left+s.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const a=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(a,12),6)*this._coreBrowserService.dpr);v.left=p,v.center=p,v.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const a=this._colorZoneStore.zones;for(const p of a)p.position!=="full"&&this._renderColorZone(p);for(const p of a)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(a){this._ctx.fillStyle=a.color,this._ctx.fillRect(c[a.position||"full"],Math.round((this._canvas.height-1)*(a.startBufferLine/this._bufferService.buffers.active.lines.length)-v[a.position||"full"]/2),s[a.position||"full"],Math.round((this._canvas.height-1)*((a.endBufferLine-a.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[a.position||"full"]))}_queueRefresh(a,p){this._shouldUpdateDimensions=a||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=l=u([b(2,w.IBufferService),b(3,w.IDecorationService),b(4,m.IRenderService),b(5,w.IOptionsService),b(6,m.ICoreBrowserService)],l)},2950:function(f,i,n){var u=this&&this.__decorate||function(v,s,c,l){var a,p=arguments.length,C=p<3?s:l===null?l=Object.getOwnPropertyDescriptor(s,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,s,c,l);else for(var x=v.length-1;x>=0;x--)(a=v[x])&&(C=(p<3?a(C):p>3?a(s,c,C):a(s,c))||C);return p>3&&C&&Object.defineProperty(s,c,C),C},b=this&&this.__param||function(v,s){return function(c,l){s(c,l,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const d=n(4725),m=n(2585),y=n(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,s,c,l,a,p){this._textarea=v,this._compositionView=s,this._bufferService=c,this._optionsService=l,this._coreService=a,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,c=s.replace(v,"");this._dataAlreadySent=c,s.length>v.length?this._coreService.triggerDataEvent(c,!0):s.length<v.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):s.length===v.length&&s!==v&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=u([b(2,m.IBufferService),b(3,m.IOptionsService),b(4,m.ICoreService),b(5,d.IRenderService)],w)},9806:(f,i)=>{function n(u,b,d){const m=d.getBoundingClientRect(),y=u.getComputedStyle(d),w=parseInt(y.getPropertyValue("padding-left")),v=parseInt(y.getPropertyValue("padding-top"));return[b.clientX-m.left-w,b.clientY-m.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(u,b,d,m,y,w,v,s,c){if(!w)return;const l=n(u,b,d);return l?(l[0]=Math.ceil((l[0]+(c?v/2:0))/v),l[1]=Math.ceil(l[1]/s),l[0]=Math.min(Math.max(l[0],1),m+(c?1:0)),l[1]=Math.min(Math.max(l[1],1),y),l):void 0}},9504:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=n(2584);function b(s,c,l,a){const p=s-d(s,l),C=c-d(c,l),x=Math.abs(p-C)-function(L,k,E){let B=0;const O=L-d(L,E),P=k-d(k,E);for(let A=0;A<Math.abs(O-P);A++){const j=m(L,k)==="A"?-1:1,X=E.buffer.lines.get(O+j*A);X!=null&&X.isWrapped&&B++}return B}(s,c,l);return v(x,w(m(s,c),a))}function d(s,c){let l=0,a=c.buffer.lines.get(s),p=a==null?void 0:a.isWrapped;for(;p&&s>=0&&s<c.rows;)l++,a=c.buffer.lines.get(--s),p=a==null?void 0:a.isWrapped;return l}function m(s,c){return s>c?"A":"B"}function y(s,c,l,a,p,C){let x=s,L=c,k="";for(;x!==l||L!==a;)x+=p?1:-1,p&&x>C.cols-1?(k+=C.buffer.translateBufferLineToString(L,!1,s,x),x=0,s=0,L++):!p&&x<0&&(k+=C.buffer.translateBufferLineToString(L,!1,0,s+1),x=C.cols-1,s=x,L--);return k+C.buffer.translateBufferLineToString(L,!1,s,x)}function w(s,c){const l=c?"O":"[";return u.C0.ESC+l+s}function v(s,c){s=Math.floor(s);let l="";for(let a=0;a<s;a++)l+=c;return l}i.moveToCellSequence=function(s,c,l,a){const p=l.buffer.x,C=l.buffer.y;if(!l.buffer.hasScrollback)return function(k,E,B,O,P,A){return b(E,O,P,A).length===0?"":v(y(k,E,k,E-d(E,P),!1,P).length,w("D",A))}(p,C,0,c,l,a)+b(C,c,l,a)+function(k,E,B,O,P,A){let j;j=b(E,O,P,A).length>0?O-d(O,P):E;const X=O,ee=function(Q,U,T,R,I,W){let N;return N=b(T,R,I,W).length>0?R-d(R,I):U,Q<T&&N<=R||Q>=T&&N<R?"C":"D"}(k,E,B,O,P,A);return v(y(k,j,B,X,ee==="C",P).length,w(ee,A))}(p,C,s,c,l,a);let x;if(C===c)return x=p>s?"D":"C",v(Math.abs(p-s),w(x,a));x=C>c?"D":"C";const L=Math.abs(C-c);return v(function(k,E){return E.cols-k}(C>c?s:p,l)+(L-1)*l.cols+1+((C>c?p:s)-1),w(x,a))}},1296:function(f,i,n){var u=this&&this.__decorate||function(A,j,X,ee){var Q,U=arguments.length,T=U<3?j:ee===null?ee=Object.getOwnPropertyDescriptor(j,X):ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(A,j,X,ee);else for(var R=A.length-1;R>=0;R--)(Q=A[R])&&(T=(U<3?Q(T):U>3?Q(j,X,T):Q(j,X))||T);return U>3&&T&&Object.defineProperty(j,X,T),T},b=this&&this.__param||function(A,j){return function(X,ee){j(X,ee,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const d=n(3787),m=n(2550),y=n(2223),w=n(6171),v=n(6052),s=n(4725),c=n(8055),l=n(8460),a=n(844),p=n(2585),C="xterm-dom-renderer-owner-",x="xterm-rows",L="xterm-fg-",k="xterm-bg-",E="xterm-focus",B="xterm-selection";let O=1,P=i.DomRenderer=class extends a.Disposable{constructor(A,j,X,ee,Q,U,T,R,I,W,N,G,Z){super(),this._terminal=A,this._document=j,this._element=X,this._screenElement=ee,this._viewportElement=Q,this._helperContainer=U,this._linkifier2=T,this._charSizeService=I,this._optionsService=W,this._bufferService=N,this._coreBrowserService=G,this._themeService=Z,this._terminalClass=O++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(se=>this._injectCss(se))),this._injectCss(this._themeService.colors),this._rowFactory=R.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(se=>this._handleLinkHover(se))),this.register(this._linkifier2.onHideLinkUnderline(se=>this._handleLinkLeave(se))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const X of this._rowElements)X.style.width=`${this.dimensions.css.canvas.width}px`,X.style.height=`${this.dimensions.css.cell.height}px`,X.style.lineHeight=`${this.dimensions.css.cell.height}px`,X.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${x} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${x} .xterm-dim { color: ${c.color.multiplyOpacity(A.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const X=`blink_underline_${this._terminalClass}`,ee=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;j+=`@keyframes ${X} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${ee} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${Q} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,j+=`${this._terminalSelector} .${x}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${x}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ee} 1s step-end infinite;}${this._terminalSelector} .${x}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[U,T]of A.ansi.entries())j+=`${this._terminalSelector} .${L}${U} { color: ${T.css}; }${this._terminalSelector} .${L}${U}.xterm-dim { color: ${c.color.multiplyOpacity(T,.5).css}; }${this._terminalSelector} .${k}${U} { background-color: ${T.css}; }`;j+=`${this._terminalSelector} .${L}${y.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(A.background).css}; }${this._terminalSelector} .${L}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${k}${y.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,j){for(let X=this._rowElements.length;X<=j;X++){const ee=this._document.createElement("div");this._rowContainer.appendChild(ee),this._rowElements.push(ee)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,j){this._refreshRowElements(A,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,j,X){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,j,X),this.renderRows(0,this._bufferService.rows-1),!A||!j)return;this._selectionRenderModel.update(this._terminal,A,j,X);const ee=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,U=this._selectionRenderModel.viewportCappedStartRow,T=this._selectionRenderModel.viewportCappedEndRow;if(U>=this._bufferService.rows||T<0)return;const R=this._document.createDocumentFragment();if(X){const I=A[0]>j[0];R.appendChild(this._createSelectionElement(U,I?j[0]:A[0],I?A[0]:j[0],T-U+1))}else{const I=ee===U?A[0]:0,W=U===Q?j[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(U,I,W));const N=T-U-1;if(R.appendChild(this._createSelectionElement(U+1,0,this._bufferService.cols,N)),U!==T){const G=Q===T?j[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(T,0,G))}}this._selectionContainer.appendChild(R)}_createSelectionElement(A,j,X,ee=1){const Q=this._document.createElement("div"),U=j*this.dimensions.css.cell.width;let T=this.dimensions.css.cell.width*(X-j);return U+T>this.dimensions.css.canvas.width&&(T=this.dimensions.css.canvas.width-U),Q.style.height=ee*this.dimensions.css.cell.height+"px",Q.style.top=A*this.dimensions.css.cell.height+"px",Q.style.left=`${U}px`,Q.style.width=`${T}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,j){const X=this._bufferService.buffer,ee=X.ybase+X.y,Q=Math.min(X.x,this._bufferService.cols-1),U=this._optionsService.rawOptions.cursorBlink,T=this._optionsService.rawOptions.cursorStyle,R=this._optionsService.rawOptions.cursorInactiveStyle;for(let I=A;I<=j;I++){const W=I+X.ydisp,N=this._rowElements[I],G=X.lines.get(W);if(!N||!G)break;N.replaceChildren(...this._rowFactory.createRow(G,W,W===ee,T,R,Q,U,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,j,X,ee,Q,U){X<0&&(A=0),ee<0&&(j=0);const T=this._bufferService.rows-1;X=Math.max(Math.min(X,T),0),ee=Math.max(Math.min(ee,T),0),Q=Math.min(Q,this._bufferService.cols);const R=this._bufferService.buffer,I=R.ybase+R.y,W=Math.min(R.x,Q-1),N=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,Z=this._optionsService.rawOptions.cursorInactiveStyle;for(let se=X;se<=ee;++se){const z=se+R.ydisp,M=this._rowElements[se],K=R.lines.get(z);if(!M||!K)break;M.replaceChildren(...this._rowFactory.createRow(K,z,z===I,G,Z,W,N,this.dimensions.css.cell.width,this._widthCache,U?se===X?A:0:-1,U?(se===ee?j:Q)-1:-1))}}};i.DomRenderer=P=u([b(7,p.IInstantiationService),b(8,s.ICharSizeService),b(9,p.IOptionsService),b(10,p.IBufferService),b(11,s.ICoreBrowserService),b(12,s.IThemeService)],P)},3787:function(f,i,n){var u=this&&this.__decorate||function(x,L,k,E){var B,O=arguments.length,P=O<3?L:E===null?E=Object.getOwnPropertyDescriptor(L,k):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,L,k,E);else for(var A=x.length-1;A>=0;A--)(B=x[A])&&(P=(O<3?B(P):O>3?B(L,k,P):B(L,k))||P);return O>3&&P&&Object.defineProperty(L,k,P),P},b=this&&this.__param||function(x,L){return function(k,E){L(k,E,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const d=n(2223),m=n(643),y=n(511),w=n(2585),v=n(8055),s=n(4725),c=n(4269),l=n(6171),a=n(3734);let p=i.DomRendererRowFactory=class{constructor(x,L,k,E,B,O,P){this._document=x,this._characterJoinerService=L,this._optionsService=k,this._coreBrowserService=E,this._coreService=B,this._decorationService=O,this._themeService=P,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,L,k){this._selectionStart=x,this._selectionEnd=L,this._columnSelectMode=k}createRow(x,L,k,E,B,O,P,A,j,X,ee){const Q=[],U=this._characterJoinerService.getJoinedCharacters(L),T=this._themeService.colors;let R,I=x.getNoBgTrimmedLength();k&&I<O+1&&(I=O+1);let W=0,N="",G=0,Z=0,se=0,z=!1,M=0,K=!1,H=0;const J=[],Y=X!==-1&&ee!==-1;for(let ne=0;ne<I;ne++){x.loadCell(ne,this._workCell);let ae=this._workCell.getWidth();if(ae===0)continue;let ie=!1,fe=ne,de=this._workCell;if(U.length>0&&ne===U[0][0]){ie=!0;const Me=U.shift();de=new c.JoinedCellData(this._workCell,x.translateToString(!0,Me[0],Me[1]),Me[1]-Me[0]),fe=Me[1]-1,ae=de.getWidth()}const Se=this._isCellInSelection(ne,L),Ce=k&&ne===O,ke=Y&&ne>=X&&ne<=ee;let ge=!1;this._decorationService.forEachDecorationAtCell(ne,L,void 0,Me=>{ge=!0});let ce=de.getChars()||m.WHITESPACE_CELL_CHAR;if(ce===" "&&(de.isUnderline()||de.isOverline())&&(ce=" "),H=ae*A-j.get(ce,de.isBold(),de.isItalic()),R){if(W&&(Se&&K||!Se&&!K&&de.bg===G)&&(Se&&K&&T.selectionForeground||de.fg===Z)&&de.extended.ext===se&&ke===z&&H===M&&!Ce&&!ie&&!ge){de.isInvisible()?N+=m.WHITESPACE_CELL_CHAR:N+=ce,W++;continue}W&&(R.textContent=N),R=this._document.createElement("span"),W=0,N=""}else R=this._document.createElement("span");if(G=de.bg,Z=de.fg,se=de.extended.ext,z=ke,M=H,K=Se,ie&&O>=ne&&O<=fe&&(O=ne),!this._coreService.isCursorHidden&&Ce&&this._coreService.isCursorInitialized){if(J.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&J.push("xterm-cursor-blink"),J.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":J.push("xterm-cursor-outline");break;case"block":J.push("xterm-cursor-block");break;case"bar":J.push("xterm-cursor-bar");break;case"underline":J.push("xterm-cursor-underline")}}if(de.isBold()&&J.push("xterm-bold"),de.isItalic()&&J.push("xterm-italic"),de.isDim()&&J.push("xterm-dim"),N=de.isInvisible()?m.WHITESPACE_CELL_CHAR:de.getChars()||m.WHITESPACE_CELL_CHAR,de.isUnderline()&&(J.push(`xterm-underline-${de.extended.underlineStyle}`),N===" "&&(N=" "),!de.isUnderlineColorDefault()))if(de.isUnderlineColorRGB())R.style.textDecorationColor=`rgb(${a.AttributeData.toColorRGB(de.getUnderlineColor()).join(",")})`;else{let Me=de.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&de.isBold()&&Me<8&&(Me+=8),R.style.textDecorationColor=T.ansi[Me].css}de.isOverline()&&(J.push("xterm-overline"),N===" "&&(N=" ")),de.isStrikethrough()&&J.push("xterm-strikethrough"),ke&&(R.style.textDecoration="underline");let te=de.getFgColor(),ye=de.getFgColorMode(),pe=de.getBgColor(),xe=de.getBgColorMode();const Qe=!!de.isInverse();if(Qe){const Me=te;te=pe,pe=Me;const Be=ye;ye=xe,xe=Be}let Ze,Ie,je,Ue=!1;switch(this._decorationService.forEachDecorationAtCell(ne,L,void 0,Me=>{Me.options.layer!=="top"&&Ue||(Me.backgroundColorRGB&&(xe=50331648,pe=Me.backgroundColorRGB.rgba>>8&16777215,Ze=Me.backgroundColorRGB),Me.foregroundColorRGB&&(ye=50331648,te=Me.foregroundColorRGB.rgba>>8&16777215,Ie=Me.foregroundColorRGB),Ue=Me.options.layer==="top")}),!Ue&&Se&&(Ze=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,pe=Ze.rgba>>8&16777215,xe=50331648,Ue=!0,T.selectionForeground&&(ye=50331648,te=T.selectionForeground.rgba>>8&16777215,Ie=T.selectionForeground)),Ue&&J.push("xterm-decoration-top"),xe){case 16777216:case 33554432:je=T.ansi[pe],J.push(`xterm-bg-${pe}`);break;case 50331648:je=v.channels.toColor(pe>>16,pe>>8&255,255&pe),this._addStyle(R,`background-color:#${C((pe>>>0).toString(16),"0",6)}`);break;default:Qe?(je=T.foreground,J.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):je=T.background}switch(Ze||de.isDim()&&(Ze=v.color.multiplyOpacity(je,.5)),ye){case 16777216:case 33554432:de.isBold()&&te<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(te+=8),this._applyMinimumContrast(R,je,T.ansi[te],de,Ze,void 0)||J.push(`xterm-fg-${te}`);break;case 50331648:const Me=v.channels.toColor(te>>16&255,te>>8&255,255&te);this._applyMinimumContrast(R,je,Me,de,Ze,Ie)||this._addStyle(R,`color:#${C(te.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(R,je,T.foreground,de,Ze,Ie)||Qe&&J.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}J.length&&(R.className=J.join(" "),J.length=0),Ce||ie||ge?R.textContent=N:W++,H!==this.defaultSpacing&&(R.style.letterSpacing=`${H}px`),Q.push(R),ne=fe}return R&&W&&(R.textContent=N),Q}_applyMinimumContrast(x,L,k,E,B,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(E.getCode()))return!1;const P=this._getContrastCache(E);let A;if(B||O||(A=P.getColor(L.rgba,k.rgba)),A===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);A=v.color.ensureContrastRatio(B||L,O||k,j),P.setColor((B||L).rgba,(O||k).rgba,A??null)}return!!A&&(this._addStyle(x,`color:${A.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,L){x.setAttribute("style",`${x.getAttribute("style")||""}${L};`)}_isCellInSelection(x,L){const k=this._selectionStart,E=this._selectionEnd;return!(!k||!E)&&(this._columnSelectMode?k[0]<=E[0]?x>=k[0]&&L>=k[1]&&x<E[0]&&L<=E[1]:x<k[0]&&L>=k[1]&&x>=E[0]&&L<=E[1]:L>k[1]&&L<E[1]||k[1]===E[1]&&L===k[1]&&x>=k[0]&&x<E[0]||k[1]<E[1]&&L===E[1]&&x<E[0]||k[1]<E[1]&&L===k[1]&&x>=k[0])}};function C(x,L,k){for(;x.length<k;)x=L+x;return x}i.DomRendererRowFactory=p=u([b(1,s.ICharacterJoinerService),b(2,w.IOptionsService),b(3,s.ICoreBrowserService),b(4,w.ICoreService),b(5,w.IDecorationService),b(6,s.IThemeService)],p)},2550:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const b=n.createElement("span");b.classList.add("xterm-char-measure-element");const d=n.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const m=n.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const y=n.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[b,d,m,y],this._container.appendChild(b),this._container.appendChild(d),this._container.appendChild(m),this._container.appendChild(y),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,u,b,d){n===this._font&&u===this._fontSize&&b===this._weight&&d===this._weightBold||(this._font=n,this._fontSize=u,this._weight=b,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${b}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${b}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(n,u,b){let d=0;if(!u&&!b&&n.length===1&&(d=n.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const w=this._measure(n,0);return w>0&&(this._flat[d]=w),w}let m=n;u&&(m+="B"),b&&(m+="I");let y=this._holey.get(m);if(y===void 0){let w=0;u&&(w|=1),b&&(w|=2),y=this._measure(n,w),y>0&&this._holey.set(m,y)}return y}_measure(n,u){const b=this._measureElements[u];return b.textContent=n.repeat(32),b.offsetWidth/32}}},2223:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(f,i)=>{function n(b){return 57508<=b&&b<=57558}function u(b){return b>=128512&&b<=128591||b>=127744&&b<=128511||b>=128640&&b<=128767||b>=9728&&b<=9983||b>=9984&&b<=10175||b>=65024&&b<=65039||b>=129280&&b<=129535||b>=127462&&b<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(b){if(!b)throw new Error("value must not be falsy");return b},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(b){return 57520<=b&&b<=57527},i.isEmoji=u,i.allowRescaling=function(b,d,m,y){return d===1&&m>Math.ceil(1.5*y)&&b!==void 0&&b>255&&!u(b)&&!n(b)&&!function(w){return 57344<=w&&w<=63743}(b)},i.treatGlyphAsBackgroundColor=function(b){return n(b)||function(d){return 9472<=d&&d<=9631}(b)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(b,d,m=0){return(b-(2*Math.round(d)-m))%(2*Math.round(d))}},6052:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(b,d,m,y=!1){if(this.selectionStart=d,this.selectionEnd=m,!d||!m||d[0]===m[0]&&d[1]===m[1])return void this.clear();const w=b.buffers.active.ydisp,v=d[1]-w,s=m[1]-w,c=Math.max(v,0),l=Math.min(s,b.rows-1);c>=b.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=v,this.viewportEndRow=s,this.viewportCappedStartRow=c,this.viewportCappedEndRow=l,this.startCol=d[0],this.endCol=m[0])}isCellSelected(b,d,m){return!!this.hasSelection&&(m-=b.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&m>=this.viewportCappedStartRow&&d<this.endCol&&m<=this.viewportCappedEndRow:d<this.startCol&&m>=this.viewportCappedStartRow&&d>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&d>=this.startCol)}}i.createSelectionRenderModel=function(){return new n}},456:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,u=this.selectionEnd;return!(!n||!u)&&(n[1]>u[1]||n[1]===u[1]&&n[0]>u[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(f,i,n){var u=this&&this.__decorate||function(l,a,p,C){var x,L=arguments.length,k=L<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,p,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(k=(L<3?x(k):L>3?x(a,p,k):x(a,p))||k);return L>3&&k&&Object.defineProperty(a,p,k),k},b=this&&this.__param||function(l,a){return function(p,C){a(p,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const d=n(2585),m=n(8460),y=n(844);let w=i.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,a,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new c(this._optionsService))}catch{this._measureStrategy=this.register(new s(l,a,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=u([b(2,d.IOptionsService)],w);class v extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(a,p){a!==void 0&&a>0&&p!==void 0&&p>0&&(this._result.width=a,this._result.height=p)}}class s extends v{constructor(a,p,C){super(),this._document=a,this._parentElement=p,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class c extends v{constructor(a){super(),this._optionsService=a,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const p=this._ctx.measureText("W");if(!("width"in p&&"fontBoundingBoxAscent"in p&&"fontBoundingBoxDescent"in p))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const a=this._ctx.measureText("W");return this._validateAndSet(a.width,a.fontBoundingBoxAscent+a.fontBoundingBoxDescent),this._result}}},4269:function(f,i,n){var u=this&&this.__decorate||function(c,l,a,p){var C,x=arguments.length,L=x<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,l,a,p);else for(var k=c.length-1;k>=0;k--)(C=c[k])&&(L=(x<3?C(L):x>3?C(l,a,L):C(l,a))||L);return x>3&&L&&Object.defineProperty(l,a,L),L},b=this&&this.__param||function(c,l){return function(a,p){l(a,p,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const d=n(3734),m=n(643),y=n(511),w=n(2585);class v extends d.AttributeData{constructor(l,a,p){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=a,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let s=i.CharacterJoinerService=class vs{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(l){const a={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(a),a.id}deregister(l){for(let a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===l)return this._characterJoiners.splice(a,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const a=this._bufferService.buffer.lines.get(l);if(!a||a.length===0)return[];const p=[],C=a.translateToString(!0);let x=0,L=0,k=0,E=a.getFg(0),B=a.getBg(0);for(let O=0;O<a.getTrimmedLength();O++)if(a.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==B){if(O-x>1){const P=this._getJoinedRanges(C,k,L,a,x);for(let A=0;A<P.length;A++)p.push(P[A])}x=O,k=L,E=this._workCell.fg,B=this._workCell.bg}L+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const O=this._getJoinedRanges(C,k,L,a,x);for(let P=0;P<O.length;P++)p.push(O[P])}return p}_getJoinedRanges(l,a,p,C,x){const L=l.substring(a,p);let k=[];try{k=this._characterJoiners[0].handler(L)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const B=this._characterJoiners[E].handler(L);for(let O=0;O<B.length;O++)vs._mergeRanges(k,B[O])}catch(B){console.error(B)}return this._stringRangesToCellRanges(k,C,x),k}_stringRangesToCellRanges(l,a,p){let C=0,x=!1,L=0,k=l[C];if(k){for(let E=p;E<this._bufferService.cols;E++){const B=a.getWidth(E),O=a.getString(E).length||m.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!x&&k[0]<=L&&(k[0]=E,x=!0),k[1]<=L){if(k[1]=E,k=l[++C],!k)break;k[0]<=L?(k[0]=E,x=!0):x=!1}L+=O}}k&&(k[1]=this._bufferService.cols)}}static _mergeRanges(l,a){let p=!1;for(let C=0;C<l.length;C++){const x=l[C];if(p){if(a[1]<=x[0])return l[C-1][1]=a[1],l;if(a[1]<=x[1])return l[C-1][1]=Math.max(a[1],x[1]),l.splice(C,1),l;l.splice(C,1),C--}else{if(a[1]<=x[0])return l.splice(C,0,a),l;if(a[1]<=x[1])return x[0]=Math.min(a[0],x[0]),l;a[0]<x[1]&&(x[0]=Math.min(a[0],x[0]),p=!0)}}return p?l[l.length-1][1]=a[1]:l.push(a),l}};i.CharacterJoinerService=s=u([b(0,w.IBufferService)],s)},5114:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const u=n(844),b=n(8460),d=n(3656);class m extends u.Disposable{constructor(v,s,c){super(),this._textarea=v,this._window=s,this.mainDocument=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new b.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,b.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=m;class y extends u.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const u=n(844);class b extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const y=this.linkProviders.indexOf(m);y!==-1&&this.linkProviders.splice(y,1)}}}}i.LinkProviderService=b},8934:function(f,i,n){var u=this&&this.__decorate||function(w,v,s,c){var l,a=arguments.length,p=a<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,s):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(w,v,s,c);else for(var C=w.length-1;C>=0;C--)(l=w[C])&&(p=(a<3?l(p):a>3?l(v,s,p):l(v,s))||p);return a>3&&p&&Object.defineProperty(v,s,p),p},b=this&&this.__param||function(w,v){return function(s,c){v(s,c,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const d=n(4725),m=n(9806);let y=i.MouseService=class{constructor(w,v){this._renderService=w,this._charSizeService=v}getCoords(w,v,s,c,l){return(0,m.getCoords)(window,w,v,s,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(w,v){const s=(0,m.getCoordsRelativeToElement)(window,w,v);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};i.MouseService=y=u([b(0,d.IRenderService),b(1,d.ICharSizeService)],y)},3230:function(f,i,n){var u=this&&this.__decorate||function(l,a,p,C){var x,L=arguments.length,k=L<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,p,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(k=(L<3?x(k):L>3?x(a,p,k):x(a,p))||k);return L>3&&k&&Object.defineProperty(a,p,k),k},b=this&&this.__param||function(l,a){return function(p,C){a(p,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const d=n(6193),m=n(4725),y=n(8460),w=n(844),v=n(7226),s=n(2585);let c=i.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,a,p,C,x,L,k,E){super(),this._rowCount=l,this._charSizeService=C,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((B,O)=>this._renderRows(B,O),k),this.register(this._renderDebouncer),this.register(k.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(L.onResize(()=>this._fullRefresh())),this.register(L.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)==null?void 0:B.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(L.buffer.y,L.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(k.window,a),this.register(k.onWindowChange(B=>this._registerIntersectionObserver(B,a)))}_registerIntersectionObserver(l,a){if("IntersectionObserver"in l){const p=new l.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});p.observe(a),this._observerDisposable.value=(0,w.toDisposable)(()=>p.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,a,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,a,this._rowCount))}_renderRows(l,a){this._renderer.value&&(l=Math.min(l,this._rowCount-1),a=Math.min(a,this._rowCount-1),this._renderer.value.renderRows(l,a),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:a}),this._onRender.fire({start:l,end:a}),this._isNextRenderRedrawOnly=!0)}resize(l,a){this._rowCount=a,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(a=>this.refreshRows(a.start,a.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var l,a;this._renderer.value&&((a=(l=this._renderer.value).clearTextureAtlas)==null||a.call(l),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,a){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var p;return(p=this._renderer.value)==null?void 0:p.handleResize(l,a)}):this._renderer.value.handleResize(l,a),this._fullRefresh())}handleCharSizeChanged(){var l;(l=this._renderer.value)==null||l.handleCharSizeChanged()}handleBlur(){var l;(l=this._renderer.value)==null||l.handleBlur()}handleFocus(){var l;(l=this._renderer.value)==null||l.handleFocus()}handleSelectionChanged(l,a,p){var C;this._selectionState.start=l,this._selectionState.end=a,this._selectionState.columnSelectMode=p,(C=this._renderer.value)==null||C.handleSelectionChanged(l,a,p)}handleCursorMove(){var l;(l=this._renderer.value)==null||l.handleCursorMove()}clear(){var l;(l=this._renderer.value)==null||l.clear()}};i.RenderService=c=u([b(2,s.IOptionsService),b(3,m.ICharSizeService),b(4,s.IDecorationService),b(5,s.IBufferService),b(6,m.ICoreBrowserService),b(7,m.IThemeService)],c)},9312:function(f,i,n){var u=this&&this.__decorate||function(k,E,B,O){var P,A=arguments.length,j=A<3?E:O===null?O=Object.getOwnPropertyDescriptor(E,B):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(k,E,B,O);else for(var X=k.length-1;X>=0;X--)(P=k[X])&&(j=(A<3?P(j):A>3?P(E,B,j):P(E,B))||j);return A>3&&j&&Object.defineProperty(E,B,j),j},b=this&&this.__param||function(k,E){return function(B,O){E(B,O,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const d=n(9806),m=n(9504),y=n(456),w=n(4725),v=n(8460),s=n(844),c=n(6114),l=n(4841),a=n(511),p=n(2585),C=" ",x=new RegExp(C,"g");let L=i.SelectionService=class extends s.Disposable{constructor(k,E,B,O,P,A,j,X,ee){super(),this._element=k,this._screenElement=E,this._linkifier=B,this._bufferService=O,this._coreService=P,this._mouseService=A,this._optionsService=j,this._renderService=X,this._coreBrowserService=ee,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new a.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Q=>this._handleTrim(Q)),this.register(this._bufferService.buffers.onBufferActivate(Q=>this._handleBufferActivate(Q))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const k=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!k||!E||k[0]===E[0]&&k[1]===E[1])}get selectionText(){const k=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!k||!E)return"";const B=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(k[0]===E[0])return"";const P=k[0]<E[0]?k[0]:E[0],A=k[0]<E[0]?E[0]:k[0];for(let j=k[1];j<=E[1];j++){const X=B.translateBufferLineToString(j,!0,P,A);O.push(X)}}else{const P=k[1]===E[1]?E[0]:void 0;O.push(B.translateBufferLineToString(k[1],!0,k[0],P));for(let A=k[1]+1;A<=E[1]-1;A++){const j=B.lines.get(A),X=B.translateBufferLineToString(A,!0);j!=null&&j.isWrapped?O[O.length-1]+=X:O.push(X)}if(k[1]!==E[1]){const A=B.lines.get(E[1]),j=B.translateBufferLineToString(E[1],!0,0,E[0]);A&&A.isWrapped?O[O.length-1]+=j:O.push(j)}}return O.map(P=>P.replace(x," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(k){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&k&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(k){const E=this._getMouseBufferCoords(k),B=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(B&&O&&E)&&this._areCoordsInSelection(E,B,O)}isCellInSelection(k,E){const B=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!B||!O)&&this._areCoordsInSelection([k,E],B,O)}_areCoordsInSelection(k,E,B){return k[1]>E[1]&&k[1]<B[1]||E[1]===B[1]&&k[1]===E[1]&&k[0]>=E[0]&&k[0]<B[0]||E[1]<B[1]&&k[1]===B[1]&&k[0]<B[0]||E[1]<B[1]&&k[1]===E[1]&&k[0]>=E[0]}_selectWordAtCursor(k,E){var P,A;const B=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(k);return!!O&&(this._selectWordAt(O,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(k,E){this._model.clearSelection(),k=Math.max(k,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,k],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(k){this._model.handleTrim(k)&&this.refresh()}_getMouseBufferCoords(k){const E=this._mouseService.getCoords(k,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(k){let E=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,k,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=B?0:(E>B&&(E-=B),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(k){return c.isMac?k.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:k.shiftKey}handleMouseDown(k){if(this._mouseDownTimeStamp=k.timeStamp,(k.button!==2||!this.hasSelection)&&k.button===0){if(!this._enabled){if(!this.shouldForceSelection(k))return;k.stopPropagation()}k.preventDefault(),this._dragScrollAmount=0,this._enabled&&k.shiftKey?this._handleIncrementalClick(k):k.detail===1?this._handleSingleClick(k):k.detail===2?this._handleDoubleClick(k):k.detail===3&&this._handleTripleClick(k),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(k){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(k))}_handleSingleClick(k){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(k)?3:0,this._model.selectionStart=this._getMouseBufferCoords(k),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(k){this._selectWordAtCursor(k,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(k){const E=this._getMouseBufferCoords(k);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(k){return k.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(k){if(k.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(k),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(k),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const O=B.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const k=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(k.ydisp+this._bufferService.rows,k.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=k.ydisp),this.refresh()}}_handleMouseUp(k){const E=k.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&k.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(k,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const O=(0,m.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const k=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,B=!(!k||!E||k[0]===E[0]&&k[1]===E[1]);B?k&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&k[0]===this._oldSelectionStart[0]&&k[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(k,E,B)):this._oldHasSelection&&this._fireOnSelectionChange(k,E,B)}_fireOnSelectionChange(k,E,B){this._oldSelectionStart=k,this._oldSelectionEnd=E,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(k){this.clearSelection(),this._trimListener.dispose(),this._trimListener=k.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(k,E){let B=E;for(let O=0;E>=O;O++){const P=k.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:P>1&&E!==O&&(B+=P-1)}return B}setSelection(k,E,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[k,E],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(k){this._isClickInSelection(k)||(this._selectWordAtCursor(k,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(k,E,B=!0,O=!0){if(k[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(k[1]);if(!A)return;const j=P.translateBufferLineToString(k[1],!1);let X=this._convertViewportColToCharacterIndex(A,k[0]),ee=X;const Q=k[0]-X;let U=0,T=0,R=0,I=0;if(j.charAt(X)===" "){for(;X>0&&j.charAt(X-1)===" ";)X--;for(;ee<j.length&&j.charAt(ee+1)===" ";)ee++}else{let G=k[0],Z=k[0];A.getWidth(G)===0&&(U++,G--),A.getWidth(Z)===2&&(T++,Z++);const se=A.getString(Z).length;for(se>1&&(I+=se-1,ee+=se-1);G>0&&X>0&&!this._isCharWordSeparator(A.loadCell(G-1,this._workCell));){A.loadCell(G-1,this._workCell);const z=this._workCell.getChars().length;this._workCell.getWidth()===0?(U++,G--):z>1&&(R+=z-1,X-=z-1),X--,G--}for(;Z<A.length&&ee+1<j.length&&!this._isCharWordSeparator(A.loadCell(Z+1,this._workCell));){A.loadCell(Z+1,this._workCell);const z=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,Z++):z>1&&(I+=z-1,ee+=z-1),ee++,Z++}}ee++;let W=X+Q-U+R,N=Math.min(this._bufferService.cols,ee-X+U+T-R-I);if(E||j.slice(X,ee).trim()!==""){if(B&&W===0&&A.getCodePoint(0)!==32){const G=P.lines.get(k[1]-1);if(G&&A.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){const Z=this._getWordAt([this._bufferService.cols-1,k[1]-1],!1,!0,!1);if(Z){const se=this._bufferService.cols-Z.start;W-=se,N+=se}}}if(O&&W+N===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const G=P.lines.get(k[1]+1);if(G!=null&&G.isWrapped&&G.getCodePoint(0)!==32){const Z=this._getWordAt([0,k[1]+1],!1,!1,!0);Z&&(N+=Z.length)}}return{start:W,length:N}}}_selectWordAt(k,E){const B=this._getWordAt(k,E);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,k[1]--;this._model.selectionStart=[B.start,k[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(k){const E=this._getWordAt(k,!0);if(E){let B=k[1];for(;E.start<0;)E.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,B]}}_isCharWordSeparator(k){return k.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(k.getChars())>=0}_selectLineAt(k){const E=this._bufferService.buffer.getWrappedRangeForLine(k),B={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(B,this._bufferService.cols)}};i.SelectionService=L=u([b(3,p.IBufferService),b(4,p.ICoreService),b(5,w.IMouseService),b(6,p.IOptionsService),b(7,w.IRenderService),b(8,w.ICoreBrowserService)],L)},4725:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=n(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService"),i.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(f,i,n){var u=this&&this.__decorate||function(L,k,E,B){var O,P=arguments.length,A=P<3?k:B===null?B=Object.getOwnPropertyDescriptor(k,E):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,k,E,B);else for(var j=L.length-1;j>=0;j--)(O=L[j])&&(A=(P<3?O(A):P>3?O(k,E,A):O(k,E))||A);return P>3&&A&&Object.defineProperty(k,E,A),A},b=this&&this.__param||function(L,k){return function(E,B){k(E,B,L)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const d=n(7239),m=n(8055),y=n(8460),w=n(844),v=n(2585),s=m.css.toColor("#ffffff"),c=m.css.toColor("#000000"),l=m.css.toColor("#ffffff"),a=m.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],k=[0,95,135,175,215,255];for(let E=0;E<216;E++){const B=k[E/36%6|0],O=k[E/6%6|0],P=k[E%6];L.push({css:m.channels.toCss(B,O,P),rgba:m.channels.toRgba(B,O,P)})}for(let E=0;E<24;E++){const B=8+10*E;L.push({css:m.channels.toCss(B,B,B),rgba:m.channels.toRgba(B,B,B)})}return L})());let C=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:c,cursor:l,cursorAccent:a,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:m.color.blend(c,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:m.color.blend(c,p),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const k=this._colors;if(k.foreground=x(L.foreground,s),k.background=x(L.background,c),k.cursor=x(L.cursor,l),k.cursorAccent=x(L.cursorAccent,a),k.selectionBackgroundTransparent=x(L.selectionBackground,p),k.selectionBackgroundOpaque=m.color.blend(k.background,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundTransparent=x(L.selectionInactiveBackground,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundOpaque=m.color.blend(k.background,k.selectionInactiveBackgroundTransparent),k.selectionForeground=L.selectionForeground?x(L.selectionForeground,m.NULL_COLOR):void 0,k.selectionForeground===m.NULL_COLOR&&(k.selectionForeground=void 0),m.color.isOpaque(k.selectionBackgroundTransparent)&&(k.selectionBackgroundTransparent=m.color.opacity(k.selectionBackgroundTransparent,.3)),m.color.isOpaque(k.selectionInactiveBackgroundTransparent)&&(k.selectionInactiveBackgroundTransparent=m.color.opacity(k.selectionInactiveBackgroundTransparent,.3)),k.ansi=i.DEFAULT_ANSI_COLORS.slice(),k.ansi[0]=x(L.black,i.DEFAULT_ANSI_COLORS[0]),k.ansi[1]=x(L.red,i.DEFAULT_ANSI_COLORS[1]),k.ansi[2]=x(L.green,i.DEFAULT_ANSI_COLORS[2]),k.ansi[3]=x(L.yellow,i.DEFAULT_ANSI_COLORS[3]),k.ansi[4]=x(L.blue,i.DEFAULT_ANSI_COLORS[4]),k.ansi[5]=x(L.magenta,i.DEFAULT_ANSI_COLORS[5]),k.ansi[6]=x(L.cyan,i.DEFAULT_ANSI_COLORS[6]),k.ansi[7]=x(L.white,i.DEFAULT_ANSI_COLORS[7]),k.ansi[8]=x(L.brightBlack,i.DEFAULT_ANSI_COLORS[8]),k.ansi[9]=x(L.brightRed,i.DEFAULT_ANSI_COLORS[9]),k.ansi[10]=x(L.brightGreen,i.DEFAULT_ANSI_COLORS[10]),k.ansi[11]=x(L.brightYellow,i.DEFAULT_ANSI_COLORS[11]),k.ansi[12]=x(L.brightBlue,i.DEFAULT_ANSI_COLORS[12]),k.ansi[13]=x(L.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),k.ansi[14]=x(L.brightCyan,i.DEFAULT_ANSI_COLORS[14]),k.ansi[15]=x(L.brightWhite,i.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const E=Math.min(k.ansi.length-16,L.extendedAnsi.length);for(let B=0;B<E;B++)k.ansi[B+16]=x(L.extendedAnsi[B],i.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let k=0;k<this._restoreColors.ansi.length;++k)this._colors.ansi[k]=this._restoreColors.ansi[k]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(L,k){if(L!==void 0)try{return m.css.toColor(L)}catch{}return k}i.ThemeService=C=u([b(0,v.IOptionsService)],C)},6349:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=n(8460),b=n(844);class d extends b.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const w=new Array(y);for(let v=0;v<Math.min(y,this.length);v++)w[v]=this._array[this._getCyclicIndex(v)];this._array=w,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let w=this._length;w<y;w++)this._array[w]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,w){this._array[this._getCyclicIndex(y)]=w}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,w,...v){if(w){for(let s=y;s<this._length-w;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+w)];this._length-=w,this.onDeleteEmitter.fire({index:y,amount:w})}for(let s=this._length-1;s>=y;s--)this._array[this._getCyclicIndex(s+v.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<v.length;s++)this._array[this._getCyclicIndex(y+s)]=v[s];if(v.length&&this.onInsertEmitter.fire({index:y,amount:v.length}),this._length+v.length>this._maxLength){const s=this._length+v.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=v.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,w,v){if(!(w<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let c=w-1;c>=0;c--)this.set(y+c+v,this.get(y+c));const s=y+w+v-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<w;s++)this.set(y+s+v,this.get(y+s))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}i.CircularList=d},1439:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(u,b=5){if(typeof u!="object")return u;const d=Array.isArray(u)?[]:{};for(const m in u)d[m]=b<=1?u[m]:u[m]&&n(u[m],b-1);return d}},8055:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let n=0,u=0,b=0,d=0;var m,y,w,v,s;function c(a){const p=a.toString(16);return p.length<2?"0"+p:p}function l(a,p){return a<p?(p+.05)/(a+.05):(a+.05)/(p+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(a){a.toCss=function(p,C,x,L){return L!==void 0?`#${c(p)}${c(C)}${c(x)}${c(L)}`:`#${c(p)}${c(C)}${c(x)}`},a.toRgba=function(p,C,x,L=255){return(p<<24|C<<16|x<<8|L)>>>0},a.toColor=function(p,C,x,L){return{css:a.toCss(p,C,x,L),rgba:a.toRgba(p,C,x,L)}}}(m||(i.channels=m={})),function(a){function p(C,x){return d=Math.round(255*x),[n,u,b]=s.toChannels(C.rgba),{css:m.toCss(n,u,b,d),rgba:m.toRgba(n,u,b,d)}}a.blend=function(C,x){if(d=(255&x.rgba)/255,d===1)return{css:x.css,rgba:x.rgba};const L=x.rgba>>24&255,k=x.rgba>>16&255,E=x.rgba>>8&255,B=C.rgba>>24&255,O=C.rgba>>16&255,P=C.rgba>>8&255;return n=B+Math.round((L-B)*d),u=O+Math.round((k-O)*d),b=P+Math.round((E-P)*d),{css:m.toCss(n,u,b),rgba:m.toRgba(n,u,b)}},a.isOpaque=function(C){return(255&C.rgba)==255},a.ensureContrastRatio=function(C,x,L){const k=s.ensureContrastRatio(C.rgba,x.rgba,L);if(k)return m.toColor(k>>24&255,k>>16&255,k>>8&255)},a.opaque=function(C){const x=(255|C.rgba)>>>0;return[n,u,b]=s.toChannels(x),{css:m.toCss(n,u,b),rgba:x}},a.opacity=p,a.multiplyOpacity=function(C,x){return d=255&C.rgba,p(C,d*x/255)},a.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(y||(i.color=y={})),function(a){let p,C;try{const x=document.createElement("canvas");x.width=1,x.height=1;const L=x.getContext("2d",{willReadFrequently:!0});L&&(p=L,p.globalCompositeOperation="copy",C=p.createLinearGradient(0,0,1,1))}catch{}a.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return n=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),b=parseInt(x.slice(3,4).repeat(2),16),m.toColor(n,u,b);case 5:return n=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),b=parseInt(x.slice(3,4).repeat(2),16),d=parseInt(x.slice(4,5).repeat(2),16),m.toColor(n,u,b,d);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const L=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return n=parseInt(L[1]),u=parseInt(L[2]),b=parseInt(L[3]),d=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),m.toColor(n,u,b,d);if(!p||!C)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=C,p.fillStyle=x,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[n,u,b,d]=p.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(n,u,b,d),css:x}}}(w||(i.css=w={})),function(a){function p(C,x,L){const k=C/255,E=x/255,B=L/255;return .2126*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}a.relativeLuminance=function(C){return p(C>>16&255,C>>8&255,255&C)},a.relativeLuminance2=p}(v||(i.rgb=v={})),function(a){function p(x,L,k){const E=x>>24&255,B=x>>16&255,O=x>>8&255;let P=L>>24&255,A=L>>16&255,j=L>>8&255,X=l(v.relativeLuminance2(P,A,j),v.relativeLuminance2(E,B,O));for(;X<k&&(P>0||A>0||j>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),j-=Math.max(0,Math.ceil(.1*j)),X=l(v.relativeLuminance2(P,A,j),v.relativeLuminance2(E,B,O));return(P<<24|A<<16|j<<8|255)>>>0}function C(x,L,k){const E=x>>24&255,B=x>>16&255,O=x>>8&255;let P=L>>24&255,A=L>>16&255,j=L>>8&255,X=l(v.relativeLuminance2(P,A,j),v.relativeLuminance2(E,B,O));for(;X<k&&(P<255||A<255||j<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),j=Math.min(255,j+Math.ceil(.1*(255-j))),X=l(v.relativeLuminance2(P,A,j),v.relativeLuminance2(E,B,O));return(P<<24|A<<16|j<<8|255)>>>0}a.blend=function(x,L){if(d=(255&L)/255,d===1)return L;const k=L>>24&255,E=L>>16&255,B=L>>8&255,O=x>>24&255,P=x>>16&255,A=x>>8&255;return n=O+Math.round((k-O)*d),u=P+Math.round((E-P)*d),b=A+Math.round((B-A)*d),m.toRgba(n,u,b)},a.ensureContrastRatio=function(x,L,k){const E=v.relativeLuminance(x>>8),B=v.relativeLuminance(L>>8);if(l(E,B)<k){if(B<E){const A=p(x,L,k),j=l(E,v.relativeLuminance(A>>8));if(j<k){const X=C(x,L,k);return j>l(E,v.relativeLuminance(X>>8))?A:X}return A}const O=C(x,L,k),P=l(E,v.relativeLuminance(O>>8));if(P<k){const A=p(x,L,k);return P>l(E,v.relativeLuminance(A>>8))?O:A}return O}},a.reduceLuminance=p,a.increaseLuminance=C,a.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}}(s||(i.rgba=s={})),i.toPaddedHex=c,i.contrastRatio=l},8969:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=n(844),b=n(2585),d=n(4348),m=n(7866),y=n(744),w=n(7302),v=n(6975),s=n(8460),c=n(1753),l=n(1480),a=n(7994),p=n(9282),C=n(5435),x=n(5981),L=n(2660);let k=!1;class E extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(O=>{var P;(P=this._onScrollApi)==null||P.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const P in O)this.optionsService.options[P]=O[P]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new w.OptionsService(O)),this._instantiationService.setService(b.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(b.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(b.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(b.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(b.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(b.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(a.CharsetService),this._instantiationService.setService(b.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(b.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,P){this._writeBuffer.write(O,P)}writeSync(O,P){this._logService.logLevel<=b.LogLevelEnum.WARN&&!k&&(this._logService.warn("writeSync is unreliable and will be removed soon."),k=!0),this._writeBuffer.writeSync(O,P)}input(O,P=!0){this.coreService.triggerDataEvent(O,P)}resize(O,P){isNaN(O)||isNaN(P)||(O=Math.max(O,y.MINIMUM_COLS),P=Math.max(P,y.MINIMUM_ROWS),this._bufferService.resize(O,P))}scroll(O,P=!1){this._bufferService.scroll(O,P)}scrollLines(O,P,A){this._bufferService.scrollLines(O,P,A)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const P=O-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(O,P){return this._inputHandler.registerEscHandler(O,P)}registerDcsHandler(O,P){return this._inputHandler.registerDcsHandler(O,P)}registerCsiHandler(O,P){return this._inputHandler.registerCsiHandler(O,P)}registerOscHandler(O,P){return this._inputHandler.registerOscHandler(O,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?O=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const P of O)P.dispose()})}}}i.CoreTerminal=E},8460:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){const b=[];for(let d=0;d<this._listeners.length;d++)b.push(this._listeners[d]);for(let d=0;d<b.length;d++)b[d].call(void 0,n,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,u){return n(b=>u.fire(b))},i.runAndSubscribe=function(n,u){return u(void 0),n(b=>u(b))}},5435:function(f,i,n){var u=this&&this.__decorate||function(U,T,R,I){var W,N=arguments.length,G=N<3?T:I===null?I=Object.getOwnPropertyDescriptor(T,R):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(U,T,R,I);else for(var Z=U.length-1;Z>=0;Z--)(W=U[Z])&&(G=(N<3?W(G):N>3?W(T,R,G):W(T,R))||G);return N>3&&G&&Object.defineProperty(T,R,G),G},b=this&&this.__param||function(U,T){return function(R,I){T(R,I,U)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const d=n(2584),m=n(7116),y=n(2015),w=n(844),v=n(482),s=n(8437),c=n(8460),l=n(643),a=n(511),p=n(3734),C=n(2585),x=n(1480),L=n(6242),k=n(6351),E=n(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function P(U,T){if(U>24)return T.setWinLines||!1;switch(U){case 1:return!!T.restoreWin;case 2:return!!T.minimizeWin;case 3:return!!T.setWinPosition;case 4:return!!T.setWinSizePixels;case 5:return!!T.raiseWin;case 6:return!!T.lowerWin;case 7:return!!T.refreshWin;case 8:return!!T.setWinSizeChars;case 9:return!!T.maximizeWin;case 10:return!!T.fullscreenWin;case 11:return!!T.getWinState;case 13:return!!T.getWinPosition;case 14:return!!T.getWinSizePixels;case 15:return!!T.getScreenSizePixels;case 16:return!!T.getCellSizePixels;case 18:return!!T.getWinSizeChars;case 19:return!!T.getScreenSizeChars;case 20:return!!T.getIconTitle;case 21:return!!T.getWinTitle;case 22:return!!T.pushTitle;case 23:return!!T.popTitle;case 24:return!!T.setWinLines}return!1}var A;(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let j=0;class X extends w.Disposable{getAttrData(){return this._curAttrData}constructor(T,R,I,W,N,G,Z,se,z=new y.EscapeSequenceParser){super(),this._bufferService=T,this._charsetService=R,this._coreService=I,this._logService=W,this._optionsService=N,this._oscLinkService=G,this._coreMouseService=Z,this._unicodeService=se,this._parser=z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new a.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ee(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,K)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:K.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,K,H)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:K,data:H})}),this._parser.setDcsHandlerFallback((M,K,H)=>{K==="HOOK"&&(H=H.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:K,payload:H})}),this._parser.setPrintHandler((M,K,H)=>this.print(M,K,H)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new L.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new L.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new L.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new L.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new L.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new L.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new L.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new L.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new L.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new L.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new L.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new L.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((M,K)=>this.requestStatusString(M,K)))}_preserveStack(T,R,I,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=T,this._parseStack.cursorStartY=R,this._parseStack.decodedLength=I,this._parseStack.position=W}_logSlowResolvingAsync(T){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([T,new Promise((R,I)=>setTimeout(()=>I("#SLOW_TIMEOUT"),5e3))]).catch(R=>{if(R!=="#SLOW_TIMEOUT")throw R;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(T,R){let I,W=this._activeBuffer.x,N=this._activeBuffer.y,G=0;const Z=this._parseStack.paused;if(Z){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,R))return this._logSlowResolvingAsync(I),I;W=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,T.length>O&&(G=this._parseStack.position+O)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof T=="string"?` "${T}"`:` "${Array.prototype.map.call(T,M=>String.fromCharCode(M)).join("")}"`),typeof T=="string"?T.split("").map(M=>M.charCodeAt(0)):T),this._parseBuffer.length<T.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(T.length,O))),Z||this._dirtyRowTracker.clearRange(),T.length>O)for(let M=G;M<T.length;M+=O){const K=M+O<T.length?M+O:T.length,H=typeof T=="string"?this._stringDecoder.decode(T.substring(M,K),this._parseBuffer):this._utf8Decoder.decode(T.subarray(M,K),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,H))return this._preserveStack(W,N,H,M),this._logSlowResolvingAsync(I),I}else if(!Z){const M=typeof T=="string"?this._stringDecoder.decode(T,this._parseBuffer):this._utf8Decoder.decode(T,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,M))return this._preserveStack(W,N,M,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===W&&this._activeBuffer.y===N||this._onCursorMove.fire();const se=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),z=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);z<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(z,this._bufferService.rows-1),Math.min(se,this._bufferService.rows-1))}print(T,R,I){let W,N;const G=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,se=this._bufferService.cols,z=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,K=this._curAttrData;let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-R>0&&H.getWidth(this._activeBuffer.x-1)===2&&H.setCellFromCodepoint(this._activeBuffer.x-1,0,1,K);let J=this._parser.precedingJoinState;for(let Y=R;Y<I;++Y){if(W=T[Y],W<127&&G){const fe=G[String.fromCharCode(W)];fe&&(W=fe.charCodeAt(0))}const ne=this._unicodeService.charProperties(W,J);N=x.UnicodeService.extractWidth(ne);const ae=x.UnicodeService.extractShouldJoin(ne),ie=ae?x.UnicodeService.extractWidth(J):0;if(J=ne,Z&&this._onA11yChar.fire((0,v.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+N-ie>se){if(z){const fe=H;let de=this._activeBuffer.x-ie;for(this._activeBuffer.x=ie,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ie>0&&H instanceof s.BufferLine&&H.copyCellsFrom(fe,de,0,ie,!1);de<se;)fe.setCellFromCodepoint(de++,0,1,K)}else if(this._activeBuffer.x=se-1,N===2)continue}if(ae&&this._activeBuffer.x){const fe=H.getWidth(this._activeBuffer.x-1)?1:2;H.addCodepointToCell(this._activeBuffer.x-fe,W,N);for(let de=N-ie;--de>=0;)H.setCellFromCodepoint(this._activeBuffer.x++,0,0,K)}else if(M&&(H.insertCells(this._activeBuffer.x,N-ie,this._activeBuffer.getNullCell(K)),H.getWidth(se-1)===2&&H.setCellFromCodepoint(se-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,K)),H.setCellFromCodepoint(this._activeBuffer.x++,W,N,K),N>0)for(;--N;)H.setCellFromCodepoint(this._activeBuffer.x++,0,0,K)}this._parser.precedingJoinState=J,this._activeBuffer.x<se&&I-R>0&&H.getWidth(this._activeBuffer.x)===0&&!H.hasContent(this._activeBuffer.x)&&H.setCellFromCodepoint(this._activeBuffer.x,0,1,K),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(T,R){return T.final!=="t"||T.prefix||T.intermediates?this._parser.registerCsiHandler(T,R):this._parser.registerCsiHandler(T,I=>!P(I.params[0],this._optionsService.rawOptions.windowOptions)||R(I))}registerDcsHandler(T,R){return this._parser.registerDcsHandler(T,new k.DcsHandler(R))}registerEscHandler(T,R){return this._parser.registerEscHandler(T,R)}registerOscHandler(T,R){return this._parser.registerOscHandler(T,new L.OscHandler(R))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var T;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&T.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);R.hasWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const T=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-T),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(T=this._bufferService.cols-1){this._activeBuffer.x=Math.min(T,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(T,R){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=T,this._activeBuffer.y=this._activeBuffer.scrollTop+R):(this._activeBuffer.x=T,this._activeBuffer.y=R),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(T,R){this._restrictCursor(),this._setCursor(this._activeBuffer.x+T,this._activeBuffer.y+R)}cursorUp(T){const R=this._activeBuffer.y-this._activeBuffer.scrollTop;return R>=0?this._moveCursor(0,-Math.min(R,T.params[0]||1)):this._moveCursor(0,-(T.params[0]||1)),!0}cursorDown(T){const R=this._activeBuffer.scrollBottom-this._activeBuffer.y;return R>=0?this._moveCursor(0,Math.min(R,T.params[0]||1)):this._moveCursor(0,T.params[0]||1),!0}cursorForward(T){return this._moveCursor(T.params[0]||1,0),!0}cursorBackward(T){return this._moveCursor(-(T.params[0]||1),0),!0}cursorNextLine(T){return this.cursorDown(T),this._activeBuffer.x=0,!0}cursorPrecedingLine(T){return this.cursorUp(T),this._activeBuffer.x=0,!0}cursorCharAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(T){return this._setCursor(T.length>=2?(T.params[1]||1)-1:0,(T.params[0]||1)-1),!0}charPosAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(T){return this._moveCursor(T.params[0]||1,0),!0}linePosAbsolute(T){return this._setCursor(this._activeBuffer.x,(T.params[0]||1)-1),!0}vPositionRelative(T){return this._moveCursor(0,T.params[0]||1),!0}hVPosition(T){return this.cursorPosition(T),!0}tabClear(T){const R=T.params[0];return R===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:R===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=T.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=T.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(T){const R=T.params[0];return R===1&&(this._curAttrData.bg|=536870912),R!==2&&R!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(T,R,I,W=!1,N=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);G.replaceCells(R,I,this._activeBuffer.getNullCell(this._eraseAttrData()),N),W&&(G.isWrapped=!1)}_resetBufferLine(T,R=!1){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);I&&(I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),R),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+T),I.isWrapped=!1)}eraseInDisplay(T,R=!1){let I;switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);I<this._bufferService.rows;I++)this._resetBufferLine(I,R);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,R),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,R);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,R);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(T,R=!1){switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,R);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,R)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(T){this._restrictCursor();let R=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;R--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(T){this._restrictCursor();let R=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;R--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(T){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.insertCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(T){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.deleteCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(T){let R=T.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(T){let R=T.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=T.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);W.deleteCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=T.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);W.insertCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=T.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);W.insertCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=T.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);W.deleteCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(T){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(T.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(T){const R=this._parser.precedingJoinState;if(!R)return!0;const I=T.params[0]||1,W=x.UnicodeService.extractWidth(R),N=this._activeBuffer.x-W,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(N),Z=new Uint32Array(G.length*I);let se=0;for(let M=0;M<G.length;){const K=G.codePointAt(M)||0;Z[se++]=K,M+=K>65535?2:1}let z=se;for(let M=1;M<I;++M)Z.copyWithin(z,0,se),z+=se;return this.print(Z,0,z),!0}sendDeviceAttributesPrimary(T){return T.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(T){return T.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(T.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(T){return(this._optionsService.rawOptions.termName+"").indexOf(T)===0}setMode(T){for(let R=0;R<T.length;R++)switch(T.params[R]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(T){for(let R=0;R<T.length;R++)switch(T.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(T){for(let R=0;R<T.length;R++)switch(T.params[R]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(T){for(let R=0;R<T.length;R++)switch(T.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),T.params[R]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(T,R){const I=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:N}=this._coreMouseService,G=this._coreService,{buffers:Z,cols:se}=this._bufferService,{active:z,alt:M}=Z,K=this._optionsService.rawOptions,H=ae=>ae?1:2,J=T.params[0];return Y=J,ne=R?J===2?4:J===4?H(G.modes.insertMode):J===12?3:J===20?H(K.convertEol):0:J===1?H(I.applicationCursorKeys):J===3?K.windowOptions.setWinLines?se===80?2:se===132?1:0:0:J===6?H(I.origin):J===7?H(I.wraparound):J===8?3:J===9?H(W==="X10"):J===12?H(K.cursorBlink):J===25?H(!G.isCursorHidden):J===45?H(I.reverseWraparound):J===66?H(I.applicationKeypad):J===67?4:J===1e3?H(W==="VT200"):J===1002?H(W==="DRAG"):J===1003?H(W==="ANY"):J===1004?H(I.sendFocus):J===1005?4:J===1006?H(N==="SGR"):J===1015?4:J===1016?H(N==="SGR_PIXELS"):J===1048?1:J===47||J===1047||J===1049?H(z===M):J===2004?H(I.bracketedPasteMode):0,G.triggerDataEvent(`${d.C0.ESC}[${R?"":"?"}${Y};${ne}$y`),!0;var Y,ne}_updateAttrColor(T,R,I,W,N){return R===2?(T|=50331648,T&=-16777216,T|=p.AttributeData.fromColorRGB([I,W,N])):R===5&&(T&=-50331904,T|=33554432|255&I),T}_extractColor(T,R,I){const W=[0,0,-1,0,0,0];let N=0,G=0;do{if(W[G+N]=T.params[R+G],T.hasSubParams(R+G)){const Z=T.getSubParams(R+G);let se=0;do W[1]===5&&(N=1),W[G+se+1+N]=Z[se];while(++se<Z.length&&se+G+1+N<W.length);break}if(W[1]===5&&G+N>=2||W[1]===2&&G+N>=5)break;W[1]&&(N=1)}while(++G+R<T.length&&G+N<W.length);for(let Z=2;Z<W.length;++Z)W[Z]===-1&&(W[Z]=0);switch(W[0]){case 38:I.fg=this._updateAttrColor(I.fg,W[1],W[3],W[4],W[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,W[1],W[3],W[4],W[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,W[1],W[3],W[4],W[5])}return G}_processUnderline(T,R){R.extended=R.extended.clone(),(!~T||T>5)&&(T=1),R.extended.underlineStyle=T,R.fg|=268435456,T===0&&(R.fg&=-268435457),R.updateExtended()}_processSGR0(T){T.fg=s.DEFAULT_ATTR_DATA.fg,T.bg=s.DEFAULT_ATTR_DATA.bg,T.extended=T.extended.clone(),T.extended.underlineStyle=0,T.extended.underlineColor&=-67108864,T.updateExtended()}charAttributes(T){if(T.length===1&&T.params[0]===0)return this._processSGR0(this._curAttrData),!0;const R=T.length;let I;const W=this._curAttrData;for(let N=0;N<R;N++)I=T.params[N],I>=30&&I<=37?(W.fg&=-50331904,W.fg|=16777216|I-30):I>=40&&I<=47?(W.bg&=-50331904,W.bg|=16777216|I-40):I>=90&&I<=97?(W.fg&=-50331904,W.fg|=16777224|I-90):I>=100&&I<=107?(W.bg&=-50331904,W.bg|=16777224|I-100):I===0?this._processSGR0(W):I===1?W.fg|=134217728:I===3?W.bg|=67108864:I===4?(W.fg|=268435456,this._processUnderline(T.hasSubParams(N)?T.getSubParams(N)[0]:1,W)):I===5?W.fg|=536870912:I===7?W.fg|=67108864:I===8?W.fg|=1073741824:I===9?W.fg|=2147483648:I===2?W.bg|=134217728:I===21?this._processUnderline(2,W):I===22?(W.fg&=-134217729,W.bg&=-134217729):I===23?W.bg&=-67108865:I===24?(W.fg&=-268435457,this._processUnderline(0,W)):I===25?W.fg&=-536870913:I===27?W.fg&=-67108865:I===28?W.fg&=-1073741825:I===29?W.fg&=2147483647:I===39?(W.fg&=-67108864,W.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):I===49?(W.bg&=-67108864,W.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?N+=this._extractColor(T,N,W):I===53?W.bg|=1073741824:I===55?W.bg&=-1073741825:I===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):I===100?(W.fg&=-67108864,W.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(T){switch(T.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const R=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${R};${I}R`)}return!0}deviceStatusPrivate(T){if(T.params[0]===6){const R=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${R};${I}R`)}return!0}softReset(T){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(T){const R=T.params[0]||1;switch(R){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const I=R%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(T){const R=T.params[0]||1;let I;return(T.length<2||(I=T.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(T){if(!P(T.params[0],this._optionsService.rawOptions.windowOptions))return!0;const R=T.length>1?T.params[1]:0;switch(T.params[0]){case 14:R!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:R!==0&&R!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),R!==0&&R!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:R!==0&&R!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),R!==0&&R!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(T){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(T){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(T){return this._windowTitle=T,this._onTitleChange.fire(T),!0}setIconName(T){return this._iconName=T,!0}setOrReportIndexedColor(T){const R=[],I=T.split(";");for(;I.length>1;){const W=I.shift(),N=I.shift();if(/^\d+$/.exec(W)){const G=parseInt(W);if(Q(G))if(N==="?")R.push({type:0,index:G});else{const Z=(0,E.parseColor)(N);Z&&R.push({type:1,index:G,color:Z})}}}return R.length&&this._onColor.fire(R),!0}setHyperlink(T){const R=T.split(";");return!(R.length<2)&&(R[1]?this._createHyperlink(R[0],R[1]):!R[0]&&this._finishHyperlink())}_createHyperlink(T,R){this._getCurrentLinkId()&&this._finishHyperlink();const I=T.split(":");let W;const N=I.findIndex(G=>G.startsWith("id="));return N!==-1&&(W=I[N].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:R}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(T,R){const I=T.split(";");for(let W=0;W<I.length&&!(R>=this._specialColors.length);++W,++R)if(I[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[R]}]);else{const N=(0,E.parseColor)(I[W]);N&&this._onColor.fire([{type:1,index:this._specialColors[R],color:N}])}return!0}setOrReportFgColor(T){return this._setOrReportSpecialColor(T,0)}setOrReportBgColor(T){return this._setOrReportSpecialColor(T,1)}setOrReportCursorColor(T){return this._setOrReportSpecialColor(T,2)}restoreIndexedColor(T){if(!T)return this._onColor.fire([{type:2}]),!0;const R=[],I=T.split(";");for(let W=0;W<I.length;++W)if(/^\d+$/.exec(I[W])){const N=parseInt(I[W]);Q(N)&&R.push({type:2,index:N})}return R.length&&this._onColor.fire(R),!0}restoreFgColor(T){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(T){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(T){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(T){return T.length!==2?(this.selectDefaultCharset(),!0):(T[0]==="/"||this._charsetService.setgCharset(B[T[0]],m.CHARSETS[T[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const T=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,T,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(T){return this._charsetService.setgLevel(T),!0}screenAlignmentPattern(){const T=new a.CellData;T.content=4194373,T.fg=this._curAttrData.fg,T.bg=this._curAttrData.bg,this._setCursor(0,0);for(let R=0;R<this._bufferService.rows;++R){const I=this._activeBuffer.ybase+this._activeBuffer.y+R,W=this._activeBuffer.lines.get(I);W&&(W.fill(T),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(T,R){const I=this._bufferService.buffer,W=this._optionsService.rawOptions;return(N=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${N}${d.C0.ESC}\\`),!0))(T==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:T==='"p'?'P1$r61;1"p':T==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:T==="m"?"P1$r0m":T===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(T,R){this._dirtyRowTracker.markRangeDirty(T,R)}}i.InputHandler=X;let ee=class{constructor(U){this._bufferService=U,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(U){U<this.start?this.start=U:U>this.end&&(this.end=U)}markRangeDirty(U,T){U>T&&(j=U,U=T,T=j),U<this.start&&(this.start=U),T>this.end&&(this.end=T)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(U){return 0<=U&&U<256}ee=u([b(0,C.IBufferService)],ee)},844:(f,i)=>{function n(u){for(const b of u)b.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const b=this._disposables.indexOf(u);b!==-1&&this._disposables.splice(b,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var b;this._isDisposed||u===this._value||((b=this._value)==null||b.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=n,i.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},1505:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(b,d,m){this._data[b]||(this._data[b]={}),this._data[b][d]=m}get(b,d){return this._data[b]?this._data[b][d]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(u,b,d,m,y){this._data.get(u,b)||this._data.set(u,b,new n),this._data.get(u,b).set(d,m,y)}get(u,b,d,m){var y;return(y=this._data.get(u,b))==null?void 0:y.get(d,m)}clear(){this._data.clear()}}},6114:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const n=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const b=n.match(/Version\/(\d+)/);return b===null||b.length<2?0:parseInt(b[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(n=this._search(this._getKey(u)),this._array.splice(n,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const b=this._getKey(u);if(b===void 0||(n=this._search(b),n===-1)||this._getKey(this._array[n])!==b)return!1;do if(this._array[n]===u)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===b);return!1}*getKeyIterator(u){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===u)}forEachByKey(u,b){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do b(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===u)}values(){return[...this._array].values()}_search(u){let b=0,d=this._array.length-1;for(;d>=b;){let m=b+d>>1;const y=this._getKey(this._array[m]);if(y>u)d=m-1;else{if(!(y<u)){for(;m>0&&this._getKey(this._array[m-1])===u;)m--;return m}b=m+1}}return b}}},7226:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=n(6114);class b{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let w=0,v=0,s=y.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),v=Math.max(w,v),c=y.timeRemaining(),1.5*v>c)return s-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-w))}ms`),void this._start();s=c}this.clear()}}class d extends b{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const w=Date.now()+y;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=d,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends b{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:d,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=n(643);i.updateWindowsModeWrappedState=function(b){const d=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),m=d==null?void 0:d.get(b.cols-1),y=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);y&&m&&(y.isWrapped=m[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&m[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new n;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=n;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,m=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=m}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=n(6349),b=n(7226),d=n(3734),m=n(8437),y=n(4634),w=n(511),v=n(643),s=n(4863),c=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(l,a,p){this._hasScrollback=l,this._optionsService=a,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new b.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,a){return new m.BufferLine(this._bufferService.cols,this.getNullCell(l),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const a=l+this._optionsService.rawOptions.scrollback;return a>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:a}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=m.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,a){const p=this.getNullCell(m.DEFAULT_ATTR_DATA);let C=0;const x=this._getCorrectBufferLength(a);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<l)for(let k=0;k<this.lines.length;k++)C+=+this.lines.get(k).resize(l,p);let L=0;if(this._rows<a)for(let k=this._rows;k<a;k++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(l,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(l,p)));else for(let k=this._rows;k>a;k--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const k=this.lines.length-x;k>0&&(this.lines.trimStart(k),this.ybase=Math.max(this.ybase-k,0),this.ydisp=Math.max(this.ydisp-k,0),this.savedY=Math.max(this.savedY-k,0)),this.lines.maxLength=x}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,a-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(l,a),this._cols>l))for(let L=0;L<this.lines.length;L++)C+=+this.lines.get(L).resize(l,p);this._cols=l,this._rows=a,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,a){this._cols!==l&&(l>this._cols?this._reflowLarger(l,a):this._reflowSmaller(l,a))}_reflowLarger(l,a){const p=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(p.length>0){const C=(0,y.reflowLargerCreateNewLayout)(this.lines,p);(0,y.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(l,a,C.countRemoved)}}_reflowLargerAdjustViewport(l,a,p){const C=this.getNullCell(m.DEFAULT_ATTR_DATA);let x=p;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new m.BufferLine(l,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(l,a){const p=this.getNullCell(m.DEFAULT_ATTR_DATA),C=[];let x=0;for(let L=this.lines.length-1;L>=0;L--){let k=this.lines.get(L);if(!k||!k.isWrapped&&k.getTrimmedLength()<=l)continue;const E=[k];for(;k.isWrapped&&L>0;)k=this.lines.get(--L),E.unshift(k);const B=this.ybase+this.y;if(B>=L&&B<L+E.length)continue;const O=E[E.length-1].getTrimmedLength(),P=(0,y.reflowSmallerGetNewLineLengths)(E,this._cols,l),A=P.length-E.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const X=[];for(let I=0;I<A;I++){const W=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);X.push(W)}X.length>0&&(C.push({start:L+E.length+x,newLines:X}),x+=X.length),E.push(...X);let ee=P.length-1,Q=P[ee];Q===0&&(ee--,Q=P[ee]);let U=E.length-A-1,T=O;for(;U>=0;){const I=Math.min(T,Q);if(E[ee]===void 0)break;if(E[ee].copyCellsFrom(E[U],T-I,Q-I,I,!0),Q-=I,Q===0&&(ee--,Q=P[ee]),T-=I,T===0){U--;const W=Math.max(U,0);T=(0,y.getWrappedLineTrimmedLength)(E,W,this._cols)}}for(let I=0;I<E.length;I++)P[I]<l&&E[I].setCell(P[I],p);let R=A-j;for(;R-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+a-1)}if(C.length>0){const L=[],k=[];for(let ee=0;ee<this.lines.length;ee++)k.push(this.lines.get(ee));const E=this.lines.length;let B=E-1,O=0,P=C[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let A=0;for(let ee=Math.min(this.lines.maxLength-1,E+x-1);ee>=0;ee--)if(P&&P.start>B+A){for(let Q=P.newLines.length-1;Q>=0;Q--)this.lines.set(ee--,P.newLines[Q]);ee++,L.push({index:B+1,amount:P.newLines.length}),A+=P.newLines.length,P=C[++O]}else this.lines.set(ee,k[B--]);let j=0;for(let ee=L.length-1;ee>=0;ee--)L[ee].index+=j,this.lines.onInsertEmitter.fire(L[ee]),j+=L[ee].amount;const X=Math.max(0,E+x-this.lines.maxLength);X>0&&this.lines.onTrimEmitter.fire(X)}}translateBufferLineToString(l,a,p=0,C){const x=this.lines.get(l);return x?x.translateToString(a,p,C):""}getWrappedRangeForLine(l){let a=l,p=l;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:a,last:p}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===l&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const a=new s.Marker(l);return this.markers.push(a),a.register(this.lines.onTrim(p=>{a.line-=p,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(p=>{a.line>=p.index&&(a.line+=p.amount)})),a.register(this.lines.onDelete(p=>{a.line>=p.index&&a.line<p.index+p.amount&&a.dispose(),a.line>p.index&&(a.line-=p.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=n(3734),b=n(511),d=n(643),m=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let y=0;class w{constructor(s,c,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const a=c||b.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let p=0;p<s;++p)this.setCell(p,a);this.length=s}get(s){const c=this._data[3*s+0],l=2097151&c;return[this._data[3*s+1],2097152&c?this._combined[s]:l?(0,m.stringFromCodePoint)(l):"",c>>22,2097152&c?this._combined[s].charCodeAt(this._combined[s].length-1):l]}set(s,c){this._data[3*s+1]=c[d.CHAR_DATA_ATTR_INDEX],c[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=c[1],this._data[3*s+0]=2097152|s|c[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=c[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const c=this._data[3*s+0];return 2097152&c?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&c}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const c=this._data[3*s+0];return 2097152&c?this._combined[s]:2097151&c?(0,m.stringFromCodePoint)(2097151&c):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,c){return y=3*s,c.content=this._data[y+0],c.fg=this._data[y+1],c.bg=this._data[y+2],2097152&c.content&&(c.combinedData=this._combined[s]),268435456&c.bg&&(c.extended=this._extendedAttrs[s]),c}setCell(s,c){2097152&c.content&&(this._combined[s]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[s]=c.extended),this._data[3*s+0]=c.content,this._data[3*s+1]=c.fg,this._data[3*s+2]=c.bg}setCellFromCodepoint(s,c,l,a){268435456&a.bg&&(this._extendedAttrs[s]=a.extended),this._data[3*s+0]=c|l<<22,this._data[3*s+1]=a.fg,this._data[3*s+2]=a.bg}addCodepointToCell(s,c,l){let a=this._data[3*s+0];2097152&a?this._combined[s]+=(0,m.stringFromCodePoint)(c):2097151&a?(this._combined[s]=(0,m.stringFromCodePoint)(2097151&a)+(0,m.stringFromCodePoint)(c),a&=-2097152,a|=2097152):a=c|4194304,l&&(a&=-12582913,a|=l<<22),this._data[3*s+0]=a}insertCells(s,c,l){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,l),c<this.length-s){const a=new b.CellData;for(let p=this.length-s-c-1;p>=0;--p)this.setCell(s+c+p,this.loadCell(s+p,a));for(let p=0;p<c;++p)this.setCell(s+p,l)}else for(let a=s;a<this.length;++a)this.setCell(a,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(s,c,l){if(s%=this.length,c<this.length-s){const a=new b.CellData;for(let p=0;p<this.length-s-c;++p)this.setCell(s+p,this.loadCell(s+c+p,a));for(let p=this.length-c;p<this.length;++p)this.setCell(p,l)}else for(let a=s;a<this.length;++a)this.setCell(a,l);s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,l),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodepoint(s,0,1,l)}replaceCells(s,c,l,a=!1){if(a)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodepoint(s-1,0,1,l),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodepoint(c,0,1,l);s<c&&s<this.length;)this.isProtected(s)||this.setCell(s,l),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,l),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c,0,1,l);s<c&&s<this.length;)this.setCell(s++,l)}resize(s,c){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const a=new Uint32Array(l);a.set(this._data),this._data=a}for(let a=this.length;a<s;++a)this.setCell(a,c)}else{this._data=this._data.subarray(0,l);const a=Object.keys(this._combined);for(let C=0;C<a.length;C++){const x=parseInt(a[C],10);x>=s&&delete this._combined[x]}const p=Object.keys(this._extendedAttrs);for(let C=0;C<p.length;C++){const x=parseInt(p[C],10);x>=s&&delete this._extendedAttrs[x]}}return this.length=s,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,c=!1){if(c)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,s);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const c in s._combined)this._combined[c]=s._combined[c];this._extendedAttrs={};for(const c in s._extendedAttrs)this._extendedAttrs[c]=s._extendedAttrs[c];this.isWrapped=s.isWrapped}clone(){const s=new w(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const c in this._combined)s._combined[c]=this._combined[c];for(const c in this._extendedAttrs)s._extendedAttrs[c]=this._extendedAttrs[c];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,c,l,a,p){const C=s._data;if(p)for(let L=a-1;L>=0;L--){for(let k=0;k<3;k++)this._data[3*(l+L)+k]=C[3*(c+L)+k];268435456&C[3*(c+L)+2]&&(this._extendedAttrs[l+L]=s._extendedAttrs[c+L])}else for(let L=0;L<a;L++){for(let k=0;k<3;k++)this._data[3*(l+L)+k]=C[3*(c+L)+k];268435456&C[3*(c+L)+2]&&(this._extendedAttrs[l+L]=s._extendedAttrs[c+L])}const x=Object.keys(s._combined);for(let L=0;L<x.length;L++){const k=parseInt(x[L],10);k>=c&&(this._combined[k-c+l]=s._combined[k])}}translateToString(s,c,l,a){c=c??0,l=l??this.length,s&&(l=Math.min(l,this.getTrimmedLength())),a&&(a.length=0);let p="";for(;c<l;){const C=this._data[3*c+0],x=2097151&C,L=2097152&C?this._combined[c]:x?(0,m.stringFromCodePoint)(x):d.WHITESPACE_CELL_CHAR;if(p+=L,a)for(let k=0;k<L.length;++k)a.push(c);c+=C>>22||1}return a&&a.push(c),p}}i.BufferLine=w},4841:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,u){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return u*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(f,i)=>{function n(u,b,d){if(b===u.length-1)return u[b].getTrimmedLength();const m=!u[b].hasContent(d-1)&&u[b].getWidth(d-1)===1,y=u[b+1].getWidth(0)===2;return m&&y?d-1:d}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,b,d,m,y){const w=[];for(let v=0;v<u.length-1;v++){let s=v,c=u.get(++s);if(!c.isWrapped)continue;const l=[u.get(v)];for(;s<u.length&&c.isWrapped;)l.push(c),c=u.get(++s);if(m>=v&&m<s){v+=l.length-1;continue}let a=0,p=n(l,a,b),C=1,x=0;for(;C<l.length;){const k=n(l,C,b),E=k-x,B=d-p,O=Math.min(E,B);l[a].copyCellsFrom(l[C],x,p,O,!1),p+=O,p===d&&(a++,p=0),x+=O,x===k&&(C++,x=0),p===0&&a!==0&&l[a-1].getWidth(d-1)===2&&(l[a].copyCellsFrom(l[a-1],d-1,p++,1,!1),l[a-1].setCell(d-1,y))}l[a].replaceCells(p,d,y);let L=0;for(let k=l.length-1;k>0&&(k>a||l[k].getTrimmedLength()===0);k--)L++;L>0&&(w.push(v+l.length-L),w.push(L)),v+=l.length-1}return w},i.reflowLargerCreateNewLayout=function(u,b){const d=[];let m=0,y=b[m],w=0;for(let v=0;v<u.length;v++)if(y===v){const s=b[++m];u.onDeleteEmitter.fire({index:v-w,amount:s}),v+=s-1,w+=s,y=b[++m]}else d.push(v);return{layout:d,countRemoved:w}},i.reflowLargerApplyNewLayout=function(u,b){const d=[];for(let m=0;m<b.length;m++)d.push(u.get(b[m]));for(let m=0;m<d.length;m++)u.set(m,d[m]);u.length=b.length},i.reflowSmallerGetNewLineLengths=function(u,b,d){const m=[],y=u.map((c,l)=>n(u,l,b)).reduce((c,l)=>c+l);let w=0,v=0,s=0;for(;s<y;){if(y-s<d){m.push(y-s);break}w+=d;const c=n(u,v,b);w>c&&(w-=c,v++);const l=u[v].getWidth(w-1)===2;l&&w--;const a=l?d-1:d;m.push(a),s+=a}return m},i.getWrappedLineTrimmedLength=n},5295:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=n(8460),b=n(844),d=n(9092);class m extends b.Disposable{constructor(w,v){super(),this._optionsService=w,this._bufferService=v,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,v){this._normal.resize(w,v),this._alt.resize(w,v),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=m},511:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=n(482),b=n(643),d=n(3734);class m extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const v=new m;return v.setFromCharData(w),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[b.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(w[b.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(w[b.CHAR_DATA_CHAR_INDEX].length===2){const s=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const c=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(s-55296)+c-56320+65536|w[b.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[b.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=w[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[b.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=m},643:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=n(8460),b=n(844);class d{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,b.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}i.Marker=d,d._nextId=1},7116:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(f,i)=>{var n,u,b;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(n||(i.C0=n={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(u||(i.C1=u={})),function(d){d.ST=`${n.ESC}\\`}(b||(i.C1_ESCAPED=b={}))},7399:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=n(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(d,m,y,w){const v={type:0,cancel:!1,key:void 0},s=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?v.key=m?u.C0.ESC+"OA":u.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?v.key=m?u.C0.ESC+"OD":u.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?v.key=m?u.C0.ESC+"OC":u.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(v.key=m?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:v.key=d.ctrlKey?"\b":u.C0.DEL,d.altKey&&(v.key=u.C0.ESC+v.key);break;case 9:if(d.shiftKey){v.key=u.C0.ESC+"[Z";break}v.key=u.C0.HT,v.cancel=!0;break;case 13:v.key=d.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,v.cancel=!0;break;case 27:v.key=u.C0.ESC,d.altKey&&(v.key=u.C0.ESC+u.C0.ESC),v.cancel=!0;break;case 37:if(d.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"D",v.key===u.C0.ESC+"[1;3D"&&(v.key=u.C0.ESC+(y?"b":"[1;5D"))):v.key=m?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(d.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"C",v.key===u.C0.ESC+"[1;3C"&&(v.key=u.C0.ESC+(y?"f":"[1;5C"))):v.key=m?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(d.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"A",y||v.key!==u.C0.ESC+"[1;3A"||(v.key=u.C0.ESC+"[1;5A")):v.key=m?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(d.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"B",y||v.key!==u.C0.ESC+"[1;3B"||(v.key=u.C0.ESC+"[1;5B")):v.key=m?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(v.key=u.C0.ESC+"[2~");break;case 46:v.key=s?u.C0.ESC+"[3;"+(s+1)+"~":u.C0.ESC+"[3~";break;case 36:v.key=s?u.C0.ESC+"[1;"+(s+1)+"H":m?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:v.key=s?u.C0.ESC+"[1;"+(s+1)+"F":m?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:d.shiftKey?v.type=2:d.ctrlKey?v.key=u.C0.ESC+"[5;"+(s+1)+"~":v.key=u.C0.ESC+"[5~";break;case 34:d.shiftKey?v.type=3:d.ctrlKey?v.key=u.C0.ESC+"[6;"+(s+1)+"~":v.key=u.C0.ESC+"[6~";break;case 112:v.key=s?u.C0.ESC+"[1;"+(s+1)+"P":u.C0.ESC+"OP";break;case 113:v.key=s?u.C0.ESC+"[1;"+(s+1)+"Q":u.C0.ESC+"OQ";break;case 114:v.key=s?u.C0.ESC+"[1;"+(s+1)+"R":u.C0.ESC+"OR";break;case 115:v.key=s?u.C0.ESC+"[1;"+(s+1)+"S":u.C0.ESC+"OS";break;case 116:v.key=s?u.C0.ESC+"[15;"+(s+1)+"~":u.C0.ESC+"[15~";break;case 117:v.key=s?u.C0.ESC+"[17;"+(s+1)+"~":u.C0.ESC+"[17~";break;case 118:v.key=s?u.C0.ESC+"[18;"+(s+1)+"~":u.C0.ESC+"[18~";break;case 119:v.key=s?u.C0.ESC+"[19;"+(s+1)+"~":u.C0.ESC+"[19~";break;case 120:v.key=s?u.C0.ESC+"[20;"+(s+1)+"~":u.C0.ESC+"[20~";break;case 121:v.key=s?u.C0.ESC+"[21;"+(s+1)+"~":u.C0.ESC+"[21~";break;case 122:v.key=s?u.C0.ESC+"[23;"+(s+1)+"~":u.C0.ESC+"[23~";break;case 123:v.key=s?u.C0.ESC+"[24;"+(s+1)+"~":u.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(y&&!w||!d.altKey||d.metaKey)!y||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?v.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(v.key=u.C0.US),d.key==="@"&&(v.key=u.C0.NUL)):d.keyCode===65&&(v.type=1);else{const c=b[d.keyCode],l=c==null?void 0:c[d.shiftKey?1:0];if(l)v.key=u.C0.ESC+l;else if(d.keyCode>=65&&d.keyCode<=90){const a=d.ctrlKey?d.keyCode-64:d.keyCode+32;let p=String.fromCharCode(a);d.shiftKey&&(p=p.toUpperCase()),v.key=u.C0.ESC+p}else if(d.keyCode===32)v.key=u.C0.ESC+(d.ctrlKey?u.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let a=d.code.slice(3,4);d.shiftKey||(a=a.toLowerCase()),v.key=u.C0.ESC+a,v.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?v.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?v.key=u.C0.NUL:d.keyCode>=51&&d.keyCode<=55?v.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?v.key=u.C0.DEL:d.keyCode===219?v.key=u.C0.ESC:d.keyCode===220?v.key=u.C0.FS:d.keyCode===221&&(v.key=u.C0.GS)}return v}},482:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,u=0,b=n.length){let d="";for(let m=u;m<b;++m){let y=n[m];y>65535?(y-=65536,d+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):d+=String.fromCharCode(y)}return d},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){const b=n.length;if(!b)return 0;let d=0,m=0;if(this._interim){const y=n.charCodeAt(m++);56320<=y&&y<=57343?u[d++]=1024*(this._interim-55296)+y-56320+65536:(u[d++]=this._interim,u[d++]=y),this._interim=0}for(let y=m;y<b;++y){const w=n.charCodeAt(y);if(55296<=w&&w<=56319){if(++y>=b)return this._interim=w,d;const v=n.charCodeAt(y);56320<=v&&v<=57343?u[d++]=1024*(w-55296)+v-56320+65536:(u[d++]=w,u[d++]=v)}else w!==65279&&(u[d++]=w)}return d}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){const b=n.length;if(!b)return 0;let d,m,y,w,v=0,s=0,c=0;if(this.interim[0]){let p=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let x,L=0;for(;(x=63&this.interim[++L])&&L<4;)C<<=6,C|=x;const k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=k-L;for(;c<E;){if(c>=b)return 0;if(x=n[c++],(192&x)!=128){c--,p=!0;break}this.interim[L++]=x,C<<=6,C|=63&x}p||(k===2?C<128?c--:u[v++]=C:k===3?C<2048||C>=55296&&C<=57343||C===65279||(u[v++]=C):C<65536||C>1114111||(u[v++]=C)),this.interim.fill(0)}const l=b-4;let a=c;for(;a<b;){for(;!(!(a<l)||128&(d=n[a])||128&(m=n[a+1])||128&(y=n[a+2])||128&(w=n[a+3]));)u[v++]=d,u[v++]=m,u[v++]=y,u[v++]=w,a+=4;if(d=n[a++],d<128)u[v++]=d;else if((224&d)==192){if(a>=b)return this.interim[0]=d,v;if(m=n[a++],(192&m)!=128){a--;continue}if(s=(31&d)<<6|63&m,s<128){a--;continue}u[v++]=s}else if((240&d)==224){if(a>=b)return this.interim[0]=d,v;if(m=n[a++],(192&m)!=128){a--;continue}if(a>=b)return this.interim[0]=d,this.interim[1]=m,v;if(y=n[a++],(192&y)!=128){a--;continue}if(s=(15&d)<<12|(63&m)<<6|63&y,s<2048||s>=55296&&s<=57343||s===65279)continue;u[v++]=s}else if((248&d)==240){if(a>=b)return this.interim[0]=d,v;if(m=n[a++],(192&m)!=128){a--;continue}if(a>=b)return this.interim[0]=d,this.interim[1]=m,v;if(y=n[a++],(192&y)!=128){a--;continue}if(a>=b)return this.interim[0]=d,this.interim[1]=m,this.interim[2]=y,v;if(w=n[a++],(192&w)!=128){a--;continue}if(s=(7&d)<<18|(63&m)<<12|(63&y)<<6|63&w,s<65536||s>1114111)continue;u[v++]=s}}return v}}},225:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const u=n(1480),b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;i.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let y=0;y<b.length;++y)m.fill(0,b[y][0],b[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?m[y]:function(w,v){let s,c=0,l=v.length-1;if(w<v[0][0]||w>v[l][1])return!1;for(;l>=c;)if(s=c+l>>1,w>v[s][1])c=s+1;else{if(!(w<v[s][0]))return!0;l=s-1}return!1}(y,d)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,w){let v=this.wcwidth(y),s=v===0&&w!==0;if(s){const c=u.UnicodeService.extractWidth(w);c===0?s=!1:c>v&&(v=c)}return u.UnicodeService.createPropertyValue(0,v,s)}}},5981:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=n(8460),b=n(844);class d extends b.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(w)}_innerWrite(y=0,w=!0){const v=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],c=this._action(s,w);if(c){const a=p=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(v,p);return void c.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(a)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=d},5941:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function b(d,m){const y=d.toString(16),w=y.length<2?"0"+y:y;switch(m){case 4:return y[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(d){if(!d)return;let m=d.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const y=n.exec(m);if(y){const w=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/w*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/w*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/w*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),u.exec(m)&&[3,6,9,12].includes(m.length))){const y=m.length/3,w=[0,0,0];for(let v=0;v<3;++v){const s=parseInt(m.slice(y*v,y*v+y),16);w[v]=y===1?s<<4:y===2?s:y===3?s>>4:s>>8}return w}},i.toRgbString=function(d,m=16){const[y,w,v]=d;return`rgb:${b(y,m)}/${b(w,m)}/${b(v,m)}`}},5770:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=n(482),b=n(8742),d=n(5770),m=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(w,v){this._handlers[w]===void 0&&(this._handlers[w]=[]);const s=this._handlers[w];return s.push(v),{dispose:()=>{const c=s.indexOf(v);c!==-1&&s.splice(c,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(w,v){if(this.reset(),this._ident=w,this._active=this._handlers[w]||m,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(w,v,s){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(w,v,s);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(w,v,s))}unhook(w,v=!0){if(this._active.length){let s=!1,c=this._active.length-1,l=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,s=v,l=this._stack.fallThrough,this._stack.paused=!1),!l&&s===!1){for(;c>=0&&(s=this._active[c].unhook(w),s!==!0);c--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,s;c--}for(;c>=0;c--)if(s=this._active[c].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",w);this._active=m,this._ident=0}};const y=new b.Params;y.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=y,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():y,this._data="",this._hitLimit=!1}put(w,v,s){this._hitLimit||(this._data+=(0,u.utf32ToString)(w,v,s),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let v=!1;if(this._hitLimit)v=!1;else if(w&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(s=>(this._params=y,this._data="",this._hitLimit=!1,s));return this._params=y,this._data="",this._hitLimit=!1,v}}},2015:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=n(844),b=n(8742),d=n(6242),m=n(6351);class y{constructor(c){this.table=new Uint8Array(c)}setDefault(c,l){this.table.fill(c<<4|l)}add(c,l,a,p){this.table[l<<8|c]=a<<4|p}addMany(c,l,a,p){for(let C=0;C<c.length;C++)this.table[l<<8|c[C]]=a<<4|p}}i.TransitionTable=y;const w=160;i.VT500_TRANSITION_TABLE=function(){const s=new y(4095),c=Array.apply(null,Array(256)).map((L,k)=>k),l=(L,k)=>c.slice(L,k),a=l(32,127),p=l(0,24);p.push(25),p.push.apply(p,l(28,32));const C=l(0,14);let x;for(x in s.setDefault(1,0),s.addMany(a,0,2,0),C)s.addMany([24,26,153,154],x,3,0),s.addMany(l(128,144),x,3,0),s.addMany(l(144,152),x,3,0),s.add(156,x,0,0),s.add(27,x,11,1),s.add(157,x,4,8),s.addMany([152,158,159],x,0,7),s.add(155,x,11,3),s.add(144,x,11,9);return s.addMany(p,0,3,0),s.addMany(p,1,3,1),s.add(127,1,0,1),s.addMany(p,8,0,8),s.addMany(p,3,3,3),s.add(127,3,0,3),s.addMany(p,4,3,4),s.add(127,4,0,4),s.addMany(p,6,3,6),s.addMany(p,5,3,5),s.add(127,5,0,5),s.addMany(p,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(a,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(l(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(a,7,0,7),s.addMany(p,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(l(64,127),3,7,0),s.addMany(l(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(l(48,60),4,8,4),s.addMany(l(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(l(32,64),6,0,6),s.add(127,6,0,6),s.addMany(l(64,127),6,0,0),s.addMany(l(32,48),3,9,5),s.addMany(l(32,48),5,9,5),s.addMany(l(48,64),5,0,6),s.addMany(l(64,127),5,7,0),s.addMany(l(32,48),4,9,5),s.addMany(l(32,48),1,9,2),s.addMany(l(32,48),2,9,2),s.addMany(l(48,127),2,10,0),s.addMany(l(48,80),1,10,0),s.addMany(l(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(l(96,127),1,10,0),s.add(80,1,11,9),s.addMany(p,9,0,9),s.add(127,9,0,9),s.addMany(l(28,32),9,0,9),s.addMany(l(32,48),9,9,12),s.addMany(l(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(p,11,0,11),s.addMany(l(32,128),11,0,11),s.addMany(l(28,32),11,0,11),s.addMany(p,10,0,10),s.add(127,10,0,10),s.addMany(l(28,32),10,0,10),s.addMany(l(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(l(32,48),10,9,12),s.addMany(p,12,0,12),s.add(127,12,0,12),s.addMany(l(28,32),12,0,12),s.addMany(l(32,48),12,9,12),s.addMany(l(48,64),12,0,11),s.addMany(l(64,127),12,12,13),s.addMany(l(64,127),10,12,13),s.addMany(l(64,127),9,12,13),s.addMany(p,13,13,13),s.addMany(a,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(w,0,2,0),s.add(w,8,5,8),s.add(w,6,0,6),s.add(w,11,0,11),s.add(w,13,13,13),s}();class v extends u.Disposable{constructor(c=i.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new b.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,a,p)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,a)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,l=[64,126]){let a=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(a=c.prefix.charCodeAt(0),a&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<c.intermediates.length;++C){const x=c.intermediates.charCodeAt(C);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=x}}if(c.final.length!==1)throw new Error("final must be a single byte");const p=c.final.charCodeAt(0);if(l[0]>p||p>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return a<<=8,a|=p,a}identToString(c){const l=[];for(;c;)l.push(String.fromCharCode(255&c)),c>>=8;return l.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,l){const a=this._identifier(c,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);const p=this._escHandlers[a];return p.push(l),{dispose:()=>{const C=p.indexOf(l);C!==-1&&p.splice(C,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,l){this._executeHandlers[c.charCodeAt(0)]=l}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,l){const a=this._identifier(c);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);const p=this._csiHandlers[a];return p.push(l),{dispose:()=>{const C=p.indexOf(l);C!==-1&&p.splice(C,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,l){return this._dcsParser.registerHandler(this._identifier(c),l)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,l){return this._oscParser.registerHandler(c,l)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,l,a,p,C){this._parseStack.state=c,this._parseStack.handlers=l,this._parseStack.handlerPos=a,this._parseStack.transition=p,this._parseStack.chunkPos=C}parse(c,l,a){let p,C=0,x=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const k=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&E>-1){for(;E>=0&&(p=k[E](this._params),p!==!0);E--)if(p instanceof Promise)return this._parseStack.handlerPos=E,p}this._parseStack.handlers=[];break;case 4:if(a===!1&&E>-1){for(;E>=0&&(p=k[E](),p!==!0);E--)if(p instanceof Promise)return this._parseStack.handlerPos=E,p}this._parseStack.handlers=[];break;case 6:if(C=c[this._parseStack.chunkPos],p=this._dcsParser.unhook(C!==24&&C!==26,a),p)return p;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=c[this._parseStack.chunkPos],p=this._oscParser.end(C!==24&&C!==26,a),p)return p;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let k=L;k<l;++k){switch(C=c[k],x=this._transitions.table[this.currentState<<8|(C<160?C:w)],x>>4){case 2:for(let A=k+1;;++A){if(A>=l||(C=c[A])<32||C>126&&C<w){this._printHandler(c,k,A),k=A-1;break}if(++A>=l||(C=c[A])<32||C>126&&C<w){this._printHandler(c,k,A),k=A-1;break}if(++A>=l||(C=c[A])<32||C>126&&C<w){this._printHandler(c,k,A),k=A-1;break}if(++A>=l||(C=c[A])<32||C>126&&C<w){this._printHandler(c,k,A),k=A-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|C];let B=E?E.length-1:-1;for(;B>=0&&(p=E[B](this._params),p!==!0);B--)if(p instanceof Promise)return this._preserveStack(3,E,B,x,k),p;B<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++k<l&&(C=c[k])>47&&C<60);k--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const O=this._escHandlers[this._collect<<8|C];let P=O?O.length-1:-1;for(;P>=0&&(p=O[P](),p!==!0);P--)if(p instanceof Promise)return this._preserveStack(4,O,P,x,k),p;P<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let A=k+1;;++A)if(A>=l||(C=c[A])===24||C===26||C===27||C>127&&C<w){this._dcsParser.put(c,k,A),k=A-1;break}break;case 14:if(p=this._dcsParser.unhook(C!==24&&C!==26),p)return this._preserveStack(6,[],0,x,k),p;C===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=k+1;;A++)if(A>=l||(C=c[A])<32||C>127&&C<w){this._oscParser.put(c,k,A),k=A-1;break}break;case 6:if(p=this._oscParser.end(C!==24&&C!==26),p)return this._preserveStack(5,[],0,x,k),p;C===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}i.EscapeSequenceParser=v},6242:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=n(5770),b=n(482),d=[];i.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,y){this._handlers[m]===void 0&&(this._handlers[m]=[]);const w=this._handlers[m];return w.push(y),{dispose:()=>{const v=w.indexOf(y);v!==-1&&w.splice(v,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,y,w){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(m,y,w);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(m,y,w))}start(){this.reset(),this._state=1}put(m,y,w){if(this._state!==3){if(this._state===1)for(;y<w;){const v=m[y++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&w-y>0&&this._put(m,y,w)}}end(m,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,v=this._active.length-1,s=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,w=y,s=this._stack.fallThrough,this._stack.paused=!1),!s&&w===!1){for(;v>=0&&(w=this._active[v].end(m),w!==!0);v--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,w;v--}for(;v>=0;v--)if(w=this._active[v].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",m);this._active=d,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,y,w){this._hitLimit||(this._data+=(0,b.utf32ToString)(m,y,w),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let y=!1;if(this._hitLimit)y=!1;else if(m&&(y=this._handler(this._data),y instanceof Promise))return y.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,y}}},8742:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class u{static fromArray(d){const m=new u;if(!d.length)return m;for(let y=Array.isArray(d[0])?1:0;y<d.length;++y){const w=d[y];if(Array.isArray(w))for(let v=0;v<w.length;++v)m.addSubParam(w[v]);else m.addParam(w)}return m}constructor(d=32,m=32){if(this.maxLength=d,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new u(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let m=0;m<this.length;++m){d.push(this.params[m]);const y=this._subParamsIdx[m]>>8,w=255&this._subParamsIdx[m];w-y>0&&d.push(Array.prototype.slice.call(this._subParams,y,w))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>n?n:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>n?n:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const m=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];return y-m>0?this._subParams.subarray(m,y):null}getSubParamsAll(){const d={};for(let m=0;m<this.length;++m){const y=this._subParamsIdx[m]>>8,w=255&this._subParamsIdx[m];w-y>0&&(d[m]=this._subParams.slice(y,w))}return d}addDigit(d){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,w=y[m-1];y[m-1]=~w?Math.min(10*w+d,n):d}}i.Params=u},5741:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,u){const b={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(b),u.dispose=()=>this._wrappedAddonDispose(b),u.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let u=-1;for(let b=0;b<this._addons.length;b++)if(this._addons[b]===n){u=b;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(u,1)}}},8771:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=n(3785),b=n(511);i.BufferApiView=class{constructor(d,m){this._buffer=d,this.type=m}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const m=this._buffer.lines.get(d);if(m)return new u.BufferLineApiView(m)}getNullCell(){return new b.CellData}}},3785:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=n(511);i.BufferLineApiView=class{constructor(b){this._line=b}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(b,d){if(!(b<0||b>=this._line.length))return d?(this._line.loadCell(b,d),d):this._line.loadCell(b,new u.CellData)}translateToString(b,d,m){return this._line.translateToString(b,d,m)}}},8285:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=n(8771),b=n(8460),d=n(844);class m extends d.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new b.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=m},7975:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,u){return this._core.registerCsiHandler(n,b=>u(b.toArray()))}addCsiHandler(n,u){return this.registerCsiHandler(n,u)}registerDcsHandler(n,u){return this._core.registerDcsHandler(n,(b,d)=>u(b,d.toArray()))}addDcsHandler(n,u){return this.registerDcsHandler(n,u)}registerEscHandler(n,u){return this._core.registerEscHandler(n,u)}addEscHandler(n,u){return this.registerEscHandler(n,u)}registerOscHandler(n,u){return this._core.registerOscHandler(n,u)}addOscHandler(n,u){return this.registerOscHandler(n,u)}}},7090:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(f,i,n){var u=this&&this.__decorate||function(s,c,l,a){var p,C=arguments.length,x=C<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(s,c,l,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(x=(C<3?p(x):C>3?p(c,l,x):p(c,l))||x);return C>3&&x&&Object.defineProperty(c,l,x),x},b=this&&this.__param||function(s,c){return function(l,a){c(l,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const d=n(8460),m=n(844),y=n(5295),w=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(s,this))}resize(s,c){this.cols=s,this.rows=c,this.buffers.resize(s,c),this._onResize.fire({cols:s,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,c=!1){const l=this.buffer;let a;a=this._cachedBlankLine,a&&a.length===this.cols&&a.getFg(0)===s.fg&&a.getBg(0)===s.bg||(a=l.getBlankLine(s,c),this._cachedBlankLine=a),a.isWrapped=c;const p=l.ybase+l.scrollTop,C=l.ybase+l.scrollBottom;if(l.scrollTop===0){const x=l.lines.isFull;C===l.lines.length-1?x?l.lines.recycle().copyFrom(a):l.lines.push(a.clone()):l.lines.splice(C+1,0,a.clone()),x?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const x=C-p+1;l.lines.shiftElements(p+1,x-1,-1),l.lines.set(C,a.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(s,c,l){const a=this.buffer;if(s<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else s+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);const p=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+s,a.ybase),0),p!==a.ydisp&&(c||this._onScroll.fire(a.ydisp))}};i.BufferService=v=u([b(0,w.IOptionsService)],v)},7994:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,u){this._charsets[n]=u,this.glevel===n&&(this.charset=u)}}},1753:function(f,i,n){var u=this&&this.__decorate||function(a,p,C,x){var L,k=arguments.length,E=k<3?p:x===null?x=Object.getOwnPropertyDescriptor(p,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,p,C,x);else for(var B=a.length-1;B>=0;B--)(L=a[B])&&(E=(k<3?L(E):k>3?L(p,C,E):L(p,C))||E);return k>3&&E&&Object.defineProperty(p,C,E),E},b=this&&this.__param||function(a,p){return function(C,x){p(C,x,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const d=n(2585),m=n(8460),y=n(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:a=>a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)},VT200:{events:19,restrict:a=>a.action!==32},DRAG:{events:23,restrict:a=>a.action!==32||a.button!==3},ANY:{events:31,restrict:a=>!0}};function v(a,p){let C=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(C|=64,C|=a.action):(C|=3&a.button,4&a.button&&(C|=64),8&a.button&&(C|=128),a.action===32?C|=32:a.action!==0||p||(C|=3)),C}const s=String.fromCharCode,c={DEFAULT:a=>{const p=[v(a,!1)+32,a.col+32,a.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${s(p[0])}${s(p[1])}${s(p[2])}`},SGR:a=>{const p=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${v(a,!0)};${a.col};${a.row}${p}`},SGR_PIXELS:a=>{const p=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${v(a,!0)};${a.x};${a.y}${p}`}};let l=i.CoreMouseService=class extends y.Disposable{constructor(a,p){super(),this._bufferService=a,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(w))this.addProtocol(C,w[C]);for(const C of Object.keys(c))this.addEncoding(C,c[C]);this.reset()}addProtocol(a,p){this._protocols[a]=p}addEncoding(a,p){this._encodings[a]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(a){if(!this._protocols[a])throw new Error(`unknown protocol "${a}"`);this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(a){if(!this._encodings[a])throw new Error(`unknown encoding "${a}"`);this._activeEncoding=a}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,a,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(a))return!1;const p=this._encodings[this._activeEncoding](a);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=a,!0}explainEvents(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}}_equalEvents(a,p,C){if(C){if(a.x!==p.x||a.y!==p.y)return!1}else if(a.col!==p.col||a.row!==p.row)return!1;return a.button===p.button&&a.action===p.action&&a.ctrl===p.ctrl&&a.alt===p.alt&&a.shift===p.shift}};i.CoreMouseService=l=u([b(0,d.IBufferService),b(1,d.ICoreService)],l)},6975:function(f,i,n){var u=this&&this.__decorate||function(l,a,p,C){var x,L=arguments.length,k=L<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,p,C);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(k=(L<3?x(k):L>3?x(a,p,k):x(a,p))||k);return L>3&&k&&Object.defineProperty(a,p,k),k},b=this&&this.__param||function(l,a){return function(p,C){a(p,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const d=n(1439),m=n(8460),y=n(844),w=n(2585),v=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=i.CoreService=class extends y.Disposable{constructor(l,a,p){super(),this._bufferService=l,this._logService=a,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(s)}reset(){this.modes=(0,d.clone)(v),this.decPrivateModes=(0,d.clone)(s)}triggerDataEvent(l,a=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;a&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),a&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(C=>C.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(a=>a.charCodeAt(0))),this._onBinary.fire(l))}};i.CoreService=c=u([b(0,w.IBufferService),b(1,w.ILogService),b(2,w.IOptionsService)],c)},9074:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=n(8055),b=n(8460),d=n(844),m=n(6106);let y=0,w=0;class v extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(l=>l==null?void 0:l.marker.line),this._onDecorationRegistered=this.register(new b.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new b.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const a=new s(l);if(a){const p=a.marker.onDispose(()=>a.dispose());a.onDispose(()=>{a&&(this._decorations.delete(a)&&this._onDecorationRemoved.fire(a),p.dispose())}),this._decorations.insert(a),this._onDecorationRegistered.fire(a)}return a}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,a,p){let C=0,x=0;for(const L of this._decorations.getKeyIterator(a))C=L.options.x??0,x=C+(L.options.width??1),l>=C&&l<x&&(!p||(L.options.layer??"bottom")===p)&&(yield L)}forEachDecorationAtCell(l,a,p,C){this._decorations.forEachByKey(a,x=>{y=x.options.x??0,w=y+(x.options.width??1),l>=y&&l<w&&(!p||(x.options.layer??"bottom")===p)&&C(x)})}}i.DecorationService=v;class s extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new b.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new b.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=n(2585),b=n(8343);class d{constructor(...y){this._entries=new Map;for(const[w,v]of y)this.set(w,v)}set(y,w){const v=this._entries.get(y);return this._entries.set(y,w),v}forEach(y){for(const[w,v]of this._entries.entries())y(w,v)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}i.ServiceCollection=d,i.InstantiationService=class{constructor(){this._services=new d,this._services.set(u.IInstantiationService,this)}setService(m,y){this._services.set(m,y)}getService(m){return this._services.get(m)}createInstance(m,...y){const w=(0,b.getServiceDependencies)(m).sort((c,l)=>c.index-l.index),v=[];for(const c of w){const l=this._services.get(c.id);if(!l)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${c.id}.`);v.push(l)}const s=w.length>0?w[0].index:y.length;if(y.length!==s)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${s+1} conflicts with ${y.length} static arguments`);return new m(...y,...v)}}},7866:function(f,i,n){var u=this&&this.__decorate||function(s,c,l,a){var p,C=arguments.length,x=C<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(s,c,l,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(x=(C<3?p(x):C>3?p(c,l,x):p(c,l))||x);return C>3&&x&&Object.defineProperty(c,l,x),x},b=this&&this.__param||function(s,c){return function(l,a){c(l,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const d=n(844),m=n(2585),y={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let w,v=i.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let c=0;c<s.length;c++)typeof s[c]=="function"&&(s[c]=s[c]())}_log(s,c,l){this._evalLazyOptionalParams(l),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...l)}trace(s,...c){var l;this._logLevel<=m.LogLevelEnum.TRACE&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.trace.bind(this._optionsService.options.logger))??console.log,s,c)}debug(s,...c){var l;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.debug.bind(this._optionsService.options.logger))??console.log,s,c)}info(s,...c){var l;this._logLevel<=m.LogLevelEnum.INFO&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.info.bind(this._optionsService.options.logger))??console.info,s,c)}warn(s,...c){var l;this._logLevel<=m.LogLevelEnum.WARN&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.warn.bind(this._optionsService.options.logger))??console.warn,s,c)}error(s,...c){var l;this._logLevel<=m.LogLevelEnum.ERROR&&this._log(((l=this._optionsService.options.logger)==null?void 0:l.error.bind(this._optionsService.options.logger))??console.error,s,c)}};i.LogService=v=u([b(0,m.IOptionsService)],v),i.setTraceLogger=function(s){w=s},i.traceCall=function(s,c,l){if(typeof l.value!="function")throw new Error("not supported");const a=l.value;l.value=function(...p){if(w.logLevel!==m.LogLevelEnum.TRACE)return a.apply(this,p);w.trace(`GlyphRenderer#${a.name}(${p.map(x=>JSON.stringify(x)).join(", ")})`);const C=a.apply(this,p);return w.trace(`GlyphRenderer#${a.name} return`,C),C}}},7302:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=n(8460),b=n(844),d=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends b.Disposable{constructor(v){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s={...i.DEFAULT_OPTIONS};for(const c in v)if(c in s)try{const l=v[c];s[c]=this._sanitizeAndValidateOption(c,l)}catch(l){console.error(l)}this.rawOptions=s,this.options={...s},this._setupOptions(),this.register((0,b.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,s){return this.onOptionChange(c=>{c===v&&s(this.rawOptions[v])})}onMultipleOptionChange(v,s){return this.onOptionChange(c=>{v.indexOf(c)!==-1&&s()})}_setupOptions(){const v=c=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},s=(c,l)=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);l=this._sanitizeAndValidateOption(c,l),this.rawOptions[c]!==l&&(this.rawOptions[c]=l,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const l={get:v.bind(this,c),set:s.bind(this,c)};Object.defineProperty(this.options,c,l)}}_sanitizeAndValidateOption(v,s){switch(v){case"cursorStyle":if(s||(s=i.DEFAULT_OPTIONS[v]),!function(c){return c==="block"||c==="underline"||c==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${v}`);break;case"wordSeparator":s||(s=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=m.includes(s)?s:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${v} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${v} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}i.OptionsService=y},2660:function(f,i,n){var u=this&&this.__decorate||function(y,w,v,s){var c,l=arguments.length,a=l<3?w:s===null?s=Object.getOwnPropertyDescriptor(w,v):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(y,w,v,s);else for(var p=y.length-1;p>=0;p--)(c=y[p])&&(a=(l<3?c(a):l>3?c(w,v,a):c(w,v))||a);return l>3&&a&&Object.defineProperty(w,v,a),a},b=this&&this.__param||function(y,w){return function(v,s){w(v,s,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const d=n(2585);let m=i.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const w=this._bufferService.buffer;if(y.id===void 0){const p=w.addMarker(w.ybase+w.y),C={data:y,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(C,p)),this._dataByLinkId.set(C.id,C),C.id}const v=y,s=this._getEntryIdKey(v),c=this._entriesWithId.get(s);if(c)return this.addLineToLink(c.id,w.ybase+w.y),c.id;const l=w.addMarker(w.ybase+w.y),a={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(a,l)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(y,w){const v=this._dataByLinkId.get(y);if(v&&v.lines.every(s=>s.line!==w)){const s=this._bufferService.buffer.addMarker(w);v.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(v,s))}}getLinkData(y){var w;return(w=this._dataByLinkId.get(y))==null?void 0:w.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,w){const v=y.lines.indexOf(w);v!==-1&&(y.lines.splice(v,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};i.OscLinkService=m=u([b(0,d.IBufferService)],m)},8343:(f,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const n="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(b){return b[u]||[]},i.createDecorator=function(b){if(i.serviceRegistry.has(b))return i.serviceRegistry.get(b);const d=function(m,y,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,s,c){s[n]===s?s[u].push({id:v,index:c}):(s[u]=[{id:v,index:c}],s[n]=s)})(d,m,w)};return d.toString=()=>b,i.serviceRegistry.set(b,d),d}},2585:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=n(8343);var b;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(b||(i.LogLevelEnum=b={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(f,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=n(8460),b=n(225);class d{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,w,v=!1){return(16777215&y)<<3|(3&w)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const y=new b.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let w=0,v=0;const s=y.length;for(let c=0;c<s;++c){let l=y.charCodeAt(c);if(55296<=l&&l<=56319){if(++c>=s)return w+this.wcwidth(l);const C=y.charCodeAt(c);56320<=C&&C<=57343?l=1024*(l-55296)+C-56320+65536:w+=this.wcwidth(C)}const a=this.charProperties(l,v);let p=d.extractWidth(a);d.extractShouldJoin(a)&&(p-=d.extractWidth(v)),w+=p,v=a}return w}charProperties(y,w){return this._activeProvider.charProperties(y,w)}}i.UnicodeService=d}},h={};function g(f){var i=h[f];if(i!==void 0)return i.exports;var n=h[f]={exports:{}};return t[f].call(n.exports,n,n.exports,g),n.exports}var S={};return(()=>{var f=S;Object.defineProperty(f,"__esModule",{value:!0}),f.Terminal=void 0;const i=g(9042),n=g(3236),u=g(844),b=g(5741),d=g(8285),m=g(7975),y=g(7090),w=["cols","rows"];class v extends u.Disposable{constructor(c){super(),this._core=this.register(new n.Terminal(c)),this._addonManager=this.register(new b.AddonManager),this._publicOptions={...this._core.options};const l=p=>this._core.options[p],a=(p,C)=>{this._checkReadonlyOptions(p),this._core.options[p]=C};for(const p in this._core.options){const C={get:l.bind(this,p),set:a.bind(this,p)};Object.defineProperty(this._publicOptions,p,C)}}_checkReadonlyOptions(c){if(w.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const l in c)this._publicOptions[l]=c[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(c,l=!0){this._core.input(c,l)}resize(c,l){this._verifyIntegers(c,l),this._core.resize(c,l)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}attachCustomWheelEventHandler(c){this._core.attachCustomWheelEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){return this._checkProposedApi(),this._verifyPositiveIntegers(c.x??0,c.width??0,c.height??0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,l,a){this._verifyIntegers(c,l,a),this._core.select(c,l,a)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,l){this._verifyIntegers(c,l),this._core.selectLines(c,l)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,l){this._core.write(c,l)}writeln(c,l){this._core.write(c),this._core.write(`\r
`,l)}paste(c){this._core.paste(c)}refresh(c,l){this._verifyIntegers(c,l),this._core.refresh(c,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return i}_verifyIntegers(...c){for(const l of c)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const l of c)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}f.Terminal=v})(),S})())})(ms);var un=ms.exports,bs={exports:{}};(function(r,e){(function(t,h){r.exports=h()})(self,()=>(()=>{var t={};return(()=>{var h=t;Object.defineProperty(h,"__esModule",{value:!0}),h.FitAddon=void 0,h.FitAddon=class{activate(g){this._terminal=g}dispose(){}fit(){const g=this.proposeDimensions();if(!g||!this._terminal||isNaN(g.cols)||isNaN(g.rows))return;const S=this._terminal._core;this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(S._renderService.clear(),this._terminal.resize(g.cols,g.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const g=this._terminal._core,S=g._renderService.dimensions;if(S.css.cell.width===0||S.css.cell.height===0)return;const f=this._terminal.options.scrollback===0?0:g.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),u=Math.max(0,parseInt(i.getPropertyValue("width"))),b=window.getComputedStyle(this._terminal.element),d=n-(parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("padding-bottom"))),m=u-(parseInt(b.getPropertyValue("padding-right"))+parseInt(b.getPropertyValue("padding-left")))-f;return{cols:Math.max(2,Math.floor(m/S.css.cell.width)),rows:Math.max(1,Math.floor(d/S.css.cell.height))}}}})(),t})())})(bs);var fn=bs.exports,ys={exports:{}};(function(r,e){(function(t,h){r.exports=h()})(self,()=>(()=>{var t={6:(f,i)=>{function n(b){try{const d=new URL(b),m=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return b.toLocaleLowerCase().startsWith(m.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(b,d,m,y={}){this._terminal=b,this._regex=d,this._handler=m,this._options=y}provideLinks(b,d){const m=u.computeLink(b,this._regex,this._terminal,this._handler);d(this._addCallbacks(m))}_addCallbacks(b){return b.map(d=>(d.leave=this._options.leave,d.hover=(m,y)=>{if(this._options.hover){const{range:w}=d;this._options.hover(m,y,w)}},d))}};class u{static computeLink(d,m,y,w){const v=new RegExp(m.source,(m.flags||"")+"g"),[s,c]=u._getWindowedLineStrings(d-1,y),l=s.join("");let a;const p=[];for(;a=v.exec(l);){const C=a[0];if(!n(C))continue;const[x,L]=u._mapStrIdx(y,c,0,a.index),[k,E]=u._mapStrIdx(y,x,L,C.length);if(x===-1||L===-1||k===-1||E===-1)continue;const B={start:{x:L+1,y:x+1},end:{x:E,y:k+1}};p.push({range:B,text:C,activate:w})}return p}static _getWindowedLineStrings(d,m){let y,w=d,v=d,s=0,c="";const l=[];if(y=m.buffer.active.getLine(d)){const a=y.translateToString(!0);if(y.isWrapped&&a[0]!==" "){for(s=0;(y=m.buffer.active.getLine(--w))&&s<2048&&(c=y.translateToString(!0),s+=c.length,l.push(c),y.isWrapped&&c.indexOf(" ")===-1););l.reverse()}for(l.push(a),s=0;(y=m.buffer.active.getLine(++v))&&y.isWrapped&&s<2048&&(c=y.translateToString(!0),s+=c.length,l.push(c),c.indexOf(" ")===-1););}return[l,w]}static _mapStrIdx(d,m,y,w){const v=d.buffer.active,s=v.getNullCell();let c=y;for(;w;){const l=v.getLine(m);if(!l)return[-1,-1];for(let a=c;a<l.length;++a){l.getCell(a,s);const p=s.getChars();if(s.getWidth()&&(w-=p.length||1,a===l.length-1&&p==="")){const C=v.getLine(m+1);C&&C.isWrapped&&(C.getCell(0,s),s.getWidth()===2&&(w+=1))}if(w<0)return[m,a]}m++,c=0}return[m,c]}}i.LinkComputer=u}},h={};function g(f){var i=h[f];if(i!==void 0)return i.exports;var n=h[f]={exports:{}};return t[f](n,n.exports,g),n.exports}var S={};return(()=>{var f=S;Object.defineProperty(f,"__esModule",{value:!0}),f.WebLinksAddon=void 0;const i=g(6),n=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(b,d){const m=window.open();if(m){try{m.opener=null}catch{}m.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}f.WebLinksAddon=class{constructor(b=u,d={}){this._handler=b,this._options=d}activate(b){this._terminal=b;const d=this._options,m=d.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,m,this._handler,d))}dispose(){var b;(b=this._linkProvider)==null||b.dispose()}}})(),S})())})(ys);var _n=ys.exports;function Gr(r){let e,t,h,g,S,f,i,n,u,b,d,m=r[1].name+"",y,w,v,s=Qr(r[1].size)+"",c,l,a,p,C,x,L,k=r[3]&&Jr(r),E=r[2]==="pending"&&Xr(r),B=r[2]==="accepting"&&Yr(),O=r[2]==="completed"&&Zr(r);return{c(){e=D("div"),t=D("div"),h=D("div"),h.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',g=F(),S=D("div"),f=D("div"),i=D("div"),n=D("span"),n.textContent="📄",u=F(),b=D("div"),d=D("span"),y=$(m),w=F(),v=D("span"),c=$(s),l=$(" 字节"),a=F(),p=D("div"),k&&k.c(),C=F(),E&&E.c(),x=F(),B&&B.c(),L=F(),O&&O.c(),o(h,"class","zmodem-download-header"),o(n,"class","zmodem-download-icon"),o(d,"class","zmodem-download-name"),o(v,"class","zmodem-download-size"),o(b,"class","zmodem-download-details"),o(i,"class","zmodem-download-file"),o(f,"class","zmodem-download-info"),o(p,"class","zmodem-download-actions"),o(S,"class","zmodem-download-body"),o(t,"class","zmodem-download-content"),o(e,"class","zmodem-download-modal")},m(P,A){q(P,e,A),_(e,t),_(t,h),_(t,g),_(t,S),_(S,f),_(f,i),_(i,n),_(i,u),_(i,b),_(b,d),_(d,y),_(b,w),_(b,v),_(v,c),_(v,l),_(S,a),_(S,p),k&&k.m(p,null),_(p,C),E&&E.m(p,null),_(p,x),B&&B.m(p,null),_(p,L),O&&O.m(p,null)},p(P,A){A[0]&2&&m!==(m=P[1].name+"")&&ue(y,m),A[0]&2&&s!==(s=Qr(P[1].size)+"")&&ue(c,s),P[3]?k?k.p(P,A):(k=Jr(P),k.c(),k.m(p,C)):k&&(k.d(1),k=null),P[2]==="pending"?E?E.p(P,A):(E=Xr(P),E.c(),E.m(p,x)):E&&(E.d(1),E=null),P[2]==="accepting"?B||(B=Yr(),B.c(),B.m(p,L)):B&&(B.d(1),B=null),P[2]==="completed"?O?O.p(P,A):(O=Zr(P),O.c(),O.m(p,null)):O&&(O.d(1),O=null)},d(P){P&&V(e),k&&k.d(),E&&E.d(),B&&B.d(),O&&O.d()}}}function Jr(r){let e,t,h;return{c(){e=D("div"),t=$("❌ "),h=$(r[3]),o(e,"class","zmodem-error-message")},m(g,S){q(g,e,S),_(e,t),_(e,h)},p(g,S){S[0]&8&&ue(h,g[3])},d(g){g&&V(e)}}}function Xr(r){let e,t,h,g,S,f,i,n;return{c(){e=D("p"),e.textContent="服务器正在发送文件，是否接收？",t=F(),h=D("div"),g=D("button"),g.textContent="拒绝",S=F(),f=D("button"),f.textContent="接收文件",o(e,"class","zmodem-download-prompt"),o(g,"class","zmodem-download-btn zmodem-btn-reject"),o(f,"class","zmodem-download-btn zmodem-btn-accept"),o(h,"class","zmodem-download-buttons")},m(u,b){q(u,e,b),q(u,t,b),q(u,h,b),_(h,g),_(h,S),_(h,f),i||(n=[re(g,"click",r[6]),re(f,"click",r[5])],i=!0)},p:we,d(u){u&&(V(e),V(t),V(h)),i=!1,Oe(n)}}}function Yr(r){let e;return{c(){e=D("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',o(e,"class","zmodem-downloading")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function Zr(r){let e,t,h,g,S,f=(r[4]||r[1].name)+"",i;return{c(){e=D("div"),t=D("span"),t.textContent="✓",h=F(),g=D("span"),S=$("文件接收完成，已保存到："),i=$(f),o(t,"class","zmodem-success-icon"),o(e,"class","zmodem-completed")},m(n,u){q(n,e,u),_(e,t),_(e,h),_(e,g),_(g,S),_(g,i)},p(n,u){u[0]&18&&f!==(f=(n[4]||n[1].name)+"")&&ue(i,f)},d(n){n&&V(e)}}}function pn(r){let e,t,h,g=r[1]&&Gr(r);return{c(){e=D("div"),e.innerHTML="",t=F(),g&&g.c(),h=pt(),o(e,"class","terminal-container svelte-14g4vw6")},m(S,f){q(S,e,f),r[16](e),q(S,t,f),g&&g.m(S,f),q(S,h,f)},p(S,f){S[1]?g?g.p(S,f):(g=Gr(S),g.c(),g.m(h.parentNode,h)):g&&(g.d(1),g=null)},i:we,o:we,d(S){S&&(V(e),V(t),V(h)),r[16](null),g&&g.d(S)}}}function gn(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),h=window.URL.createObjectURL(t),g=document.createElement("a");g.href=h,g.download=e,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(h),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function mn(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function vn(r){const e=[];let t=0;for await(const S of r)e.push(S),t+=S.length;const h=new Uint8Array(t);let g=0;for(const S of e)h.set(S,g),g+=S.length;return h}async function bn(r,e){const t=await vn(r),{SaveBinaryFile:h}=window.wailsBindings||{};if(typeof h=="function"){const g=btoa(mn(t));return await h(e,g)}return gn(t,e),null}function Qr(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function yn(r,e,t){let{sessionId:h=null}=e,{onData:g=null}=e,{onResize:S=null}=e,{onZModemTransfer:f=null}=e,i,n,u,b=null,d=null,m=null,y=!1,w=null,v=!1,s=null,c="pending",l=null,a=null,p=null,C=Hs(Kt);const x={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},L={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},k=Kt.subscribe(N=>{C=N,n&&(n.options.theme=C==="light"?L:x)});Vt(async()=>{n=new un.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:C==="light"?L:x,allowProposedApi:!0,scrollback:1e3,convertEol:!1,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),u=new fn.FitAddon,n.loadAddon(u),n.loadAddon(new _n.WebLinksAddon),n.open(i),u.fit(),n.attachCustomKeyEventHandler(G=>{if(G.metaKey&&G.key.toLowerCase()==="c"&&!G.shiftKey&&!G.ctrlKey){if(n.hasSelection()){const Z=n.getSelection();return navigator.clipboard.writeText(Z).catch(se=>{console.error("Failed to copy:",se)}),!1}return!0}if(G.ctrlKey&&!G.metaKey&&G.key.toLowerCase()==="c"&&!G.shiftKey){if(n.hasSelection()){const Z=n.getSelection();return navigator.clipboard.writeText(Z).catch(se=>{console.error("Failed to copy:",se)}),!1}return!0}return G.metaKey&&G.key.toLowerCase()==="v"&&!G.shiftKey&&!G.ctrlKey?(G.preventDefault(),navigator.clipboard.readText().then(Z=>{Z&&g&&h&&g(h,Z)}).catch(Z=>{console.error("Failed to read clipboard:",Z)}),!1):G.ctrlKey&&!G.metaKey&&G.key.toLowerCase()==="v"&&!G.shiftKey?(G.preventDefault(),navigator.clipboard.readText().then(Z=>{Z&&g&&h&&g(h,Z)}).catch(Z=>{console.error("Failed to read clipboard:",Z)}),!1):!0});try{const G=await ar(()=>import("./index2.js").then(Z=>Z.i),[]);b=G.default||G,d=new b.Sentry({to_terminal:Z=>{n&&n.write(new Uint8Array(Z))},sender:Z=>{if(h){if(f){f(h,new Uint8Array(Z));return}if(g){let se="";for(let z=0;z<Z.length;z++)se+=String.fromCharCode(Z[z]);g(h,se)}}},on_detect:Z=>{if(console.log("ZMODEM detected:",Z.type),console.log("Detection object:",Z),m=Z.confirm(),console.log("ZMODEM confirmed, type:",m.type,"has zsession:",!!m),!m){console.error("ERROR: zsession is null after confirm()");return}v=!0,n&&(n.options.disableStdin=!0),m.type==="receive"?(console.log("Calling handleZModemReceive for download"),P(m)):(console.log("Calling handleZModemSend for upload"),X(m))},on_retract:()=>{console.log("ZMODEM retracted"),m=null,v=!1,n&&(n.options.disableStdin=!1)}}),console.log("ZMODEM initialized successfully")}catch(G){console.error("Failed to initialize ZMODEM:",G)}n.onData(G=>{g&&h&&g(h,G)}),n.onResize(({cols:G,rows:Z})=>{S&&h&&S(h,G,Z)});const N=new ResizeObserver(()=>{u.fit()});return N.observe(i),()=>{N.disconnect()}}),dr(()=>{k&&k(),n&&n.dispose()});function E(N){p||(p=document.createElement("div"),p.className="zmodem-progress-modal",p.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${N}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(p))}function B(N,G,Z,se,z){if(!p)return;const M=Math.min(100,Math.round(se/z*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${Z}`,document.getElementById("zmodem-progress-bar").style.width=`${M}%`,document.getElementById("zmodem-progress-text").textContent=`${M}%`,document.getElementById("zmodem-files-progress").textContent=`${N+1} / ${G}`}function O(){p&&(document.body.removeChild(p),p=null)}function P(N){t(1,s=null),w=null,t(2,c="pending"),t(3,l=null),t(4,a=null),N.on("offer",G=>{const Z=G.get_details();w=G,t(1,s=Z),t(2,c="pending"),t(3,l=null),t(4,a=null)}),N.on("session_end",()=>{w=null,m=null,v=!1,n&&(n.options.disableStdin=!1),c==="accepting"?(t(2,c="completed"),setTimeout(()=>{t(1,s=null),t(2,c="pending"),t(4,a=null)},1500)):(t(1,s=null),t(2,c="pending"),t(4,a=null))}),N.start()}async function A(){if(w){t(2,c="accepting"),t(3,l=null);try{await w.accept();const N=w.get_payloads(),G=w.get_details().name;t(4,a=await bn(N,G)),w=null,t(2,c="completed")}catch(N){console.error("接收文件失败:",N),t(3,l=N.message||String(N)),t(2,c="pending")}}}function j(){w&&w.skip(),w=null,t(1,s=null),t(2,c="pending"),t(3,l=null),t(4,a=null)}async function X(N){console.log("handleZModemSend called, session:",N);const G=document.createElement("input");return G.type="file",G.multiple=!0,new Promise(Z=>{G.onchange=async se=>{const z=Array.from(se.target.files);if(console.log("Files selected:",z.length,z.map(M=>M.name)),z.length===0){console.log("No files selected, closing session"),N.close(),y=!1,v=!1,n&&(n.options.disableStdin=!1),Z();return}try{E(z.length),console.log("Starting to send files...");for(let M=0;M<z.length;M++){const K=z[M],H={name:K.name,size:K.size,mtime:new Date(K.lastModified)};console.log(`Sending file ${M+1}/${z.length}:`,K.name,K.size),await ee(N,K,H,M,z.length)}console.log("All files sent, closing session"),await N.close(),setTimeout(()=>{y=!1,O(),v=!1,n&&(n.options.disableStdin=!1),Z()},500)}catch(M){console.error("发送文件失败:",M),console.error("Error details:",M.stack),N.close(),y=!1,O(),v=!1,n&&(n.options.disableStdin=!1),Z()}},G.click()})}async function ee(N,G,Z,se,z){return new Promise((M,K)=>{N.send_offer(Z).then(H=>{if(!H){M();return}const J=new FileReader,Y=8192;J.onload=ne=>{const ae=ne.target.result;let ie=0,fe=0;function de(){if(ie<ae.byteLength){const Se=new Uint8Array(ae,ie,Math.min(Y,ae.byteLength-ie));H.send(Se),ie+=Y,fe+=Se.byteLength,B(se,z,G.name,fe,G.size),setTimeout(de,0)}else H.end().then(M).catch(K)}de()},J.onerror=()=>{K(new Error("读取文件失败"))},J.readAsArrayBuffer(G)})})}function Q(N){if(!n)return;let G;if(typeof N=="string"?G=new Uint8Array(N.split("").map(Z=>Z.charCodeAt(0))):N instanceof Uint8Array?G=N:G=new Uint8Array(N),d&&!y)try{d.consume(G);return}catch(Z){console.warn("ZMODEM consume failed:",Z),m=null,w=null,v=!1,y=!1,n&&(n.options.disableStdin=!1)}n.write(G)}function U(N){n&&n.writeln(N)}function T(){n&&n.clear()}function R(){n&&n.focus()}function I(){return n?{cols:n.cols,rows:n.rows}:{cols:80,rows:24}}function W(N){rt[N?"unshift":"push"](()=>{i=N,t(0,i)})}return r.$$set=N=>{"sessionId"in N&&t(7,h=N.sessionId),"onData"in N&&t(8,g=N.onData),"onResize"in N&&t(9,S=N.onResize),"onZModemTransfer"in N&&t(10,f=N.onZModemTransfer)},[i,s,c,l,a,A,j,h,g,S,f,Q,U,T,R,I,W]}class wn extends nt{constructor(e){super(),st(this,e,yn,pn,it,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function $r(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w;const v=r[6].default,s=Is(v,r,r[5],null);return{c(){e=D("div"),t=D("div"),h=F(),g=D("div"),S=D("div"),f=D("h2"),i=$(r[2]),n=F(),u=D("button"),u.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=F(),d=D("div"),s&&s.c(),o(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),o(f,"class","text-base font-semibold text-gray-900 dark:text-white"),o(u,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),o(S,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),o(d,"class","flex-1 overflow-y-auto p-6"),o(g,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),o(e,"class","fixed inset-0 z-50 flex items-center justify-center"),o(e,"role","dialog"),o(e,"aria-modal","true")},m(c,l){q(c,e,l),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),_(f,i),_(S,n),_(S,u),_(g,b),_(g,d),s&&s.m(d,null),m=!0,y||(w=[re(u,"click",function(){Mt(r[1])&&r[1].apply(this,arguments)}),re(e,"click",r[3])],y=!0)},p(c,l){r=c,(!m||l&4)&&ue(i,r[2]),s&&s.p&&(!m||l&32)&&Ws(s,v,r,r[5],m?Fs(v,r[5],l,null):zs(r[5]),null)},i(c){m||(Le(s,c),m=!0)},o(c){Re(s,c),m=!1},d(c){c&&V(e),s&&s.d(c),y=!1,Oe(w)}}}function Sn(r){let e,t,h=r[0]&&$r(r);return{c(){h&&h.c(),e=pt()},m(g,S){h&&h.m(g,S),q(g,e,S),t=!0},p(g,[S]){g[0]?h?(h.p(g,S),S&1&&Le(h,1)):(h=$r(g),h.c(),Le(h,1),h.m(e.parentNode,e)):h&&(gt(),Re(h,1,1,()=>{h=null}),mt())},i(g){t||(Le(h),t=!0)},o(g){Re(h),t=!1},d(g){g&&V(e),h&&h.d(g)}}}function kn(r,e,t){let{$$slots:h={},$$scope:g}=e,{isOpen:S=!1}=e,{onClose:f=()=>{}}=e,{title:i=""}=e,{size:n="md"}=e;function u(d){d.target===d.currentTarget&&f()}function b(d){d.key==="Escape"&&S&&f()}return r.$$set=d=>{"isOpen"in d&&t(0,S=d.isOpen),"onClose"in d&&t(1,f=d.onClose),"title"in d&&t(2,i=d.title),"size"in d&&t(4,n=d.size),"$$scope"in d&&t(5,g=d.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&(S?document.addEventListener("keydown",b):document.removeEventListener("keydown",b))},[S,f,i,u,n,g,h]}class ur extends nt{constructor(e){super(),st(this,e,kn,Sn,it,{isOpen:0,onClose:1,title:2,size:4})}}function Cn(r){let e,t,h,g,S,f,i,n,u,b,d,m,y;return{c(){e=D("div"),t=D("p"),h=$(r[2]),g=F(),S=D("div"),f=D("button"),i=$(r[4]),n=F(),u=D("button"),b=$(r[3]),o(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),o(f,"type","button"),o(f,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),o(u,"type","button"),o(u,"class",d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),o(S,"class","flex gap-2 pt-2"),o(e,"class","space-y-4")},m(w,v){q(w,e,v),_(e,t),_(t,h),_(e,g),_(e,S),_(S,f),_(f,i),_(S,n),_(S,u),_(u,b),m||(y=[re(f,"click",function(){Mt(r[6])&&r[6].apply(this,arguments)}),re(u,"click",function(){Mt(r[5])&&r[5].apply(this,arguments)})],m=!0)},p(w,v){r=w,v&4&&ue(h,r[2]),v&16&&ue(i,r[4]),v&8&&ue(b,r[3]),v&128&&d!==(d="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&o(u,"class",d)},d(w){w&&V(e),m=!1,Oe(y)}}}function xn(r){let e,t,h;function g(f){r[8](f)}let S={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[Cn]},$$scope:{ctx:r}};return r[0]!==void 0&&(S.isOpen=r[0]),e=new ur({props:S}),rt.push(()=>_t(e,"isOpen",g)),{c(){ze(e.$$.fragment)},m(f,i){Fe(e,f,i),h=!0},p(f,[i]){const n={};i&64&&(n.onClose=f[6]),i&2&&(n.title=f[1]),i&764&&(n.$$scope={dirty:i,ctx:f}),!t&&i&1&&(t=!0,n.isOpen=f[0],ft(()=>t=!1)),e.$set(n)},i(f){h||(Le(e.$$.fragment,f),h=!0)},o(f){Re(e.$$.fragment,f),h=!1},d(f){We(e,f)}}}function En(r,e,t){let{isOpen:h=!1}=e,{title:g=""}=e,{message:S=""}=e,{confirmText:f="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:n=()=>{}}=e,{onCancel:u=()=>{}}=e,{type:b="default"}=e;function d(m){h=m,t(0,h)}return r.$$set=m=>{"isOpen"in m&&t(0,h=m.isOpen),"title"in m&&t(1,g=m.title),"message"in m&&t(2,S=m.message),"confirmText"in m&&t(3,f=m.confirmText),"cancelText"in m&&t(4,i=m.cancelText),"onConfirm"in m&&t(5,n=m.onConfirm),"onCancel"in m&&t(6,u=m.onCancel),"type"in m&&t(7,b=m.type)},[h,g,S,f,i,n,u,b,d]}class Sr extends nt{constructor(e){super(),st(this,e,En,xn,it,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function Ln(r){window.runtime.LogPrint(r)}function Dn(r){window.runtime.LogTrace(r)}function Mn(r){window.runtime.LogDebug(r)}function Tn(r){window.runtime.LogInfo(r)}function Bn(r){window.runtime.LogWarning(r)}function An(r){window.runtime.LogError(r)}function Rn(r){window.runtime.LogFatal(r)}function xr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function hr(r,e){return xr(r,e,-1)}function On(r,...e){return window.runtime.EventsOff(r,...e)}function Pn(){return window.runtime.EventsOffAll()}function Hn(r,e){return xr(r,e,1)}function In(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function Fn(){window.runtime.WindowReload()}function Wn(){window.runtime.WindowReloadApp()}function zn(r){window.runtime.WindowSetAlwaysOnTop(r)}function jn(){window.runtime.WindowSetSystemDefaultTheme()}function Un(){window.runtime.WindowSetLightTheme()}function Nn(){window.runtime.WindowSetDarkTheme()}function Kn(){window.runtime.WindowCenter()}function Vn(r){window.runtime.WindowSetTitle(r)}function qn(){window.runtime.WindowFullscreen()}function Gn(){window.runtime.WindowUnfullscreen()}function Jn(){return window.runtime.WindowIsFullscreen()}function Xn(){return window.runtime.WindowGetSize()}function Yn(r,e){window.runtime.WindowSetSize(r,e)}function Zn(r,e){window.runtime.WindowSetMaxSize(r,e)}function Qn(r,e){window.runtime.WindowSetMinSize(r,e)}function $n(r,e){window.runtime.WindowSetPosition(r,e)}function eo(){return window.runtime.WindowGetPosition()}function to(){window.runtime.WindowHide()}function ro(){window.runtime.WindowShow()}function io(){window.runtime.WindowMaximise()}function so(){window.runtime.WindowToggleMaximise()}function no(){window.runtime.WindowUnmaximise()}function oo(){return window.runtime.WindowIsMaximised()}function lo(){window.runtime.WindowMinimise()}function ao(){window.runtime.WindowUnminimise()}function co(r,e,t,h){window.runtime.WindowSetBackgroundColour(r,e,t,h)}function ho(){return window.runtime.ScreenGetAll()}function uo(){return window.runtime.WindowIsMinimised()}function fo(){return window.runtime.WindowIsNormal()}function _o(r){window.runtime.BrowserOpenURL(r)}function po(){return window.runtime.Environment()}function go(){window.runtime.Quit()}function mo(){window.runtime.Hide()}function vo(){window.runtime.Show()}function bo(){return window.runtime.ClipboardGetText()}function yo(r){return window.runtime.ClipboardSetText(r)}function wo(r,e){return window.runtime.OnFileDrop(r,e)}function So(){return window.runtime.OnFileDropOff()}function ko(){return window.runtime.CanResolveFilePaths()}function Co(r){return window.runtime.ResolveFilePaths(r)}const ws=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:_o,CanResolveFilePaths:ko,ClipboardGetText:bo,ClipboardSetText:yo,Environment:po,EventsEmit:In,EventsOff:On,EventsOffAll:Pn,EventsOn:hr,EventsOnMultiple:xr,EventsOnce:Hn,Hide:mo,LogDebug:Mn,LogError:An,LogFatal:Rn,LogInfo:Tn,LogPrint:Ln,LogTrace:Dn,LogWarning:Bn,OnFileDrop:wo,OnFileDropOff:So,Quit:go,ResolveFilePaths:Co,ScreenGetAll:ho,Show:vo,WindowCenter:Kn,WindowFullscreen:qn,WindowGetPosition:eo,WindowGetSize:Xn,WindowHide:to,WindowIsFullscreen:Jn,WindowIsMaximised:oo,WindowIsMinimised:uo,WindowIsNormal:fo,WindowMaximise:io,WindowMinimise:lo,WindowReload:Fn,WindowReloadApp:Wn,WindowSetAlwaysOnTop:zn,WindowSetBackgroundColour:co,WindowSetDarkTheme:Nn,WindowSetLightTheme:Un,WindowSetMaxSize:Zn,WindowSetMinSize:Qn,WindowSetPosition:$n,WindowSetSize:Yn,WindowSetSystemDefaultTheme:jn,WindowSetTitle:Vn,WindowShow:ro,WindowToggleMaximise:so,WindowUnfullscreen:Gn,WindowUnmaximise:no,WindowUnminimise:ao},Symbol.toStringTag,{value:"Module"})),{Map:Ss}=cs;function ei(r,e,t){const h=r.slice();return h[41]=e[t],h[42]=e,h[43]=t,h}function ti(r,e,t){const h=r.slice();return h[41]=e[t],h}function xo(r){let e=[],t=new Ss,h,g=Ke(r[1]);const S=f=>f[41].sessionId;for(let f=0;f<g.length;f+=1){let i=ti(r,g,f),n=S(i);t.set(n,e[f]=ri(n,i))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();h=pt()},m(f,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(f,i);q(f,h,i)},p(f,i){i[0]&29666&&(g=Ke(f[1]),e=Pt(e,i,S,1,f,g,t,h.parentNode,qt,ri,h,ti))},d(f){f&&V(h);for(let i=0;i<e.length;i+=1)e[i].d(f)}}}function Eo(r){let e;return{c(){e=D("div"),e.textContent="没有活动连接",o(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function Lo(r){let e,t=(r[41].tabName||r[41].connection.name)+"",h;return{c(){e=D("span"),h=$(t),o(e,"class","text-sm font-medium truncate flex-1")},m(g,S){q(g,e,S),_(e,h)},p(g,S){S[0]&2&&t!==(t=(g[41].tabName||g[41].connection.name)+"")&&ue(h,t)},d(g){g&&V(e)}}}function Do(r){let e,t,h;return{c(){e=D("input"),o(e,"type","text"),o(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),o(e,"focus","")},m(g,S){q(g,e,S),ve(e,r[6]),t||(h=[re(e,"input",r[24]),re(e,"blur",r[13]),re(e,"keydown",r[14])],t=!0)},p(g,S){S[0]&64&&e.value!==g[6]&&ve(e,g[6])},d(g){g&&V(e),t=!1,Oe(h)}}}function ri(r,e){let t,h,g,S,f,i,n,u,b,d;function m(a,p){return a[5]===a[41].sessionId?Do:Lo}let y=m(e),w=y(e);function v(...a){return e[25](e[41],...a)}function s(){return e[26](e[41])}function c(){return e[27](e[41])}function l(...a){return e[28](e[41],...a)}return{key:r,first:null,c(){t=D("div"),h=D("div"),S=F(),w.c(),f=F(),i=D("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',n=F(),o(h,"class",g=Fr(`w-2 h-2 rounded-full flex-shrink-0 ${e[41].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),o(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),o(t,"class",u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[41].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),o(t,"role","button"),o(t,"tabindex","0"),this.first=t},m(a,p){q(a,t,p),_(t,h),_(t,S),w.m(t,null),_(t,f),_(t,i),_(t,n),b||(d=[re(i,"click",v),re(t,"click",s),re(t,"dblclick",c),re(t,"keydown",l)],b=!0)},p(a,p){e=a,p[0]&2&&g!==(g=Fr(`w-2 h-2 rounded-full flex-shrink-0 ${e[41].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&o(h,"class",g),y===(y=m(e))&&w?w.p(e,p):(w.d(1),w=y(e),w&&(w.c(),w.m(t,f))),p[0]&130&&u!==(u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[41].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&o(t,"class",u)},d(a){a&&V(t),w.d(),b=!1,Oe(d)}}}function Mo(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',o(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,h){q(t,e,h)},p:we,i:we,o:we,d(t){t&&V(e)}}}function To(r){let e,t=[],h=new Ss,g,S=Ke(r[1]);const f=i=>i[41].sessionId;for(let i=0;i<S.length;i+=1){let n=ei(r,S,i),u=f(n);h.set(u,t[i]=ii(u,n))}return{c(){e=D("div");for(let i=0;i<t.length;i+=1)t[i].c();o(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,n){q(i,e,n);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);g=!0},p(i,n){n[0]&1835139&&(S=Ke(i[1]),gt(),t=Pt(t,n,f,1,i,S,h,e,qs,ii,null,ei),mt())},i(i){if(!g){for(let n=0;n<S.length;n+=1)Le(t[n]);g=!0}},o(i){for(let n=0;n<t.length;n+=1)Re(t[n]);g=!1},d(i){i&&V(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Bo(r){let e=r[41].connection.username+"",t,h,g=r[41].connection.host+"",S,f,i=r[41].connection.port+"",n;return{c(){t=$(e),h=$("@"),S=$(g),f=$(":"),n=$(i)},m(u,b){q(u,t,b),q(u,h,b),q(u,S,b),q(u,f,b),q(u,n,b)},p(u,b){b[0]&2&&e!==(e=u[41].connection.username+"")&&ue(t,e),b[0]&2&&g!==(g=u[41].connection.host+"")&&ue(S,g),b[0]&2&&i!==(i=u[41].connection.port+"")&&ue(n,i)},d(u){u&&(V(t),V(h),V(S),V(f),V(n))}}}function Ao(r){let e,t=r[41].connection.name!=="Local Shell"?` (${r[41].connection.name})`:"",h;return{c(){e=$("本地终端"),h=$(t)},m(g,S){q(g,e,S),q(g,h,S)},p(g,S){S[0]&2&&t!==(t=g[41].connection.name!=="Local Shell"?` (${g[41].connection.name})`:"")&&ue(h,t)},d(g){g&&(V(e),V(h))}}}function ii(r,e){let t,h,g,S,f,i,n,u,b=e[41],d,m,y;function w(p,C){return p[41].type==="local"?Ao:Bo}let v=w(e),s=v(e);const c=()=>e[29](u,b),l=()=>e[29](null,b);let a={sessionId:e[41].sessionId,onData:e[18],onResize:e[20],onZModemTransfer:e[19]};return u=new wn({props:a}),c(),{key:r,first:null,c(){t=D("div"),h=D("div"),g=D("div"),s.c(),S=F(),f=D("div"),f.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=F(),n=D("div"),ze(u.$$.fragment),d=F(),o(g,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),o(f,"class","flex items-center gap-1"),o(h,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),o(n,"class","flex-1 overflow-hidden"),o(t,"class",m="terminal-wrapper "+(e[7]===e[41].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(p,C){q(p,t,C),_(t,h),_(h,g),s.m(g,null),_(h,S),_(h,f),_(t,i),_(t,n),Fe(u,n,null),_(t,d),y=!0},p(p,C){e=p,v===(v=w(e))&&s?s.p(e,C):(s.d(1),s=v(e),s&&(s.c(),s.m(g,null))),b!==e[41]&&(l(),b=e[41],c());const x={};C[0]&2&&(x.sessionId=e[41].sessionId),u.$set(x),(!y||C[0]&130&&m!==(m="terminal-wrapper "+(e[7]===e[41].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&o(t,"class",m)},i(p){y||(Le(u.$$.fragment,p),y=!0)},o(p){Re(u.$$.fragment,p),y=!1},d(p){p&&V(t),s.d(),l(),We(u)}}}function si(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,x;return p=Us(r[32][0]),{c(){e=D("div"),t=D("div"),h=D("div"),h.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',g=F(),S=D("div"),f=D("label"),i=D("input"),n=F(),u=D("div"),u.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',b=F(),d=D("label"),m=D("input"),y=F(),w=D("div"),w.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',v=F(),s=D("div"),c=D("button"),c.textContent="取消",l=F(),a=D("button"),a.textContent="确定",o(h,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),o(i,"type","radio"),i.__value="powershell",ve(i,i.__value),o(i,"class","w-4 h-4 text-purple-600"),o(f,"class","flex items-center space-x-3 cursor-pointer"),o(m,"type","radio"),m.__value="cmd",ve(m,m.__value),o(m,"class","w-4 h-4 text-purple-600"),o(d,"class","flex items-center space-x-3 cursor-pointer"),o(S,"class","px-6 py-4 space-y-3"),o(c,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),o(a,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),o(s,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),o(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),o(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),p.p(i,m)},m(L,k){q(L,e,k),_(e,t),_(t,h),_(t,g),_(t,S),_(S,f),_(f,i),i.checked=i.__value===r[4],_(f,n),_(f,u),_(S,b),_(S,d),_(d,m),m.checked=m.__value===r[4],_(d,y),_(d,w),_(t,v),_(t,s),_(s,c),_(s,l),_(s,a),C||(x=[re(i,"change",r[31]),re(m,"change",r[33]),re(c,"click",r[17]),re(a,"click",r[16])],C=!0)},p(L,k){k[0]&16&&(i.checked=i.__value===L[4]),k[0]&16&&(m.checked=m.__value===L[4])},d(L){L&&V(e),p.r(),C=!1,Oe(x)}}}function Ro(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v;function s(E,B){return E[1].length===0?Eo:xo}let c=s(r),l=c(r);const a=[To,Mo],p=[];function C(E,B){return E[1].length>0?0:1}f=C(r),i=p[f]=a[f](r);function x(E){r[30](E)}let L={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[10],onCancel:r[11]};r[2]!==void 0&&(L.isOpen=r[2]),u=new Sr({props:L}),rt.push(()=>_t(u,"isOpen",x));let k=r[3]&&si(r);return{c(){e=D("div"),t=D("div"),l.c(),h=F(),g=D("button"),g.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',S=F(),i.c(),n=F(),ze(u.$$.fragment),d=F(),k&&k.c(),m=pt(),o(g,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),o(g,"title","打开本地终端"),o(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),o(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(E,B){q(E,e,B),_(e,t),l.m(t,null),_(t,h),_(t,g),_(e,S),p[f].m(e,null),q(E,n,B),Fe(u,E,B),q(E,d,B),k&&k.m(E,B),q(E,m,B),y=!0,w||(v=re(g,"click",r[15]),w=!0)},p(E,B){c===(c=s(E))&&l?l.p(E,B):(l.d(1),l=c(E),l&&(l.c(),l.m(t,h)));let O=f;f=C(E),f===O?p[f].p(E,B):(gt(),Re(p[O],1,1,()=>{p[O]=null}),mt(),i=p[f],i?i.p(E,B):(i=p[f]=a[f](E),i.c()),Le(i,1),i.m(e,null));const P={};!b&&B[0]&4&&(b=!0,P.isOpen=E[2],ft(()=>b=!1)),u.$set(P),E[3]?k?k.p(E,B):(k=si(E),k.c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null)},i(E){y||(Le(i),Le(u.$$.fragment,E),y=!0)},o(E){Re(i),Re(u.$$.fragment,E),y=!1},d(E){E&&(V(e),V(n),V(d),V(m)),l.d(),p[f].d(),We(u,E),k&&k.d(E),w=!1,v()}}}function kr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function ni(r){return btoa(kr(r))}function Oo(r,e,t){let h,g;ct(r,At,M=>t(7,h=M)),ct(r,St,M=>t(23,g=M));let S={},f=[],i=new Map,n=!1,u=null,b=!1,d="powershell";async function m(M){var ke;if(console.log("Connecting to:",M),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:K,GetPassword:H,HasPassword:J,SavePassword:Y}=window.wailsBindings;if(typeof K!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let ne="",ae="";if(M.auth_type==="key")ae=prompt(`连接到 ${M.name}
如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：`)||"",ne=M.key_path||"";else try{if(typeof J=="function"&&await J(M.id))ne=await H(M.id),console.log("Using saved password");else if(ne=prompt(`连接到 ${M.name}
请输入密码：`)||"",ne&&confirm("是否保存密码以便下次自动连接？")&&typeof Y=="function")try{await Y(M.id,ne),console.log("Password saved successfully")}catch(ce){console.error("Failed to save password:",ce)}}catch(ge){console.error("Failed to get saved password:",ge),ne=prompt(`连接到 ${M.name}
请输入密码：`)||""}if(!ne){console.log("Connection cancelled - no auth value provided");return}const ie=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",M.host,M.port,M.username,"auth_type:",M.auth_type);const fe={sessionId:ie,connection:M,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};St.update(ge=>(ge.set(ie,fe),ge)),At.set(ie),await or(),await new Promise(ge=>setTimeout(ge,50));let de=(ke=S[ie])==null?void 0:ke.getSize();if(de||(de={cols:80,rows:24},console.warn("Terminal not ready, using default size:",de)),console.log("Subscribing to events for session:",ie),Q(ie),await new Promise(ge=>setTimeout(ge,100)),!S[ie]){console.error("Terminal component not ready after delay");return}const Se=S[ie];if(!Se){console.error("Failed to get terminal reference for session:",ie);return}console.log("Terminal ready, attempting to connect...");const Ce=M.auth_type==="key"?"SSH key":"password";Se.writeln(`正在连接 ${M.username}@${M.host}:${M.port} (${Ce})...`),Se.writeln("");try{await K(ie,M.host,M.port,M.username,M.auth_type||"password",ne,ae,de.cols,de.rows),fe.connected=!0,St.update(ge=>(ge.set(ie,fe),ge)),setTimeout(()=>{Se.focus()},100)}catch(ge){console.error("Failed to connect:",ge),Se&&Se.writeln(`\r
连接失败: ${ge.message||ge}`),await y(ie)}}async function y(M){const K=i.get(M);K&&(K(),i.delete(M)),delete S[M];const{CloseSSH:H}=window.wailsBindings||{};if(typeof H=="function")try{await H(M)}catch(Y){console.error("Failed to close session:",Y)}St.update(Y=>(Y.delete(M),Y));const J=Array.from(g.keys());h===M&&(J.length>0?At.set(J[0]):At.set(null))}function w(M){g.has(M)&&(At.set(M),setTimeout(()=>{const K=S[M];if(K){K.focus();const H=K.getSize(),{ResizeSSH:J}=window.wailsBindings||{};typeof J=="function"&&J(M,H.cols,H.rows).catch(console.error)}},50))}function v(M,K){K.stopPropagation();const H=g.get(M);H&&(H.connected?(u=M,t(2,n=!0)):y(M))}function s(){u&&(y(u),u=null),t(2,n=!1)}function c(){u=null,t(2,n=!1)}function l(M,K){const H=g.get(M);H&&(H.tabName=K.trim(),St.update(J=>(J.set(M,H),J)))}let a=null,p="";function C(M){const K=g.get(M);K&&(t(5,a=M),t(6,p=K.tabName||K.connection.name))}function x(){a&&p.trim()&&l(a,p.trim()),t(5,a=null),t(6,p="")}function L(){t(5,a=null),t(6,p="")}function k(M){M.key==="Enter"?x():M.key==="Escape"&&L()}async function E(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:M,SendSSHData:K,ResizeSSH:H}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(3,b=!0);return}await B("")}async function B(M){var ae;const{ConnectLocalShell:K}=window.wailsBindings,H=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,J={sessionId:H,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};St.update(ie=>(ie.set(H,J),ie)),At.set(H),await or(),await new Promise(ie=>setTimeout(ie,50));let Y=(ae=S[H])==null?void 0:ae.getSize();if(Y||(Y={cols:80,rows:24},console.warn("Terminal not ready, using default size:",Y)),console.log("Subscribing to local events for session:",H),A(H),await new Promise(ie=>setTimeout(ie,100)),!S[H]){console.error("Terminal component not ready after delay");return}const ne=S[H];if(!ne){console.error("Failed to get terminal reference for session:",H);return}console.log("Terminal ready, starting local shell..."),ne.writeln(`正在启动本地终端${M?` (${M})`:""}...`),ne.writeln("");try{await K(H,M,Y.cols,Y.rows),J.connected=!0,St.update(ie=>(ie.set(H,J),ie)),setTimeout(()=>{ne.focus()},100)}catch(ie){console.error("Failed to start local shell:",ie),ne&&ne.writeln(`\r
启动本地终端失败: ${ie.message||ie}`),await y(H)}}function O(){t(3,b=!1),B(d)}function P(){t(3,b=!1)}function A(M){const K=`local:output:${M}`,H=hr(K,J=>{const Y=S[M];if(Y){const ne=atob(J),ae=new Uint8Array(ne.length);for(let ie=0;ie<ne.length;ie++)ae[ie]=ne.charCodeAt(ie);Y.write(ae)}});i.set(M,H)}function j(M,K){if(!g.has(M))return;const H=g.get(M),{SendSSHData:J,SendLocalShellData:Y}=window.wailsBindings||{};H&&H.type==="local"?typeof Y=="function"&&Y(M,K).catch(ne=>{console.error("Failed to send local shell data:",ne)}):typeof J=="function"&&J(M,K).catch(ne=>{console.error("Failed to send SSH data:",ne)})}function X(M,K){if(!g.has(M))return;const H=g.get(M),{SendSSHData:J,SendSSHDataBinary:Y,SendLocalShellData:ne,SendLocalShellDataBinary:ae}=window.wailsBindings||{};if(H&&H.type==="local"){if(typeof ae=="function"){const ie=ni(K);ae(M,ie).catch(fe=>{console.error("Failed to send local shell binary data:",fe)})}else if(typeof ne=="function"){const ie=kr(K);ne(M,ie).catch(fe=>{console.error("Failed to send local shell data:",fe)})}}else if(typeof Y=="function"){const ie=ni(K);Y(M,ie).catch(fe=>{console.error("Failed to send SSH binary data:",fe)})}else if(typeof J=="function"){const ie=kr(K);J(M,ie).catch(fe=>{console.error("Failed to send SSH data:",fe)})}}function ee(M,K,H){if(!g.has(M))return;const J=g.get(M),{ResizeSSH:Y,ResizeLocalShell:ne}=window.wailsBindings||{};J&&J.type==="local"?typeof ne=="function"&&ne(M,K,H).catch(ae=>{console.error("Failed to resize local terminal:",ae)}):typeof Y=="function"&&Y(M,K,H).catch(ae=>{console.error("Failed to resize SSH terminal:",ae)})}function Q(M){const K=`ssh:output:${M}`,H=hr(K,J=>{const Y=S[M];if(Y){const ne=atob(J),ae=new Uint8Array(ne.length);for(let ie=0;ie<ne.length;ie++)ae[ie]=ne.charCodeAt(ie);Y.write(ae)}});i.set(M,H)}dr(()=>{i.forEach(M=>{M()})}),Vt(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=S,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",f),await or(),h&&S[h]&&setTimeout(()=>{S[h].focus()},100)});const U=[[]];function T(){p=this.value,t(6,p)}const R=(M,K)=>v(M.sessionId,K),I=M=>w(M.sessionId),W=M=>C(M.sessionId),N=(M,K)=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),w(M.sessionId))};function G(M,K){rt[M?"unshift":"push"](()=>{S[K.sessionId]=M,t(0,S)})}function Z(M){n=M,t(2,n)}function se(){d=this.__value,t(4,d)}function z(){d=this.__value,t(4,d)}return r.$$.update=()=>{r.$$.dirty[0]&8388608&&t(1,f=g?Array.from(g.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=S)},[S,f,n,b,d,a,p,h,w,v,s,c,C,x,k,E,O,P,j,X,ee,m,Q,g,T,R,I,W,N,G,Z,se,U,z]}class Po extends nt{constructor(e){super(),st(this,e,Oo,Ro,it,{handleConnect:21,subscribeToOutput:22},null,[-1,-1])}get handleConnect(){return this.$$.ctx[21]}get subscribeToOutput(){return this.$$.ctx[22]}}function Ho(r){return window.go.main.App.AddConnection(r)}function Io(r,e){return window.go.main.App.CalculateHash(r,e)}function Er(r){return window.go.main.App.CancelTransfer(r)}function Fo(r,e){return window.go.main.App.ChangeDirectory(r,e)}function Wo(r){return window.go.main.App.CloseSSH(r)}function zo(r,e,t,h){return window.go.main.App.ConnectLocalShell(r,e,t,h)}function jo(r,e,t,h,g,S,f,i,n){return window.go.main.App.ConnectSSH(r,e,t,h,g,S,f,i,n)}function Uo(r,e){return window.go.main.App.CreateDirectory(r,e)}function No(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function Ko(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function Vo(r){return window.go.main.App.DecodeBase64(r)}function qo(r,e,t,h){return window.go.main.App.DecryptText(r,e,t,h)}function Go(r,e){return window.go.main.App.DeleteFile(r,e)}function ks(r,e){return window.go.main.App.DeleteFiles(r,e)}function Jo(r){return window.go.main.App.DeletePassword(r)}function Xo(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function Cs(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function Yo(r){return window.go.main.App.EncodeBase64(r)}function Zo(r,e,t,h){return window.go.main.App.EncryptText(r,e,t,h)}function Qo(r){return window.go.main.App.EscapeJSON(r)}function $o(r){return window.go.main.App.FormatJSON(r)}function el(){return window.go.main.App.GenerateUUIDv4()}function tl(r){return window.go.main.App.GetConnection(r)}function rl(){return window.go.main.App.GetConnections()}function il(r){return window.go.main.App.GetCurrentPath(r)}function sl(){return window.go.main.App.GetCurrentTimestamp()}function nl(){return window.go.main.App.GetCurrentTimestampMs()}function ol(r,e){return window.go.main.App.GetFileInfo(r,e)}function ll(r){return window.go.main.App.GetMonitoringData(r)}function al(r){return window.go.main.App.GetPassword(r)}function cl(){return window.go.main.App.GetSettings()}function hl(r){return window.go.main.App.GetTransferStatus(r)}function dl(r){return window.go.main.App.Greet(r)}function ul(r){return window.go.main.App.HasPassword(r)}function xs(r,e){return window.go.main.App.ListFiles(r,e)}function fl(){return window.go.main.App.ListSSHSessions()}function _l(r){return window.go.main.App.MinifyJSON(r)}function pl(r){return window.go.main.App.RemoveConnection(r)}function Es(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function gl(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function ml(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function vl(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function bl(r,e){return window.go.main.App.SavePassword(r,e)}function Ls(){return window.go.main.App.SelectDownloadDirectory()}function yl(){return window.go.main.App.SelectSSHKeyFile()}function Ds(){return window.go.main.App.SelectUploadFiles()}function wl(r,e){return window.go.main.App.SendLocalShellData(r,e)}function Sl(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function kl(r,e){return window.go.main.App.SendSSHData(r,e)}function Cl(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function xl(){return window.go.main.App.ShowAboutDialog()}function El(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function Ll(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function Dl(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function Ml(r,e,t,h,g,S){return window.go.main.App.TestConnection(r,e,t,h,g,S)}function Tl(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function Bl(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function Al(r){return window.go.main.App.UpdateConnection(r)}function Rl(r){return window.go.main.App.UpdateSettings(r)}function Ol(r,e,t){return window.go.main.App.UploadFile(r,e,t)}function Ms(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function Pl(r){return window.go.main.App.ValidateJSON(r)}const Hl=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:Ho,CalculateHash:Io,CancelTransfer:Er,ChangeDirectory:Fo,CloseSSH:Wo,ConnectLocalShell:zo,ConnectSSH:jo,CreateDirectory:Uo,DateTimeToTimestamp:No,DateTimeToTimestampMs:Ko,DecodeBase64:Vo,DecryptText:qo,DeleteFile:Go,DeleteFiles:ks,DeletePassword:Jo,DownloadFile:Xo,DownloadFiles:Cs,EncodeBase64:Yo,EncryptText:Zo,EscapeJSON:Qo,FormatJSON:$o,GenerateUUIDv4:el,GetConnection:tl,GetConnections:rl,GetCurrentPath:il,GetCurrentTimestamp:sl,GetCurrentTimestampMs:nl,GetFileInfo:ol,GetMonitoringData:ll,GetPassword:al,GetSettings:cl,GetTransferStatus:hl,Greet:dl,HasPassword:ul,ListFiles:xs,ListSSHSessions:fl,MinifyJSON:_l,RemoveConnection:pl,RenameFile:Es,ResizeLocalShell:gl,ResizeSSH:ml,SaveBinaryFile:vl,SavePassword:bl,SelectDownloadDirectory:Ls,SelectSSHKeyFile:yl,SelectUploadFiles:Ds,SendLocalShellData:wl,SendLocalShellDataBinary:Sl,SendSSHData:kl,SendSSHDataBinary:Cl,ShowAboutDialog:xl,ShowErrorDialog:El,ShowMessageDialog:Ll,ShowQuestionDialog:Dl,TestConnection:Ml,TimestampToDateTime:Tl,TimestampToDateTimeMs:Bl,UpdateConnection:Al,UpdateSettings:Rl,UploadFile:Ol,UploadFiles:Ms,ValidateJSON:Pl},Symbol.toStringTag,{value:"Module"})),Il={transfers:[],maxHistory:50,isPanelOpen:!1,activeTab:"active"},{subscribe:Fl,set:Wl,update:Et}=Ht(Il),fr={subscribe:Fl,set:Wl,addTransfer:r=>Et(e=>{const t=e.transfers.filter(g=>g.status!=="running");let h=e.transfers;if(t.length>=e.maxHistory){const g=t.length-e.maxHistory+1,S=t.slice(0,g).map(f=>f.id);h=e.transfers.filter(f=>!S.includes(f.id))}return{...e,transfers:[r,...h]}}),updateTransfer:(r,e)=>Et(t=>({...t,transfers:t.transfers.map(h=>h.id===r?{...h,...e}:h)})),cancelTransfer:r=>Et(e=>({...e,transfers:e.transfers.map(t=>t.id===r?{...t,status:"cancelled"}:t)})),removeTransfer:r=>Et(e=>({...e,transfers:e.transfers.filter(t=>t.id!==r)})),clearCompleted:()=>Et(r=>({...r,transfers:r.transfers.filter(e=>e.status==="running")})),clearAll:()=>Et(r=>({...r,transfers:[]})),togglePanel:()=>Et(r=>({...r,isPanelOpen:!r.isPanelOpen})),setPanelOpen:r=>Et(e=>({...e,isPanelOpen:r})),setActiveTab:r=>Et(e=>({...e,activeTab:r}))};function Dt(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function oi(r){return r?`${Dt(r)}/s`:"0 B/s"}function sr(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}const zl=Ct(fr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status==="running")),jl=Ct(fr,r=>((r==null?void 0:r.transfers)||[]).filter(e=>e.status!=="running"));Ct(fr,r=>{const e=((r==null?void 0:r.transfers)||[]).filter(S=>S.status==="running");if(e.length===0)return 0;let t=0,h=0;return e.forEach(S=>{const f=S.totalBytes||0,i=S.bytesSent||0;t+=f,h+=i}),t>0?h/t*100:e.reduce((S,f)=>f.totalBytes?S+f.bytesSent/f.totalBytes*100:S+(f.percentage||0),0)/e.length});const ut=fr;function li(r){let e,t;return{c(){e=D("p"),t=$(r[2]),o(e,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed")},m(h,g){q(h,e,g),_(e,t)},p(h,g){g&4&&ue(t,h[2])},d(h){h&&V(e)}}}function Ul(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w=r[2]&&li(r);return{c(){e=D("div"),w&&w.c(),t=F(),h=D("input"),g=F(),S=D("div"),f=D("button"),i=$(r[5]),n=F(),u=D("button"),b=$(r[4]),o(h,"type","text"),o(h,"placeholder",r[3]),o(h,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),o(f,"type","button"),o(f,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),o(u,"type","button"),u.disabled=d=!r[8].trim(),o(u,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),o(S,"class","flex gap-2 pt-2"),o(e,"class","space-y-4")},m(v,s){q(v,e,s),w&&w.m(e,null),_(e,t),_(e,h),r[13](h),ve(h,r[8]),_(e,g),_(e,S),_(S,f),_(f,i),_(S,n),_(S,u),_(u,b),m||(y=[re(h,"input",r[14]),re(h,"keydown",r[10]),re(f,"click",function(){Mt(r[6])&&r[6].apply(this,arguments)}),re(u,"click",r[9])],m=!0)},p(v,s){r=v,r[2]?w?w.p(r,s):(w=li(r),w.c(),w.m(e,t)):w&&(w.d(1),w=null),s&8&&o(h,"placeholder",r[3]),s&256&&h.value!==r[8]&&ve(h,r[8]),s&32&&ue(i,r[5]),s&16&&ue(b,r[4]),s&256&&d!==(d=!r[8].trim())&&(u.disabled=d)},d(v){v&&V(e),w&&w.d(),r[13](null),m=!1,Oe(y)}}}function Nl(r){let e,t,h;function g(f){r[15](f)}let S={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[Ul]},$$scope:{ctx:r}};return r[0]!==void 0&&(S.isOpen=r[0]),e=new ur({props:S}),rt.push(()=>_t(e,"isOpen",g)),{c(){ze(e.$$.fragment)},m(f,i){Fe(e,f,i),h=!0},p(f,[i]){const n={};i&64&&(n.onClose=f[6]),i&2&&(n.title=f[1]),i&66044&&(n.$$scope={dirty:i,ctx:f}),!t&&i&1&&(t=!0,n.isOpen=f[0],ft(()=>t=!1)),e.$set(n)},i(f){h||(Le(e.$$.fragment,f),h=!0)},o(f){Re(e.$$.fragment,f),h=!1},d(f){We(e,f)}}}function Kl(r,e,t){let{isOpen:h=!1}=e,{title:g=""}=e,{message:S=""}=e,{defaultValue:f=""}=e,{placeholder:i=""}=e,{confirmText:n="确定"}=e,{cancelText:u="取消"}=e,{onConfirm:b=()=>{}}=e,{onCancel:d=()=>{}}=e,m="",y;function w(){m.trim()&&b(m.trim())}function v(a){a.key==="Enter"&&w()}function s(a){rt[a?"unshift":"push"](()=>{y=a,t(7,y)})}function c(){m=this.value,t(8,m),t(0,h),t(11,f)}function l(a){h=a,t(0,h)}return r.$$set=a=>{"isOpen"in a&&t(0,h=a.isOpen),"title"in a&&t(1,g=a.title),"message"in a&&t(2,S=a.message),"defaultValue"in a&&t(11,f=a.defaultValue),"placeholder"in a&&t(3,i=a.placeholder),"confirmText"in a&&t(4,n=a.confirmText),"cancelText"in a&&t(5,u=a.cancelText),"onConfirm"in a&&t(12,b=a.onConfirm),"onCancel"in a&&t(6,d=a.onCancel)},r.$$.update=()=>{r.$$.dirty&2049&&h&&t(8,m=f),r.$$.dirty&129&&h&&y&&setTimeout(()=>{y==null||y.focus(),y==null||y.select()},0)},[h,g,S,i,n,u,d,y,m,w,v,f,b,s,c,l]}class Vl extends nt{constructor(e){super(),st(this,e,Kl,Nl,it,{isOpen:0,title:1,message:2,defaultValue:11,placeholder:3,confirmText:4,cancelText:5,onConfirm:12,onCancel:6})}}const{Map:ql}=cs;function ai(r,e,t){const h=r.slice();return h[75]=e[t],h[77]=t,h}function Gl(r){let e,t,h;function g(i,n){return i[0]==="/"?Yl:Xl}let S=g(r),f=S(r);return{c(){e=D("span"),f.c(),o(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),o(e,"title","点击编辑路径")},m(i,n){q(i,e,n),f.m(e,null),t||(h=re(e,"click",r[37]),t=!0)},p(i,n){S===(S=g(i))&&f?f.p(i,n):(f.d(1),f=S(i),f&&(f.c(),f.m(e,null)))},d(i){i&&V(e),f.d(),t=!1,h()}}}function Jl(r){let e,t,h,g,S;return{c(){e=D("span"),e.textContent="/",t=F(),h=D("input"),o(e,"class","text-gray-400 dark:text-gray-500"),o(h,"type","text"),o(h,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(f,i){q(f,e,i),q(f,t,i),q(f,h,i),ve(h,r[8]),g||(S=[re(h,"input",r[49]),re(h,"keydown",r[50]),re(h,"blur",r[38]),as(focus.call(null,h))],g=!0)},p(f,i){i[0]&256&&h.value!==f[8]&&ve(h,f[8])},d(f){f&&(V(e),V(t),V(h)),g=!1,Oe(S)}}}function Xl(r){let e=r[0].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=$(e)},m(h,g){q(h,t,g)},p(h,g){g[0]&1&&e!==(e=h[0].split("/").filter(Boolean).join(" / ")+"")&&ue(t,e)},d(h){h&&V(t)}}}function Yl(r){let e;return{c(){e=$("/")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function ci(r){let e,t,h,g,S,f,i,n;return{c(){e=D("div"),t=D("input"),h=F(),g=D("button"),g.textContent="跳转",S=F(),f=D("button"),f.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o(t,"type","text"),o(t,"placeholder","输入路径,如：/var/www/html"),o(t,"class","flex-1 px-3 py-2 text-xs bg-white dark:bg-gray-800 border border-purple-200 dark:border-purple-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"),o(g,"class","px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-lg transition-colors font-medium"),o(f,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),o(f,"title","取消"),o(e,"class","mt-2 flex items-center gap-2")},m(u,b){q(u,e,b),_(e,t),ve(t,r[10]),_(e,h),_(e,g),_(e,S),_(e,f),i||(n=[re(t,"input",r[52]),re(t,"keydown",r[53]),as(focus.call(null,t)),re(g,"click",r[40]),re(f,"click",r[54])],i=!0)},p(u,b){b[0]&1024&&t.value!==u[10]&&ve(t,u[10])},d(u){u&&V(e),i=!1,Oe(n)}}}function Zl(r){let e=[],t=new ql,h,g=Ke(r[17]);const S=f=>f[75].path;for(let f=0;f<g.length;f+=1){let i=ai(r,g,f),n=S(i);t.set(n,e[f]=hi(n,i))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();h=pt()},m(f,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(f,i);q(f,h,i)},p(f,i){i[0]&63045668|i[1]&16&&(g=Ke(f[17]),e=Pt(e,i,S,1,f,g,t,h.parentNode,qt,hi,h,ai))},d(f){f&&V(h);for(let i=0;i<e.length;i+=1)e[i].d(f)}}}function Ql(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',o(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function $l(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',o(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function ea(r){let e,t,h,g,S,f,i,n,u,b;return{c(){e=D("div"),t=le("svg"),h=le("path"),g=F(),S=D("span"),f=$(r[4]),i=F(),n=D("button"),n.textContent="重试",o(h,"stroke-linecap","round"),o(h,"stroke-linejoin","round"),o(h,"stroke-width","2"),o(h,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),o(t,"class","w-6 h-6"),o(t,"fill","none"),o(t,"stroke","currentColor"),o(t,"viewBox","0 0 24 24"),o(S,"class","text-center px-4"),o(n,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),o(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(d,m){q(d,e,m),_(e,t),_(t,h),_(e,g),_(e,S),_(S,f),_(e,i),_(e,n),u||(b=re(n,"click",r[20]),u=!0)},p(d,m){m[0]&16&&ue(f,d[4])},d(d){d&&V(e),u=!1,b()}}}function ta(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',o(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function ra(r){let e,t,h,g,S,f,i,n=r[75].name+"",u,b,d,m,y=Dt(r[75].size)+"",w,v,s,c,l,a=r[75].modified+"",p,C,x,L=r[75].mode+"",k;return{c(){e=D("div"),t=F(),h=le("svg"),g=le("path"),S=F(),f=D("div"),i=D("div"),u=$(n),b=F(),d=D("div"),m=D("span"),w=$(y),v=F(),s=D("span"),s.textContent="•",c=F(),l=D("span"),p=$(a),C=F(),x=D("span"),k=$(L),o(e,"class","w-3"),o(g,"stroke-linecap","round"),o(g,"stroke-linejoin","round"),o(g,"stroke-width","2"),o(g,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),o(h,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),o(h,"fill","none"),o(h,"stroke","currentColor"),o(h,"viewBox","0 0 24 24"),o(i,"class","text-gray-900 dark:text-white font-medium truncate"),o(d,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),o(f,"class","flex-1 min-w-0"),o(x,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(E,B){q(E,e,B),q(E,t,B),q(E,h,B),_(h,g),q(E,S,B),q(E,f,B),_(f,i),_(i,u),_(f,b),_(f,d),_(d,m),_(m,w),_(d,v),_(d,s),_(d,c),_(d,l),_(l,p),q(E,C,B),q(E,x,B),_(x,k)},p(E,B){B[0]&131072&&n!==(n=E[75].name+"")&&ue(u,n),B[0]&131072&&y!==(y=Dt(E[75].size)+"")&&ue(w,y),B[0]&131072&&a!==(a=E[75].modified+"")&&ue(p,a),B[0]&131072&&L!==(L=E[75].mode+"")&&ue(k,L)},d(E){E&&(V(e),V(t),V(h),V(S),V(f),V(C),V(x))}}}function ia(r){let e,t,h,g,S,f,i,n=r[75].name+"",u;function b(y,w){return w[0]&131076&&(e=null),e==null&&(e=!!y[2].has(y[75].path)),e?oa:na}let d=b(r,[-1,-1,-1]),m=d(r);return{c(){m.c(),t=F(),h=le("svg"),g=le("path"),S=F(),f=D("div"),i=D("div"),u=$(n),o(g,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),o(h,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),o(h,"fill","currentColor"),o(h,"viewBox","0 0 24 24"),o(i,"class","text-gray-900 dark:text-white font-medium truncate"),o(f,"class","flex-1 min-w-0")},m(y,w){m.m(y,w),q(y,t,w),q(y,h,w),_(h,g),q(y,S,w),q(y,f,w),_(f,i),_(i,u)},p(y,w){d!==(d=b(y,w))&&(m.d(1),m=d(y),m&&(m.c(),m.m(t.parentNode,t))),w[0]&131072&&n!==(n=y[75].name+"")&&ue(u,n)},d(y){y&&(V(t),V(h),V(S),V(f)),m.d(y)}}}function sa(r){let e,t,h,g,S,f=r[75].name+"",i,n,u;return{c(){e=le("svg"),t=le("path"),h=F(),g=D("div"),S=D("div"),i=$(f),n=F(),u=D("div"),u.textContent="返回上一层",o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),o(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24"),o(S,"class","text-gray-600 dark:text-gray-300"),o(u,"class","text-gray-400 dark:text-gray-500 text-[10px]"),o(g,"class","flex-1 min-w-0")},m(b,d){q(b,e,d),_(e,t),q(b,h,d),q(b,g,d),_(g,S),_(S,i),_(g,n),_(g,u)},p(b,d){d[0]&131072&&f!==(f=b[75].name+"")&&ue(i,f)},d(b){b&&(V(e),V(h),V(g))}}}function na(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M9 5l7 7-7 7"),o(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function oa(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M19 9l-7 7-7-7"),o(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function hi(r,e){let t,h,g,S,f;function i(y,w){return y[75].is_parent?sa:y[75].is_dir?ia:ra}let n=i(e),u=n(e);function b(){return e[55](e[75])}function d(){return e[56](e[75])}function m(...y){return e[57](e[75],...y)}return{key:r,first:null,c(){t=D("div"),u.c(),h=F(),o(t,"class",g="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[75].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[5].has(e[75].path)&&!e[75].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(y,w){q(y,t,w),u.m(t,null),_(t,h),S||(f=[re(t,"click",b),re(t,"dblclick",d),re(t,"contextmenu",m)],S=!0)},p(y,w){e=y,n===(n=i(e))&&u?u.p(e,w):(u.d(1),u=n(e),u&&(u.c(),u.m(t,h))),w[0]&131104&&g!==(g="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[75].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[5].has(e[75].path)&&!e[75].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&o(t,"class",g)},d(y){y&&V(t),u.d(),S=!1,Oe(f)}}}function di(r){let e,t,h,g,S,f,i,n,u,b,d;return{c(){var m;e=D("div"),t=D("button"),h=$("下载"),S=F(),f=D("button"),f.textContent="重命名",i=F(),n=D("button"),n.textContent="删除",o(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=g=(m=r[6].file)==null?void 0:m.is_dir,o(f,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),o(n,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),o(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),o(e,"style",u=`left: ${r[6].x}px; top: ${r[6].y}px;`)},m(m,y){q(m,e,y),_(e,t),_(t,h),_(e,S),_(e,f),_(e,i),_(e,n),b||(d=[re(t,"click",r[31]),re(f,"click",r[32]),re(n,"click",r[30])],b=!0)},p(m,y){var w;y[0]&64&&g!==(g=(w=m[6].file)==null?void 0:w.is_dir)&&(t.disabled=g),y[0]&64&&u!==(u=`left: ${m[6].x}px; top: ${m[6].y}px;`)&&o(e,"style",u)},d(m){m&&V(e),b=!1,Oe(d)}}}function la(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,x,L,k,E,B,O,P,A,j,X,ee,Q,U,T,R,I,W,N,G,Z,se,z;function M(ce,te){return ce[7]?Jl:Gl}let K=M(r),H=K(r),J=r[9]&&ci(r);function Y(ce,te){return ce[3]?ta:ce[4]?ea:ce[17].length===0?$l:ce[1]?Ql:Zl}let ne=Y(r),ae=ne(r),ie=r[6].open&&di(r);function fe(ce){r[58](ce)}let de={title:"删除文件",message:r[12],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[28],onCancel:r[29]};r[11]!==void 0&&(de.isOpen=r[11]),Q=new Sr({props:de}),rt.push(()=>_t(Q,"isOpen",fe));function Se(ce){r[59](ce)}let Ce={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[18],onCancel:r[19]};r[13]!==void 0&&(Ce.isOpen=r[13]),R=new Sr({props:Ce}),rt.push(()=>_t(R,"isOpen",Se));function ke(ce){r[60](ce)}let ge={title:r[15],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[16],confirmText:"重命名",cancelText:"取消",onConfirm:r[33],onCancel:r[34]};return r[14]!==void 0&&(ge.isOpen=r[14]),N=new Vl({props:ge}),rt.push(()=>_t(N,"isOpen",ke)),{c(){e=D("div"),t=D("div"),h=D("div"),g=D("h3"),g.textContent="文件管理",S=F(),f=D("div"),i=D("button"),n=le("svg"),u=le("path"),b=F(),d=D("button"),m=le("svg"),y=le("path"),w=F(),v=D("button"),v.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',s=F(),c=D("button"),l=le("svg"),a=le("path"),C=F(),x=D("div"),L=D("div"),k=D("button"),k.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',E=F(),H.c(),B=F(),O=D("button"),O.innerHTML='<svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',P=F(),J&&J.c(),A=F(),j=D("div"),ae.c(),X=F(),ie&&ie.c(),ee=F(),ze(Q.$$.fragment),T=F(),ze(R.$$.fragment),W=F(),ze(N.$$.fragment),o(g,"class","text-sm font-semibold text-gray-900 dark:text-white"),o(u,"stroke-linecap","round"),o(u,"stroke-linejoin","round"),o(u,"stroke-width","2"),o(u,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),o(n,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),o(n,"fill","none"),o(n,"stroke","currentColor"),o(n,"viewBox","0 0 24 24"),i.disabled=r[1],o(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),o(i,"title","刷新"),o(y,"stroke-linecap","round"),o(y,"stroke-linejoin","round"),o(y,"stroke-width","2"),o(y,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),o(m,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),o(m,"fill","none"),o(m,"stroke","currentColor"),o(m,"viewBox","0 0 24 24"),d.disabled=r[1],o(d,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),o(d,"title","上传到服务器"),o(v,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),o(v,"title","下载到本地"),o(a,"stroke-linecap","round"),o(a,"stroke-linejoin","round"),o(a,"stroke-width","2"),o(a,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),o(l,"class","w-4 h-4 text-red-500 dark:text-red-400"),o(l,"fill","none"),o(l,"stroke","currentColor"),o(l,"viewBox","0 0 24 24"),c.disabled=p=r[1]||r[5].size===0,o(c,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),o(c,"title","删除选中"),o(f,"class","flex items-center gap-1"),o(h,"class","flex items-center justify-between mb-2"),o(k,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),o(k,"title","根目录"),o(L,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),o(O,"class","p-2 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors"),o(O,"title","跳转到指定目录"),o(x,"class","flex items-center gap-2"),o(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),o(j,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),o(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(ce,te){q(ce,e,te),_(e,t),_(t,h),_(h,g),_(h,S),_(h,f),_(f,i),_(i,n),_(n,u),_(f,b),_(f,d),_(d,m),_(m,y),_(f,w),_(f,v),_(f,s),_(f,c),_(c,l),_(l,a),_(t,C),_(t,x),_(x,L),_(L,k),_(L,E),H.m(L,null),_(x,B),_(x,O),_(t,P),J&&J.m(t,null),_(e,A),_(e,j),ae.m(j,null),_(e,X),ie&&ie.m(e,null),_(e,ee),Fe(Q,e,null),_(e,T),Fe(R,e,null),_(e,W),Fe(N,e,null),Z=!0,se||(z=[re(i,"click",r[20]),re(d,"click",r[21]),re(c,"click",r[27]),re(k,"click",r[48]),re(O,"click",r[51]),re(j,"click",r[26])],se=!0)},p(ce,te){(!Z||te[0]&2)&&(i.disabled=ce[1]),(!Z||te[0]&2)&&(d.disabled=ce[1]),(!Z||te[0]&34&&p!==(p=ce[1]||ce[5].size===0))&&(c.disabled=p),K===(K=M(ce))&&H?H.p(ce,te):(H.d(1),H=K(ce),H&&(H.c(),H.m(L,null))),ce[9]?J?J.p(ce,te):(J=ci(ce),J.c(),J.m(t,null)):J&&(J.d(1),J=null),ne===(ne=Y(ce))&&ae?ae.p(ce,te):(ae.d(1),ae=ne(ce),ae&&(ae.c(),ae.m(j,null))),ce[6].open?ie?ie.p(ce,te):(ie=di(ce),ie.c(),ie.m(e,ee)):ie&&(ie.d(1),ie=null);const ye={};te[0]&4096&&(ye.message=ce[12]),!U&&te[0]&2048&&(U=!0,ye.isOpen=ce[11],ft(()=>U=!1)),Q.$set(ye);const pe={};!I&&te[0]&8192&&(I=!0,pe.isOpen=ce[13],ft(()=>I=!1)),R.$set(pe);const xe={};te[0]&32768&&(xe.title=ce[15]),te[0]&65536&&(xe.defaultValue=ce[16]),!G&&te[0]&16384&&(G=!0,xe.isOpen=ce[14],ft(()=>G=!1)),N.$set(xe)},i(ce){Z||(Le(Q.$$.fragment,ce),Le(R.$$.fragment,ce),Le(N.$$.fragment,ce),Z=!0)},o(ce){Re(Q.$$.fragment,ce),Re(R.$$.fragment,ce),Re(N.$$.fragment,ce),Z=!1},d(ce){ce&&V(e),H.d(),J&&J.d(),ae.d(),ie&&ie.d(),We(Q),We(R),We(N),se=!1,Oe(z)}}}function aa(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function ca(r,e,t){let h,g,S,f,i,n,u,b,d;ct(r,St,oe=>t(46,u=oe)),ct(r,At,oe=>t(47,b=oe)),ct(r,ut,oe=>t(65,d=oe));let m=new Map,y=new Set([]),w=[],v=!1,s=null,c=new Set,l=[],a={open:!1,x:0,y:0,file:null},p=!1,C="",x=!1,L="",k=!1,E="",B=[],O=!1,P=null,A=!1,j="",X="",ee=null,Q="/";function U(oe){return oe&&m.get(oe)||"/"}function T(oe,_e){if(!oe)return;const Te=new Map(m);Te.set(oe,_e),t(41,m=Te)}async function R(oe){if(!(!b||!g)&&!S){t(3,v=!0),t(4,s=null);try{const _e=await xs(b,oe);t(42,w=_e||[]),T(b,oe),t(0,Q=oe)}catch(_e){console.error("Failed to load directory:",_e),t(4,s=_e.message||"加载目录失败")}finally{t(3,v=!1)}}}async function I(){t(13,O=!1);const oe=P;if(P=null,oe)try{await Er(oe.id)}catch(_e){console.error("Cancel transfer failed:",_e)}ut.cancelTransfer(oe.id)}function W(){t(13,O=!1),P=null}async function N(){await R(Q)}async function G(){if(!(!b||!g||S))try{const oe=await Ds();if(!oe||oe.length===0)return;(await Ms(b,oe,Q)).forEach(Te=>Ce(Te,"upload")),setTimeout(()=>R(Q),2e3)}catch(oe){console.error("Upload failed:",oe),t(4,s=oe.message||"上传失败")}}async function Z(oe){if(!(!b||!g||S||oe.is_dir))try{const _e=await Ls();if(!_e)return;(await Cs(b,[oe.path],_e)).forEach(ot=>Ce(ot,"download"))}catch(_e){console.error("Download failed:",_e),t(4,s=_e.message||"下载失败")}}function se(oe){!oe||oe.is_parent||t(5,c=new Set([oe.path]))}function z(oe){!oe||oe.is_parent||se(oe)}function M(oe){!oe||!oe.is_parent||ke(oe.path)}function K(oe,_e){_e!=null&&_e.is_parent||(oe.preventDefault(),se(_e),t(6,a={open:!0,x:oe.clientX,y:oe.clientY,file:_e}))}function H(){a.open&&t(6,a={...a,open:!1})}async function J(){if(!b||!g||S||c.size===0)return;B=Array.from(c);const oe=B.length;t(12,E=oe===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${oe} 个文件/文件夹吗？`),t(11,k=!0)}async function Y(){t(11,k=!1);try{await ks(b,B),t(5,c=new Set),B=[],await R(Q)}catch(oe){console.error("Delete failed:",oe),t(4,s=oe.message||"删除失败")}}function ne(){t(11,k=!1),B=[]}async function ae(){const oe=a.file;oe&&(H(),B=[oe.path],t(12,E=`确定要删除 "${oe.name}" 吗？`),t(11,k=!0))}async function ie(){const oe=a.file;H(),oe&&!oe.is_dir&&await Z(oe)}async function fe(){const oe=a.file;H(),oe&&(ee=oe,t(15,j="重命名"),t(16,X=oe.name),t(14,A=!0))}async function de(oe){t(14,A=!1);const _e=ee;if(ee=null,!(!_e||!oe||oe.trim()===_e.name))try{const ot=`${Q.endsWith("/")?Q:`${Q}/`}${oe.trim()}`;await Es(b,_e.path,ot),await R(Q)}catch(Te){console.error("Rename failed:",Te),t(4,s=Te.message||"重命名失败")}}function Se(){t(14,A=!1),ee=null}function Ce(oe,_e){const Te=`sftp:progress:${oe}`,ot=hr(Te,Ee=>{if(_e==="upload"){const Pe={id:oe,filename:Ee.filename||Ee.fileName||"unknown",bytesSent:Ee.bytes_sent??Ee.bytesSent??0,totalBytes:Ee.total_bytes??Ee.totalBytes??0,percentage:Ee.percentage??0,speed:Ee.speed??0,status:Ee.status||"running",error:Ee.error||""};d.transfers.find(Je=>Je.id===oe)?ut.updateTransfer(oe,Pe):ut.addTransfer(Pe)}});l.push(ot)}function ke(oe){R(oe)}function ge(oe){if(oe===-1)ke("/");else{const _e="/"+n.slice(0,oe+1).join("/");ke(_e)}}function ce(){t(8,C=Q),t(7,p=!0)}function te(){C.trim()&&ke(C.trim()),t(7,p=!1)}function ye(){t(7,p=!1),t(8,C="")}function pe(){L.trim()&&(ke(L.trim()),t(9,x=!1),t(10,L=""))}Vt(()=>{}),dr(()=>{l.forEach(oe=>oe())});const xe=()=>ge(-1);function Qe(){C=this.value,t(8,C)}const Ze=oe=>{oe.key==="Enter"?te():oe.key==="Escape"&&ye()},Ie=()=>t(9,x=!x);function je(){L=this.value,t(10,L)}const Ue=oe=>{oe.key==="Enter"?pe():oe.key==="Escape"&&(t(9,x=!1),t(10,L=""))},Me=()=>{t(9,x=!1),t(10,L="")},Be=oe=>oe.is_parent?M(oe):z(oe),$e=oe=>{oe.is_dir&&!oe.is_parent?ke(oe.path):oe.is_dir||Z(oe)},ht=(oe,_e)=>K(_e,oe);function Ve(oe){k=oe,t(11,k)}function lt(oe){O=oe,t(13,O)}function et(oe){A=oe,t(14,A)}return r.$$.update=()=>{if(r.$$.dirty[1]&98304&&t(45,h=b?u.get(b):null),r.$$.dirty[1]&16384&&t(44,g=(h==null?void 0:h.connected)||!1),r.$$.dirty[1]&16384&&t(1,S=(h==null?void 0:h.type)==="local"),r.$$.dirty[0]&2|r.$$.dirty[1]&8192&&t(43,f=g&&!S),r.$$.dirty[0]&1|r.$$.dirty[1]&65536)if(b){const oe=U(b);oe&&oe!==Q&&t(0,Q=oe)}else t(0,Q="/");if(r.$$.dirty[0]&1|r.$$.dirty[1]&2048&&t(17,i=(()=>{const oe=aa(w);return Q==="/"?oe:[{name:"..",path:Q.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...oe]})()),r.$$.dirty[0]&1&&(n=Q.split("/").filter(oe=>oe)),r.$$.dirty[0]&1|r.$$.dirty[1]&69632&&b&&f&&R(Q),r.$$.dirty[1]&33792&&u){const oe=new Set(u.keys()),_e=new Map(m);for(const Te of _e.keys())oe.has(Te)||_e.delete(Te);t(41,m=_e)}},[Q,S,y,v,s,c,a,p,C,x,L,k,E,O,A,j,X,i,I,W,N,G,Z,z,M,K,H,J,Y,ne,ae,ie,fe,de,Se,ke,ge,ce,te,ye,pe,m,w,f,g,h,u,b,xe,Qe,Ze,Ie,je,Ue,Me,Be,$e,ht,Ve,lt,et]}class ha extends nt{constructor(e){super(),st(this,e,ca,la,it,{},null,[-1,-1,-1])}}function ui(r,e,t){const h=r.slice();return h[31]=e[t],h[33]=t,h}function da(r){let e;return{c(){e=$("请先连接到服务器")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function ua(r){let e;return{c(){e=$("实时数据获取中...")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function fa(r){let e;return{c(){e=$("本地终端不支持服务器监控")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function fi(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',o(e,"class","p-3 space-y-3")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function _a(r){let e;return{c(){e=D("div"),e.textContent="等待数据...",o(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function pa(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s;return{c(){e=le("svg"),t=le("defs"),h=le("linearGradient"),g=le("stop"),S=le("stop"),f=le("line"),i=le("line"),n=le("line"),u=le("path"),d=le("path"),y=F(),w=D("div"),w.textContent="100%",v=F(),s=D("div"),s.textContent="0%",o(g,"offset","0%"),me(g,"stop-color","rgb(139, 92, 246)"),me(g,"stop-opacity","0.3"),o(S,"offset","100%"),me(S,"stop-color","rgb(139, 92, 246)"),me(S,"stop-opacity","0.05"),o(h,"id","cpuGradient"),o(h,"x1","0%"),o(h,"y1","0%"),o(h,"x2","0%"),o(h,"y2","100%"),o(f,"x1","0"),o(f,"y1","25%"),o(f,"x2","100%"),o(f,"y2","25%"),o(f,"stroke","currentColor"),o(f,"stroke-width","0.5"),o(f,"class","text-gray-200 dark:text-gray-700"),o(i,"x1","0"),o(i,"y1","50%"),o(i,"x2","100%"),o(i,"y2","50%"),o(i,"stroke","currentColor"),o(i,"stroke-width","0.5"),o(i,"class","text-gray-200 dark:text-gray-700"),o(n,"x1","0"),o(n,"y1","75%"),o(n,"x2","100%"),o(n,"y2","75%"),o(n,"stroke","currentColor"),o(n,"stroke-width","0.5"),o(n,"class","text-gray-200 dark:text-gray-700"),o(u,"d",b=r[2].map(r[13]).join(" ")+" L 100 100 L 0 100 Z"),o(u,"fill","url(#cpuGradient)"),o(u,"transform","scale(1, 0.8) translate(0, 10)"),o(d,"d",m=r[2].map(r[14]).join(" ")),o(d,"fill","none"),o(d,"stroke","rgb(139, 92, 246)"),o(d,"stroke-width","2"),o(d,"stroke-linecap","round"),o(d,"stroke-linejoin","round"),o(d,"transform","scale(1, 0.8) translate(0, 10)"),o(e,"class","w-full h-full"),o(e,"preserveAspectRatio","none"),o(w,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),o(s,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(c,l){q(c,e,l),_(e,t),_(t,h),_(h,g),_(h,S),_(e,f),_(e,i),_(e,n),_(e,u),_(e,d),q(c,y,l),q(c,w,l),q(c,v,l),q(c,s,l)},p(c,l){l[0]&4&&b!==(b=c[2].map(c[13]).join(" ")+" L 100 100 L 0 100 Z")&&o(u,"d",b),l[0]&4&&m!==(m=c[2].map(c[14]).join(" "))&&o(d,"d",m)},d(c){c&&(V(e),V(y),V(w),V(v),V(s))}}}function _i(r){let e,t=Ke(r[4]),h=[];for(let g=0;g<t.length;g+=1)h[g]=pi(ui(r,t,g));return{c(){e=D("div");for(let g=0;g<h.length;g+=1)h[g].c();o(e,"class","mt-2 flex flex-wrap gap-1")},m(g,S){q(g,e,S);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(e,null)},p(g,S){if(S[0]&16){t=Ke(g[4]);let f;for(f=0;f<t.length;f+=1){const i=ui(g,t,f);h[f]?h[f].p(i,S):(h[f]=pi(i),h[f].c(),h[f].m(e,null))}for(;f<h.length;f+=1)h[f].d(1);h.length=t.length}},d(g){g&&V(e),Jt(h,g)}}}function pi(r){let e,t,h,g,S,f;return{c(){e=D("div"),t=D("div"),h=D("div"),g=F(),S=D("span"),S.textContent=`C${r[33]+1}`,f=F(),o(h,"class","h-full rounded-full transition-all duration-300"),me(h,"width",r[31]+"%"),me(h,"background-color",wt(r[31])),o(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),o(S,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),o(e,"class","flex flex-col items-center")},m(i,n){q(i,e,n),_(e,t),_(t,h),_(e,g),_(e,S),_(e,f)},p(i,n){n[0]&16&&me(h,"width",i[31]+"%"),n[0]&16&&me(h,"background-color",wt(i[31]))},d(i){i&&V(e)}}}function ga(r){let e;return{c(){e=D("div"),e.textContent="等待数据...",o(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function ma(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s;return{c(){e=le("svg"),t=le("defs"),h=le("linearGradient"),g=le("stop"),S=le("stop"),f=le("line"),i=le("line"),n=le("line"),u=le("path"),d=le("path"),y=F(),w=D("div"),w.textContent="100%",v=F(),s=D("div"),s.textContent="0%",o(g,"offset","0%"),me(g,"stop-color","rgb(16, 185, 129)"),me(g,"stop-opacity","0.3"),o(S,"offset","100%"),me(S,"stop-color","rgb(16, 185, 129)"),me(S,"stop-opacity","0.05"),o(h,"id","memoryGradient"),o(h,"x1","0%"),o(h,"y1","0%"),o(h,"x2","0%"),o(h,"y2","100%"),o(f,"x1","0"),o(f,"y1","25%"),o(f,"x2","100%"),o(f,"y2","25%"),o(f,"stroke","currentColor"),o(f,"stroke-width","0.5"),o(f,"class","text-gray-200 dark:text-gray-700"),o(i,"x1","0"),o(i,"y1","50%"),o(i,"x2","100%"),o(i,"y2","50%"),o(i,"stroke","currentColor"),o(i,"stroke-width","0.5"),o(i,"class","text-gray-200 dark:text-gray-700"),o(n,"x1","0"),o(n,"y1","75%"),o(n,"x2","100%"),o(n,"y2","75%"),o(n,"stroke","currentColor"),o(n,"stroke-width","0.5"),o(n,"class","text-gray-200 dark:text-gray-700"),o(u,"d",b=r[3].map(r[15]).join(" ")+" L 100 100 L 0 100 Z"),o(u,"fill","url(#memoryGradient)"),o(u,"transform","scale(1, 0.8) translate(0, 10)"),o(d,"d",m=r[3].map(r[16]).join(" ")),o(d,"fill","none"),o(d,"stroke","rgb(16, 185, 129)"),o(d,"stroke-width","2"),o(d,"stroke-linecap","round"),o(d,"stroke-linejoin","round"),o(d,"transform","scale(1, 0.8) translate(0, 10)"),o(e,"class","w-full h-full"),o(e,"preserveAspectRatio","none"),o(w,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),o(s,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(c,l){q(c,e,l),_(e,t),_(t,h),_(h,g),_(h,S),_(e,f),_(e,i),_(e,n),_(e,u),_(e,d),q(c,y,l),q(c,w,l),q(c,v,l),q(c,s,l)},p(c,l){l[0]&8&&b!==(b=c[3].map(c[15]).join(" ")+" L 100 100 L 0 100 Z")&&o(u,"d",b),l[0]&8&&m!==(m=c[3].map(c[16]).join(" "))&&o(d,"d",m)},d(c){c&&(V(e),V(y),V(w),V(v),V(s))}}}function va(r){var Ar,Rr;let e,t,h,g,S,f,i,n,u,b,d,m,y,w=r[5].cpu.toFixed(1)+"",v,s,c,l,a,p,C,x,L,k,E,B=r[5].memory.toFixed(2)+"",O,P,A,j,X,ee,Q,U,T,R,I=r[5].disk+"",W,N,G,Z,se,z,M,K,H,J=r[7].used+"",Y,ne,ae,ie,fe=r[7].total+"",de,Se,Ce,ke,ge,ce,te,ye,pe,xe,Qe=nr(((Ar=r[5].network)==null?void 0:Ar.in)||0)+"",Ze,Ie,je,Ue,Me,Be,$e=nr(((Rr=r[5].network)==null?void 0:Rr.out)||0)+"",ht,Ve,lt,et,oe,_e,Te,ot,Ee,Pe,Ge=(r[6].os||"Unknown")+"",Je,Ye,qe,Xe,be,He,tt=(r[6].kernel||"Unknown")+"",he,De,xt,It,Ft,Rt,Tt=(r[6].uptime||"Unknown")+"",_r,Lr,Wt,Zt,Dr,Qt,$t=(r[6].processes||"N/A")+"",pr;function Mr(Ae,Ne){return Ae[0]?fa:Ae[1]?ua:da}let er=Mr(r),Bt=er(r),dt=r[0]&&fi();function Tr(Ae,Ne){return Ae[2].length>1?pa:_a}let tr=Tr(r),bt=tr(r),at=r[4].length>0&&_i(r);function Br(Ae,Ne){return Ae[3].length>1?ma:ga}let rr=Br(r),yt=rr(r);return{c(){e=D("div"),t=D("div"),h=D("h3"),h.textContent="服务器监控",g=F(),S=D("div"),Bt.c(),f=F(),dt&&dt.c(),i=F(),n=D("div"),u=D("div"),b=D("div"),d=D("div"),d.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',m=F(),y=D("span"),v=$(w),s=$("%"),c=F(),l=D("div"),bt.c(),a=F(),at&&at.c(),p=F(),C=D("div"),x=D("div"),L=D("div"),L.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',k=F(),E=D("span"),O=$(B),P=$("%"),A=F(),j=D("div"),yt.c(),X=F(),ee=D("div"),Q=D("div"),U=D("div"),U.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',T=F(),R=D("span"),W=$(I),N=$("%"),G=F(),Z=D("div"),se=D("div"),z=F(),M=D("div"),K=D("span"),H=$("已用 "),Y=$(J),ne=F(),ae=D("span"),ie=$("总计 "),de=$(fe),Se=F(),Ce=D("div"),ke=D("div"),ke.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',ge=F(),ce=D("div"),te=D("div"),ye=D("div"),ye.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',pe=F(),xe=D("span"),Ze=$(Qe),Ie=F(),je=D("div"),Ue=D("div"),Ue.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',Me=F(),Be=D("span"),ht=$($e),Ve=F(),lt=D("div"),et=D("div"),et.textContent="系统信息",oe=F(),_e=D("div"),Te=D("div"),ot=D("span"),ot.textContent="操作系统",Ee=F(),Pe=D("span"),Je=$(Ge),Ye=F(),qe=D("div"),Xe=D("span"),Xe.textContent="内核版本",be=F(),He=D("span"),he=$(tt),De=F(),xt=D("div"),It=D("span"),It.textContent="运行时间",Ft=F(),Rt=D("span"),_r=$(Tt),Lr=F(),Wt=D("div"),Zt=D("span"),Zt.textContent="进程数",Dr=F(),Qt=D("span"),pr=$($t),o(h,"class","text-sm font-semibold text-gray-900 dark:text-white"),o(S,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),o(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),o(d,"class","flex items-center gap-2"),o(y,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),me(y,"color",wt(r[5].cpu)),o(b,"class","flex items-center justify-between mb-2"),o(l,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),o(u,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),o(L,"class","flex items-center gap-2"),o(E,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),me(E,"color",wt(r[5].memory)),o(x,"class","flex items-center justify-between mb-2"),o(j,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),o(C,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),o(U,"class","flex items-center gap-2"),o(R,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),me(R,"color",wt(r[5].disk)),o(Q,"class","flex items-center justify-between mb-2"),o(se,"class","h-2 rounded-full transition-all duration-300"),me(se,"width",r[5].disk+"%"),me(se,"background-color",wt(r[5].disk)),o(Z,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),o(M,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),o(ee,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),o(ke,"class","flex items-center gap-2 mb-3"),o(ye,"class","flex items-center gap-2"),o(xe,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),o(te,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),o(Ue,"class","flex items-center gap-2"),o(Be,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),o(je,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),o(ce,"class","space-y-2"),o(Ce,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),o(et,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),o(ot,"class","text-gray-600 dark:text-gray-400"),o(Pe,"class","text-gray-900 dark:text-white font-medium"),o(Te,"class","flex justify-between py-1"),o(Xe,"class","text-gray-600 dark:text-gray-400"),o(He,"class","text-gray-900 dark:text-white font-medium"),o(qe,"class","flex justify-between py-1"),o(It,"class","text-gray-600 dark:text-gray-400"),o(Rt,"class","text-gray-900 dark:text-white font-medium"),o(xt,"class","flex justify-between py-1"),o(Zt,"class","text-gray-600 dark:text-gray-400"),o(Qt,"class","text-gray-900 dark:text-white font-medium"),o(Wt,"class","flex justify-between py-1"),o(_e,"class","space-y-1.5 text-[10px]"),o(lt,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),o(n,"class","p-3 space-y-3"),o(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(Ae,Ne){q(Ae,e,Ne),_(e,t),_(t,h),_(t,g),_(t,S),Bt.m(S,null),_(e,f),dt&&dt.m(e,null),_(e,i),_(e,n),_(n,u),_(u,b),_(b,d),_(b,m),_(b,y),_(y,v),_(y,s),_(u,c),_(u,l),bt.m(l,null),_(u,a),at&&at.m(u,null),_(n,p),_(n,C),_(C,x),_(x,L),_(x,k),_(x,E),_(E,O),_(E,P),_(C,A),_(C,j),yt.m(j,null),_(n,X),_(n,ee),_(ee,Q),_(Q,U),_(Q,T),_(Q,R),_(R,W),_(R,N),_(ee,G),_(ee,Z),_(Z,se),_(ee,z),_(ee,M),_(M,K),_(K,H),_(K,Y),_(M,ne),_(M,ae),_(ae,ie),_(ae,de),_(n,Se),_(n,Ce),_(Ce,ke),_(Ce,ge),_(Ce,ce),_(ce,te),_(te,ye),_(te,pe),_(te,xe),_(xe,Ze),_(ce,Ie),_(ce,je),_(je,Ue),_(je,Me),_(je,Be),_(Be,ht),_(n,Ve),_(n,lt),_(lt,et),_(lt,oe),_(lt,_e),_(_e,Te),_(Te,ot),_(Te,Ee),_(Te,Pe),_(Pe,Je),_(_e,Ye),_(_e,qe),_(qe,Xe),_(qe,be),_(qe,He),_(He,he),_(_e,De),_(_e,xt),_(xt,It),_(xt,Ft),_(xt,Rt),_(Rt,_r),_(_e,Lr),_(_e,Wt),_(Wt,Zt),_(Wt,Dr),_(Wt,Qt),_(Qt,pr)},p(Ae,Ne){var Or,Pr;er!==(er=Mr(Ae))&&(Bt.d(1),Bt=er(Ae),Bt&&(Bt.c(),Bt.m(S,null))),Ae[0]?dt||(dt=fi(),dt.c(),dt.m(e,i)):dt&&(dt.d(1),dt=null),Ne[0]&32&&w!==(w=Ae[5].cpu.toFixed(1)+"")&&ue(v,w),Ne[0]&32&&me(y,"color",wt(Ae[5].cpu)),tr===(tr=Tr(Ae))&&bt?bt.p(Ae,Ne):(bt.d(1),bt=tr(Ae),bt&&(bt.c(),bt.m(l,null))),Ae[4].length>0?at?at.p(Ae,Ne):(at=_i(Ae),at.c(),at.m(u,null)):at&&(at.d(1),at=null),Ne[0]&32&&B!==(B=Ae[5].memory.toFixed(2)+"")&&ue(O,B),Ne[0]&32&&me(E,"color",wt(Ae[5].memory)),rr===(rr=Br(Ae))&&yt?yt.p(Ae,Ne):(yt.d(1),yt=rr(Ae),yt&&(yt.c(),yt.m(j,null))),Ne[0]&32&&I!==(I=Ae[5].disk+"")&&ue(W,I),Ne[0]&32&&me(R,"color",wt(Ae[5].disk)),Ne[0]&32&&me(se,"width",Ae[5].disk+"%"),Ne[0]&32&&me(se,"background-color",wt(Ae[5].disk)),Ne[0]&128&&J!==(J=Ae[7].used+"")&&ue(Y,J),Ne[0]&128&&fe!==(fe=Ae[7].total+"")&&ue(de,fe),Ne[0]&32&&Qe!==(Qe=nr(((Or=Ae[5].network)==null?void 0:Or.in)||0)+"")&&ue(Ze,Qe),Ne[0]&32&&$e!==($e=nr(((Pr=Ae[5].network)==null?void 0:Pr.out)||0)+"")&&ue(ht,$e),Ne[0]&64&&Ge!==(Ge=(Ae[6].os||"Unknown")+"")&&ue(Je,Ge),Ne[0]&64&&tt!==(tt=(Ae[6].kernel||"Unknown")+"")&&ue(he,tt),Ne[0]&64&&Tt!==(Tt=(Ae[6].uptime||"Unknown")+"")&&ue(_r,Tt),Ne[0]&64&&$t!==($t=(Ae[6].processes||"N/A")+"")&&ue(pr,$t)},i:we,o:we,d(Ae){Ae&&V(e),Bt.d(),dt&&dt.d(),bt.d(),at&&at.d(),yt.d()}}}function wt(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function nr(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,h=r;for(;h>=1024&&t<e.length-1;)h/=1024,t++;return`${h.toFixed(1)} ${e[t]}`}function ba(r,e,t){let h,g,S,f,i,n;ct(r,At,U=>t(11,i=U)),ct(r,St,U=>t(12,n=U));const u={cpu:0,memory:0,disk:0,network:{in:0,out:0}},b={os:"Unknown",kernel:"Unknown",uptime:"Unknown",processes:0},d={used:"0 GB",total:"0 GB"};let m=[],y=[],w=[],v={...u},s={...b},c={...d},l=new Map,a=new Map,p=new Map,C=new Map,x=new Map,L=new Map,k=null,E=null;function B(U){if(!U){t(2,m=[]),t(3,y=[]),t(4,w=[]),t(5,v={...u}),t(6,s={...b}),t(7,c={...d});return}t(2,m=l.get(U)||[]),t(3,y=a.get(U)||[]),t(4,w=p.get(U)||[]),t(5,v=C.get(U)||{...u}),t(6,s=x.get(U)||{...b}),t(7,c=L.get(U)||{...d})}function O(U){U&&(l=new Map(l).set(U,m),a=new Map(a).set(U,y),p=new Map(p).set(U,w),C=new Map(C).set(U,v),x=new Map(x).set(U,s),L=new Map(L).set(U,c))}function P(U){var N,G,Z,se,z,M,K,H,J,Y,ne,ae;if(!U)return null;const T=(N=U.cpu)!=null&&N.per_core&&Array.isArray(U.cpu.per_core)?U.cpu.per_core:null,R={cpu:typeof U.cpu=="number"?U.cpu:((G=U.cpu)==null?void 0:G.overall)||0,memory:typeof U.memory=="number"?U.memory:((Z=U.memory)==null?void 0:Z.used_percent)||0,disk:typeof U.disk=="number"?U.disk:((M=(z=(se=U.disk)==null?void 0:se.partitions)==null?void 0:z[0])==null?void 0:M.used_percent)||0,network:{in:typeof((K=U.network)==null?void 0:K.in)=="number"?U.network.in*(1024*1024):typeof((H=U.network)==null?void 0:H.rx_rate)=="number"?U.network.rx_rate:0,out:typeof((J=U.network)==null?void 0:J.out)=="number"?U.network.out*(1024*1024):typeof((Y=U.network)==null?void 0:Y.tx_rate)=="number"?U.network.tx_rate:0}},I=U.system?{os:U.system.os||b.os,kernel:U.system.kernel||b.kernel,uptime:U.system.uptime||b.uptime,processes:U.system.processes||b.processes}:null;let W=null;if((ae=(ne=U.disk)==null?void 0:ne.partitions)!=null&&ae[0]){const ie=U.disk.partitions[0],fe=(ie.used/(1024*1024*1024)).toFixed(1),de=(ie.total/(1024*1024*1024)).toFixed(1);W={used:`${fe} GB`,total:`${de} GB`}}return{stats:R,cpuPerCore:T,systemInfo:I,diskInfo:W}}async function A(){const U=i;if(!U||!g||S)return;const{GetMonitoringData:T}=window.wailsBindings||{};if(typeof T=="function")try{const R=await T(U),I=P(R);if(console.log("data:",R),I){const W=[...l.get(U)||[],I.stats.cpu].slice(-60),N=[...a.get(U)||[],I.stats.memory].slice(-60),G=I.cpuPerCore||p.get(U)||[],Z=I.systemInfo||x.get(U)||{...b},se=I.diskInfo||L.get(U)||{...d},z=I.stats;l=new Map(l).set(U,W),a=new Map(a).set(U,N),p=new Map(p).set(U,G),C=new Map(C).set(U,z),x=new Map(x).set(U,Z),L=new Map(L).set(U,se),U===i&&(t(5,v=z),t(2,m=W),t(3,y=N),t(4,w=G),t(6,s=Z),t(7,c=se))}}catch(R){console.error("Failed to fetch monitoring data:",R)}}Vt(()=>(k=setInterval(A,2e3),()=>{clearInterval(k)})),dr(()=>{k&&clearInterval(k)});const j=(U,T)=>{const R=T/(m.length-1)*100,I=100-U;return`${T===0?"M":"L"} ${R} ${I}`},X=(U,T)=>{const R=T/(m.length-1)*100,I=100-U;return`${T===0?"M":"L"} ${R} ${I}`},ee=(U,T)=>{const R=T/(y.length-1)*100,I=100-U;return`${T===0?"M":"L"} ${R} ${I}`},Q=(U,T)=>{const R=T/(y.length-1)*100,I=100-U;return`${T===0?"M":"L"} ${R} ${I}`};return r.$$.update=()=>{r.$$.dirty[0]&6144&&t(10,h=i?n.get(i):null),r.$$.dirty[0]&1024&&t(1,g=(h==null?void 0:h.connected)||!1),r.$$.dirty[0]&1024&&t(0,S=(h==null?void 0:h.type)==="local"),r.$$.dirty[0]&3&&t(9,f=g&&!S),r.$$.dirty[0]&2048&&t(8,E=i),r.$$.dirty[0]&2304&&E!==i&&(E&&O(E),B(i)),r.$$.dirty[0]&2560&&i&&f&&A()},[S,g,m,y,w,v,s,c,E,f,h,i,n,j,X,ee,Q]}class ya extends nt{constructor(e){super(),st(this,e,ba,va,it,{},null,[-1,-1])}}function wa(r){let e;return{c(){e=D("span"),e.textContent="✗ 无效",o(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function Sa(r){let e;return{c(){e=D("span"),e.textContent="✓ 有效",o(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function gi(r){let e,t,h,g,S;return{c(){e=D("div"),t=le("svg"),h=le("path"),g=F(),S=$(r[3]),o(h,"stroke-linecap","round"),o(h,"stroke-linejoin","round"),o(h,"stroke-width","2"),o(h,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),o(t,"class","w-4 h-4"),o(t,"fill","none"),o(t,"stroke","currentColor"),o(t,"viewBox","0 0 24 24"),o(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(f,i){q(f,e,i),_(e,t),_(t,h),_(e,g),_(e,S)},p(f,i){i&8&&ue(S,f[3])},d(f){f&&V(e)}}}function mi(r){let e,t,h;return{c(){e=D("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,o(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(g,S){q(g,e,S),t||(h=re(e,"click",r[9]),t=!0)},p:we,d(g){g&&V(e),t=!1,h()}}}function ka(r){let e,t,h,g,S,f,i,n,u=r[5].chars+"",b,d,m=r[5].lines+"",y,w,v,s,c,l,a,p,C,x,L,k,E,B,O,P,A,j,X,ee,Q,U,T,R,I,W,N,G,Z,se,z,M,K,H,J,Y,ne,ae,ie,fe;function de(ce,te){if(ce[4])return Sa;if(ce[3])return wa}let Se=de(r),Ce=Se&&Se(r),ke=r[3]&&gi(r),ge=r[1]&&mi(r);return{c(){e=D("div"),t=D("div"),h=D("div"),g=D("label"),S=D("span"),S.textContent="输入 JSON",f=F(),Ce&&Ce.c(),i=F(),n=D("div"),b=$(u),d=$(" 字符 · "),y=$(m),w=$(" 行"),v=F(),s=D("textarea"),l=F(),ke&&ke.c(),a=F(),p=D("div"),C=D("button"),x=le("svg"),L=le("path"),k=F(),E=D("span"),E.textContent="格式化",O=F(),P=D("button"),A=le("svg"),j=le("path"),X=F(),ee=D("span"),ee.textContent="压缩",U=F(),T=D("button"),R=le("svg"),I=le("path"),W=F(),N=D("span"),N.textContent="转义",Z=F(),se=D("div"),z=D("div"),M=D("label"),M.textContent="输出",K=F(),ge&&ge.c(),H=F(),J=D("textarea"),Y=F(),ne=D("div"),ae=D("button"),ae.textContent="清空全部",o(g,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),o(n,"class","text-xs text-gray-500 dark:text-gray-400"),o(h,"class","flex items-center justify-between mb-2"),o(s,"placeholder","输入 JSON..."),o(s,"class",c="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),o(t,"class","relative"),o(L,"stroke-linecap","round"),o(L,"stroke-linejoin","round"),o(L,"stroke-width","2"),o(L,"d","M4 6h16M4 12h16m-7 6h7"),o(x,"class","w-4 h-4"),o(x,"fill","none"),o(x,"stroke","currentColor"),o(x,"viewBox","0 0 24 24"),o(E,"class","text-sm"),C.disabled=B=r[2]||!r[0].trim(),o(C,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),o(j,"stroke-linecap","round"),o(j,"stroke-linejoin","round"),o(j,"stroke-width","2"),o(j,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),o(A,"class","w-4 h-4"),o(A,"fill","none"),o(A,"stroke","currentColor"),o(A,"viewBox","0 0 24 24"),o(ee,"class","text-sm"),P.disabled=Q=r[2]||!r[0].trim(),o(P,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),o(I,"stroke-linecap","round"),o(I,"stroke-linejoin","round"),o(I,"stroke-width","2"),o(I,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),o(R,"class","w-4 h-4"),o(R,"fill","none"),o(R,"stroke","currentColor"),o(R,"viewBox","0 0 24 24"),o(N,"class","text-sm"),T.disabled=G=r[2]||!r[0].trim(),o(T,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),o(p,"class","grid grid-cols-3 gap-3"),o(M,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),o(z,"class","flex items-center justify-between mb-2"),J.readOnly=!0,o(J,"placeholder","格式化后的 JSON 将显示在这里..."),o(J,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),o(ae,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),o(ne,"class","flex justify-end"),o(e,"class","space-y-6")},m(ce,te){q(ce,e,te),_(e,t),_(t,h),_(h,g),_(g,S),_(g,f),Ce&&Ce.m(g,null),_(h,i),_(h,n),_(n,b),_(n,d),_(n,y),_(n,w),_(t,v),_(t,s),ve(s,r[0]),_(t,l),ke&&ke.m(t,null),_(e,a),_(e,p),_(p,C),_(C,x),_(x,L),_(C,k),_(C,E),_(p,O),_(p,P),_(P,A),_(A,j),_(P,X),_(P,ee),_(p,U),_(p,T),_(T,R),_(R,I),_(T,W),_(T,N),_(e,Z),_(e,se),_(se,z),_(z,M),_(z,K),ge&&ge.m(z,null),_(se,H),_(se,J),ve(J,r[1]),_(e,Y),_(e,ne),_(ne,ae),ie||(fe=[re(s,"input",r[13]),re(s,"keydown",r[11]),re(C,"click",r[6]),re(P,"click",r[7]),re(T,"click",r[8]),re(J,"input",r[14]),re(ae,"click",r[10])],ie=!0)},p(ce,[te]){Se!==(Se=de(ce))&&(Ce&&Ce.d(1),Ce=Se&&Se(ce),Ce&&(Ce.c(),Ce.m(g,null))),te&32&&u!==(u=ce[5].chars+"")&&ue(b,u),te&32&&m!==(m=ce[5].lines+"")&&ue(y,m),te&8&&c!==(c="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(ce[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&o(s,"class",c),te&1&&ve(s,ce[0]),ce[3]?ke?ke.p(ce,te):(ke=gi(ce),ke.c(),ke.m(t,null)):ke&&(ke.d(1),ke=null),te&5&&B!==(B=ce[2]||!ce[0].trim())&&(C.disabled=B),te&5&&Q!==(Q=ce[2]||!ce[0].trim())&&(P.disabled=Q),te&5&&G!==(G=ce[2]||!ce[0].trim())&&(T.disabled=G),ce[1]?ge?ge.p(ce,te):(ge=mi(ce),ge.c(),ge.m(z,null)):ge&&(ge.d(1),ge=null),te&2&&ve(J,ce[1])},i:we,o:we,d(ce){ce&&V(e),Ce&&Ce.d(),ke&&ke.d(),ge&&ge.d(),ie=!1,Oe(fe)}}}function Ca(r,e,t){let{themeStore:h}=e,g="",S="",f=!1,i="",n=!1,u={chars:0,lines:0};async function b(){if(!g.trim()){t(4,n=!1),t(3,i="");return}if(!window.wailsBindings){t(4,n=!1),t(3,i="Wails 绑定未加载");return}try{const p=await window.wailsBindings.ValidateJSON(g);t(4,n=p.valid),t(3,i=p.error||"")}catch(p){t(4,n=!1),t(3,i=p.message)}}function d(){t(5,u.chars=g.length,u),t(5,u.lines=g.split(`
`).length,u)}async function m(){if(!(!g.trim()||f||!window.wailsBindings)){t(2,f=!0),t(3,i="");try{t(1,S=await window.wailsBindings.FormatJSON(g)),t(4,n=!0),t(3,i="")}catch(p){t(3,i=p.message||"格式化失败")}finally{t(2,f=!1)}}}async function y(){if(!(!g.trim()||f||!window.wailsBindings)){t(2,f=!0),t(3,i="");try{t(1,S=await window.wailsBindings.MinifyJSON(g)),t(4,n=!0),t(3,i="")}catch(p){t(3,i=p.message||"压缩失败")}finally{t(2,f=!1)}}}async function w(){if(!(!g.trim()||f||!window.wailsBindings)){t(2,f=!0),t(3,i="");try{t(1,S=await window.wailsBindings.EscapeJSON(g)),t(4,n=!0),t(3,i="")}catch(p){t(3,i=p.message||"转义失败")}finally{t(2,f=!1)}}}async function v(){if(S)try{await navigator.clipboard.writeText(S)}catch(p){console.error("复制失败:",p)}}function s(){t(0,g=""),t(1,S=""),t(4,n=!1)}function c(p){(p.ctrlKey||p.metaKey)&&p.key.toLowerCase()==="enter"&&!f&&g.trim()&&(p.preventDefault(),m())}function l(){g=this.value,t(0,g)}function a(){S=this.value,t(1,S)}return r.$$set=p=>{"themeStore"in p&&t(12,h=p.themeStore)},b(),d(),[g,S,f,i,n,u,m,y,w,v,s,c,h,l,a]}class vi extends nt{constructor(e){super(),st(this,e,Ca,ka,it,{themeStore:12})}}function xa(r){let e,t,h,g=r[2]==="encode"?"编码":"解码",S;return{c(){e=le("svg"),t=le("path"),h=F(),S=$(g),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(f,i){q(f,e,i),_(e,t),q(f,h,i),q(f,S,i)},p(f,i){i&4&&g!==(g=f[2]==="encode"?"编码":"解码")&&ue(S,g)},d(f){f&&(V(e),V(h),V(S))}}}function Ea(r){let e,t,h,g;return{c(){e=le("svg"),t=le("circle"),h=le("path"),g=$(`
        处理中...`),o(t,"class","opacity-25"),o(t,"cx","12"),o(t,"cy","12"),o(t,"r","10"),o(t,"stroke","currentColor"),o(t,"stroke-width","4"),o(h,"class","opacity-75"),o(h,"fill","currentColor"),o(h,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),o(e,"class","animate-spin w-4 h-4"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24")},m(S,f){q(S,e,f),_(e,t),_(e,h),q(S,g,f)},p:we,d(S){S&&(V(e),V(g))}}}function bi(r){let e,t,h;return{c(){e=D("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,o(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(g,S){q(g,e,S),t||(h=re(e,"click",r[5]),t=!0)},p:we,d(g){g&&V(e),t=!1,h()}}}function La(r){let e,t,h,g,S,f,i,n,u,b,d,m,y=r[2]==="encode"?"输入文本":"输入 Base64",w,v,s,c,l,a,p,C,x,L,k,E,B=r[2]==="encode"?"Base64 输出":"解码结果",O,P,A,j,X,ee,Q,U,T,R,I,W;function N(z,M){return z[3]?Ea:xa}let G=N(r),Z=G(r),se=r[1]&&bi(r);return{c(){e=D("div"),t=D("div"),h=D("button"),g=$("编码"),f=F(),i=D("button"),n=$("解码"),b=F(),d=D("div"),m=D("label"),w=$(y),v=F(),s=D("textarea"),l=F(),a=D("div"),p=D("button"),Z.c(),x=F(),L=D("div"),k=D("div"),E=D("label"),O=$(B),P=F(),se&&se.c(),A=F(),j=D("textarea"),ee=F(),Q=D("div"),U=D("button"),U.textContent="清空全部",T=F(),R=D("button"),R.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,o(h,"class",S="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),o(m,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),o(s,"placeholder",c=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),o(s,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),p.disabled=C=r[3]||!r[0].trim(),o(p,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),o(a,"class","flex items-center justify-center"),o(E,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),o(k,"class","flex items-center justify-between mb-2"),j.readOnly=!0,o(j,"placeholder",X=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),o(j,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),o(U,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),o(R,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),o(Q,"class","flex justify-between items-center"),o(e,"class","space-y-6")},m(z,M){q(z,e,M),_(e,t),_(t,h),_(h,g),_(t,f),_(t,i),_(i,n),_(e,b),_(e,d),_(d,m),_(m,w),_(d,v),_(d,s),ve(s,r[0]),_(e,l),_(e,a),_(a,p),Z.m(p,null),_(e,x),_(e,L),_(L,k),_(k,E),_(E,O),_(k,P),se&&se.m(k,null),_(L,A),_(L,j),ve(j,r[1]),_(e,ee),_(e,Q),_(Q,U),_(Q,T),_(Q,R),I||(W=[re(h,"click",r[10]),re(i,"click",r[11]),re(s,"input",r[12]),re(s,"keydown",r[8]),re(p,"click",r[4]),re(j,"input",r[13]),re(U,"click",r[6]),re(R,"click",r[7])],I=!0)},p(z,[M]){M&4&&S!==(S="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(z[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(h,"class",S),M&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(z[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(i,"class",u),M&4&&y!==(y=z[2]==="encode"?"输入文本":"输入 Base64")&&ue(w,y),M&4&&c!==(c=z[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&o(s,"placeholder",c),M&1&&ve(s,z[0]),G===(G=N(z))&&Z?Z.p(z,M):(Z.d(1),Z=G(z),Z&&(Z.c(),Z.m(p,null))),M&9&&C!==(C=z[3]||!z[0].trim())&&(p.disabled=C),M&4&&B!==(B=z[2]==="encode"?"Base64 输出":"解码结果")&&ue(O,B),z[1]?se?se.p(z,M):(se=bi(z),se.c(),se.m(k,null)):se&&(se.d(1),se=null),M&4&&X!==(X=z[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&o(j,"placeholder",X),M&2&&ve(j,z[1])},i:we,o:we,d(z){z&&V(e),Z.d(),se&&se.d(),I=!1,Oe(W)}}}function Da(r,e,t){let{themeStore:h}=e,g="",S="",f="encode",i=!1;async function n(){if(!(!g.trim()||i||!window.wailsBindings)){t(3,i=!0);try{f==="encode"?t(1,S=await window.wailsBindings.EncodeBase64(g)):t(1,S=await window.wailsBindings.DecodeBase64(g))}catch(c){t(1,S=""),console.error("处理失败:",c),alert("处理失败: "+(c.message||c))}finally{t(3,i=!1)}}}async function u(){if(S)try{await navigator.clipboard.writeText(S)}catch(c){console.error("复制失败:",c)}}function b(){t(0,g=""),t(1,S="")}function d(){t(2,f=f==="encode"?"decode":"encode"),t(0,g=""),t(1,S="")}function m(c){(c.ctrlKey||c.metaKey)&&c.key.toLowerCase()==="enter"&&!i&&g.trim()&&(c.preventDefault(),n())}const y=()=>t(2,f="encode"),w=()=>t(2,f="decode");function v(){g=this.value,t(0,g)}function s(){S=this.value,t(1,S)}return r.$$set=c=>{"themeStore"in c&&t(9,h=c.themeStore)},[g,S,f,i,n,u,b,d,m,h,y,w,v,s]}class yi extends nt{constructor(e){super(),st(this,e,Da,La,it,{themeStore:9})}}function wi(r,e,t){const h=r.slice();return h[26]=e[t],h}function Si(r,e,t){const h=r.slice();return h[26]=e[t],h}function ki(r){let e,t=r[26].name+"",h;return{c(){e=D("option"),h=$(t),e.__value=r[26].id,ve(e,e.__value)},m(g,S){q(g,e,S),_(e,h)},p:we,d(g){g&&V(e)}}}function Ci(r){let e,t=r[26].name+"",h;return{c(){e=D("option"),h=$(t),e.__value=r[26].id,ve(e,e.__value)},m(g,S){q(g,e,S),_(e,h)},p:we,d(g){g&&V(e)}}}function Ma(r){let e,t,h,g,S,f,i,n,u,b;return{c(){e=D("div"),t=D("button"),h=$("加密"),S=F(),f=D("button"),i=$("解密"),o(t,"class",g="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[3]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(f,"class",n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[3]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(d,m){q(d,e,m),_(e,t),_(t,h),_(e,S),_(e,f),_(f,i),u||(b=[re(t,"click",r[21]),re(f,"click",r[22])],u=!0)},p(d,m){m&8&&g!==(g="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[3]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(t,"class",g),m&8&&n!==(n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(d[3]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(f,"class",n)},d(d){d&&V(e),u=!1,Oe(b)}}}function Ta(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s;return{c(){e=D("div"),t=D("div"),h=D("label"),h.textContent="密钥（Hex）",g=F(),S=D("input"),f=F(),i=D("div"),i.textContent=`密钥长度: ${r[12]()}`,n=F(),u=D("div"),b=D("label"),b.textContent=`${r[10]()}（Hex）`,d=F(),m=D("input"),y=F(),w=D("div"),w.textContent=`${r[10]()}长度: ${r[11]()}`,o(h,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),o(S,"type","text"),o(S,"placeholder","例如: 00112233445566778899aabbccddeeff"),o(S,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),o(i,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),o(b,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),o(m,"type","text"),o(m,"placeholder",r[10]()==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),o(m,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),o(w,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),o(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(c,l){q(c,e,l),_(e,t),_(t,h),_(t,g),_(t,S),ve(S,r[4]),_(t,f),_(t,i),_(e,n),_(e,u),_(u,b),_(u,d),_(u,m),ve(m,r[5]),_(u,y),_(u,w),v||(s=[re(S,"input",r[23]),re(m,"input",r[24])],v=!0)},p(c,l){l&16&&S.value!==c[4]&&ve(S,c[4]),l&32&&m.value!==c[5]&&ve(m,c[5])},d(c){c&&V(e),v=!1,Oe(s)}}}function Ba(r){let e,t,h,g=r[8]()?"计算哈希":r[3]==="decrypt"?"解密":"加密",S;return{c(){e=le("svg"),t=le("path"),h=F(),S=$(g),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(f,i){q(f,e,i),_(e,t),q(f,h,i),q(f,S,i)},p(f,i){i&8&&g!==(g=f[8]()?"计算哈希":f[3]==="decrypt"?"解密":"加密")&&ue(S,g)},d(f){f&&(V(e),V(h),V(S))}}}function Aa(r){let e,t,h,g;return{c(){e=le("svg"),t=le("circle"),h=le("path"),g=$(`
        处理中...`),o(t,"class","opacity-25"),o(t,"cx","12"),o(t,"cy","12"),o(t,"r","10"),o(t,"stroke","currentColor"),o(t,"stroke-width","4"),o(h,"class","opacity-75"),o(h,"fill","currentColor"),o(h,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),o(e,"class","animate-spin w-4 h-4"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24")},m(S,f){q(S,e,f),_(e,t),_(e,h),q(S,g,f)},p:we,d(S){S&&(V(e),V(g))}}}function xi(r){let e,t,h,g,S,f,i=r[8]()?"哈希值":r[3]==="decrypt"?"明文":"Base64 密文",n,u,b,d,m,y,w,v,s,c,l=r[1].length+"",a,p,C,x;return{c(){e=D("div"),t=D("div"),h=D("label"),g=D("span"),g.textContent=`${r[9]()}`,S=F(),f=D("span"),n=$(i),u=F(),b=D("button"),b.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,d=F(),m=D("div"),y=D("code"),w=$(r[1]),v=F(),s=D("div"),c=$("长度: "),a=$(l),p=$(" 字符"),o(h,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),o(b,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),o(t,"class","flex items-center justify-between mb-2"),o(y,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),o(m,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),o(s,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(L,k){q(L,e,k),_(e,t),_(t,h),_(h,g),_(h,S),_(h,f),_(f,n),_(t,u),_(t,b),_(e,d),_(e,m),_(m,y),_(y,w),_(e,v),_(e,s),_(s,c),_(s,a),_(s,p),C||(x=re(b,"click",r[15]),C=!0)},p(L,k){k&8&&i!==(i=L[8]()?"哈希值":L[3]==="decrypt"?"明文":"Base64 密文")&&ue(n,i),k&2&&ue(w,L[1]),k&2&&l!==(l=L[1].length+"")&&ue(a,l)},d(L){L&&V(e),C=!1,x()}}}function Ra(r){let e,t,h,g,S,f,i,n,u,b,d=!r[8](),m,y=!r[8](),w,v,s,c=r[8]()?"输入文本":r[3]==="decrypt"?"输入 Base64 密文":"输入明文",l,a,p,C,x,L=r[0].length+"",k,E,B,O,P,A,j,X,ee,Q,U,T,R=Ke(r[7].filter(Ei)),I=[];for(let H=0;H<R.length;H+=1)I[H]=ki(Si(r,R,H));let W=Ke(r[7].filter(Li)),N=[];for(let H=0;H<W.length;H+=1)N[H]=Ci(wi(r,W,H));let G=d&&Ma(r),Z=y&&Ta(r);function se(H,J){return H[6]?Aa:Ba}let z=se(r),M=z(r),K=r[1]&&xi(r);return{c(){e=D("div"),t=D("div"),h=D("label"),h.textContent="选择算法",g=F(),S=D("div"),f=D("div"),i=D("select"),n=D("optgroup");for(let H=0;H<I.length;H+=1)I[H].c();u=D("optgroup");for(let H=0;H<N.length;H+=1)N[H].c();b=F(),G&&G.c(),m=F(),Z&&Z.c(),w=F(),v=D("div"),s=D("label"),l=$(c),a=F(),p=D("textarea"),C=F(),x=D("div"),k=$(L),E=$(" 字符"),B=F(),O=D("div"),P=D("button"),M.c(),j=F(),K&&K.c(),X=F(),ee=D("div"),Q=D("button"),Q.textContent="清空全部",o(h,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),o(n,"label","Hash"),o(u,"label","加密解密"),o(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[2]===void 0&&Yt(()=>r[19].call(i)),o(f,"class","flex-1"),o(S,"class","flex flex-col md:flex-row gap-3"),o(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),o(p,"placeholder",r[13]()),o(p,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),o(x,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),P.disabled=A=r[6]||!r[0].trim()||!r[8]()&&(!r[4].trim()||!r[5].trim()),o(P,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),o(O,"class","flex justify-center"),o(Q,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),o(ee,"class","flex justify-end"),o(e,"class","space-y-6")},m(H,J){q(H,e,J),_(e,t),_(t,h),_(t,g),_(t,S),_(S,f),_(f,i),_(i,n);for(let Y=0;Y<I.length;Y+=1)I[Y]&&I[Y].m(n,null);_(i,u);for(let Y=0;Y<N.length;Y+=1)N[Y]&&N[Y].m(u,null);cr(i,r[2],!0),_(S,b),G&&G.m(S,null),_(e,m),Z&&Z.m(e,null),_(e,w),_(e,v),_(v,s),_(s,l),_(v,a),_(v,p),ve(p,r[0]),_(v,C),_(v,x),_(x,k),_(x,E),_(e,B),_(e,O),_(O,P),M.m(P,null),_(e,j),K&&K.m(e,null),_(e,X),_(e,ee),_(ee,Q),U||(T=[re(i,"change",r[19]),re(i,"change",r[20]),re(p,"input",r[25]),re(p,"keydown",r[17]),re(P,"click",r[14]),re(Q,"click",r[16])],U=!0)},p(H,[J]){if(J&128){R=Ke(H[7].filter(Ei));let Y;for(Y=0;Y<R.length;Y+=1){const ne=Si(H,R,Y);I[Y]?I[Y].p(ne,J):(I[Y]=ki(ne),I[Y].c(),I[Y].m(n,null))}for(;Y<I.length;Y+=1)I[Y].d(1);I.length=R.length}if(J&128){W=Ke(H[7].filter(Li));let Y;for(Y=0;Y<W.length;Y+=1){const ne=wi(H,W,Y);N[Y]?N[Y].p(ne,J):(N[Y]=Ci(ne),N[Y].c(),N[Y].m(u,null))}for(;Y<N.length;Y+=1)N[Y].d(1);N.length=W.length}J&132&&cr(i,H[2]),d&&G.p(H,J),y&&Z.p(H,J),J&8&&c!==(c=H[8]()?"输入文本":H[3]==="decrypt"?"输入 Base64 密文":"输入明文")&&ue(l,c),J&1&&ve(p,H[0]),J&1&&L!==(L=H[0].length+"")&&ue(k,L),z===(z=se(H))&&M?M.p(H,J):(M.d(1),M=z(H),M&&(M.c(),M.m(P,null))),J&113&&A!==(A=H[6]||!H[0].trim()||!H[8]()&&(!H[4].trim()||!H[5].trim()))&&(P.disabled=A),H[1]?K?K.p(H,J):(K=xi(H),K.c(),K.m(e,X)):K&&(K.d(1),K=null)},i:we,o:we,d(H){H&&V(e),Jt(I,H),Jt(N,H),G&&G.d(),Z&&Z.d(),M.d(),K&&K.d(),U=!1,Oe(T)}}}const Ei=r=>r.type==="hash",Li=r=>r.type==="crypto";function Oa(r,e,t){let{themeStore:h}=e,g="",S="",f="md5",i="encrypt",n="",u="",b=!1;const d=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];function m(){const A=d.find(j=>j.id===f);return(A==null?void 0:A.type)==="hash"}function y(){var A;return((A=d.find(j=>j.id===f))==null?void 0:A.name)||""}function w(){return f==="aes-gcm"?"Nonce":"IV"}function v(){return f==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"}function s(){return f==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"}function c(){return m()?"输入要计算哈希的文本...":i==="decrypt"?"输入 Base64 密文...":"输入要加密的明文..."}async function l(){if(!(!g.trim()||b||!window.wailsBindings)&&!(!m()&&(!n.trim()||!u.trim()))){t(6,b=!0),t(1,S="");try{m()?t(1,S=await window.wailsBindings.CalculateHash(g,f)):i==="encrypt"?t(1,S=await window.wailsBindings.EncryptText(g,f,n,u)):t(1,S=await window.wailsBindings.DecryptText(g,f,n,u))}catch(A){t(1,S=""),console.error("操作失败:",A),alert("操作失败: "+(A.message||A))}finally{t(6,b=!1)}}}async function a(){if(S)try{await navigator.clipboard.writeText(S)}catch(A){console.error("复制失败:",A)}}function p(){t(0,g=""),t(1,S=""),t(4,n=""),t(5,u="")}function C(A){(A.ctrlKey||A.metaKey)&&A.key.toLowerCase()==="enter"&&!b&&g.trim()&&(A.preventDefault(),l())}function x(){f=ds(this),t(2,f),t(7,d)}const L=()=>{p()},k=()=>{t(3,i="encrypt"),p()},E=()=>{t(3,i="decrypt"),p()};function B(){n=this.value,t(4,n)}function O(){u=this.value,t(5,u)}function P(){g=this.value,t(0,g)}return r.$$set=A=>{"themeStore"in A&&t(18,h=A.themeStore)},[g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,h,x,L,k,E,B,O,P]}class Di extends nt{constructor(e){super(),st(this,e,Oa,Ra,it,{themeStore:18})}}function Pa(r){let e,t,h,g,S,f,i,n,u,b,d,m=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",y,w,v;return{c(){e=D("div"),t=D("div"),h=D("label"),h.textContent="输入日期时间",g=F(),S=D("button"),S.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,f=F(),i=D("input"),u=F(),b=D("div"),d=$("格式: "),y=$(m),o(h,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),o(S,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),o(t,"class","flex items-center justify-between mb-2"),o(i,"type","text"),o(i,"placeholder",n=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),o(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),o(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(s,c){q(s,e,c),_(e,t),_(t,h),_(t,g),_(t,S),_(e,f),_(e,i),ve(i,r[3]),_(e,u),_(e,b),_(b,d),_(b,y),w||(v=[re(S,"click",r[9]),re(i,"input",r[19]),re(i,"keydown",r[12])],w=!0)},p(s,c){c&2&&n!==(n=s[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&o(i,"placeholder",n),c&8&&i.value!==s[3]&&ve(i,s[3]),c&2&&m!==(m=s[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&ue(y,m)},d(s){s&&V(e),w=!1,Oe(v)}}}function Ha(r){let e,t,h,g,S=r[1]==="milliseconds"?"毫秒":"秒",f,i,n,u,b,d,m,y,w;return{c(){e=D("div"),t=D("div"),h=D("label"),g=$("输入 Unix 时间戳（"),f=$(S),i=$("）"),n=F(),u=D("button"),u.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,b=F(),d=D("input"),o(h,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),o(u,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),o(t,"class","flex items-center justify-between mb-2"),o(d,"type","number"),o(d,"placeholder",m=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),o(d,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,s){q(v,e,s),_(e,t),_(t,h),_(h,g),_(h,f),_(h,i),_(t,n),_(t,u),_(e,b),_(e,d),ve(d,r[2]),y||(w=[re(u,"click",r[8]),re(d,"input",r[18]),re(d,"keydown",r[12])],y=!0)},p(v,s){s&2&&S!==(S=v[1]==="milliseconds"?"毫秒":"秒")&&ue(f,S),s&2&&m!==(m=v[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&o(d,"placeholder",m),s&4&&hs(d.value)!==v[2]&&ve(d,v[2])},d(v){v&&V(e),y=!1,Oe(w)}}}function Ia(r){let e,t,h;return{c(){e=le("svg"),t=le("path"),h=$(`
        转换`),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(g,S){q(g,e,S),_(e,t),q(g,h,S)},d(g){g&&(V(e),V(h))}}}function Fa(r){let e,t,h,g;return{c(){e=le("svg"),t=le("circle"),h=le("path"),g=$(`
        转换中...`),o(t,"class","opacity-25"),o(t,"cx","12"),o(t,"cy","12"),o(t,"r","10"),o(t,"stroke","currentColor"),o(t,"stroke-width","4"),o(h,"class","opacity-75"),o(h,"fill","currentColor"),o(h,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),o(e,"class","animate-spin w-4 h-4"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24")},m(S,f){q(S,e,f),_(e,t),_(e,h),q(S,g,f)},d(S){S&&(V(e),V(g))}}}function Mi(r){let e,t,h,g=r[0]==="toDateTime"?"日期时间":"时间戳",S,f,i,n,u,b,d,m,y;return{c(){e=D("div"),t=D("div"),h=D("label"),S=$(g),f=F(),i=D("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n=F(),u=D("div"),b=D("code"),d=$(r[4]),o(h,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),o(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),o(t,"class","flex items-center justify-between mb-2"),o(b,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),o(u,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(w,v){q(w,e,v),_(e,t),_(t,h),_(h,S),_(t,f),_(t,i),_(e,n),_(e,u),_(u,b),_(b,d),m||(y=re(i,"click",r[10]),m=!0)},p(w,v){v&1&&g!==(g=w[0]==="toDateTime"?"日期时间":"时间戳")&&ue(S,g),v&16&&ue(d,w[4])},d(w){w&&V(e),m=!1,y()}}}function Wa(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,x,L,k,E,B,O,P=r[1]==="milliseconds"?"毫秒":"秒",A,j,X,ee,Q,U,T,R,I,W,N,G,Z,se,z;function M(ie,fe){return ie[0]==="toDateTime"?Ha:Pa}let K=M(r),H=K(r);function J(ie,fe){return ie[5]?Fa:Ia}let Y=J(r),ne=Y(r),ae=r[4]&&Mi(r);return{c(){e=D("div"),t=D("div"),h=D("button"),g=$("时间戳 → 日期时间"),f=F(),i=D("button"),n=$("日期时间 → 时间戳"),b=F(),d=D("div"),m=D("div"),y=D("button"),w=$("秒"),s=F(),c=D("button"),l=$("毫秒"),p=F(),C=D("div"),x=D("div"),L=le("svg"),k=le("path"),E=F(),B=D("span"),O=$("当前时间戳（"),A=$(P),j=$("）: "),X=D("strong"),ee=$(r[6]),Q=F(),H.c(),U=F(),T=D("div"),R=D("button"),ne.c(),W=F(),ae&&ae.c(),N=F(),G=D("div"),Z=D("button"),Z.textContent="清空全部",o(h,"class",S="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),o(y,"class",v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(c,"class",a="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),o(m,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),o(d,"class","flex justify-end"),o(k,"stroke-linecap","round"),o(k,"stroke-linejoin","round"),o(k,"stroke-width","2"),o(k,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),o(L,"class","w-5 h-5"),o(L,"fill","none"),o(L,"stroke","currentColor"),o(L,"viewBox","0 0 24 24"),o(X,"class","font-mono"),o(x,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),o(C,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),R.disabled=I=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),o(R,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),o(T,"class","flex justify-center"),o(Z,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),o(G,"class","flex justify-end"),o(e,"class","space-y-6")},m(ie,fe){q(ie,e,fe),_(e,t),_(t,h),_(h,g),_(t,f),_(t,i),_(i,n),_(e,b),_(e,d),_(d,m),_(m,y),_(y,w),_(m,s),_(m,c),_(c,l),_(e,p),_(e,C),_(C,x),_(x,L),_(L,k),_(x,E),_(x,B),_(B,O),_(B,A),_(B,j),_(B,X),_(X,ee),_(e,Q),H.m(e,null),_(e,U),_(e,T),_(T,R),ne.m(R,null),_(e,W),ae&&ae.m(e,null),_(e,N),_(e,G),_(G,Z),se||(z=[re(h,"click",r[14]),re(i,"click",r[15]),re(y,"click",r[16]),re(c,"click",r[17]),re(R,"click",r[7]),re(Z,"click",r[11])],se=!0)},p(ie,[fe]){fe&1&&S!==(S="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ie[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(h,"class",S),fe&1&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(ie[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(i,"class",u),fe&2&&v!==(v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ie[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(y,"class",v),fe&2&&a!==(a="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(ie[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&o(c,"class",a),fe&2&&P!==(P=ie[1]==="milliseconds"?"毫秒":"秒")&&ue(A,P),fe&64&&ue(ee,ie[6]),K===(K=M(ie))&&H?H.p(ie,fe):(H.d(1),H=K(ie),H&&(H.c(),H.m(e,U))),Y!==(Y=J(ie))&&(ne.d(1),ne=Y(ie),ne&&(ne.c(),ne.m(R,null))),fe&45&&I!==(I=ie[5]||(ie[0]==="toDateTime"?!ie[2].trim():!ie[3].trim()))&&(R.disabled=I),ie[4]?ae?ae.p(ie,fe):(ae=Mi(ie),ae.c(),ae.m(e,N)):ae&&(ae.d(1),ae=null)},i:we,o:we,d(ie){ie&&V(e),H.d(),ne.d(),ae&&ae.d(),se=!1,Oe(z)}}}const za="2006-01-02 15:04:05",ja="2006-01-02 15:04:05.000";function Ua(r,e,t){let{themeStore:h}=e,g="toDateTime",S="seconds",f="",i="",n="",u=!1,b=0;function d(){const E=Date.now();t(6,b=S==="milliseconds"?E:Math.floor(E/1e3))}function m(){return S==="milliseconds"?ja:za}async function y(){if(window.wailsBindings){t(5,u=!0),t(4,n="");try{if(g==="toDateTime"){const E=parseInt(f.trim());if(isNaN(E))throw new Error("请输入有效的时间戳");S==="milliseconds"?t(4,n=await window.wailsBindings.TimestampToDateTimeMs(E,m())):t(4,n=await window.wailsBindings.TimestampToDateTime(E,m()))}else{if(!i.trim())throw new Error("请输入日期时间");if(S==="milliseconds"){const E=await window.wailsBindings.DateTimeToTimestampMs(i,m());t(4,n=E.toString())}else{const E=await window.wailsBindings.DateTimeToTimestamp(i,m());t(4,n=E.toString())}}}catch(E){t(4,n=""),console.error("转换失败:",E),alert("转换失败: "+(E.message||E))}finally{t(5,u=!1)}}}async function w(){if(window.wailsBindings)try{const E=S==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,f=E.toString())}catch(E){console.error("获取当前时间戳失败:",E)}}async function v(){if(window.wailsBindings)try{const E=S==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),B=S==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(E,m()):await window.wailsBindings.TimestampToDateTime(E,m());t(3,i=B)}catch(E){console.error("获取当前时间失败:",E)}}async function s(){if(n)try{await navigator.clipboard.writeText(n)}catch(E){console.error("复制失败:",E)}}function c(){t(2,f=""),t(3,i=""),t(4,n="")}function l(E){(E.ctrlKey||E.metaKey)&&E.key.toLowerCase()==="enter"&&!u&&(g==="toDateTime"&&f.trim()||g==="toTimestamp"&&i.trim())&&(E.preventDefault(),y())}const a=()=>{t(0,g="toDateTime"),c()},p=()=>{t(0,g="toTimestamp"),c()},C=()=>{t(1,S="seconds"),c()},x=()=>{t(1,S="milliseconds"),c()};function L(){f=hs(this.value),t(2,f)}function k(){i=this.value,t(3,i)}return r.$$set=E=>{"themeStore"in E&&t(13,h=E.themeStore)},d(),[g,S,f,i,n,u,b,y,w,v,s,c,l,h,a,p,C,x,L,k]}class Ti extends nt{constructor(e){super(),st(this,e,Ua,Wa,it,{themeStore:13})}}function Bi(r,e,t){const h=r.slice();return h[12]=e[t],h[14]=t,h}function Na(r){let e,t,h,g;return{c(){e=le("svg"),t=le("path"),h=F(),g=D("span"),g.textContent="生成 UUID v4",o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),o(e,"class","w-6 h-6"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(S,f){q(S,e,f),_(e,t),q(S,h,f),q(S,g,f)},d(S){S&&(V(e),V(h),V(g))}}}function Ka(r){let e,t,h,g;return{c(){e=le("svg"),t=le("circle"),h=le("path"),g=$(`
        生成中...`),o(t,"class","opacity-25"),o(t,"cx","12"),o(t,"cy","12"),o(t,"r","10"),o(t,"stroke","currentColor"),o(t,"stroke-width","4"),o(h,"class","opacity-75"),o(h,"fill","currentColor"),o(h,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),o(e,"class","animate-spin w-6 h-6"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24")},m(S,f){q(S,e,f),_(e,t),_(e,h),q(S,g,f)},d(S){S&&(V(e),V(g))}}}function Ai(r){let e,t,h,g,S,f,i,n,u,b,d;function m(v,s){return v[3]===v[0]?qa:Va}let y=m(r),w=y(r);return{c(){e=D("div"),t=D("div"),h=D("label"),h.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,g=F(),S=D("button"),w.c(),f=F(),i=D("div"),n=D("code"),u=$(r[0]),o(h,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),o(S,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),o(t,"class","flex items-center justify-between mb-3"),o(n,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),o(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(v,s){q(v,e,s),_(e,t),_(t,h),_(t,g),_(t,S),w.m(S,null),_(e,f),_(e,i),_(i,n),_(n,u),b||(d=re(S,"click",r[9]),b=!0)},p(v,s){y!==(y=m(v))&&(w.d(1),w=y(v),w&&(w.c(),w.m(S,null))),s&1&&ue(u,v[0])},d(v){v&&V(e),w.d(),b=!1,d()}}}function Va(r){let e,t,h;return{c(){e=le("svg"),t=le("path"),h=$(`
            复制`),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(g,S){q(g,e,S),_(e,t),q(g,h,S)},d(g){g&&(V(e),V(h))}}}function qa(r){let e,t,h;return{c(){e=le("svg"),t=le("path"),h=$(`
            已复制`),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M5 13l4 4L19 7"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(g,S){q(g,e,S),_(e,t),q(g,h,S)},d(g){g&&(V(e),V(h))}}}function Ri(r){let e,t,h,g,S,f,i,n,u=r[1].length+"",b,d,m,y,w,v,s,c,l=Ke(r[1]),a=[];for(let p=0;p<l.length;p+=1)a[p]=Oi(Bi(r,l,p));return{c(){e=D("div"),t=D("div"),h=D("label"),g=le("svg"),S=le("path"),f=$(`
          历史记录
          `),i=D("span"),n=$("("),b=$(u),d=$("/10)"),m=F(),y=D("button"),y.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,w=F(),v=D("div");for(let p=0;p<a.length;p+=1)a[p].c();o(S,"stroke-linecap","round"),o(S,"stroke-linejoin","round"),o(S,"stroke-width","2"),o(S,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),o(g,"class","w-4 h-4"),o(g,"fill","none"),o(g,"stroke","currentColor"),o(g,"viewBox","0 0 24 24"),o(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),o(h,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),o(y,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),o(t,"class","flex items-center justify-between mb-3"),o(v,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(p,C){q(p,e,C),_(e,t),_(t,h),_(h,g),_(g,S),_(h,f),_(h,i),_(i,n),_(i,b),_(i,d),_(t,m),_(t,y),_(e,w),_(e,v);for(let x=0;x<a.length;x+=1)a[x]&&a[x].m(v,null);s||(c=re(y,"click",r[6]),s=!0)},p(p,C){if(C&2&&u!==(u=p[1].length+"")&&ue(b,u),C&170){l=Ke(p[1]);let x;for(x=0;x<l.length;x+=1){const L=Bi(p,l,x);a[x]?a[x].p(L,C):(a[x]=Oi(L),a[x].c(),a[x].m(v,null))}for(;x<a.length;x+=1)a[x].d(1);a.length=l.length}},d(p){p&&V(e),Jt(a,p),s=!1,c()}}}function Ga(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function Ja(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M5 13l4 4L19 7"),o(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function Oi(r){let e,t,h=r[12]+"",g,S,f,i,n,u,b,d,m;function y(){return r[10](r[12])}function w(l,a){return l[3]===l[12]?Ja:Ga}let v=w(r),s=v(r);function c(){return r[11](r[12])}return{c(){e=D("div"),t=D("code"),g=$(h),S=F(),f=D("div"),i=D("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',n=F(),u=D("button"),s.c(),b=F(),o(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),o(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),o(i,"title","使用此 UUID"),o(u,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),o(u,"title","复制"),o(f,"class","flex items-center gap-2 shrink-0"),o(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(l,a){q(l,e,a),_(e,t),_(t,g),_(e,S),_(e,f),_(f,i),_(f,n),_(f,u),s.m(u,null),_(e,b),d||(m=[re(i,"click",y),re(u,"click",c)],d=!0)},p(l,a){r=l,a&2&&h!==(h=r[12]+"")&&ue(g,h),v!==(v=w(r))&&(s.d(1),s=v(r),s&&(s.c(),s.m(u,null)))},d(l){l&&V(e),s.d(),d=!1,Oe(m)}}}function Pi(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',o(e,"class","text-center py-8")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function Xa(r){let e,t,h,g,S,f,i,n,u,b;function d(c,l){return c[2]?Ka:Na}let m=d(r),y=m(r),w=r[0]&&Ai(r),v=r[1].length>0&&Ri(r),s=!r[0]&&Pi();return{c(){e=D("div"),t=D("div"),h=D("button"),y.c(),g=F(),S=D("div"),f=F(),w&&w.c(),i=F(),v&&v.c(),n=F(),s&&s.c(),o(S,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),h.disabled=r[2],o(h,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),o(t,"class","text-center"),o(e,"class","space-y-6")},m(c,l){q(c,e,l),_(e,t),_(t,h),y.m(h,null),_(h,g),_(h,S),_(e,f),w&&w.m(e,null),_(e,i),v&&v.m(e,null),_(e,n),s&&s.m(e,null),u||(b=re(h,"click",r[4]),u=!0)},p(c,[l]){m!==(m=d(c))&&(y.d(1),y=m(c),y&&(y.c(),y.m(h,g))),l&4&&(h.disabled=c[2]),c[0]?w?w.p(c,l):(w=Ai(c),w.c(),w.m(e,i)):w&&(w.d(1),w=null),c[1].length>0?v?v.p(c,l):(v=Ri(c),v.c(),v.m(e,n)):v&&(v.d(1),v=null),c[0]?s&&(s.d(1),s=null):s||(s=Pi(),s.c(),s.m(e,null))},i:we,o:we,d(c){c&&V(e),y.d(),w&&w.d(),v&&v.d(),s&&s.d(),u=!1,b()}}}function Ya(r,e,t){let{themeStore:h}=e,g="",S=[],f=!1,i=null;async function n(){if(window.wailsBindings){t(2,f=!0);try{const v=await window.wailsBindings.GenerateUUIDv4();t(0,g=v),S.length<10?t(1,S=[v,...S]):t(1,S=[v,...S.slice(0,9)])}catch(v){console.error("UUID 生成失败:",v),alert("UUID 生成失败: "+(v.message||v))}finally{t(2,f=!1)}}}async function u(v){try{await navigator.clipboard.writeText(v),t(3,i=v),setTimeout(()=>t(3,i=null),2e3)}catch(s){console.error("复制失败:",s)}}function b(){t(1,S=[])}function d(v){t(0,g=v)}const m=()=>u(g),y=v=>d(v),w=v=>u(v);return r.$$set=v=>{"themeStore"in v&&t(8,h=v.themeStore)},[g,S,f,i,n,u,b,d,h,m,y,w]}class Hi extends nt{constructor(e){super(),st(this,e,Ya,Xa,it,{themeStore:8})}}function Ii(r,e,t){const h=r.slice();return h[12]=e[t],h}function Fi(r){let e,t,h,g,S,f,i,n,u,b,d,m=[],y=new Map,w,v,s,c,l,a,p,C,x,L=Ke(r[4]);const k=P=>P[12].id;for(let P=0;P<L.length;P+=1){let A=Ii(r,L,P),j=k(A);y.set(j,m[P]=zi(j,A))}const E=[Qa,Za],B=[];function O(P,A){return P[3]?0:1}return l=O(r),a=B[l]=E[l](r),{c(){e=D("div"),t=D("div"),h=F(),g=D("div"),S=D("div"),f=D("div"),i=D("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',n=F(),u=D("button"),u.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=F(),d=D("div");for(let P=0;P<m.length;P+=1)m[P].c();w=F(),v=D("div"),v.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',s=F(),c=D("div"),a.c(),o(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),o(u,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),o(u,"title","关闭"),o(f,"class","flex items-center justify-between mb-6"),o(d,"class","space-y-2 flex-1 overflow-y-auto"),o(v,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),o(S,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),o(c,"class","flex-1 flex flex-col overflow-hidden"),o(g,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),o(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),o(e,"role","dialog"),o(e,"aria-modal","true"),o(e,"tabindex","-1")},m(P,A){q(P,e,A),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),_(f,i),_(f,n),_(f,u),_(S,b),_(S,d);for(let j=0;j<m.length;j+=1)m[j]&&m[j].m(d,null);_(S,w),_(S,v),_(g,s),_(g,c),B[l].m(c,null),r[11](e),p=!0,C||(x=[re(u,"click",r[9]),re(e,"click",r[5]),re(e,"keydown",r[8])],C=!0)},p(P,A){A&88&&(L=Ke(P[4]),m=Pt(m,A,k,1,P,L,y,d,qt,zi,null,Ii));let j=l;l=O(P),l===j?B[l].p(P,A):(gt(),Re(B[j],1,1,()=>{B[j]=null}),mt(),a=B[l],a?a.p(P,A):(a=B[l]=E[l](P),a.c()),Le(a,1),a.m(c,null))},i(P){p||(Le(a),p=!0)},o(P){Re(a),p=!1},d(P){P&&V(e);for(let A=0;A<m.length;A+=1)m[A].d();B[l].d(),r[11](null),C=!1,Oe(x)}}}function Wi(r){let e;return{c(){e=D("span"),o(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-cyan-400 via-sky-500 to-indigo-500")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function zi(r,e){let t,h,g,S=e[12].icon+"",f,i,n,u=e[12].name+"",b,d,m,y,w,v,s=e[3]===e[12].id&&Wi();function c(){return e[10](e[12])}return{key:r,first:null,c(){t=D("button"),s&&s.c(),h=F(),g=D("span"),f=$(S),i=F(),n=D("span"),b=$(u),m=F(),o(g,"class",`text-2xl ${e[12].color}`),o(n,"class",d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),o(t,"class",y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(l,a){q(l,t,a),s&&s.m(t,null),_(t,h),_(t,g),_(g,f),_(t,i),_(t,n),_(n,b),_(t,m),w||(v=re(t,"click",c),w=!0)},p(l,a){e=l,e[3]===e[12].id?s||(s=Wi(),s.c(),s.m(t,h)):s&&(s.d(1),s=null),a&8&&d!==(d=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&o(n,"class",d),a&8&&y!==(y="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&o(t,"class",y)},d(l){l&&V(t),s&&s.d(),w=!1,v()}}}function Za(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',o(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,h){q(t,e,h)},p:we,i:we,o:we,d(t){t&&V(e)}}}function Qa(r){var l,a;let e,t,h,g=((l=r[7]())==null?void 0:l.icon)+"",S,f,i=((a=r[7]())==null?void 0:a.name)+"",n,u,b,d,m,y,w;const v=[ic,rc,tc,ec,$a],s=[];function c(p,C){return p[3]==="json"?0:p[3]==="base64"?1:p[3]==="hash"?2:p[3]==="timestamp"?3:p[3]==="uuid"?4:-1}return~(m=c(r))&&(y=s[m]=v[m](r)),{c(){var p;e=D("div"),t=D("h2"),h=D("span"),S=$(g),f=F(),n=$(i),u=F(),b=D("div"),d=D("div"),y&&y.c(),o(h,"class",`text-2xl ${(p=r[7]())==null?void 0:p.color}`),o(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),o(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),o(d,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),o(b,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(p,C){q(p,e,C),_(e,t),_(t,h),_(h,S),_(t,f),_(t,n),q(p,u,C),q(p,b,C),_(b,d),~m&&s[m].m(d,null),w=!0},p(p,C){let x=m;m=c(p),m===x?~m&&s[m].p(p,C):(y&&(gt(),Re(s[x],1,1,()=>{s[x]=null}),mt()),~m?(y=s[m],y?y.p(p,C):(y=s[m]=v[m](p),y.c()),Le(y,1),y.m(d,null)):y=null)},i(p){w||(Le(y),w=!0)},o(p){Re(y),w=!1},d(p){p&&(V(e),V(u),V(b)),~m&&s[m].d()}}}function $a(r){let e,t,h;var g=Hi;function S(f,i){return{props:{themeStore:f[1]}}}return g&&(e=kt(g,S(r))),{c(){e&&ze(e.$$.fragment),t=pt()},m(f,i){e&&Fe(e,f,i),q(f,t,i),h=!0},p(f,i){if(g!==(g=Hi)){if(e){gt();const n=e;Re(n.$$.fragment,1,0,()=>{We(n,1)}),mt()}g?(e=kt(g,S(f)),ze(e.$$.fragment),Le(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(g){const n={};i&2&&(n.themeStore=f[1]),e.$set(n)}},i(f){h||(e&&Le(e.$$.fragment,f),h=!0)},o(f){e&&Re(e.$$.fragment,f),h=!1},d(f){f&&V(t),e&&We(e,f)}}}function ec(r){let e,t,h;var g=Ti;function S(f,i){return{props:{themeStore:f[1]}}}return g&&(e=kt(g,S(r))),{c(){e&&ze(e.$$.fragment),t=pt()},m(f,i){e&&Fe(e,f,i),q(f,t,i),h=!0},p(f,i){if(g!==(g=Ti)){if(e){gt();const n=e;Re(n.$$.fragment,1,0,()=>{We(n,1)}),mt()}g?(e=kt(g,S(f)),ze(e.$$.fragment),Le(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(g){const n={};i&2&&(n.themeStore=f[1]),e.$set(n)}},i(f){h||(e&&Le(e.$$.fragment,f),h=!0)},o(f){e&&Re(e.$$.fragment,f),h=!1},d(f){f&&V(t),e&&We(e,f)}}}function tc(r){let e,t,h;var g=Di;function S(f,i){return{props:{themeStore:f[1]}}}return g&&(e=kt(g,S(r))),{c(){e&&ze(e.$$.fragment),t=pt()},m(f,i){e&&Fe(e,f,i),q(f,t,i),h=!0},p(f,i){if(g!==(g=Di)){if(e){gt();const n=e;Re(n.$$.fragment,1,0,()=>{We(n,1)}),mt()}g?(e=kt(g,S(f)),ze(e.$$.fragment),Le(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(g){const n={};i&2&&(n.themeStore=f[1]),e.$set(n)}},i(f){h||(e&&Le(e.$$.fragment,f),h=!0)},o(f){e&&Re(e.$$.fragment,f),h=!1},d(f){f&&V(t),e&&We(e,f)}}}function rc(r){let e,t,h;var g=yi;function S(f,i){return{props:{themeStore:f[1]}}}return g&&(e=kt(g,S(r))),{c(){e&&ze(e.$$.fragment),t=pt()},m(f,i){e&&Fe(e,f,i),q(f,t,i),h=!0},p(f,i){if(g!==(g=yi)){if(e){gt();const n=e;Re(n.$$.fragment,1,0,()=>{We(n,1)}),mt()}g?(e=kt(g,S(f)),ze(e.$$.fragment),Le(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(g){const n={};i&2&&(n.themeStore=f[1]),e.$set(n)}},i(f){h||(e&&Le(e.$$.fragment,f),h=!0)},o(f){e&&Re(e.$$.fragment,f),h=!1},d(f){f&&V(t),e&&We(e,f)}}}function ic(r){let e,t,h;var g=vi;function S(f,i){return{props:{themeStore:f[1]}}}return g&&(e=kt(g,S(r))),{c(){e&&ze(e.$$.fragment),t=pt()},m(f,i){e&&Fe(e,f,i),q(f,t,i),h=!0},p(f,i){if(g!==(g=vi)){if(e){gt();const n=e;Re(n.$$.fragment,1,0,()=>{We(n,1)}),mt()}g?(e=kt(g,S(f)),ze(e.$$.fragment),Le(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(g){const n={};i&2&&(n.themeStore=f[1]),e.$set(n)}},i(f){h||(e&&Le(e.$$.fragment,f),h=!0)},o(f){e&&Re(e.$$.fragment,f),h=!1},d(f){f&&V(t),e&&We(e,f)}}}function sc(r){let e,t,h=r[0]&&Fi(r);return{c(){h&&h.c(),e=pt()},m(g,S){h&&h.m(g,S),q(g,e,S),t=!0},p(g,[S]){g[0]?h?(h.p(g,S),S&1&&Le(h,1)):(h=Fi(g),h.c(),Le(h,1),h.m(e.parentNode,e)):h&&(gt(),Re(h,1,1,()=>{h=null}),mt())},i(g){t||(Le(h),t=!0)},o(g){Re(h),t=!1},d(g){g&&V(e),h&&h.d(g)}}}function nc(r,e,t){let{isOpen:h=!1}=e,{themeStore:g}=e,S=null,f;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function n(v){v.target===v.currentTarget&&t(0,h=!1)}function u(v){t(3,S=v)}function b(){return i.find(v=>v.id===S)}function d(v){v.key==="Escape"&&h&&(v.preventDefault(),t(0,h=!1))}const m=()=>t(0,h=!1),y=v=>u(v.id);function w(v){rt[v?"unshift":"push"](()=>{f=v,t(2,f)})}return r.$$set=v=>{"isOpen"in v&&t(0,h=v.isOpen),"themeStore"in v&&t(1,g=v.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&h&&or().then(()=>{f&&f.focus()})},[h,g,f,S,i,n,u,b,d,m,y,w]}class oc extends nt{constructor(e){super(),st(this,e,nc,sc,it,{isOpen:0,themeStore:1})}}function ji(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c;return{c(){e=D("div"),t=D("label"),t.textContent="认证方式",h=F(),g=D("div"),S=D("button"),f=D("div"),i=$("密码"),b=F(),d=D("button"),m=D("div"),y=$("SSH 密钥"),o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(f,"class",n=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),o(S,"type","button"),o(S,"class",u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),o(m,"class",w=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),o(d,"type","button"),o(d,"class",v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),o(g,"class","flex gap-2")},m(l,a){q(l,e,a),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),_(f,i),_(g,b),_(g,d),_(d,m),_(m,y),s||(c=[re(S,"click",r[21]),re(d,"click",r[22])],s=!0)},p(l,a){a[0]&8&&n!==(n=`text-xs font-medium ${l[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&o(f,"class",n),a[0]&8&&u!==(u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${l[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&o(S,"class",u),a[0]&8&&w!==(w=`text-xs font-medium ${l[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&o(m,"class",w),a[0]&8&&v!==(v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${l[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&o(d,"class",v)},d(l){l&&V(e),s=!1,Oe(c)}}}function Ui(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l;function a(E,B){return E[9]?ac:lc}let p=a(r),C=p(r);function x(E,B){return E[9]?hc:cc}let L=x(r),k=L(r);return{c(){e=D("div"),t=D("label"),t.textContent="SSH 私钥文件",h=F(),g=D("div"),S=D("input"),f=F(),i=D("button"),i.textContent="选择文件",n=F(),u=D("div"),b=D("label"),b.textContent="Passphrase（可选）",d=F(),m=D("div"),C.c(),y=F(),w=D("button"),k.c(),v=F(),s=D("p"),s.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(S,"type","text"),o(S,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),S.readOnly=!0,o(S,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),o(i,"type","button"),o(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),o(g,"class","flex gap-1.5"),o(b,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(w,"type","button"),o(w,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),o(m,"class","relative"),o(s,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(E,B){q(E,e,B),_(e,t),_(e,h),_(e,g),_(g,S),ve(S,r[4].keyPath),_(g,f),_(g,i),q(E,n,B),q(E,u,B),_(u,b),_(u,d),_(u,m),C.m(m,null),_(m,y),_(m,w),k.m(w,null),_(u,v),_(u,s),c||(l=[re(S,"input",r[23]),re(i,"click",r[11]),re(w,"click",r[26])],c=!0)},p(E,B){B[0]&16&&S.value!==E[4].keyPath&&ve(S,E[4].keyPath),p===(p=a(E))&&C?C.p(E,B):(C.d(1),C=p(E),C&&(C.c(),C.m(m,y))),L!==(L=x(E))&&(k.d(1),k=L(E),k&&(k.c(),k.m(w,null)))},d(E){E&&(V(e),V(n),V(u)),C.d(),k.d(),c=!1,Oe(l)}}}function lc(r){let e,t,h;return{c(){e=D("input"),o(e,"type","password"),o(e,"placeholder","如果密钥已加密，请输入 passphrase"),o(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(g,S){q(g,e,S),ve(e,r[4].passphrase),t||(h=re(e,"input",r[25]),t=!0)},p(g,S){S[0]&16&&e.value!==g[4].passphrase&&ve(e,g[4].passphrase)},d(g){g&&V(e),t=!1,h()}}}function ac(r){let e,t,h;return{c(){e=D("input"),o(e,"type","text"),o(e,"placeholder","如果密钥已加密，请输入 passphrase"),o(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(g,S){q(g,e,S),ve(e,r[4].passphrase),t||(h=re(e,"input",r[24]),t=!0)},p(g,S){S[0]&16&&e.value!==g[4].passphrase&&ve(e,g[4].passphrase)},d(g){g&&V(e),t=!1,h()}}}function cc(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),o(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function hc(r){let e,t,h;return{c(){e=le("svg"),t=le("path"),h=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),o(h,"stroke-linecap","round"),o(h,"stroke-linejoin","round"),o(h,"stroke-width","2"),o(h,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),o(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(g,S){q(g,e,S),_(e,t),_(e,h)},d(g){g&&V(e)}}}function Ni(r){let e,t,h;return{c(){e=D("div"),t=$(r[6]),o(e,"class",h=`p-2 rounded-md text-xs ${r[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(g,S){q(g,e,S),_(e,t)},p(g,S){S[0]&64&&ue(t,g[6]),S[0]&64&&h!==(h=`p-2 rounded-md text-xs ${g[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&o(e,"class",h)},d(g){g&&V(e)}}}function Ki(r){let e,t,h,g,S,f,i,n,u,b;return{c(){e=D("div"),t=D("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',h=F(),g=D("select"),S=D("option"),S.textContent="MySQL",f=D("option"),f.textContent="PostgreSQL",i=D("option"),i.textContent="MongoDB",n=D("option"),n.textContent="Redis",o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),S.__value="mysql",ve(S,S.__value),f.__value="postgresql",ve(f,f.__value),i.__value="mongodb",ve(i,i.__value),n.__value="redis",ve(n,n.__value),o(g,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[4].dbType===void 0&&Yt(()=>r[27].call(g))},m(d,m){q(d,e,m),_(e,t),_(e,h),_(e,g),_(g,S),_(g,f),_(g,i),_(g,n),cr(g,r[4].dbType,!0),u||(b=re(g,"change",r[27]),u=!0)},p(d,m){m[0]&16&&cr(g,d[4].dbType)},d(d){d&&V(e),u=!1,b()}}}function Vi(r){let e,t,h,g,S,f;return{c(){e=D("div"),t=D("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',h=F(),g=D("input"),o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(g,"type","text"),g.required=!0,o(g,"placeholder","root"),o(g,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){q(i,e,n),_(e,t),_(e,h),_(e,g),ve(g,r[4].username),S||(f=re(g,"input",r[30]),S=!0)},p(i,n){n[0]&16&&g.value!==i[4].username&&ve(g,i[4].username)},d(i){i&&V(e),S=!1,f()}}}function qi(r){let e,t,h,g,S,f,i,n,u,b,d,m,y;function w(p,C){return p[8]?uc:dc}let v=w(r),s=v(r);function c(p,C){return p[8]?_c:fc}let l=c(r),a=l(r);return{c(){e=D("div"),t=D("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',h=F(),g=D("div"),s.c(),S=F(),f=D("button"),a.c(),i=F(),n=D("div"),u=D("input"),b=F(),d=D("span"),d.textContent="保存密码",o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(f,"type","button"),o(f,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),o(g,"class","relative"),o(u,"type","checkbox"),o(u,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),o(d,"class","text-xs text-gray-700 dark:text-gray-300"),o(n,"class","flex items-center gap-1.5 cursor-pointer")},m(p,C){q(p,e,C),_(e,t),_(e,h),_(e,g),s.m(g,null),_(g,S),_(g,f),a.m(f,null),q(p,i,C),q(p,n,C),_(n,u),u.checked=r[4].savePassword,_(n,b),_(n,d),m||(y=[re(f,"click",r[33]),re(u,"change",r[34])],m=!0)},p(p,C){v===(v=w(p))&&s?s.p(p,C):(s.d(1),s=v(p),s&&(s.c(),s.m(g,S))),l!==(l=c(p))&&(a.d(1),a=l(p),a&&(a.c(),a.m(f,null))),C[0]&16&&(u.checked=p[4].savePassword)},d(p){p&&(V(e),V(i),V(n)),s.d(),a.d(),m=!1,Oe(y)}}}function dc(r){let e,t,h;return{c(){e=D("input"),o(e,"type","password"),o(e,"placeholder","输入密码"),o(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(g,S){q(g,e,S),ve(e,r[4].password),t||(h=re(e,"input",r[32]),t=!0)},p(g,S){S[0]&16&&e.value!==g[4].password&&ve(e,g[4].password)},d(g){g&&V(e),t=!1,h()}}}function uc(r){let e,t,h;return{c(){e=D("input"),o(e,"type","text"),o(e,"placeholder","输入密码"),o(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(g,S){q(g,e,S),ve(e,r[4].password),t||(h=re(e,"input",r[31]),t=!0)},p(g,S){S[0]&16&&e.value!==g[4].password&&ve(e,g[4].password)},d(g){g&&V(e),t=!1,h()}}}function fc(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),o(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function _c(r){let e,t,h;return{c(){e=le("svg"),t=le("path"),h=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),o(h,"stroke-linecap","round"),o(h,"stroke-linejoin","round"),o(h,"stroke-width","2"),o(h,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),o(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(g,S){q(g,e,S),_(e,t),_(e,h)},d(g){g&&V(e)}}}function Gi(r){let e,t,h,g,S,f;return{c(){e=D("div"),t=D("label"),t.textContent="数据库名",h=F(),g=D("input"),o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(g,"type","text"),o(g,"placeholder","例如：production_db"),o(g,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){q(i,e,n),_(e,t),_(e,h),_(e,g),ve(g,r[4].database),S||(f=re(g,"input",r[35]),S=!0)},p(i,n){n[0]&16&&g.value!==i[4].database&&ve(g,i[4].database)},d(i){i&&V(e),S=!1,f()}}}function pc(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,x,L,k,E,B,O,P,A,j,X,ee,Q,U,T,R,I,W,N,G,Z,se,z,M,K,H,J,Y,ne,ae,ie,fe,de,Se,Ce,ke,ge,ce,te,ye,pe,xe,Qe,Ze,Ie,je,Ue,Me,Be,$e,ht=r[5]?"测试中...":"测试连接",Ve,lt,et,oe=r[7]?"保存中...":r[1]?"更新连接":"添加连接",_e,Te,ot,Ee=r[2]==="ssh"&&ji(r),Pe=r[3]==="key"&&Ui(r),Ge=r[6]&&Ni(r),Je=r[2]==="database"&&Ki(r),Ye=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&Vi(r),qe=r[3]==="password"&&qi(r),Xe=r[2]==="database"&&Gi(r);return{c(){e=D("div"),t=D("label"),t.textContent="连接类型",h=F(),g=D("div"),S=D("button"),f=D("div"),i=le("svg"),n=le("path"),b=F(),d=D("span"),m=$("SSH"),v=F(),s=D("button"),c=D("div"),l=le("svg"),a=le("path"),C=F(),x=D("span"),L=$("数据库"),B=F(),O=D("button"),P=D("div"),A=le("svg"),j=le("path"),ee=F(),Q=D("span"),U=$("Docker"),I=F(),W=D("form"),N=D("div"),G=D("label"),G.innerHTML='连接名称 <span class="text-red-500">*</span>',Z=F(),se=D("input"),z=F(),Ee&&Ee.c(),M=F(),Pe&&Pe.c(),K=F(),Ge&&Ge.c(),H=F(),Je&&Je.c(),J=F(),Y=D("div"),ne=D("div"),ae=D("label"),ae.innerHTML='主机地址 <span class="text-red-500">*</span>',ie=F(),fe=D("input"),de=F(),Se=D("div"),Ce=D("label"),Ce.innerHTML='端口 <span class="text-red-500">*</span>',ke=F(),ge=D("input"),ce=F(),Ye&&Ye.c(),te=F(),qe&&qe.c(),ye=F(),Xe&&Xe.c(),pe=F(),xe=D("div"),Qe=D("label"),Qe.textContent="分组",Ze=F(),Ie=D("input"),je=F(),Ue=D("div"),Me=D("button"),Me.textContent="取消",Be=F(),$e=D("button"),Ve=$(ht),lt=F(),et=D("button"),_e=$(oe),o(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),o(n,"stroke-linecap","round"),o(n,"stroke-linejoin","round"),o(n,"stroke-width","2"),o(n,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),o(i,"class",u=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),o(i,"fill","none"),o(i,"stroke","currentColor"),o(i,"viewBox","0 0 24 24"),o(d,"class",y=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),o(f,"class","flex items-center justify-center gap-1"),o(S,"type","button"),o(S,"class",w=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),o(a,"stroke-linecap","round"),o(a,"stroke-linejoin","round"),o(a,"stroke-width","2"),o(a,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),o(l,"class",p=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),o(l,"fill","none"),o(l,"stroke","currentColor"),o(l,"viewBox","0 0 24 24"),o(x,"class",k=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),o(c,"class","flex items-center justify-center gap-1"),o(s,"type","button"),o(s,"class",E=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),o(j,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),o(A,"class",X=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),o(A,"fill","currentColor"),o(A,"viewBox","0 0 24 24"),o(Q,"class",T=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),o(P,"class","flex items-center justify-center gap-1"),o(O,"type","button"),o(O,"class",R=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),o(g,"class","grid grid-cols-3 gap-2"),o(e,"class","mb-4"),o(G,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(se,"type","text"),se.required=!0,o(se,"placeholder","例如：生产服务器-01"),o(se,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),o(ae,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(fe,"type","text"),fe.required=!0,o(fe,"placeholder","192.168.1.10 或 example.com"),o(fe,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),o(ne,"class","col-span-2"),o(Ce,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(ge,"type","text"),ge.required=!0,o(ge,"placeholder",r[13]()),o(ge,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),o(Y,"class","grid grid-cols-3 gap-2"),o(Qe,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),o(Ie,"type","text"),o(Ie,"placeholder","例如：生产环境"),o(Ie,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),o(Me,"type","button"),o(Me,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),o($e,"type","button"),$e.disabled=r[5],o($e,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),o(et,"type","submit"),et.disabled=r[7],o(et,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),o(Ue,"class","flex gap-2 pt-3"),o(W,"class","space-y-3")},m(be,He){q(be,e,He),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),_(f,i),_(i,n),_(f,b),_(f,d),_(d,m),_(g,v),_(g,s),_(s,c),_(c,l),_(l,a),_(c,C),_(c,x),_(x,L),_(g,B),_(g,O),_(O,P),_(P,A),_(A,j),_(P,ee),_(P,Q),_(Q,U),q(be,I,He),q(be,W,He),_(W,N),_(N,G),_(N,Z),_(N,se),ve(se,r[4].name),_(W,z),Ee&&Ee.m(W,null),_(W,M),Pe&&Pe.m(W,null),_(W,K),Ge&&Ge.m(W,null),_(W,H),Je&&Je.m(W,null),_(W,J),_(W,Y),_(Y,ne),_(ne,ae),_(ne,ie),_(ne,fe),ve(fe,r[4].host),_(Y,de),_(Y,Se),_(Se,Ce),_(Se,ke),_(Se,ge),ve(ge,r[4].port),_(W,ce),Ye&&Ye.m(W,null),_(W,te),qe&&qe.m(W,null),_(W,ye),Xe&&Xe.m(W,null),_(W,pe),_(W,xe),_(xe,Qe),_(xe,Ze),_(xe,Ie),ve(Ie,r[4].group),_(W,je),_(W,Ue),_(Ue,Me),_(Ue,Be),_(Ue,$e),_($e,Ve),_(Ue,lt),_(Ue,et),_(et,_e),Te||(ot=[re(S,"click",r[17]),re(s,"click",r[18]),re(O,"click",r[19]),re(se,"input",r[20]),re(fe,"input",r[28]),re(ge,"input",r[29]),re(Ie,"input",r[36]),re(Me,"click",r[37]),re($e,"click",r[10]),re(W,"submit",js(r[12]))],Te=!0)},p(be,He){He[0]&4&&u!==(u=`w-4 h-4 ${be[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&o(i,"class",u),He[0]&4&&y!==(y=`text-xs font-medium ${be[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&o(d,"class",y),He[0]&4&&w!==(w=`p-2 rounded-lg border-2 transition-all ${be[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&o(S,"class",w),He[0]&4&&p!==(p=`w-4 h-4 ${be[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&o(l,"class",p),He[0]&4&&k!==(k=`text-xs font-medium ${be[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&o(x,"class",k),He[0]&4&&E!==(E=`p-2 rounded-lg border-2 transition-all ${be[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&o(s,"class",E),He[0]&4&&X!==(X=`w-4 h-4 ${be[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&o(A,"class",X),He[0]&4&&T!==(T=`text-xs font-medium ${be[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&o(Q,"class",T),He[0]&4&&R!==(R=`p-2 rounded-lg border-2 transition-all ${be[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&o(O,"class",R),He[0]&16&&se.value!==be[4].name&&ve(se,be[4].name),be[2]==="ssh"?Ee?Ee.p(be,He):(Ee=ji(be),Ee.c(),Ee.m(W,M)):Ee&&(Ee.d(1),Ee=null),be[3]==="key"?Pe?Pe.p(be,He):(Pe=Ui(be),Pe.c(),Pe.m(W,K)):Pe&&(Pe.d(1),Pe=null),be[6]?Ge?Ge.p(be,He):(Ge=Ni(be),Ge.c(),Ge.m(W,H)):Ge&&(Ge.d(1),Ge=null),be[2]==="database"?Je?Je.p(be,He):(Je=Ki(be),Je.c(),Je.m(W,J)):Je&&(Je.d(1),Je=null),He[0]&16&&fe.value!==be[4].host&&ve(fe,be[4].host),He[0]&16&&ge.value!==be[4].port&&ve(ge,be[4].port),be[3]==="password"||be[2]==="database"||be[2]==="docker"?Ye?Ye.p(be,He):(Ye=Vi(be),Ye.c(),Ye.m(W,te)):Ye&&(Ye.d(1),Ye=null),be[3]==="password"?qe?qe.p(be,He):(qe=qi(be),qe.c(),qe.m(W,ye)):qe&&(qe.d(1),qe=null),be[2]==="database"?Xe?Xe.p(be,He):(Xe=Gi(be),Xe.c(),Xe.m(W,pe)):Xe&&(Xe.d(1),Xe=null),He[0]&16&&Ie.value!==be[4].group&&ve(Ie,be[4].group),He[0]&32&&ht!==(ht=be[5]?"测试中...":"测试连接")&&ue(Ve,ht),He[0]&32&&($e.disabled=be[5]),He[0]&130&&oe!==(oe=be[7]?"保存中...":be[1]?"更新连接":"添加连接")&&ue(_e,oe),He[0]&128&&(et.disabled=be[7])},d(be){be&&(V(e),V(I),V(W)),Ee&&Ee.d(),Pe&&Pe.d(),Ge&&Ge.d(),Je&&Je.d(),Ye&&Ye.d(),qe&&qe.d(),Xe&&Xe.d(),Te=!1,Oe(ot)}}}function gc(r){let e,t,h;function g(f){r[39](f)}let S={onClose:r[38],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[pc]},$$scope:{ctx:r}};return r[0]!==void 0&&(S.isOpen=r[0]),e=new ur({props:S}),rt.push(()=>_t(e,"isOpen",g)),{c(){ze(e.$$.fragment)},m(f,i){Fe(e,f,i),h=!0},p(f,i){const n={};i[0]&1&&(n.onClose=f[38]),i[0]&2&&(n.title=f[1]?"编辑连接":"添加连接"),i[0]&1023|i[1]&4096&&(n.$$scope={dirty:i,ctx:f}),!t&&i[0]&1&&(t=!0,n.isOpen=f[0],ft(()=>t=!1)),e.$set(n)},i(f){h||(Le(e.$$.fragment,f),h=!0)},o(f){Re(e.$$.fragment,f),h=!1},d(f){We(e,f)}}}function mc(r,e,t){let{isOpen:h=!1}=e,{onAdd:g=()=>{}}=e,{onUpdate:S=()=>{}}=e,{editingAsset:f=null}=e,i="ssh",n="password",u=!1,b="",d=!1,m=!1,y=!1,w=!1,v=!1,s={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function c(){if(!window.wailsBindings){t(6,b="Wails 绑定未加载");return}if(!s.host){t(6,b="请填写主机地址");return}if(n==="password"&&!s.password){t(6,b="请输入密码以测试连接");return}if(n==="password"&&!s.username){t(6,b="请填写用户名");return}if(n==="key"&&!s.keyPath){t(6,b="请选择 SSH 密钥文件");return}t(5,u=!0),t(6,b="");try{const H=n==="key"?s.keyPath:s.password;await window.wailsBindings.TestConnection(s.host,parseInt(s.port),s.username,n,H,s.passphrase||""),t(6,b="✓ 连接成功")}catch(H){console.error("Connection test failed:",H),t(6,b="✗ 连接失败: "+H)}finally{t(5,u=!1)}}async function l(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const H=await window.wailsBindings.SelectSSHKeyFile();H&&t(4,s.keyPath=H,s)}catch(H){console.error("Failed to select key file:",H),t(6,b="选择密钥文件失败: "+H)}}async function a(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!s.name||!s.host){alert("请填写必填字段（连接名称、主机地址）");return}if(n==="password"&&!s.username){alert("密码认证需要填写用户名");return}if(n==="password"&&!s.password){alert("密码认证需要输入密码");return}if(n==="key"&&!s.keyPath){alert("密钥认证需要选择密钥文件");return}t(7,d=!0);try{const H=!!s.id,J={id:H?s.id:`conn_${Date.now()}`,name:s.name,host:s.host,port:parseInt(s.port),user:s.username,auth_type:n,key_path:n==="key"?s.keyPath:"",tags:[s.group||"默认分组"],type:i,metadata:{database:s.database||void 0}};H?(await window.wailsBindings.UpdateConnection(J),n==="password"&&s.password&&s.savePassword?await window.wailsBindings.SavePassword(J.id,s.password):n==="password"&&!s.savePassword&&await window.wailsBindings.DeletePassword(J.id),S(J)):(g(J),n==="password"&&s.password&&s.savePassword&&await window.wailsBindings.SavePassword(J.id,s.password)),t(0,h=!1)}catch(H){console.error("Failed to save connection:",H),alert("保存连接失败: "+H)}finally{t(7,d=!1)}}function p(){t(4,s={id:"",name:"",host:"",port:C(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(6,b=""),t(8,m=!1),t(9,y=!1)}function C(){switch(i){case"ssh":return"22";case"docker":return"2375";case"database":switch(s.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function x(){var H,J,Y;if(!(!f||!h||w))try{const ne=await window.wailsBindings.GetConnection(f.id);if(ne){t(4,s={id:ne.id,name:ne.name||"",host:ne.host||"",port:((H=ne.port)==null?void 0:H.toString())||"",username:ne.user||"",password:"",savePassword:!1,keyPath:ne.key_path||"",passphrase:"",group:((J=ne.tags)==null?void 0:J[0])||"",dbType:"mysql",database:((Y=ne.metadata)==null?void 0:Y.database)||""}),t(2,i=ne.type||"ssh"),t(3,n=ne.auth_type||"password"),w=!0;try{if(await window.wailsBindings.HasPassword(ne.id)){t(4,s.savePassword=!0,s);const ie=await window.wailsBindings.GetPassword(ne.id);t(4,s.password=ie||"",s)}}catch(ae){console.warn("Failed to load password:",ae)}}}catch(ne){console.error("Failed to load connection:",ne)}}const L=()=>t(2,i="ssh"),k=()=>t(2,i="database"),E=()=>t(2,i="docker");function B(){s.name=this.value,t(4,s),t(0,h),t(1,f)}const O=()=>{t(3,n="password"),t(6,b="")},P=()=>{t(3,n="key"),t(6,b="")};function A(){s.keyPath=this.value,t(4,s),t(0,h),t(1,f)}function j(){s.passphrase=this.value,t(4,s),t(0,h),t(1,f)}function X(){s.passphrase=this.value,t(4,s),t(0,h),t(1,f)}const ee=()=>t(9,y=!y);function Q(){s.dbType=ds(this),t(4,s),t(0,h),t(1,f)}function U(){s.host=this.value,t(4,s),t(0,h),t(1,f)}function T(){s.port=this.value,t(4,s),t(0,h),t(1,f)}function R(){s.username=this.value,t(4,s),t(0,h),t(1,f)}function I(){s.password=this.value,t(4,s),t(0,h),t(1,f)}function W(){s.password=this.value,t(4,s),t(0,h),t(1,f)}const N=()=>t(8,m=!m);function G(){s.savePassword=this.checked,t(4,s),t(0,h),t(1,f)}function Z(){s.database=this.value,t(4,s),t(0,h),t(1,f)}function se(){s.group=this.value,t(4,s),t(0,h),t(1,f)}const z=()=>t(0,h=!1),M=()=>{t(0,h=!1)};function K(H){h=H,t(0,h)}return r.$$set=H=>{"isOpen"in H&&t(0,h=H.isOpen),"onAdd"in H&&t(14,g=H.onAdd),"onUpdate"in H&&t(15,S=H.onUpdate),"editingAsset"in H&&t(1,f=H.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(16,v=h),r.$$.dirty[0]&65537&&v&&!h&&p(),r.$$.dirty[0]&19&&h&&!f&&!s.id&&(s.port||t(4,s.port=C(),s)),r.$$.dirty[0]&16&&s.port===""&&t(4,s.port=C(),s),r.$$.dirty[0]&12&&(i==="ssh"?n!=="password"&&n!=="key"&&t(3,n="password"):t(3,n="password")),r.$$.dirty[0]&3&&h&&f&&x(),r.$$.dirty[0]&18&&f&&s.id!==f.id&&(w=!1),r.$$.dirty[0]&65539&&!v&&h&&f&&(w=!1)},[h,f,i,n,s,u,b,d,m,y,c,l,a,C,g,S,v,L,k,E,B,O,P,A,j,X,ee,Q,U,T,R,I,W,N,G,Z,se,z,M,K]}class vc extends nt{constructor(e){super(),st(this,e,mc,gc,it,{isOpen:0,onAdd:14,onUpdate:15,editingAsset:1},null,[-1,-1])}}function bc(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,x,L,k,E,B,O,P,A,j,X,ee;return{c(){e=D("div"),t=D("div"),t.textContent="哈",h=F(),g=D("div"),S=D("h3"),f=$("AHaSSHTools"),n=F(),u=D("p"),b=$("啊哈 SSH 连接工具"),m=F(),y=D("p"),w=$("版本 1.0.0"),s=F(),c=D("p"),l=$("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),p=F(),C=D("button"),x=le("svg"),L=le("path"),k=F(),E=D("span"),E.textContent="访问 GitHub",O=F(),P=D("p"),A=$("© 2026 AHaSSHTools. All rights reserved."),o(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),o(S,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),o(u,"class",d="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),o(y,"class",v="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),o(g,"class","text-center space-y-1"),o(c,"class",a="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),o(L,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),o(x,"class","w-5 h-5"),o(x,"viewBox","0 0 24 24"),o(x,"fill","currentColor"),o(C,"class",B="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),o(P,"class",j="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),o(e,"class","flex flex-col items-center gap-5 py-4")},m(Q,U){q(Q,e,U),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),_(g,n),_(g,u),_(u,b),_(g,m),_(g,y),_(y,w),_(e,s),_(e,c),_(c,l),_(e,p),_(e,C),_(C,x),_(x,L),_(C,k),_(C,E),_(e,O),_(e,P),_(P,A),X||(ee=re(C,"click",wc),X=!0)},p(Q,U){U&4&&i!==(i="text-xl font-bold "+(Q[2]==="dark"?"text-white":"text-gray-900"))&&o(S,"class",i),U&4&&d!==(d="text-sm "+(Q[2]==="dark"?"text-gray-400":"text-gray-500"))&&o(u,"class",d),U&4&&v!==(v="text-xs "+(Q[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&o(y,"class",v),U&4&&a!==(a="text-sm text-center max-w-xs "+(Q[2]==="dark"?"text-gray-400":"text-gray-600"))&&o(c,"class",a),U&4&&B!==(B="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(Q[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&o(C,"class",B),U&4&&j!==(j="text-xs "+(Q[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&o(P,"class",j)},d(Q){Q&&V(e),X=!1,ee()}}}function yc(r){let e,t,h;function g(f){r[4](f)}let S={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[bc]},$$scope:{ctx:r}};return r[0]!==void 0&&(S.isOpen=r[0]),e=new ur({props:S}),rt.push(()=>_t(e,"isOpen",g)),{c(){ze(e.$$.fragment)},m(f,i){Fe(e,f,i),h=!0},p(f,[i]){const n={};i&2&&(n.onClose=f[1]),i&68&&(n.$$scope={dirty:i,ctx:f}),!t&&i&1&&(t=!0,n.isOpen=f[0],ft(()=>t=!1)),e.$set(n)},i(f){h||(Le(e.$$.fragment,f),h=!0)},o(f){Re(e.$$.fragment,f),h=!1},d(f){We(e,f)}}}async function wc(){try{await(await ar(()=>Promise.resolve().then(()=>ws),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function Sc(r,e,t){let{isOpen:h=!1}=e,{onClose:g=()=>{}}=e,{themeStore:S={subscribe:()=>()=>{}}}=e,f="light";const i=S.subscribe(u=>{t(2,f=u)});Vt(()=>()=>{i()});function n(u){h=u,t(0,h)}return r.$$set=u=>{"isOpen"in u&&t(0,h=u.isOpen),"onClose"in u&&t(1,g=u.onClose),"themeStore"in u&&t(3,S=u.themeStore)},[h,g,f,S,n]}class kc extends nt{constructor(e){super(),st(this,e,Sc,yc,it,{isOpen:0,onClose:1,themeStore:3})}}function Ji(r,e,t){const h=r.slice();return h[57]=e[t],h}function Xi(r,e,t){const h=r.slice();return h[57]=e[t],h}function Yi(r){let e,t=r[12].length+"",h;return{c(){e=D("span"),h=$(t),o(e,"class","absolute -top-1 -right-1 flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white bg-red-500 rounded-full")},m(g,S){q(g,e,S),_(e,h)},p(g,S){S[0]&4096&&t!==(t=g[12].length+"")&&ue(h,t)},d(g){g&&V(e)}}}function Cc(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),o(e,"class","w-5 h-5"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function xc(r){let e,t;return{c(){e=le("svg"),t=le("path"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),o(e,"class","w-5 h-5"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(h,g){q(h,e,g),_(e,t)},d(h){h&&V(e)}}}function Zi(r){let e,t,h,g,S,f;return{c(){e=D("button"),t=le("svg"),h=le("path"),o(h,"stroke-linecap","round"),o(h,"stroke-linejoin","round"),o(h,"stroke-width","2"),o(h,"d","M9 5l7 7-7 7"),o(t,"class","w-5 h-5"),o(t,"fill","none"),o(t,"stroke","currentColor"),o(t,"viewBox","0 0 24 24"),e.disabled=r[2],o(e,"class",g="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),o(e,"title","展开资产列表")},m(i,n){q(i,e,n),_(e,t),_(t,h),S||(f=re(e,"click",r[17]),S=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&g!==(g="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&o(e,"class",g)},d(i){i&&V(e),S=!1,f()}}}function Qi(r){let e,t,h,g,S,f,i,n,u;return{c(){e=D("div"),t=D("div"),h=F(),g=D("button"),S=le("svg"),f=le("path"),o(t,"class","h-full w-full rounded svelte-m8xeqv"),o(f,"stroke-linecap","round"),o(f,"stroke-linejoin","round"),o(f,"stroke-width","2"),o(f,"d","M15 19l-7-7 7-7"),o(S,"class","w-4 h-4"),o(S,"fill","none"),o(S,"stroke","currentColor"),o(S,"viewBox","0 0 24 24"),g.disabled=r[2],o(g,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),o(g,"title","折叠资产列表"),o(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),o(e,"role","separator"),o(e,"aria-hidden","true"),me(e,"cursor",r[2]?"default":"col-resize"),me(e,"height","100%"),me(e,"padding","0 2px"),me(e,"pointer-events",r[2]?"none":"auto")},m(b,d){q(b,e,d),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),n||(u=[re(g,"click",r[17]),re(e,"mousedown",r[19])],n=!0)},p(b,d){d[0]&4&&(g.disabled=b[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&o(g,"class",i),d[0]&4&&me(e,"cursor",b[2]?"default":"col-resize"),d[0]&4&&me(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&V(e),n=!1,Oe(u)}}}function $i(r){let e,t,h,g,S,f,i,n,u;return{c(){e=D("div"),t=D("div"),h=F(),g=D("button"),S=le("svg"),f=le("path"),o(t,"class","h-full w-full rounded svelte-m8xeqv"),o(f,"stroke-linecap","round"),o(f,"stroke-linejoin","round"),o(f,"stroke-width","2"),o(f,"d","M9 5l7 7-7 7"),o(S,"class","w-4 h-4"),o(S,"fill","none"),o(S,"stroke","currentColor"),o(S,"viewBox","0 0 24 24"),g.disabled=r[2],o(g,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),o(g,"title","折叠右侧面板"),o(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),o(e,"role","separator"),o(e,"aria-hidden","true"),me(e,"cursor",r[2]?"default":"col-resize"),me(e,"height","100%"),me(e,"padding","0 2px"),me(e,"pointer-events",r[2]?"none":"auto")},m(b,d){q(b,e,d),_(e,t),_(e,h),_(e,g),_(g,S),_(S,f),n||(u=[re(g,"click",r[18]),re(e,"mousedown",r[20])],n=!0)},p(b,d){d[0]&4&&(g.disabled=b[2]),d[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&o(g,"class",i),d[0]&4&&me(e,"cursor",b[2]?"default":"col-resize"),d[0]&4&&me(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&V(e),n=!1,Oe(u)}}}function es(r){let e,t,h,g,S,f;return{c(){e=D("button"),t=le("svg"),h=le("path"),o(h,"stroke-linecap","round"),o(h,"stroke-linejoin","round"),o(h,"stroke-width","2"),o(h,"d","M15 19l-7-7 7-7"),o(t,"class","w-5 h-5"),o(t,"fill","none"),o(t,"stroke","currentColor"),o(t,"viewBox","0 0 24 24"),e.disabled=r[2],o(e,"class",g="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),o(e,"title","展开右侧面板")},m(i,n){q(i,e,n),_(e,t),_(t,h),S||(f=re(e,"click",r[18]),S=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&g!==(g="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&o(e,"class",g)},d(i){i&&V(e),S=!1,f()}}}function ts(r){let e,t,h,g,S,f,i,n,u,b,d=r[12].length+"",m,y,w,v,s,c,l=r[14].length+"",a,p,C,x,L,k,E,B;function O(j,X){if(j[13].activeTab==="active"&&j[12].length===0)return Mc;if(j[13].activeTab==="active")return Dc;if(j[13].activeTab==="history"&&j[14].length===0)return Lc;if(j[13].activeTab==="history")return Ec}let P=O(r),A=P&&P(r);return{c(){e=D("div"),t=D("div"),h=D("div"),g=D("h3"),g.textContent="上传任务",S=F(),f=D("button"),f.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',i=F(),n=D("div"),u=D("button"),b=$("进行中 ("),m=$(d),y=$(")"),v=F(),s=D("button"),c=$("历史 ("),a=$(l),p=$(")"),L=F(),A&&A.c(),o(g,"class","font-semibold text-sm"),o(f,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),o(h,"class","flex items-center justify-between mb-3"),o(u,"class",w="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="active"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),o(s,"class",C="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(r[13].activeTab==="history"?(r[0]==="dark","bg-blue-600 text-white"):r[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100")),o(n,"class","flex gap-2"),o(t,"class",x="p-4 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),o(e,"class",k="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(r[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv"),me(e,"height","calc(100vh - 3.5rem)")},m(j,X){q(j,e,X),_(e,t),_(t,h),_(h,g),_(h,S),_(h,f),_(t,i),_(t,n),_(n,u),_(u,b),_(u,m),_(u,y),_(n,v),_(n,s),_(s,c),_(s,a),_(s,p),_(e,L),A&&A.m(e,null),E||(B=[re(f,"click",r[37]),re(u,"click",r[38]),re(s,"click",r[39])],E=!0)},p(j,X){X[0]&4096&&d!==(d=j[12].length+"")&&ue(m,d),X[0]&8193&&w!==(w="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(j[13].activeTab==="active"?(j[0]==="dark","bg-blue-600 text-white"):j[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&o(u,"class",w),X[0]&16384&&l!==(l=j[14].length+"")&&ue(a,l),X[0]&8193&&C!==(C="flex-1 py-1.5 px-3 text-xs font-medium rounded-lg transition-colors "+(j[13].activeTab==="history"?(j[0]==="dark","bg-blue-600 text-white"):j[0]==="dark"?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"))&&o(s,"class",C),X[0]&1&&x!==(x="p-4 border-b "+(j[0]==="dark"?"border-gray-700":"border-gray-200"))&&o(t,"class",x),P===(P=O(j))&&A?A.p(j,X):(A&&A.d(1),A=P&&P(j),A&&(A.c(),A.m(e,null))),X[0]&1&&k!==(k="fixed top-14 right-0 z-50 w-96 max-h-[600px] "+(j[0]==="dark"?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900")+" border-l shadow-xl flex flex-col svelte-m8xeqv")&&o(e,"class",k)},d(j){j&&V(e),A&&A.d(),E=!1,Oe(B)}}}function Ec(r){let e,t,h,g,S,f,i,n,u=[],b=new Map,d,m,y=Ke(r[14]);const w=v=>v[57].id;for(let v=0;v<y.length;v+=1){let s=Ji(r,y,v),c=w(s);b.set(c,u[v]=is(c,s))}return{c(){e=D("div"),t=D("div"),h=D("button"),g=$("清空历史记录"),i=F(),n=D("div");for(let v=0;v<u.length;v+=1)u[v].c();o(h,"class",S="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(r[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600")),o(t,"class",f="p-3 border-b "+(r[0]==="dark"?"border-gray-700":"border-gray-200")),o(n,"class","flex-1 overflow-y-auto p-4 space-y-3"),o(e,"class","flex-1 flex flex-col")},m(v,s){q(v,e,s),_(e,t),_(t,h),_(h,g),_(e,i),_(e,n);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(n,null);d||(m=re(h,"click",r[41]),d=!0)},p(v,s){s[0]&1&&S!==(S="w-full py-2 px-3 text-xs font-medium rounded-lg transition-colors "+(v[0]==="dark"?"hover:bg-red-900/30 text-red-400":"hover:bg-red-50 text-red-600"))&&o(h,"class",S),s[0]&1&&f!==(f="p-3 border-b "+(v[0]==="dark"?"border-gray-700":"border-gray-200"))&&o(t,"class",f),s[0]&16385&&(y=Ke(v[14]),u=Pt(u,s,w,1,v,y,b,n,qt,is,null,Ji))},d(v){v&&V(e);for(let s=0;s<u.length;s+=1)u[s].d();d=!1,m()}}}function Lc(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">暂无历史记录</span>',o(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function Dc(r){let e,t=[],h=new Map,g=Ke(r[12]);const S=f=>f[57].id;for(let f=0;f<g.length;f+=1){let i=Xi(r,g,f),n=S(i);h.set(n,t[f]=ns(n,i))}return{c(){e=D("div");for(let f=0;f<t.length;f+=1)t[f].c();o(e,"class","flex-1 overflow-y-auto p-4 space-y-3")},m(f,i){q(f,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(f,i){i[0]&4097&&(g=Ke(f[12]),t=Pt(t,i,S,1,f,g,h,e,qt,ns,null,Xi))},d(f){f&&V(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Mc(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <span class="text-sm">暂无上传任务</span>',o(e,"class","flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 gap-3")},m(t,h){q(t,e,h)},p:we,d(t){t&&V(e)}}}function Tc(r){let e;return{c(){e=D("span"),e.textContent="已取消",o(e,"class","text-gray-500")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function Bc(r){let e;return{c(){e=D("span"),e.textContent="失败",o(e,"class","text-red-500")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function Ac(r){let e;return{c(){e=D("span"),e.textContent="完成",o(e,"class","text-green-500")},m(t,h){q(t,e,h)},d(t){t&&V(e)}}}function rs(r){let e,t=r[57].error+"",h,g;return{c(){e=D("div"),h=$(t),o(e,"class","text-xs text-red-500 dark:text-red-400 mt-1 truncate"),o(e,"title",g=r[57].error)},m(S,f){q(S,e,f),_(e,h)},p(S,f){f[0]&16384&&t!==(t=S[57].error+"")&&ue(h,t),f[0]&16384&&g!==(g=S[57].error)&&o(e,"title",g)},d(S){S&&V(e)}}}function is(r,e){let t,h,g,S,f=e[57].filename+"",i,n,u,b,d,m,y,w,v=Dt(e[57].totalBytes)+"",s,c,l,a,p,C,x,L;function k(A,j){if(A[57].status==="completed")return Ac;if(A[57].status==="failed")return Bc;if(A[57].status==="cancelled")return Tc}let E=k(e),B=E&&E(e),O=e[57].status==="failed"&&e[57].error&&rs(e);function P(){return e[42](e[57])}return{key:r,first:null,c(){t=D("div"),h=D("div"),g=D("div"),S=D("div"),i=$(f),u=F(),b=D("div"),B&&B.c(),d=F(),m=D("span"),m.textContent="•",y=F(),w=D("span"),s=$(v),c=F(),O&&O.c(),l=F(),a=D("button"),a.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',p=F(),o(S,"class","text-sm font-medium truncate"),o(S,"title",n=e[57].filename),o(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2"),o(g,"class","flex-1 min-w-0"),o(a,"class","p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 dark:text-gray-400 transition-colors ml-3"),o(a,"title","删除记录"),o(h,"class","flex items-center justify-between"),o(t,"class",C="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(A,j){q(A,t,j),_(t,h),_(h,g),_(g,S),_(S,i),_(g,u),_(g,b),B&&B.m(b,null),_(b,d),_(b,m),_(b,y),_(b,w),_(w,s),_(g,c),O&&O.m(g,null),_(h,l),_(h,a),_(t,p),x||(L=re(a,"click",P),x=!0)},p(A,j){e=A,j[0]&16384&&f!==(f=e[57].filename+"")&&ue(i,f),j[0]&16384&&n!==(n=e[57].filename)&&o(S,"title",n),E!==(E=k(e))&&(B&&B.d(1),B=E&&E(e),B&&(B.c(),B.m(b,d))),j[0]&16384&&v!==(v=Dt(e[57].totalBytes)+"")&&ue(s,v),e[57].status==="failed"&&e[57].error?O?O.p(e,j):(O=rs(e),O.c(),O.m(g,null)):O&&(O.d(1),O=null),j[0]&1&&C!==(C="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&o(t,"class",C)},d(A){A&&V(t),B&&B.d(),O&&O.d(),x=!1,L()}}}function ss(r){let e,t=oi(r[57].speed)+"",h;return{c(){e=$("• "),h=$(t)},m(g,S){q(g,e,S),q(g,h,S)},p(g,S){S[0]&4096&&t!==(t=oi(g[57].speed)+"")&&ue(h,t)},d(g){g&&(V(e),V(h))}}}function ns(r,e){let t,h,g,S,f=e[57].filename+"",i,n,u,b,d=Dt(e[57].bytesSent)+"",m,y,w=Dt(e[57].totalBytes)+"",v,s,c,l,a,p=Math.round(sr(e[57]))+"",C,x,L,k,E,B,O,P,A,j,X,ee,Q,U=e[57].speed&&ss(e);function T(){return e[40](e[57])}return{key:r,first:null,c(){t=D("div"),h=D("div"),g=D("div"),S=D("div"),i=$(f),u=F(),b=D("div"),m=$(d),y=$(" / "),v=$(w),s=F(),U&&U.c(),c=F(),l=D("div"),a=D("span"),C=$(p),x=$("%"),L=F(),k=D("button"),k.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',E=F(),B=D("div"),O=D("div"),j=F(),o(S,"class","text-sm font-medium truncate"),o(S,"title",n=e[57].filename),o(b,"class","text-xs text-gray-500 dark:text-gray-400 mt-0.5"),o(g,"class","flex-1 min-w-0"),o(a,"class","text-xs font-medium text-blue-600 dark:text-blue-400"),o(k,"class","p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-red-500 transition-colors"),o(k,"title","取消上传"),o(l,"class","flex items-center gap-2 ml-3"),o(h,"class","flex items-center justify-between mb-2"),o(O,"class","h-full bg-blue-500 transition-all duration-300"),o(O,"style",P=`width: ${Math.min(100,Math.max(0,sr(e[57])))}%`),o(B,"class",A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden"),o(t,"class",X="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3"),this.first=t},m(R,I){q(R,t,I),_(t,h),_(h,g),_(g,S),_(S,i),_(g,u),_(g,b),_(b,m),_(b,y),_(b,v),_(b,s),U&&U.m(b,null),_(h,c),_(h,l),_(l,a),_(a,C),_(a,x),_(l,L),_(l,k),_(t,E),_(t,B),_(B,O),_(t,j),ee||(Q=re(k,"click",T),ee=!0)},p(R,I){e=R,I[0]&4096&&f!==(f=e[57].filename+"")&&ue(i,f),I[0]&4096&&n!==(n=e[57].filename)&&o(S,"title",n),I[0]&4096&&d!==(d=Dt(e[57].bytesSent)+"")&&ue(m,d),I[0]&4096&&w!==(w=Dt(e[57].totalBytes)+"")&&ue(v,w),e[57].speed?U?U.p(e,I):(U=ss(e),U.c(),U.m(b,null)):U&&(U.d(1),U=null),I[0]&4096&&p!==(p=Math.round(sr(e[57]))+"")&&ue(C,p),I[0]&4096&&P!==(P=`width: ${Math.min(100,Math.max(0,sr(e[57])))}%`)&&o(O,"style",P),I[0]&1&&A!==(A="h-2 "+(e[0]==="dark"?"bg-gray-600":"bg-gray-200")+" rounded-full overflow-hidden")&&o(B,"class",A),I[0]&1&&X!==(X="rounded-lg "+(e[0]==="dark"?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200")+" border p-3")&&o(t,"class",X)},d(R){R&&V(t),U&&U.d(),ee=!1,Q()}}}function Rc(r){let e,t,h,g,S,f,i,n,u,b,d,m,y,w,v,s,c,l,a,p,C,x,L,k,E,B,O,P,A,j,X,ee,Q,U,T,R,I,W,N,G,Z,se,z,M,K,H,J,Y,ne,ae,ie,fe,de,Se,Ce,ke,ge,ce,te,ye,pe,xe,Qe,Ze,Ie,je,Ue,Me,Be,$e,ht,Ve=r[12].length>0&&Yi(r);function lt(he,De){return he[0]==="dark"?xc:Cc}let et=lt(r),oe=et(r),_e=r[4]&&Zi(r);I=new dn({props:{onConnect:r[22],onAddClick:r[29],onDelete:r[30],onEdit:r[24]}});let Te=!r[4]&&Qi(r),ot={};se=new Po({props:ot}),r[31](se);let Ee=!r[5]&&$i(r);Y=new ha({}),Se=new ya({});let Pe=r[5]&&es(r);function Ge(he){r[32](he)}function Je(he){r[33](he)}let Ye={onAdd:r[23],onUpdate:r[25]};r[2]!==void 0&&(Ye.isOpen=r[2]),r[6]!==void 0&&(Ye.editingAsset=r[6]),ce=new vc({props:Ye}),rt.push(()=>_t(ce,"isOpen",Ge)),rt.push(()=>_t(ce,"editingAsset",Je));function qe(he){r[34](he)}let Xe={themeStore:Kt};r[1]!==void 0&&(Xe.isOpen=r[1]),xe=new oc({props:Xe}),rt.push(()=>_t(xe,"isOpen",qe));function be(he){r[36](he)}let He={onClose:r[35],themeStore:Kt};r[3]!==void 0&&(He.isOpen=r[3]),Ie=new kc({props:He}),rt.push(()=>_t(Ie,"isOpen",be));let tt=r[13].isPanelOpen&&ts(r);return{c(){e=D("div"),t=D("header"),h=D("div"),g=D("div"),g.textContent="哈",S=F(),f=D("div"),i=D("div"),n=$("啊哈 SSH 连接工具"),b=F(),d=D("div"),m=$("AHa SSH Manager"),w=F(),v=D("div"),s=D("div"),c=D("button"),l=le("svg"),a=le("path"),C=F(),Ve&&Ve.c(),x=F(),L=D("button"),oe.c(),B=F(),O=D("button"),P=le("svg"),A=le("path"),j=F(),X=D("span"),X.textContent="开发工具",Q=F(),U=D("div"),_e&&_e.c(),T=F(),R=D("div"),ze(I.$$.fragment),N=F(),Te&&Te.c(),G=F(),Z=D("div"),ze(se.$$.fragment),M=F(),Ee&&Ee.c(),K=F(),H=D("div"),J=D("div"),ze(Y.$$.fragment),ne=F(),ae=D("div"),ie=D("div"),fe=F(),de=D("div"),ze(Se.$$.fragment),ke=F(),Pe&&Pe.c(),ge=F(),ze(ce.$$.fragment),pe=F(),ze(xe.$$.fragment),Ze=F(),ze(Ie.$$.fragment),Ue=F(),tt&&tt.c(),o(g,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),o(i,"class",u="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),o(d,"class",y="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),o(h,"class","flex items-center gap-3"),o(a,"stroke-linecap","round"),o(a,"stroke-linejoin","round"),o(a,"stroke-width","2"),o(a,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),o(l,"class","w-5 h-5"),o(l,"fill","none"),o(l,"stroke","currentColor"),o(l,"viewBox","0 0 24 24"),o(c,"class",p="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),o(c,"title","上传任务"),o(s,"class","relative"),L.disabled=r[2],o(L,"class",k="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),o(L,"title",E=r[0]==="dark"?"切换到浅色模式":"切换到深色模式"),o(A,"stroke-linecap","round"),o(A,"stroke-linejoin","round"),o(A,"stroke-width","2"),o(A,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),o(P,"class","w-4 h-4"),o(P,"fill","none"),o(P,"stroke","currentColor"),o(P,"viewBox","0 0 24 24"),o(X,"class","text-sm"),O.disabled=r[2],o(O,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),o(v,"class","ml-auto flex items-center gap-3"),o(t,"class",ee="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),me(t,"pointer-events",r[2]?"none":"auto"),o(R,"class",W="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),me(R,"width",(r[4]?"0":r[10])+"px"),me(R,"min-width",(r[4]?"0":r[10])+"px"),ir(R,"collapsed",r[4]),o(Z,"class",z="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),o(J,"class","overflow-hidden"),me(J,"height",r[8]+"%"),me(J,"min-height","0"),o(ie,"class","w-full h-full rounded svelte-m8xeqv"),o(ae,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),o(ae,"role","separator"),o(ae,"aria-hidden","true"),me(ae,"cursor",r[2]?"default":"row-resize"),me(ae,"width","100%"),me(ae,"padding","2px 0"),me(ae,"pointer-events",r[2]?"none":"auto"),o(de,"class","overflow-hidden"),me(de,"height",100-r[8]+"%"),me(de,"min-height","0"),o(H,"data-right-panel","true"),o(H,"class",Ce="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),me(H,"width",(r[5]?"0":r[9])+"px"),me(H,"min-width",r[5]?"0":"300px"),me(H,"max-width","600px"),ir(H,"collapsed",r[5]),o(U,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),o(e,"class",Me="h-screen w-full flex flex-col "+r[11]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(he,De){q(he,e,De),_(e,t),_(t,h),_(h,g),_(h,S),_(h,f),_(f,i),_(i,n),_(f,b),_(f,d),_(d,m),_(t,w),_(t,v),_(v,s),_(s,c),_(c,l),_(l,a),_(s,C),Ve&&Ve.m(s,null),_(v,x),_(v,L),oe.m(L,null),_(v,B),_(v,O),_(O,P),_(P,A),_(O,j),_(O,X),_(e,Q),_(e,U),_e&&_e.m(U,null),_(U,T),_(U,R),Fe(I,R,null),_(U,N),Te&&Te.m(U,null),_(U,G),_(U,Z),Fe(se,Z,null),_(U,M),Ee&&Ee.m(U,null),_(U,K),_(U,H),_(H,J),Fe(Y,J,null),_(H,ne),_(H,ae),_(ae,ie),_(H,fe),_(H,de),Fe(Se,de,null),_(U,ke),Pe&&Pe.m(U,null),_(e,ge),Fe(ce,e,null),_(e,pe),Fe(xe,e,null),_(e,Ze),Fe(Ie,e,null),_(e,Ue),tt&&tt.m(e,null),Be=!0,$e||(ht=[re(c,"click",r[28]),re(L,"click",r[15]),re(O,"click",r[16]),re(ae,"mousedown",r[21])],$e=!0)},p(he,De){(!Be||De[0]&1&&u!==(u="font-semibold text-sm "+(he[0]==="dark"?"text-white":"text-gray-900")))&&o(i,"class",u),(!Be||De[0]&1&&y!==(y="text-xs "+(he[0]==="dark"?"text-gray-400":"text-gray-500")))&&o(d,"class",y),(!Be||De[0]&1&&p!==(p="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm "+(he[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-blue-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&o(c,"class",p),he[12].length>0?Ve?Ve.p(he,De):(Ve=Yi(he),Ve.c(),Ve.m(s,null)):Ve&&(Ve.d(1),Ve=null),et!==(et=lt(he))&&(oe.d(1),oe=et(he),oe&&(oe.c(),oe.m(L,null))),(!Be||De[0]&4)&&(L.disabled=he[2]),(!Be||De[0]&1&&k!==(k="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(he[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&o(L,"class",k),(!Be||De[0]&1&&E!==(E=he[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&o(L,"title",E),(!Be||De[0]&4)&&(O.disabled=he[2]),(!Be||De[0]&1&&ee!==(ee="h-14 flex-shrink-0 "+(he[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&o(t,"class",ee),(!Be||De[0]&4)&&me(t,"pointer-events",he[2]?"none":"auto"),he[4]?_e?_e.p(he,De):(_e=Zi(he),_e.c(),_e.m(U,T)):_e&&(_e.d(1),_e=null);const xt={};De[0]&68&&(xt.onAddClick=he[29]),I.$set(xt),(!Be||De[0]&1&&W!==(W="flex-shrink-0 transition-all duration-200 "+(he[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&o(R,"class",W),(!Be||De[0]&1040)&&me(R,"width",(he[4]?"0":he[10])+"px"),(!Be||De[0]&1040)&&me(R,"min-width",(he[4]?"0":he[10])+"px"),(!Be||De[0]&17)&&ir(R,"collapsed",he[4]),he[4]?Te&&(Te.d(1),Te=null):Te?Te.p(he,De):(Te=Qi(he),Te.c(),Te.m(U,G));const It={};se.$set(It),(!Be||De[0]&1&&z!==(z="flex-1 min-w-0 min-h-0 flex flex-col "+(he[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&o(Z,"class",z),he[5]?Ee&&(Ee.d(1),Ee=null):Ee?Ee.p(he,De):(Ee=$i(he),Ee.c(),Ee.m(U,K)),(!Be||De[0]&256)&&me(J,"height",he[8]+"%"),(!Be||De[0]&4)&&me(ae,"cursor",he[2]?"default":"row-resize"),(!Be||De[0]&4)&&me(ae,"pointer-events",he[2]?"none":"auto"),(!Be||De[0]&256)&&me(de,"height",100-he[8]+"%"),(!Be||De[0]&1&&Ce!==(Ce="flex-shrink-0 flex flex-col overflow-hidden "+(he[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&o(H,"class",Ce),(!Be||De[0]&544)&&me(H,"width",(he[5]?"0":he[9])+"px"),(!Be||De[0]&32)&&me(H,"min-width",he[5]?"0":"300px"),(!Be||De[0]&33)&&ir(H,"collapsed",he[5]),he[5]?Pe?Pe.p(he,De):(Pe=es(he),Pe.c(),Pe.m(U,null)):Pe&&(Pe.d(1),Pe=null);const Ft={};!te&&De[0]&4&&(te=!0,Ft.isOpen=he[2],ft(()=>te=!1)),!ye&&De[0]&64&&(ye=!0,Ft.editingAsset=he[6],ft(()=>ye=!1)),ce.$set(Ft);const Rt={};!Qe&&De[0]&2&&(Qe=!0,Rt.isOpen=he[1],ft(()=>Qe=!1)),xe.$set(Rt);const Tt={};De[0]&8&&(Tt.onClose=he[35]),!je&&De[0]&8&&(je=!0,Tt.isOpen=he[3],ft(()=>je=!1)),Ie.$set(Tt),he[13].isPanelOpen?tt?tt.p(he,De):(tt=ts(he),tt.c(),tt.m(e,null)):tt&&(tt.d(1),tt=null),(!Be||De[0]&2049&&Me!==(Me="h-screen w-full flex flex-col "+he[11]+" "+(he[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&o(e,"class",Me)},i(he){Be||(Le(I.$$.fragment,he),Le(se.$$.fragment,he),Le(Y.$$.fragment,he),Le(Se.$$.fragment,he),Le(ce.$$.fragment,he),Le(xe.$$.fragment,he),Le(Ie.$$.fragment,he),Be=!0)},o(he){Re(I.$$.fragment,he),Re(se.$$.fragment,he),Re(Y.$$.fragment,he),Re(Se.$$.fragment,he),Re(ce.$$.fragment,he),Re(xe.$$.fragment,he),Re(Ie.$$.fragment,he),Be=!1},d(he){he&&V(e),Ve&&Ve.d(),oe.d(),_e&&_e.d(),We(I),Te&&Te.d(),r[31](null),We(se),Ee&&Ee.d(),We(Y),We(Se),Pe&&Pe.d(),We(ce),We(xe),We(Ie),tt&&tt.d(),$e=!1,Oe(ht)}}}function br(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function Oc(r,e,t){let h,g,S,f,i,n,u,b,d,m;ct(r,Kt,te=>t(0,i=te)),ct(r,vt,te=>t(26,n=te)),ct(r,St,te=>t(27,u=te)),ct(r,zl,te=>t(12,b=te)),ct(r,ut,te=>t(13,d=te)),ct(r,jl,te=>t(14,m=te));let y=!1,w=!1,v=!1,s=!1,c=!1,l=null,a,p=!1,C=!1,x=!1;function L(){vr(i==="light"?"dark":"light")}function k(){w||t(1,y=!y)}function E(){w||t(4,s=!s)}function B(){w||t(5,c=!c)}function O(te){te.preventDefault(),!(s||w)&&(p=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",A))}function P(te){if(!p)return;const ye=Math.max(200,Math.min(500,te.clientX));sn(ye)}function A(){p=!1,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",A)}function j(te){te.preventDefault(),!w&&(C=!0,document.addEventListener("mousemove",X),document.addEventListener("mouseup",ee))}function X(te){if(!C)return;const ye=window.innerWidth,pe=Math.max(300,Math.min(600,ye-te.clientX));nn(pe)}function ee(){C=!1,document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",ee)}function Q(te){if(te.preventDefault(),w)return;x=!0;const ye=document.querySelector("[data-right-panel]");if(ye){const pe=ye.getBoundingClientRect();U=te.clientY,T=f,R=pe.height}document.addEventListener("mousemove",I),document.addEventListener("mouseup",W)}let U=0,T=50,R=0;function I(te){if(!x)return;const pe=(te.clientY-U)/R*100,xe=Math.max(20,Math.min(80,T+pe));on(xe)}function W(){x=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",W)}function N(te){a&&typeof a.handleConnect=="function"?a.handleConnect(te):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function G(te){var ye;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(te);const pe={id:te.id,name:te.name,host:te.host,port:te.port,username:te.user,group:((ye=te.tags)==null?void 0:ye[0])||"默认分组",status:"online",type:te.type||"ssh",auth_type:te.auth_type,key_path:te.key_path,tags:te.tags||[]};Lt.update(xe=>[...xe,pe])}catch(pe){throw console.error("Failed to add asset:",pe),pe}}function Z(te){t(6,l=te),t(2,w=!0)}async function se(te){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{Lt.update(ye=>ye.map(pe=>{var xe;return pe.id===te.id?{...pe,id:te.id,name:te.name,host:te.host,port:te.port,username:te.user,group:((xe=te.tags)==null?void 0:xe[0])||"默认分组",type:te.type||"ssh",auth_type:te.auth_type,key_path:te.key_path,tags:te.tags||[]}:pe}))}catch(ye){throw console.error("Failed to update asset:",ye),ye}}async function z(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const te=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",te);const ye=te.map(pe=>{var xe;return{id:pe.id,name:pe.name,host:pe.host,port:pe.port,username:pe.user,group:((xe=pe.tags)==null?void 0:xe[0])||"默认分组",status:"online",type:"ssh",auth_type:pe.auth_type,key_path:pe.key_path,tags:pe.tags||[]}});Lt.set(ye)}catch(te){console.error("Failed to load connections:",te)}}Vt(async()=>{const te=localStorage.getItem("ssh-tools-theme");te?vr(te):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&vr("dark");let ye=null;try{const pe=await ar(()=>Promise.resolve().then(()=>Hl),void 0);window.wailsBindings=pe,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(pe.default||pe).join(", ")})),await z(),ye=(await ar(()=>Promise.resolve().then(()=>ws),void 0)).EventsOn("app:show-about",()=>{t(3,v=!0)})}catch(pe){console.warn("Wails bindings not available yet:",pe.message)}return br(),window.addEventListener("resize",br),()=>{window.removeEventListener("resize",br),ye&&ye()}});const M=()=>ut.togglePanel(),K=()=>{t(6,l=null),t(2,w=!0)},H=async te=>{if(!window.wailsBindings){Lt.update(ye=>ye.filter(pe=>pe.id!==te.id));return}if(confirm(`确定要删除连接 "${te.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(te.id),Lt.update(ye=>ye.filter(pe=>pe.id!==te.id))}catch(ye){console.error("Failed to delete asset:",ye),alert("删除连接失败: "+ye)}};function J(te){rt[te?"unshift":"push"](()=>{a=te,t(7,a)})}function Y(te){w=te,t(2,w)}function ne(te){l=te,t(6,l)}function ae(te){y=te,t(1,y)}const ie=()=>t(3,v=!1);function fe(te){v=te,t(3,v)}const de=()=>ut.setPanelOpen(!1),Se=()=>ut.setActiveTab("active"),Ce=()=>ut.setActiveTab("history"),ke=async te=>{await Er(te.id),ut.cancelTransfer(te.id)},ge=()=>ut.clearCompleted(),ce=te=>ut.removeTransfer(te.id);return r.$$.update=()=>{r.$$.dirty[0]&134217728&&u&&Array.from(u.values()),r.$$.dirty[0]&1&&t(11,h=i==="dark"?"dark":""),r.$$.dirty[0]&67108864&&t(10,g=n.sidebarWidth),r.$$.dirty[0]&67108864&&t(9,S=n.rightPanelWidth),r.$$.dirty[0]&67108864&&t(8,f=n.fileManagerHeight)},[i,y,w,v,s,c,l,a,f,S,g,h,b,d,m,L,k,E,B,O,j,Q,N,G,Z,se,n,u,M,K,H,J,Y,ne,ae,ie,fe,de,Se,Ce,ke,ge,ce]}class Pc extends nt{constructor(e){super(),st(this,e,Oc,Rc,it,{},null,[-1,-1])}}new Pc({target:document.getElementById("app")});
