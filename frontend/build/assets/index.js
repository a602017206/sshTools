var ks=Object.defineProperty;var Cs=(r,e,t)=>e in r?ks(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var fr=(r,e,t)=>Cs(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const y of p)if(y.type==="childList")for(const _ of y.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&d(_)}).observe(document,{childList:!0,subtree:!0});function t(p){const y={};return p.integrity&&(y.integrity=p.integrity),p.referrerPolicy&&(y.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?y.credentials="include":p.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function d(p){if(p.ep)return;p.ep=!0;const y=t(p);fetch(p.href,y)}})();const xs="modulepreload",Es=function(r){return"/"+r},Ar={},or=function(e,t,d){let p=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),i=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));p=Promise.allSettled(t.map(n=>{if(n=Es(n),n in Ar)return;Ar[n]=!0;const u=n.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${b}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":xs,u||(h.as="script"),h.crossOrigin="",h.href=n,i&&h.setAttribute("nonce",i),document.head.appendChild(h),u)return new Promise((m,w)=>{h.addEventListener("load",m),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${n}`)))})}))}function y(_){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=_,window.dispatchEvent(i),!i.defaultPrevented)throw _}return p.then(_=>{for(const i of _||[])i.status==="rejected"&&y(i.reason);return e().catch(y)})};function Se(){}function Ls(r,e){for(const t in e)r[t]=e[t];return r}function Zi(r){return r()}function Rr(){return Object.create(null)}function Be(r){r.forEach(Zi)}function St(r){return typeof r=="function"}function Ze(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Ds(r){return Object.keys(r).length===0}function yr(r,...e){if(r==null){for(const d of e)d(void 0);return Se}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ms(r){let e;return yr(r,t=>e=t)(),e}function vt(r,e,t){r.$$.on_destroy.push(yr(e,t))}function Bs(r,e,t,d){if(r){const p=Qi(r,e,t,d);return r[0](p)}}function Qi(r,e,t,d){return r[1]&&d?Ls(t.ctx.slice(),r[1](d(e))):t.ctx}function Ts(r,e,t,d){return r[2],e.dirty}function As(r,e,t,d,p,y){if(p){const _=Qi(e,t,d,y);r.p(_,p)}}function Rs(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let d=0;d<t;d++)e[d]=-1;return e}return-1}function Or(r){return r??""}function $i(r){return r&&St(r.destroy)?r.destroy:Se}const es=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function g(r,e){r.appendChild(e)}function V(r,e,t){r.insertBefore(e,t||null)}function K(r){r.parentNode&&r.parentNode.removeChild(r)}function Nt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function D(r){return document.createElement(r)}function oe(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function re(r){return document.createTextNode(r)}function F(){return re(" ")}function ct(){return re("")}function se(r,e,t,d){return r.addEventListener(e,t,d),()=>r.removeEventListener(e,t,d)}function Os(r){return function(e){return e.preventDefault(),r.call(this,e)}}function Pr(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function a(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Ps(r){let e;return{p(...t){e=t,e.forEach(d=>r.push(d))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function ts(r){return r===""?null:+r}function Is(r){return Array.from(r.childNodes)}function ue(r,e){e=""+e,r.data!==e&&(r.data=e)}function ge(r,e){r.value=e??""}function be(r,e,t,d){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function ar(r,e,t){for(let d=0;d<r.options.length;d+=1){const p=r.options[d];if(p.__value===e){p.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function rs(r){const e=r.querySelector(":checked");return e&&e.__value}function rr(r,e,t){r.classList.toggle(e,!!t)}function bt(r,e){return new r(e)}let Kt;function Ut(r){Kt=r}function is(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function Ht(r){is().$$.on_mount.push(r)}function cr(r){is().$$.on_destroy.push(r)}const Ot=[],Xe=[];let Pt=[];const mr=[],ss=Promise.resolve();let vr=!1;function ns(){vr||(vr=!0,ss.then(os))}function sr(){return ns(),ss}function Vt(r){Pt.push(r)}function ot(r){mr.push(r)}const _r=new Set;let At=0;function os(){if(At!==0)return;const r=Kt;do{try{for(;At<Ot.length;){const e=Ot[At];At++,Ut(e),Hs(e.$$)}}catch(e){throw Ot.length=0,At=0,e}for(Ut(null),Ot.length=0,At=0;Xe.length;)Xe.pop()();for(let e=0;e<Pt.length;e+=1){const t=Pt[e];_r.has(t)||(_r.add(t),t())}Pt.length=0}while(Ot.length);for(;mr.length;)mr.pop()();vr=!1,_r.clear(),Ut(r)}function Hs(r){if(r.fragment!==null){r.update(),Be(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Vt)}}function Fs(r){const e=[],t=[];Pt.forEach(d=>r.indexOf(d)===-1?e.push(d):t.push(d)),t.forEach(d=>d()),Pt=e}const nr=new Set;let Et;function ht(){Et={r:0,c:[],p:Et}}function dt(){Et.r||Be(Et.c),Et=Et.p}function Ee(r,e){r&&r.i&&(nr.delete(r),r.i(e))}function De(r,e,t,d){if(r&&r.o){if(nr.has(r))return;nr.add(r),Et.c.push(()=>{nr.delete(r),d&&(t&&r.d(1),d())}),r.o(e)}else d&&d()}function qe(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Gt(r,e){r.d(1),e.delete(r.key)}function Ws(r,e){De(r,1,1,()=>{e.delete(r.key)})}function Ft(r,e,t,d,p,y,_,i,n,u,b,h){let m=r.length,w=y.length,S=m;const v={};for(;S--;)v[r[S].key]=S;const s=[],c=new Map,o=new Map,l=[];for(S=w;S--;){const E=h(p,y,S),k=t(E);let L=_.get(k);L?l.push(()=>L.p(E,e)):(L=u(k,E),L.c()),c.set(k,s[S]=L),k in v&&o.set(k,Math.abs(S-v[k]))}const f=new Set,x=new Set;function C(E){Ee(E,1),E.m(i,b),_.set(E.key,E),b=E.first,w--}for(;m&&w;){const E=s[w-1],k=r[m-1],L=E.key,T=k.key;E===k?(b=E.first,m--,w--):c.has(T)?!_.has(L)||f.has(L)?C(E):x.has(T)?m--:o.get(L)>o.get(T)?(x.add(L),C(E)):(f.add(T),m--):(n(k,_),m--)}for(;m--;){const E=r[m];c.has(E.key)||n(E,_)}for(;w;)C(s[w-1]);return Be(l),s}function at(r,e,t){const d=r.$$.props[e];d!==void 0&&(r.$$.bound[d]=t,t(r.$$.ctx[d]))}function je(r){r&&r.c()}function Fe(r,e,t){const{fragment:d,after_update:p}=r.$$;d&&d.m(e,t),Vt(()=>{const y=r.$$.on_mount.map(Zi).filter(St);r.$$.on_destroy?r.$$.on_destroy.push(...y):Be(y),r.$$.on_mount=[]}),p.forEach(Vt)}function We(r,e){const t=r.$$;t.fragment!==null&&(Fs(t.after_update),Be(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function zs(r,e){r.$$.dirty[0]===-1&&(Ot.push(r),ns(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Qe(r,e,t,d,p,y,_=null,i=[-1]){const n=Kt;Ut(r);const u=r.$$={fragment:null,ctx:[],props:y,update:Se,not_equal:p,bound:Rr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(n?n.$$.context:[])),callbacks:Rr(),dirty:i,skip_bound:!1,root:e.target||n.$$.root};_&&_(u.root);let b=!1;if(u.ctx=t?t(r,e.props||{},(h,m,...w)=>{const S=w.length?w[0]:m;return u.ctx&&p(u.ctx[h],u.ctx[h]=S)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](S),b&&zs(r,h)),m}):[],u.update(),b=!0,Be(u.before_update),u.fragment=d?d(u.ctx):!1,e.target){if(e.hydrate){const h=Is(e.target);u.fragment&&u.fragment.l(h),h.forEach(K)}else u.fragment&&u.fragment.c();e.intro&&Ee(r.$$.fragment),Fe(r,e.target,e.anchor),os()}Ut(n)}class $e{constructor(){fr(this,"$$");fr(this,"$$set")}$destroy(){We(this,1),this.$destroy=Se}$on(e,t){if(!St(t))return Se;const d=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return d.push(t),()=>{const p=d.indexOf(t);p!==-1&&d.splice(p,1)}}$set(e){this.$$set&&!Ds(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const js="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(js);const Rt=[];function Us(r,e){return{subscribe:Wt(r,e).subscribe}}function Wt(r,e=Se){let t;const d=new Set;function p(i){if(Ze(r,i)&&(r=i,t)){const n=!Rt.length;for(const u of d)u[1](),Rt.push(u,r);if(n){for(let u=0;u<Rt.length;u+=2)Rt[u][0](Rt[u+1]);Rt.length=0}}}function y(i){p(i(r))}function _(i,n=Se){const u=[i,n];return d.add(u),d.size===1&&(t=e(p,y)||Se),i(r),()=>{d.delete(u),d.size===0&&t&&(t(),t=null)}}return{set:p,update:y,subscribe:_}}function Dt(r,e,t){const d=!Array.isArray(r),p=d?[r]:r;if(!p.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const y=e.length<2;return Us(t,(_,i)=>{let n=!1;const u=[];let b=0,h=Se;const m=()=>{if(b)return;h();const S=e(d?u[0]:u,_,i);y?_(S):h=St(S)?S:Se},w=p.map((S,v)=>yr(S,s=>{u[v]=s,b&=~(1<<v),n&&m()},()=>{b|=1<<v}));return n=!0,m(),function(){Be(w),h(),n=!1}})}const yt=Wt([]);Dt(yt,r=>r.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}));const mt=Wt(new Map),xt=Wt(null),as="ssh-tools-theme";function Ns(){if(typeof window>"u")return null;try{return localStorage.getItem(as)}catch{return null}}function Ks(r){if(!(typeof window>"u"))try{localStorage.setItem(as,r)}catch{}}const Vs=Ns(),qs=Vs||"light",It=Wt(qs);function pr(r){It.set(r),Ks(r),typeof document<"u"&&document.documentElement.classList.toggle("dark",r==="dark")}function Gs(){if(typeof window>"u")return null;try{const r=localStorage.getItem("ssh-tools-ui-config");if(!r)return null;const e=JSON.parse(r);return e.sidebarWidth&&(e.sidebarWidth=Number(e.sidebarWidth)),e.rightPanelWidth&&(e.rightPanelWidth=Number(e.rightPanelWidth)),e.fileManagerHeight&&(e.fileManagerHeight=Number(e.fileManagerHeight)),e}catch{return null}}const Js={isDevToolsOpen:!1,isFileManagerOpen:!1,isMonitorOpen:!1,sidebarWidth:288,rightPanelWidth:320,fileManagerHeight:50},Xs=Gs(),ut=Wt({...Js,...Xs});ut.subscribe(r=>{if(typeof window<"u")try{localStorage.setItem("ssh-tools-ui-config",JSON.stringify(r))}catch{}});Dt(ut,r=>r.isDevToolsOpen);Dt(ut,r=>r.isFileManagerOpen);Dt(ut,r=>r.isMonitorOpen);Dt(ut,r=>r.sidebarWidth);Dt(ut,r=>r.rightPanelWidth);Dt(ut,r=>r.fileManagerHeight);function Ys(r){ut.update(e=>({...e,sidebarWidth:r}))}function Zs(r){ut.update(e=>({...e,rightPanelWidth:r}))}function Qs(r){ut.update(e=>({...e,fileManagerHeight:r}))}function Ir(r,e,t){const d=r.slice();return d[17]=e[t][0],d[18]=e[t][1],d}function Hr(r,e,t){const d=r.slice();return d[21]=e[t],d}function $s(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M9 5l7 7-7 7"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function en(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M19 9l-7 7-7-7"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function Fr(r){let e,t=[],d=new Map,p=qe(r[18]);const y=_=>_[21].id;for(let _=0;_<p.length;_+=1){let i=Hr(r,p,_),n=y(i);d.set(n,t[_]=zr(n,i))}return{c(){e=D("div");for(let _=0;_<t.length;_+=1)t[_].c();a(e,"class","ml-4")},m(_,i){V(_,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(_,i){i&165&&(p=qe(_[18]),t=Ft(t,i,y,1,_,p,d,e,Gt,zr,null,Hr))},d(_){_&&K(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Wr(r){let e,t=r[21].dbType.toUpperCase()+"",d;return{c(){e=re("• "),d=re(t)},m(p,y){V(p,e,y),V(p,d,y)},p(p,y){y&32&&t!==(t=p[21].dbType.toUpperCase()+"")&&ue(d,t)},d(p){p&&(K(e),K(d))}}}function zr(r,e){let t,d,p=Ur(e[21].type)+"",y,_,i,n,u=e[21].name+"",b,h,m,w,S,v,s=e[21].username+"",c,o,l=e[21].host+"",f,x,C=e[21].port+"",E,k,L,T,R,O,A,j,Z,ie,te,Y,B=e[21].type==="database"&&e[21].dbType&&Wr(e);function P(){return e[13](e[21])}function H(){return e[14](e[21])}function z(...G){return e[15](e[21],...G)}function U(){return e[16](e[21])}return{key:r,first:null,c(){t=D("div"),d=D("div"),y=F(),_=D("div"),i=D("div"),n=D("span"),b=re(u),h=F(),m=D("div"),S=F(),v=D("div"),c=re(s),o=re("@"),f=re(l),x=re(":"),E=re(C),k=F(),B&&B.c(),L=F(),T=D("div"),R=D("button"),R.innerHTML='<svg class="w-3 h-3 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',O=F(),A=D("button"),A.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',j=F(),Z=D("button"),Z.innerHTML='<svg class="w-3 h-3 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',ie=F(),a(d,"class","flex-shrink-0"),a(n,"class","text-sm font-medium text-gray-900 dark:text-white truncate"),a(m,"class",w=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`),a(i,"class","flex items-center gap-2"),a(v,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),a(_,"class","flex-1 min-w-0"),a(R,"class","p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded"),a(R,"title","连接"),a(A,"class","p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded"),a(Z,"class","p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded"),a(T,"class","opacity-0 group-hover:opacity-100 flex gap-1 transition-opacity"),a(t,"class","group flex items-center gap-2 px-3 py-2.5 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg mx-2 cursor-pointer transition-all"),this.first=t},m(G,$){V(G,t,$),g(t,d),d.innerHTML=p,g(t,y),g(t,_),g(_,i),g(i,n),g(n,b),g(i,h),g(i,m),g(_,S),g(_,v),g(v,c),g(v,o),g(v,f),g(v,x),g(v,E),g(v,k),B&&B.m(v,null),g(t,L),g(t,T),g(T,R),g(T,O),g(T,A),g(T,j),g(T,Z),g(t,ie),te||(Y=[se(R,"click",Pr(P)),se(A,"click",Pr(H)),se(Z,"click",z),se(t,"click",U)],te=!0)},p(G,$){e=G,$&32&&p!==(p=Ur(e[21].type)+"")&&(d.innerHTML=p),$&32&&u!==(u=e[21].name+"")&&ue(b,u),$&32&&w!==(w=`w-2 h-2 rounded-full flex-shrink-0 ${e[21].status==="online"?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`)&&a(m,"class",w),$&32&&s!==(s=e[21].username+"")&&ue(c,s),$&32&&l!==(l=e[21].host+"")&&ue(f,l),$&32&&C!==(C=e[21].port+"")&&ue(E,C),e[21].type==="database"&&e[21].dbType?B?B.p(e,$):(B=Wr(e),B.c(),B.m(v,null)):B&&(B.d(1),B=null)},d(G){G&&K(t),B&&B.d(),te=!1,Be(Y)}}}function jr(r){let e,t,d,p,y,_,i,n,u=r[17]+"",b,h,m,w,S=r[18].length+"",v,s,c,o=r[4].has(r[17]),l,f,x;function C(R,O){return O&48&&(d=null),d==null&&(d=!!R[4].has(R[17])),d?en:$s}let E=C(r,-1),k=E(r);function L(){return r[12](r[17])}let T=o&&Fr(r);return{c(){e=D("div"),t=D("div"),k.c(),p=F(),y=oe("svg"),_=oe("path"),i=F(),n=D("span"),b=re(u),h=F(),m=D("span"),w=re("("),v=re(S),s=re(")"),c=F(),T&&T.c(),l=F(),a(_,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),a(y,"class","w-4 h-4 text-amber-500"),a(y,"fill","currentColor"),a(y,"viewBox","0 0 24 24"),a(n,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),a(m,"class","ml-auto text-xs text-gray-400 dark:text-gray-500"),a(t,"class","flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors"),a(e,"class","mb-1")},m(R,O){V(R,e,O),g(e,t),k.m(t,null),g(t,p),g(t,y),g(y,_),g(t,i),g(t,n),g(n,b),g(t,h),g(t,m),g(m,w),g(m,v),g(m,s),g(e,c),T&&T.m(e,null),g(e,l),f||(x=se(t,"click",L),f=!0)},p(R,O){r=R,E!==(E=C(r,O))&&(k.d(1),k=E(r),k&&(k.c(),k.m(t,p))),O&32&&u!==(u=r[17]+"")&&ue(b,u),O&32&&S!==(S=r[18].length+"")&&ue(v,S),O&48&&(o=r[4].has(r[17])),o?T?T.p(r,O):(T=Fr(r),T.c(),T.m(e,l)):T&&(T.d(1),T=null)},d(R){R&&K(e),k.d(),T&&T.d(),f=!1,x()}}}function tn(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c=qe(Object.entries(r[5])),o=[];for(let l=0;l<c.length;l+=1)o[l]=jr(Ir(r,c,l));return{c(){e=D("div"),t=D("div"),d=D("div"),p=D("h2"),p.textContent="服务器资产",y=F(),_=D("button"),_.innerHTML='<svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',i=F(),n=D("div"),u=oe("svg"),b=oe("path"),h=F(),m=D("input"),w=F(),S=D("div");for(let l=0;l<o.length;l+=1)o[l].c();a(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),a(_,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),a(d,"class","flex items-center justify-between mb-3"),a(b,"stroke-linecap","round"),a(b,"stroke-linejoin","round"),a(b,"stroke-width","2"),a(b,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),a(u,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),a(u,"fill","none"),a(u,"stroke","currentColor"),a(u,"viewBox","0 0 24 24"),a(m,"type","text"),a(m,"placeholder","搜索服务器..."),a(m,"class","w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(n,"class","relative"),a(t,"class","p-4 border-b border-gray-200 dark:border-gray-700"),a(S,"class","flex-1 overflow-y-auto scrollbar-thin"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(l,f){V(l,e,f),g(e,t),g(t,d),g(d,p),g(d,y),g(d,_),g(t,i),g(t,n),g(n,u),g(u,b),g(n,h),g(n,m),ge(m,r[3]),g(e,w),g(e,S);for(let x=0;x<o.length;x+=1)o[x]&&o[x].m(S,null);v||(s=[se(_,"click",function(){St(r[1])&&r[1].apply(this,arguments)}),se(m,"input",r[11])],v=!0)},p(l,[f]){if(r=l,f&8&&m.value!==r[3]&&ge(m,r[3]),f&245){c=qe(Object.entries(r[5]));let x;for(x=0;x<c.length;x+=1){const C=Ir(r,c,x);o[x]?o[x].p(C,f):(o[x]=jr(C),o[x].c(),o[x].m(S,null))}for(;x<o.length;x+=1)o[x].d(1);o.length=c.length}},i:Se,o:Se,d(l){l&&K(e),Nt(o,l),v=!1,Be(s)}}}function Ur(r){switch(r){case"database":return`<svg class="w-4 h-4 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>`;case"docker":return`<svg class="w-4 h-4 text-cyan-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
          <path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41" />
        </svg>`;default:return`<svg class="w-4 h-4 text-purple-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg>`}}function rn(r,e,t){let d,p,y;vt(r,yt,f=>t(10,y=f));let{onConnect:_}=e,{onAddClick:i}=e,{onDelete:n}=e,{onEdit:u}=e,b="",h=new Set(["生产环境","开发环境"]);function m(f){const x=new Set(h);x.has(f)?x.delete(f):x.add(f),t(4,h=x)}async function w(f,x){if(x.stopPropagation(),!window.wailsBindings){console.error("Wails bindings not loaded"),yt.update(C=>C.filter(E=>E.id!==f.id));return}if(confirm(`确定要删除连接 "${f.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(f.id),yt.update(C=>C.filter(E=>E.id!==f.id))}catch(C){console.error("Failed to delete asset:",C)}}function S(){b=this.value,t(3,b)}const v=f=>m(f),s=f=>_(f),c=f=>u(f),o=(f,x)=>w(f,x),l=f=>_(f);return r.$$set=f=>{"onConnect"in f&&t(0,_=f.onConnect),"onAddClick"in f&&t(1,i=f.onAddClick),"onDelete"in f&&t(8,n=f.onDelete),"onEdit"in f&&t(2,u=f.onEdit)},r.$$.update=()=>{r.$$.dirty&1032&&t(9,d=y.filter(f=>{const x=b.toLowerCase();return f.name.toLowerCase().includes(x)||f.host.toLowerCase().includes(x)||f.group.toLowerCase().includes(x)||f.username.toLowerCase().includes(x)})),r.$$.dirty&512&&t(5,p=d.reduce((f,x)=>(f[x.group]||(f[x.group]=[]),f[x.group].push(x),f),{}))},[_,i,u,b,h,p,m,w,n,d,y,S,v,s,c,o,l]}class sn extends $e{constructor(e){super(),Qe(this,e,rn,tn,Ze,{onConnect:0,onAddClick:1,onDelete:8,onEdit:2})}}var ls={exports:{}};(function(r,e){(function(t,d){r.exports=d()})(globalThis,()=>(()=>{var t={4567:function(_,i,n){var u=this&&this.__decorate||function(o,l,f,x){var C,E=arguments.length,k=E<3?l:x===null?x=Object.getOwnPropertyDescriptor(l,f):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,l,f,x);else for(var L=o.length-1;L>=0;L--)(C=o[L])&&(k=(E<3?C(k):E>3?C(l,f,k):C(l,f))||k);return E>3&&k&&Object.defineProperty(l,f,k),k},b=this&&this.__param||function(o,l){return function(f,x){l(f,x,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=n(9042),m=n(9924),w=n(844),S=n(4725),v=n(2585),s=n(3656);let c=i.AccessibilityManager=class extends w.Disposable{constructor(o,l,f,x){super(),this._terminal=o,this._coreBrowserService=f,this._renderService=x,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,s.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(o){for(let l=0;l<o;l++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,l){this._liveRegionDebouncer.refresh(o,l,this._terminal.rows)}_renderRows(o,l){const f=this._terminal.buffer,x=f.lines.length.toString();for(let C=o;C<=l;C++){const E=f.lines.get(f.ydisp+C),k=[],L=(E==null?void 0:E.translateToString(!0,void 0,void 0,k))||"",T=(f.ydisp+C+1).toString(),R=this._rowElements[C];R&&(L.length===0?(R.innerText=" ",this._rowColumns.set(R,[0,1])):(R.textContent=L,this._rowColumns.set(R,k)),R.setAttribute("aria-posinset",T),R.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,l){const f=o.target,x=this._rowElements[l===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(l===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==x)return;let C,E;if(l===0?(C=f,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(C=this._rowElements.shift(),E=f,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),l===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(l===0?-1:1),this._rowElements[l===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleSelectionChange(){var L;if(this._rowElements.length===0)return;const o=document.getSelection();if(!o)return;if(o.isCollapsed)return void(this._rowContainer.contains(o.anchorNode)&&this._terminal.clearSelection());if(!o.anchorNode||!o.focusNode)return void console.error("anchorNode and/or focusNode are null");let l={node:o.anchorNode,offset:o.anchorOffset},f={node:o.focusNode,offset:o.focusOffset};if((l.node.compareDocumentPosition(f.node)&Node.DOCUMENT_POSITION_PRECEDING||l.node===f.node&&l.offset>f.offset)&&([l,f]=[f,l]),l.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(l={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(l.node))return;const x=this._rowElements.slice(-1)[0];if(f.node.compareDocumentPosition(x)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(f={node:x,offset:((L=x.textContent)==null?void 0:L.length)??0}),!this._rowContainer.contains(f.node))return;const C=({node:T,offset:R})=>{const O=T instanceof Text?T.parentNode:T;let A=parseInt(O==null?void 0:O.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(O);if(!j)return console.warn("columns is null. Race condition?"),null;let Z=R<j.length?j[R]:j.slice(-1)[0]+1;return Z>=this._terminal.cols&&(++A,Z=0),{row:A,column:Z}},E=C(l),k=C(f);if(E&&k){if(E.row>k.row||E.row===k.row&&E.column>=k.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(k.row-E.row)*this._terminal.cols-E.column+k.column)}}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=this._coreBrowserService.mainDocument.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=c=u([b(1,v.IInstantiationService),b(2,S.ICoreBrowserService),b(3,S.IRenderService)],c)},3614:(_,i)=>{function n(m){return m.replace(/\r?\n/g,"\r")}function u(m,w){return w?"\x1B[200~"+m+"\x1B[201~":m}function b(m,w,S,v){m=u(m=n(m),S.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(m,!0),w.value=""}function h(m,w,S){const v=S.getBoundingClientRect(),s=m.clientX-v.left-10,c=m.clientY-v.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${s}px`,w.style.top=`${c}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=u,i.copyHandler=function(m,w){m.clipboardData&&m.clipboardData.setData("text/plain",w.selectionText),m.preventDefault()},i.handlePasteEvent=function(m,w,S,v){m.stopPropagation(),m.clipboardData&&b(m.clipboardData.getData("text/plain"),w,S,v)},i.paste=b,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(m,w,S,v,s){h(m,w,S),s&&v.rightClickSelect(m),w.value=v.selectionText,w.select()}},7239:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=n(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(b,h,m){this._css.set(b,h,m)}getCss(b,h){return this._css.get(b,h)}setColor(b,h,m){this._color.set(b,h,m)}getColor(b,h){return this._color.get(b,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,u,b,h){n.addEventListener(u,b,h);let m=!1;return{dispose:()=>{m||(m=!0,n.removeEventListener(u,b,h))}}}},3551:function(_,i,n){var u=this&&this.__decorate||function(c,o,l,f){var x,C=arguments.length,E=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,l):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,o,l,f);else for(var k=c.length-1;k>=0;k--)(x=c[k])&&(E=(C<3?x(E):C>3?x(o,l,E):x(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},b=this&&this.__param||function(c,o){return function(l,f){o(l,f,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=n(3656),m=n(8460),w=n(844),S=n(2585),v=n(4725);let s=i.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(c,o,l,f,x){super(),this._element=c,this._mouseService=o,this._renderService=l,this._bufferService=f,this._linkProviderService=x,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){this._lastMouseEvent=c;const o=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const l=c.composedPath();for(let f=0;f<l.length;f++){const x=l[f];if(x.classList.contains("xterm"))break;if(x.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,o){var f,x;this._activeProviderReplies&&o||((f=this._activeProviderReplies)==null||f.forEach(C=>{C==null||C.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let l=!1;for(const[C,E]of this._linkProviderService.linkProviders.entries())o?(x=this._activeProviderReplies)!=null&&x.get(C)&&(l=this._checkLinkProviderResult(C,c,l)):E.provideLinks(c.y,k=>{var T,R;if(this._isMouseOut)return;const L=k==null?void 0:k.map(O=>({link:O}));(T=this._activeProviderReplies)==null||T.set(C,L),l=this._checkLinkProviderResult(C,c,l),((R=this._activeProviderReplies)==null?void 0:R.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,o){const l=new Set;for(let f=0;f<o.size;f++){const x=o.get(f);if(x)for(let C=0;C<x.length;C++){const E=x[C],k=E.link.range.start.y<c?0:E.link.range.start.x,L=E.link.range.end.y>c?this._bufferService.cols:E.link.range.end.x;for(let T=k;T<=L;T++){if(l.has(T)){x.splice(C--,1);break}l.add(T)}}}}_checkLinkProviderResult(c,o,l){var C;if(!this._activeProviderReplies)return l;const f=this._activeProviderReplies.get(c);let x=!1;for(let E=0;E<c;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(x=!0);if(!x&&f){const E=f.find(k=>this._linkAtPosition(k.link,o));E&&(l=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!l)for(let E=0;E<this._activeProviderReplies.size;E++){const k=(C=this._activeProviderReplies.get(E))==null?void 0:C.find(L=>this._linkAtPosition(L.link,o));if(k){l=!0,this._handleNewLink(k);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._currentLink)return;const o=this._positionFromMouseEvent(c,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,o){this._currentLink&&this._lastMouseEvent&&(!c||!o||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._lastMouseEvent)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(c.link,o)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var l,f;return(f=(l=this._currentLink)==null?void 0:l.state)==null?void 0:f.decorations.pointerCursor},set:l=>{var f;(f=this._currentLink)!=null&&f.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",l))}},underline:{get:()=>{var l,f;return(f=(l=this._currentLink)==null?void 0:l.state)==null?void 0:f.decorations.underline},set:l=>{var f,x,C;(f=this._currentLink)!=null&&f.state&&((C=(x=this._currentLink)==null?void 0:x.state)==null?void 0:C.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,l))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(l=>{if(!this._currentLink)return;const f=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,x=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=x&&(this._clearCurrentLink(f,x),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(c,o,l){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(l,o.text)}_fireUnderlineEvent(c,o){const l=c.range,f=this._bufferService.buffer.ydisp,x=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-f-1,l.end.x,l.end.y-f-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(x)}_linkLeave(c,o,l){var f;(f=this._currentLink)!=null&&f.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(l,o.text)}_linkAtPosition(c,o){const l=c.range.start.y*this._bufferService.cols+c.range.start.x,f=c.range.end.y*this._bufferService.cols+c.range.end.x,x=o.y*this._bufferService.cols+o.x;return l<=x&&x<=f}_positionFromMouseEvent(c,o,l){const f=l.getCoords(c,o,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,o,l,f,x){return{x1:c,y1:o,x2:l,y2:f,cols:this._bufferService.cols,fg:x}}};i.Linkifier=s=u([b(1,v.IMouseService),b(2,v.IRenderService),b(3,S.IBufferService),b(4,v.ILinkProviderService)],s)},9042:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(_,i,n){var u=this&&this.__decorate||function(v,s,c,o){var l,f=arguments.length,x=f<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,c):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,s,c,o);else for(var C=v.length-1;C>=0;C--)(l=v[C])&&(x=(f<3?l(x):f>3?l(s,c,x):l(s,c))||x);return f>3&&x&&Object.defineProperty(s,c,x),x},b=this&&this.__param||function(v,s){return function(c,o){s(c,o,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=n(511),m=n(2585);let w=i.OscLinkProvider=class{constructor(v,s,c){this._bufferService=v,this._optionsService=s,this._oscLinkService=c}provideLinks(v,s){var L;const c=this._bufferService.buffer.lines.get(v-1);if(!c)return void s(void 0);const o=[],l=this._optionsService.rawOptions.linkHandler,f=new h.CellData,x=c.getTrimmedLength();let C=-1,E=-1,k=!1;for(let T=0;T<x;T++)if(E!==-1||c.hasContent(T)){if(c.loadCell(T,f),f.hasExtendedAttrs()&&f.extended.urlId){if(E===-1){E=T,C=f.extended.urlId;continue}k=f.extended.urlId!==C}else E!==-1&&(k=!0);if(k||E!==-1&&T===x-1){const R=(L=this._oscLinkService.getLinkData(C))==null?void 0:L.uri;if(R){const O={start:{x:E+1,y:v},end:{x:T+(k||T!==x-1?0:1),y:v}};let A=!1;if(!(l!=null&&l.allowNonHttpProtocols))try{const j=new URL(R);["http:","https:"].includes(j.protocol)||(A=!0)}catch{A=!0}A||o.push({text:R,range:O,activate:(j,Z)=>l?l.activate(j,Z,O):S(0,Z),hover:(j,Z)=>{var ie;return(ie=l==null?void 0:l.hover)==null?void 0:ie.call(l,j,Z,O)},leave:(j,Z)=>{var ie;return(ie=l==null?void 0:l.leave)==null?void 0:ie.call(l,j,Z,O)}})}k=!1,f.hasExtendedAttrs()&&f.extended.urlId?(E=T,C=f.extended.urlId):(E=-1,C=-1)}}s(o)}};function S(v,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=w=u([b(0,m.IBufferService),b(1,m.IOptionsService),b(2,m.IOscLinkService)],w)},6193:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,u){this._renderCallback=n,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,u,b){this._rowCount=b,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=n(3614),b=n(3656),h=n(3551),m=n(9042),w=n(3730),S=n(1680),v=n(3107),s=n(5744),c=n(2950),o=n(1296),l=n(428),f=n(4269),x=n(5114),C=n(8934),E=n(3230),k=n(9312),L=n(4725),T=n(6731),R=n(8055),O=n(8969),A=n(8460),j=n(844),Z=n(6114),ie=n(8437),te=n(2584),Y=n(7399),B=n(5941),P=n(9074),H=n(2585),z=n(5435),U=n(4567),G=n(779);class $ extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(W={}){super(W),this.browser=Z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(G.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((M,q)=>this.refresh(M,q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(M=>this._reportWindowsOptions(M))),this.register(this._inputHandler.onColor(M=>this._handleColorEvent(M))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(M=>this._afterResize(M.cols,M.rows))),this.register((0,j.toDisposable)(()=>{var M,q;this._customKeyEventHandler=void 0,(q=(M=this.element)==null?void 0:M.parentNode)==null||q.removeChild(this.element)}))}_handleColorEvent(W){if(this._themeService)for(const M of W){let q,I="";switch(M.index){case 256:q="foreground",I="10";break;case 257:q="background",I="11";break;case 258:q="cursor",I="12";break;default:q="ansi",I="4;"+M.index}switch(M.type){case 0:const X=R.color.toColorRGB(q==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[q]);this.coreService.triggerDataEvent(`${te.C0.ESC}]${I};${(0,B.toRgbString)(X)}${te.C1_ESCAPED.ST}`);break;case 1:if(q==="ansi")this._themeService.modifyColors(J=>J.ansi[M.index]=R.channels.toColor(...M.color));else{const J=q;this._themeService.modifyColors(N=>N[J]=R.channels.toColor(...M.color))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(W){W?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(W){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var W;return(W=this.textarea)==null?void 0:W.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const W=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(W);if(!M)return;const q=Math.min(this.buffer.x,this.cols-1),I=this._renderService.dimensions.css.cell.height,X=M.getWidth(q),J=this._renderService.dimensions.css.cell.width*X,N=this.buffer.y*this._renderService.dimensions.css.cell.height,ae=q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ae+"px",this.textarea.style.top=N+"px",this.textarea.style.width=J+"px",this.textarea.style.height=I+"px",this.textarea.style.lineHeight=I+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",M=>{this.hasSelection()&&(0,u.copyHandler)(M,this._selectionService)}));const W=M=>(0,u.handlePasteEvent)(M,this.textarea,this.coreService,this.optionsService);this.register((0,b.addDisposableDomListener)(this.textarea,"paste",W)),this.register((0,b.addDisposableDomListener)(this.element,"paste",W)),Z.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",M=>{M.button===2&&(0,u.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",M=>{(0,u.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Z.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",M=>{M.button===1&&(0,u.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",W=>this._keyUp(W),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",W=>this._keyDown(W),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",W=>this._keyPress(W),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",W=>this._compositionHelper.compositionupdate(W))),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,b.addDisposableDomListener)(this.textarea,"input",W=>this._inputEvent(W),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(W){var q;if(!W)throw new Error("Terminal requires a parent element.");if(W.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((q=this.element)==null?void 0:q.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=W.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),W.appendChild(this.element);const M=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),M.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,b.addDisposableDomListener)(this.screenElement,"mousemove",I=>this.updateCursorStyle(I))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),M.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),Z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(x.CoreBrowserService,this.textarea,W.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,b.addDisposableDomListener)(this.textarea,"focus",I=>this._handleTextAreaFocus(I))),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(l.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(I=>this._onRender.fire(I))),this.onResize(I=>this._renderService.resize(I.cols,I.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(M);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(I=>this.scrollLines(I.amount,I.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(k.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(I=>this.scrollLines(I.amount,I.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(I=>this._renderService.handleSelectionChanged(I.start,I.end,I.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(I=>{this.textarea.value=I,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(I=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",I=>this._selectionService.handleMouseDown(I))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",I=>this._handleScreenReaderModeOptionChange(I))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",I=>{!this._overviewRulerRenderer&&I&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const W=this,M=this.element;function q(J){const N=W._mouseService.getMouseReportCoords(J,W.screenElement);if(!N)return!1;let ae,Q;switch(J.overrideType||J.type){case"mousemove":Q=32,J.buttons===void 0?(ae=3,J.button!==void 0&&(ae=J.button<3?J.button:3)):ae=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":Q=0,ae=J.button<3?J.button:3;break;case"mousedown":Q=1,ae=J.button<3?J.button:3;break;case"wheel":if(W._customWheelEventHandler&&W._customWheelEventHandler(J)===!1||W.viewport.getLinesScrolled(J)===0)return!1;Q=J.deltaY<0?0:1,ae=4;break;default:return!1}return!(Q===void 0||ae===void 0||ae>4)&&W.coreMouseService.triggerMouseEvent({col:N.col,row:N.row,x:N.x,y:N.y,button:ae,action:Q,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}const I={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:J=>(q(J),J.buttons||(this._document.removeEventListener("mouseup",I.mouseup),I.mousedrag&&this._document.removeEventListener("mousemove",I.mousedrag)),this.cancel(J)),wheel:J=>(q(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&q(J)},mousemove:J=>{J.buttons||q(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?I.mousemove||(M.addEventListener("mousemove",X.mousemove),I.mousemove=X.mousemove):(M.removeEventListener("mousemove",I.mousemove),I.mousemove=null),16&J?I.wheel||(M.addEventListener("wheel",X.wheel,{passive:!1}),I.wheel=X.wheel):(M.removeEventListener("wheel",I.wheel),I.wheel=null),2&J?I.mouseup||(I.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",I.mouseup),I.mouseup=null),4&J?I.mousedrag||(I.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",I.mousedrag),I.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(M,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return q(J),I.mouseup&&this._document.addEventListener("mouseup",I.mouseup),I.mousedrag&&this._document.addEventListener("mousemove",I.mousedrag),this.cancel(J)})),this.register((0,b.addDisposableDomListener)(M,"wheel",J=>{if(!I.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(J)===!1)return!1;if(!this.buffer.hasScrollback){const N=this.viewport.getLinesScrolled(J);if(N===0)return;const ae=te.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B");let Q="";for(let ce=0;ce<Math.abs(N);ce++)Q+=ae;return this.coreService.triggerDataEvent(Q,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(M,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,b.addDisposableDomListener)(M,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(W,M){var q;(q=this._renderService)==null||q.refreshRows(W,M)}updateCursorStyle(W){var M;(M=this._selectionService)!=null&&M.shouldColumnSelect(W)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(W,M,q=0){var I;q===1?(super.scrollLines(W,M,q),this.refresh(0,this.rows-1)):(I=this.viewport)==null||I.scrollLines(W)}paste(W){(0,u.paste)(W,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(W){this._customKeyEventHandler=W}attachCustomWheelEventHandler(W){this._customWheelEventHandler=W}registerLinkProvider(W){return this._linkProviderService.registerLinkProvider(W)}registerCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const M=this._characterJoinerService.register(W);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(W)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(W){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+W)}registerDecoration(W){return this._decorationService.registerDecoration(W)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(W,M,q){this._selectionService.setSelection(W,M,q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var W;(W=this._selectionService)==null||W.clearSelection()}selectAll(){var W;(W=this._selectionService)==null||W.selectAll()}selectLines(W,M){var q;(q=this._selectionService)==null||q.selectLines(W,M)}_keyDown(W){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;const M=this.browser.isMac&&this.options.macOptionIsMeta&&W.altKey;if(!M&&!this._compositionHelper.keydown(W))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;M||W.key!=="Dead"&&W.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const q=(0,Y.evaluateKeyboardEvent)(W,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(W),q.type===3||q.type===2){const I=this.rows-1;return this.scrollLines(q.type===2?-I:I),this.cancel(W,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,W)||(q.cancel&&this.cancel(W,!0),!q.key||!!(W.key&&!W.ctrlKey&&!W.altKey&&!W.metaKey&&W.key.length===1&&W.key.charCodeAt(0)>=65&&W.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==te.C0.ETX&&q.key!==te.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),!this.optionsService.rawOptions.screenReaderMode||W.altKey||W.ctrlKey?this.cancel(W,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(W,M){const q=W.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||W.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||W.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?q:q&&(!M.keyCode||M.keyCode>47)}_keyUp(W){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(W)||this.focus(),this.updateCursorStyle(W),this._keyPressHandled=!1)}_keyPress(W){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;if(this.cancel(W),W.charCode)M=W.charCode;else if(W.which===null||W.which===void 0)M=W.keyCode;else{if(W.which===0||W.charCode===0)return!1;M=W.which}return!(!M||(W.altKey||W.ctrlKey||W.metaKey)&&!this._isThirdLevelShift(this.browser,W)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(W){if(W.data&&W.inputType==="insertText"&&(!W.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const M=W.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(W),!0}return!1}resize(W,M){W!==this.cols||M!==this.rows?super.resize(W,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(W,M){var q,I;(q=this._charSizeService)==null||q.measure(),(I=this.viewport)==null||I.syncScrollArea(!0)}clear(){var W;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let M=1;M<this.rows;M++)this.buffer.lines.push(this.buffer.getBlankLine(ie.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(W=this.viewport)==null||W.reset(),this.refresh(0,this.rows-1)}}reset(){var M,q;this.options.rows=this.rows,this.options.cols=this.cols;const W=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)==null||M.reset(),this._decorationService.reset(),(q=this.viewport)==null||q.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var W;(W=this._renderService)==null||W.clearTextureAtlas()}_reportFocus(){var W;(W=this.element)!=null&&W.classList.contains("focus")?this.coreService.triggerDataEvent(te.C0.ESC+"[I"):this.coreService.triggerDataEvent(te.C0.ESC+"[O")}_reportWindowsOptions(W){if(this._renderService)switch(W){case z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const M=this._renderService.dimensions.css.canvas.width.toFixed(0),q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[4;${q};${M}t`);break;case z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const I=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[6;${X};${I}t`)}}cancel(W,M){if(this.options.cancelEvents||M)return W.preventDefault(),W.stopPropagation(),!1}}i.Terminal=$},9924:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,u=1e3){this._renderCallback=n,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,u,b){this._rowCount=b,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=h-this._lastRefreshMs,w=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u)}}},1680:function(_,i,n){var u=this&&this.__decorate||function(c,o,l,f){var x,C=arguments.length,E=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,l):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,o,l,f);else for(var k=c.length-1;k>=0;k--)(x=c[k])&&(E=(C<3?x(E):C>3?x(o,l,E):x(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},b=this&&this.__param||function(c,o){return function(l,f){o(l,f,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=n(3656),m=n(4725),w=n(8460),S=n(844),v=n(2585);let s=i.Viewport=class extends S.Disposable{constructor(c,o,l,f,x,C,E,k){super(),this._viewportElement=c,this._scrollArea=o,this._bufferService=l,this._optionsService=f,this._charSizeService=x,this._renderService=C,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(k.colors),this.register(k.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,o){const l=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&l<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const o=this._getPixelsScrolled(c);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(c,o))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let o=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(c,o){var k;let l,f="";const x=[],C=o??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let L=c;L<C;L++){const T=E.get(L);if(!T)continue;const R=(k=E.get(L+1))==null?void 0:k.isWrapped;if(f+=T.translateToString(!R),!R||L===E.length-1){const O=document.createElement("div");O.textContent=f,x.push(O),f.length>0&&(l=O),f=""}}return{bufferElements:x,cursorElement:l}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let o=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(c,o){const l=this._optionsService.rawOptions.fastScrollModifier;return l==="alt"&&o.altKey||l==="ctrl"&&o.ctrlKey||l==="shift"&&o.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const o=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(c,o))}};i.Viewport=s=u([b(2,v.IBufferService),b(3,v.IOptionsService),b(4,m.ICharSizeService),b(5,m.IRenderService),b(6,m.ICoreBrowserService),b(7,m.IThemeService)],s)},3107:function(_,i,n){var u=this&&this.__decorate||function(v,s,c,o){var l,f=arguments.length,x=f<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,c):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,s,c,o);else for(var C=v.length-1;C>=0;C--)(l=v[C])&&(x=(f<3?l(x):f>3?l(s,c,x):l(s,c))||x);return f>3&&x&&Object.defineProperty(s,c,x),x},b=this&&this.__param||function(v,s){return function(c,o){s(c,o,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=n(4725),m=n(844),w=n(2585);let S=i.BufferDecorationRenderer=class extends m.Disposable{constructor(v,s,c,o,l){super(),this._screenElement=v,this._bufferService=s,this._coreBrowserService=c,this._decorationService=o,this._renderService=l,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(f=>this._removeDecoration(f))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var o;const s=this._coreBrowserService.mainDocument.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer",((o=v==null?void 0:v.options)==null?void 0:o.layer)==="top"),s.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",s.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const c=v.options.x??0;return c&&c>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(v,s),s}_refreshStyle(v){const s=v.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let c=this._decorationElements.get(v);c||(c=this._createElement(v),v.element=c,this._decorationElements.set(v,c),this._container.appendChild(c),v.onDispose(()=>{this._decorationElements.delete(v),c.remove()})),c.style.top=s*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(c)}}_refreshXPosition(v,s=v.element){if(!s)return;const c=v.options.x??0;(v.options.anchor||"left")==="right"?s.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var s;(s=this._decorationElements.get(v))==null||s.remove(),this._decorationElements.delete(v),v.dispose()}};i.BufferDecorationRenderer=S=u([b(1,w.IBufferService),b(2,h.ICoreBrowserService),b(3,w.IDecorationService),b(4,h.IRenderService)],S)},5871:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const u of this._zones)if(u.color===n.options.overviewRulerOptions.color&&u.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,n.marker.line))return;if(this._lineAdjacentToZone(u,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(u,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,u){return u>=n.startBufferLine&&u<=n.endBufferLine}_lineAdjacentToZone(n,u,b){return u>=n.startBufferLine-this._linePadding[b||"full"]&&u<=n.endBufferLine+this._linePadding[b||"full"]}_addLineToZone(n,u){n.startBufferLine=Math.min(n.startBufferLine,u),n.endBufferLine=Math.max(n.endBufferLine,u)}}},5744:function(_,i,n){var u=this&&this.__decorate||function(l,f,x,C){var E,k=arguments.length,L=k<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,x):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,f,x,C);else for(var T=l.length-1;T>=0;T--)(E=l[T])&&(L=(k<3?E(L):k>3?E(f,x,L):E(f,x))||L);return k>3&&L&&Object.defineProperty(f,x,L),L},b=this&&this.__param||function(l,f){return function(x,C){f(x,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=n(5871),m=n(4725),w=n(844),S=n(2585),v={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let o=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(l,f,x,C,E,k,L){var R;super(),this._viewportElement=l,this._screenElement=f,this._bufferService=x,this._decorationService=C,this._renderService=E,this._optionsService=k,this._coreBrowserService=L,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)==null||R.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var O;(O=this._canvas)==null||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const l=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=l,s.center=f,s.right=l,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=s.left,c.right=s.left+s.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const l=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(l,12),6)*this._coreBrowserService.dpr);v.left=f,v.center=f,v.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const l=this._colorZoneStore.zones;for(const f of l)f.position!=="full"&&this._renderColorZone(f);for(const f of l)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(l){this._ctx.fillStyle=l.color,this._ctx.fillRect(c[l.position||"full"],Math.round((this._canvas.height-1)*(l.startBufferLine/this._bufferService.buffers.active.lines.length)-v[l.position||"full"]/2),s[l.position||"full"],Math.round((this._canvas.height-1)*((l.endBufferLine-l.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[l.position||"full"]))}_queueRefresh(l,f){this._shouldUpdateDimensions=l||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=o=u([b(2,S.IBufferService),b(3,S.IDecorationService),b(4,m.IRenderService),b(5,S.IOptionsService),b(6,m.ICoreBrowserService)],o)},2950:function(_,i,n){var u=this&&this.__decorate||function(v,s,c,o){var l,f=arguments.length,x=f<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,c):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,s,c,o);else for(var C=v.length-1;C>=0;C--)(l=v[C])&&(x=(f<3?l(x):f>3?l(s,c,x):l(s,c))||x);return f>3&&x&&Object.defineProperty(s,c,x),x},b=this&&this.__param||function(v,s){return function(c,o){s(c,o,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=n(4725),m=n(2585),w=n(2584);let S=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,s,c,o,l,f){this._textarea=v,this._compositionView=s,this._bufferService=c,this._optionsService=o,this._coreService=l,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,c=s.replace(v,"");this._dataAlreadySent=c,s.length>v.length?this._coreService.triggerDataEvent(c,!0):s.length<v.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):s.length===v.length&&s!==v&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,l=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=l+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=l+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=S=u([b(2,m.IBufferService),b(3,m.IOptionsService),b(4,m.ICoreService),b(5,h.IRenderService)],S)},9806:(_,i)=>{function n(u,b,h){const m=h.getBoundingClientRect(),w=u.getComputedStyle(h),S=parseInt(w.getPropertyValue("padding-left")),v=parseInt(w.getPropertyValue("padding-top"));return[b.clientX-m.left-S,b.clientY-m.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(u,b,h,m,w,S,v,s,c){if(!S)return;const o=n(u,b,h);return o?(o[0]=Math.ceil((o[0]+(c?v/2:0))/v),o[1]=Math.ceil(o[1]/s),o[0]=Math.min(Math.max(o[0],1),m+(c?1:0)),o[1]=Math.min(Math.max(o[1],1),w),o):void 0}},9504:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=n(2584);function b(s,c,o,l){const f=s-h(s,o),x=c-h(c,o),C=Math.abs(f-x)-function(E,k,L){let T=0;const R=E-h(E,L),O=k-h(k,L);for(let A=0;A<Math.abs(R-O);A++){const j=m(E,k)==="A"?-1:1,Z=L.buffer.lines.get(R+j*A);Z!=null&&Z.isWrapped&&T++}return T}(s,c,o);return v(C,S(m(s,c),l))}function h(s,c){let o=0,l=c.buffer.lines.get(s),f=l==null?void 0:l.isWrapped;for(;f&&s>=0&&s<c.rows;)o++,l=c.buffer.lines.get(--s),f=l==null?void 0:l.isWrapped;return o}function m(s,c){return s>c?"A":"B"}function w(s,c,o,l,f,x){let C=s,E=c,k="";for(;C!==o||E!==l;)C+=f?1:-1,f&&C>x.cols-1?(k+=x.buffer.translateBufferLineToString(E,!1,s,C),C=0,s=0,E++):!f&&C<0&&(k+=x.buffer.translateBufferLineToString(E,!1,0,s+1),C=x.cols-1,s=C,E--);return k+x.buffer.translateBufferLineToString(E,!1,s,C)}function S(s,c){const o=c?"O":"[";return u.C0.ESC+o+s}function v(s,c){s=Math.floor(s);let o="";for(let l=0;l<s;l++)o+=c;return o}i.moveToCellSequence=function(s,c,o,l){const f=o.buffer.x,x=o.buffer.y;if(!o.buffer.hasScrollback)return function(k,L,T,R,O,A){return b(L,R,O,A).length===0?"":v(w(k,L,k,L-h(L,O),!1,O).length,S("D",A))}(f,x,0,c,o,l)+b(x,c,o,l)+function(k,L,T,R,O,A){let j;j=b(L,R,O,A).length>0?R-h(R,O):L;const Z=R,ie=function(te,Y,B,P,H,z){let U;return U=b(B,P,H,z).length>0?P-h(P,H):Y,te<B&&U<=P||te>=B&&U<P?"C":"D"}(k,L,T,R,O,A);return v(w(k,j,T,Z,ie==="C",O).length,S(ie,A))}(f,x,s,c,o,l);let C;if(x===c)return C=f>s?"D":"C",v(Math.abs(f-s),S(C,l));C=x>c?"D":"C";const E=Math.abs(x-c);return v(function(k,L){return L.cols-k}(x>c?s:f,o)+(E-1)*o.cols+1+((x>c?f:s)-1),S(C,l))}},1296:function(_,i,n){var u=this&&this.__decorate||function(A,j,Z,ie){var te,Y=arguments.length,B=Y<3?j:ie===null?ie=Object.getOwnPropertyDescriptor(j,Z):ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(A,j,Z,ie);else for(var P=A.length-1;P>=0;P--)(te=A[P])&&(B=(Y<3?te(B):Y>3?te(j,Z,B):te(j,Z))||B);return Y>3&&B&&Object.defineProperty(j,Z,B),B},b=this&&this.__param||function(A,j){return function(Z,ie){j(Z,ie,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=n(3787),m=n(2550),w=n(2223),S=n(6171),v=n(6052),s=n(4725),c=n(8055),o=n(8460),l=n(844),f=n(2585),x="xterm-dom-renderer-owner-",C="xterm-rows",E="xterm-fg-",k="xterm-bg-",L="xterm-focus",T="xterm-selection";let R=1,O=i.DomRenderer=class extends l.Disposable{constructor(A,j,Z,ie,te,Y,B,P,H,z,U,G,$){super(),this._terminal=A,this._document=j,this._element=Z,this._screenElement=ie,this._viewportElement=te,this._helperContainer=Y,this._linkifier2=B,this._charSizeService=H,this._optionsService=z,this._bufferService=U,this._coreBrowserService=G,this._themeService=$,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ne=>this._injectCss(ne))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(x+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ne=>this._handleLinkHover(ne))),this.register(this._linkifier2.onHideLinkUnderline(ne=>this._handleLinkLeave(ne))),this.register((0,l.toDisposable)(()=>{this._element.classList.remove(x+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Z of this._rowElements)Z.style.width=`${this.dimensions.css.canvas.width}px`,Z.style.height=`${this.dimensions.css.cell.height}px`,Z.style.lineHeight=`${this.dimensions.css.cell.height}px`,Z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${C} .xterm-dim { color: ${c.color.multiplyOpacity(A.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const Z=`blink_underline_${this._terminalClass}`,ie=`blink_bar_${this._terminalClass}`,te=`blink_block_${this._terminalClass}`;j+=`@keyframes ${Z} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${ie} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${te} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,j+=`${this._terminalSelector} .${C}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${Z} 1s step-end infinite;}${this._terminalSelector} .${C}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ie} 1s step-end infinite;}${this._terminalSelector} .${C}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${te} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[Y,B]of A.ansi.entries())j+=`${this._terminalSelector} .${E}${Y} { color: ${B.css}; }${this._terminalSelector} .${E}${Y}.xterm-dim { color: ${c.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${k}${Y} { background-color: ${B.css}; }`;j+=`${this._terminalSelector} .${E}${w.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(A.background).css}; }${this._terminalSelector} .${E}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${k}${w.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,j){for(let Z=this._rowElements.length;Z<=j;Z++){const ie=this._document.createElement("div");this._rowContainer.appendChild(ie),this._rowElements.push(ie)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,j){this._refreshRowElements(A,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,j,Z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,j,Z),this.renderRows(0,this._bufferService.rows-1),!A||!j)return;this._selectionRenderModel.update(this._terminal,A,j,Z);const ie=this._selectionRenderModel.viewportStartRow,te=this._selectionRenderModel.viewportEndRow,Y=this._selectionRenderModel.viewportCappedStartRow,B=this._selectionRenderModel.viewportCappedEndRow;if(Y>=this._bufferService.rows||B<0)return;const P=this._document.createDocumentFragment();if(Z){const H=A[0]>j[0];P.appendChild(this._createSelectionElement(Y,H?j[0]:A[0],H?A[0]:j[0],B-Y+1))}else{const H=ie===Y?A[0]:0,z=Y===te?j[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(Y,H,z));const U=B-Y-1;if(P.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,U)),Y!==B){const G=te===B?j[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(B,0,G))}}this._selectionContainer.appendChild(P)}_createSelectionElement(A,j,Z,ie=1){const te=this._document.createElement("div"),Y=j*this.dimensions.css.cell.width;let B=this.dimensions.css.cell.width*(Z-j);return Y+B>this.dimensions.css.canvas.width&&(B=this.dimensions.css.canvas.width-Y),te.style.height=ie*this.dimensions.css.cell.height+"px",te.style.top=A*this.dimensions.css.cell.height+"px",te.style.left=`${Y}px`,te.style.width=`${B}px`,te}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,j){const Z=this._bufferService.buffer,ie=Z.ybase+Z.y,te=Math.min(Z.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,B=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=A;H<=j;H++){const z=H+Z.ydisp,U=this._rowElements[H],G=Z.lines.get(z);if(!U||!G)break;U.replaceChildren(...this._rowFactory.createRow(G,z,z===ie,B,P,te,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${x}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,j,Z,ie,te,Y){Z<0&&(A=0),ie<0&&(j=0);const B=this._bufferService.rows-1;Z=Math.max(Math.min(Z,B),0),ie=Math.max(Math.min(ie,B),0),te=Math.min(te,this._bufferService.cols);const P=this._bufferService.buffer,H=P.ybase+P.y,z=Math.min(P.x,te-1),U=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,$=this._optionsService.rawOptions.cursorInactiveStyle;for(let ne=Z;ne<=ie;++ne){const W=ne+P.ydisp,M=this._rowElements[ne],q=P.lines.get(W);if(!M||!q)break;M.replaceChildren(...this._rowFactory.createRow(q,W,W===H,G,$,z,U,this.dimensions.css.cell.width,this._widthCache,Y?ne===Z?A:0:-1,Y?(ne===ie?j:te)-1:-1))}}};i.DomRenderer=O=u([b(7,f.IInstantiationService),b(8,s.ICharSizeService),b(9,f.IOptionsService),b(10,f.IBufferService),b(11,s.ICoreBrowserService),b(12,s.IThemeService)],O)},3787:function(_,i,n){var u=this&&this.__decorate||function(C,E,k,L){var T,R=arguments.length,O=R<3?E:L===null?L=Object.getOwnPropertyDescriptor(E,k):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,E,k,L);else for(var A=C.length-1;A>=0;A--)(T=C[A])&&(O=(R<3?T(O):R>3?T(E,k,O):T(E,k))||O);return R>3&&O&&Object.defineProperty(E,k,O),O},b=this&&this.__param||function(C,E){return function(k,L){E(k,L,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=n(2223),m=n(643),w=n(511),S=n(2585),v=n(8055),s=n(4725),c=n(4269),o=n(6171),l=n(3734);let f=i.DomRendererRowFactory=class{constructor(C,E,k,L,T,R,O){this._document=C,this._characterJoinerService=E,this._optionsService=k,this._coreBrowserService=L,this._coreService=T,this._decorationService=R,this._themeService=O,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,E,k){this._selectionStart=C,this._selectionEnd=E,this._columnSelectMode=k}createRow(C,E,k,L,T,R,O,A,j,Z,ie){const te=[],Y=this._characterJoinerService.getJoinedCharacters(E),B=this._themeService.colors;let P,H=C.getNoBgTrimmedLength();k&&H<R+1&&(H=R+1);let z=0,U="",G=0,$=0,ne=0,W=!1,M=0,q=!1,I=0;const X=[],J=Z!==-1&&ie!==-1;for(let N=0;N<H;N++){C.loadCell(N,this._workCell);let ae=this._workCell.getWidth();if(ae===0)continue;let Q=!1,ce=N,he=this._workCell;if(Y.length>0&&N===Y[0][0]){Q=!0;const ye=Y.shift();he=new c.JoinedCellData(this._workCell,C.translateToString(!0,ye[0],ye[1]),ye[1]-ye[0]),ce=ye[1]-1,ae=he.getWidth()}const Me=this._isCellInSelection(N,E),xe=k&&N===R,Te=J&&N>=Z&&N<=ie;let me=!1;this._decorationService.forEachDecorationAtCell(N,E,void 0,ye=>{me=!0});let we=he.getChars()||m.WHITESPACE_CELL_CHAR;if(we===" "&&(he.isUnderline()||he.isOverline())&&(we=" "),I=ae*A-j.get(we,he.isBold(),he.isItalic()),P){if(z&&(Me&&q||!Me&&!q&&he.bg===G)&&(Me&&q&&B.selectionForeground||he.fg===$)&&he.extended.ext===ne&&Te===W&&I===M&&!xe&&!Q&&!me){he.isInvisible()?U+=m.WHITESPACE_CELL_CHAR:U+=we,z++;continue}z&&(P.textContent=U),P=this._document.createElement("span"),z=0,U=""}else P=this._document.createElement("span");if(G=he.bg,$=he.fg,ne=he.extended.ext,W=Te,M=I,q=Me,Q&&R>=N&&R<=ce&&(R=N),!this._coreService.isCursorHidden&&xe&&this._coreService.isCursorInitialized){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&X.push("xterm-cursor-blink"),X.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(he.isBold()&&X.push("xterm-bold"),he.isItalic()&&X.push("xterm-italic"),he.isDim()&&X.push("xterm-dim"),U=he.isInvisible()?m.WHITESPACE_CELL_CHAR:he.getChars()||m.WHITESPACE_CELL_CHAR,he.isUnderline()&&(X.push(`xterm-underline-${he.extended.underlineStyle}`),U===" "&&(U=" "),!he.isUnderlineColorDefault()))if(he.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${l.AttributeData.toColorRGB(he.getUnderlineColor()).join(",")})`;else{let ye=he.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&he.isBold()&&ye<8&&(ye+=8),P.style.textDecorationColor=B.ansi[ye].css}he.isOverline()&&(X.push("xterm-overline"),U===" "&&(U=" ")),he.isStrikethrough()&&X.push("xterm-strikethrough"),Te&&(P.style.textDecoration="underline");let ke=he.getFgColor(),de=he.getFgColorMode(),fe=he.getBgColor(),He=he.getBgColorMode();const Ge=!!he.isInverse();if(Ge){const ye=ke;ke=fe,fe=ye;const rt=de;de=He,He=rt}let ze,Ue,Pe,Re=!1;switch(this._decorationService.forEachDecorationAtCell(N,E,void 0,ye=>{ye.options.layer!=="top"&&Re||(ye.backgroundColorRGB&&(He=50331648,fe=ye.backgroundColorRGB.rgba>>8&16777215,ze=ye.backgroundColorRGB),ye.foregroundColorRGB&&(de=50331648,ke=ye.foregroundColorRGB.rgba>>8&16777215,Ue=ye.foregroundColorRGB),Re=ye.options.layer==="top")}),!Re&&Me&&(ze=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,fe=ze.rgba>>8&16777215,He=50331648,Re=!0,B.selectionForeground&&(de=50331648,ke=B.selectionForeground.rgba>>8&16777215,Ue=B.selectionForeground)),Re&&X.push("xterm-decoration-top"),He){case 16777216:case 33554432:Pe=B.ansi[fe],X.push(`xterm-bg-${fe}`);break;case 50331648:Pe=v.channels.toColor(fe>>16,fe>>8&255,255&fe),this._addStyle(P,`background-color:#${x((fe>>>0).toString(16),"0",6)}`);break;default:Ge?(Pe=B.foreground,X.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Pe=B.background}switch(ze||he.isDim()&&(ze=v.color.multiplyOpacity(Pe,.5)),de){case 16777216:case 33554432:he.isBold()&&ke<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ke+=8),this._applyMinimumContrast(P,Pe,B.ansi[ke],he,ze,void 0)||X.push(`xterm-fg-${ke}`);break;case 50331648:const ye=v.channels.toColor(ke>>16&255,ke>>8&255,255&ke);this._applyMinimumContrast(P,Pe,ye,he,ze,Ue)||this._addStyle(P,`color:#${x(ke.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,Pe,B.foreground,he,ze,Ue)||Ge&&X.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}X.length&&(P.className=X.join(" "),X.length=0),xe||Q||me?P.textContent=U:z++,I!==this.defaultSpacing&&(P.style.letterSpacing=`${I}px`),te.push(P),N=ce}return P&&z&&(P.textContent=U),te}_applyMinimumContrast(C,E,k,L,T,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const O=this._getContrastCache(L);let A;if(T||R||(A=O.getColor(E.rgba,k.rgba)),A===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);A=v.color.ensureContrastRatio(T||E,R||k,j),O.setColor((T||E).rgba,(R||k).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,E){C.setAttribute("style",`${C.getAttribute("style")||""}${E};`)}_isCellInSelection(C,E){const k=this._selectionStart,L=this._selectionEnd;return!(!k||!L)&&(this._columnSelectMode?k[0]<=L[0]?C>=k[0]&&E>=k[1]&&C<L[0]&&E<=L[1]:C<k[0]&&E>=k[1]&&C>=L[0]&&E<=L[1]:E>k[1]&&E<L[1]||k[1]===L[1]&&E===k[1]&&C>=k[0]&&C<L[0]||k[1]<L[1]&&E===L[1]&&C<L[0]||k[1]<L[1]&&E===k[1]&&C>=k[0])}};function x(C,E,k){for(;C.length<k;)C=E+C;return C}i.DomRendererRowFactory=f=u([b(1,s.ICharacterJoinerService),b(2,S.IOptionsService),b(3,s.ICoreBrowserService),b(4,S.ICoreService),b(5,S.IDecorationService),b(6,s.IThemeService)],f)},2550:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const b=n.createElement("span");b.classList.add("xterm-char-measure-element");const h=n.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const m=n.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const w=n.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[b,h,m,w],this._container.appendChild(b),this._container.appendChild(h),this._container.appendChild(m),this._container.appendChild(w),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,u,b,h){n===this._font&&u===this._fontSize&&b===this._weight&&h===this._weightBold||(this._font=n,this._fontSize=u,this._weight=b,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${b}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${b}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(n,u,b){let h=0;if(!u&&!b&&n.length===1&&(h=n.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const S=this._measure(n,0);return S>0&&(this._flat[h]=S),S}let m=n;u&&(m+="B"),b&&(m+="I");let w=this._holey.get(m);if(w===void 0){let S=0;u&&(S|=1),b&&(S|=2),w=this._measure(n,S),w>0&&this._holey.set(m,w)}return w}_measure(n,u){const b=this._measureElements[u];return b.textContent=n.repeat(32),b.offsetWidth/32}}},2223:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(_,i)=>{function n(b){return 57508<=b&&b<=57558}function u(b){return b>=128512&&b<=128591||b>=127744&&b<=128511||b>=128640&&b<=128767||b>=9728&&b<=9983||b>=9984&&b<=10175||b>=65024&&b<=65039||b>=129280&&b<=129535||b>=127462&&b<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(b){if(!b)throw new Error("value must not be falsy");return b},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(b){return 57520<=b&&b<=57527},i.isEmoji=u,i.allowRescaling=function(b,h,m,w){return h===1&&m>Math.ceil(1.5*w)&&b!==void 0&&b>255&&!u(b)&&!n(b)&&!function(S){return 57344<=S&&S<=63743}(b)},i.treatGlyphAsBackgroundColor=function(b){return n(b)||function(h){return 9472<=h&&h<=9631}(b)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(b,h,m=0){return(b-(2*Math.round(h)-m))%(2*Math.round(h))}},6052:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(b,h,m,w=!1){if(this.selectionStart=h,this.selectionEnd=m,!h||!m||h[0]===m[0]&&h[1]===m[1])return void this.clear();const S=b.buffers.active.ydisp,v=h[1]-S,s=m[1]-S,c=Math.max(v,0),o=Math.min(s,b.rows-1);c>=b.rows||o<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=v,this.viewportEndRow=s,this.viewportCappedStartRow=c,this.viewportCappedEndRow=o,this.startCol=h[0],this.endCol=m[0])}isCellSelected(b,h,m){return!!this.hasSelection&&(m-=b.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&m>=this.viewportCappedStartRow&&h<this.endCol&&m<=this.viewportCappedEndRow:h<this.startCol&&m>=this.viewportCappedStartRow&&h>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new n}},456:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,u=this.selectionEnd;return!(!n||!u)&&(n[1]>u[1]||n[1]===u[1]&&n[0]>u[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(_,i,n){var u=this&&this.__decorate||function(o,l,f,x){var C,E=arguments.length,k=E<3?l:x===null?x=Object.getOwnPropertyDescriptor(l,f):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,l,f,x);else for(var L=o.length-1;L>=0;L--)(C=o[L])&&(k=(E<3?C(k):E>3?C(l,f,k):C(l,f))||k);return E>3&&k&&Object.defineProperty(l,f,k),k},b=this&&this.__param||function(o,l){return function(f,x){l(f,x,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=n(2585),m=n(8460),w=n(844);let S=i.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,l,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new c(this._optionsService))}catch{this._measureStrategy=this.register(new s(o,l,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};i.CharSizeService=S=u([b(2,h.IOptionsService)],S);class v extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(l,f){l!==void 0&&l>0&&f!==void 0&&f>0&&(this._result.width=l,this._result.height=f)}}class s extends v{constructor(l,f,x){super(),this._document=l,this._parentElement=f,this._optionsService=x,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class c extends v{constructor(l){super(),this._optionsService=l,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const f=this._ctx.measureText("W");if(!("width"in f&&"fontBoundingBoxAscent"in f&&"fontBoundingBoxDescent"in f))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const l=this._ctx.measureText("W");return this._validateAndSet(l.width,l.fontBoundingBoxAscent+l.fontBoundingBoxDescent),this._result}}},4269:function(_,i,n){var u=this&&this.__decorate||function(c,o,l,f){var x,C=arguments.length,E=C<3?o:f===null?f=Object.getOwnPropertyDescriptor(o,l):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,o,l,f);else for(var k=c.length-1;k>=0;k--)(x=c[k])&&(E=(C<3?x(E):C>3?x(o,l,E):x(o,l))||E);return C>3&&E&&Object.defineProperty(o,l,E),E},b=this&&this.__param||function(c,o){return function(l,f){o(l,f,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=n(3734),m=n(643),w=n(511),S=n(2585);class v extends h.AttributeData{constructor(o,l,f){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=l,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let s=i.CharacterJoinerService=class cs{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(o){const l={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(l),l.id}deregister(o){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===o)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(o);if(!l||l.length===0)return[];const f=[],x=l.translateToString(!0);let C=0,E=0,k=0,L=l.getFg(0),T=l.getBg(0);for(let R=0;R<l.getTrimmedLength();R++)if(l.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==T){if(R-C>1){const O=this._getJoinedRanges(x,k,E,l,C);for(let A=0;A<O.length;A++)f.push(O[A])}C=R,k=E,L=this._workCell.fg,T=this._workCell.bg}E+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const R=this._getJoinedRanges(x,k,E,l,C);for(let O=0;O<R.length;O++)f.push(R[O])}return f}_getJoinedRanges(o,l,f,x,C){const E=o.substring(l,f);let k=[];try{k=this._characterJoiners[0].handler(E)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const T=this._characterJoiners[L].handler(E);for(let R=0;R<T.length;R++)cs._mergeRanges(k,T[R])}catch(T){console.error(T)}return this._stringRangesToCellRanges(k,x,C),k}_stringRangesToCellRanges(o,l,f){let x=0,C=!1,E=0,k=o[x];if(k){for(let L=f;L<this._bufferService.cols;L++){const T=l.getWidth(L),R=l.getString(L).length||m.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!C&&k[0]<=E&&(k[0]=L,C=!0),k[1]<=E){if(k[1]=L,k=o[++x],!k)break;k[0]<=E?(k[0]=L,C=!0):C=!1}E+=R}}k&&(k[1]=this._bufferService.cols)}}static _mergeRanges(o,l){let f=!1;for(let x=0;x<o.length;x++){const C=o[x];if(f){if(l[1]<=C[0])return o[x-1][1]=l[1],o;if(l[1]<=C[1])return o[x-1][1]=Math.max(l[1],C[1]),o.splice(x,1),o;o.splice(x,1),x--}else{if(l[1]<=C[0])return o.splice(x,0,l),o;if(l[1]<=C[1])return C[0]=Math.min(l[0],C[0]),o;l[0]<C[1]&&(C[0]=Math.min(l[0],C[0]),f=!0)}}return f?o[o.length-1][1]=l[1]:o.push(l),o}};i.CharacterJoinerService=s=u([b(0,S.IBufferService)],s)},5114:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const u=n(844),b=n(8460),h=n(3656);class m extends u.Disposable{constructor(v,s,c){super(),this._textarea=v,this._window=s,this.mainDocument=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new b.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(o=>this._screenDprMonitor.setWindow(o))),this.register((0,b.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=m;class w extends u.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new b.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const u=n(844);class b extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const w=this.linkProviders.indexOf(m);w!==-1&&this.linkProviders.splice(w,1)}}}}i.LinkProviderService=b},8934:function(_,i,n){var u=this&&this.__decorate||function(S,v,s,c){var o,l=arguments.length,f=l<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,s):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(S,v,s,c);else for(var x=S.length-1;x>=0;x--)(o=S[x])&&(f=(l<3?o(f):l>3?o(v,s,f):o(v,s))||f);return l>3&&f&&Object.defineProperty(v,s,f),f},b=this&&this.__param||function(S,v){return function(s,c){v(s,c,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=n(4725),m=n(9806);let w=i.MouseService=class{constructor(S,v){this._renderService=S,this._charSizeService=v}getCoords(S,v,s,c,o){return(0,m.getCoords)(window,S,v,s,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(S,v){const s=(0,m.getCoordsRelativeToElement)(window,S,v);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};i.MouseService=w=u([b(0,h.IRenderService),b(1,h.ICharSizeService)],w)},3230:function(_,i,n){var u=this&&this.__decorate||function(o,l,f,x){var C,E=arguments.length,k=E<3?l:x===null?x=Object.getOwnPropertyDescriptor(l,f):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,l,f,x);else for(var L=o.length-1;L>=0;L--)(C=o[L])&&(k=(E<3?C(k):E>3?C(l,f,k):C(l,f))||k);return E>3&&k&&Object.defineProperty(l,f,k),k},b=this&&this.__param||function(o,l){return function(f,x){l(f,x,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=n(6193),m=n(4725),w=n(8460),S=n(844),v=n(7226),s=n(2585);let c=i.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(o,l,f,x,C,E,k,L){super(),this._rowCount=o,this._charSizeService=x,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((T,R)=>this._renderRows(T,R),k),this.register(this._renderDebouncer),this.register(k.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(f.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(f.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(f.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register(L.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(k.window,l),this.register(k.onWindowChange(T=>this._registerIntersectionObserver(T,l)))}_registerIntersectionObserver(o,l){if("IntersectionObserver"in o){const f=new o.IntersectionObserver(x=>this._handleIntersectionChange(x[x.length-1]),{threshold:0});f.observe(l),this._observerDisposable.value=(0,S.toDisposable)(()=>f.disconnect())}}_handleIntersectionChange(o){this._isPaused=o.isIntersecting===void 0?o.intersectionRatio===0:!o.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(o,l,f=!1){this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(o,l,this._rowCount))}_renderRows(o,l){this._renderer.value&&(o=Math.min(o,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(o,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:o,end:l}),this._onRender.fire({start:o,end:l}),this._isNextRenderRedrawOnly=!0)}resize(o,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(o){this._renderer.value=o,this._renderer.value&&(this._renderer.value.onRequestRedraw(l=>this.refreshRows(l.start,l.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(o){return this._renderDebouncer.addRefreshCallback(o)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var o,l;this._renderer.value&&((l=(o=this._renderer.value).clearTextureAtlas)==null||l.call(o),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(o,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var f;return(f=this._renderer.value)==null?void 0:f.handleResize(o,l)}):this._renderer.value.handleResize(o,l),this._fullRefresh())}handleCharSizeChanged(){var o;(o=this._renderer.value)==null||o.handleCharSizeChanged()}handleBlur(){var o;(o=this._renderer.value)==null||o.handleBlur()}handleFocus(){var o;(o=this._renderer.value)==null||o.handleFocus()}handleSelectionChanged(o,l,f){var x;this._selectionState.start=o,this._selectionState.end=l,this._selectionState.columnSelectMode=f,(x=this._renderer.value)==null||x.handleSelectionChanged(o,l,f)}handleCursorMove(){var o;(o=this._renderer.value)==null||o.handleCursorMove()}clear(){var o;(o=this._renderer.value)==null||o.clear()}};i.RenderService=c=u([b(2,s.IOptionsService),b(3,m.ICharSizeService),b(4,s.IDecorationService),b(5,s.IBufferService),b(6,m.ICoreBrowserService),b(7,m.IThemeService)],c)},9312:function(_,i,n){var u=this&&this.__decorate||function(k,L,T,R){var O,A=arguments.length,j=A<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,T):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(k,L,T,R);else for(var Z=k.length-1;Z>=0;Z--)(O=k[Z])&&(j=(A<3?O(j):A>3?O(L,T,j):O(L,T))||j);return A>3&&j&&Object.defineProperty(L,T,j),j},b=this&&this.__param||function(k,L){return function(T,R){L(T,R,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=n(9806),m=n(9504),w=n(456),S=n(4725),v=n(8460),s=n(844),c=n(6114),o=n(4841),l=n(511),f=n(2585),x=" ",C=new RegExp(x,"g");let E=i.SelectionService=class extends s.Disposable{constructor(k,L,T,R,O,A,j,Z,ie){super(),this._element=k,this._screenElement=L,this._linkifier=T,this._bufferService=R,this._coreService=O,this._mouseService=A,this._optionsService=j,this._renderService=Z,this._coreBrowserService=ie,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=te=>this._handleMouseMove(te),this._mouseUpListener=te=>this._handleMouseUp(te),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(te=>this._handleTrim(te)),this.register(this._bufferService.buffers.onBufferActivate(te=>this._handleBufferActivate(te))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const k=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!k||!L||k[0]===L[0]&&k[1]===L[1])}get selectionText(){const k=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!k||!L)return"";const T=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(k[0]===L[0])return"";const O=k[0]<L[0]?k[0]:L[0],A=k[0]<L[0]?L[0]:k[0];for(let j=k[1];j<=L[1];j++){const Z=T.translateBufferLineToString(j,!0,O,A);R.push(Z)}}else{const O=k[1]===L[1]?L[0]:void 0;R.push(T.translateBufferLineToString(k[1],!0,k[0],O));for(let A=k[1]+1;A<=L[1]-1;A++){const j=T.lines.get(A),Z=T.translateBufferLineToString(A,!0);j!=null&&j.isWrapped?R[R.length-1]+=Z:R.push(Z)}if(k[1]!==L[1]){const A=T.lines.get(L[1]),j=T.translateBufferLineToString(L[1],!0,0,L[0]);A&&A.isWrapped?R[R.length-1]+=j:R.push(j)}}return R.map(O=>O.replace(C," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(k){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&k&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(k){const L=this._getMouseBufferCoords(k),T=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(T&&R&&L)&&this._areCoordsInSelection(L,T,R)}isCellInSelection(k,L){const T=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!T||!R)&&this._areCoordsInSelection([k,L],T,R)}_areCoordsInSelection(k,L,T){return k[1]>L[1]&&k[1]<T[1]||L[1]===T[1]&&k[1]===L[1]&&k[0]>=L[0]&&k[0]<T[0]||L[1]<T[1]&&k[1]===T[1]&&k[0]<T[0]||L[1]<T[1]&&k[1]===L[1]&&k[0]>=L[0]}_selectWordAtCursor(k,L){var O,A;const T=(A=(O=this._linkifier.currentLink)==null?void 0:O.link)==null?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(k);return!!R&&(this._selectWordAt(R,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(k,L){this._model.clearSelection(),k=Math.max(k,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,k],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(k){this._model.handleTrim(k)&&this.refresh()}_getMouseBufferCoords(k){const L=this._mouseService.getCoords(k,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(k){let L=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,k,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=T?0:(L>T&&(L-=T),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(k){return c.isMac?k.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:k.shiftKey}handleMouseDown(k){if(this._mouseDownTimeStamp=k.timeStamp,(k.button!==2||!this.hasSelection)&&k.button===0){if(!this._enabled){if(!this.shouldForceSelection(k))return;k.stopPropagation()}k.preventDefault(),this._dragScrollAmount=0,this._enabled&&k.shiftKey?this._handleIncrementalClick(k):k.detail===1?this._handleSingleClick(k):k.detail===2?this._handleDoubleClick(k):k.detail===3&&this._handleTripleClick(k),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(k){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(k))}_handleSingleClick(k){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(k)?3:0,this._model.selectionStart=this._getMouseBufferCoords(k),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(k){this._selectWordAtCursor(k,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(k){const L=this._getMouseBufferCoords(k);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(k){return k.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(k){if(k.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(k),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(k),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const R=T.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const k=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(k.ydisp+this._bufferService.rows,k.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=k.ydisp),this.refresh()}}_handleMouseUp(k){const L=k.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&k.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(k,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const R=(0,m.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const k=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,T=!(!k||!L||k[0]===L[0]&&k[1]===L[1]);T?k&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&k[0]===this._oldSelectionStart[0]&&k[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(k,L,T)):this._oldHasSelection&&this._fireOnSelectionChange(k,L,T)}_fireOnSelectionChange(k,L,T){this._oldSelectionStart=k,this._oldSelectionEnd=L,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(k){this.clearSelection(),this._trimListener.dispose(),this._trimListener=k.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(k,L){let T=L;for(let R=0;L>=R;R++){const O=k.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:O>1&&L!==R&&(T+=O-1)}return T}setSelection(k,L,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[k,L],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(k){this._isClickInSelection(k)||(this._selectWordAtCursor(k,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(k,L,T=!0,R=!0){if(k[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,A=O.lines.get(k[1]);if(!A)return;const j=O.translateBufferLineToString(k[1],!1);let Z=this._convertViewportColToCharacterIndex(A,k[0]),ie=Z;const te=k[0]-Z;let Y=0,B=0,P=0,H=0;if(j.charAt(Z)===" "){for(;Z>0&&j.charAt(Z-1)===" ";)Z--;for(;ie<j.length&&j.charAt(ie+1)===" ";)ie++}else{let G=k[0],$=k[0];A.getWidth(G)===0&&(Y++,G--),A.getWidth($)===2&&(B++,$++);const ne=A.getString($).length;for(ne>1&&(H+=ne-1,ie+=ne-1);G>0&&Z>0&&!this._isCharWordSeparator(A.loadCell(G-1,this._workCell));){A.loadCell(G-1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,G--):W>1&&(P+=W-1,Z-=W-1),Z--,G--}for(;$<A.length&&ie+1<j.length&&!this._isCharWordSeparator(A.loadCell($+1,this._workCell));){A.loadCell($+1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,$++):W>1&&(H+=W-1,ie+=W-1),ie++,$++}}ie++;let z=Z+te-Y+P,U=Math.min(this._bufferService.cols,ie-Z+Y+B-P-H);if(L||j.slice(Z,ie).trim()!==""){if(T&&z===0&&A.getCodePoint(0)!==32){const G=O.lines.get(k[1]-1);if(G&&A.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){const $=this._getWordAt([this._bufferService.cols-1,k[1]-1],!1,!0,!1);if($){const ne=this._bufferService.cols-$.start;z-=ne,U+=ne}}}if(R&&z+U===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const G=O.lines.get(k[1]+1);if(G!=null&&G.isWrapped&&G.getCodePoint(0)!==32){const $=this._getWordAt([0,k[1]+1],!1,!1,!0);$&&(U+=$.length)}}return{start:z,length:U}}}_selectWordAt(k,L){const T=this._getWordAt(k,L);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,k[1]--;this._model.selectionStart=[T.start,k[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(k){const L=this._getWordAt(k,!0);if(L){let T=k[1];for(;L.start<0;)L.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,T]}}_isCharWordSeparator(k){return k.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(k.getChars())>=0}_selectLineAt(k){const L=this._bufferService.buffer.getWrappedRangeForLine(k),T={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(T,this._bufferService.cols)}};i.SelectionService=E=u([b(3,f.IBufferService),b(4,f.ICoreService),b(5,S.IMouseService),b(6,f.IOptionsService),b(7,S.IRenderService),b(8,S.ICoreBrowserService)],E)},4725:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=n(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService"),i.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(_,i,n){var u=this&&this.__decorate||function(E,k,L,T){var R,O=arguments.length,A=O<3?k:T===null?T=Object.getOwnPropertyDescriptor(k,L):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,k,L,T);else for(var j=E.length-1;j>=0;j--)(R=E[j])&&(A=(O<3?R(A):O>3?R(k,L,A):R(k,L))||A);return O>3&&A&&Object.defineProperty(k,L,A),A},b=this&&this.__param||function(E,k){return function(L,T){k(L,T,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=n(7239),m=n(8055),w=n(8460),S=n(844),v=n(2585),s=m.css.toColor("#ffffff"),c=m.css.toColor("#000000"),o=m.css.toColor("#ffffff"),l=m.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],k=[0,95,135,175,215,255];for(let L=0;L<216;L++){const T=k[L/36%6|0],R=k[L/6%6|0],O=k[L%6];E.push({css:m.channels.toCss(T,R,O),rgba:m.channels.toRgba(T,R,O)})}for(let L=0;L<24;L++){const T=8+10*L;E.push({css:m.channels.toCss(T,T,T),rgba:m.channels.toRgba(T,T,T)})}return E})());let x=i.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:c,cursor:o,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:m.color.blend(c,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:m.color.blend(c,f),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const k=this._colors;if(k.foreground=C(E.foreground,s),k.background=C(E.background,c),k.cursor=C(E.cursor,o),k.cursorAccent=C(E.cursorAccent,l),k.selectionBackgroundTransparent=C(E.selectionBackground,f),k.selectionBackgroundOpaque=m.color.blend(k.background,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundTransparent=C(E.selectionInactiveBackground,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundOpaque=m.color.blend(k.background,k.selectionInactiveBackgroundTransparent),k.selectionForeground=E.selectionForeground?C(E.selectionForeground,m.NULL_COLOR):void 0,k.selectionForeground===m.NULL_COLOR&&(k.selectionForeground=void 0),m.color.isOpaque(k.selectionBackgroundTransparent)&&(k.selectionBackgroundTransparent=m.color.opacity(k.selectionBackgroundTransparent,.3)),m.color.isOpaque(k.selectionInactiveBackgroundTransparent)&&(k.selectionInactiveBackgroundTransparent=m.color.opacity(k.selectionInactiveBackgroundTransparent,.3)),k.ansi=i.DEFAULT_ANSI_COLORS.slice(),k.ansi[0]=C(E.black,i.DEFAULT_ANSI_COLORS[0]),k.ansi[1]=C(E.red,i.DEFAULT_ANSI_COLORS[1]),k.ansi[2]=C(E.green,i.DEFAULT_ANSI_COLORS[2]),k.ansi[3]=C(E.yellow,i.DEFAULT_ANSI_COLORS[3]),k.ansi[4]=C(E.blue,i.DEFAULT_ANSI_COLORS[4]),k.ansi[5]=C(E.magenta,i.DEFAULT_ANSI_COLORS[5]),k.ansi[6]=C(E.cyan,i.DEFAULT_ANSI_COLORS[6]),k.ansi[7]=C(E.white,i.DEFAULT_ANSI_COLORS[7]),k.ansi[8]=C(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),k.ansi[9]=C(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),k.ansi[10]=C(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),k.ansi[11]=C(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),k.ansi[12]=C(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),k.ansi[13]=C(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),k.ansi[14]=C(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),k.ansi[15]=C(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const L=Math.min(k.ansi.length-16,E.extendedAnsi.length);for(let T=0;T<L;T++)k.ansi[T+16]=C(E.extendedAnsi[T],i.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let k=0;k<this._restoreColors.ansi.length;++k)this._colors.ansi[k]=this._restoreColors.ansi[k]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(E,k){if(E!==void 0)try{return m.css.toColor(E)}catch{}return k}i.ThemeService=x=u([b(0,v.IOptionsService)],x)},6349:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=n(8460),b=n(844);class h extends b.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const S=new Array(w);for(let v=0;v<Math.min(w,this.length);v++)S[v]=this._array[this._getCyclicIndex(v)];this._array=S,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let S=this._length;S<w;S++)this._array[S]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,S){this._array[this._getCyclicIndex(w)]=S}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,S,...v){if(S){for(let s=w;s<this._length-S;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+S)];this._length-=S,this.onDeleteEmitter.fire({index:w,amount:S})}for(let s=this._length-1;s>=w;s--)this._array[this._getCyclicIndex(s+v.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<v.length;s++)this._array[this._getCyclicIndex(w+s)]=v[s];if(v.length&&this.onInsertEmitter.fire({index:w,amount:v.length}),this._length+v.length>this._maxLength){const s=this._length+v.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=v.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,S,v){if(!(S<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let c=S-1;c>=0;c--)this.set(w+c+v,this.get(w+c));const s=w+S+v-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<S;s++)this.set(w+s+v,this.get(w+s))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}i.CircularList=h},1439:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(u,b=5){if(typeof u!="object")return u;const h=Array.isArray(u)?[]:{};for(const m in u)h[m]=b<=1?u[m]:u[m]&&n(u[m],b-1);return h}},8055:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let n=0,u=0,b=0,h=0;var m,w,S,v,s;function c(l){const f=l.toString(16);return f.length<2?"0"+f:f}function o(l,f){return l<f?(f+.05)/(l+.05):(l+.05)/(f+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(f,x,C,E){return E!==void 0?`#${c(f)}${c(x)}${c(C)}${c(E)}`:`#${c(f)}${c(x)}${c(C)}`},l.toRgba=function(f,x,C,E=255){return(f<<24|x<<16|C<<8|E)>>>0},l.toColor=function(f,x,C,E){return{css:l.toCss(f,x,C,E),rgba:l.toRgba(f,x,C,E)}}}(m||(i.channels=m={})),function(l){function f(x,C){return h=Math.round(255*C),[n,u,b]=s.toChannels(x.rgba),{css:m.toCss(n,u,b,h),rgba:m.toRgba(n,u,b,h)}}l.blend=function(x,C){if(h=(255&C.rgba)/255,h===1)return{css:C.css,rgba:C.rgba};const E=C.rgba>>24&255,k=C.rgba>>16&255,L=C.rgba>>8&255,T=x.rgba>>24&255,R=x.rgba>>16&255,O=x.rgba>>8&255;return n=T+Math.round((E-T)*h),u=R+Math.round((k-R)*h),b=O+Math.round((L-O)*h),{css:m.toCss(n,u,b),rgba:m.toRgba(n,u,b)}},l.isOpaque=function(x){return(255&x.rgba)==255},l.ensureContrastRatio=function(x,C,E){const k=s.ensureContrastRatio(x.rgba,C.rgba,E);if(k)return m.toColor(k>>24&255,k>>16&255,k>>8&255)},l.opaque=function(x){const C=(255|x.rgba)>>>0;return[n,u,b]=s.toChannels(C),{css:m.toCss(n,u,b),rgba:C}},l.opacity=f,l.multiplyOpacity=function(x,C){return h=255&x.rgba,f(x,h*C/255)},l.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}}(w||(i.color=w={})),function(l){let f,x;try{const C=document.createElement("canvas");C.width=1,C.height=1;const E=C.getContext("2d",{willReadFrequently:!0});E&&(f=E,f.globalCompositeOperation="copy",x=f.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return n=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),b=parseInt(C.slice(3,4).repeat(2),16),m.toColor(n,u,b);case 5:return n=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),b=parseInt(C.slice(3,4).repeat(2),16),h=parseInt(C.slice(4,5).repeat(2),16),m.toColor(n,u,b,h);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const E=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return n=parseInt(E[1]),u=parseInt(E[2]),b=parseInt(E[3]),h=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),m.toColor(n,u,b,h);if(!f||!x)throw new Error("css.toColor: Unsupported css format");if(f.fillStyle=x,f.fillStyle=C,typeof f.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(f.fillRect(0,0,1,1),[n,u,b,h]=f.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(n,u,b,h),css:C}}}(S||(i.css=S={})),function(l){function f(x,C,E){const k=x/255,L=C/255,T=E/255;return .2126*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}l.relativeLuminance=function(x){return f(x>>16&255,x>>8&255,255&x)},l.relativeLuminance2=f}(v||(i.rgb=v={})),function(l){function f(C,E,k){const L=C>>24&255,T=C>>16&255,R=C>>8&255;let O=E>>24&255,A=E>>16&255,j=E>>8&255,Z=o(v.relativeLuminance2(O,A,j),v.relativeLuminance2(L,T,R));for(;Z<k&&(O>0||A>0||j>0);)O-=Math.max(0,Math.ceil(.1*O)),A-=Math.max(0,Math.ceil(.1*A)),j-=Math.max(0,Math.ceil(.1*j)),Z=o(v.relativeLuminance2(O,A,j),v.relativeLuminance2(L,T,R));return(O<<24|A<<16|j<<8|255)>>>0}function x(C,E,k){const L=C>>24&255,T=C>>16&255,R=C>>8&255;let O=E>>24&255,A=E>>16&255,j=E>>8&255,Z=o(v.relativeLuminance2(O,A,j),v.relativeLuminance2(L,T,R));for(;Z<k&&(O<255||A<255||j<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),A=Math.min(255,A+Math.ceil(.1*(255-A))),j=Math.min(255,j+Math.ceil(.1*(255-j))),Z=o(v.relativeLuminance2(O,A,j),v.relativeLuminance2(L,T,R));return(O<<24|A<<16|j<<8|255)>>>0}l.blend=function(C,E){if(h=(255&E)/255,h===1)return E;const k=E>>24&255,L=E>>16&255,T=E>>8&255,R=C>>24&255,O=C>>16&255,A=C>>8&255;return n=R+Math.round((k-R)*h),u=O+Math.round((L-O)*h),b=A+Math.round((T-A)*h),m.toRgba(n,u,b)},l.ensureContrastRatio=function(C,E,k){const L=v.relativeLuminance(C>>8),T=v.relativeLuminance(E>>8);if(o(L,T)<k){if(T<L){const A=f(C,E,k),j=o(L,v.relativeLuminance(A>>8));if(j<k){const Z=x(C,E,k);return j>o(L,v.relativeLuminance(Z>>8))?A:Z}return A}const R=x(C,E,k),O=o(L,v.relativeLuminance(R>>8));if(O<k){const A=f(C,E,k);return O>o(L,v.relativeLuminance(A>>8))?R:A}return R}},l.reduceLuminance=f,l.increaseLuminance=x,l.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(s||(i.rgba=s={})),i.toPaddedHex=c,i.contrastRatio=o},8969:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=n(844),b=n(2585),h=n(4348),m=n(7866),w=n(744),S=n(7302),v=n(6975),s=n(8460),c=n(1753),o=n(1480),l=n(7994),f=n(9282),x=n(5435),C=n(5981),E=n(2660);let k=!1;class L extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(R=>{var O;(O=this._onScrollApi)==null||O.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const O in R)this.optionsService.options[O]=R[O]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new S.OptionsService(R)),this._instantiationService.setService(b.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(b.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(b.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(b.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(b.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(b.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(l.CharsetService),this._instantiationService.setService(b.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(b.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new x.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((O,A)=>this._inputHandler.parse(O,A))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,O){this._writeBuffer.write(R,O)}writeSync(R,O){this._logService.logLevel<=b.LogLevelEnum.WARN&&!k&&(this._logService.warn("writeSync is unreliable and will be removed soon."),k=!0),this._writeBuffer.writeSync(R,O)}input(R,O=!0){this.coreService.triggerDataEvent(R,O)}resize(R,O){isNaN(R)||isNaN(O)||(R=Math.max(R,w.MINIMUM_COLS),O=Math.max(O,w.MINIMUM_ROWS),this._bufferService.resize(R,O))}scroll(R,O=!1){this._bufferService.scroll(R,O)}scrollLines(R,O,A){this._bufferService.scrollLines(R,O,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const O=R-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(R,O){return this._inputHandler.registerEscHandler(R,O)}registerDcsHandler(R,O){return this._inputHandler.registerDcsHandler(R,O)}registerCsiHandler(R,O){return this._inputHandler.registerCsiHandler(R,O)}registerOscHandler(R,O){return this._inputHandler.registerOscHandler(R,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?R=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const O of R)O.dispose()})}}}i.CoreTerminal=L},8460:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){const b=[];for(let h=0;h<this._listeners.length;h++)b.push(this._listeners[h]);for(let h=0;h<b.length;h++)b[h].call(void 0,n,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,u){return n(b=>u.fire(b))},i.runAndSubscribe=function(n,u){return u(void 0),n(b=>u(b))}},5435:function(_,i,n){var u=this&&this.__decorate||function(Y,B,P,H){var z,U=arguments.length,G=U<3?B:H===null?H=Object.getOwnPropertyDescriptor(B,P):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(Y,B,P,H);else for(var $=Y.length-1;$>=0;$--)(z=Y[$])&&(G=(U<3?z(G):U>3?z(B,P,G):z(B,P))||G);return U>3&&G&&Object.defineProperty(B,P,G),G},b=this&&this.__param||function(Y,B){return function(P,H){B(P,H,Y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=n(2584),m=n(7116),w=n(2015),S=n(844),v=n(482),s=n(8437),c=n(8460),o=n(643),l=n(511),f=n(3734),x=n(2585),C=n(1480),E=n(6242),k=n(6351),L=n(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function O(Y,B){if(Y>24)return B.setWinLines||!1;switch(Y){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}var A;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let j=0;class Z extends S.Disposable{getAttrData(){return this._curAttrData}constructor(B,P,H,z,U,G,$,ne,W=new w.EscapeSequenceParser){super(),this._bufferService=B,this._charsetService=P,this._coreService=H,this._logService=z,this._optionsService=U,this._oscLinkService=G,this._coreMouseService=$,this._unicodeService=ne,this._parser=W,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new l.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ie(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:q.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,q,I)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:q,data:I})}),this._parser.setDcsHandlerFallback((M,q,I)=>{q==="HOOK"&&(I=I.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:q,payload:I})}),this._parser.setPrintHandler((M,q,I)=>this.print(M,q,I)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new E.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new E.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new E.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new E.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new E.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new E.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new E.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new E.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new E.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new E.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new E.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((M,q)=>this.requestStatusString(M,q)))}_preserveStack(B,P,H,z){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=H,this._parseStack.position=z}_logSlowResolvingAsync(B){this._logService.logLevel<=x.LogLevelEnum.WARN&&Promise.race([B,new Promise((P,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(B,P){let H,z=this._activeBuffer.x,U=this._activeBuffer.y,G=0;const $=this._parseStack.paused;if($){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(H),H;z=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>R&&(G=this._parseStack.position+R)}if(this._logService.logLevel<=x.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?` "${B}"`:` "${Array.prototype.map.call(B,M=>String.fromCharCode(M)).join("")}"`),typeof B=="string"?B.split("").map(M=>M.charCodeAt(0)):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(B.length,R))),$||this._dirtyRowTracker.clearRange(),B.length>R)for(let M=G;M<B.length;M+=R){const q=M+R<B.length?M+R:B.length,I=typeof B=="string"?this._stringDecoder.decode(B.substring(M,q),this._parseBuffer):this._utf8Decoder.decode(B.subarray(M,q),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,I))return this._preserveStack(z,U,I,M),this._logSlowResolvingAsync(H),H}else if(!$){const M=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,M))return this._preserveStack(z,U,M,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===z&&this._activeBuffer.y===U||this._onCursorMove.fire();const ne=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),W=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);W<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(W,this._bufferService.rows-1),Math.min(ne,this._bufferService.rows-1))}print(B,P,H){let z,U;const G=this._charsetService.charset,$=this._optionsService.rawOptions.screenReaderMode,ne=this._bufferService.cols,W=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,q=this._curAttrData;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-P>0&&I.getWidth(this._activeBuffer.x-1)===2&&I.setCellFromCodepoint(this._activeBuffer.x-1,0,1,q);let X=this._parser.precedingJoinState;for(let J=P;J<H;++J){if(z=B[J],z<127&&G){const ce=G[String.fromCharCode(z)];ce&&(z=ce.charCodeAt(0))}const N=this._unicodeService.charProperties(z,X);U=C.UnicodeService.extractWidth(N);const ae=C.UnicodeService.extractShouldJoin(N),Q=ae?C.UnicodeService.extractWidth(X):0;if(X=N,$&&this._onA11yChar.fire((0,v.stringFromCodePoint)(z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+U-Q>ne){if(W){const ce=I;let he=this._activeBuffer.x-Q;for(this._activeBuffer.x=Q,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Q>0&&I instanceof s.BufferLine&&I.copyCellsFrom(ce,he,0,Q,!1);he<ne;)ce.setCellFromCodepoint(he++,0,1,q)}else if(this._activeBuffer.x=ne-1,U===2)continue}if(ae&&this._activeBuffer.x){const ce=I.getWidth(this._activeBuffer.x-1)?1:2;I.addCodepointToCell(this._activeBuffer.x-ce,z,U);for(let he=U-Q;--he>=0;)I.setCellFromCodepoint(this._activeBuffer.x++,0,0,q)}else if(M&&(I.insertCells(this._activeBuffer.x,U-Q,this._activeBuffer.getNullCell(q)),I.getWidth(ne-1)===2&&I.setCellFromCodepoint(ne-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,q)),I.setCellFromCodepoint(this._activeBuffer.x++,z,U,q),U>0)for(;--U;)I.setCellFromCodepoint(this._activeBuffer.x++,0,0,q)}this._parser.precedingJoinState=X,this._activeBuffer.x<ne&&H-P>0&&I.getWidth(this._activeBuffer.x)===0&&!I.hasContent(this._activeBuffer.x)&&I.setCellFromCodepoint(this._activeBuffer.x,0,1,q),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(B,P){return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,P):this._parser.registerCsiHandler(B,H=>!O(H.params[0],this._optionsService.rawOptions.windowOptions)||P(H))}registerDcsHandler(B,P){return this._parser.registerDcsHandler(B,new k.DcsHandler(P))}registerEscHandler(B,P){return this._parser.registerEscHandler(B,P)}registerOscHandler(B,P){return this._parser.registerOscHandler(B,new E.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var B;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&B.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(B=this._bufferService.cols-1){this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(B,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=B,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(B,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+P)}cursorUp(B){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0}cursorDown(B){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0}cursorForward(B){return this._moveCursor(B.params[0]||1,0),!0}cursorBackward(B){return this._moveCursor(-(B.params[0]||1),0),!0}cursorNextLine(B){return this.cursorDown(B),this._activeBuffer.x=0,!0}cursorPrecedingLine(B){return this.cursorUp(B),this._activeBuffer.x=0,!0}cursorCharAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0}charPosAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(B){return this._moveCursor(B.params[0]||1,0),!0}linePosAbsolute(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0}vPositionRelative(B){return this._moveCursor(0,B.params[0]||1),!0}hVPosition(B){return this.cursorPosition(B),!0}tabClear(B){const P=B.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=B.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=B.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(B){const P=B.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(B,P,H,z=!1,U=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);G.replaceCells(P,H,this._activeBuffer.getNullCell(this._eraseAttrData()),U),z&&(G.isWrapped=!1)}_resetBufferLine(B,P=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+B),H.isWrapped=!1)}eraseInDisplay(B,P=!1){let H;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);H<this._bufferService.rows;H++)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,P);this._dirtyRowTracker.markDirty(0);break;case 3:const z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0}eraseInLine(B,P=!1){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(B){this._restrictCursor();let P=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-z+1;for(;P--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(B){this._restrictCursor();let P=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let z;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;P--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(B){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(B){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(B){let P=B.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(B){let P=B.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=B.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=B.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=B.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=B.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(B){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(B){const P=this._parser.precedingJoinState;if(!P)return!0;const H=B.params[0]||1,z=C.UnicodeService.extractWidth(P),U=this._activeBuffer.x-z,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(U),$=new Uint32Array(G.length*H);let ne=0;for(let M=0;M<G.length;){const q=G.codePointAt(M)||0;$[ne++]=q,M+=q>65535?2:1}let W=ne;for(let M=1;M<H;++M)$.copyWithin(W,0,ne),W+=ne;return this.print($,0,W),!0}sendDeviceAttributesPrimary(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(B){return(this._optionsService.rawOptions.termName+"").indexOf(B)===0}setMode(B){for(let P=0;P<B.length;P++)switch(B.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(B){for(let P=0;P<B.length;P++)switch(B.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(B){for(let P=0;P<B.length;P++)switch(B.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(B){for(let P=0;P<B.length;P++)switch(B.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(B,P){const H=this._coreService.decPrivateModes,{activeProtocol:z,activeEncoding:U}=this._coreMouseService,G=this._coreService,{buffers:$,cols:ne}=this._bufferService,{active:W,alt:M}=$,q=this._optionsService.rawOptions,I=ae=>ae?1:2,X=B.params[0];return J=X,N=P?X===2?4:X===4?I(G.modes.insertMode):X===12?3:X===20?I(q.convertEol):0:X===1?I(H.applicationCursorKeys):X===3?q.windowOptions.setWinLines?ne===80?2:ne===132?1:0:0:X===6?I(H.origin):X===7?I(H.wraparound):X===8?3:X===9?I(z==="X10"):X===12?I(q.cursorBlink):X===25?I(!G.isCursorHidden):X===45?I(H.reverseWraparound):X===66?I(H.applicationKeypad):X===67?4:X===1e3?I(z==="VT200"):X===1002?I(z==="DRAG"):X===1003?I(z==="ANY"):X===1004?I(H.sendFocus):X===1005?4:X===1006?I(U==="SGR"):X===1015?4:X===1016?I(U==="SGR_PIXELS"):X===1048?1:X===47||X===1047||X===1049?I(W===M):X===2004?I(H.bracketedPasteMode):0,G.triggerDataEvent(`${h.C0.ESC}[${P?"":"?"}${J};${N}$y`),!0;var J,N}_updateAttrColor(B,P,H,z,U){return P===2?(B|=50331648,B&=-16777216,B|=f.AttributeData.fromColorRGB([H,z,U])):P===5&&(B&=-50331904,B|=33554432|255&H),B}_extractColor(B,P,H){const z=[0,0,-1,0,0,0];let U=0,G=0;do{if(z[G+U]=B.params[P+G],B.hasSubParams(P+G)){const $=B.getSubParams(P+G);let ne=0;do z[1]===5&&(U=1),z[G+ne+1+U]=$[ne];while(++ne<$.length&&ne+G+1+U<z.length);break}if(z[1]===5&&G+U>=2||z[1]===2&&G+U>=5)break;z[1]&&(U=1)}while(++G+P<B.length&&G+U<z.length);for(let $=2;$<z.length;++$)z[$]===-1&&(z[$]=0);switch(z[0]){case 38:H.fg=this._updateAttrColor(H.fg,z[1],z[3],z[4],z[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,z[1],z[3],z[4],z[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,z[1],z[3],z[4],z[5])}return G}_processUnderline(B,P){P.extended=P.extended.clone(),(!~B||B>5)&&(B=1),P.extended.underlineStyle=B,P.fg|=268435456,B===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(B){B.fg=s.DEFAULT_ATTR_DATA.fg,B.bg=s.DEFAULT_ATTR_DATA.bg,B.extended=B.extended.clone(),B.extended.underlineStyle=0,B.extended.underlineColor&=-67108864,B.updateExtended()}charAttributes(B){if(B.length===1&&B.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=B.length;let H;const z=this._curAttrData;for(let U=0;U<P;U++)H=B.params[U],H>=30&&H<=37?(z.fg&=-50331904,z.fg|=16777216|H-30):H>=40&&H<=47?(z.bg&=-50331904,z.bg|=16777216|H-40):H>=90&&H<=97?(z.fg&=-50331904,z.fg|=16777224|H-90):H>=100&&H<=107?(z.bg&=-50331904,z.bg|=16777224|H-100):H===0?this._processSGR0(z):H===1?z.fg|=134217728:H===3?z.bg|=67108864:H===4?(z.fg|=268435456,this._processUnderline(B.hasSubParams(U)?B.getSubParams(U)[0]:1,z)):H===5?z.fg|=536870912:H===7?z.fg|=67108864:H===8?z.fg|=1073741824:H===9?z.fg|=2147483648:H===2?z.bg|=134217728:H===21?this._processUnderline(2,z):H===22?(z.fg&=-134217729,z.bg&=-134217729):H===23?z.bg&=-67108865:H===24?(z.fg&=-268435457,this._processUnderline(0,z)):H===25?z.fg&=-536870913:H===27?z.fg&=-67108865:H===28?z.fg&=-1073741825:H===29?z.fg&=2147483647:H===39?(z.fg&=-67108864,z.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):H===49?(z.bg&=-67108864,z.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?U+=this._extractColor(B,U,z):H===53?z.bg|=1073741824:H===55?z.bg&=-1073741825:H===59?(z.extended=z.extended.clone(),z.extended.underlineColor=-1,z.updateExtended()):H===100?(z.fg&=-67108864,z.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,z.bg&=-67108864,z.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${P};${H}R`)}return!0}deviceStatusPrivate(B){if(B.params[0]===6){const P=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${P};${H}R`)}return!0}softReset(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(B){const P=B.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=P%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion(B){const P=B.params[0]||1;let H;return(B.length<2||(H=B.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions(B){if(!O(B.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0}setIconName(B){return this._iconName=B,!0}setOrReportIndexedColor(B){const P=[],H=B.split(";");for(;H.length>1;){const z=H.shift(),U=H.shift();if(/^\d+$/.exec(z)){const G=parseInt(z);if(te(G))if(U==="?")P.push({type:0,index:G});else{const $=(0,L.parseColor)(U);$&&P.push({type:1,index:G,color:$})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(B){const P=B.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(B,P){this._getCurrentLinkId()&&this._finishHyperlink();const H=B.split(":");let z;const U=H.findIndex(G=>G.startsWith("id="));return U!==-1&&(z=H[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:z,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(B,P){const H=B.split(";");for(let z=0;z<H.length&&!(P>=this._specialColors.length);++z,++P)if(H[z]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const U=(0,L.parseColor)(H[z]);U&&this._onColor.fire([{type:1,index:this._specialColors[P],color:U}])}return!0}setOrReportFgColor(B){return this._setOrReportSpecialColor(B,0)}setOrReportBgColor(B){return this._setOrReportSpecialColor(B,1)}setOrReportCursorColor(B){return this._setOrReportSpecialColor(B,2)}restoreIndexedColor(B){if(!B)return this._onColor.fire([{type:2}]),!0;const P=[],H=B.split(";");for(let z=0;z<H.length;++z)if(/^\d+$/.exec(H[z])){const U=parseInt(H[z]);te(U)&&P.push({type:2,index:U})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(B){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(B){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(B){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(T[B[0]],m.CHARSETS[B[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(B){return this._charsetService.setgLevel(B),!0}screenAlignmentPattern(){const B=new l.CellData;B.content=4194373,B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const H=this._activeBuffer.ybase+this._activeBuffer.y+P,z=this._activeBuffer.lines.get(H);z&&(z.fill(B),z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(B,P){const H=this._bufferService.buffer,z=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${U}${h.C0.ESC}\\`),!0))(B==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:B==='"p'?'P1$r61;1"p':B==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:B==="m"?"P1$r0m":B===" q"?`P1$r${{block:2,underline:4,bar:6}[z.cursorStyle]-(z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(B,P){this._dirtyRowTracker.markRangeDirty(B,P)}}i.InputHandler=Z;let ie=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,B){Y>B&&(j=Y,Y=B,B=j),Y<this.start&&(this.start=Y),B>this.end&&(this.end=B)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function te(Y){return 0<=Y&&Y<256}ie=u([b(0,x.IBufferService)],ie)},844:(_,i)=>{function n(u){for(const b of u)b.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const b=this._disposables.indexOf(u);b!==-1&&this._disposables.splice(b,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var b;this._isDisposed||u===this._value||((b=this._value)==null||b.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=n,i.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},1505:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(b,h,m){this._data[b]||(this._data[b]={}),this._data[b][h]=m}get(b,h){return this._data[b]?this._data[b][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(u,b,h,m,w){this._data.get(u,b)||this._data.set(u,b,new n),this._data.get(u,b).set(h,m,w)}get(u,b,h,m){var w;return(w=this._data.get(u,b))==null?void 0:w.get(h,m)}clear(){this._data.clear()}}},6114:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const n=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const b=n.match(/Version\/(\d+)/);return b===null||b.length<2?0:parseInt(b[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(n=this._search(this._getKey(u)),this._array.splice(n,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const b=this._getKey(u);if(b===void 0||(n=this._search(b),n===-1)||this._getKey(this._array[n])!==b)return!1;do if(this._array[n]===u)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===b);return!1}*getKeyIterator(u){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===u)}forEachByKey(u,b){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do b(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===u)}values(){return[...this._array].values()}_search(u){let b=0,h=this._array.length-1;for(;h>=b;){let m=b+h>>1;const w=this._getKey(this._array[m]);if(w>u)h=m-1;else{if(!(w<u)){for(;m>0&&this._getKey(this._array[m-1])===u;)m--;return m}b=m+1}}return b}}},7226:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=n(6114);class b{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,v=0,s=w.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),v=Math.max(S,v),c=w.timeRemaining(),1.5*v>c)return s-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-S))}ms`),void this._start();s=c}this.clear()}}class h extends b{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends b{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=n(643);i.updateWindowsModeWrappedState=function(b){const h=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),m=h==null?void 0:h.get(b.cols-1),w=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);w&&m&&(w.isWrapped=m[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&m[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new n;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=n;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,m=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=m}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=n(6349),b=n(7226),h=n(3734),m=n(8437),w=n(4634),S=n(511),v=n(643),s=n(4863),c=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(o,l,f){this._hasScrollback=o,this._optionsService=l,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new b.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,l){return new m.BufferLine(this._bufferService.cols,this.getNullCell(o),l)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const l=o+this._optionsService.rawOptions.scrollback;return l>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:l}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=m.DEFAULT_ATTR_DATA);let l=this._rows;for(;l--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,l){const f=this.getNullCell(m.DEFAULT_ATTR_DATA);let x=0;const C=this._getCorrectBufferLength(l);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<o)for(let k=0;k<this.lines.length;k++)x+=+this.lines.get(k).resize(o,f);let E=0;if(this._rows<l)for(let k=this._rows;k<l;k++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(o,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(o,f)));else for(let k=this._rows;k>l;k--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const k=this.lines.length-C;k>0&&(this.lines.trimStart(k),this.ybase=Math.max(this.ybase-k,0),this.ydisp=Math.max(this.ydisp-k,0),this.savedY=Math.max(this.savedY-k,0)),this.lines.maxLength=C}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,l-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(o,l),this._cols>o))for(let E=0;E<this.lines.length;E++)x+=+this.lines.get(E).resize(o,f);this._cols=o,this._rows=l,this._memoryCleanupQueue.clear(),x>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let l=0;for(;this._memoryCleanupPosition<this.lines.length;)if(l+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),l>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,l){this._cols!==o&&(o>this._cols?this._reflowLarger(o,l):this._reflowSmaller(o,l))}_reflowLarger(o,l){const f=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(f.length>0){const x=(0,w.reflowLargerCreateNewLayout)(this.lines,f);(0,w.reflowLargerApplyNewLayout)(this.lines,x.layout),this._reflowLargerAdjustViewport(o,l,x.countRemoved)}}_reflowLargerAdjustViewport(o,l,f){const x=this.getNullCell(m.DEFAULT_ATTR_DATA);let C=f;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new m.BufferLine(o,x))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(o,l){const f=this.getNullCell(m.DEFAULT_ATTR_DATA),x=[];let C=0;for(let E=this.lines.length-1;E>=0;E--){let k=this.lines.get(E);if(!k||!k.isWrapped&&k.getTrimmedLength()<=o)continue;const L=[k];for(;k.isWrapped&&E>0;)k=this.lines.get(--E),L.unshift(k);const T=this.ybase+this.y;if(T>=E&&T<E+L.length)continue;const R=L[L.length-1].getTrimmedLength(),O=(0,w.reflowSmallerGetNewLineLengths)(L,this._cols,o),A=O.length-L.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const Z=[];for(let H=0;H<A;H++){const z=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);Z.push(z)}Z.length>0&&(x.push({start:E+L.length+C,newLines:Z}),C+=Z.length),L.push(...Z);let ie=O.length-1,te=O[ie];te===0&&(ie--,te=O[ie]);let Y=L.length-A-1,B=R;for(;Y>=0;){const H=Math.min(B,te);if(L[ie]===void 0)break;if(L[ie].copyCellsFrom(L[Y],B-H,te-H,H,!0),te-=H,te===0&&(ie--,te=O[ie]),B-=H,B===0){Y--;const z=Math.max(Y,0);B=(0,w.getWrappedLineTrimmedLength)(L,z,this._cols)}}for(let H=0;H<L.length;H++)O[H]<o&&L[H].setCell(O[H],f);let P=A-j;for(;P-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+l-1)}if(x.length>0){const E=[],k=[];for(let ie=0;ie<this.lines.length;ie++)k.push(this.lines.get(ie));const L=this.lines.length;let T=L-1,R=0,O=x[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let ie=Math.min(this.lines.maxLength-1,L+C-1);ie>=0;ie--)if(O&&O.start>T+A){for(let te=O.newLines.length-1;te>=0;te--)this.lines.set(ie--,O.newLines[te]);ie++,E.push({index:T+1,amount:O.newLines.length}),A+=O.newLines.length,O=x[++R]}else this.lines.set(ie,k[T--]);let j=0;for(let ie=E.length-1;ie>=0;ie--)E[ie].index+=j,this.lines.onInsertEmitter.fire(E[ie]),j+=E[ie].amount;const Z=Math.max(0,L+C-this.lines.maxLength);Z>0&&this.lines.onTrimEmitter.fire(Z)}}translateBufferLineToString(o,l,f=0,x){const C=this.lines.get(o);return C?C.translateToString(l,f,x):""}getWrappedRangeForLine(o){let l=o,f=o;for(;l>0&&this.lines.get(l).isWrapped;)l--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:l,last:f}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].line===o&&(this.markers[l].dispose(),this.markers.splice(l--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const l=new s.Marker(o);return this.markers.push(l),l.register(this.lines.onTrim(f=>{l.line-=f,l.line<0&&l.dispose()})),l.register(this.lines.onInsert(f=>{l.line>=f.index&&(l.line+=f.amount)})),l.register(this.lines.onDelete(f=>{l.line>=f.index&&l.line<f.index+f.amount&&l.dispose(),l.line>f.index&&(l.line-=f.amount)})),l.register(l.onDispose(()=>this._removeMarker(l))),l}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=n(3734),b=n(511),h=n(643),m=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let w=0;class S{constructor(s,c,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const l=c||b.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let f=0;f<s;++f)this.setCell(f,l);this.length=s}get(s){const c=this._data[3*s+0],o=2097151&c;return[this._data[3*s+1],2097152&c?this._combined[s]:o?(0,m.stringFromCodePoint)(o):"",c>>22,2097152&c?this._combined[s].charCodeAt(this._combined[s].length-1):o]}set(s,c){this._data[3*s+1]=c[h.CHAR_DATA_ATTR_INDEX],c[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=c[1],this._data[3*s+0]=2097152|s|c[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=c[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const c=this._data[3*s+0];return 2097152&c?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&c}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const c=this._data[3*s+0];return 2097152&c?this._combined[s]:2097151&c?(0,m.stringFromCodePoint)(2097151&c):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,c){return w=3*s,c.content=this._data[w+0],c.fg=this._data[w+1],c.bg=this._data[w+2],2097152&c.content&&(c.combinedData=this._combined[s]),268435456&c.bg&&(c.extended=this._extendedAttrs[s]),c}setCell(s,c){2097152&c.content&&(this._combined[s]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[s]=c.extended),this._data[3*s+0]=c.content,this._data[3*s+1]=c.fg,this._data[3*s+2]=c.bg}setCellFromCodepoint(s,c,o,l){268435456&l.bg&&(this._extendedAttrs[s]=l.extended),this._data[3*s+0]=c|o<<22,this._data[3*s+1]=l.fg,this._data[3*s+2]=l.bg}addCodepointToCell(s,c,o){let l=this._data[3*s+0];2097152&l?this._combined[s]+=(0,m.stringFromCodePoint)(c):2097151&l?(this._combined[s]=(0,m.stringFromCodePoint)(2097151&l)+(0,m.stringFromCodePoint)(c),l&=-2097152,l|=2097152):l=c|4194304,o&&(l&=-12582913,l|=o<<22),this._data[3*s+0]=l}insertCells(s,c,o){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,o),c<this.length-s){const l=new b.CellData;for(let f=this.length-s-c-1;f>=0;--f)this.setCell(s+c+f,this.loadCell(s+f,l));for(let f=0;f<c;++f)this.setCell(s+f,o)}else for(let l=s;l<this.length;++l)this.setCell(l,o);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,o)}deleteCells(s,c,o){if(s%=this.length,c<this.length-s){const l=new b.CellData;for(let f=0;f<this.length-s-c;++f)this.setCell(s+f,this.loadCell(s+c+f,l));for(let f=this.length-c;f<this.length;++f)this.setCell(f,o)}else for(let l=s;l<this.length;++l)this.setCell(l,o);s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,o),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodepoint(s,0,1,o)}replaceCells(s,c,o,l=!1){if(l)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodepoint(s-1,0,1,o),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodepoint(c,0,1,o);s<c&&s<this.length;)this.isProtected(s)||this.setCell(s,o),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,o),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c,0,1,o);s<c&&s<this.length;)this.setCell(s++,o)}resize(s,c){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const l=new Uint32Array(o);l.set(this._data),this._data=l}for(let l=this.length;l<s;++l)this.setCell(l,c)}else{this._data=this._data.subarray(0,o);const l=Object.keys(this._combined);for(let x=0;x<l.length;x++){const C=parseInt(l[x],10);C>=s&&delete this._combined[C]}const f=Object.keys(this._extendedAttrs);for(let x=0;x<f.length;x++){const C=parseInt(f[x],10);C>=s&&delete this._extendedAttrs[C]}}return this.length=s,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,c=!1){if(c)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,s);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const c in s._combined)this._combined[c]=s._combined[c];this._extendedAttrs={};for(const c in s._extendedAttrs)this._extendedAttrs[c]=s._extendedAttrs[c];this.isWrapped=s.isWrapped}clone(){const s=new S(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const c in this._combined)s._combined[c]=this._combined[c];for(const c in this._extendedAttrs)s._extendedAttrs[c]=this._extendedAttrs[c];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,c,o,l,f){const x=s._data;if(f)for(let E=l-1;E>=0;E--){for(let k=0;k<3;k++)this._data[3*(o+E)+k]=x[3*(c+E)+k];268435456&x[3*(c+E)+2]&&(this._extendedAttrs[o+E]=s._extendedAttrs[c+E])}else for(let E=0;E<l;E++){for(let k=0;k<3;k++)this._data[3*(o+E)+k]=x[3*(c+E)+k];268435456&x[3*(c+E)+2]&&(this._extendedAttrs[o+E]=s._extendedAttrs[c+E])}const C=Object.keys(s._combined);for(let E=0;E<C.length;E++){const k=parseInt(C[E],10);k>=c&&(this._combined[k-c+o]=s._combined[k])}}translateToString(s,c,o,l){c=c??0,o=o??this.length,s&&(o=Math.min(o,this.getTrimmedLength())),l&&(l.length=0);let f="";for(;c<o;){const x=this._data[3*c+0],C=2097151&x,E=2097152&x?this._combined[c]:C?(0,m.stringFromCodePoint)(C):h.WHITESPACE_CELL_CHAR;if(f+=E,l)for(let k=0;k<E.length;++k)l.push(c);c+=x>>22||1}return l&&l.push(c),f}}i.BufferLine=S},4841:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,u){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return u*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(_,i)=>{function n(u,b,h){if(b===u.length-1)return u[b].getTrimmedLength();const m=!u[b].hasContent(h-1)&&u[b].getWidth(h-1)===1,w=u[b+1].getWidth(0)===2;return m&&w?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,b,h,m,w){const S=[];for(let v=0;v<u.length-1;v++){let s=v,c=u.get(++s);if(!c.isWrapped)continue;const o=[u.get(v)];for(;s<u.length&&c.isWrapped;)o.push(c),c=u.get(++s);if(m>=v&&m<s){v+=o.length-1;continue}let l=0,f=n(o,l,b),x=1,C=0;for(;x<o.length;){const k=n(o,x,b),L=k-C,T=h-f,R=Math.min(L,T);o[l].copyCellsFrom(o[x],C,f,R,!1),f+=R,f===h&&(l++,f=0),C+=R,C===k&&(x++,C=0),f===0&&l!==0&&o[l-1].getWidth(h-1)===2&&(o[l].copyCellsFrom(o[l-1],h-1,f++,1,!1),o[l-1].setCell(h-1,w))}o[l].replaceCells(f,h,w);let E=0;for(let k=o.length-1;k>0&&(k>l||o[k].getTrimmedLength()===0);k--)E++;E>0&&(S.push(v+o.length-E),S.push(E)),v+=o.length-1}return S},i.reflowLargerCreateNewLayout=function(u,b){const h=[];let m=0,w=b[m],S=0;for(let v=0;v<u.length;v++)if(w===v){const s=b[++m];u.onDeleteEmitter.fire({index:v-S,amount:s}),v+=s-1,S+=s,w=b[++m]}else h.push(v);return{layout:h,countRemoved:S}},i.reflowLargerApplyNewLayout=function(u,b){const h=[];for(let m=0;m<b.length;m++)h.push(u.get(b[m]));for(let m=0;m<h.length;m++)u.set(m,h[m]);u.length=b.length},i.reflowSmallerGetNewLineLengths=function(u,b,h){const m=[],w=u.map((c,o)=>n(u,o,b)).reduce((c,o)=>c+o);let S=0,v=0,s=0;for(;s<w;){if(w-s<h){m.push(w-s);break}S+=h;const c=n(u,v,b);S>c&&(S-=c,v++);const o=u[v].getWidth(S-1)===2;o&&S--;const l=o?h-1:h;m.push(l),s+=l}return m},i.getWrappedLineTrimmedLength=n},5295:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=n(8460),b=n(844),h=n(9092);class m extends b.Disposable{constructor(S,v){super(),this._optionsService=S,this._bufferService=v,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,v){this._normal.resize(S,v),this._alt.resize(S,v),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}i.BufferSet=m},511:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=n(482),b=n(643),h=n(3734);class m extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const v=new m;return v.setFromCharData(S),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[b.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(S[b.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(S[b.CHAR_DATA_CHAR_INDEX].length===2){const s=S[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const c=S[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(s-55296)+c-56320+65536|S[b.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=S[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[b.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=S[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[b.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=m},643:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=n(8460),b=n(844);class h{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,b.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}i.Marker=h,h._nextId=1},7116:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(_,i)=>{var n,u,b;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(n||(i.C0=n={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(u||(i.C1=u={})),function(h){h.ST=`${n.ESC}\\`}(b||(i.C1_ESCAPED=b={}))},7399:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=n(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,m,w,S){const v={type:0,cancel:!1,key:void 0},s=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?v.key=m?u.C0.ESC+"OA":u.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?v.key=m?u.C0.ESC+"OD":u.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?v.key=m?u.C0.ESC+"OC":u.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(v.key=m?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:v.key=h.ctrlKey?"\b":u.C0.DEL,h.altKey&&(v.key=u.C0.ESC+v.key);break;case 9:if(h.shiftKey){v.key=u.C0.ESC+"[Z";break}v.key=u.C0.HT,v.cancel=!0;break;case 13:v.key=h.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,v.cancel=!0;break;case 27:v.key=u.C0.ESC,h.altKey&&(v.key=u.C0.ESC+u.C0.ESC),v.cancel=!0;break;case 37:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"D",v.key===u.C0.ESC+"[1;3D"&&(v.key=u.C0.ESC+(w?"b":"[1;5D"))):v.key=m?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"C",v.key===u.C0.ESC+"[1;3C"&&(v.key=u.C0.ESC+(w?"f":"[1;5C"))):v.key=m?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"A",w||v.key!==u.C0.ESC+"[1;3A"||(v.key=u.C0.ESC+"[1;5A")):v.key=m?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"B",w||v.key!==u.C0.ESC+"[1;3B"||(v.key=u.C0.ESC+"[1;5B")):v.key=m?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(v.key=u.C0.ESC+"[2~");break;case 46:v.key=s?u.C0.ESC+"[3;"+(s+1)+"~":u.C0.ESC+"[3~";break;case 36:v.key=s?u.C0.ESC+"[1;"+(s+1)+"H":m?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:v.key=s?u.C0.ESC+"[1;"+(s+1)+"F":m?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:h.shiftKey?v.type=2:h.ctrlKey?v.key=u.C0.ESC+"[5;"+(s+1)+"~":v.key=u.C0.ESC+"[5~";break;case 34:h.shiftKey?v.type=3:h.ctrlKey?v.key=u.C0.ESC+"[6;"+(s+1)+"~":v.key=u.C0.ESC+"[6~";break;case 112:v.key=s?u.C0.ESC+"[1;"+(s+1)+"P":u.C0.ESC+"OP";break;case 113:v.key=s?u.C0.ESC+"[1;"+(s+1)+"Q":u.C0.ESC+"OQ";break;case 114:v.key=s?u.C0.ESC+"[1;"+(s+1)+"R":u.C0.ESC+"OR";break;case 115:v.key=s?u.C0.ESC+"[1;"+(s+1)+"S":u.C0.ESC+"OS";break;case 116:v.key=s?u.C0.ESC+"[15;"+(s+1)+"~":u.C0.ESC+"[15~";break;case 117:v.key=s?u.C0.ESC+"[17;"+(s+1)+"~":u.C0.ESC+"[17~";break;case 118:v.key=s?u.C0.ESC+"[18;"+(s+1)+"~":u.C0.ESC+"[18~";break;case 119:v.key=s?u.C0.ESC+"[19;"+(s+1)+"~":u.C0.ESC+"[19~";break;case 120:v.key=s?u.C0.ESC+"[20;"+(s+1)+"~":u.C0.ESC+"[20~";break;case 121:v.key=s?u.C0.ESC+"[21;"+(s+1)+"~":u.C0.ESC+"[21~";break;case 122:v.key=s?u.C0.ESC+"[23;"+(s+1)+"~":u.C0.ESC+"[23~";break;case 123:v.key=s?u.C0.ESC+"[24;"+(s+1)+"~":u.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(w&&!S||!h.altKey||h.metaKey)!w||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?v.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(v.key=u.C0.US),h.key==="@"&&(v.key=u.C0.NUL)):h.keyCode===65&&(v.type=1);else{const c=b[h.keyCode],o=c==null?void 0:c[h.shiftKey?1:0];if(o)v.key=u.C0.ESC+o;else if(h.keyCode>=65&&h.keyCode<=90){const l=h.ctrlKey?h.keyCode-64:h.keyCode+32;let f=String.fromCharCode(l);h.shiftKey&&(f=f.toUpperCase()),v.key=u.C0.ESC+f}else if(h.keyCode===32)v.key=u.C0.ESC+(h.ctrlKey?u.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let l=h.code.slice(3,4);h.shiftKey||(l=l.toLowerCase()),v.key=u.C0.ESC+l,v.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?v.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?v.key=u.C0.NUL:h.keyCode>=51&&h.keyCode<=55?v.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?v.key=u.C0.DEL:h.keyCode===219?v.key=u.C0.ESC:h.keyCode===220?v.key=u.C0.FS:h.keyCode===221&&(v.key=u.C0.GS)}return v}},482:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,u=0,b=n.length){let h="";for(let m=u;m<b;++m){let w=n[m];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){const b=n.length;if(!b)return 0;let h=0,m=0;if(this._interim){const w=n.charCodeAt(m++);56320<=w&&w<=57343?u[h++]=1024*(this._interim-55296)+w-56320+65536:(u[h++]=this._interim,u[h++]=w),this._interim=0}for(let w=m;w<b;++w){const S=n.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=b)return this._interim=S,h;const v=n.charCodeAt(w);56320<=v&&v<=57343?u[h++]=1024*(S-55296)+v-56320+65536:(u[h++]=S,u[h++]=v)}else S!==65279&&(u[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){const b=n.length;if(!b)return 0;let h,m,w,S,v=0,s=0,c=0;if(this.interim[0]){let f=!1,x=this.interim[0];x&=(224&x)==192?31:(240&x)==224?15:7;let C,E=0;for(;(C=63&this.interim[++E])&&E<4;)x<<=6,x|=C;const k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=k-E;for(;c<L;){if(c>=b)return 0;if(C=n[c++],(192&C)!=128){c--,f=!0;break}this.interim[E++]=C,x<<=6,x|=63&C}f||(k===2?x<128?c--:u[v++]=x:k===3?x<2048||x>=55296&&x<=57343||x===65279||(u[v++]=x):x<65536||x>1114111||(u[v++]=x)),this.interim.fill(0)}const o=b-4;let l=c;for(;l<b;){for(;!(!(l<o)||128&(h=n[l])||128&(m=n[l+1])||128&(w=n[l+2])||128&(S=n[l+3]));)u[v++]=h,u[v++]=m,u[v++]=w,u[v++]=S,l+=4;if(h=n[l++],h<128)u[v++]=h;else if((224&h)==192){if(l>=b)return this.interim[0]=h,v;if(m=n[l++],(192&m)!=128){l--;continue}if(s=(31&h)<<6|63&m,s<128){l--;continue}u[v++]=s}else if((240&h)==224){if(l>=b)return this.interim[0]=h,v;if(m=n[l++],(192&m)!=128){l--;continue}if(l>=b)return this.interim[0]=h,this.interim[1]=m,v;if(w=n[l++],(192&w)!=128){l--;continue}if(s=(15&h)<<12|(63&m)<<6|63&w,s<2048||s>=55296&&s<=57343||s===65279)continue;u[v++]=s}else if((248&h)==240){if(l>=b)return this.interim[0]=h,v;if(m=n[l++],(192&m)!=128){l--;continue}if(l>=b)return this.interim[0]=h,this.interim[1]=m,v;if(w=n[l++],(192&w)!=128){l--;continue}if(l>=b)return this.interim[0]=h,this.interim[1]=m,this.interim[2]=w,v;if(S=n[l++],(192&S)!=128){l--;continue}if(s=(7&h)<<18|(63&m)<<12|(63&w)<<6|63&S,s<65536||s>1114111)continue;u[v++]=s}}return v}}},225:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const u=n(1480),b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;i.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let w=0;w<b.length;++w)m.fill(0,b[w][0],b[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?m[w]:function(S,v){let s,c=0,o=v.length-1;if(S<v[0][0]||S>v[o][1])return!1;for(;o>=c;)if(s=c+o>>1,S>v[s][1])c=s+1;else{if(!(S<v[s][0]))return!0;o=s-1}return!1}(w,h)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,S){let v=this.wcwidth(w),s=v===0&&S!==0;if(s){const c=u.UnicodeService.extractWidth(S);c===0?s=!1:c>v&&(v=c)}return u.UnicodeService.createPropertyValue(0,v,s)}}},5981:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=n(8460),b=n(844);class h extends b.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S)}_innerWrite(w=0,S=!0){const v=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],c=this._action(s,S);if(c){const l=f=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,f)):this._innerWrite(v,f);return void c.catch(f=>(queueMicrotask(()=>{throw f}),Promise.resolve(!1))).then(l)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function b(h,m){const w=h.toString(16),S=w.length<2?"0"+w:w;switch(m){case 4:return w[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}i.parseColor=function(h){if(!h)return;let m=h.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const w=n.exec(m);if(w){const S=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/S*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/S*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/S*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),u.exec(m)&&[3,6,9,12].includes(m.length))){const w=m.length/3,S=[0,0,0];for(let v=0;v<3;++v){const s=parseInt(m.slice(w*v,w*v+w),16);S[v]=w===1?s<<4:w===2?s:w===3?s>>4:s>>8}return S}},i.toRgbString=function(h,m=16){const[w,S,v]=h;return`rgb:${b(w,m)}/${b(S,m)}/${b(v,m)}`}},5770:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=n(482),b=n(8742),h=n(5770),m=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(S,v){this._handlers[S]===void 0&&(this._handlers[S]=[]);const s=this._handlers[S];return s.push(v),{dispose:()=>{const c=s.indexOf(v);c!==-1&&s.splice(c,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(S,v){if(this.reset(),this._ident=S,this._active=this._handlers[S]||m,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(S,v,s){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(S,v,s);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(S,v,s))}unhook(S,v=!0){if(this._active.length){let s=!1,c=this._active.length-1,o=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,s=v,o=this._stack.fallThrough,this._stack.paused=!1),!o&&s===!1){for(;c>=0&&(s=this._active[c].unhook(S),s!==!0);c--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,s;c--}for(;c>=0;c--)if(s=this._active[c].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",S);this._active=m,this._ident=0}};const w=new b.Params;w.addParam(0),i.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=w,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():w,this._data="",this._hitLimit=!1}put(S,v,s){this._hitLimit||(this._data+=(0,u.utf32ToString)(S,v,s),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let v=!1;if(this._hitLimit)v=!1;else if(S&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(s=>(this._params=w,this._data="",this._hitLimit=!1,s));return this._params=w,this._data="",this._hitLimit=!1,v}}},2015:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=n(844),b=n(8742),h=n(6242),m=n(6351);class w{constructor(c){this.table=new Uint8Array(c)}setDefault(c,o){this.table.fill(c<<4|o)}add(c,o,l,f){this.table[o<<8|c]=l<<4|f}addMany(c,o,l,f){for(let x=0;x<c.length;x++)this.table[o<<8|c[x]]=l<<4|f}}i.TransitionTable=w;const S=160;i.VT500_TRANSITION_TABLE=function(){const s=new w(4095),c=Array.apply(null,Array(256)).map((E,k)=>k),o=(E,k)=>c.slice(E,k),l=o(32,127),f=o(0,24);f.push(25),f.push.apply(f,o(28,32));const x=o(0,14);let C;for(C in s.setDefault(1,0),s.addMany(l,0,2,0),x)s.addMany([24,26,153,154],C,3,0),s.addMany(o(128,144),C,3,0),s.addMany(o(144,152),C,3,0),s.add(156,C,0,0),s.add(27,C,11,1),s.add(157,C,4,8),s.addMany([152,158,159],C,0,7),s.add(155,C,11,3),s.add(144,C,11,9);return s.addMany(f,0,3,0),s.addMany(f,1,3,1),s.add(127,1,0,1),s.addMany(f,8,0,8),s.addMany(f,3,3,3),s.add(127,3,0,3),s.addMany(f,4,3,4),s.add(127,4,0,4),s.addMany(f,6,3,6),s.addMany(f,5,3,5),s.add(127,5,0,5),s.addMany(f,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(l,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(o(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(l,7,0,7),s.addMany(f,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(o(64,127),3,7,0),s.addMany(o(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(o(48,60),4,8,4),s.addMany(o(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(o(32,64),6,0,6),s.add(127,6,0,6),s.addMany(o(64,127),6,0,0),s.addMany(o(32,48),3,9,5),s.addMany(o(32,48),5,9,5),s.addMany(o(48,64),5,0,6),s.addMany(o(64,127),5,7,0),s.addMany(o(32,48),4,9,5),s.addMany(o(32,48),1,9,2),s.addMany(o(32,48),2,9,2),s.addMany(o(48,127),2,10,0),s.addMany(o(48,80),1,10,0),s.addMany(o(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(o(96,127),1,10,0),s.add(80,1,11,9),s.addMany(f,9,0,9),s.add(127,9,0,9),s.addMany(o(28,32),9,0,9),s.addMany(o(32,48),9,9,12),s.addMany(o(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(f,11,0,11),s.addMany(o(32,128),11,0,11),s.addMany(o(28,32),11,0,11),s.addMany(f,10,0,10),s.add(127,10,0,10),s.addMany(o(28,32),10,0,10),s.addMany(o(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(o(32,48),10,9,12),s.addMany(f,12,0,12),s.add(127,12,0,12),s.addMany(o(28,32),12,0,12),s.addMany(o(32,48),12,9,12),s.addMany(o(48,64),12,0,11),s.addMany(o(64,127),12,12,13),s.addMany(o(64,127),10,12,13),s.addMany(o(64,127),9,12,13),s.addMany(f,13,13,13),s.addMany(l,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(S,0,2,0),s.add(S,8,5,8),s.add(S,6,0,6),s.add(S,11,0,11),s.add(S,13,13,13),s}();class v extends u.Disposable{constructor(c=i.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new b.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(o,l,f)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,l)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,o=[64,126]){let l=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(l=c.prefix.charCodeAt(0),l&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let x=0;x<c.intermediates.length;++x){const C=c.intermediates.charCodeAt(x);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=C}}if(c.final.length!==1)throw new Error("final must be a single byte");const f=c.final.charCodeAt(0);if(o[0]>f||f>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return l<<=8,l|=f,l}identToString(c){const o=[];for(;c;)o.push(String.fromCharCode(255&c)),c>>=8;return o.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,o){const l=this._identifier(c,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);const f=this._escHandlers[l];return f.push(o),{dispose:()=>{const x=f.indexOf(o);x!==-1&&f.splice(x,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,o){this._executeHandlers[c.charCodeAt(0)]=o}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,o){const l=this._identifier(c);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);const f=this._csiHandlers[l];return f.push(o),{dispose:()=>{const x=f.indexOf(o);x!==-1&&f.splice(x,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,o){return this._dcsParser.registerHandler(this._identifier(c),o)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,o){return this._oscParser.registerHandler(c,o)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,o,l,f,x){this._parseStack.state=c,this._parseStack.handlers=o,this._parseStack.handlerPos=l,this._parseStack.transition=f,this._parseStack.chunkPos=x}parse(c,o,l){let f,x=0,C=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const k=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&L>-1){for(;L>=0&&(f=k[L](this._params),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 4:if(l===!1&&L>-1){for(;L>=0&&(f=k[L](),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 6:if(x=c[this._parseStack.chunkPos],f=this._dcsParser.unhook(x!==24&&x!==26,l),f)return f;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(x=c[this._parseStack.chunkPos],f=this._oscParser.end(x!==24&&x!==26,l),f)return f;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let k=E;k<o;++k){switch(x=c[k],C=this._transitions.table[this.currentState<<8|(x<160?x:S)],C>>4){case 2:for(let A=k+1;;++A){if(A>=o||(x=c[A])<32||x>126&&x<S){this._printHandler(c,k,A),k=A-1;break}if(++A>=o||(x=c[A])<32||x>126&&x<S){this._printHandler(c,k,A),k=A-1;break}if(++A>=o||(x=c[A])<32||x>126&&x<S){this._printHandler(c,k,A),k=A-1;break}if(++A>=o||(x=c[A])<32||x>126&&x<S){this._printHandler(c,k,A),k=A-1;break}}break;case 3:this._executeHandlers[x]?this._executeHandlers[x]():this._executeHandlerFb(x),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:x,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|x];let T=L?L.length-1:-1;for(;T>=0&&(f=L[T](this._params),f!==!0);T--)if(f instanceof Promise)return this._preserveStack(3,L,T,C,k),f;T<0&&this._csiHandlerFb(this._collect<<8|x,this._params),this.precedingJoinState=0;break;case 8:do switch(x){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(x-48)}while(++k<o&&(x=c[k])>47&&x<60);k--;break;case 9:this._collect<<=8,this._collect|=x;break;case 10:const R=this._escHandlers[this._collect<<8|x];let O=R?R.length-1:-1;for(;O>=0&&(f=R[O](),f!==!0);O--)if(f instanceof Promise)return this._preserveStack(4,R,O,C,k),f;O<0&&this._escHandlerFb(this._collect<<8|x),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|x,this._params);break;case 13:for(let A=k+1;;++A)if(A>=o||(x=c[A])===24||x===26||x===27||x>127&&x<S){this._dcsParser.put(c,k,A),k=A-1;break}break;case 14:if(f=this._dcsParser.unhook(x!==24&&x!==26),f)return this._preserveStack(6,[],0,C,k),f;x===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=k+1;;A++)if(A>=o||(x=c[A])<32||x>127&&x<S){this._oscParser.put(c,k,A),k=A-1;break}break;case 6:if(f=this._oscParser.end(x!==24&&x!==26),f)return this._preserveStack(5,[],0,C,k),f;x===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}i.EscapeSequenceParser=v},6242:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=n(5770),b=n(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,w){this._handlers[m]===void 0&&(this._handlers[m]=[]);const S=this._handlers[m];return S.push(w),{dispose:()=>{const v=S.indexOf(w);v!==-1&&S.splice(v,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,w,S){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(m,w,S);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(m,w,S))}start(){this.reset(),this._state=1}put(m,w,S){if(this._state!==3){if(this._state===1)for(;w<S;){const v=m[w++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&S-w>0&&this._put(m,w,S)}}end(m,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,v=this._active.length-1,s=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,S=w,s=this._stack.fallThrough,this._stack.paused=!1),!s&&S===!1){for(;v>=0&&(S=this._active[v].end(m),S!==!0);v--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,S;v--}for(;v>=0;v--)if(S=this._active[v].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",m);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,w,S){this._hitLimit||(this._data+=(0,b.utf32ToString)(m,w,S),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let w=!1;if(this._hitLimit)w=!1;else if(m&&(w=this._handler(this._data),w instanceof Promise))return w.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,w}}},8742:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class u{static fromArray(h){const m=new u;if(!h.length)return m;for(let w=Array.isArray(h[0])?1:0;w<h.length;++w){const S=h[w];if(Array.isArray(S))for(let v=0;v<S.length;++v)m.addSubParam(S[v]);else m.addParam(S)}return m}constructor(h=32,m=32){if(this.maxLength=h,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new u(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let m=0;m<this.length;++m){h.push(this.params[m]);const w=this._subParamsIdx[m]>>8,S=255&this._subParamsIdx[m];S-w>0&&h.push(Array.prototype.slice.call(this._subParams,w,S))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>n?n:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>n?n:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const m=this._subParamsIdx[h]>>8,w=255&this._subParamsIdx[h];return w-m>0?this._subParams.subarray(m,w):null}getSubParamsAll(){const h={};for(let m=0;m<this.length;++m){const w=this._subParamsIdx[m]>>8,S=255&this._subParamsIdx[m];S-w>0&&(h[m]=this._subParams.slice(w,S))}return h}addDigit(h){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,S=w[m-1];w[m-1]=~S?Math.min(10*S+h,n):h}}i.Params=u},5741:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,u){const b={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(b),u.dispose=()=>this._wrappedAddonDispose(b),u.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let u=-1;for(let b=0;b<this._addons.length;b++)if(this._addons[b]===n){u=b;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(u,1)}}},8771:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=n(3785),b=n(511);i.BufferApiView=class{constructor(h,m){this._buffer=h,this.type=m}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const m=this._buffer.lines.get(h);if(m)return new u.BufferLineApiView(m)}getNullCell(){return new b.CellData}}},3785:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=n(511);i.BufferLineApiView=class{constructor(b){this._line=b}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(b,h){if(!(b<0||b>=this._line.length))return h?(this._line.loadCell(b,h),h):this._line.loadCell(b,new u.CellData)}translateToString(b,h,m){return this._line.translateToString(b,h,m)}}},8285:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=n(8771),b=n(8460),h=n(844);class m extends h.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new b.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=m},7975:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,u){return this._core.registerCsiHandler(n,b=>u(b.toArray()))}addCsiHandler(n,u){return this.registerCsiHandler(n,u)}registerDcsHandler(n,u){return this._core.registerDcsHandler(n,(b,h)=>u(b,h.toArray()))}addDcsHandler(n,u){return this.registerDcsHandler(n,u)}registerEscHandler(n,u){return this._core.registerEscHandler(n,u)}addEscHandler(n,u){return this.registerEscHandler(n,u)}registerOscHandler(n,u){return this._core.registerOscHandler(n,u)}addOscHandler(n,u){return this.registerOscHandler(n,u)}}},7090:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(_,i,n){var u=this&&this.__decorate||function(s,c,o,l){var f,x=arguments.length,C=x<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,c,o,l);else for(var E=s.length-1;E>=0;E--)(f=s[E])&&(C=(x<3?f(C):x>3?f(c,o,C):f(c,o))||C);return x>3&&C&&Object.defineProperty(c,o,C),C},b=this&&this.__param||function(s,c){return function(o,l){c(o,l,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=n(8460),m=n(844),w=n(5295),S=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(s,this))}resize(s,c){this.cols=s,this.rows=c,this.buffers.resize(s,c),this._onResize.fire({cols:s,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,c=!1){const o=this.buffer;let l;l=this._cachedBlankLine,l&&l.length===this.cols&&l.getFg(0)===s.fg&&l.getBg(0)===s.bg||(l=o.getBlankLine(s,c),this._cachedBlankLine=l),l.isWrapped=c;const f=o.ybase+o.scrollTop,x=o.ybase+o.scrollBottom;if(o.scrollTop===0){const C=o.lines.isFull;x===o.lines.length-1?C?o.lines.recycle().copyFrom(l):o.lines.push(l.clone()):o.lines.splice(x+1,0,l.clone()),C?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const C=x-f+1;o.lines.shiftElements(f+1,C-1,-1),o.lines.set(x,l.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(s,c,o){const l=this.buffer;if(s<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else s+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);const f=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+s,l.ybase),0),f!==l.ydisp&&(c||this._onScroll.fire(l.ydisp))}};i.BufferService=v=u([b(0,S.IOptionsService)],v)},7994:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,u){this._charsets[n]=u,this.glevel===n&&(this.charset=u)}}},1753:function(_,i,n){var u=this&&this.__decorate||function(l,f,x,C){var E,k=arguments.length,L=k<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,x):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,f,x,C);else for(var T=l.length-1;T>=0;T--)(E=l[T])&&(L=(k<3?E(L):k>3?E(f,x,L):E(f,x))||L);return k>3&&L&&Object.defineProperty(f,x,L),L},b=this&&this.__param||function(l,f){return function(x,C){f(x,C,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=n(2585),m=n(8460),w=n(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:l=>l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)},VT200:{events:19,restrict:l=>l.action!==32},DRAG:{events:23,restrict:l=>l.action!==32||l.button!==3},ANY:{events:31,restrict:l=>!0}};function v(l,f){let x=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(x|=64,x|=l.action):(x|=3&l.button,4&l.button&&(x|=64),8&l.button&&(x|=128),l.action===32?x|=32:l.action!==0||f||(x|=3)),x}const s=String.fromCharCode,c={DEFAULT:l=>{const f=[v(l,!1)+32,l.col+32,l.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${s(f[0])}${s(f[1])}${s(f[2])}`},SGR:l=>{const f=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${v(l,!0)};${l.col};${l.row}${f}`},SGR_PIXELS:l=>{const f=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${v(l,!0)};${l.x};${l.y}${f}`}};let o=i.CoreMouseService=class extends w.Disposable{constructor(l,f){super(),this._bufferService=l,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const x of Object.keys(S))this.addProtocol(x,S[x]);for(const x of Object.keys(c))this.addEncoding(x,c[x]);this.reset()}addProtocol(l,f){this._protocols[l]=f}addEncoding(l,f){this._encodings[l]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(l){if(!this._protocols[l])throw new Error(`unknown protocol "${l}"`);this._activeProtocol=l,this._onProtocolChange.fire(this._protocols[l].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(l){if(!this._encodings[l])throw new Error(`unknown encoding "${l}"`);this._activeEncoding=l}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(l){if(l.col<0||l.col>=this._bufferService.cols||l.row<0||l.row>=this._bufferService.rows||l.button===4&&l.action===32||l.button===3&&l.action!==32||l.button!==4&&(l.action===2||l.action===3)||(l.col++,l.row++,l.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,l,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(l))return!1;const f=this._encodings[this._activeEncoding](l);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=l,!0}explainEvents(l){return{down:!!(1&l),up:!!(2&l),drag:!!(4&l),move:!!(8&l),wheel:!!(16&l)}}_equalEvents(l,f,x){if(x){if(l.x!==f.x||l.y!==f.y)return!1}else if(l.col!==f.col||l.row!==f.row)return!1;return l.button===f.button&&l.action===f.action&&l.ctrl===f.ctrl&&l.alt===f.alt&&l.shift===f.shift}};i.CoreMouseService=o=u([b(0,h.IBufferService),b(1,h.ICoreService)],o)},6975:function(_,i,n){var u=this&&this.__decorate||function(o,l,f,x){var C,E=arguments.length,k=E<3?l:x===null?x=Object.getOwnPropertyDescriptor(l,f):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,l,f,x);else for(var L=o.length-1;L>=0;L--)(C=o[L])&&(k=(E<3?C(k):E>3?C(l,f,k):C(l,f))||k);return E>3&&k&&Object.defineProperty(l,f,k),k},b=this&&this.__param||function(o,l){return function(f,x){l(f,x,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=n(1439),m=n(8460),w=n(844),S=n(2585),v=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=i.CoreService=class extends w.Disposable{constructor(o,l,f){super(),this._bufferService=o,this._logService=l,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(v),this.decPrivateModes=(0,h.clone)(s)}reset(){this.modes=(0,h.clone)(v),this.decPrivateModes=(0,h.clone)(s)}triggerDataEvent(o,l=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;l&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),l&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(x=>x.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(l=>l.charCodeAt(0))),this._onBinary.fire(o))}};i.CoreService=c=u([b(0,S.IBufferService),b(1,S.ILogService),b(2,S.IOptionsService)],c)},9074:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=n(8055),b=n(8460),h=n(844),m=n(6106);let w=0,S=0;class v extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new b.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new b.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const l=new s(o);if(l){const f=l.marker.onDispose(()=>l.dispose());l.onDispose(()=>{l&&(this._decorations.delete(l)&&this._onDecorationRemoved.fire(l),f.dispose())}),this._decorations.insert(l),this._onDecorationRegistered.fire(l)}return l}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,l,f){let x=0,C=0;for(const E of this._decorations.getKeyIterator(l))x=E.options.x??0,C=x+(E.options.width??1),o>=x&&o<C&&(!f||(E.options.layer??"bottom")===f)&&(yield E)}forEachDecorationAtCell(o,l,f,x){this._decorations.forEachByKey(l,C=>{w=C.options.x??0,S=w+(C.options.width??1),o>=w&&o<S&&(!f||(C.options.layer??"bottom")===f)&&x(C)})}}i.DecorationService=v;class s extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new b.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new b.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=n(2585),b=n(8343);class h{constructor(...w){this._entries=new Map;for(const[S,v]of w)this.set(S,v)}set(w,S){const v=this._entries.get(w);return this._entries.set(w,S),v}forEach(w){for(const[S,v]of this._entries.entries())w(S,v)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(u.IInstantiationService,this)}setService(m,w){this._services.set(m,w)}getService(m){return this._services.get(m)}createInstance(m,...w){const S=(0,b.getServiceDependencies)(m).sort((c,o)=>c.index-o.index),v=[];for(const c of S){const o=this._services.get(c.id);if(!o)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${c.id}.`);v.push(o)}const s=S.length>0?S[0].index:w.length;if(w.length!==s)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${s+1} conflicts with ${w.length} static arguments`);return new m(...w,...v)}}},7866:function(_,i,n){var u=this&&this.__decorate||function(s,c,o,l){var f,x=arguments.length,C=x<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,o):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,c,o,l);else for(var E=s.length-1;E>=0;E--)(f=s[E])&&(C=(x<3?f(C):x>3?f(c,o,C):f(c,o))||C);return x>3&&C&&Object.defineProperty(c,o,C),C},b=this&&this.__param||function(s,c){return function(o,l){c(o,l,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=n(844),m=n(2585),w={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let S,v=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let c=0;c<s.length;c++)typeof s[c]=="function"&&(s[c]=s[c]())}_log(s,c,o){this._evalLazyOptionalParams(o),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...o)}trace(s,...c){var o;this._logLevel<=m.LogLevelEnum.TRACE&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.trace.bind(this._optionsService.options.logger))??console.log,s,c)}debug(s,...c){var o;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.debug.bind(this._optionsService.options.logger))??console.log,s,c)}info(s,...c){var o;this._logLevel<=m.LogLevelEnum.INFO&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.info.bind(this._optionsService.options.logger))??console.info,s,c)}warn(s,...c){var o;this._logLevel<=m.LogLevelEnum.WARN&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.warn.bind(this._optionsService.options.logger))??console.warn,s,c)}error(s,...c){var o;this._logLevel<=m.LogLevelEnum.ERROR&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.error.bind(this._optionsService.options.logger))??console.error,s,c)}};i.LogService=v=u([b(0,m.IOptionsService)],v),i.setTraceLogger=function(s){S=s},i.traceCall=function(s,c,o){if(typeof o.value!="function")throw new Error("not supported");const l=o.value;o.value=function(...f){if(S.logLevel!==m.LogLevelEnum.TRACE)return l.apply(this,f);S.trace(`GlyphRenderer#${l.name}(${f.map(C=>JSON.stringify(C)).join(", ")})`);const x=l.apply(this,f);return S.trace(`GlyphRenderer#${l.name} return`,x),x}}},7302:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=n(8460),b=n(844),h=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends b.Disposable{constructor(v){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s={...i.DEFAULT_OPTIONS};for(const c in v)if(c in s)try{const o=v[c];s[c]=this._sanitizeAndValidateOption(c,o)}catch(o){console.error(o)}this.rawOptions=s,this.options={...s},this._setupOptions(),this.register((0,b.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,s){return this.onOptionChange(c=>{c===v&&s(this.rawOptions[v])})}onMultipleOptionChange(v,s){return this.onOptionChange(c=>{v.indexOf(c)!==-1&&s()})}_setupOptions(){const v=c=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},s=(c,o)=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);o=this._sanitizeAndValidateOption(c,o),this.rawOptions[c]!==o&&(this.rawOptions[c]=o,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const o={get:v.bind(this,c),set:s.bind(this,c)};Object.defineProperty(this.options,c,o)}}_sanitizeAndValidateOption(v,s){switch(v){case"cursorStyle":if(s||(s=i.DEFAULT_OPTIONS[v]),!function(c){return c==="block"||c==="underline"||c==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${v}`);break;case"wordSeparator":s||(s=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=m.includes(s)?s:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${v} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${v} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}i.OptionsService=w},2660:function(_,i,n){var u=this&&this.__decorate||function(w,S,v,s){var c,o=arguments.length,l=o<3?S:s===null?s=Object.getOwnPropertyDescriptor(S,v):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(w,S,v,s);else for(var f=w.length-1;f>=0;f--)(c=w[f])&&(l=(o<3?c(l):o>3?c(S,v,l):c(S,v))||l);return o>3&&l&&Object.defineProperty(S,v,l),l},b=this&&this.__param||function(w,S){return function(v,s){S(v,s,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=n(2585);let m=i.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const S=this._bufferService.buffer;if(w.id===void 0){const f=S.addMarker(S.ybase+S.y),x={data:w,id:this._nextId++,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(x,f)),this._dataByLinkId.set(x.id,x),x.id}const v=w,s=this._getEntryIdKey(v),c=this._entriesWithId.get(s);if(c)return this.addLineToLink(c.id,S.ybase+S.y),c.id;const o=S.addMarker(S.ybase+S.y),l={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(l,o)),this._entriesWithId.set(l.key,l),this._dataByLinkId.set(l.id,l),l.id}addLineToLink(w,S){const v=this._dataByLinkId.get(w);if(v&&v.lines.every(s=>s.line!==S)){const s=this._bufferService.buffer.addMarker(S);v.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(v,s))}}getLinkData(w){var S;return(S=this._dataByLinkId.get(w))==null?void 0:S.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,S){const v=w.lines.indexOf(S);v!==-1&&(w.lines.splice(v,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};i.OscLinkService=m=u([b(0,h.IBufferService)],m)},8343:(_,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const n="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(b){return b[u]||[]},i.createDecorator=function(b){if(i.serviceRegistry.has(b))return i.serviceRegistry.get(b);const h=function(m,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,s,c){s[n]===s?s[u].push({id:v,index:c}):(s[u]=[{id:v,index:c}],s[n]=s)})(h,m,S)};return h.toString=()=>b,i.serviceRegistry.set(b,h),h}},2585:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=n(8343);var b;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(b||(i.LogLevelEnum=b={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(_,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=n(8460),b=n(225);class h{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,S,v=!1){return(16777215&w)<<3|(3&S)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const w=new b.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let S=0,v=0;const s=w.length;for(let c=0;c<s;++c){let o=w.charCodeAt(c);if(55296<=o&&o<=56319){if(++c>=s)return S+this.wcwidth(o);const x=w.charCodeAt(c);56320<=x&&x<=57343?o=1024*(o-55296)+x-56320+65536:S+=this.wcwidth(x)}const l=this.charProperties(o,v);let f=h.extractWidth(l);h.extractShouldJoin(l)&&(f-=h.extractWidth(v)),S+=f,v=l}return S}charProperties(w,S){return this._activeProvider.charProperties(w,S)}}i.UnicodeService=h}},d={};function p(_){var i=d[_];if(i!==void 0)return i.exports;var n=d[_]={exports:{}};return t[_].call(n.exports,n,n.exports,p),n.exports}var y={};return(()=>{var _=y;Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;const i=p(9042),n=p(3236),u=p(844),b=p(5741),h=p(8285),m=p(7975),w=p(7090),S=["cols","rows"];class v extends u.Disposable{constructor(c){super(),this._core=this.register(new n.Terminal(c)),this._addonManager=this.register(new b.AddonManager),this._publicOptions={...this._core.options};const o=f=>this._core.options[f],l=(f,x)=>{this._checkReadonlyOptions(f),this._core.options[f]=x};for(const f in this._core.options){const x={get:o.bind(this,f),set:l.bind(this,f)};Object.defineProperty(this._publicOptions,f,x)}}_checkReadonlyOptions(c){if(S.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const o in c)this._publicOptions[o]=c[o]}blur(){this._core.blur()}focus(){this._core.focus()}input(c,o=!0){this._core.input(c,o)}resize(c,o){this._verifyIntegers(c,o),this._core.resize(c,o)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}attachCustomWheelEventHandler(c){this._core.attachCustomWheelEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){return this._checkProposedApi(),this._verifyPositiveIntegers(c.x??0,c.width??0,c.height??0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,o,l){this._verifyIntegers(c,o,l),this._core.select(c,o,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,o){this._verifyIntegers(c,o),this._core.selectLines(c,o)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,o){this._core.write(c,o)}writeln(c,o){this._core.write(c),this._core.write(`\r
`,o)}paste(c){this._core.paste(c)}refresh(c,o){this._verifyIntegers(c,o),this._core.refresh(c,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return i}_verifyIntegers(...c){for(const o of c)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const o of c)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}_.Terminal=v})(),y})())})(ls);var nn=ls.exports,hs={exports:{}};(function(r,e){(function(t,d){r.exports=d()})(self,()=>(()=>{var t={};return(()=>{var d=t;Object.defineProperty(d,"__esModule",{value:!0}),d.FitAddon=void 0,d.FitAddon=class{activate(p){this._terminal=p}dispose(){}fit(){const p=this.proposeDimensions();if(!p||!this._terminal||isNaN(p.cols)||isNaN(p.rows))return;const y=this._terminal._core;this._terminal.rows===p.rows&&this._terminal.cols===p.cols||(y._renderService.clear(),this._terminal.resize(p.cols,p.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const p=this._terminal._core,y=p._renderService.dimensions;if(y.css.cell.width===0||y.css.cell.height===0)return;const _=this._terminal.options.scrollback===0?0:p.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),u=Math.max(0,parseInt(i.getPropertyValue("width"))),b=window.getComputedStyle(this._terminal.element),h=n-(parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("padding-bottom"))),m=u-(parseInt(b.getPropertyValue("padding-right"))+parseInt(b.getPropertyValue("padding-left")))-_;return{cols:Math.max(2,Math.floor(m/y.css.cell.width)),rows:Math.max(1,Math.floor(h/y.css.cell.height))}}}})(),t})())})(hs);var on=hs.exports,ds={exports:{}};(function(r,e){(function(t,d){r.exports=d()})(self,()=>(()=>{var t={6:(_,i)=>{function n(b){try{const h=new URL(b),m=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return b.toLocaleLowerCase().startsWith(m.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(b,h,m,w={}){this._terminal=b,this._regex=h,this._handler=m,this._options=w}provideLinks(b,h){const m=u.computeLink(b,this._regex,this._terminal,this._handler);h(this._addCallbacks(m))}_addCallbacks(b){return b.map(h=>(h.leave=this._options.leave,h.hover=(m,w)=>{if(this._options.hover){const{range:S}=h;this._options.hover(m,w,S)}},h))}};class u{static computeLink(h,m,w,S){const v=new RegExp(m.source,(m.flags||"")+"g"),[s,c]=u._getWindowedLineStrings(h-1,w),o=s.join("");let l;const f=[];for(;l=v.exec(o);){const x=l[0];if(!n(x))continue;const[C,E]=u._mapStrIdx(w,c,0,l.index),[k,L]=u._mapStrIdx(w,C,E,x.length);if(C===-1||E===-1||k===-1||L===-1)continue;const T={start:{x:E+1,y:C+1},end:{x:L,y:k+1}};f.push({range:T,text:x,activate:S})}return f}static _getWindowedLineStrings(h,m){let w,S=h,v=h,s=0,c="";const o=[];if(w=m.buffer.active.getLine(h)){const l=w.translateToString(!0);if(w.isWrapped&&l[0]!==" "){for(s=0;(w=m.buffer.active.getLine(--S))&&s<2048&&(c=w.translateToString(!0),s+=c.length,o.push(c),w.isWrapped&&c.indexOf(" ")===-1););o.reverse()}for(o.push(l),s=0;(w=m.buffer.active.getLine(++v))&&w.isWrapped&&s<2048&&(c=w.translateToString(!0),s+=c.length,o.push(c),c.indexOf(" ")===-1););}return[o,S]}static _mapStrIdx(h,m,w,S){const v=h.buffer.active,s=v.getNullCell();let c=w;for(;S;){const o=v.getLine(m);if(!o)return[-1,-1];for(let l=c;l<o.length;++l){o.getCell(l,s);const f=s.getChars();if(s.getWidth()&&(S-=f.length||1,l===o.length-1&&f==="")){const x=v.getLine(m+1);x&&x.isWrapped&&(x.getCell(0,s),s.getWidth()===2&&(S+=1))}if(S<0)return[m,l]}m++,c=0}return[m,c]}}i.LinkComputer=u}},d={};function p(_){var i=d[_];if(i!==void 0)return i.exports;var n=d[_]={exports:{}};return t[_](n,n.exports,p),n.exports}var y={};return(()=>{var _=y;Object.defineProperty(_,"__esModule",{value:!0}),_.WebLinksAddon=void 0;const i=p(6),n=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(b,h){const m=window.open();if(m){try{m.opener=null}catch{}m.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}_.WebLinksAddon=class{constructor(b=u,h={}){this._handler=b,this._options=h}activate(b){this._terminal=b;const h=this._options,m=h.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,m,this._handler,h))}dispose(){var b;(b=this._linkProvider)==null||b.dispose()}}})(),y})())})(ds);var an=ds.exports;function Nr(r){let e,t,d,p,y,_,i,n,u,b,h,m=r[1].name+"",w,S,v,s=Jr(r[1].size)+"",c,o,l,f,x,C,E,k=r[3]&&Kr(r),L=r[2]==="pending"&&Vr(r),T=r[2]==="accepting"&&qr(),R=r[2]==="completed"&&Gr(r);return{c(){e=D("div"),t=D("div"),d=D("div"),d.innerHTML='<span class="zmodem-download-title">📥 ZMODEM 文件下载</span>',p=F(),y=D("div"),_=D("div"),i=D("div"),n=D("span"),n.textContent="📄",u=F(),b=D("div"),h=D("span"),w=re(m),S=F(),v=D("span"),c=re(s),o=re(" 字节"),l=F(),f=D("div"),k&&k.c(),x=F(),L&&L.c(),C=F(),T&&T.c(),E=F(),R&&R.c(),a(d,"class","zmodem-download-header"),a(n,"class","zmodem-download-icon"),a(h,"class","zmodem-download-name"),a(v,"class","zmodem-download-size"),a(b,"class","zmodem-download-details"),a(i,"class","zmodem-download-file"),a(_,"class","zmodem-download-info"),a(f,"class","zmodem-download-actions"),a(y,"class","zmodem-download-body"),a(t,"class","zmodem-download-content"),a(e,"class","zmodem-download-modal")},m(O,A){V(O,e,A),g(e,t),g(t,d),g(t,p),g(t,y),g(y,_),g(_,i),g(i,n),g(i,u),g(i,b),g(b,h),g(h,w),g(b,S),g(b,v),g(v,c),g(v,o),g(y,l),g(y,f),k&&k.m(f,null),g(f,x),L&&L.m(f,null),g(f,C),T&&T.m(f,null),g(f,E),R&&R.m(f,null)},p(O,A){A[0]&2&&m!==(m=O[1].name+"")&&ue(w,m),A[0]&2&&s!==(s=Jr(O[1].size)+"")&&ue(c,s),O[3]?k?k.p(O,A):(k=Kr(O),k.c(),k.m(f,x)):k&&(k.d(1),k=null),O[2]==="pending"?L?L.p(O,A):(L=Vr(O),L.c(),L.m(f,C)):L&&(L.d(1),L=null),O[2]==="accepting"?T||(T=qr(),T.c(),T.m(f,E)):T&&(T.d(1),T=null),O[2]==="completed"?R?R.p(O,A):(R=Gr(O),R.c(),R.m(f,null)):R&&(R.d(1),R=null)},d(O){O&&K(e),k&&k.d(),L&&L.d(),T&&T.d(),R&&R.d()}}}function Kr(r){let e,t,d;return{c(){e=D("div"),t=re("❌ "),d=re(r[3]),a(e,"class","zmodem-error-message")},m(p,y){V(p,e,y),g(e,t),g(e,d)},p(p,y){y[0]&8&&ue(d,p[3])},d(p){p&&K(e)}}}function Vr(r){let e,t,d,p,y,_,i,n;return{c(){e=D("p"),e.textContent="服务器正在发送文件，是否接收？",t=F(),d=D("div"),p=D("button"),p.textContent="拒绝",y=F(),_=D("button"),_.textContent="接收文件",a(e,"class","zmodem-download-prompt"),a(p,"class","zmodem-download-btn zmodem-btn-reject"),a(_,"class","zmodem-download-btn zmodem-btn-accept"),a(d,"class","zmodem-download-buttons")},m(u,b){V(u,e,b),V(u,t,b),V(u,d,b),g(d,p),g(d,y),g(d,_),i||(n=[se(p,"click",r[6]),se(_,"click",r[5])],i=!0)},p:Se,d(u){u&&(K(e),K(t),K(d)),i=!1,Be(n)}}}function qr(r){let e;return{c(){e=D("div"),e.innerHTML='<span class="zmodem-spinner"></span> <span>正在接收文件...</span>',a(e,"class","zmodem-downloading")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function Gr(r){let e,t,d,p,y,_=(r[4]||r[1].name)+"",i;return{c(){e=D("div"),t=D("span"),t.textContent="✓",d=F(),p=D("span"),y=re("文件接收完成，已保存到："),i=re(_),a(t,"class","zmodem-success-icon"),a(e,"class","zmodem-completed")},m(n,u){V(n,e,u),g(e,t),g(e,d),g(e,p),g(p,y),g(p,i)},p(n,u){u[0]&18&&_!==(_=(n[4]||n[1].name)+"")&&ue(i,_)},d(n){n&&K(e)}}}function ln(r){let e,t,d,p=r[1]&&Nr(r);return{c(){e=D("div"),e.innerHTML="",t=F(),p&&p.c(),d=ct(),a(e,"class","terminal-container svelte-14g4vw6")},m(y,_){V(y,e,_),r[16](e),V(y,t,_),p&&p.m(y,_),V(y,d,_)},p(y,_){y[1]?p?p.p(y,_):(p=Nr(y),p.c(),p.m(d.parentNode,d)):p&&(p.d(1),p=null)},i:Se,o:Se,d(y){y&&(K(e),K(t),K(d)),r[16](null),p&&p.d(y)}}}function cn(r,e){try{const t=new Blob([r],{type:"application/octet-stream"}),d=window.URL.createObjectURL(t),p=document.createElement("a");p.href=d,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(d),console.log("文件已保存:",e)}catch(t){console.error("保存文件失败:",t),alert("保存文件失败: "+t.message)}}function hn(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}async function dn(r){const e=[];let t=0;for await(const y of r)e.push(y),t+=y.length;const d=new Uint8Array(t);let p=0;for(const y of e)d.set(y,p),p+=y.length;return d}async function un(r,e){const t=await dn(r),{SaveBinaryFile:d}=window.wailsBindings||{};if(typeof d=="function"){const p=btoa(hn(t));return await d(e,p)}return cn(t,e),null}function Jr(r){return r?r<1024?r+" B":r<1024*1024?(r/1024).toFixed(2)+" KB":r<1024*1024*1024?(r/(1024*1024)).toFixed(2)+" MB":(r/(1024*1024*1024)).toFixed(2)+" GB":"0 B"}function fn(r,e,t){let{sessionId:d=null}=e,{onData:p=null}=e,{onResize:y=null}=e,{onZModemTransfer:_=null}=e,i,n,u,b=null,h=null,m=null,w=!1,S=null,v=!1,s=null,c="pending",o=null,l=null,f=null,x=Ms(It);const C={background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",selectionBackground:"rgba(2, 136, 209, 0.3)",selectionForeground:void 0,selectionInactiveBackground:"rgba(2, 136, 209, 0.15)"},E={background:"#ffffff",foreground:"#333333",cursor:"#333333",black:"#000000",red:"#cd3131",green:"#00bc00",yellow:"#949800",blue:"#0451a5",magenta:"#bc05bc",cyan:"#0598bc",white:"#555555",brightBlack:"#666666",brightRed:"#cd3131",brightGreen:"#14ce14",brightYellow:"#b5ba00",brightBlue:"#0451a5",brightMagenta:"#bc05bc",brightCyan:"#0598bc",brightWhite:"#a5a5a5",selectionBackground:"rgba(225, 245, 254, 0.8)",selectionForeground:void 0,selectionInactiveBackground:"rgba(225, 245, 254, 0.5)"},k=It.subscribe(U=>{x=U,n&&(n.options.theme=x==="light"?E:C)});Ht(async()=>{n=new nn.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:x==="light"?E:C,allowProposedApi:!0,scrollback:1e3,convertEol:!1,rightClickSelectsWord:!0,macOptionClickForcesSelection:!0}),u=new on.FitAddon,n.loadAddon(u),n.loadAddon(new an.WebLinksAddon),n.open(i),u.fit(),n.attachCustomKeyEventHandler(G=>{if(G.metaKey&&G.key.toLowerCase()==="c"&&!G.shiftKey&&!G.ctrlKey){if(n.hasSelection()){const $=n.getSelection();return navigator.clipboard.writeText($).catch(ne=>{console.error("Failed to copy:",ne)}),!1}return!0}if(G.ctrlKey&&!G.metaKey&&G.key.toLowerCase()==="c"&&!G.shiftKey){if(n.hasSelection()){const $=n.getSelection();return navigator.clipboard.writeText($).catch(ne=>{console.error("Failed to copy:",ne)}),!1}return!0}return G.metaKey&&G.key.toLowerCase()==="v"&&!G.shiftKey&&!G.ctrlKey?(G.preventDefault(),navigator.clipboard.readText().then($=>{$&&p&&d&&p(d,$)}).catch($=>{console.error("Failed to read clipboard:",$)}),!1):G.ctrlKey&&!G.metaKey&&G.key.toLowerCase()==="v"&&!G.shiftKey?(G.preventDefault(),navigator.clipboard.readText().then($=>{$&&p&&d&&p(d,$)}).catch($=>{console.error("Failed to read clipboard:",$)}),!1):!0});try{const G=await or(()=>import("./index2.js").then($=>$.i),[]);b=G.default||G,h=new b.Sentry({to_terminal:$=>{n&&n.write(new Uint8Array($))},sender:$=>{if(d){if(_){_(d,new Uint8Array($));return}if(p){let ne="";for(let W=0;W<$.length;W++)ne+=String.fromCharCode($[W]);p(d,ne)}}},on_detect:$=>{if(console.log("ZMODEM detected:",$.type),console.log("Detection object:",$),m=$.confirm(),console.log("ZMODEM confirmed, type:",m.type,"has zsession:",!!m),!m){console.error("ERROR: zsession is null after confirm()");return}v=!0,n&&(n.options.disableStdin=!0),m.type==="receive"?(console.log("Calling handleZModemReceive for download"),O(m)):(console.log("Calling handleZModemSend for upload"),Z(m))},on_retract:()=>{console.log("ZMODEM retracted"),m=null}}),console.log("ZMODEM initialized successfully")}catch(G){console.error("Failed to initialize ZMODEM:",G)}n.onData(G=>{p&&d&&p(d,G)}),n.onResize(({cols:G,rows:$})=>{y&&d&&y(d,G,$)});const U=new ResizeObserver(()=>{u.fit()});return U.observe(i),()=>{U.disconnect()}}),cr(()=>{k&&k(),n&&n.dispose()});function L(U){f||(f=document.createElement("div"),f.className="zmodem-progress-modal",f.innerHTML=`
      <div class="zmodem-progress-content">
        <div class="zmodem-progress-header">
          <span>ZMODEM 文件传输</span>
        </div>
        <div class="zmodem-progress-body">
          <div class="zmodem-progress-item">
            <span id="zmodem-file-name">准备传输...</span>
            <div class="zmodem-progress-bar-container">
              <div class="zmodem-progress-bar" id="zmodem-progress-bar"></div>
            </div>
            <span id="zmodem-progress-text">0%</span>
          </div>
          <div class="zmodem-progress-details">
            <span id="zmodem-files-progress">1 / ${U}</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(f))}function T(U,G,$,ne,W){if(!f)return;const M=Math.min(100,Math.round(ne/W*100));document.getElementById("zmodem-file-name").textContent=`正在上传: ${$}`,document.getElementById("zmodem-progress-bar").style.width=`${M}%`,document.getElementById("zmodem-progress-text").textContent=`${M}%`,document.getElementById("zmodem-files-progress").textContent=`${U+1} / ${G}`}function R(){f&&(document.body.removeChild(f),f=null)}function O(U){t(1,s=null),S=null,t(2,c="pending"),t(3,o=null),t(4,l=null),U.on("offer",G=>{const $=G.get_details();S=G,t(1,s=$),t(2,c="pending"),t(3,o=null),t(4,l=null)}),U.on("session_end",()=>{S=null,m=null,v=!1,n&&(n.options.disableStdin=!1),c==="accepting"?(t(2,c="completed"),setTimeout(()=>{t(1,s=null),t(2,c="pending"),t(4,l=null)},1500)):(t(1,s=null),t(2,c="pending"),t(4,l=null))}),U.start()}async function A(){if(S){t(2,c="accepting"),t(3,o=null);try{await S.accept();const U=S.get_payloads(),G=S.get_details().name;t(4,l=await un(U,G)),S=null,t(2,c="completed")}catch(U){console.error("接收文件失败:",U),t(3,o=U.message||String(U)),t(2,c="pending")}}}function j(){S&&S.skip(),S=null,t(1,s=null),t(2,c="pending"),t(3,o=null),t(4,l=null)}async function Z(U){console.log("handleZModemSend called, session:",U);const G=document.createElement("input");return G.type="file",G.multiple=!0,new Promise($=>{G.onchange=async ne=>{const W=Array.from(ne.target.files);if(console.log("Files selected:",W.length,W.map(M=>M.name)),W.length===0){console.log("No files selected, closing session"),U.close(),w=!1,$();return}try{L(W.length),console.log("Starting to send files...");for(let M=0;M<W.length;M++){const q=W[M],I={name:q.name,size:q.size,mtime:new Date(q.lastModified)};console.log(`Sending file ${M+1}/${W.length}:`,q.name,q.size),await ie(U,q,I,M,W.length)}console.log("All files sent, closing session"),await U.close(),setTimeout(()=>{w=!1,R(),v=!1,n&&(n.options.disableStdin=!1),$()},500)}catch(M){console.error("发送文件失败:",M),console.error("Error details:",M.stack),U.close(),w=!1,R(),v=!1,n&&(n.options.disableStdin=!1),$()}},G.click()})}async function ie(U,G,$,ne,W){return new Promise((M,q)=>{U.send_offer($).then(I=>{if(!I){M();return}const X=new FileReader,J=8192;X.onload=N=>{const ae=N.target.result;let Q=0,ce=0;function he(){if(Q<ae.byteLength){const Me=new Uint8Array(ae,Q,Math.min(J,ae.byteLength-Q));I.send(Me),Q+=J,ce+=Me.byteLength,T(ne,W,G.name,ce,G.size),setTimeout(he,0)}else I.end().then(M).catch(q)}he()},X.onerror=()=>{q(new Error("读取文件失败"))},X.readAsArrayBuffer(G)})})}function te(U){if(!n)return;let G;if(typeof U=="string"?G=new Uint8Array(U.split("").map($=>$.charCodeAt(0))):U instanceof Uint8Array?G=U:G=new Uint8Array(U),h&&!w)try{h.consume(G);return}catch($){console.warn("ZMODEM consume failed:",$),m=null,S=null,v=!1,w=!1,n&&(n.options.disableStdin=!1)}n.write(G)}function Y(U){n&&n.writeln(U)}function B(){n&&n.clear()}function P(){n&&n.focus()}function H(){return n?{cols:n.cols,rows:n.rows}:{cols:80,rows:24}}function z(U){Xe[U?"unshift":"push"](()=>{i=U,t(0,i)})}return r.$$set=U=>{"sessionId"in U&&t(7,d=U.sessionId),"onData"in U&&t(8,p=U.onData),"onResize"in U&&t(9,y=U.onResize),"onZModemTransfer"in U&&t(10,_=U.onZModemTransfer)},[i,s,c,o,l,A,j,d,p,y,_,te,Y,B,P,H,z]}class _n extends $e{constructor(e){super(),Qe(this,e,fn,ln,Ze,{sessionId:7,onData:8,onResize:9,onZModemTransfer:10,write:11,writeln:12,clear:13,focus:14,getSize:15},null,[-1,-1])}get write(){return this.$$.ctx[11]}get writeln(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get focus(){return this.$$.ctx[14]}get getSize(){return this.$$.ctx[15]}}function Xr(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S;const v=r[6].default,s=Bs(v,r,r[5],null);return{c(){e=D("div"),t=D("div"),d=F(),p=D("div"),y=D("div"),_=D("h2"),i=re(r[2]),n=F(),u=D("button"),u.innerHTML='<svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=F(),h=D("div"),s&&s.c(),a(t,"class","absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity pointer-events-auto"),a(_,"class","text-base font-semibold text-gray-900 dark:text-white"),a(u,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),a(y,"class","flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"),a(h,"class","flex-1 overflow-y-auto p-6"),a(p,"class","relative w-full max-w-xs bg-white dark:bg-gray-800 rounded-xl shadow-2xl m-4 max-h-[90vh] overflow-hidden flex flex-col transform transition-all"),a(e,"class","fixed inset-0 z-50 flex items-center justify-center"),a(e,"role","dialog"),a(e,"aria-modal","true")},m(c,o){V(c,e,o),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),g(_,i),g(y,n),g(y,u),g(p,b),g(p,h),s&&s.m(h,null),m=!0,w||(S=[se(u,"click",function(){St(r[1])&&r[1].apply(this,arguments)}),se(e,"click",r[3])],w=!0)},p(c,o){r=c,(!m||o&4)&&ue(i,r[2]),s&&s.p&&(!m||o&32)&&As(s,v,r,r[5],m?Ts(v,r[5],o,null):Rs(r[5]),null)},i(c){m||(Ee(s,c),m=!0)},o(c){De(s,c),m=!1},d(c){c&&K(e),s&&s.d(c),w=!1,Be(S)}}}function pn(r){let e,t,d=r[0]&&Xr(r);return{c(){d&&d.c(),e=ct()},m(p,y){d&&d.m(p,y),V(p,e,y),t=!0},p(p,[y]){p[0]?d?(d.p(p,y),y&1&&Ee(d,1)):(d=Xr(p),d.c(),Ee(d,1),d.m(e.parentNode,e)):d&&(ht(),De(d,1,1,()=>{d=null}),dt())},i(p){t||(Ee(d),t=!0)},o(p){De(d),t=!1},d(p){p&&K(e),d&&d.d(p)}}}function gn(r,e,t){let{$$slots:d={},$$scope:p}=e,{isOpen:y=!1}=e,{onClose:_=()=>{}}=e,{title:i=""}=e,{size:n="md"}=e;function u(h){h.target===h.currentTarget&&_()}function b(h){h.key==="Escape"&&y&&_()}return r.$$set=h=>{"isOpen"in h&&t(0,y=h.isOpen),"onClose"in h&&t(1,_=h.onClose),"title"in h&&t(2,i=h.title),"size"in h&&t(4,n=h.size),"$$scope"in h&&t(5,p=h.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&(y?document.addEventListener("keydown",b):document.removeEventListener("keydown",b))},[y,_,i,u,n,p,d]}class hr extends $e{constructor(e){super(),Qe(this,e,gn,pn,Ze,{isOpen:0,onClose:1,title:2,size:4})}}function mn(r){let e,t,d,p,y,_,i,n,u,b,h,m,w;return{c(){e=D("div"),t=D("p"),d=re(r[2]),p=F(),y=D("div"),_=D("button"),i=re(r[4]),n=F(),u=D("button"),b=re(r[3]),a(t,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed"),a(_,"type","button"),a(_,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),a(u,"type","button"),a(u,"class",h="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white")),a(y,"class","flex gap-2 pt-2"),a(e,"class","space-y-4")},m(S,v){V(S,e,v),g(e,t),g(t,d),g(e,p),g(e,y),g(y,_),g(_,i),g(y,n),g(y,u),g(u,b),m||(w=[se(_,"click",function(){St(r[6])&&r[6].apply(this,arguments)}),se(u,"click",function(){St(r[5])&&r[5].apply(this,arguments)})],m=!0)},p(S,v){r=S,v&4&&ue(d,r[2]),v&16&&ue(i,r[4]),v&8&&ue(b,r[3]),v&128&&h!==(h="px-3 py-1.5 rounded-md text-xs font-medium transition-all shadow-sm "+(r[7]==="danger"?"bg-red-600 hover:bg-red-700 text-white":r[7]==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"))&&a(u,"class",h)},d(S){S&&K(e),m=!1,Be(w)}}}function vn(r){let e,t,d;function p(_){r[8](_)}let y={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[mn]},$$scope:{ctx:r}};return r[0]!==void 0&&(y.isOpen=r[0]),e=new hr({props:y}),Xe.push(()=>at(e,"isOpen",p)),{c(){je(e.$$.fragment)},m(_,i){Fe(e,_,i),d=!0},p(_,[i]){const n={};i&64&&(n.onClose=_[6]),i&2&&(n.title=_[1]),i&764&&(n.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,n.isOpen=_[0],ot(()=>t=!1)),e.$set(n)},i(_){d||(Ee(e.$$.fragment,_),d=!0)},o(_){De(e.$$.fragment,_),d=!1},d(_){We(e,_)}}}function bn(r,e,t){let{isOpen:d=!1}=e,{title:p=""}=e,{message:y=""}=e,{confirmText:_="确定"}=e,{cancelText:i="取消"}=e,{onConfirm:n=()=>{}}=e,{onCancel:u=()=>{}}=e,{type:b="default"}=e;function h(m){d=m,t(0,d)}return r.$$set=m=>{"isOpen"in m&&t(0,d=m.isOpen),"title"in m&&t(1,p=m.title),"message"in m&&t(2,y=m.message),"confirmText"in m&&t(3,_=m.confirmText),"cancelText"in m&&t(4,i=m.cancelText),"onConfirm"in m&&t(5,n=m.onConfirm),"onCancel"in m&&t(6,u=m.onCancel),"type"in m&&t(7,b=m.type)},[d,p,y,_,i,n,u,b,h]}class br extends $e{constructor(e){super(),Qe(this,e,bn,vn,Ze,{isOpen:0,title:1,message:2,confirmText:3,cancelText:4,onConfirm:5,onCancel:6,type:7})}}function wn(r){window.runtime.LogPrint(r)}function yn(r){window.runtime.LogTrace(r)}function Sn(r){window.runtime.LogDebug(r)}function kn(r){window.runtime.LogInfo(r)}function Cn(r){window.runtime.LogWarning(r)}function xn(r){window.runtime.LogError(r)}function En(r){window.runtime.LogFatal(r)}function Sr(r,e,t){return window.runtime.EventsOnMultiple(r,e,t)}function lr(r,e){return Sr(r,e,-1)}function Ln(r,...e){return window.runtime.EventsOff(r,...e)}function Dn(){return window.runtime.EventsOffAll()}function Mn(r,e){return Sr(r,e,1)}function Bn(r){let e=[r].slice.call(arguments);return window.runtime.EventsEmit.apply(null,e)}function Tn(){window.runtime.WindowReload()}function An(){window.runtime.WindowReloadApp()}function Rn(r){window.runtime.WindowSetAlwaysOnTop(r)}function On(){window.runtime.WindowSetSystemDefaultTheme()}function Pn(){window.runtime.WindowSetLightTheme()}function In(){window.runtime.WindowSetDarkTheme()}function Hn(){window.runtime.WindowCenter()}function Fn(r){window.runtime.WindowSetTitle(r)}function Wn(){window.runtime.WindowFullscreen()}function zn(){window.runtime.WindowUnfullscreen()}function jn(){return window.runtime.WindowIsFullscreen()}function Un(){return window.runtime.WindowGetSize()}function Nn(r,e){window.runtime.WindowSetSize(r,e)}function Kn(r,e){window.runtime.WindowSetMaxSize(r,e)}function Vn(r,e){window.runtime.WindowSetMinSize(r,e)}function qn(r,e){window.runtime.WindowSetPosition(r,e)}function Gn(){return window.runtime.WindowGetPosition()}function Jn(){window.runtime.WindowHide()}function Xn(){window.runtime.WindowShow()}function Yn(){window.runtime.WindowMaximise()}function Zn(){window.runtime.WindowToggleMaximise()}function Qn(){window.runtime.WindowUnmaximise()}function $n(){return window.runtime.WindowIsMaximised()}function eo(){window.runtime.WindowMinimise()}function to(){window.runtime.WindowUnminimise()}function ro(r,e,t,d){window.runtime.WindowSetBackgroundColour(r,e,t,d)}function io(){return window.runtime.ScreenGetAll()}function so(){return window.runtime.WindowIsMinimised()}function no(){return window.runtime.WindowIsNormal()}function oo(r){window.runtime.BrowserOpenURL(r)}function ao(){return window.runtime.Environment()}function lo(){window.runtime.Quit()}function co(){window.runtime.Hide()}function ho(){window.runtime.Show()}function uo(){return window.runtime.ClipboardGetText()}function fo(r){return window.runtime.ClipboardSetText(r)}function _o(r,e){return window.runtime.OnFileDrop(r,e)}function po(){return window.runtime.OnFileDropOff()}function go(){return window.runtime.CanResolveFilePaths()}function mo(r){return window.runtime.ResolveFilePaths(r)}const us=Object.freeze(Object.defineProperty({__proto__:null,BrowserOpenURL:oo,CanResolveFilePaths:go,ClipboardGetText:uo,ClipboardSetText:fo,Environment:ao,EventsEmit:Bn,EventsOff:Ln,EventsOffAll:Dn,EventsOn:lr,EventsOnMultiple:Sr,EventsOnce:Mn,Hide:co,LogDebug:Sn,LogError:xn,LogFatal:En,LogInfo:kn,LogPrint:wn,LogTrace:yn,LogWarning:Cn,OnFileDrop:_o,OnFileDropOff:po,Quit:lo,ResolveFilePaths:mo,ScreenGetAll:io,Show:ho,WindowCenter:Hn,WindowFullscreen:Wn,WindowGetPosition:Gn,WindowGetSize:Un,WindowHide:Jn,WindowIsFullscreen:jn,WindowIsMaximised:$n,WindowIsMinimised:so,WindowIsNormal:no,WindowMaximise:Yn,WindowMinimise:eo,WindowReload:Tn,WindowReloadApp:An,WindowSetAlwaysOnTop:Rn,WindowSetBackgroundColour:ro,WindowSetDarkTheme:In,WindowSetLightTheme:Pn,WindowSetMaxSize:Kn,WindowSetMinSize:Vn,WindowSetPosition:qn,WindowSetSize:Nn,WindowSetSystemDefaultTheme:On,WindowSetTitle:Fn,WindowShow:Xn,WindowToggleMaximise:Zn,WindowUnfullscreen:zn,WindowUnmaximise:Qn,WindowUnminimise:to},Symbol.toStringTag,{value:"Module"})),{Map:fs}=es;function Yr(r,e,t){const d=r.slice();return d[41]=e[t],d[42]=e,d[43]=t,d}function Zr(r,e,t){const d=r.slice();return d[41]=e[t],d}function vo(r){let e=[],t=new fs,d,p=qe(r[1]);const y=_=>_[41].sessionId;for(let _=0;_<p.length;_+=1){let i=Zr(r,p,_),n=y(i);t.set(n,e[_]=Qr(n,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();d=ct()},m(_,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(_,i);V(_,d,i)},p(_,i){i[0]&29666&&(p=qe(_[1]),e=Ft(e,i,y,1,_,p,t,d.parentNode,Gt,Qr,d,Zr))},d(_){_&&K(d);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function bo(r){let e;return{c(){e=D("div"),e.textContent="没有活动连接",a(e,"class","px-4 py-2.5 text-sm text-gray-500 dark:text-gray-400")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function wo(r){let e,t=(r[41].tabName||r[41].connection.name)+"",d;return{c(){e=D("span"),d=re(t),a(e,"class","text-sm font-medium truncate flex-1")},m(p,y){V(p,e,y),g(e,d)},p(p,y){y[0]&2&&t!==(t=(p[41].tabName||p[41].connection.name)+"")&&ue(d,t)},d(p){p&&K(e)}}}function yo(r){let e,t,d;return{c(){e=D("input"),a(e,"type","text"),a(e,"class","flex-1 bg-transparent text-sm outline-none px-1"),a(e,"focus","")},m(p,y){V(p,e,y),ge(e,r[6]),t||(d=[se(e,"input",r[24]),se(e,"blur",r[13]),se(e,"keydown",r[14])],t=!0)},p(p,y){y[0]&64&&e.value!==p[6]&&ge(e,p[6])},d(p){p&&K(e),t=!1,Be(d)}}}function Qr(r,e){let t,d,p,y,_,i,n,u,b,h;function m(l,f){return l[5]===l[41].sessionId?yo:wo}let w=m(e),S=w(e);function v(...l){return e[25](e[41],...l)}function s(){return e[26](e[41])}function c(){return e[27](e[41])}function o(...l){return e[28](e[41],...l)}return{key:r,first:null,c(){t=D("div"),d=D("div"),y=F(),S.c(),_=F(),i=D("button"),i.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',n=F(),a(d,"class",p=Or(`w-2 h-2 rounded-full flex-shrink-0 ${e[41].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l"),a(i,"class","opacity-0 group-hover:opacity-100 p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-opacity"),a(t,"class",u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[41].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600")),a(t,"role","button"),a(t,"tabindex","0"),this.first=t},m(l,f){V(l,t,f),g(t,d),g(t,y),S.m(t,null),g(t,_),g(t,i),g(t,n),b||(h=[se(i,"click",v),se(t,"click",s),se(t,"dblclick",c),se(t,"keydown",o)],b=!0)},p(l,f){e=l,f[0]&2&&p!==(p=Or(`w-2 h-2 rounded-full flex-shrink-0 ${e[41].connected?"bg-green-500":"bg-gray-400 dark:bg-gray-600"}`)+" svelte-1v9xg5l")&&a(d,"class",p),w===(w=m(e))&&S?S.p(e,f):(S.d(1),S=w(e),S&&(S.c(),S.m(t,_))),f[0]&130&&u!==(u="group flex items-center gap-2 px-4 py-2.5 border-r border-gray-200 dark:border-gray-700 cursor-pointer transition-all min-w-[180px] "+(e[7]===e[41].sessionId?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-b-2 border-b-purple-600":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"))&&a(t,"class",u)},d(l){l&&K(t),S.d(),b=!1,Be(h)}}}function So(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="text-center"><div class="text-lg font-medium mb-2 text-gray-700 dark:text-gray-300">未选择连接</div> <div class="text-sm text-gray-500 dark:text-gray-400">从左侧资产列表选择一个服务器开始连接</div></div>',a(e,"class","flex-1 flex items-center justify-center text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800")},m(t,d){V(t,e,d)},p:Se,i:Se,o:Se,d(t){t&&K(e)}}}function ko(r){let e,t=[],d=new fs,p,y=qe(r[1]);const _=i=>i[41].sessionId;for(let i=0;i<y.length;i+=1){let n=Yr(r,y,i),u=_(n);d.set(u,t[i]=$r(u,n))}return{c(){e=D("div");for(let i=0;i<t.length;i+=1)t[i].c();a(e,"class","terminal-content-area relative flex-1 flex flex-col svelte-1v9xg5l")},m(i,n){V(i,e,n);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);p=!0},p(i,n){n[0]&1835139&&(y=qe(i[1]),ht(),t=Ft(t,n,_,1,i,y,d,e,Ws,$r,null,Yr),dt())},i(i){if(!p){for(let n=0;n<y.length;n+=1)Ee(t[n]);p=!0}},o(i){for(let n=0;n<t.length;n+=1)De(t[n]);p=!1},d(i){i&&K(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Co(r){let e=r[41].connection.username+"",t,d,p=r[41].connection.host+"",y,_,i=r[41].connection.port+"",n;return{c(){t=re(e),d=re("@"),y=re(p),_=re(":"),n=re(i)},m(u,b){V(u,t,b),V(u,d,b),V(u,y,b),V(u,_,b),V(u,n,b)},p(u,b){b[0]&2&&e!==(e=u[41].connection.username+"")&&ue(t,e),b[0]&2&&p!==(p=u[41].connection.host+"")&&ue(y,p),b[0]&2&&i!==(i=u[41].connection.port+"")&&ue(n,i)},d(u){u&&(K(t),K(d),K(y),K(_),K(n))}}}function xo(r){let e,t=r[41].connection.name!=="Local Shell"?` (${r[41].connection.name})`:"",d;return{c(){e=re("本地终端"),d=re(t)},m(p,y){V(p,e,y),V(p,d,y)},p(p,y){y[0]&2&&t!==(t=p[41].connection.name!=="Local Shell"?` (${p[41].connection.name})`:"")&&ue(d,t)},d(p){p&&(K(e),K(d))}}}function $r(r,e){let t,d,p,y,_,i,n,u,b=e[41],h,m,w;function S(f,x){return f[41].type==="local"?xo:Co}let v=S(e),s=v(e);const c=()=>e[29](u,b),o=()=>e[29](null,b);let l={sessionId:e[41].sessionId,onData:e[18],onResize:e[20],onZModemTransfer:e[19]};return u=new _n({props:l}),c(),{key:r,first:null,c(){t=D("div"),d=D("div"),p=D("div"),s.c(),y=F(),_=D("div"),_.innerHTML='<button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="复制"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="粘贴"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-linecap="round" stroke-linejoin="round"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-linecap="round" stroke-linejoin="round"></rect></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最小化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round"></line></svg></button> <button class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="最大化"><svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round"></rect><path d="M8 3v3a2 2 0 0 1-2 2H3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 8h-3a2 2 0 0 1-2-2V3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 16h3a2 2 0 0 1 2 2v3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 21v-3a2 2 0 0 1 2-2h3" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>',i=F(),n=D("div"),je(u.$$.fragment),h=F(),a(p,"class","text-sm text-gray-600 dark:text-gray-400 font-mono"),a(_,"class","flex items-center gap-1"),a(d,"class","flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"),a(n,"class","flex-1 overflow-hidden"),a(t,"class",m="terminal-wrapper "+(e[7]===e[41].sessionId?"active":"inactive")+" svelte-1v9xg5l"),this.first=t},m(f,x){V(f,t,x),g(t,d),g(d,p),s.m(p,null),g(d,y),g(d,_),g(t,i),g(t,n),Fe(u,n,null),g(t,h),w=!0},p(f,x){e=f,v===(v=S(e))&&s?s.p(e,x):(s.d(1),s=v(e),s&&(s.c(),s.m(p,null))),b!==e[41]&&(o(),b=e[41],c());const C={};x[0]&2&&(C.sessionId=e[41].sessionId),u.$set(C),(!w||x[0]&130&&m!==(m="terminal-wrapper "+(e[7]===e[41].sessionId?"active":"inactive")+" svelte-1v9xg5l"))&&a(t,"class",m)},i(f){w||(Ee(u.$$.fragment,f),w=!0)},o(f){De(u.$$.fragment,f),w=!1},d(f){f&&K(t),s.d(),o(),We(u)}}}function ei(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,C;return f=Ps(r[32][0]),{c(){e=D("div"),t=D("div"),d=D("div"),d.innerHTML='<h3 class="text-lg font-semibold text-gray-900 dark:text-white">选择 Shell</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">选择要打开的本地终端类型</p>',p=F(),y=D("div"),_=D("label"),i=D("input"),n=F(),u=D("div"),u.innerHTML='<div class="font-medium text-gray-900 dark:text-white">PowerShell</div> <div class="text-sm text-gray-500 dark:text-gray-400">推荐：更强大的命令行体验</div>',b=F(),h=D("label"),m=D("input"),w=F(),S=D("div"),S.innerHTML='<div class="font-medium text-gray-900 dark:text-white">CMD</div> <div class="text-sm text-gray-500 dark:text-gray-400">传统命令提示符</div>',v=F(),s=D("div"),c=D("button"),c.textContent="取消",o=F(),l=D("button"),l.textContent="确定",a(d,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),a(i,"type","radio"),i.__value="powershell",ge(i,i.__value),a(i,"class","w-4 h-4 text-purple-600"),a(_,"class","flex items-center space-x-3 cursor-pointer"),a(m,"type","radio"),m.__value="cmd",ge(m,m.__value),a(m,"class","w-4 h-4 text-purple-600"),a(h,"class","flex items-center space-x-3 cursor-pointer"),a(y,"class","px-6 py-4 space-y-3"),a(c,"class","px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"),a(l,"class","px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium"),a(s,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"),a(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"),f.p(i,m)},m(E,k){V(E,e,k),g(e,t),g(t,d),g(t,p),g(t,y),g(y,_),g(_,i),i.checked=i.__value===r[4],g(_,n),g(_,u),g(y,b),g(y,h),g(h,m),m.checked=m.__value===r[4],g(h,w),g(h,S),g(t,v),g(t,s),g(s,c),g(s,o),g(s,l),x||(C=[se(i,"change",r[31]),se(m,"change",r[33]),se(c,"click",r[17]),se(l,"click",r[16])],x=!0)},p(E,k){k[0]&16&&(i.checked=i.__value===E[4]),k[0]&16&&(m.checked=m.__value===E[4])},d(E){E&&K(e),f.r(),x=!1,Be(C)}}}function Eo(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v;function s(L,T){return L[1].length===0?bo:vo}let c=s(r),o=c(r);const l=[ko,So],f=[];function x(L,T){return L[1].length>0?0:1}_=x(r),i=f[_]=l[_](r);function C(L){r[30](L)}let E={title:"关闭 SSH 会话",message:"确定要关闭此 SSH 会话吗？",type:"warning",confirmText:"确定关闭",cancelText:"取消",onConfirm:r[10],onCancel:r[11]};r[2]!==void 0&&(E.isOpen=r[2]),u=new br({props:E}),Xe.push(()=>at(u,"isOpen",C));let k=r[3]&&ei(r);return{c(){e=D("div"),t=D("div"),o.c(),d=F(),p=D("button"),p.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>',y=F(),i.c(),n=F(),je(u.$$.fragment),h=F(),k&&k.c(),m=ct(),a(p,"class","flex items-center gap-2 px-4 py-2.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]"),a(p,"title","打开本地终端"),a(t,"class","flex items-center bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 overflow-x-auto"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800")},m(L,T){V(L,e,T),g(e,t),o.m(t,null),g(t,d),g(t,p),g(e,y),f[_].m(e,null),V(L,n,T),Fe(u,L,T),V(L,h,T),k&&k.m(L,T),V(L,m,T),w=!0,S||(v=se(p,"click",r[15]),S=!0)},p(L,T){c===(c=s(L))&&o?o.p(L,T):(o.d(1),o=c(L),o&&(o.c(),o.m(t,d)));let R=_;_=x(L),_===R?f[_].p(L,T):(ht(),De(f[R],1,1,()=>{f[R]=null}),dt(),i=f[_],i?i.p(L,T):(i=f[_]=l[_](L),i.c()),Ee(i,1),i.m(e,null));const O={};!b&&T[0]&4&&(b=!0,O.isOpen=L[2],ot(()=>b=!1)),u.$set(O),L[3]?k?k.p(L,T):(k=ei(L),k.c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null)},i(L){w||(Ee(i),Ee(u.$$.fragment,L),w=!0)},o(L){De(i),De(u.$$.fragment,L),w=!1},d(L){L&&(K(e),K(n),K(h),K(m)),o.d(),f[_].d(),We(u,L),k&&k.d(L),S=!1,v()}}}function wr(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}function ti(r){return btoa(wr(r))}function Lo(r,e,t){let d,p;vt(r,xt,M=>t(7,d=M)),vt(r,mt,M=>t(23,p=M));let y={},_=[],i=new Map,n=!1,u=null,b=!1,h="powershell";async function m(M){var Te;if(console.log("Connecting to:",M),!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectSSH:q,GetPassword:I,HasPassword:X,SavePassword:J}=window.wailsBindings;if(typeof q!="function"){console.error("ConnectSSH not available"),alert("SSH 连接功能不可用");return}let N="",ae="";if(M.auth_type==="key")ae=prompt(`连接到 ${M.name}
如果 SSH 密钥已加密，请输入 Passphrase（否则留空）：`)||"",N=M.key_path||"";else try{if(typeof X=="function"&&await X(M.id))N=await I(M.id),console.log("Using saved password");else if(N=prompt(`连接到 ${M.name}
请输入密码：`)||"",N&&confirm("是否保存密码以便下次自动连接？")&&typeof J=="function")try{await J(M.id,N),console.log("Password saved successfully")}catch(we){console.error("Failed to save password:",we)}}catch(me){console.error("Failed to get saved password:",me),N=prompt(`连接到 ${M.name}
请输入密码：`)||""}if(!N){console.log("Connection cancelled - no auth value provided");return}const Q=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("Connecting to server:",M.host,M.port,M.username,"auth_type:",M.auth_type);const ce={sessionId:Q,connection:M,connected:!1,createdAt:Date.now(),lastActivity:Date.now()};mt.update(me=>(me.set(Q,ce),me)),xt.set(Q),await sr(),await new Promise(me=>setTimeout(me,50));let he=(Te=y[Q])==null?void 0:Te.getSize();if(he||(he={cols:80,rows:24},console.warn("Terminal not ready, using default size:",he)),console.log("Subscribing to events for session:",Q),te(Q),await new Promise(me=>setTimeout(me,100)),!y[Q]){console.error("Terminal component not ready after delay");return}const Me=y[Q];if(!Me){console.error("Failed to get terminal reference for session:",Q);return}console.log("Terminal ready, attempting to connect...");const xe=M.auth_type==="key"?"SSH key":"password";Me.writeln(`正在连接 ${M.username}@${M.host}:${M.port} (${xe})...`),Me.writeln("");try{await q(Q,M.host,M.port,M.username,M.auth_type||"password",N,ae,he.cols,he.rows),ce.connected=!0,mt.update(me=>(me.set(Q,ce),me)),setTimeout(()=>{Me.focus()},100)}catch(me){console.error("Failed to connect:",me),Me&&Me.writeln(`\r
连接失败: ${me.message||me}`),await w(Q)}}async function w(M){const q=i.get(M);q&&(q(),i.delete(M)),delete y[M];const{CloseSSH:I}=window.wailsBindings||{};if(typeof I=="function")try{await I(M)}catch(J){console.error("Failed to close session:",J)}mt.update(J=>(J.delete(M),J));const X=Array.from(p.keys());d===M&&(X.length>0?xt.set(X[0]):xt.set(null))}function S(M){p.has(M)&&(xt.set(M),setTimeout(()=>{const q=y[M];if(q){q.focus();const I=q.getSize(),{ResizeSSH:X}=window.wailsBindings||{};typeof X=="function"&&X(M,I.cols,I.rows).catch(console.error)}},50))}function v(M,q){q.stopPropagation();const I=p.get(M);I&&(I.connected?(u=M,t(2,n=!0)):w(M))}function s(){u&&(w(u),u=null),t(2,n=!1)}function c(){u=null,t(2,n=!1)}function o(M,q){const I=p.get(M);I&&(I.tabName=q.trim(),mt.update(X=>(X.set(M,I),X)))}let l=null,f="";function x(M){const q=p.get(M);q&&(t(5,l=M),t(6,f=q.tabName||q.connection.name))}function C(){l&&f.trim()&&o(l,f.trim()),t(5,l=null),t(6,f="")}function E(){t(5,l=null),t(6,f="")}function k(M){M.key==="Enter"?C():M.key==="Escape"&&E()}async function L(){if(!window.wailsBindings){console.error("Wails bindings not loaded"),alert("Wails 绑定未加载，请使用 wails dev 运行");return}const{ConnectLocalShell:M,SendSSHData:q,ResizeSSH:I}=window.wailsBindings;if(navigator.platform.toLowerCase().includes("win")){t(3,b=!0);return}await T("")}async function T(M){var ae;const{ConnectLocalShell:q}=window.wailsBindings,I=`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,X={sessionId:I,connection:{name:"Local Shell",host:"localhost",port:0,username:""},connected:!1,createdAt:Date.now(),lastActivity:Date.now(),tabName:"Local",type:"local"};mt.update(Q=>(Q.set(I,X),Q)),xt.set(I),await sr(),await new Promise(Q=>setTimeout(Q,50));let J=(ae=y[I])==null?void 0:ae.getSize();if(J||(J={cols:80,rows:24},console.warn("Terminal not ready, using default size:",J)),console.log("Subscribing to local events for session:",I),A(I),await new Promise(Q=>setTimeout(Q,100)),!y[I]){console.error("Terminal component not ready after delay");return}const N=y[I];if(!N){console.error("Failed to get terminal reference for session:",I);return}console.log("Terminal ready, starting local shell..."),N.writeln(`正在启动本地终端${M?` (${M})`:""}...`),N.writeln("");try{await q(I,M,J.cols,J.rows),X.connected=!0,mt.update(Q=>(Q.set(I,X),Q)),setTimeout(()=>{N.focus()},100)}catch(Q){console.error("Failed to start local shell:",Q),N&&N.writeln(`\r
启动本地终端失败: ${Q.message||Q}`),await w(I)}}function R(){t(3,b=!1),T(h)}function O(){t(3,b=!1)}function A(M){const q=`local:output:${M}`,I=lr(q,X=>{const J=y[M];if(J){const N=atob(X),ae=new Uint8Array(N.length);for(let Q=0;Q<N.length;Q++)ae[Q]=N.charCodeAt(Q);J.write(ae)}});i.set(M,I)}function j(M,q){if(!p.has(M))return;const I=p.get(M),{SendSSHData:X,SendLocalShellData:J}=window.wailsBindings||{};I&&I.type==="local"?typeof J=="function"&&J(M,q).catch(N=>{console.error("Failed to send local shell data:",N)}):typeof X=="function"&&X(M,q).catch(N=>{console.error("Failed to send SSH data:",N)})}function Z(M,q){if(!p.has(M))return;const I=p.get(M),{SendSSHData:X,SendSSHDataBinary:J,SendLocalShellData:N,SendLocalShellDataBinary:ae}=window.wailsBindings||{};if(I&&I.type==="local"){if(typeof ae=="function"){const Q=ti(q);ae(M,Q).catch(ce=>{console.error("Failed to send local shell binary data:",ce)})}else if(typeof N=="function"){const Q=wr(q);N(M,Q).catch(ce=>{console.error("Failed to send local shell data:",ce)})}}else if(typeof J=="function"){const Q=ti(q);J(M,Q).catch(ce=>{console.error("Failed to send SSH binary data:",ce)})}else if(typeof X=="function"){const Q=wr(q);X(M,Q).catch(ce=>{console.error("Failed to send SSH data:",ce)})}}function ie(M,q,I){if(!p.has(M))return;const X=p.get(M),{ResizeSSH:J,ResizeLocalShell:N}=window.wailsBindings||{};X&&X.type==="local"?typeof N=="function"&&N(M,q,I).catch(ae=>{console.error("Failed to resize local terminal:",ae)}):typeof J=="function"&&J(M,q,I).catch(ae=>{console.error("Failed to resize SSH terminal:",ae)})}function te(M){const q=`ssh:output:${M}`,I=lr(q,X=>{const J=y[M];if(J){const N=atob(X),ae=new Uint8Array(N.length);for(let Q=0;Q<N.length;Q++)ae[Q]=N.charCodeAt(Q);J.write(ae)}});i.set(M,I)}cr(()=>{i.forEach(M=>{M()})}),Ht(async()=>{window.wailsBindings&&console.log("Wails bindings already loaded"),window.terminalRefs=y,window.sessionUnsubscribers||(window.sessionUnsubscribers=i),console.log("TerminalPanel mounted, subscribing to events for sessions:",_),await sr(),d&&y[d]&&setTimeout(()=>{y[d].focus()},100)});const Y=[[]];function B(){f=this.value,t(6,f)}const P=(M,q)=>v(M.sessionId,q),H=M=>S(M.sessionId),z=M=>x(M.sessionId),U=(M,q)=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),S(M.sessionId))};function G(M,q){Xe[M?"unshift":"push"](()=>{y[q.sessionId]=M,t(0,y)})}function $(M){n=M,t(2,n)}function ne(){h=this.__value,t(4,h)}function W(){h=this.__value,t(4,h)}return r.$$.update=()=>{r.$$.dirty[0]&8388608&&t(1,_=p?Array.from(p.values()):[]),r.$$.dirty[0]&1&&window.terminalRefs!==void 0&&(window.terminalRefs=y)},[y,_,n,b,h,l,f,d,S,v,s,c,x,C,k,L,R,O,j,Z,ie,m,te,p,B,P,H,z,U,G,$,ne,Y,W]}class Do extends $e{constructor(e){super(),Qe(this,e,Lo,Eo,Ze,{handleConnect:21,subscribeToOutput:22},null,[-1,-1])}get handleConnect(){return this.$$.ctx[21]}get subscribeToOutput(){return this.$$.ctx[22]}}function Mo(r){return window.go.main.App.AddConnection(r)}function Bo(r,e){return window.go.main.App.CalculateHash(r,e)}function _s(r){return window.go.main.App.CancelTransfer(r)}function To(r,e){return window.go.main.App.ChangeDirectory(r,e)}function Ao(r){return window.go.main.App.CloseSSH(r)}function Ro(r,e,t,d){return window.go.main.App.ConnectLocalShell(r,e,t,d)}function Oo(r,e,t,d,p,y,_,i,n){return window.go.main.App.ConnectSSH(r,e,t,d,p,y,_,i,n)}function Po(r,e){return window.go.main.App.CreateDirectory(r,e)}function Io(r,e){return window.go.main.App.DateTimeToTimestamp(r,e)}function Ho(r,e){return window.go.main.App.DateTimeToTimestampMs(r,e)}function Fo(r){return window.go.main.App.DecodeBase64(r)}function Wo(r,e,t,d){return window.go.main.App.DecryptText(r,e,t,d)}function zo(r,e){return window.go.main.App.DeleteFile(r,e)}function ps(r,e){return window.go.main.App.DeleteFiles(r,e)}function jo(r){return window.go.main.App.DeletePassword(r)}function Uo(r,e,t){return window.go.main.App.DownloadFile(r,e,t)}function gs(r,e,t){return window.go.main.App.DownloadFiles(r,e,t)}function No(r){return window.go.main.App.EncodeBase64(r)}function Ko(r,e,t,d){return window.go.main.App.EncryptText(r,e,t,d)}function Vo(r){return window.go.main.App.EscapeJSON(r)}function qo(r){return window.go.main.App.FormatJSON(r)}function Go(){return window.go.main.App.GenerateUUIDv4()}function Jo(r){return window.go.main.App.GetConnection(r)}function Xo(){return window.go.main.App.GetConnections()}function Yo(r){return window.go.main.App.GetCurrentPath(r)}function Zo(){return window.go.main.App.GetCurrentTimestamp()}function Qo(){return window.go.main.App.GetCurrentTimestampMs()}function $o(r,e){return window.go.main.App.GetFileInfo(r,e)}function ea(r){return window.go.main.App.GetMonitoringData(r)}function ta(r){return window.go.main.App.GetPassword(r)}function ra(){return window.go.main.App.GetSettings()}function ia(r){return window.go.main.App.GetTransferStatus(r)}function sa(r){return window.go.main.App.Greet(r)}function na(r){return window.go.main.App.HasPassword(r)}function ms(r,e){return window.go.main.App.ListFiles(r,e)}function oa(){return window.go.main.App.ListSSHSessions()}function aa(r){return window.go.main.App.MinifyJSON(r)}function la(r){return window.go.main.App.RemoveConnection(r)}function vs(r,e,t){return window.go.main.App.RenameFile(r,e,t)}function ca(r,e,t){return window.go.main.App.ResizeLocalShell(r,e,t)}function ha(r,e,t){return window.go.main.App.ResizeSSH(r,e,t)}function da(r,e){return window.go.main.App.SaveBinaryFile(r,e)}function ua(r,e){return window.go.main.App.SavePassword(r,e)}function bs(){return window.go.main.App.SelectDownloadDirectory()}function fa(){return window.go.main.App.SelectSSHKeyFile()}function ws(){return window.go.main.App.SelectUploadFiles()}function _a(r,e){return window.go.main.App.SendLocalShellData(r,e)}function pa(r,e){return window.go.main.App.SendLocalShellDataBinary(r,e)}function ga(r,e){return window.go.main.App.SendSSHData(r,e)}function ma(r,e){return window.go.main.App.SendSSHDataBinary(r,e)}function va(){return window.go.main.App.ShowAboutDialog()}function ba(r,e){return window.go.main.App.ShowErrorDialog(r,e)}function wa(r,e){return window.go.main.App.ShowMessageDialog(r,e)}function ya(r,e){return window.go.main.App.ShowQuestionDialog(r,e)}function Sa(r,e,t,d,p,y){return window.go.main.App.TestConnection(r,e,t,d,p,y)}function ka(r,e){return window.go.main.App.TimestampToDateTime(r,e)}function Ca(r,e){return window.go.main.App.TimestampToDateTimeMs(r,e)}function xa(r){return window.go.main.App.UpdateConnection(r)}function Ea(r){return window.go.main.App.UpdateSettings(r)}function La(r,e,t){return window.go.main.App.UploadFile(r,e,t)}function ys(r,e,t){return window.go.main.App.UploadFiles(r,e,t)}function Da(r){return window.go.main.App.ValidateJSON(r)}const Ma=Object.freeze(Object.defineProperty({__proto__:null,AddConnection:Mo,CalculateHash:Bo,CancelTransfer:_s,ChangeDirectory:To,CloseSSH:Ao,ConnectLocalShell:Ro,ConnectSSH:Oo,CreateDirectory:Po,DateTimeToTimestamp:Io,DateTimeToTimestampMs:Ho,DecodeBase64:Fo,DecryptText:Wo,DeleteFile:zo,DeleteFiles:ps,DeletePassword:jo,DownloadFile:Uo,DownloadFiles:gs,EncodeBase64:No,EncryptText:Ko,EscapeJSON:Vo,FormatJSON:qo,GenerateUUIDv4:Go,GetConnection:Jo,GetConnections:Xo,GetCurrentPath:Yo,GetCurrentTimestamp:Zo,GetCurrentTimestampMs:Qo,GetFileInfo:$o,GetMonitoringData:ea,GetPassword:ta,GetSettings:ra,GetTransferStatus:ia,Greet:sa,HasPassword:na,ListFiles:ms,ListSSHSessions:oa,MinifyJSON:aa,RemoveConnection:la,RenameFile:vs,ResizeLocalShell:ca,ResizeSSH:ha,SaveBinaryFile:da,SavePassword:ua,SelectDownloadDirectory:bs,SelectSSHKeyFile:fa,SelectUploadFiles:ws,SendLocalShellData:_a,SendLocalShellDataBinary:pa,SendSSHData:ga,SendSSHDataBinary:ma,ShowAboutDialog:va,ShowErrorDialog:ba,ShowMessageDialog:wa,ShowQuestionDialog:ya,TestConnection:Sa,TimestampToDateTime:ka,TimestampToDateTimeMs:Ca,UpdateConnection:xa,UpdateSettings:Ea,UploadFile:La,UploadFiles:ys,ValidateJSON:Da},Symbol.toStringTag,{value:"Module"}));function ri(r){let e,t;return{c(){e=D("p"),t=re(r[2]),a(e,"class","text-sm text-gray-700 dark:text-gray-300 leading-relaxed")},m(d,p){V(d,e,p),g(e,t)},p(d,p){p&4&&ue(t,d[2])},d(d){d&&K(e)}}}function Ba(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S=r[2]&&ri(r);return{c(){e=D("div"),S&&S.c(),t=F(),d=D("input"),p=F(),y=D("div"),_=D("button"),i=re(r[5]),n=F(),u=D("button"),b=re(r[4]),a(d,"type","text"),a(d,"placeholder",r[3]),a(d,"class","w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(_,"type","button"),a(_,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),a(u,"type","button"),u.disabled=h=!r[8].trim(),a(u,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),a(y,"class","flex gap-2 pt-2"),a(e,"class","space-y-4")},m(v,s){V(v,e,s),S&&S.m(e,null),g(e,t),g(e,d),r[13](d),ge(d,r[8]),g(e,p),g(e,y),g(y,_),g(_,i),g(y,n),g(y,u),g(u,b),m||(w=[se(d,"input",r[14]),se(d,"keydown",r[10]),se(_,"click",function(){St(r[6])&&r[6].apply(this,arguments)}),se(u,"click",r[9])],m=!0)},p(v,s){r=v,r[2]?S?S.p(r,s):(S=ri(r),S.c(),S.m(e,t)):S&&(S.d(1),S=null),s&8&&a(d,"placeholder",r[3]),s&256&&d.value!==r[8]&&ge(d,r[8]),s&32&&ue(i,r[5]),s&16&&ue(b,r[4]),s&256&&h!==(h=!r[8].trim())&&(u.disabled=h)},d(v){v&&K(e),S&&S.d(),r[13](null),m=!1,Be(w)}}}function Ta(r){let e,t,d;function p(_){r[15](_)}let y={onClose:r[6],title:r[1],size:"sm",$$slots:{default:[Ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(y.isOpen=r[0]),e=new hr({props:y}),Xe.push(()=>at(e,"isOpen",p)),{c(){je(e.$$.fragment)},m(_,i){Fe(e,_,i),d=!0},p(_,[i]){const n={};i&64&&(n.onClose=_[6]),i&2&&(n.title=_[1]),i&66044&&(n.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,n.isOpen=_[0],ot(()=>t=!1)),e.$set(n)},i(_){d||(Ee(e.$$.fragment,_),d=!0)},o(_){De(e.$$.fragment,_),d=!1},d(_){We(e,_)}}}function Aa(r,e,t){let{isOpen:d=!1}=e,{title:p=""}=e,{message:y=""}=e,{defaultValue:_=""}=e,{placeholder:i=""}=e,{confirmText:n="确定"}=e,{cancelText:u="取消"}=e,{onConfirm:b=()=>{}}=e,{onCancel:h=()=>{}}=e,m="",w;function S(){m.trim()&&b(m.trim())}function v(l){l.key==="Enter"&&S()}function s(l){Xe[l?"unshift":"push"](()=>{w=l,t(7,w)})}function c(){m=this.value,t(8,m),t(0,d),t(11,_)}function o(l){d=l,t(0,d)}return r.$$set=l=>{"isOpen"in l&&t(0,d=l.isOpen),"title"in l&&t(1,p=l.title),"message"in l&&t(2,y=l.message),"defaultValue"in l&&t(11,_=l.defaultValue),"placeholder"in l&&t(3,i=l.placeholder),"confirmText"in l&&t(4,n=l.confirmText),"cancelText"in l&&t(5,u=l.cancelText),"onConfirm"in l&&t(12,b=l.onConfirm),"onCancel"in l&&t(6,h=l.onCancel)},r.$$.update=()=>{r.$$.dirty&2049&&d&&t(8,m=_),r.$$.dirty&129&&d&&w&&setTimeout(()=>{w==null||w.focus(),w==null||w.select()},0)},[d,p,y,i,n,u,h,w,m,S,v,_,b,s,c,o]}class Ra extends $e{constructor(e){super(),Qe(this,e,Aa,Ta,Ze,{isOpen:0,title:1,message:2,defaultValue:11,placeholder:3,confirmText:4,cancelText:5,onConfirm:12,onCancel:6})}}const{Map:Ss}=es;function ii(r,e,t){const d=r.slice();return d[81]=e[t],d[83]=t,d}function si(r,e,t){const d=r.slice();return d[84]=e[t],d}function Oa(r){let e,t,d;function p(i,n){return i[0]==="/"?Ha:Ia}let y=p(r),_=y(r);return{c(){e=D("span"),_.c(),a(e,"class","flex-1 text-purple-600 dark:text-purple-400 font-medium cursor-text hover:bg-purple-100 dark:hover:bg-purple-900/30 px-2 py-1 rounded transition-colors"),a(e,"title","点击编辑路径")},m(i,n){V(i,e,n),_.m(e,null),t||(d=se(e,"click",r[41]),t=!0)},p(i,n){y===(y=p(i))&&_?_.p(i,n):(_.d(1),_=y(i),_&&(_.c(),_.m(e,null)))},d(i){i&&K(e),_.d(),t=!1,d()}}}function Pa(r){let e,t,d,p,y;return{c(){e=D("span"),e.textContent="/",t=F(),d=D("input"),a(e,"class","text-gray-400 dark:text-gray-500"),a(d,"type","text"),a(d,"class","flex-1 bg-white dark:bg-gray-800 border border-purple-300 dark:border-purple-600 rounded px-2 py-1 text-purple-600 dark:text-purple-400 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500")},m(_,i){V(_,e,i),V(_,t,i),V(_,d,i),ge(d,r[10]),p||(y=[se(d,"input",r[53]),se(d,"keydown",r[54]),se(d,"blur",r[42]),$i(focus.call(null,d))],p=!0)},p(_,i){i[0]&1024&&d.value!==_[10]&&ge(d,_[10])},d(_){_&&(K(e),K(t),K(d)),p=!1,Be(y)}}}function Ia(r){let e=r[0].split("/").filter(Boolean).join(" / ")+"",t;return{c(){t=re(e)},m(d,p){V(d,t,p)},p(d,p){p[0]&1&&e!==(e=d[0].split("/").filter(Boolean).join(" / ")+"")&&ue(t,e)},d(d){d&&K(t)}}}function Ha(r){let e;return{c(){e=re("/")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function ni(r){let e,t,d,p,y,_,i,n;return{c(){e=D("div"),t=D("input"),d=F(),p=D("button"),p.textContent="跳转",y=F(),_=D("button"),_.innerHTML='<svg class="w-3.5 h-3.5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',a(t,"type","text"),a(t,"placeholder","输入路径,如：/var/www/html"),a(t,"class","flex-1 px-3 py-2 text-xs bg-white dark:bg-gray-800 border border-purple-200 dark:border-purple-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"),a(p,"class","px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-lg transition-colors font-medium"),a(_,"class","p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"),a(_,"title","取消"),a(e,"class","mt-2 flex items-center gap-2")},m(u,b){V(u,e,b),g(e,t),ge(t,r[12]),g(e,d),g(e,p),g(e,y),g(e,_),i||(n=[se(t,"input",r[56]),se(t,"keydown",r[57]),$i(focus.call(null,t)),se(p,"click",r[44]),se(_,"click",r[58])],i=!0)},p(u,b){b[0]&4096&&t.value!==u[12]&&ge(t,u[12])},d(u){u&&K(e),i=!1,Be(n)}}}function oi(r){let e,t,d,p,y,_,i,n,u,b=r[6].length+"",h,m,w,S,v;function s(C,E){return C[7]?Wa:Fa}let c=s(r),o=c(r);function l(C,E){return C[7]?ja:za}let f=l(r),x=f(r);return{c(){e=D("div"),t=D("div"),d=D("div"),p=D("button"),o.c(),_=F(),i=D("span"),i.textContent="上传进度",n=F(),u=D("span"),h=re(b),m=re(" 个任务"),w=F(),x.c(),a(p,"class","p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"),a(p,"title",y=r[7]?"展开":"折叠"),a(d,"class","flex items-center gap-2"),a(t,"class","flex items-center justify-between text-[11px] text-gray-600 dark:text-gray-400 mb-2"),a(e,"class","mx-3 mt-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40 p-3")},m(C,E){V(C,e,E),g(e,t),g(t,d),g(d,p),o.m(p,null),g(d,_),g(d,i),g(t,n),g(t,u),g(u,h),g(u,m),g(e,w),x.m(e,null),S||(v=se(p,"click",r[59]),S=!0)},p(C,E){c!==(c=s(C))&&(o.d(1),o=c(C),o&&(o.c(),o.m(p,null))),E[0]&128&&y!==(y=C[7]?"展开":"折叠")&&a(p,"title",y),E[0]&64&&b!==(b=C[6].length+"")&&ue(h,b),f===(f=l(C))&&x?x.p(C,E):(x.d(1),x=f(C),x&&(x.c(),x.m(e,null)))},d(C){C&&K(e),o.d(),x.d(),S=!1,v()}}}function Fa(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M5 12h14"),a(e,"class","w-3 h-3"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function Wa(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M12 5v14m7-7H5"),a(e,"class","w-3 h-3"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function za(r){let e,t=[],d=new Ss,p=qe(r[6]);const y=_=>_[84].id;for(let _=0;_<p.length;_+=1){let i=si(r,p,_),n=y(i);d.set(n,t[_]=ai(n,i))}return{c(){e=D("div");for(let _=0;_<t.length;_+=1)t[_].c();a(e,"class","space-y-2 max-h-40 overflow-y-auto")},m(_,i){V(_,e,i);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(_,i){i[0]&2097216&&(p=qe(_[6]),t=Ft(t,i,y,1,_,p,d,e,Gt,ai,null,si))},d(_){_&&K(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ja(r){let e,t,d,p,y;return{c(){e=D("div"),t=D("div"),d=D("div"),p=F(),y=D("span"),y.textContent=`${Math.round(r[20]())}%`,a(d,"class","h-full bg-blue-500 transition-all"),a(d,"style",`width: ${Math.min(100,Math.max(0,r[20]()))}%`),a(t,"class","flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),a(y,"class","text-[10px] text-gray-500 dark:text-gray-400"),a(e,"class","flex items-center gap-2")},m(_,i){V(_,e,i),g(e,t),g(t,d),g(e,p),g(e,y)},p:Se,d(_){_&&K(e)}}}function Ua(r){let e,t=Math.round(qt(r[84]))+"",d,p;return{c(){e=D("span"),d=re(t),p=re("%")},m(y,_){V(y,e,_),g(e,d),g(e,p)},p(y,_){_[0]&64&&t!==(t=Math.round(qt(y[84]))+"")&&ue(d,t)},d(y){y&&K(e)}}}function Na(r){let e;return{c(){e=D("span"),e.textContent="完成",a(e,"class","text-green-500")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function Ka(r){let e;return{c(){e=D("span"),e.textContent="失败",a(e,"class","text-red-500")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function Va(r){let e;return{c(){e=D("span"),e.textContent="完成"},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function qa(r){let e,t=(r[84].error||"上传失败")+"",d,p;return{c(){e=D("span"),d=re(t),a(e,"class","text-red-500 truncate max-w-[140px]"),a(e,"title",p=r[84].error)},m(y,_){V(y,e,_),g(e,d)},p(y,_){_[0]&64&&t!==(t=(y[84].error||"上传失败")+"")&&ue(d,t),_[0]&64&&p!==(p=y[84].error)&&a(e,"title",p)},d(y){y&&K(e)}}}function Ga(r){let e,t=hi(r[84].speed)+"",d;return{c(){e=D("span"),d=re(t)},m(p,y){V(p,e,y),g(e,d)},p(p,y){y[0]&64&&t!==(t=hi(p[84].speed)+"")&&ue(d,t)},d(p){p&&K(e)}}}function ai(r,e){let t,d,p,y=e[84].filename+"",_,i,n,u,b,h,m,w,S,v,s,c,o,l=Lt(e[84].bytesSent)+"",f,x,C=Lt(e[84].totalBytes)+"",E,k,L,T,R;function O(B,P){return B[84].status==="failed"?Ka:B[84].status==="completed"?Na:Ua}let A=O(e),j=A(e);function Z(){return e[60](e[84])}function ie(B,P){return B[84].status==="running"?Ga:B[84].status==="failed"?qa:Va}let te=ie(e),Y=te(e);return{key:r,first:null,c(){t=D("div"),d=D("div"),p=D("span"),_=re(y),n=F(),u=D("div"),j.c(),b=F(),h=D("button"),h.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m=F(),w=D("div"),S=D("div"),s=F(),c=D("div"),o=D("span"),f=re(l),x=re(" / "),E=re(C),k=F(),Y.c(),L=F(),a(p,"class","truncate max-w-[180px]"),a(p,"title",i=e[84].filename),a(h,"class","p-0.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400"),a(h,"title","删除任务"),a(u,"class","flex items-center gap-2"),a(d,"class","flex items-center justify-between text-[11px] text-gray-700 dark:text-gray-300 mb-1"),a(S,"class","h-full bg-blue-500 transition-all"),a(S,"style",v=`width: ${Math.min(100,Math.max(0,qt(e[84])))}%`),a(w,"class","h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),a(c,"class","flex items-center justify-between text-[10px] text-gray-500 dark:text-gray-400 mt-1"),a(t,"class","rounded-md bg-white/80 dark:bg-gray-800/60 border border-gray-100 dark:border-gray-700 px-2.5 py-2"),this.first=t},m(B,P){V(B,t,P),g(t,d),g(d,p),g(p,_),g(d,n),g(d,u),j.m(u,null),g(u,b),g(u,h),g(t,m),g(t,w),g(w,S),g(t,s),g(t,c),g(c,o),g(o,f),g(o,x),g(o,E),g(c,k),Y.m(c,null),g(t,L),T||(R=se(h,"click",Z),T=!0)},p(B,P){e=B,P[0]&64&&y!==(y=e[84].filename+"")&&ue(_,y),P[0]&64&&i!==(i=e[84].filename)&&a(p,"title",i),A===(A=O(e))&&j?j.p(e,P):(j.d(1),j=A(e),j&&(j.c(),j.m(u,b))),P[0]&64&&v!==(v=`width: ${Math.min(100,Math.max(0,qt(e[84])))}%`)&&a(S,"style",v),P[0]&64&&l!==(l=Lt(e[84].bytesSent)+"")&&ue(f,l),P[0]&64&&C!==(C=Lt(e[84].totalBytes)+"")&&ue(E,C),te===(te=ie(e))&&Y?Y.p(e,P):(Y.d(1),Y=te(e),Y&&(Y.c(),Y.m(c,null)))},d(B){B&&K(t),j.d(),Y.d(),T=!1,R()}}}function Ja(r){let e=[],t=new Ss,d,p=qe(r[19]);const y=_=>_[81].path;for(let _=0;_<p.length;_+=1){let i=ii(r,p,_),n=y(i);t.set(n,e[_]=li(n,i))}return{c(){for(let _=0;_<e.length;_+=1)e[_].c();d=ct()},m(_,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(_,i);V(_,d,i)},p(_,i){i[0]&1007157284|i[1]&256&&(p=qe(_[19]),e=Ft(e,i,y,1,_,p,t,d.parentNode,Gt,li,d,ii))},d(_){_&&K(d);for(let i=0;i<e.length;i+=1)e[i].d(_)}}}function Xa(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持文件管理</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">文件管理仅适用于 SSH 远程连接</div>',a(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function Ya(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="w-8 h-8 opacity-50" fill="currentColor" viewBox="0 0 24 24"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <span>目录为空</span>',a(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function Za(r){let e,t,d,p,y,_,i,n,u,b;return{c(){e=D("div"),t=oe("svg"),d=oe("path"),p=F(),y=D("span"),_=re(r[4]),i=F(),n=D("button"),n.textContent="重试",a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),a(t,"class","w-6 h-6"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),a(y,"class","text-center px-4"),a(n,"class","text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"),a(e,"class","flex flex-col items-center justify-center h-40 text-red-500 dark:text-red-400 gap-2")},m(h,m){V(h,e,m),g(e,t),g(t,d),g(e,p),g(e,y),g(y,_),g(e,i),g(e,n),u||(b=se(n,"click",r[24]),u=!0)},p(h,m){m[0]&16&&ue(_,h[4])},d(h){h&&K(e),u=!1,b()}}}function Qa(r){let e;return{c(){e=D("div"),e.innerHTML='<svg class="animate-spin w-6 h-6" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>加载中...</span>',a(e,"class","flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function $a(r){let e,t,d,p,y,_,i,n=r[81].name+"",u,b,h,m,w=Lt(r[81].size)+"",S,v,s,c,o,l=r[81].modified+"",f,x,C,E=r[81].mode+"",k;return{c(){e=D("div"),t=F(),d=oe("svg"),p=oe("path"),y=F(),_=D("div"),i=D("div"),u=re(n),b=F(),h=D("div"),m=D("span"),S=re(w),v=F(),s=D("span"),s.textContent="•",c=F(),o=D("span"),f=re(l),x=F(),C=D("span"),k=re(E),a(e,"class","w-3"),a(p,"stroke-linecap","round"),a(p,"stroke-linejoin","round"),a(p,"stroke-width","2"),a(p,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),a(d,"class","w-3.5 h-3.5 text-blue-500 flex-shrink-0"),a(d,"fill","none"),a(d,"stroke","currentColor"),a(d,"viewBox","0 0 24 24"),a(i,"class","text-gray-900 dark:text-white font-medium truncate"),a(h,"class","text-gray-500 dark:text-gray-400 flex items-center gap-2"),a(_,"class","flex-1 min-w-0"),a(C,"class","text-gray-400 dark:text-gray-500 font-mono text-[10px]")},m(L,T){V(L,e,T),V(L,t,T),V(L,d,T),g(d,p),V(L,y,T),V(L,_,T),g(_,i),g(i,u),g(_,b),g(_,h),g(h,m),g(m,S),g(h,v),g(h,s),g(h,c),g(h,o),g(o,f),V(L,x,T),V(L,C,T),g(C,k)},p(L,T){T[0]&524288&&n!==(n=L[81].name+"")&&ue(u,n),T[0]&524288&&w!==(w=Lt(L[81].size)+"")&&ue(S,w),T[0]&524288&&l!==(l=L[81].modified+"")&&ue(f,l),T[0]&524288&&E!==(E=L[81].mode+"")&&ue(k,E)},d(L){L&&(K(e),K(t),K(d),K(y),K(_),K(x),K(C))}}}function el(r){let e,t,d,p,y,_,i,n=r[81].name+"",u;function b(w,S){return S[0]&524292&&(e=null),e==null&&(e=!!w[2].has(w[81].path)),e?il:rl}let h=b(r,[-1,-1,-1]),m=h(r);return{c(){m.c(),t=F(),d=oe("svg"),p=oe("path"),y=F(),_=D("div"),i=D("div"),u=re(n),a(p,"d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"),a(d,"class","w-3.5 h-3.5 text-amber-500 flex-shrink-0"),a(d,"fill","currentColor"),a(d,"viewBox","0 0 24 24"),a(i,"class","text-gray-900 dark:text-white font-medium truncate"),a(_,"class","flex-1 min-w-0")},m(w,S){m.m(w,S),V(w,t,S),V(w,d,S),g(d,p),V(w,y,S),V(w,_,S),g(_,i),g(i,u)},p(w,S){h!==(h=b(w,S))&&(m.d(1),m=h(w),m&&(m.c(),m.m(t.parentNode,t))),S[0]&524288&&n!==(n=w[81].name+"")&&ue(u,n)},d(w){w&&(K(t),K(d),K(y),K(_)),m.d(w)}}}function tl(r){let e,t,d,p,y,_=r[81].name+"",i,n,u;return{c(){e=oe("svg"),t=oe("path"),d=F(),p=D("div"),y=D("div"),i=re(_),n=F(),u=D("div"),u.textContent="返回上一层",a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M10 19l-7-7m0 0l7-7m-7 7h18"),a(e,"class","w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24"),a(y,"class","text-gray-600 dark:text-gray-300"),a(u,"class","text-gray-400 dark:text-gray-500 text-[10px]"),a(p,"class","flex-1 min-w-0")},m(b,h){V(b,e,h),g(e,t),V(b,d,h),V(b,p,h),g(p,y),g(y,i),g(p,n),g(p,u)},p(b,h){h[0]&524288&&_!==(_=b[81].name+"")&&ue(i,_)},d(b){b&&(K(e),K(d),K(p))}}}function rl(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M9 5l7 7-7 7"),a(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function il(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M19 9l-7 7-7-7"),a(e,"class","w-3 h-3 text-gray-500 dark:text-gray-400 flex-shrink-0"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function li(r,e){let t,d,p,y,_;function i(w,S){return w[81].is_parent?tl:w[81].is_dir?el:$a}let n=i(e),u=n(e);function b(){return e[61](e[81])}function h(){return e[62](e[81])}function m(...w){return e[63](e[81],...w)}return{key:r,first:null,c(){t=D("div"),u.c(),d=F(),a(t,"class",p="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[81].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[5].has(e[81].path)&&!e[81].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20")),this.first=t},m(w,S){V(w,t,S),u.m(t,null),g(t,d),y||(_=[se(t,"click",b),se(t,"dblclick",h),se(t,"contextmenu",m)],y=!0)},p(w,S){e=w,n===(n=i(e))&&u?u.p(e,S):(u.d(1),u=n(e),u&&(u.c(),u.m(t,d))),S[0]&524320&&p!==(p="group flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors mx-2 my-0.5 rounded-lg "+(e[81].is_parent?"text-gray-500 dark:text-gray-400 italic":"")+" "+(e[5].has(e[81].path)&&!e[81].is_parent?"bg-purple-100 dark:bg-purple-900/40":"hover:bg-purple-50 dark:hover:bg-purple-900/20"))&&a(t,"class",p)},d(w){w&&K(t),u.d(),y=!1,Be(_)}}}function ci(r){let e,t,d,p,y,_,i,n,u,b,h;return{c(){var m;e=D("div"),t=D("button"),d=re("下载"),y=F(),_=D("button"),_.textContent="重命名",i=F(),n=D("button"),n.textContent="删除",a(t,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),t.disabled=p=(m=r[8].file)==null?void 0:m.is_dir,a(_,"class","w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"),a(n,"class","w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400"),a(e,"class","fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg text-xs py-1 min-w-[140px]"),a(e,"style",u=`left: ${r[8].x}px; top: ${r[8].y}px;`)},m(m,w){V(m,e,w),g(e,t),g(t,d),g(e,y),g(e,_),g(e,i),g(e,n),b||(h=[se(t,"click",r[35]),se(_,"click",r[36]),se(n,"click",r[34])],b=!0)},p(m,w){var S;w[0]&256&&p!==(p=(S=m[8].file)==null?void 0:S.is_dir)&&(t.disabled=p),w[0]&256&&u!==(u=`left: ${m[8].x}px; top: ${m[8].y}px;`)&&a(e,"style",u)},d(m){m&&K(e),b=!1,Be(h)}}}function sl(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,C,E,k,L,T,R,O,A,j,Z,ie,te,Y,B,P,H,z,U,G,$,ne,W,M;function q(de,fe){return de[9]?Pa:Oa}let I=q(r),X=I(r),J=r[11]&&ni(r),N=r[6].length>0&&oi(r);function ae(de,fe){return de[3]?Qa:de[4]?Za:de[19].length===0?Ya:de[1]?Xa:Ja}let Q=ae(r),ce=Q(r),he=r[8].open&&ci(r);function Me(de){r[64](de)}let xe={title:"删除文件",message:r[14],type:"danger",confirmText:"删除",cancelText:"取消",onConfirm:r[32],onCancel:r[33]};r[13]!==void 0&&(xe.isOpen=r[13]),Y=new br({props:xe}),Xe.push(()=>at(Y,"isOpen",Me));function Te(de){r[65](de)}let me={title:"取消上传",message:"上传未完成，是否终止上传？",type:"warning",confirmText:"终止上传",cancelText:"继续上传",onConfirm:r[22],onCancel:r[23]};r[15]!==void 0&&(me.isOpen=r[15]),H=new br({props:me}),Xe.push(()=>at(H,"isOpen",Te));function we(de){r[66](de)}let ke={title:r[17],message:"请输入新的文件/文件夹名称",placeholder:"新名称",defaultValue:r[18],confirmText:"重命名",cancelText:"取消",onConfirm:r[37],onCancel:r[38]};return r[16]!==void 0&&(ke.isOpen=r[16]),G=new Ra({props:ke}),Xe.push(()=>at(G,"isOpen",we)),{c(){e=D("div"),t=D("div"),d=D("div"),p=D("h3"),p.textContent="文件管理",y=F(),_=D("div"),i=D("button"),n=oe("svg"),u=oe("path"),b=F(),h=D("button"),m=oe("svg"),w=oe("path"),S=F(),v=D("button"),v.innerHTML='<svg class="w-4 h-4 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>',s=F(),c=D("button"),o=oe("svg"),l=oe("path"),x=F(),C=D("div"),E=D("div"),k=D("button"),k.innerHTML='<svg class="w-3 h-3 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',L=F(),X.c(),T=F(),R=D("button"),R.innerHTML='<svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',O=F(),J&&J.c(),A=F(),N&&N.c(),j=F(),Z=D("div"),ce.c(),ie=F(),he&&he.c(),te=F(),je(Y.$$.fragment),P=F(),je(H.$$.fragment),U=F(),je(G.$$.fragment),a(p,"class","text-sm font-semibold text-gray-900 dark:text-white"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),a(n,"class","w-3.5 h-3.5 text-gray-600 dark:text-gray-400"),a(n,"fill","none"),a(n,"stroke","currentColor"),a(n,"viewBox","0 0 24 24"),i.disabled=r[1],a(i,"class","p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(i,"title","刷新"),a(w,"stroke-linecap","round"),a(w,"stroke-linejoin","round"),a(w,"stroke-width","2"),a(w,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),a(m,"class","w-4 h-4 text-blue-500 dark:text-blue-400"),a(m,"fill","none"),a(m,"stroke","currentColor"),a(m,"viewBox","0 0 24 24"),h.disabled=r[1],a(h,"class","p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(h,"title","上传到服务器"),a(v,"class","p-1.5 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(v,"title","下载到本地"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"stroke-width","2"),a(l,"d","M6 7h12M9 7V5a1 1 0 011-1h4a1 1 0 011 1v2m-7 0v12a1 1 0 001 1h6a1 1 0 001-1V7"),a(o,"class","w-4 h-4 text-red-500 dark:text-red-400"),a(o,"fill","none"),a(o,"stroke","currentColor"),a(o,"viewBox","0 0 24 24"),c.disabled=f=r[1]||r[5].size===0,a(c,"class","p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(c,"title","删除选中"),a(_,"class","flex items-center gap-1"),a(d,"class","flex items-center justify-between mb-2"),a(k,"class","p-0.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),a(k,"title","根目录"),a(E,"class","flex-1 flex items-center gap-1 text-xs bg-gray-50 dark:bg-gray-700 rounded-lg px-3 py-2"),a(R,"class","p-2 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors"),a(R,"title","跳转到指定目录"),a(C,"class","flex items-center gap-2"),a(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),a(Z,"class","flex-1 overflow-y-auto scrollbar-thin text-xs"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700")},m(de,fe){V(de,e,fe),g(e,t),g(t,d),g(d,p),g(d,y),g(d,_),g(_,i),g(i,n),g(n,u),g(_,b),g(_,h),g(h,m),g(m,w),g(_,S),g(_,v),g(_,s),g(_,c),g(c,o),g(o,l),g(t,x),g(t,C),g(C,E),g(E,k),g(E,L),X.m(E,null),g(C,T),g(C,R),g(t,O),J&&J.m(t,null),g(e,A),N&&N.m(e,null),g(e,j),g(e,Z),ce.m(Z,null),g(e,ie),he&&he.m(e,null),g(e,te),Fe(Y,e,null),g(e,P),Fe(H,e,null),g(e,U),Fe(G,e,null),ne=!0,W||(M=[se(i,"click",r[24]),se(h,"click",r[25]),se(c,"click",r[31]),se(k,"click",r[52]),se(R,"click",r[55]),se(Z,"click",r[30])],W=!0)},p(de,fe){(!ne||fe[0]&2)&&(i.disabled=de[1]),(!ne||fe[0]&2)&&(h.disabled=de[1]),(!ne||fe[0]&34&&f!==(f=de[1]||de[5].size===0))&&(c.disabled=f),I===(I=q(de))&&X?X.p(de,fe):(X.d(1),X=I(de),X&&(X.c(),X.m(E,null))),de[11]?J?J.p(de,fe):(J=ni(de),J.c(),J.m(t,null)):J&&(J.d(1),J=null),de[6].length>0?N?N.p(de,fe):(N=oi(de),N.c(),N.m(e,j)):N&&(N.d(1),N=null),Q===(Q=ae(de))&&ce?ce.p(de,fe):(ce.d(1),ce=Q(de),ce&&(ce.c(),ce.m(Z,null))),de[8].open?he?he.p(de,fe):(he=ci(de),he.c(),he.m(e,te)):he&&(he.d(1),he=null);const He={};fe[0]&16384&&(He.message=de[14]),!B&&fe[0]&8192&&(B=!0,He.isOpen=de[13],ot(()=>B=!1)),Y.$set(He);const Ge={};!z&&fe[0]&32768&&(z=!0,Ge.isOpen=de[15],ot(()=>z=!1)),H.$set(Ge);const ze={};fe[0]&131072&&(ze.title=de[17]),fe[0]&262144&&(ze.defaultValue=de[18]),!$&&fe[0]&65536&&($=!0,ze.isOpen=de[16],ot(()=>$=!1)),G.$set(ze)},i(de){ne||(Ee(Y.$$.fragment,de),Ee(H.$$.fragment,de),Ee(G.$$.fragment,de),ne=!0)},o(de){De(Y.$$.fragment,de),De(H.$$.fragment,de),De(G.$$.fragment,de),ne=!1},d(de){de&&K(e),X.d(),J&&J.d(),N&&N.d(),ce.d(),he&&he.d(),We(Y),We(H),We(G),W=!1,Be(M)}}}function nl(r){return!r||r.length===0?[]:[...r].sort((e,t)=>e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase()))}function Lt(r){if(!r)return"0 B";const e=["B","KB","MB","GB"];let t=0;for(;r>=1024&&t<e.length-1;)r/=1024,t++;return`${r.toFixed(1)} ${e[t]}`}function hi(r){return r?`${Lt(r)}/s`:"0 B/s"}function qt(r){return r?r.totalBytes?r.bytesSent/r.totalBytes*100:r.percentage||0:0}function ol(r,e,t){let d,p,y,_,i,n,u,b;vt(r,mt,ee=>t(50,u=ee)),vt(r,xt,ee=>t(51,b=ee));let h=new Map,m=new Set([]),w=[],S=!1,v=null,s=new Set,c=[],o=[],l=!1,f={open:!1,x:0,y:0,file:null},x=!1,C="",E=!1,k="",L=!1,T="",R=[],O=!1,A=null,j=!1,Z="",ie="",te=null,Y="/";function B(ee){return ee&&h.get(ee)||"/"}function P(ee,_e){if(!ee)return;const Ce=new Map(h);Ce.set(ee,_e),t(45,h=Ce)}async function H(ee){if(!(!b||!p)&&!y){t(3,S=!0),t(4,v=null);try{const _e=await ms(b,ee);t(46,w=_e||[]),P(b,ee),t(0,Y=ee)}catch(_e){console.error("Failed to load directory:",_e),t(4,v=_e.message||"加载目录失败")}finally{t(3,S=!1)}}}function z(){if(o.length===0)return 0;let ee=0,_e=0;return o.forEach(Oe=>{const pe=Oe.totalBytes||0,Ae=Oe.bytesSent||0;ee+=pe,_e+=Ae}),ee>0?_e/ee*100:o.reduce((Oe,pe)=>Oe+qt(pe),0)/o.length}async function U(ee){ee&&(ee.status==="running"?(A=ee,t(15,O=!0)):W(ee.id))}async function G(){t(15,O=!1);const ee=A;if(A=null,ee)try{await _s(ee.id)}catch(_e){console.error("Cancel transfer failed:",_e)}W(ee.id)}function $(){t(15,O=!1),A=null}function ne(ee,_e){const Ce=_e||ee.transfer_id||ee.transferId;if(!Ce)return;const Oe=ee.filename||ee.fileName||"unknown",pe=ee.bytes_sent??ee.bytesSent??0,Ae=ee.total_bytes??ee.totalBytes??0,Mt=ee.percentage??0,zt=ee.speed??0,Jt=ee.status||"running",kt=ee.error||"",Bt=o.findIndex(wt=>wt.id===Ce),jt={id:Ce,filename:Oe,bytesSent:pe,totalBytes:Ae,percentage:Mt,speed:zt,status:Jt,error:kt};if(Bt===-1){t(6,o=[jt,...o]);return}t(6,o=o.map(wt=>wt.id===Ce?jt:wt))}function W(ee){t(6,o=o.filter(_e=>_e.id!==ee))}async function M(){await H(Y)}async function q(){if(!(!b||!p||y))try{const ee=await ws();if(!ee||ee.length===0)return;(await ys(b,ee,Y)).forEach(Ce=>de(Ce,"upload")),setTimeout(()=>H(Y),2e3)}catch(ee){console.error("Upload failed:",ee),t(4,v=ee.message||"上传失败")}}async function I(ee){if(!(!b||!p||y||ee.is_dir))try{const _e=await bs();if(!_e)return;(await gs(b,[ee.path],_e)).forEach(Oe=>de(Oe,"download"))}catch(_e){console.error("Download failed:",_e),t(4,v=_e.message||"下载失败")}}function X(ee){!ee||ee.is_parent||t(5,s=new Set([ee.path]))}function J(ee){!ee||ee.is_parent||X(ee)}function N(ee){!ee||!ee.is_parent||fe(ee.path)}function ae(ee,_e){_e!=null&&_e.is_parent||(ee.preventDefault(),X(_e),t(8,f={open:!0,x:ee.clientX,y:ee.clientY,file:_e}))}function Q(){f.open&&t(8,f={...f,open:!1})}async function ce(){if(!b||!p||y||s.size===0)return;R=Array.from(s);const ee=R.length;t(14,T=ee===1?"确定要删除选中的 1 个文件/文件夹吗？":`确定要删除选中的 ${ee} 个文件/文件夹吗？`),t(13,L=!0)}async function he(){t(13,L=!1);try{await ps(b,R),t(5,s=new Set),R=[],await H(Y)}catch(ee){console.error("Delete failed:",ee),t(4,v=ee.message||"删除失败")}}function Me(){t(13,L=!1),R=[]}async function xe(){const ee=f.file;ee&&(Q(),R=[ee.path],t(14,T=`确定要删除 "${ee.name}" 吗？`),t(13,L=!0))}async function Te(){const ee=f.file;Q(),ee&&!ee.is_dir&&await I(ee)}async function me(){const ee=f.file;Q(),ee&&(te=ee,t(17,Z="重命名"),t(18,ie=ee.name),t(16,j=!0))}async function we(ee){t(16,j=!1);const _e=te;if(te=null,!(!_e||!ee||ee.trim()===_e.name))try{const Oe=`${Y.endsWith("/")?Y:`${Y}/`}${ee.trim()}`;await vs(b,_e.path,Oe),await H(Y)}catch(Ce){console.error("Rename failed:",Ce),t(4,v=Ce.message||"重命名失败")}}function ke(){t(16,j=!1),te=null}function de(ee,_e){const Ce=`sftp:progress:${ee}`,Oe=lr(Ce,pe=>{_e==="upload"&&ne(pe,ee),(pe.status==="completed"||pe.status==="failed")&&setTimeout(()=>{_e==="upload"&&W(ee)},3e3)});c.push(Oe)}function fe(ee){H(ee)}function He(ee){if(ee===-1)fe("/");else{const _e="/"+n.slice(0,ee+1).join("/");fe(_e)}}function Ge(){t(10,C=Y),t(9,x=!0)}function ze(){C.trim()&&fe(C.trim()),t(9,x=!1)}function Ue(){t(9,x=!1),t(10,C="")}function Pe(){k.trim()&&(fe(k.trim()),t(11,E=!1),t(12,k=""))}Ht(()=>{}),cr(()=>{c.forEach(ee=>ee())});const Re=()=>He(-1);function ye(){C=this.value,t(10,C)}const rt=ee=>{ee.key==="Enter"?ze():ee.key==="Escape"&&Ue()},Ie=()=>t(11,E=!E);function Ne(){k=this.value,t(12,k)}const ft=ee=>{ee.key==="Enter"?Pe():ee.key==="Escape"&&(t(11,E=!1),t(12,k=""))},it=()=>{t(11,E=!1),t(12,k="")},Ye=()=>t(7,l=!l),lt=ee=>U(ee),Je=ee=>ee.is_parent?N(ee):J(ee),et=ee=>{ee.is_dir&&!ee.is_parent?fe(ee.path):ee.is_dir||I(ee)},nt=(ee,_e)=>ae(_e,ee);function le(ee){L=ee,t(13,L)}function ve(ee){O=ee,t(15,O)}function Ke(ee){j=ee,t(16,j)}return r.$$.update=()=>{if(r.$$.dirty[1]&1572864&&t(49,d=b?u.get(b):null),r.$$.dirty[1]&262144&&t(48,p=(d==null?void 0:d.connected)||!1),r.$$.dirty[1]&262144&&t(1,y=(d==null?void 0:d.type)==="local"),r.$$.dirty[0]&2|r.$$.dirty[1]&131072&&t(47,_=p&&!y),r.$$.dirty[0]&1|r.$$.dirty[1]&1048576)if(b){const ee=B(b);ee&&ee!==Y&&t(0,Y=ee)}else t(0,Y="/");if(r.$$.dirty[0]&1|r.$$.dirty[1]&32768&&t(19,i=(()=>{const ee=nl(w);return Y==="/"?ee:[{name:"..",path:Y.split("/").filter(Boolean).slice(0,-1).join("/")||"/",is_dir:!0,is_parent:!0},...ee]})()),r.$$.dirty[0]&1&&(n=Y.split("/").filter(ee=>ee)),r.$$.dirty[0]&1|r.$$.dirty[1]&1114112&&b&&_&&H(Y),r.$$.dirty[1]&540672&&u){const ee=new Set(u.keys()),_e=new Map(h);for(const Ce of _e.keys())ee.has(Ce)||_e.delete(Ce);t(45,h=_e)}},[Y,y,m,S,v,s,o,l,f,x,C,E,k,L,T,O,j,Z,ie,i,z,U,G,$,M,q,I,J,N,ae,Q,ce,he,Me,xe,Te,me,we,ke,fe,He,Ge,ze,Ue,Pe,h,w,_,p,d,u,b,Re,ye,rt,Ie,Ne,ft,it,Ye,lt,Je,et,nt,le,ve,Ke]}class al extends $e{constructor(e){super(),Qe(this,e,ol,sl,Ze,{},null,[-1,-1,-1])}}function di(r,e,t){const d=r.slice();return d[19]=e[t],d[21]=t,d}function ll(r){let e;return{c(){e=re("请先连接到服务器")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function cl(r){let e;return{c(){e=re("实时数据获取中...")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function hl(r){let e;return{c(){e=re("本地终端不支持服务器监控")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function ui(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="flex flex-col items-center justify-center h-40 text-gray-500 dark:text-gray-400 gap-2"><svg class="w-8 h-8 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2 2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-center px-4">本地终端不支持服务器监控</span> <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">服务器监控功能仅适用于 SSH 远程连接</div></div>',a(e,"class","p-3 space-y-3")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function dl(r){let e;return{c(){e=D("div"),e.textContent="等待数据...",a(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function ul(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s;return{c(){e=oe("svg"),t=oe("defs"),d=oe("linearGradient"),p=oe("stop"),y=oe("stop"),_=oe("line"),i=oe("line"),n=oe("line"),u=oe("path"),h=oe("path"),w=F(),S=D("div"),S.textContent="100%",v=F(),s=D("div"),s.textContent="0%",a(p,"offset","0%"),be(p,"stop-color","rgb(139, 92, 246)"),be(p,"stop-opacity","0.3"),a(y,"offset","100%"),be(y,"stop-color","rgb(139, 92, 246)"),be(y,"stop-opacity","0.05"),a(d,"id","cpuGradient"),a(d,"x1","0%"),a(d,"y1","0%"),a(d,"x2","0%"),a(d,"y2","100%"),a(_,"x1","0"),a(_,"y1","25%"),a(_,"x2","100%"),a(_,"y2","25%"),a(_,"stroke","currentColor"),a(_,"stroke-width","0.5"),a(_,"class","text-gray-200 dark:text-gray-700"),a(i,"x1","0"),a(i,"y1","50%"),a(i,"x2","100%"),a(i,"y2","50%"),a(i,"stroke","currentColor"),a(i,"stroke-width","0.5"),a(i,"class","text-gray-200 dark:text-gray-700"),a(n,"x1","0"),a(n,"y1","75%"),a(n,"x2","100%"),a(n,"y2","75%"),a(n,"stroke","currentColor"),a(n,"stroke-width","0.5"),a(n,"class","text-gray-200 dark:text-gray-700"),a(u,"d",b=r[2].map(r[12]).join(" ")+" L 100 100 L 0 100 Z"),a(u,"fill","url(#cpuGradient)"),a(u,"transform","scale(1, 0.8) translate(0, 10)"),a(h,"d",m=r[2].map(r[13]).join(" ")),a(h,"fill","none"),a(h,"stroke","rgb(139, 92, 246)"),a(h,"stroke-width","2"),a(h,"stroke-linecap","round"),a(h,"stroke-linejoin","round"),a(h,"transform","scale(1, 0.8) translate(0, 10)"),a(e,"class","w-full h-full"),a(e,"preserveAspectRatio","none"),a(S,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),a(s,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(c,o){V(c,e,o),g(e,t),g(t,d),g(d,p),g(d,y),g(e,_),g(e,i),g(e,n),g(e,u),g(e,h),V(c,w,o),V(c,S,o),V(c,v,o),V(c,s,o)},p(c,o){o&4&&b!==(b=c[2].map(c[12]).join(" ")+" L 100 100 L 0 100 Z")&&a(u,"d",b),o&4&&m!==(m=c[2].map(c[13]).join(" "))&&a(h,"d",m)},d(c){c&&(K(e),K(w),K(S),K(v),K(s))}}}function fi(r){let e,t=qe(r[4]),d=[];for(let p=0;p<t.length;p+=1)d[p]=_i(di(r,t,p));return{c(){e=D("div");for(let p=0;p<d.length;p+=1)d[p].c();a(e,"class","mt-2 flex flex-wrap gap-1")},m(p,y){V(p,e,y);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(e,null)},p(p,y){if(y&16){t=qe(p[4]);let _;for(_=0;_<t.length;_+=1){const i=di(p,t,_);d[_]?d[_].p(i,y):(d[_]=_i(i),d[_].c(),d[_].m(e,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=t.length}},d(p){p&&K(e),Nt(d,p)}}}function _i(r){let e,t,d,p,y,_;return{c(){e=D("div"),t=D("div"),d=D("div"),p=F(),y=D("span"),y.textContent=`C${r[21]+1}`,_=F(),a(d,"class","h-full rounded-full transition-all duration-300"),be(d,"width",r[19]+"%"),be(d,"background-color",gt(r[19])),a(t,"class","w-6 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"),a(y,"class","text-[8px] text-gray-500 dark:text-gray-400 mt-0.5"),a(e,"class","flex flex-col items-center")},m(i,n){V(i,e,n),g(e,t),g(t,d),g(e,p),g(e,y),g(e,_)},p(i,n){n&16&&be(d,"width",i[19]+"%"),n&16&&be(d,"background-color",gt(i[19]))},d(i){i&&K(e)}}}function fl(r){let e;return{c(){e=D("div"),e.textContent="等待数据...",a(e,"class","w-full h-full flex items-center justify-center text-xs text-gray-400")},m(t,d){V(t,e,d)},p:Se,d(t){t&&K(e)}}}function _l(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s;return{c(){e=oe("svg"),t=oe("defs"),d=oe("linearGradient"),p=oe("stop"),y=oe("stop"),_=oe("line"),i=oe("line"),n=oe("line"),u=oe("path"),h=oe("path"),w=F(),S=D("div"),S.textContent="100%",v=F(),s=D("div"),s.textContent="0%",a(p,"offset","0%"),be(p,"stop-color","rgb(16, 185, 129)"),be(p,"stop-opacity","0.3"),a(y,"offset","100%"),be(y,"stop-color","rgb(16, 185, 129)"),be(y,"stop-opacity","0.05"),a(d,"id","memoryGradient"),a(d,"x1","0%"),a(d,"y1","0%"),a(d,"x2","0%"),a(d,"y2","100%"),a(_,"x1","0"),a(_,"y1","25%"),a(_,"x2","100%"),a(_,"y2","25%"),a(_,"stroke","currentColor"),a(_,"stroke-width","0.5"),a(_,"class","text-gray-200 dark:text-gray-700"),a(i,"x1","0"),a(i,"y1","50%"),a(i,"x2","100%"),a(i,"y2","50%"),a(i,"stroke","currentColor"),a(i,"stroke-width","0.5"),a(i,"class","text-gray-200 dark:text-gray-700"),a(n,"x1","0"),a(n,"y1","75%"),a(n,"x2","100%"),a(n,"y2","75%"),a(n,"stroke","currentColor"),a(n,"stroke-width","0.5"),a(n,"class","text-gray-200 dark:text-gray-700"),a(u,"d",b=r[3].map(r[14]).join(" ")+" L 100 100 L 0 100 Z"),a(u,"fill","url(#memoryGradient)"),a(u,"transform","scale(1, 0.8) translate(0, 10)"),a(h,"d",m=r[3].map(r[15]).join(" ")),a(h,"fill","none"),a(h,"stroke","rgb(16, 185, 129)"),a(h,"stroke-width","2"),a(h,"stroke-linecap","round"),a(h,"stroke-linejoin","round"),a(h,"transform","scale(1, 0.8) translate(0, 10)"),a(e,"class","w-full h-full"),a(e,"preserveAspectRatio","none"),a(S,"class","absolute left-1 top-1 text-[8px] text-gray-400 dark:text-gray-500"),a(s,"class","absolute left-1 bottom-1 text-[8px] text-gray-400 dark:text-gray-500")},m(c,o){V(c,e,o),g(e,t),g(t,d),g(d,p),g(d,y),g(e,_),g(e,i),g(e,n),g(e,u),g(e,h),V(c,w,o),V(c,S,o),V(c,v,o),V(c,s,o)},p(c,o){o&8&&b!==(b=c[3].map(c[14]).join(" ")+" L 100 100 L 0 100 Z")&&a(u,"d",b),o&8&&m!==(m=c[3].map(c[15]).join(" "))&&a(h,"d",m)},d(c){c&&(K(e),K(w),K(S),K(v),K(s))}}}function pl(r){var Dr,Mr;let e,t,d,p,y,_,i,n,u,b,h,m,w,S=r[5].cpu.toFixed(1)+"",v,s,c,o,l,f,x,C,E,k,L,T=r[5].memory.toFixed(2)+"",R,O,A,j,Z,ie,te,Y,B,P,H=r[5].disk+"",z,U,G,$,ne,W,M,q,I,X=r[7].used+"",J,N,ae,Q,ce=r[7].total+"",he,Me,xe,Te,me,we,ke,de,fe,He,Ge=ir(((Dr=r[5].network)==null?void 0:Dr.in)||0)+"",ze,Ue,Pe,Re,ye,rt,Ie=ir(((Mr=r[5].network)==null?void 0:Mr.out)||0)+"",Ne,ft,it,Ye,lt,Je,et,nt,le,ve,Ke=(r[6].os||"Unknown")+"",ee,_e,Ce,Oe,pe,Ae,Mt=(r[6].kernel||"Unknown")+"",zt,Jt,kt,Bt,jt,wt,Xt=(r[6].uptime||"Unknown")+"",dr,kr,Tt,Yt,Cr,Zt,Qt=(r[6].processes||"N/A")+"",ur;function xr(Le,Ve){return Le[0]?hl:Le[1]?cl:ll}let $t=xr(r),Ct=$t(r),st=r[0]&&ui();function Er(Le,Ve){return Le[2].length>1?ul:dl}let er=Er(r),_t=er(r),tt=r[4].length>0&&fi(r);function Lr(Le,Ve){return Le[3].length>1?_l:fl}let tr=Lr(r),pt=tr(r);return{c(){e=D("div"),t=D("div"),d=D("h3"),d.textContent="服务器监控",p=F(),y=D("div"),Ct.c(),_=F(),st&&st.c(),i=F(),n=D("div"),u=D("div"),b=D("div"),h=D("div"),h.innerHTML='<div class="p-1.5 bg-purple-100 dark:bg-purple-900 rounded-lg"><svg class="w-3.5 h-3.5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">CPU</span>',m=F(),w=D("span"),v=re(S),s=re("%"),c=F(),o=D("div"),_t.c(),l=F(),tt&&tt.c(),f=F(),x=D("div"),C=D("div"),E=D("div"),E.innerHTML='<div class="p-1.5 bg-emerald-100 dark:bg-emerald-900 rounded-lg"><svg class="w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002-2h2a2 2 0 002-2z"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">内存</span>',k=F(),L=D("span"),R=re(T),O=re("%"),A=F(),j=D("div"),pt.c(),Z=F(),ie=D("div"),te=D("div"),Y=D("div"),Y.innerHTML='<div class="p-1.5 bg-amber-100 dark:bg-amber-900 rounded-lg"><svg class="w-3.5 h-3.5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">磁盘</span>',B=F(),P=D("span"),z=re(H),U=re("%"),G=F(),$=D("div"),ne=D("div"),W=F(),M=D("div"),q=D("span"),I=re("已用 "),J=re(X),N=F(),ae=D("span"),Q=re("总计 "),he=re(ce),Me=F(),xe=D("div"),Te=D("div"),Te.innerHTML='<div class="p-1.5 bg-blue-100 dark:bg-blue-900 rounded-lg"><svg class="w-3.5 h-3.5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg></div> <span class="text-xs font-semibold text-gray-900 dark:text-white">网络流量</span>',me=F(),we=D("div"),ke=D("div"),de=D("div"),de.innerHTML='<div class="w-2 h-2 rounded-full bg-emerald-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">入站</span>',fe=F(),He=D("span"),ze=re(Ge),Ue=F(),Pe=D("div"),Re=D("div"),Re.innerHTML='<div class="w-2 h-2 rounded-full bg-rose-500"></div> <span class="text-xs text-gray-700 dark:text-gray-300 font-medium">出站</span>',ye=F(),rt=D("span"),Ne=re(Ie),ft=F(),it=D("div"),Ye=D("div"),Ye.textContent="系统信息",lt=F(),Je=D("div"),et=D("div"),nt=D("span"),nt.textContent="操作系统",le=F(),ve=D("span"),ee=re(Ke),_e=F(),Ce=D("div"),Oe=D("span"),Oe.textContent="内核版本",pe=F(),Ae=D("span"),zt=re(Mt),Jt=F(),kt=D("div"),Bt=D("span"),Bt.textContent="运行时间",jt=F(),wt=D("span"),dr=re(Xt),kr=F(),Tt=D("div"),Yt=D("span"),Yt.textContent="进程数",Cr=F(),Zt=D("span"),ur=re(Qt),a(d,"class","text-sm font-semibold text-gray-900 dark:text-white"),a(y,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),a(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),a(h,"class","flex items-center gap-2"),a(w,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),be(w,"color",gt(r[5].cpu)),a(b,"class","flex items-center justify-between mb-2"),a(o,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),a(u,"class","bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-3 shadow-sm border border-purple-100 dark:border-purple-800"),a(E,"class","flex items-center gap-2"),a(L,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),be(L,"color",gt(r[5].memory)),a(C,"class","flex items-center justify-between mb-2"),a(j,"class","h-[80px] bg-white dark:bg-gray-800 rounded-lg overflow-hidden relative"),a(x,"class","bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 shadow-sm border border-emerald-100 dark:border-emerald-800"),a(Y,"class","flex items-center gap-2"),a(P,"class","text-xs font-bold px-2 py-1 rounded-lg bg-white dark:bg-gray-800"),be(P,"color",gt(r[5].disk)),a(te,"class","flex items-center justify-between mb-2"),a(ne,"class","h-2 rounded-full transition-all duration-300"),be(ne,"width",r[5].disk+"%"),be(ne,"background-color",gt(r[5].disk)),a($,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),a(M,"class","flex justify-between mt-2 text-[10px] text-gray-600 dark:text-gray-400"),a(ie,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 shadow-sm border border-amber-100 dark:border-amber-800"),a(Te,"class","flex items-center gap-2 mb-3"),a(de,"class","flex items-center gap-2"),a(He,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),a(ke,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),a(Re,"class","flex items-center gap-2"),a(rt,"class","text-xs font-mono font-bold text-gray-900 dark:text-white"),a(Pe,"class","flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg p-2"),a(we,"class","space-y-2"),a(xe,"class","bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 shadow-sm border border-blue-100 dark:border-blue-800"),a(Ye,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2"),a(nt,"class","text-gray-600 dark:text-gray-400"),a(ve,"class","text-gray-900 dark:text-white font-medium"),a(et,"class","flex justify-between py-1"),a(Oe,"class","text-gray-600 dark:text-gray-400"),a(Ae,"class","text-gray-900 dark:text-white font-medium"),a(Ce,"class","flex justify-between py-1"),a(Bt,"class","text-gray-600 dark:text-gray-400"),a(wt,"class","text-gray-900 dark:text-white font-medium"),a(kt,"class","flex justify-between py-1"),a(Yt,"class","text-gray-600 dark:text-gray-400"),a(Zt,"class","text-gray-900 dark:text-white font-medium"),a(Tt,"class","flex justify-between py-1"),a(Je,"class","space-y-1.5 text-[10px]"),a(it,"class","bg-gray-50 dark:bg-gray-700 rounded-xl p-3 shadow-sm border border-gray-200 dark:border-gray-600"),a(n,"class","p-3 space-y-3"),a(e,"class","h-full flex flex-col bg-white dark:bg-gray-800 overflow-y-auto scrollbar-thin")},m(Le,Ve){V(Le,e,Ve),g(e,t),g(t,d),g(t,p),g(t,y),Ct.m(y,null),g(e,_),st&&st.m(e,null),g(e,i),g(e,n),g(n,u),g(u,b),g(b,h),g(b,m),g(b,w),g(w,v),g(w,s),g(u,c),g(u,o),_t.m(o,null),g(u,l),tt&&tt.m(u,null),g(n,f),g(n,x),g(x,C),g(C,E),g(C,k),g(C,L),g(L,R),g(L,O),g(x,A),g(x,j),pt.m(j,null),g(n,Z),g(n,ie),g(ie,te),g(te,Y),g(te,B),g(te,P),g(P,z),g(P,U),g(ie,G),g(ie,$),g($,ne),g(ie,W),g(ie,M),g(M,q),g(q,I),g(q,J),g(M,N),g(M,ae),g(ae,Q),g(ae,he),g(n,Me),g(n,xe),g(xe,Te),g(xe,me),g(xe,we),g(we,ke),g(ke,de),g(ke,fe),g(ke,He),g(He,ze),g(we,Ue),g(we,Pe),g(Pe,Re),g(Pe,ye),g(Pe,rt),g(rt,Ne),g(n,ft),g(n,it),g(it,Ye),g(it,lt),g(it,Je),g(Je,et),g(et,nt),g(et,le),g(et,ve),g(ve,ee),g(Je,_e),g(Je,Ce),g(Ce,Oe),g(Ce,pe),g(Ce,Ae),g(Ae,zt),g(Je,Jt),g(Je,kt),g(kt,Bt),g(kt,jt),g(kt,wt),g(wt,dr),g(Je,kr),g(Je,Tt),g(Tt,Yt),g(Tt,Cr),g(Tt,Zt),g(Zt,ur)},p(Le,[Ve]){var Br,Tr;$t!==($t=xr(Le))&&(Ct.d(1),Ct=$t(Le),Ct&&(Ct.c(),Ct.m(y,null))),Le[0]?st||(st=ui(),st.c(),st.m(e,i)):st&&(st.d(1),st=null),Ve&32&&S!==(S=Le[5].cpu.toFixed(1)+"")&&ue(v,S),Ve&32&&be(w,"color",gt(Le[5].cpu)),er===(er=Er(Le))&&_t?_t.p(Le,Ve):(_t.d(1),_t=er(Le),_t&&(_t.c(),_t.m(o,null))),Le[4].length>0?tt?tt.p(Le,Ve):(tt=fi(Le),tt.c(),tt.m(u,null)):tt&&(tt.d(1),tt=null),Ve&32&&T!==(T=Le[5].memory.toFixed(2)+"")&&ue(R,T),Ve&32&&be(L,"color",gt(Le[5].memory)),tr===(tr=Lr(Le))&&pt?pt.p(Le,Ve):(pt.d(1),pt=tr(Le),pt&&(pt.c(),pt.m(j,null))),Ve&32&&H!==(H=Le[5].disk+"")&&ue(z,H),Ve&32&&be(P,"color",gt(Le[5].disk)),Ve&32&&be(ne,"width",Le[5].disk+"%"),Ve&32&&be(ne,"background-color",gt(Le[5].disk)),Ve&128&&X!==(X=Le[7].used+"")&&ue(J,X),Ve&128&&ce!==(ce=Le[7].total+"")&&ue(he,ce),Ve&32&&Ge!==(Ge=ir(((Br=Le[5].network)==null?void 0:Br.in)||0)+"")&&ue(ze,Ge),Ve&32&&Ie!==(Ie=ir(((Tr=Le[5].network)==null?void 0:Tr.out)||0)+"")&&ue(Ne,Ie),Ve&64&&Ke!==(Ke=(Le[6].os||"Unknown")+"")&&ue(ee,Ke),Ve&64&&Mt!==(Mt=(Le[6].kernel||"Unknown")+"")&&ue(zt,Mt),Ve&64&&Xt!==(Xt=(Le[6].uptime||"Unknown")+"")&&ue(dr,Xt),Ve&64&&Qt!==(Qt=(Le[6].processes||"N/A")+"")&&ue(ur,Qt)},i:Se,o:Se,d(Le){Le&&K(e),Ct.d(),st&&st.d(),_t.d(),tt&&tt.d(),pt.d()}}}function gt(r){return r<50?"#10b981":r<80?"#f59e0b":"#ef4444"}function ir(r){if(r===0)return"0 KB/s";const e=["KB/s","MB/s","GB/s"];let t=-1,d=r;for(;d>=1024&&t<e.length-1;)d/=1024,t++;return`${d.toFixed(1)} ${e[t]}`}function gl(r,e,t){let d,p,y,_,i,n;vt(r,xt,C=>t(10,i=C)),vt(r,mt,C=>t(11,n=C));let u=[],b=[],h=[],m={cpu:45,memory:62,disk:78,network:{in:125.5,out:89.3}},w={os:"Ubuntu 22.04 LTS",kernel:"5.15.0-91-generic",uptime:"15天 7小时 32分",processes:187},S={used:"156 GB",total:"200 GB"},v=null;function s(C){var k,L,T,R,O,A,j,Z,ie,te,Y,B;if(!C)return null;(k=C.cpu)!=null&&k.per_core&&Array.isArray(C.cpu.per_core)&&t(4,h=C.cpu.per_core);const E={cpu:typeof C.cpu=="number"?C.cpu:((L=C.cpu)==null?void 0:L.overall)||0,memory:typeof C.memory=="number"?C.memory:((T=C.memory)==null?void 0:T.used_percent)||0,disk:typeof C.disk=="number"?C.disk:((A=(O=(R=C.disk)==null?void 0:R.partitions)==null?void 0:O[0])==null?void 0:A.used_percent)||0,network:{in:typeof((j=C.network)==null?void 0:j.in)=="number"?C.network.in*(1024*1024):typeof((Z=C.network)==null?void 0:Z.rx_rate)=="number"?C.network.rx_rate:0,out:typeof((ie=C.network)==null?void 0:ie.out)=="number"?C.network.out*(1024*1024):typeof((te=C.network)==null?void 0:te.tx_rate)=="number"?C.network.tx_rate:0}};if(C.system&&t(6,w={os:C.system.os||w.os,kernel:C.system.kernel||w.kernel,uptime:C.system.uptime||w.uptime,processes:w.processes}),(B=(Y=C.disk)==null?void 0:Y.partitions)!=null&&B[0]){const P=C.disk.partitions[0],H=(P.used/(1024*1024*1024)).toFixed(1),z=(P.total/(1024*1024*1024)).toFixed(1);t(7,S={used:`${H} GB`,total:`${z} GB`})}return E}async function c(){if(!i||!p||y)return;const{GetMonitoringData:C}=window.wailsBindings||{};if(typeof C=="function")try{const E=await C(i),k=s(E);console.log("data:",E),k&&(t(5,m=k),t(2,u=[...u,k.cpu].slice(-60)),t(3,b=[...b,k.memory].slice(-60)))}catch(E){console.error("Failed to fetch monitoring data:",E)}}Ht(()=>(v=setInterval(c,2e3),()=>{clearInterval(v)})),cr(()=>{v&&clearInterval(v)});const o=(C,E)=>{const k=E/(u.length-1)*100,L=100-C;return`${E===0?"M":"L"} ${k} ${L}`},l=(C,E)=>{const k=E/(u.length-1)*100,L=100-C;return`${E===0?"M":"L"} ${k} ${L}`},f=(C,E)=>{const k=E/(b.length-1)*100,L=100-C;return`${E===0?"M":"L"} ${k} ${L}`},x=(C,E)=>{const k=E/(b.length-1)*100,L=100-C;return`${E===0?"M":"L"} ${k} ${L}`};return r.$$.update=()=>{r.$$.dirty&3072&&t(9,d=i?n.get(i):null),r.$$.dirty&512&&t(1,p=(d==null?void 0:d.connected)||!1),r.$$.dirty&512&&t(0,y=(d==null?void 0:d.type)==="local"),r.$$.dirty&3&&t(8,_=p&&!y),r.$$.dirty&1280&&i&&_&&c()},[y,p,u,b,h,m,w,S,_,d,i,n,o,l,f,x]}class ml extends $e{constructor(e){super(),Qe(this,e,gl,pl,Ze,{})}}function vl(r){let e;return{c(){e=D("span"),e.textContent="✗ 无效",a(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function bl(r){let e;return{c(){e=D("span"),e.textContent="✓ 有效",a(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function pi(r){let e,t,d,p,y;return{c(){e=D("div"),t=oe("svg"),d=oe("path"),p=F(),y=re(r[3]),a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),a(t,"class","w-4 h-4"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),a(e,"class","mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1")},m(_,i){V(_,e,i),g(e,t),g(t,d),g(e,p),g(e,y)},p(_,i){i&8&&ue(y,_[3])},d(_){_&&K(e)}}}function gi(r){let e,t,d;return{c(){e=D("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,a(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,y){V(p,e,y),t||(d=se(e,"click",r[9]),t=!0)},p:Se,d(p){p&&K(e),t=!1,d()}}}function wl(r){let e,t,d,p,y,_,i,n,u=r[5].chars+"",b,h,m=r[5].lines+"",w,S,v,s,c,o,l,f,x,C,E,k,L,T,R,O,A,j,Z,ie,te,Y,B,P,H,z,U,G,$,ne,W,M,q,I,X,J,N,ae,Q,ce;function he(we,ke){if(we[4])return bl;if(we[3])return vl}let Me=he(r),xe=Me&&Me(r),Te=r[3]&&pi(r),me=r[1]&&gi(r);return{c(){e=D("div"),t=D("div"),d=D("div"),p=D("label"),y=D("span"),y.textContent="输入 JSON",_=F(),xe&&xe.c(),i=F(),n=D("div"),b=re(u),h=re(" 字符 · "),w=re(m),S=re(" 行"),v=F(),s=D("textarea"),o=F(),Te&&Te.c(),l=F(),f=D("div"),x=D("button"),C=oe("svg"),E=oe("path"),k=F(),L=D("span"),L.textContent="格式化",R=F(),O=D("button"),A=oe("svg"),j=oe("path"),Z=F(),ie=D("span"),ie.textContent="压缩",Y=F(),B=D("button"),P=oe("svg"),H=oe("path"),z=F(),U=D("span"),U.textContent="转义",$=F(),ne=D("div"),W=D("div"),M=D("label"),M.textContent="输出",q=F(),me&&me.c(),I=F(),X=D("textarea"),J=F(),N=D("div"),ae=D("button"),ae.textContent="清空全部",a(p,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(n,"class","text-xs text-gray-500 dark:text-gray-400"),a(d,"class","flex items-center justify-between mb-2"),a(s,"placeholder","输入 JSON..."),a(s,"class",c="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(r[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white"),a(t,"class","relative"),a(E,"stroke-linecap","round"),a(E,"stroke-linejoin","round"),a(E,"stroke-width","2"),a(E,"d","M4 6h16M4 12h16m-7 6h7"),a(C,"class","w-4 h-4"),a(C,"fill","none"),a(C,"stroke","currentColor"),a(C,"viewBox","0 0 24 24"),a(L,"class","text-sm"),x.disabled=T=r[2]||!r[0].trim(),a(x,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(j,"stroke-linecap","round"),a(j,"stroke-linejoin","round"),a(j,"stroke-width","2"),a(j,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),a(A,"class","w-4 h-4"),a(A,"fill","none"),a(A,"stroke","currentColor"),a(A,"viewBox","0 0 24 24"),a(ie,"class","text-sm"),O.disabled=te=r[2]||!r[0].trim(),a(O,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(H,"stroke-linecap","round"),a(H,"stroke-linejoin","round"),a(H,"stroke-width","2"),a(H,"d","M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"),a(P,"class","w-4 h-4"),a(P,"fill","none"),a(P,"stroke","currentColor"),a(P,"viewBox","0 0 24 24"),a(U,"class","text-sm"),B.disabled=G=r[2]||!r[0].trim(),a(B,"class","flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(f,"class","grid grid-cols-3 gap-3"),a(M,"class","text-sm font-semibold text-gray-700 dark:text-gray-300"),a(W,"class","flex items-center justify-between mb-2"),X.readOnly=!0,a(X,"placeholder","格式化后的 JSON 将显示在这里..."),a(X,"class","w-full h-48 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),a(ae,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(N,"class","flex justify-end"),a(e,"class","space-y-6")},m(we,ke){V(we,e,ke),g(e,t),g(t,d),g(d,p),g(p,y),g(p,_),xe&&xe.m(p,null),g(d,i),g(d,n),g(n,b),g(n,h),g(n,w),g(n,S),g(t,v),g(t,s),ge(s,r[0]),g(t,o),Te&&Te.m(t,null),g(e,l),g(e,f),g(f,x),g(x,C),g(C,E),g(x,k),g(x,L),g(f,R),g(f,O),g(O,A),g(A,j),g(O,Z),g(O,ie),g(f,Y),g(f,B),g(B,P),g(P,H),g(B,z),g(B,U),g(e,$),g(e,ne),g(ne,W),g(W,M),g(W,q),me&&me.m(W,null),g(ne,I),g(ne,X),ge(X,r[1]),g(e,J),g(e,N),g(N,ae),Q||(ce=[se(s,"input",r[13]),se(s,"keydown",r[11]),se(x,"click",r[6]),se(O,"click",r[7]),se(B,"click",r[8]),se(X,"input",r[14]),se(ae,"click",r[10])],Q=!0)},p(we,[ke]){Me!==(Me=he(we))&&(xe&&xe.d(1),xe=Me&&Me(we),xe&&(xe.c(),xe.m(p,null))),ke&32&&u!==(u=we[5].chars+"")&&ue(b,u),ke&32&&m!==(m=we[5].lines+"")&&ue(w,m),ke&8&&c!==(c="w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 "+(we[3]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 dark:focus:border-purple-400")+" rounded-xl text-sm font-mono resize-none focus:outline-none focus:ring-2 transition-all dark:text-white")&&a(s,"class",c),ke&1&&ge(s,we[0]),we[3]?Te?Te.p(we,ke):(Te=pi(we),Te.c(),Te.m(t,null)):Te&&(Te.d(1),Te=null),ke&5&&T!==(T=we[2]||!we[0].trim())&&(x.disabled=T),ke&5&&te!==(te=we[2]||!we[0].trim())&&(O.disabled=te),ke&5&&G!==(G=we[2]||!we[0].trim())&&(B.disabled=G),we[1]?me?me.p(we,ke):(me=gi(we),me.c(),me.m(W,null)):me&&(me.d(1),me=null),ke&2&&ge(X,we[1])},i:Se,o:Se,d(we){we&&K(e),xe&&xe.d(),Te&&Te.d(),me&&me.d(),Q=!1,Be(ce)}}}function yl(r,e,t){let{themeStore:d}=e,p="",y="",_=!1,i="",n=!1,u={chars:0,lines:0};async function b(){if(!p.trim()){t(4,n=!1),t(3,i="");return}if(!window.wailsBindings){t(4,n=!1),t(3,i="Wails 绑定未加载");return}try{const f=await window.wailsBindings.ValidateJSON(p);t(4,n=f.valid),t(3,i=f.error||"")}catch(f){t(4,n=!1),t(3,i=f.message)}}function h(){t(5,u.chars=p.length,u),t(5,u.lines=p.split(`
`).length,u)}async function m(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,y=await window.wailsBindings.FormatJSON(p)),t(4,n=!0),t(3,i="")}catch(f){t(3,i=f.message||"格式化失败")}finally{t(2,_=!1)}}}async function w(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,y=await window.wailsBindings.MinifyJSON(p)),t(4,n=!0),t(3,i="")}catch(f){t(3,i=f.message||"压缩失败")}finally{t(2,_=!1)}}}async function S(){if(!(!p.trim()||_||!window.wailsBindings)){t(2,_=!0),t(3,i="");try{t(1,y=await window.wailsBindings.EscapeJSON(p)),t(4,n=!0),t(3,i="")}catch(f){t(3,i=f.message||"转义失败")}finally{t(2,_=!1)}}}async function v(){if(y)try{await navigator.clipboard.writeText(y)}catch(f){console.error("复制失败:",f)}}function s(){t(0,p=""),t(1,y=""),t(4,n=!1)}function c(f){(f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="enter"&&!_&&p.trim()&&(f.preventDefault(),m())}function o(){p=this.value,t(0,p)}function l(){y=this.value,t(1,y)}return r.$$set=f=>{"themeStore"in f&&t(12,d=f.themeStore)},b(),h(),[p,y,_,i,n,u,m,w,S,v,s,c,d,o,l]}class mi extends $e{constructor(e){super(),Qe(this,e,yl,wl,Ze,{themeStore:12})}}function Sl(r){let e,t,d,p=r[2]==="encode"?"编码":"解码",y;return{c(){e=oe("svg"),t=oe("path"),d=F(),y=re(p),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M13 10V3L4 14h7v7l9-11h-7z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),g(e,t),V(_,d,i),V(_,y,i)},p(_,i){i&4&&p!==(p=_[2]==="encode"?"编码":"解码")&&ue(y,p)},d(_){_&&(K(e),K(d),K(y))}}}function kl(r){let e,t,d,p;return{c(){e=oe("svg"),t=oe("circle"),d=oe("path"),p=re(`
        处理中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(d,"class","opacity-75"),a(d,"fill","currentColor"),a(d,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-4 h-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(y,_){V(y,e,_),g(e,t),g(e,d),V(y,p,_)},p:Se,d(y){y&&(K(e),K(p))}}}function vi(r){let e,t,d;return{c(){e=D("button"),e.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,a(e,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300")},m(p,y){V(p,e,y),t||(d=se(e,"click",r[5]),t=!0)},p:Se,d(p){p&&K(e),t=!1,d()}}}function Cl(r){let e,t,d,p,y,_,i,n,u,b,h,m,w=r[2]==="encode"?"输入文本":"输入 Base64",S,v,s,c,o,l,f,x,C,E,k,L,T=r[2]==="encode"?"Base64 输出":"解码结果",R,O,A,j,Z,ie,te,Y,B,P,H,z;function U(W,M){return W[3]?kl:Sl}let G=U(r),$=G(r),ne=r[1]&&vi(r);return{c(){e=D("div"),t=D("div"),d=D("button"),p=re("编码"),_=F(),i=D("button"),n=re("解码"),b=F(),h=D("div"),m=D("label"),S=re(w),v=F(),s=D("textarea"),o=F(),l=D("div"),f=D("button"),$.c(),C=F(),E=D("div"),k=D("div"),L=D("label"),R=re(T),O=F(),ne&&ne.c(),A=F(),j=D("textarea"),ie=F(),te=D("div"),Y=D("button"),Y.textContent="清空全部",B=F(),P=D("button"),P.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
      切换模式`,a(d,"class",y="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),a(m,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(s,"placeholder",c=r[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串..."),a(s,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white"),f.disabled=x=r[3]||!r[0].trim(),a(f,"class","flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(l,"class","flex items-center justify-center"),a(L,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(k,"class","flex items-center justify-between mb-2"),j.readOnly=!0,a(j,"placeholder",Z=r[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里..."),a(j,"class","w-full h-32 px-4 py-3 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono resize-none focus:outline-none dark:text-white"),a(Y,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(P,"class","flex items-center gap-2 text-sm px-4 py-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors"),a(te,"class","flex justify-between items-center"),a(e,"class","space-y-6")},m(W,M){V(W,e,M),g(e,t),g(t,d),g(d,p),g(t,_),g(t,i),g(i,n),g(e,b),g(e,h),g(h,m),g(m,S),g(h,v),g(h,s),ge(s,r[0]),g(e,o),g(e,l),g(l,f),$.m(f,null),g(e,C),g(e,E),g(E,k),g(k,L),g(L,R),g(k,O),ne&&ne.m(k,null),g(E,A),g(E,j),ge(j,r[1]),g(e,ie),g(e,te),g(te,Y),g(te,B),g(te,P),H||(z=[se(d,"click",r[10]),se(i,"click",r[11]),se(s,"input",r[12]),se(s,"keydown",r[8]),se(f,"click",r[4]),se(j,"input",r[13]),se(Y,"click",r[6]),se(P,"click",r[7])],H=!0)},p(W,[M]){M&4&&y!==(y="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(W[2]==="encode"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(d,"class",y),M&4&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(W[2]==="decode"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(i,"class",u),M&4&&w!==(w=W[2]==="encode"?"输入文本":"输入 Base64")&&ue(S,w),M&4&&c!==(c=W[2]==="encode"?"输入要编码的文本...":"输入 Base64 字符串...")&&a(s,"placeholder",c),M&1&&ge(s,W[0]),G===(G=U(W))&&$?$.p(W,M):($.d(1),$=G(W),$&&($.c(),$.m(f,null))),M&9&&x!==(x=W[3]||!W[0].trim())&&(f.disabled=x),M&4&&T!==(T=W[2]==="encode"?"Base64 输出":"解码结果")&&ue(R,T),W[1]?ne?ne.p(W,M):(ne=vi(W),ne.c(),ne.m(k,null)):ne&&(ne.d(1),ne=null),M&4&&Z!==(Z=W[2]==="encode"?"Base64 编码结果将显示在这里...":"解码后的文本将显示在这里...")&&a(j,"placeholder",Z),M&2&&ge(j,W[1])},i:Se,o:Se,d(W){W&&K(e),$.d(),ne&&ne.d(),H=!1,Be(z)}}}function xl(r,e,t){let{themeStore:d}=e,p="",y="",_="encode",i=!1;async function n(){if(!(!p.trim()||i||!window.wailsBindings)){t(3,i=!0);try{_==="encode"?t(1,y=await window.wailsBindings.EncodeBase64(p)):t(1,y=await window.wailsBindings.DecodeBase64(p))}catch(c){t(1,y=""),console.error("处理失败:",c),alert("处理失败: "+(c.message||c))}finally{t(3,i=!1)}}}async function u(){if(y)try{await navigator.clipboard.writeText(y)}catch(c){console.error("复制失败:",c)}}function b(){t(0,p=""),t(1,y="")}function h(){t(2,_=_==="encode"?"decode":"encode"),t(0,p=""),t(1,y="")}function m(c){(c.ctrlKey||c.metaKey)&&c.key.toLowerCase()==="enter"&&!i&&p.trim()&&(c.preventDefault(),n())}const w=()=>t(2,_="encode"),S=()=>t(2,_="decode");function v(){p=this.value,t(0,p)}function s(){y=this.value,t(1,y)}return r.$$set=c=>{"themeStore"in c&&t(9,d=c.themeStore)},[p,y,_,i,n,u,b,h,m,d,w,S,v,s]}class bi extends $e{constructor(e){super(),Qe(this,e,xl,Cl,Ze,{themeStore:9})}}function wi(r,e,t){const d=r.slice();return d[26]=e[t],d}function yi(r,e,t){const d=r.slice();return d[26]=e[t],d}function Si(r){let e,t=r[26].name+"",d;return{c(){e=D("option"),d=re(t),e.__value=r[26].id,ge(e,e.__value)},m(p,y){V(p,e,y),g(e,d)},p:Se,d(p){p&&K(e)}}}function ki(r){let e,t=r[26].name+"",d;return{c(){e=D("option"),d=re(t),e.__value=r[26].id,ge(e,e.__value)},m(p,y){V(p,e,y),g(e,d)},p:Se,d(p){p&&K(e)}}}function El(r){let e,t,d,p,y,_,i,n,u,b;return{c(){e=D("div"),t=D("button"),d=re("加密"),y=F(),_=D("button"),i=re("解密"),a(t,"class",p="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[3]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(_,"class",n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[3]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(e,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl")},m(h,m){V(h,e,m),g(e,t),g(t,d),g(e,y),g(e,_),g(_,i),u||(b=[se(t,"click",r[21]),se(_,"click",r[22])],u=!0)},p(h,m){m&8&&p!==(p="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(h[3]==="encrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(t,"class",p),m&8&&n!==(n="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(h[3]==="decrypt"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(_,"class",n)},d(h){h&&K(e),u=!1,Be(b)}}}function Ll(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s;return{c(){e=D("div"),t=D("div"),d=D("label"),d.textContent="密钥（Hex）",p=F(),y=D("input"),_=F(),i=D("div"),i.textContent=`密钥长度: ${r[12]()}`,n=F(),u=D("div"),b=D("label"),b.textContent=`${r[10]()}（Hex）`,h=F(),m=D("input"),w=F(),S=D("div"),S.textContent=`${r[10]()}长度: ${r[11]()}`,a(d,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(y,"type","text"),a(y,"placeholder","例如: 00112233445566778899aabbccddeeff"),a(y,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),a(i,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),a(b,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(m,"type","text"),a(m,"placeholder",r[10]()==="Nonce"?"例如: 0f0e0d0c0b0a090807060504":"例如: 0102030405060708090a0b0c0d0e0f10"),a(m,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),a(S,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),a(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(c,o){V(c,e,o),g(e,t),g(t,d),g(t,p),g(t,y),ge(y,r[4]),g(t,_),g(t,i),g(e,n),g(e,u),g(u,b),g(u,h),g(u,m),ge(m,r[5]),g(u,w),g(u,S),v||(s=[se(y,"input",r[23]),se(m,"input",r[24])],v=!0)},p(c,o){o&16&&y.value!==c[4]&&ge(y,c[4]),o&32&&m.value!==c[5]&&ge(m,c[5])},d(c){c&&K(e),v=!1,Be(s)}}}function Dl(r){let e,t,d,p=r[8]()?"计算哈希":r[3]==="decrypt"?"解密":"加密",y;return{c(){e=oe("svg"),t=oe("path"),d=F(),y=re(p),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(_,i){V(_,e,i),g(e,t),V(_,d,i),V(_,y,i)},p(_,i){i&8&&p!==(p=_[8]()?"计算哈希":_[3]==="decrypt"?"解密":"加密")&&ue(y,p)},d(_){_&&(K(e),K(d),K(y))}}}function Ml(r){let e,t,d,p;return{c(){e=oe("svg"),t=oe("circle"),d=oe("path"),p=re(`
        处理中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(d,"class","opacity-75"),a(d,"fill","currentColor"),a(d,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-4 h-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(y,_){V(y,e,_),g(e,t),g(e,d),V(y,p,_)},p:Se,d(y){y&&(K(e),K(p))}}}function Ci(r){let e,t,d,p,y,_,i=r[8]()?"哈希值":r[3]==="decrypt"?"明文":"Base64 密文",n,u,b,h,m,w,S,v,s,c,o=r[1].length+"",l,f,x,C;return{c(){e=D("div"),t=D("div"),d=D("label"),p=D("span"),p.textContent=`${r[9]()}`,y=F(),_=D("span"),n=re(i),u=F(),b=D("button"),b.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,h=F(),m=D("div"),w=D("code"),S=re(r[1]),v=F(),s=D("div"),c=re("长度: "),l=re(o),f=re(" 字符"),a(d,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(b,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),a(t,"class","flex items-center justify-between mb-2"),a(w,"class","text-sm font-mono break-all text-gray-800 dark:text-gray-200"),a(m,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl"),a(s,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(E,k){V(E,e,k),g(e,t),g(t,d),g(d,p),g(d,y),g(d,_),g(_,n),g(t,u),g(t,b),g(e,h),g(e,m),g(m,w),g(w,S),g(e,v),g(e,s),g(s,c),g(s,l),g(s,f),x||(C=se(b,"click",r[15]),x=!0)},p(E,k){k&8&&i!==(i=E[8]()?"哈希值":E[3]==="decrypt"?"明文":"Base64 密文")&&ue(n,i),k&2&&ue(S,E[1]),k&2&&o!==(o=E[1].length+"")&&ue(l,o)},d(E){E&&K(e),x=!1,C()}}}function Bl(r){let e,t,d,p,y,_,i,n,u,b,h=!r[8](),m,w=!r[8](),S,v,s,c=r[8]()?"输入文本":r[3]==="decrypt"?"输入 Base64 密文":"输入明文",o,l,f,x,C,E=r[0].length+"",k,L,T,R,O,A,j,Z,ie,te,Y,B,P=qe(r[7].filter(xi)),H=[];for(let I=0;I<P.length;I+=1)H[I]=Si(yi(r,P,I));let z=qe(r[7].filter(Ei)),U=[];for(let I=0;I<z.length;I+=1)U[I]=ki(wi(r,z,I));let G=h&&El(r),$=w&&Ll(r);function ne(I,X){return I[6]?Ml:Dl}let W=ne(r),M=W(r),q=r[1]&&Ci(r);return{c(){e=D("div"),t=D("div"),d=D("label"),d.textContent="选择算法",p=F(),y=D("div"),_=D("div"),i=D("select"),n=D("optgroup");for(let I=0;I<H.length;I+=1)H[I].c();u=D("optgroup");for(let I=0;I<U.length;I+=1)U[I].c();b=F(),G&&G.c(),m=F(),$&&$.c(),S=F(),v=D("div"),s=D("label"),o=re(c),l=F(),f=D("textarea"),x=F(),C=D("div"),k=re(E),L=re(" 字符"),T=F(),R=D("div"),O=D("button"),M.c(),j=F(),q&&q.c(),Z=F(),ie=D("div"),te=D("button"),te.textContent="清空全部",a(d,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(n,"label","Hash"),a(u,"label","加密解密"),a(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),r[2]===void 0&&Vt(()=>r[19].call(i)),a(_,"class","flex-1"),a(y,"class","flex flex-col md:flex-row gap-3"),a(s,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"),a(f,"placeholder",r[13]()),a(f,"class","w-full h-32 px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm resize-none focus:outline-none focus:border-green-500 dark:focus:border-green-400 focus:ring-2 transition-all dark:text-white"),a(C,"class","mt-2 text-xs text-gray-500 dark:text-gray-400"),O.disabled=A=r[6]||!r[0].trim()||!r[8]()&&(!r[4].trim()||!r[5].trim()),a(O,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(R,"class","flex justify-center"),a(te,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(ie,"class","flex justify-end"),a(e,"class","space-y-6")},m(I,X){V(I,e,X),g(e,t),g(t,d),g(t,p),g(t,y),g(y,_),g(_,i),g(i,n);for(let J=0;J<H.length;J+=1)H[J]&&H[J].m(n,null);g(i,u);for(let J=0;J<U.length;J+=1)U[J]&&U[J].m(u,null);ar(i,r[2],!0),g(y,b),G&&G.m(y,null),g(e,m),$&&$.m(e,null),g(e,S),g(e,v),g(v,s),g(s,o),g(v,l),g(v,f),ge(f,r[0]),g(v,x),g(v,C),g(C,k),g(C,L),g(e,T),g(e,R),g(R,O),M.m(O,null),g(e,j),q&&q.m(e,null),g(e,Z),g(e,ie),g(ie,te),Y||(B=[se(i,"change",r[19]),se(i,"change",r[20]),se(f,"input",r[25]),se(f,"keydown",r[17]),se(O,"click",r[14]),se(te,"click",r[16])],Y=!0)},p(I,[X]){if(X&128){P=qe(I[7].filter(xi));let J;for(J=0;J<P.length;J+=1){const N=yi(I,P,J);H[J]?H[J].p(N,X):(H[J]=Si(N),H[J].c(),H[J].m(n,null))}for(;J<H.length;J+=1)H[J].d(1);H.length=P.length}if(X&128){z=qe(I[7].filter(Ei));let J;for(J=0;J<z.length;J+=1){const N=wi(I,z,J);U[J]?U[J].p(N,X):(U[J]=ki(N),U[J].c(),U[J].m(u,null))}for(;J<U.length;J+=1)U[J].d(1);U.length=z.length}X&132&&ar(i,I[2]),h&&G.p(I,X),w&&$.p(I,X),X&8&&c!==(c=I[8]()?"输入文本":I[3]==="decrypt"?"输入 Base64 密文":"输入明文")&&ue(o,c),X&1&&ge(f,I[0]),X&1&&E!==(E=I[0].length+"")&&ue(k,E),W===(W=ne(I))&&M?M.p(I,X):(M.d(1),M=W(I),M&&(M.c(),M.m(O,null))),X&113&&A!==(A=I[6]||!I[0].trim()||!I[8]()&&(!I[4].trim()||!I[5].trim()))&&(O.disabled=A),I[1]?q?q.p(I,X):(q=Ci(I),q.c(),q.m(e,Z)):q&&(q.d(1),q=null)},i:Se,o:Se,d(I){I&&K(e),Nt(H,I),Nt(U,I),G&&G.d(),$&&$.d(),M.d(),q&&q.d(),Y=!1,Be(B)}}}const xi=r=>r.type==="hash",Ei=r=>r.type==="crypto";function Tl(r,e,t){let{themeStore:d}=e,p="",y="",_="md5",i="encrypt",n="",u="",b=!1;const h=[{id:"md5",name:"MD5",type:"hash"},{id:"sha256",name:"SHA-256",type:"hash"},{id:"sha512",name:"SHA-512",type:"hash"},{id:"aes-gcm",name:"AES-GCM",type:"crypto"},{id:"aes-cbc",name:"AES-CBC",type:"crypto"},{id:"sm4-cbc",name:"SM4-CBC",type:"crypto"}];function m(){const A=h.find(j=>j.id===_);return(A==null?void 0:A.type)==="hash"}function w(){var A;return((A=h.find(j=>j.id===_))==null?void 0:A.name)||""}function S(){return _==="aes-gcm"?"Nonce":"IV"}function v(){return _==="aes-gcm"?"12 字节（24位Hex）":"16 字节（32位Hex）"}function s(){return _==="sm4-cbc"?"16 字节（32位Hex）":"16/24/32 字节（32/48/64位Hex）"}function c(){return m()?"输入要计算哈希的文本...":i==="decrypt"?"输入 Base64 密文...":"输入要加密的明文..."}async function o(){if(!(!p.trim()||b||!window.wailsBindings)&&!(!m()&&(!n.trim()||!u.trim()))){t(6,b=!0),t(1,y="");try{m()?t(1,y=await window.wailsBindings.CalculateHash(p,_)):i==="encrypt"?t(1,y=await window.wailsBindings.EncryptText(p,_,n,u)):t(1,y=await window.wailsBindings.DecryptText(p,_,n,u))}catch(A){t(1,y=""),console.error("操作失败:",A),alert("操作失败: "+(A.message||A))}finally{t(6,b=!1)}}}async function l(){if(y)try{await navigator.clipboard.writeText(y)}catch(A){console.error("复制失败:",A)}}function f(){t(0,p=""),t(1,y=""),t(4,n=""),t(5,u="")}function x(A){(A.ctrlKey||A.metaKey)&&A.key.toLowerCase()==="enter"&&!b&&p.trim()&&(A.preventDefault(),o())}function C(){_=rs(this),t(2,_),t(7,h)}const E=()=>{f()},k=()=>{t(3,i="encrypt"),f()},L=()=>{t(3,i="decrypt"),f()};function T(){n=this.value,t(4,n)}function R(){u=this.value,t(5,u)}function O(){p=this.value,t(0,p)}return r.$$set=A=>{"themeStore"in A&&t(18,d=A.themeStore)},[p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,d,C,E,k,L,T,R,O]}class Li extends $e{constructor(e){super(),Qe(this,e,Tl,Bl,Ze,{themeStore:18})}}function Al(r){let e,t,d,p,y,_,i,n,u,b,h,m=r[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS",w,S,v;return{c(){e=D("div"),t=D("div"),d=D("label"),d.textContent="输入日期时间",p=F(),y=D("button"),y.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,_=F(),i=D("input"),u=F(),b=D("div"),h=re("格式: "),w=re(m),a(d,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(y,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-lg transition-colors text-blue-700 dark:text-blue-300"),a(t,"class","flex items-center justify-between mb-2"),a(i,"type","text"),a(i,"placeholder",n=r[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45"),a(i,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 transition-all dark:text-white"),a(b,"class","mt-2 text-xs text-gray-500 dark:text-gray-400")},m(s,c){V(s,e,c),g(e,t),g(t,d),g(t,p),g(t,y),g(e,_),g(e,i),ge(i,r[3]),g(e,u),g(e,b),g(b,h),g(b,w),S||(v=[se(y,"click",r[9]),se(i,"input",r[19]),se(i,"keydown",r[12])],S=!0)},p(s,c){c&2&&n!==(n=s[1]==="milliseconds"?"例如: 2025-01-01 12:30:45.123":"例如: 2025-01-01 12:30:45")&&a(i,"placeholder",n),c&8&&i.value!==s[3]&&ge(i,s[3]),c&2&&m!==(m=s[1]==="milliseconds"?"YYYY-MM-DD HH:MM:SS.SSS":"YYYY-MM-DD HH:MM:SS")&&ue(w,m)},d(s){s&&K(e),S=!1,Be(v)}}}function Rl(r){let e,t,d,p,y=r[1]==="milliseconds"?"毫秒":"秒",_,i,n,u,b,h,m,w,S;return{c(){e=D("div"),t=D("div"),d=D("label"),p=re("输入 Unix 时间戳（"),_=re(y),i=re("）"),n=F(),u=D("button"),u.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          使用当前`,b=F(),h=D("input"),a(d,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(u,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 rounded-lg transition-colors text-purple-700 dark:text-purple-300"),a(t,"class","flex items-center justify-between mb-2"),a(h,"type","number"),a(h,"placeholder",m=r[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890"),a(h,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-sm font-mono focus:outline-none focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 transition-all dark:text-white")},m(v,s){V(v,e,s),g(e,t),g(t,d),g(d,p),g(d,_),g(d,i),g(t,n),g(t,u),g(e,b),g(e,h),ge(h,r[2]),w||(S=[se(u,"click",r[8]),se(h,"input",r[18]),se(h,"keydown",r[12])],w=!0)},p(v,s){s&2&&y!==(y=v[1]==="milliseconds"?"毫秒":"秒")&&ue(_,y),s&2&&m!==(m=v[1]==="milliseconds"?"例如: 1234567890123":"例如: 1234567890")&&a(h,"placeholder",m),s&4&&ts(h.value)!==v[2]&&ge(h,v[2])},d(v){v&&K(e),w=!1,Be(S)}}}function Ol(r){let e,t,d;return{c(){e=oe("svg"),t=oe("path"),d=re(`
        转换`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,y){V(p,e,y),g(e,t),V(p,d,y)},d(p){p&&(K(e),K(d))}}}function Pl(r){let e,t,d,p;return{c(){e=oe("svg"),t=oe("circle"),d=oe("path"),p=re(`
        转换中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(d,"class","opacity-75"),a(d,"fill","currentColor"),a(d,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-4 h-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(y,_){V(y,e,_),g(e,t),g(e,d),V(y,p,_)},d(y){y&&(K(e),K(p))}}}function Di(r){let e,t,d,p=r[0]==="toDateTime"?"日期时间":"时间戳",y,_,i,n,u,b,h,m,w;return{c(){e=D("div"),t=D("div"),d=D("label"),y=re(p),_=F(),i=D("button"),i.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
          复制`,n=F(),u=D("div"),b=D("code"),h=re(r[4]),a(d,"class","block text-sm font-semibold text-gray-700 dark:text-gray-300"),a(i,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors text-gray-700 dark:text-gray-300"),a(t,"class","flex items-center justify-between mb-2"),a(b,"class","text-sm font-mono text-gray-800 dark:text-gray-200"),a(u,"class","p-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-xl")},m(S,v){V(S,e,v),g(e,t),g(t,d),g(d,y),g(t,_),g(t,i),g(e,n),g(e,u),g(u,b),g(b,h),m||(w=se(i,"click",r[10]),m=!0)},p(S,v){v&1&&p!==(p=S[0]==="toDateTime"?"日期时间":"时间戳")&&ue(y,p),v&16&&ue(h,S[4])},d(S){S&&K(e),m=!1,w()}}}function Il(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,C,E,k,L,T,R,O=r[1]==="milliseconds"?"毫秒":"秒",A,j,Z,ie,te,Y,B,P,H,z,U,G,$,ne,W;function M(Q,ce){return Q[0]==="toDateTime"?Rl:Al}let q=M(r),I=q(r);function X(Q,ce){return Q[5]?Pl:Ol}let J=X(r),N=J(r),ae=r[4]&&Di(r);return{c(){e=D("div"),t=D("div"),d=D("button"),p=re("时间戳 → 日期时间"),_=F(),i=D("button"),n=re("日期时间 → 时间戳"),b=F(),h=D("div"),m=D("div"),w=D("button"),S=re("秒"),s=F(),c=D("button"),o=re("毫秒"),f=F(),x=D("div"),C=D("div"),E=oe("svg"),k=oe("path"),L=F(),T=D("span"),R=re("当前时间戳（"),A=re(O),j=re("）: "),Z=D("strong"),ie=re(r[6]),te=F(),I.c(),Y=F(),B=D("div"),P=D("button"),N.c(),z=F(),ae&&ae.c(),U=F(),G=D("div"),$=D("button"),$.textContent="清空全部",a(d,"class",y="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(i,"class",u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(r[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(t,"class","flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),a(w,"class",v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(c,"class",l="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(r[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200")),a(m,"class","flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl"),a(h,"class","flex justify-end"),a(k,"stroke-linecap","round"),a(k,"stroke-linejoin","round"),a(k,"stroke-width","2"),a(k,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),a(E,"class","w-5 h-5"),a(E,"fill","none"),a(E,"stroke","currentColor"),a(E,"viewBox","0 0 24 24"),a(Z,"class","font-mono"),a(C,"class","flex items-center gap-2 text-sm text-amber-800 dark:text-amber-300"),a(x,"class","bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-4 border border-amber-200 dark:border-amber-800/50"),P.disabled=H=r[5]||(r[0]==="toDateTime"?!r[2].trim():!r[3].trim()),a(P,"class","flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl"),a(B,"class","flex justify-center"),a($,"class","text-sm px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors"),a(G,"class","flex justify-end"),a(e,"class","space-y-6")},m(Q,ce){V(Q,e,ce),g(e,t),g(t,d),g(d,p),g(t,_),g(t,i),g(i,n),g(e,b),g(e,h),g(h,m),g(m,w),g(w,S),g(m,s),g(m,c),g(c,o),g(e,f),g(e,x),g(x,C),g(C,E),g(E,k),g(C,L),g(C,T),g(T,R),g(T,A),g(T,j),g(T,Z),g(Z,ie),g(e,te),I.m(e,null),g(e,Y),g(e,B),g(B,P),N.m(P,null),g(e,z),ae&&ae.m(e,null),g(e,U),g(e,G),g(G,$),ne||(W=[se(d,"click",r[14]),se(i,"click",r[15]),se(w,"click",r[16]),se(c,"click",r[17]),se(P,"click",r[7]),se($,"click",r[11])],ne=!0)},p(Q,[ce]){ce&1&&y!==(y="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(Q[0]==="toDateTime"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(d,"class",y),ce&1&&u!==(u="flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all "+(Q[0]==="toTimestamp"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(i,"class",u),ce&2&&v!==(v="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(Q[1]==="seconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(w,"class",v),ce&2&&l!==(l="px-4 py-2 rounded-lg text-xs font-semibold transition-all "+(Q[1]==="milliseconds"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"))&&a(c,"class",l),ce&2&&O!==(O=Q[1]==="milliseconds"?"毫秒":"秒")&&ue(A,O),ce&64&&ue(ie,Q[6]),q===(q=M(Q))&&I?I.p(Q,ce):(I.d(1),I=q(Q),I&&(I.c(),I.m(e,Y))),J!==(J=X(Q))&&(N.d(1),N=J(Q),N&&(N.c(),N.m(P,null))),ce&45&&H!==(H=Q[5]||(Q[0]==="toDateTime"?!Q[2].trim():!Q[3].trim()))&&(P.disabled=H),Q[4]?ae?ae.p(Q,ce):(ae=Di(Q),ae.c(),ae.m(e,U)):ae&&(ae.d(1),ae=null)},i:Se,o:Se,d(Q){Q&&K(e),I.d(),N.d(),ae&&ae.d(),ne=!1,Be(W)}}}const Hl="2006-01-02 15:04:05",Fl="2006-01-02 15:04:05.000";function Wl(r,e,t){let{themeStore:d}=e,p="toDateTime",y="seconds",_="",i="",n="",u=!1,b=0;function h(){const L=Date.now();t(6,b=y==="milliseconds"?L:Math.floor(L/1e3))}function m(){return y==="milliseconds"?Fl:Hl}async function w(){if(window.wailsBindings){t(5,u=!0),t(4,n="");try{if(p==="toDateTime"){const L=parseInt(_.trim());if(isNaN(L))throw new Error("请输入有效的时间戳");y==="milliseconds"?t(4,n=await window.wailsBindings.TimestampToDateTimeMs(L,m())):t(4,n=await window.wailsBindings.TimestampToDateTime(L,m()))}else{if(!i.trim())throw new Error("请输入日期时间");if(y==="milliseconds"){const L=await window.wailsBindings.DateTimeToTimestampMs(i,m());t(4,n=L.toString())}else{const L=await window.wailsBindings.DateTimeToTimestamp(i,m());t(4,n=L.toString())}}}catch(L){t(4,n=""),console.error("转换失败:",L),alert("转换失败: "+(L.message||L))}finally{t(5,u=!1)}}}async function S(){if(window.wailsBindings)try{const L=y==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp();t(2,_=L.toString())}catch(L){console.error("获取当前时间戳失败:",L)}}async function v(){if(window.wailsBindings)try{const L=y==="milliseconds"?await window.wailsBindings.GetCurrentTimestampMs():await window.wailsBindings.GetCurrentTimestamp(),T=y==="milliseconds"?await window.wailsBindings.TimestampToDateTimeMs(L,m()):await window.wailsBindings.TimestampToDateTime(L,m());t(3,i=T)}catch(L){console.error("获取当前时间失败:",L)}}async function s(){if(n)try{await navigator.clipboard.writeText(n)}catch(L){console.error("复制失败:",L)}}function c(){t(2,_=""),t(3,i=""),t(4,n="")}function o(L){(L.ctrlKey||L.metaKey)&&L.key.toLowerCase()==="enter"&&!u&&(p==="toDateTime"&&_.trim()||p==="toTimestamp"&&i.trim())&&(L.preventDefault(),w())}const l=()=>{t(0,p="toDateTime"),c()},f=()=>{t(0,p="toTimestamp"),c()},x=()=>{t(1,y="seconds"),c()},C=()=>{t(1,y="milliseconds"),c()};function E(){_=ts(this.value),t(2,_)}function k(){i=this.value,t(3,i)}return r.$$set=L=>{"themeStore"in L&&t(13,d=L.themeStore)},h(),[p,y,_,i,n,u,b,w,S,v,s,c,o,d,l,f,x,C,E,k]}class Mi extends $e{constructor(e){super(),Qe(this,e,Wl,Il,Ze,{themeStore:13})}}function Bi(r,e,t){const d=r.slice();return d[12]=e[t],d[14]=t,d}function zl(r){let e,t,d,p;return{c(){e=oe("svg"),t=oe("path"),d=F(),p=D("span"),p.textContent="生成 UUID v4",a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M12 4v1m6 11h2m-6 0h-2v4h2v-4zM5 22h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2zM12 8a2 2 0 110-4 2 2 0 010 4z"),a(e,"class","w-6 h-6"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(y,_){V(y,e,_),g(e,t),V(y,d,_),V(y,p,_)},d(y){y&&(K(e),K(d),K(p))}}}function jl(r){let e,t,d,p;return{c(){e=oe("svg"),t=oe("circle"),d=oe("path"),p=re(`
        生成中...`),a(t,"class","opacity-25"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(t,"stroke","currentColor"),a(t,"stroke-width","4"),a(d,"class","opacity-75"),a(d,"fill","currentColor"),a(d,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),a(e,"class","animate-spin w-6 h-6"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24")},m(y,_){V(y,e,_),g(e,t),g(e,d),V(y,p,_)},d(y){y&&(K(e),K(p))}}}function Ti(r){let e,t,d,p,y,_,i,n,u,b,h;function m(v,s){return v[3]===v[0]?Nl:Ul}let w=m(r),S=w(r);return{c(){e=D("div"),t=D("div"),d=D("label"),d.innerHTML=`<span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          生成的 UUID`,p=F(),y=D("button"),S.c(),_=F(),i=D("div"),n=D("code"),u=re(r[0]),a(d,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(y,"class","flex items-center gap-1.5 px-4 py-2 bg-indigo-100 dark:bg-indigo-900/50 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 rounded-lg transition-colors text-indigo-700 dark:text-indigo-300 font-medium text-sm"),a(t,"class","flex items-center justify-between mb-3"),a(n,"class","text-lg font-mono text-indigo-900 dark:text-indigo-100 break-all tracking-wide"),a(i,"class","p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/50 dark:to-purple-950/50 border-2 border-indigo-300 dark:border-indigo-700 rounded-xl")},m(v,s){V(v,e,s),g(e,t),g(t,d),g(t,p),g(t,y),S.m(y,null),g(e,_),g(e,i),g(i,n),g(n,u),b||(h=se(y,"click",r[9]),b=!0)},p(v,s){w!==(w=m(v))&&(S.d(1),S=w(v),S&&(S.c(),S.m(y,null))),s&1&&ue(u,v[0])},d(v){v&&K(e),S.d(),b=!1,h()}}}function Ul(r){let e,t,d;return{c(){e=oe("svg"),t=oe("path"),d=re(`
            复制`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,y){V(p,e,y),g(e,t),V(p,d,y)},d(p){p&&(K(e),K(d))}}}function Nl(r){let e,t,d;return{c(){e=oe("svg"),t=oe("path"),d=re(`
            已复制`),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M5 13l4 4L19 7"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,y){V(p,e,y),g(e,t),V(p,d,y)},d(p){p&&(K(e),K(d))}}}function Ai(r){let e,t,d,p,y,_,i,n,u=r[1].length+"",b,h,m,w,S,v,s,c,o=qe(r[1]),l=[];for(let f=0;f<o.length;f+=1)l[f]=Ri(Bi(r,o,f));return{c(){e=D("div"),t=D("div"),d=D("label"),p=oe("svg"),y=oe("path"),_=re(`
          历史记录
          `),i=D("span"),n=re("("),b=re(u),h=re("/10)"),m=F(),w=D("button"),w.innerHTML=`<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
          清空`,S=F(),v=D("div");for(let f=0;f<l.length;f+=1)l[f].c();a(y,"stroke-linecap","round"),a(y,"stroke-linejoin","round"),a(y,"stroke-width","2"),a(y,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),a(p,"class","w-4 h-4"),a(p,"fill","none"),a(p,"stroke","currentColor"),a(p,"viewBox","0 0 24 24"),a(i,"class","text-xs font-normal text-gray-500 dark:text-gray-400"),a(d,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"),a(w,"class","text-xs flex items-center gap-1 px-3 py-1.5 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-lg transition-colors text-red-700 dark:text-red-300"),a(t,"class","flex items-center justify-between mb-3"),a(v,"class","space-y-2 max-h-64 overflow-y-auto scrollbar-thin")},m(f,x){V(f,e,x),g(e,t),g(t,d),g(d,p),g(p,y),g(d,_),g(d,i),g(i,n),g(i,b),g(i,h),g(t,m),g(t,w),g(e,S),g(e,v);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(v,null);s||(c=se(w,"click",r[6]),s=!0)},p(f,x){if(x&2&&u!==(u=f[1].length+"")&&ue(b,u),x&170){o=qe(f[1]);let C;for(C=0;C<o.length;C+=1){const E=Bi(f,o,C);l[C]?l[C].p(E,x):(l[C]=Ri(E),l[C].c(),l[C].m(v,null))}for(;C<l.length;C+=1)l[C].d(1);l.length=o.length}},d(f){f&&K(e),Nt(l,f),s=!1,c()}}}function Kl(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),a(e,"class","w-4 h-4"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function Vl(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M5 13l4 4L19 7"),a(e,"class","w-4 h-4 text-green-600 dark:text-green-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function Ri(r){let e,t,d=r[12]+"",p,y,_,i,n,u,b,h,m;function w(){return r[10](r[12])}function S(o,l){return o[3]===o[12]?Vl:Kl}let v=S(r),s=v(r);function c(){return r[11](r[12])}return{c(){e=D("div"),t=D("code"),p=re(d),y=F(),_=D("div"),i=D("button"),i.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',n=F(),u=D("button"),s.c(),b=F(),a(t,"class","text-sm font-mono text-gray-700 dark:text-gray-300 truncate mr-4"),a(i,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),a(i,"title","使用此 UUID"),a(u,"class","p-1.5 text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"),a(u,"title","复制"),a(_,"class","flex items-center gap-2 shrink-0"),a(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors group")},m(o,l){V(o,e,l),g(e,t),g(t,p),g(e,y),g(e,_),g(_,i),g(_,n),g(_,u),s.m(u,null),g(e,b),h||(m=[se(i,"click",w),se(u,"click",c)],h=!0)},p(o,l){r=o,l&2&&d!==(d=r[12]+"")&&ue(p,d),v!==(v=S(r))&&(s.d(1),s=v(r),s&&(s.c(),s.m(u,null)))},d(o){o&&K(e),s.d(),h=!1,Be(m)}}}function Oi(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="text-6xl mb-4 opacity-50">🎲</div> <p class="text-gray-500 dark:text-gray-400">点击上方按钮生成 UUID v4</p>',a(e,"class","text-center py-8")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function ql(r){let e,t,d,p,y,_,i,n,u,b;function h(c,o){return c[2]?jl:zl}let m=h(r),w=m(r),S=r[0]&&Ti(r),v=r[1].length>0&&Ai(r),s=!r[0]&&Oi();return{c(){e=D("div"),t=D("div"),d=D("button"),w.c(),p=F(),y=D("div"),_=F(),S&&S.c(),i=F(),v&&v.c(),n=F(),s&&s.c(),a(y,"class","absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"),d.disabled=r[2],a(d,"class","group relative inline-flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl font-bold text-lg transition-all duration-200 shadow-2xl hover:shadow-3xl"),a(t,"class","text-center"),a(e,"class","space-y-6")},m(c,o){V(c,e,o),g(e,t),g(t,d),w.m(d,null),g(d,p),g(d,y),g(e,_),S&&S.m(e,null),g(e,i),v&&v.m(e,null),g(e,n),s&&s.m(e,null),u||(b=se(d,"click",r[4]),u=!0)},p(c,[o]){m!==(m=h(c))&&(w.d(1),w=m(c),w&&(w.c(),w.m(d,p))),o&4&&(d.disabled=c[2]),c[0]?S?S.p(c,o):(S=Ti(c),S.c(),S.m(e,i)):S&&(S.d(1),S=null),c[1].length>0?v?v.p(c,o):(v=Ai(c),v.c(),v.m(e,n)):v&&(v.d(1),v=null),c[0]?s&&(s.d(1),s=null):s||(s=Oi(),s.c(),s.m(e,null))},i:Se,o:Se,d(c){c&&K(e),w.d(),S&&S.d(),v&&v.d(),s&&s.d(),u=!1,b()}}}function Gl(r,e,t){let{themeStore:d}=e,p="",y=[],_=!1,i=null;async function n(){if(window.wailsBindings){t(2,_=!0);try{const v=await window.wailsBindings.GenerateUUIDv4();t(0,p=v),y.length<10?t(1,y=[v,...y]):t(1,y=[v,...y.slice(0,9)])}catch(v){console.error("UUID 生成失败:",v),alert("UUID 生成失败: "+(v.message||v))}finally{t(2,_=!1)}}}async function u(v){try{await navigator.clipboard.writeText(v),t(3,i=v),setTimeout(()=>t(3,i=null),2e3)}catch(s){console.error("复制失败:",s)}}function b(){t(1,y=[])}function h(v){t(0,p=v)}const m=()=>u(p),w=v=>h(v),S=v=>u(v);return r.$$set=v=>{"themeStore"in v&&t(8,d=v.themeStore)},[p,y,_,i,n,u,b,h,d,m,w,S]}class Pi extends $e{constructor(e){super(),Qe(this,e,Gl,ql,Ze,{themeStore:8})}}function Ii(r,e,t){const d=r.slice();return d[12]=e[t],d}function Hi(r){let e,t,d,p,y,_,i,n,u,b,h,m=[],w=new Map,S,v,s,c,o,l,f,x,C,E=qe(r[4]);const k=O=>O[12].id;for(let O=0;O<E.length;O+=1){let A=Ii(r,E,O),j=k(A);w.set(j,m[O]=Wi(j,A))}const L=[Xl,Jl],T=[];function R(O,A){return O[3]?0:1}return o=R(r),l=T[o]=L[o](r),{c(){e=D("div"),t=D("div"),d=F(),p=D("div"),y=D("div"),_=D("div"),i=D("div"),i.innerHTML='<h3 class="text-lg font-semibold tracking-tight bg-gradient-to-r from-slate-800 to-cyan-600 dark:from-slate-100 dark:to-cyan-300 bg-clip-text text-transparent">开发工具</h3> <div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 mt-1">Toolkit</div>',n=F(),u=D("button"),u.innerHTML='<svg class="w-4 h-4 text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b=F(),h=D("div");for(let O=0;O<m.length;O+=1)m[O].c();S=F(),v=D("div"),v.innerHTML='<div class="text-[11px] uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 text-center">快捷键: 按 ESC 关闭</div>',s=F(),c=D("div"),l.c(),a(t,"class","absolute inset-0 bg-gradient-to-br from-slate-900/40 via-slate-800/20 to-slate-700/10 dark:from-black/70 dark:via-black/55 dark:to-slate-900/40 backdrop-blur-md transition-opacity"),a(u,"class","p-2 rounded-lg transition-all duration-200 group hover:bg-slate-200/70 dark:hover:bg-slate-800/70"),a(u,"title","关闭"),a(_,"class","flex items-center justify-between mb-6"),a(h,"class","space-y-2 flex-1 overflow-y-auto"),a(v,"class","mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-800/80"),a(y,"class","w-72 bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950 border-r border-slate-200/70 dark:border-slate-800/80 p-5 flex flex-col"),a(c,"class","flex-1 flex flex-col overflow-hidden"),a(p,"class","relative w-full max-w-5xl bg-white/92 dark:bg-slate-900/85 rounded-2xl shadow-[0_20px_70px_-30px_rgba(15,23,42,0.8)] m-4 max-h-[85vh] overflow-hidden flex border border-slate-200/70 dark:border-slate-700/60 ring-1 ring-slate-200/60 dark:ring-slate-700/40"),a(e,"class","fixed inset-0 z-50 flex items-start justify-center pt-14 md:pt-16"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"tabindex","-1")},m(O,A){V(O,e,A),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),g(_,i),g(_,n),g(_,u),g(y,b),g(y,h);for(let j=0;j<m.length;j+=1)m[j]&&m[j].m(h,null);g(y,S),g(y,v),g(p,s),g(p,c),T[o].m(c,null),r[11](e),f=!0,x||(C=[se(u,"click",r[9]),se(e,"click",r[5]),se(e,"keydown",r[8])],x=!0)},p(O,A){A&88&&(E=qe(O[4]),m=Ft(m,A,k,1,O,E,w,h,Gt,Wi,null,Ii));let j=o;o=R(O),o===j?T[o].p(O,A):(ht(),De(T[j],1,1,()=>{T[j]=null}),dt(),l=T[o],l?l.p(O,A):(l=T[o]=L[o](O),l.c()),Ee(l,1),l.m(c,null))},i(O){f||(Ee(l),f=!0)},o(O){De(l),f=!1},d(O){O&&K(e);for(let A=0;A<m.length;A+=1)m[A].d();T[o].d(),r[11](null),x=!1,Be(C)}}}function Fi(r){let e;return{c(){e=D("span"),a(e,"class","absolute left-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-cyan-400 via-sky-500 to-indigo-500")},m(t,d){V(t,e,d)},d(t){t&&K(e)}}}function Wi(r,e){let t,d,p,y=e[12].icon+"",_,i,n,u=e[12].name+"",b,h,m,w,S,v,s=e[3]===e[12].id&&Fi();function c(){return e[10](e[12])}return{key:r,first:null,c(){t=D("button"),s&&s.c(),d=F(),p=D("span"),_=re(y),i=F(),n=D("span"),b=re(u),m=F(),a(p,"class",`text-2xl ${e[12].color}`),a(n,"class",h=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`),a(t,"class",w="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70")),this.first=t},m(o,l){V(o,t,l),s&&s.m(t,null),g(t,d),g(t,p),g(p,_),g(t,i),g(t,n),g(n,b),g(t,m),S||(v=se(t,"click",c),S=!0)},p(o,l){e=o,e[3]===e[12].id?s||(s=Fi(),s.c(),s.m(t,d)):s&&(s.d(1),s=null),l&8&&h!==(h=`text-sm font-semibold transition-colors ${e[3]===e[12].id?"text-slate-800 dark:text-slate-100":"text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white"}`)&&a(n,"class",h),l&8&&w!==(w="relative w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group border "+(e[3]===e[12].id?"bg-white/90 dark:bg-slate-900/80 border-slate-200 dark:border-slate-700 shadow-sm":"bg-transparent border-transparent hover:bg-white/70 dark:hover:bg-slate-900/60 hover:border-slate-200/70 dark:hover:border-slate-700/70"))&&a(t,"class",w)},d(o){o&&K(t),s&&s.d(),S=!1,v()}}}function Jl(r){let e;return{c(){e=D("div"),e.innerHTML='<div class="text-center max-w-sm"><div class="text-6xl mb-4">🛠️</div> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2">选择一个工具</h3> <p class="text-sm text-slate-500 dark:text-slate-400">从左侧选择一个开发工具开始使用</p></div>',a(e,"class","flex-1 flex items-center justify-center p-12 bg-slate-50/60 dark:bg-slate-950/30")},m(t,d){V(t,e,d)},p:Se,i:Se,o:Se,d(t){t&&K(e)}}}function Xl(r){var o,l;let e,t,d,p=((o=r[7]())==null?void 0:o.icon)+"",y,_,i=((l=r[7]())==null?void 0:l.name)+"",n,u,b,h,m,w,S;const v=[ec,$l,Ql,Zl,Yl],s=[];function c(f,x){return f[3]==="json"?0:f[3]==="base64"?1:f[3]==="hash"?2:f[3]==="timestamp"?3:f[3]==="uuid"?4:-1}return~(m=c(r))&&(w=s[m]=v[m](r)),{c(){var f;e=D("div"),t=D("h2"),d=D("span"),y=re(p),_=F(),n=re(i),u=F(),b=D("div"),h=D("div"),w&&w.c(),a(d,"class",`text-2xl ${(f=r[7]())==null?void 0:f.color}`),a(t,"class","text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2"),a(e,"class","px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-900/80 dark:to-slate-950"),a(h,"class","rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/70 p-5 shadow-sm"),a(b,"class","flex-1 overflow-y-auto p-6 bg-slate-50/60 dark:bg-slate-950/30")},m(f,x){V(f,e,x),g(e,t),g(t,d),g(d,y),g(t,_),g(t,n),V(f,u,x),V(f,b,x),g(b,h),~m&&s[m].m(h,null),S=!0},p(f,x){let C=m;m=c(f),m===C?~m&&s[m].p(f,x):(w&&(ht(),De(s[C],1,1,()=>{s[C]=null}),dt()),~m?(w=s[m],w?w.p(f,x):(w=s[m]=v[m](f),w.c()),Ee(w,1),w.m(h,null)):w=null)},i(f){S||(Ee(w),S=!0)},o(f){De(w),S=!1},d(f){f&&(K(e),K(u),K(b)),~m&&s[m].d()}}}function Yl(r){let e,t,d;var p=Pi;function y(_,i){return{props:{themeStore:_[1]}}}return p&&(e=bt(p,y(r))),{c(){e&&je(e.$$.fragment),t=ct()},m(_,i){e&&Fe(e,_,i),V(_,t,i),d=!0},p(_,i){if(p!==(p=Pi)){if(e){ht();const n=e;De(n.$$.fragment,1,0,()=>{We(n,1)}),dt()}p?(e=bt(p,y(_)),je(e.$$.fragment),Ee(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){d||(e&&Ee(e.$$.fragment,_),d=!0)},o(_){e&&De(e.$$.fragment,_),d=!1},d(_){_&&K(t),e&&We(e,_)}}}function Zl(r){let e,t,d;var p=Mi;function y(_,i){return{props:{themeStore:_[1]}}}return p&&(e=bt(p,y(r))),{c(){e&&je(e.$$.fragment),t=ct()},m(_,i){e&&Fe(e,_,i),V(_,t,i),d=!0},p(_,i){if(p!==(p=Mi)){if(e){ht();const n=e;De(n.$$.fragment,1,0,()=>{We(n,1)}),dt()}p?(e=bt(p,y(_)),je(e.$$.fragment),Ee(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){d||(e&&Ee(e.$$.fragment,_),d=!0)},o(_){e&&De(e.$$.fragment,_),d=!1},d(_){_&&K(t),e&&We(e,_)}}}function Ql(r){let e,t,d;var p=Li;function y(_,i){return{props:{themeStore:_[1]}}}return p&&(e=bt(p,y(r))),{c(){e&&je(e.$$.fragment),t=ct()},m(_,i){e&&Fe(e,_,i),V(_,t,i),d=!0},p(_,i){if(p!==(p=Li)){if(e){ht();const n=e;De(n.$$.fragment,1,0,()=>{We(n,1)}),dt()}p?(e=bt(p,y(_)),je(e.$$.fragment),Ee(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){d||(e&&Ee(e.$$.fragment,_),d=!0)},o(_){e&&De(e.$$.fragment,_),d=!1},d(_){_&&K(t),e&&We(e,_)}}}function $l(r){let e,t,d;var p=bi;function y(_,i){return{props:{themeStore:_[1]}}}return p&&(e=bt(p,y(r))),{c(){e&&je(e.$$.fragment),t=ct()},m(_,i){e&&Fe(e,_,i),V(_,t,i),d=!0},p(_,i){if(p!==(p=bi)){if(e){ht();const n=e;De(n.$$.fragment,1,0,()=>{We(n,1)}),dt()}p?(e=bt(p,y(_)),je(e.$$.fragment),Ee(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){d||(e&&Ee(e.$$.fragment,_),d=!0)},o(_){e&&De(e.$$.fragment,_),d=!1},d(_){_&&K(t),e&&We(e,_)}}}function ec(r){let e,t,d;var p=mi;function y(_,i){return{props:{themeStore:_[1]}}}return p&&(e=bt(p,y(r))),{c(){e&&je(e.$$.fragment),t=ct()},m(_,i){e&&Fe(e,_,i),V(_,t,i),d=!0},p(_,i){if(p!==(p=mi)){if(e){ht();const n=e;De(n.$$.fragment,1,0,()=>{We(n,1)}),dt()}p?(e=bt(p,y(_)),je(e.$$.fragment),Ee(e.$$.fragment,1),Fe(e,t.parentNode,t)):e=null}else if(p){const n={};i&2&&(n.themeStore=_[1]),e.$set(n)}},i(_){d||(e&&Ee(e.$$.fragment,_),d=!0)},o(_){e&&De(e.$$.fragment,_),d=!1},d(_){_&&K(t),e&&We(e,_)}}}function tc(r){let e,t,d=r[0]&&Hi(r);return{c(){d&&d.c(),e=ct()},m(p,y){d&&d.m(p,y),V(p,e,y),t=!0},p(p,[y]){p[0]?d?(d.p(p,y),y&1&&Ee(d,1)):(d=Hi(p),d.c(),Ee(d,1),d.m(e.parentNode,e)):d&&(ht(),De(d,1,1,()=>{d=null}),dt())},i(p){t||(Ee(d),t=!0)},o(p){De(d),t=!1},d(p){p&&K(e),d&&d.d(p)}}}function rc(r,e,t){let{isOpen:d=!1}=e,{themeStore:p}=e,y=null,_;const i=[{id:"json",name:"JSON 格式化",icon:"📄",color:"text-purple-500"},{id:"base64",name:"Base64 编解码",icon:"🔐",color:"text-blue-500"},{id:"hash",name:"加密解密",icon:"#️⃣",color:"text-green-500"},{id:"timestamp",name:"时间戳转换",icon:"🕐",color:"text-amber-500"},{id:"uuid",name:"UUID 生成",icon:"🆔",color:"text-indigo-500"}];function n(v){v.target===v.currentTarget&&t(0,d=!1)}function u(v){t(3,y=v)}function b(){return i.find(v=>v.id===y)}function h(v){v.key==="Escape"&&d&&(v.preventDefault(),t(0,d=!1))}const m=()=>t(0,d=!1),w=v=>u(v.id);function S(v){Xe[v?"unshift":"push"](()=>{_=v,t(2,_)})}return r.$$set=v=>{"isOpen"in v&&t(0,d=v.isOpen),"themeStore"in v&&t(1,p=v.themeStore)},r.$$.update=()=>{r.$$.dirty&5&&d&&sr().then(()=>{_&&_.focus()})},[d,p,_,y,i,n,u,b,h,m,w,S]}class ic extends $e{constructor(e){super(),Qe(this,e,rc,tc,Ze,{isOpen:0,themeStore:1})}}function zi(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c;return{c(){e=D("div"),t=D("label"),t.textContent="认证方式",d=F(),p=D("div"),y=D("button"),_=D("div"),i=re("密码"),b=F(),h=D("button"),m=D("div"),w=re("SSH 密钥"),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(_,"class",n=`text-xs font-medium ${r[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(y,"type","button"),a(y,"class",u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(m,"class",S=`text-xs font-medium ${r[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(h,"type","button"),a(h,"class",v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${r[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(p,"class","flex gap-2")},m(o,l){V(o,e,l),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),g(_,i),g(p,b),g(p,h),g(h,m),g(m,w),s||(c=[se(y,"click",r[21]),se(h,"click",r[22])],s=!0)},p(o,l){l[0]&8&&n!==(n=`text-xs font-medium ${o[3]==="password"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(_,"class",n),l[0]&8&&u!==(u=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${o[3]==="password"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(y,"class",u),l[0]&8&&S!==(S=`text-xs font-medium ${o[3]==="key"?"text-purple-700 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(m,"class",S),l[0]&8&&v!==(v=`flex-1 px-3 py-1.5 rounded-md border-2 transition-all ${o[3]==="key"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(h,"class",v)},d(o){o&&K(e),s=!1,Be(c)}}}function ji(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o;function l(L,T){return L[9]?nc:sc}let f=l(r),x=f(r);function C(L,T){return L[9]?ac:oc}let E=C(r),k=E(r);return{c(){e=D("div"),t=D("label"),t.textContent="SSH 私钥文件",d=F(),p=D("div"),y=D("input"),_=F(),i=D("button"),i.textContent="选择文件",n=F(),u=D("div"),b=D("label"),b.textContent="Passphrase（可选）",h=F(),m=D("div"),x.c(),w=F(),S=D("button"),k.c(),v=F(),s=D("p"),s.textContent="如果您的 SSH 密钥文件已加密，请输入 passphrase。否则留空即可。",a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(y,"type","text"),a(y,"placeholder","点击选择密钥文件 (例如: ~/.ssh/id_rsa)"),y.readOnly=!0,a(y,"class","flex-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none transition-all"),a(i,"type","button"),a(i,"class","px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md text-xs font-medium transition-colors whitespace-nowrap"),a(p,"class","flex gap-1.5"),a(b,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(S,"type","button"),a(S,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),a(m,"class","relative"),a(s,"class","mt-0.5 text-[10px] text-gray-500 dark:text-gray-400")},m(L,T){V(L,e,T),g(e,t),g(e,d),g(e,p),g(p,y),ge(y,r[4].keyPath),g(p,_),g(p,i),V(L,n,T),V(L,u,T),g(u,b),g(u,h),g(u,m),x.m(m,null),g(m,w),g(m,S),k.m(S,null),g(u,v),g(u,s),c||(o=[se(y,"input",r[23]),se(i,"click",r[11]),se(S,"click",r[26])],c=!0)},p(L,T){T[0]&16&&y.value!==L[4].keyPath&&ge(y,L[4].keyPath),f===(f=l(L))&&x?x.p(L,T):(x.d(1),x=f(L),x&&(x.c(),x.m(m,w))),E!==(E=C(L))&&(k.d(1),k=E(L),k&&(k.c(),k.m(S,null)))},d(L){L&&(K(e),K(n),K(u)),x.d(),k.d(),c=!1,Be(o)}}}function sc(r){let e,t,d;return{c(){e=D("input"),a(e,"type","password"),a(e,"placeholder","如果密钥已加密，请输入 passphrase"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,y){V(p,e,y),ge(e,r[4].passphrase),t||(d=se(e,"input",r[25]),t=!0)},p(p,y){y[0]&16&&e.value!==p[4].passphrase&&ge(e,p[4].passphrase)},d(p){p&&K(e),t=!1,d()}}}function nc(r){let e,t,d;return{c(){e=D("input"),a(e,"type","text"),a(e,"placeholder","如果密钥已加密，请输入 passphrase"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,y){V(p,e,y),ge(e,r[4].passphrase),t||(d=se(e,"input",r[24]),t=!0)},p(p,y){y[0]&16&&e.value!==p[4].passphrase&&ge(e,p[4].passphrase)},d(p){p&&K(e),t=!1,d()}}}function oc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function ac(r){let e,t,d;return{c(){e=oe("svg"),t=oe("path"),d=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,y){V(p,e,y),g(e,t),g(e,d)},d(p){p&&K(e)}}}function Ui(r){let e,t,d;return{c(){e=D("div"),t=re(r[6]),a(e,"class",d=`p-2 rounded-md text-xs ${r[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)},m(p,y){V(p,e,y),g(e,t)},p(p,y){y[0]&64&&ue(t,p[6]),y[0]&64&&d!==(d=`p-2 rounded-md text-xs ${p[6].includes("成功")?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`)&&a(e,"class",d)},d(p){p&&K(e)}}}function Ni(r){let e,t,d,p,y,_,i,n,u,b;return{c(){e=D("div"),t=D("label"),t.innerHTML='数据库类型 <span class="text-red-500">*</span>',d=F(),p=D("select"),y=D("option"),y.textContent="MySQL",_=D("option"),_.textContent="PostgreSQL",i=D("option"),i.textContent="MongoDB",n=D("option"),n.textContent="Redis",a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),y.__value="mysql",ge(y,y.__value),_.__value="postgresql",ge(_,_.__value),i.__value="mongodb",ge(i,i.__value),n.__value="redis",ge(n,n.__value),a(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),r[4].dbType===void 0&&Vt(()=>r[27].call(p))},m(h,m){V(h,e,m),g(e,t),g(e,d),g(e,p),g(p,y),g(p,_),g(p,i),g(p,n),ar(p,r[4].dbType,!0),u||(b=se(p,"change",r[27]),u=!0)},p(h,m){m[0]&16&&ar(p,h[4].dbType)},d(h){h&&K(e),u=!1,b()}}}function Ki(r){let e,t,d,p,y,_;return{c(){e=D("div"),t=D("label"),t.innerHTML='用户名 <span class="text-red-500">*</span>',d=F(),p=D("input"),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(p,"type","text"),p.required=!0,a(p,"placeholder","root"),a(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){V(i,e,n),g(e,t),g(e,d),g(e,p),ge(p,r[4].username),y||(_=se(p,"input",r[30]),y=!0)},p(i,n){n[0]&16&&p.value!==i[4].username&&ge(p,i[4].username)},d(i){i&&K(e),y=!1,_()}}}function Vi(r){let e,t,d,p,y,_,i,n,u,b,h,m,w;function S(f,x){return f[8]?cc:lc}let v=S(r),s=v(r);function c(f,x){return f[8]?dc:hc}let o=c(r),l=o(r);return{c(){e=D("div"),t=D("label"),t.innerHTML='密码 <span class="text-red-500">*</span>',d=F(),p=D("div"),s.c(),y=F(),_=D("button"),l.c(),i=F(),n=D("div"),u=D("input"),b=F(),h=D("span"),h.textContent="保存密码",a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(_,"type","button"),a(_,"class","absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors"),a(p,"class","relative"),a(u,"type","checkbox"),a(u,"class","w-3.5 h-3.5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"),a(h,"class","text-xs text-gray-700 dark:text-gray-300"),a(n,"class","flex items-center gap-1.5 cursor-pointer")},m(f,x){V(f,e,x),g(e,t),g(e,d),g(e,p),s.m(p,null),g(p,y),g(p,_),l.m(_,null),V(f,i,x),V(f,n,x),g(n,u),u.checked=r[4].savePassword,g(n,b),g(n,h),m||(w=[se(_,"click",r[33]),se(u,"change",r[34])],m=!0)},p(f,x){v===(v=S(f))&&s?s.p(f,x):(s.d(1),s=v(f),s&&(s.c(),s.m(p,y))),o!==(o=c(f))&&(l.d(1),l=o(f),l&&(l.c(),l.m(_,null))),x[0]&16&&(u.checked=f[4].savePassword)},d(f){f&&(K(e),K(i),K(n)),s.d(),l.d(),m=!1,Be(w)}}}function lc(r){let e,t,d;return{c(){e=D("input"),a(e,"type","password"),a(e,"placeholder","输入密码"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,y){V(p,e,y),ge(e,r[4].password),t||(d=se(e,"input",r[32]),t=!0)},p(p,y){y[0]&16&&e.value!==p[4].password&&ge(e,p[4].password)},d(p){p&&K(e),t=!1,d()}}}function cc(r){let e,t,d;return{c(){e=D("input"),a(e,"type","text"),a(e,"placeholder","输入密码"),a(e,"class","w-full px-3 py-1.5 pr-10 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(p,y){V(p,e,y),ge(e,r[4].password),t||(d=se(e,"input",r[31]),t=!0)},p(p,y){y[0]&16&&e.value!==p[4].password&&ge(e,p[4].password)},d(p){p&&K(e),t=!1,d()}}}function hc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function dc(r){let e,t,d;return{c(){e=oe("svg"),t=oe("path"),d=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),a(e,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(p,y){V(p,e,y),g(e,t),g(e,d)},d(p){p&&K(e)}}}function qi(r){let e,t,d,p,y,_;return{c(){e=D("div"),t=D("label"),t.textContent="数据库名",d=F(),p=D("input"),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(p,"type","text"),a(p,"placeholder","例如：production_db"),a(p,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all")},m(i,n){V(i,e,n),g(e,t),g(e,d),g(e,p),ge(p,r[4].database),y||(_=se(p,"input",r[35]),y=!0)},p(i,n){n[0]&16&&p.value!==i[4].database&&ge(p,i[4].database)},d(i){i&&K(e),y=!1,_()}}}function uc(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,C,E,k,L,T,R,O,A,j,Z,ie,te,Y,B,P,H,z,U,G,$,ne,W,M,q,I,X,J,N,ae,Q,ce,he,Me,xe,Te,me,we,ke,de,fe,He,Ge,ze,Ue,Pe,Re,ye,rt,Ie,Ne=r[5]?"测试中...":"测试连接",ft,it,Ye,lt=r[7]?"保存中...":r[1]?"更新连接":"添加连接",Je,et,nt,le=r[2]==="ssh"&&zi(r),ve=r[3]==="key"&&ji(r),Ke=r[6]&&Ui(r),ee=r[2]==="database"&&Ni(r),_e=(r[3]==="password"||r[2]==="database"||r[2]==="docker")&&Ki(r),Ce=r[3]==="password"&&Vi(r),Oe=r[2]==="database"&&qi(r);return{c(){e=D("div"),t=D("label"),t.textContent="连接类型",d=F(),p=D("div"),y=D("button"),_=D("div"),i=oe("svg"),n=oe("path"),b=F(),h=D("span"),m=re("SSH"),v=F(),s=D("button"),c=D("div"),o=oe("svg"),l=oe("path"),x=F(),C=D("span"),E=re("数据库"),T=F(),R=D("button"),O=D("div"),A=oe("svg"),j=oe("path"),ie=F(),te=D("span"),Y=re("Docker"),H=F(),z=D("form"),U=D("div"),G=D("label"),G.innerHTML='连接名称 <span class="text-red-500">*</span>',$=F(),ne=D("input"),W=F(),le&&le.c(),M=F(),ve&&ve.c(),q=F(),Ke&&Ke.c(),I=F(),ee&&ee.c(),X=F(),J=D("div"),N=D("div"),ae=D("label"),ae.innerHTML='主机地址 <span class="text-red-500">*</span>',Q=F(),ce=D("input"),he=F(),Me=D("div"),xe=D("label"),xe.innerHTML='端口 <span class="text-red-500">*</span>',Te=F(),me=D("input"),we=F(),_e&&_e.c(),ke=F(),Ce&&Ce.c(),de=F(),Oe&&Oe.c(),fe=F(),He=D("div"),Ge=D("label"),Ge.textContent="分组",ze=F(),Ue=D("input"),Pe=F(),Re=D("div"),ye=D("button"),ye.textContent="取消",rt=F(),Ie=D("button"),ft=re(Ne),it=F(),Ye=D("button"),Je=re(lt),a(t,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"),a(n,"stroke-linecap","round"),a(n,"stroke-linejoin","round"),a(n,"stroke-width","2"),a(n,"d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"),a(i,"class",u=`w-4 h-4 ${r[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),a(i,"fill","none"),a(i,"stroke","currentColor"),a(i,"viewBox","0 0 24 24"),a(h,"class",w=`text-xs font-medium ${r[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(_,"class","flex items-center justify-center gap-1"),a(y,"type","button"),a(y,"class",S=`p-2 rounded-lg border-2 transition-all ${r[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"stroke-width","2"),a(l,"d","M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"),a(o,"class",f=`w-4 h-4 ${r[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),a(o,"fill","none"),a(o,"stroke","currentColor"),a(o,"viewBox","0 0 24 24"),a(C,"class",k=`text-xs font-medium ${r[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(c,"class","flex items-center justify-center gap-1"),a(s,"type","button"),a(s,"class",L=`p-2 rounded-lg border-2 transition-all ${r[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(j,"d","M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-3.333h2.118a.186.186 0 00.186-.186V5.671a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.954 3.333h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H8.075a.186.186 0 00-.186.186v1.888c0 .102.083.185.186.185m-2.954-3.333h2.119a.186.186 0 00.185-.186V5.671a.185.185 0 00-.185-.185H5.12a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.93 3.333h2.12a.185.185 0 00.185-.185V9.006a.185.185 0 00-.186-.186h-2.12a.185.185 0 00-.184.186v1.888c0 .102.083.185.185.185M20.69 6.662c.057.16.09.331.09.51v7.9c0 3.058-2.724 4.928-8.78 4.928-6.055 0-8.779-1.87-8.779-4.928v-7.9c0-.179.033-.35.09-.51C1.536 7.396 0 9.522 0 12.072v3.639c0 4.072 3.608 6.789 12 6.789 8.391 0 12-2.717 12-6.79v-3.638c0-2.55-1.536-4.677-4.31-6.41"),a(A,"class",Z=`w-4 h-4 ${r[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`),a(A,"fill","currentColor"),a(A,"viewBox","0 0 24 24"),a(te,"class",B=`text-xs font-medium ${r[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`),a(O,"class","flex items-center justify-center gap-1"),a(R,"type","button"),a(R,"class",P=`p-2 rounded-lg border-2 transition-all ${r[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`),a(p,"class","grid grid-cols-3 gap-2"),a(e,"class","mb-4"),a(G,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(ne,"type","text"),ne.required=!0,a(ne,"placeholder","例如：生产服务器-01"),a(ne,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(ae,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(ce,"type","text"),ce.required=!0,a(ce,"placeholder","192.168.1.10 或 example.com"),a(ce,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(N,"class","col-span-2"),a(xe,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(me,"type","text"),me.required=!0,a(me,"placeholder",r[13]()),a(me,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(J,"class","grid grid-cols-3 gap-2"),a(Ge,"class","block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"),a(Ue,"type","text"),a(Ue,"placeholder","例如：生产环境"),a(Ue,"class","w-full px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"),a(ye,"type","button"),a(ye,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors"),a(Ie,"type","button"),Ie.disabled=r[5],a(Ie,"class","px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),a(Ye,"type","submit"),Ye.disabled=r[7],a(Ye,"class","flex-1 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-md text-xs font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),a(Re,"class","flex gap-2 pt-3"),a(z,"class","space-y-3")},m(pe,Ae){V(pe,e,Ae),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),g(_,i),g(i,n),g(_,b),g(_,h),g(h,m),g(p,v),g(p,s),g(s,c),g(c,o),g(o,l),g(c,x),g(c,C),g(C,E),g(p,T),g(p,R),g(R,O),g(O,A),g(A,j),g(O,ie),g(O,te),g(te,Y),V(pe,H,Ae),V(pe,z,Ae),g(z,U),g(U,G),g(U,$),g(U,ne),ge(ne,r[4].name),g(z,W),le&&le.m(z,null),g(z,M),ve&&ve.m(z,null),g(z,q),Ke&&Ke.m(z,null),g(z,I),ee&&ee.m(z,null),g(z,X),g(z,J),g(J,N),g(N,ae),g(N,Q),g(N,ce),ge(ce,r[4].host),g(J,he),g(J,Me),g(Me,xe),g(Me,Te),g(Me,me),ge(me,r[4].port),g(z,we),_e&&_e.m(z,null),g(z,ke),Ce&&Ce.m(z,null),g(z,de),Oe&&Oe.m(z,null),g(z,fe),g(z,He),g(He,Ge),g(He,ze),g(He,Ue),ge(Ue,r[4].group),g(z,Pe),g(z,Re),g(Re,ye),g(Re,rt),g(Re,Ie),g(Ie,ft),g(Re,it),g(Re,Ye),g(Ye,Je),et||(nt=[se(y,"click",r[17]),se(s,"click",r[18]),se(R,"click",r[19]),se(ne,"input",r[20]),se(ce,"input",r[28]),se(me,"input",r[29]),se(Ue,"input",r[36]),se(ye,"click",r[37]),se(Ie,"click",r[10]),se(z,"submit",Os(r[12]))],et=!0)},p(pe,Ae){Ae[0]&4&&u!==(u=`w-4 h-4 ${pe[2]==="ssh"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&a(i,"class",u),Ae[0]&4&&w!==(w=`text-xs font-medium ${pe[2]==="ssh"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(h,"class",w),Ae[0]&4&&S!==(S=`p-2 rounded-lg border-2 transition-all ${pe[2]==="ssh"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(y,"class",S),Ae[0]&4&&f!==(f=`w-4 h-4 ${pe[2]==="database"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&a(o,"class",f),Ae[0]&4&&k!==(k=`text-xs font-medium ${pe[2]==="database"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(C,"class",k),Ae[0]&4&&L!==(L=`p-2 rounded-lg border-2 transition-all ${pe[2]==="database"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(s,"class",L),Ae[0]&4&&Z!==(Z=`w-4 h-4 ${pe[2]==="docker"?"text-purple-600":"text-gray-600 dark:text-gray-400"}`)&&a(A,"class",Z),Ae[0]&4&&B!==(B=`text-xs font-medium ${pe[2]==="docker"?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`)&&a(te,"class",B),Ae[0]&4&&P!==(P=`p-2 rounded-lg border-2 transition-all ${pe[2]==="docker"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`)&&a(R,"class",P),Ae[0]&16&&ne.value!==pe[4].name&&ge(ne,pe[4].name),pe[2]==="ssh"?le?le.p(pe,Ae):(le=zi(pe),le.c(),le.m(z,M)):le&&(le.d(1),le=null),pe[3]==="key"?ve?ve.p(pe,Ae):(ve=ji(pe),ve.c(),ve.m(z,q)):ve&&(ve.d(1),ve=null),pe[6]?Ke?Ke.p(pe,Ae):(Ke=Ui(pe),Ke.c(),Ke.m(z,I)):Ke&&(Ke.d(1),Ke=null),pe[2]==="database"?ee?ee.p(pe,Ae):(ee=Ni(pe),ee.c(),ee.m(z,X)):ee&&(ee.d(1),ee=null),Ae[0]&16&&ce.value!==pe[4].host&&ge(ce,pe[4].host),Ae[0]&16&&me.value!==pe[4].port&&ge(me,pe[4].port),pe[3]==="password"||pe[2]==="database"||pe[2]==="docker"?_e?_e.p(pe,Ae):(_e=Ki(pe),_e.c(),_e.m(z,ke)):_e&&(_e.d(1),_e=null),pe[3]==="password"?Ce?Ce.p(pe,Ae):(Ce=Vi(pe),Ce.c(),Ce.m(z,de)):Ce&&(Ce.d(1),Ce=null),pe[2]==="database"?Oe?Oe.p(pe,Ae):(Oe=qi(pe),Oe.c(),Oe.m(z,fe)):Oe&&(Oe.d(1),Oe=null),Ae[0]&16&&Ue.value!==pe[4].group&&ge(Ue,pe[4].group),Ae[0]&32&&Ne!==(Ne=pe[5]?"测试中...":"测试连接")&&ue(ft,Ne),Ae[0]&32&&(Ie.disabled=pe[5]),Ae[0]&130&&lt!==(lt=pe[7]?"保存中...":pe[1]?"更新连接":"添加连接")&&ue(Je,lt),Ae[0]&128&&(Ye.disabled=pe[7])},d(pe){pe&&(K(e),K(H),K(z)),le&&le.d(),ve&&ve.d(),Ke&&Ke.d(),ee&&ee.d(),_e&&_e.d(),Ce&&Ce.d(),Oe&&Oe.d(),et=!1,Be(nt)}}}function fc(r){let e,t,d;function p(_){r[39](_)}let y={onClose:r[38],title:r[1]?"编辑连接":"添加连接",size:"sm",$$slots:{default:[uc]},$$scope:{ctx:r}};return r[0]!==void 0&&(y.isOpen=r[0]),e=new hr({props:y}),Xe.push(()=>at(e,"isOpen",p)),{c(){je(e.$$.fragment)},m(_,i){Fe(e,_,i),d=!0},p(_,i){const n={};i[0]&1&&(n.onClose=_[38]),i[0]&2&&(n.title=_[1]?"编辑连接":"添加连接"),i[0]&1023|i[1]&4096&&(n.$$scope={dirty:i,ctx:_}),!t&&i[0]&1&&(t=!0,n.isOpen=_[0],ot(()=>t=!1)),e.$set(n)},i(_){d||(Ee(e.$$.fragment,_),d=!0)},o(_){De(e.$$.fragment,_),d=!1},d(_){We(e,_)}}}function _c(r,e,t){let{isOpen:d=!1}=e,{onAdd:p=()=>{}}=e,{onUpdate:y=()=>{}}=e,{editingAsset:_=null}=e,i="ssh",n="password",u=!1,b="",h=!1,m=!1,w=!1,S=!1,v=!1,s={id:"",name:"",host:"",port:"",username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""};async function c(){if(!window.wailsBindings){t(6,b="Wails 绑定未加载");return}if(!s.host){t(6,b="请填写主机地址");return}if(n==="password"&&!s.password){t(6,b="请输入密码以测试连接");return}if(n==="password"&&!s.username){t(6,b="请填写用户名");return}if(n==="key"&&!s.keyPath){t(6,b="请选择 SSH 密钥文件");return}t(5,u=!0),t(6,b="");try{const I=n==="key"?s.keyPath:s.password;await window.wailsBindings.TestConnection(s.host,parseInt(s.port),s.username,n,I,s.passphrase||""),t(6,b="✓ 连接成功")}catch(I){console.error("Connection test failed:",I),t(6,b="✗ 连接失败: "+I)}finally{t(5,u=!1)}}async function o(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}try{const I=await window.wailsBindings.SelectSSHKeyFile();I&&t(4,s.keyPath=I,s)}catch(I){console.error("Failed to select key file:",I),t(6,b="选择密钥文件失败: "+I)}}async function l(){if(!window.wailsBindings){alert("Wails 绑定未加载");return}if(!s.name||!s.host){alert("请填写必填字段（连接名称、主机地址）");return}if(n==="password"&&!s.username){alert("密码认证需要填写用户名");return}if(n==="password"&&!s.password){alert("密码认证需要输入密码");return}if(n==="key"&&!s.keyPath){alert("密钥认证需要选择密钥文件");return}t(7,h=!0);try{const I=!!s.id,X={id:I?s.id:`conn_${Date.now()}`,name:s.name,host:s.host,port:parseInt(s.port),user:s.username,auth_type:n,key_path:n==="key"?s.keyPath:"",tags:[s.group||"默认分组"],type:i,metadata:{database:s.database||void 0}};I?(await window.wailsBindings.UpdateConnection(X),n==="password"&&s.password&&s.savePassword?await window.wailsBindings.SavePassword(X.id,s.password):n==="password"&&!s.savePassword&&await window.wailsBindings.DeletePassword(X.id),y(X)):(p(X),n==="password"&&s.password&&s.savePassword&&await window.wailsBindings.SavePassword(X.id,s.password)),t(0,d=!1)}catch(I){console.error("Failed to save connection:",I),alert("保存连接失败: "+I)}finally{t(7,h=!1)}}function f(){t(4,s={id:"",name:"",host:"",port:x(),username:"",password:"",savePassword:!1,keyPath:"",passphrase:"",group:"",dbType:"mysql",database:""}),t(6,b=""),t(8,m=!1),t(9,w=!1)}function x(){switch(i){case"ssh":return"22";case"docker":return"2375";case"database":switch(s.dbType){case"mysql":return"3306";case"postgresql":return"5432";case"mongodb":return"27017";case"redis":return"6379";default:return""}default:return""}}async function C(){var I,X,J;if(!(!_||!d||S))try{const N=await window.wailsBindings.GetConnection(_.id);if(N){t(4,s={id:N.id,name:N.name||"",host:N.host||"",port:((I=N.port)==null?void 0:I.toString())||"",username:N.user||"",password:"",savePassword:!1,keyPath:N.key_path||"",passphrase:"",group:((X=N.tags)==null?void 0:X[0])||"",dbType:"mysql",database:((J=N.metadata)==null?void 0:J.database)||""}),t(2,i=N.type||"ssh"),t(3,n=N.auth_type||"password"),S=!0;try{if(await window.wailsBindings.HasPassword(N.id)){t(4,s.savePassword=!0,s);const Q=await window.wailsBindings.GetPassword(N.id);t(4,s.password=Q||"",s)}}catch(ae){console.warn("Failed to load password:",ae)}}}catch(N){console.error("Failed to load connection:",N)}}const E=()=>t(2,i="ssh"),k=()=>t(2,i="database"),L=()=>t(2,i="docker");function T(){s.name=this.value,t(4,s),t(0,d),t(1,_)}const R=()=>{t(3,n="password"),t(6,b="")},O=()=>{t(3,n="key"),t(6,b="")};function A(){s.keyPath=this.value,t(4,s),t(0,d),t(1,_)}function j(){s.passphrase=this.value,t(4,s),t(0,d),t(1,_)}function Z(){s.passphrase=this.value,t(4,s),t(0,d),t(1,_)}const ie=()=>t(9,w=!w);function te(){s.dbType=rs(this),t(4,s),t(0,d),t(1,_)}function Y(){s.host=this.value,t(4,s),t(0,d),t(1,_)}function B(){s.port=this.value,t(4,s),t(0,d),t(1,_)}function P(){s.username=this.value,t(4,s),t(0,d),t(1,_)}function H(){s.password=this.value,t(4,s),t(0,d),t(1,_)}function z(){s.password=this.value,t(4,s),t(0,d),t(1,_)}const U=()=>t(8,m=!m);function G(){s.savePassword=this.checked,t(4,s),t(0,d),t(1,_)}function $(){s.database=this.value,t(4,s),t(0,d),t(1,_)}function ne(){s.group=this.value,t(4,s),t(0,d),t(1,_)}const W=()=>t(0,d=!1),M=()=>{t(0,d=!1)};function q(I){d=I,t(0,d)}return r.$$set=I=>{"isOpen"in I&&t(0,d=I.isOpen),"onAdd"in I&&t(14,p=I.onAdd),"onUpdate"in I&&t(15,y=I.onUpdate),"editingAsset"in I&&t(1,_=I.editingAsset)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(16,v=d),r.$$.dirty[0]&65537&&v&&!d&&f(),r.$$.dirty[0]&19&&d&&!_&&!s.id&&(s.port||t(4,s.port=x(),s)),r.$$.dirty[0]&16&&s.port===""&&t(4,s.port=x(),s),r.$$.dirty[0]&12&&(i==="ssh"?n!=="password"&&n!=="key"&&t(3,n="password"):t(3,n="password")),r.$$.dirty[0]&3&&d&&_&&C(),r.$$.dirty[0]&18&&_&&s.id!==_.id&&(S=!1),r.$$.dirty[0]&65539&&!v&&d&&_&&(S=!1)},[d,_,i,n,s,u,b,h,m,w,c,o,l,x,p,y,v,E,k,L,T,R,O,A,j,Z,ie,te,Y,B,P,H,z,U,G,$,ne,W,M,q]}class pc extends $e{constructor(e){super(),Qe(this,e,_c,fc,Ze,{isOpen:0,onAdd:14,onUpdate:15,editingAsset:1},null,[-1,-1])}}function gc(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,C,E,k,L,T,R,O,A,j,Z,ie;return{c(){e=D("div"),t=D("div"),t.textContent="哈",d=F(),p=D("div"),y=D("h3"),_=re("AHaSSHTools"),n=F(),u=D("p"),b=re("啊哈 SSH 连接工具"),m=F(),w=D("p"),S=re("版本 1.0.0"),s=F(),c=D("p"),o=re("一个功能完整的跨平台SSH桌面客户端工具，集成终端、文件管理、系统监控于一体。"),f=F(),x=D("button"),C=oe("svg"),E=oe("path"),k=F(),L=D("span"),L.textContent="访问 GitHub",R=F(),O=D("p"),A=re("© 2026 AHaSSHTools. All rights reserved."),a(t,"class","w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center font-bold text-3xl text-white shadow-lg"),a(y,"class",i="text-xl font-bold "+(r[2]==="dark"?"text-white":"text-gray-900")),a(u,"class",h="text-sm "+(r[2]==="dark"?"text-gray-400":"text-gray-500")),a(w,"class",v="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2"),a(p,"class","text-center space-y-1"),a(c,"class",l="text-sm text-center max-w-xs "+(r[2]==="dark"?"text-gray-400":"text-gray-600")),a(E,"d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"),a(C,"class","w-5 h-5"),a(C,"viewBox","0 0 24 24"),a(C,"fill","currentColor"),a(x,"class",T="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(r[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700")),a(O,"class",j="text-xs "+(r[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2"),a(e,"class","flex flex-col items-center gap-5 py-4")},m(te,Y){V(te,e,Y),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),g(p,n),g(p,u),g(u,b),g(p,m),g(p,w),g(w,S),g(e,s),g(e,c),g(c,o),g(e,f),g(e,x),g(x,C),g(C,E),g(x,k),g(x,L),g(e,R),g(e,O),g(O,A),Z||(ie=se(x,"click",vc),Z=!0)},p(te,Y){Y&4&&i!==(i="text-xl font-bold "+(te[2]==="dark"?"text-white":"text-gray-900"))&&a(y,"class",i),Y&4&&h!==(h="text-sm "+(te[2]==="dark"?"text-gray-400":"text-gray-500"))&&a(u,"class",h),Y&4&&v!==(v="text-xs "+(te[2]==="dark"?"text-gray-500":"text-gray-400")+" mt-2")&&a(w,"class",v),Y&4&&l!==(l="text-sm text-center max-w-xs "+(te[2]==="dark"?"text-gray-400":"text-gray-600"))&&a(c,"class",l),Y&4&&T!==(T="flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium transition-all shadow-sm "+(te[2]==="dark"?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"))&&a(x,"class",T),Y&4&&j!==(j="text-xs "+(te[2]==="dark"?"text-gray-500":"text-gray-400")+" pt-2")&&a(O,"class",j)},d(te){te&&K(e),Z=!1,ie()}}}function mc(r){let e,t,d;function p(_){r[4](_)}let y={onClose:r[1],title:"关于 AHaSSHTools",size:"sm",$$slots:{default:[gc]},$$scope:{ctx:r}};return r[0]!==void 0&&(y.isOpen=r[0]),e=new hr({props:y}),Xe.push(()=>at(e,"isOpen",p)),{c(){je(e.$$.fragment)},m(_,i){Fe(e,_,i),d=!0},p(_,[i]){const n={};i&2&&(n.onClose=_[1]),i&68&&(n.$$scope={dirty:i,ctx:_}),!t&&i&1&&(t=!0,n.isOpen=_[0],ot(()=>t=!1)),e.$set(n)},i(_){d||(Ee(e.$$.fragment,_),d=!0)},o(_){De(e.$$.fragment,_),d=!1},d(_){We(e,_)}}}async function vc(){try{await(await or(()=>Promise.resolve().then(()=>us),void 0)).BrowserOpenURL("https://github.com/a602017206/sshTools")}catch(r){console.error("Failed to open GitHub:",r),window.open("https://github.com/a602017206/sshTools","_blank")}}function bc(r,e,t){let{isOpen:d=!1}=e,{onClose:p=()=>{}}=e,{themeStore:y={subscribe:()=>()=>{}}}=e,_="light";const i=y.subscribe(u=>{t(2,_=u)});Ht(()=>()=>{i()});function n(u){d=u,t(0,d)}return r.$$set=u=>{"isOpen"in u&&t(0,d=u.isOpen),"onClose"in u&&t(1,p=u.onClose),"themeStore"in u&&t(3,y=u.themeStore)},[d,p,_,y,n]}class wc extends $e{constructor(e){super(),Qe(this,e,bc,mc,Ze,{isOpen:0,onClose:1,themeStore:3})}}function yc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),a(e,"class","w-5 h-5"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function Sc(r){let e,t;return{c(){e=oe("svg"),t=oe("path"),a(t,"stroke-linecap","round"),a(t,"stroke-linejoin","round"),a(t,"stroke-width","2"),a(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),a(e,"class","w-5 h-5"),a(e,"fill","none"),a(e,"stroke","currentColor"),a(e,"viewBox","0 0 24 24")},m(d,p){V(d,e,p),g(e,t)},d(d){d&&K(e)}}}function Gi(r){let e,t,d,p,y,_;return{c(){e=D("button"),t=oe("svg"),d=oe("path"),a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M9 5l7 7-7 7"),a(t,"class","w-5 h-5"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),e.disabled=r[2],a(e,"class",p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),a(e,"title","展开资产列表")},m(i,n){V(i,e,n),g(e,t),g(t,d),y||(_=se(e,"click",r[14]),y=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&p!==(p="absolute left-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-r-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&a(e,"class",p)},d(i){i&&K(e),y=!1,_()}}}function Ji(r){let e,t,d,p,y,_,i,n,u;return{c(){e=D("div"),t=D("div"),d=F(),p=D("button"),y=oe("svg"),_=oe("path"),a(t,"class","h-full w-full rounded svelte-m8xeqv"),a(_,"stroke-linecap","round"),a(_,"stroke-linejoin","round"),a(_,"stroke-width","2"),a(_,"d","M15 19l-7-7 7-7"),a(y,"class","w-4 h-4"),a(y,"fill","none"),a(y,"stroke","currentColor"),a(y,"viewBox","0 0 24 24"),p.disabled=r[2],a(p,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),a(p,"title","折叠资产列表"),a(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),a(e,"role","separator"),a(e,"aria-hidden","true"),be(e,"cursor",r[2]?"default":"col-resize"),be(e,"height","100%"),be(e,"padding","0 2px"),be(e,"pointer-events",r[2]?"none":"auto")},m(b,h){V(b,e,h),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),n||(u=[se(p,"click",r[14]),se(e,"mousedown",r[16])],n=!0)},p(b,h){h[0]&4&&(p.disabled=b[2]),h[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&a(p,"class",i),h[0]&4&&be(e,"cursor",b[2]?"default":"col-resize"),h[0]&4&&be(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&K(e),n=!1,Be(u)}}}function Xi(r){let e,t,d,p,y,_,i,n,u;return{c(){e=D("div"),t=D("div"),d=F(),p=D("button"),y=oe("svg"),_=oe("path"),a(t,"class","h-full w-full rounded svelte-m8xeqv"),a(_,"stroke-linecap","round"),a(_,"stroke-linejoin","round"),a(_,"stroke-width","2"),a(_,"d","M9 5l7 7-7 7"),a(y,"class","w-4 h-4"),a(y,"fill","none"),a(y,"stroke","currentColor"),a(y,"viewBox","0 0 24 24"),p.disabled=r[2],a(p,"class",i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600")),a(p,"title","折叠右侧面板"),a(e,"class","resize-handle-horizontal flex-shrink-0 relative group svelte-m8xeqv"),a(e,"role","separator"),a(e,"aria-hidden","true"),be(e,"cursor",r[2]?"default":"col-resize"),be(e,"height","100%"),be(e,"padding","0 2px"),be(e,"pointer-events",r[2]?"none":"auto")},m(b,h){V(b,e,h),g(e,t),g(e,d),g(e,p),g(p,y),g(y,_),n||(u=[se(p,"click",r[15]),se(e,"mousedown",r[17])],n=!0)},p(b,h){h[0]&4&&(p.disabled=b[2]),h[0]&1&&i!==(i="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-7 h-7 rounded transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 group-hover:opacity-100 "+(b[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"))&&a(p,"class",i),h[0]&4&&be(e,"cursor",b[2]?"default":"col-resize"),h[0]&4&&be(e,"pointer-events",b[2]?"none":"auto")},d(b){b&&K(e),n=!1,Be(u)}}}function Yi(r){let e,t,d,p,y,_;return{c(){e=D("button"),t=oe("svg"),d=oe("path"),a(d,"stroke-linecap","round"),a(d,"stroke-linejoin","round"),a(d,"stroke-width","2"),a(d,"d","M15 19l-7-7 7-7"),a(t,"class","w-5 h-5"),a(t,"fill","none"),a(t,"stroke","currentColor"),a(t,"viewBox","0 0 24 24"),e.disabled=r[2],a(e,"class",p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(r[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200")),a(e,"title","展开右侧面板")},m(i,n){V(i,e,n),g(e,t),g(t,d),y||(_=se(e,"click",r[15]),y=!0)},p(i,n){n[0]&4&&(e.disabled=i[2]),n[0]&1&&p!==(p="absolute right-0 top-1/2 -translate-y-1/2 z-50 flex items-center justify-center w-8 h-12 rounded-l-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed opacity-0 hover:opacity-100 "+(i[0]==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700":"bg-white hover:bg-gray-100 text-gray-600 border border-gray-200"))&&a(e,"class",p)},d(i){i&&K(e),y=!1,_()}}}function kc(r){let e,t,d,p,y,_,i,n,u,b,h,m,w,S,v,s,c,o,l,f,x,C,E,k,L,T,R,O,A,j,Z,ie,te,Y,B,P,H,z,U,G,$,ne,W,M,q,I,X,J,N,ae,Q,ce,he,Me,xe,Te,me,we,ke,de,fe,He,Ge;function ze(le,ve){return le[0]==="dark"?Sc:yc}let Ue=ze(r),Pe=Ue(r),Re=r[4]&&Gi(r);j=new sn({props:{onConnect:r[19],onAddClick:r[25],onDelete:r[26],onEdit:r[21]}});let ye=!r[4]&&Ji(r),rt={};B=new Do({props:rt}),r[27](B);let Ie=!r[5]&&Xi(r);$=new al({}),X=new ml({});let Ne=r[5]&&Yi(r);function ft(le){r[28](le)}function it(le){r[29](le)}let Ye={onAdd:r[20],onUpdate:r[22]};r[2]!==void 0&&(Ye.isOpen=r[2]),r[6]!==void 0&&(Ye.editingAsset=r[6]),Q=new pc({props:Ye}),Xe.push(()=>at(Q,"isOpen",ft)),Xe.push(()=>at(Q,"editingAsset",it));function lt(le){r[30](le)}let Je={themeStore:It};r[1]!==void 0&&(Je.isOpen=r[1]),xe=new ic({props:Je}),Xe.push(()=>at(xe,"isOpen",lt));function et(le){r[32](le)}let nt={onClose:r[31],themeStore:It};return r[3]!==void 0&&(nt.isOpen=r[3]),we=new wc({props:nt}),Xe.push(()=>at(we,"isOpen",et)),{c(){e=D("div"),t=D("header"),d=D("div"),p=D("div"),p.textContent="哈",y=F(),_=D("div"),i=D("div"),n=re("啊哈 SSH 连接工具"),b=F(),h=D("div"),m=re("AHa SSH Manager"),S=F(),v=D("div"),s=D("button"),Pe.c(),l=F(),f=D("button"),x=oe("svg"),C=oe("path"),E=F(),k=D("span"),k.textContent="开发工具",T=F(),R=D("div"),Re&&Re.c(),O=F(),A=D("div"),je(j.$$.fragment),ie=F(),ye&&ye.c(),te=F(),Y=D("div"),je(B.$$.fragment),H=F(),Ie&&Ie.c(),z=F(),U=D("div"),G=D("div"),je($.$$.fragment),ne=F(),W=D("div"),M=D("div"),q=F(),I=D("div"),je(X.$$.fragment),N=F(),Ne&&Ne.c(),ae=F(),je(Q.$$.fragment),Me=F(),je(xe.$$.fragment),me=F(),je(we.$$.fragment),a(p,"class","w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center font-bold text-sm text-white shadow-md"),a(i,"class",u="font-semibold text-sm "+(r[0]==="dark"?"text-white":"text-gray-900")),a(h,"class",w="text-xs "+(r[0]==="dark"?"text-gray-400":"text-gray-500")),a(d,"class","flex items-center gap-3"),s.disabled=r[2],a(s,"class",c="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(r[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")),a(s,"title",o=r[0]==="dark"?"切换到浅色模式":"切换到深色模式"),a(C,"stroke-linecap","round"),a(C,"stroke-linejoin","round"),a(C,"stroke-width","2"),a(C,"d","M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"),a(x,"class","w-4 h-4"),a(x,"fill","none"),a(x,"stroke","currentColor"),a(x,"viewBox","0 0 24 24"),a(k,"class","text-sm"),f.disabled=r[2],a(f,"class","flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),a(v,"class","ml-auto flex items-center gap-3"),a(t,"class",L="h-14 flex-shrink-0 "+(r[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"),be(t,"pointer-events",r[2]?"none":"auto"),a(A,"class",Z="flex-shrink-0 transition-all duration-200 "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"),be(A,"width",(r[4]?"0":r[10])+"px"),be(A,"min-width",(r[4]?"0":r[10])+"px"),rr(A,"collapsed",r[4]),a(Y,"class",P="flex-1 min-w-0 min-h-0 flex flex-col "+(r[0]==="dark"?"bg-gray-900":"bg-gray-50")),a(G,"class","overflow-hidden"),be(G,"height",r[8]+"%"),be(G,"min-height","0"),a(M,"class","w-full h-full rounded svelte-m8xeqv"),a(W,"class","resize-handle-vertical flex-shrink-0 relative svelte-m8xeqv"),a(W,"role","separator"),a(W,"aria-hidden","true"),be(W,"cursor",r[2]?"default":"row-resize"),be(W,"width","100%"),be(W,"padding","2px 0"),be(W,"pointer-events",r[2]?"none":"auto"),a(I,"class","overflow-hidden"),be(I,"height",100-r[8]+"%"),be(I,"min-height","0"),a(U,"data-right-panel","true"),a(U,"class",J="flex-shrink-0 flex flex-col overflow-hidden "+(r[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"),be(U,"width",(r[5]?"0":r[9])+"px"),be(U,"min-width",r[5]?"0":"300px"),be(U,"max-width","600px"),rr(U,"collapsed",r[5]),a(R,"class","flex-1 flex overflow-hidden min-h-0 relative svelte-m8xeqv"),a(e,"class",de="h-screen w-full flex flex-col "+r[11]+" "+(r[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv")},m(le,ve){V(le,e,ve),g(e,t),g(t,d),g(d,p),g(d,y),g(d,_),g(_,i),g(i,n),g(_,b),g(_,h),g(h,m),g(t,S),g(t,v),g(v,s),Pe.m(s,null),g(v,l),g(v,f),g(f,x),g(x,C),g(f,E),g(f,k),g(e,T),g(e,R),Re&&Re.m(R,null),g(R,O),g(R,A),Fe(j,A,null),g(R,ie),ye&&ye.m(R,null),g(R,te),g(R,Y),Fe(B,Y,null),g(R,H),Ie&&Ie.m(R,null),g(R,z),g(R,U),g(U,G),Fe($,G,null),g(U,ne),g(U,W),g(W,M),g(U,q),g(U,I),Fe(X,I,null),g(R,N),Ne&&Ne.m(R,null),g(e,ae),Fe(Q,e,null),g(e,Me),Fe(xe,e,null),g(e,me),Fe(we,e,null),fe=!0,He||(Ge=[se(s,"click",r[12]),se(f,"click",r[13]),se(W,"mousedown",r[18])],He=!0)},p(le,ve){(!fe||ve[0]&1&&u!==(u="font-semibold text-sm "+(le[0]==="dark"?"text-white":"text-gray-900")))&&a(i,"class",u),(!fe||ve[0]&1&&w!==(w="text-xs "+(le[0]==="dark"?"text-gray-400":"text-gray-500")))&&a(h,"class",w),Ue!==(Ue=ze(le))&&(Pe.d(1),Pe=Ue(le),Pe&&(Pe.c(),Pe.m(s,null))),(!fe||ve[0]&4)&&(s.disabled=le[2]),(!fe||ve[0]&1&&c!==(c="flex items-center justify-center w-9 h-9 rounded-lg transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed "+(le[0]==="dark"?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-600")))&&a(s,"class",c),(!fe||ve[0]&1&&o!==(o=le[0]==="dark"?"切换到浅色模式":"切换到深色模式"))&&a(s,"title",o),(!fe||ve[0]&4)&&(f.disabled=le[2]),(!fe||ve[0]&1&&L!==(L="h-14 flex-shrink-0 "+(le[0]==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" border-b flex items-center px-6 shadow-sm"))&&a(t,"class",L),(!fe||ve[0]&4)&&be(t,"pointer-events",le[2]?"none":"auto"),le[4]?Re?Re.p(le,ve):(Re=Gi(le),Re.c(),Re.m(R,O)):Re&&(Re.d(1),Re=null);const Ke={};ve[0]&68&&(Ke.onAddClick=le[25]),j.$set(Ke),(!fe||ve[0]&1&&Z!==(Z="flex-shrink-0 transition-all duration-200 "+(le[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-r overflow-hidden"))&&a(A,"class",Z),(!fe||ve[0]&1040)&&be(A,"width",(le[4]?"0":le[10])+"px"),(!fe||ve[0]&1040)&&be(A,"min-width",(le[4]?"0":le[10])+"px"),(!fe||ve[0]&17)&&rr(A,"collapsed",le[4]),le[4]?ye&&(ye.d(1),ye=null):ye?ye.p(le,ve):(ye=Ji(le),ye.c(),ye.m(R,te));const ee={};B.$set(ee),(!fe||ve[0]&1&&P!==(P="flex-1 min-w-0 min-h-0 flex flex-col "+(le[0]==="dark"?"bg-gray-900":"bg-gray-50")))&&a(Y,"class",P),le[5]?Ie&&(Ie.d(1),Ie=null):Ie?Ie.p(le,ve):(Ie=Xi(le),Ie.c(),Ie.m(R,z)),(!fe||ve[0]&256)&&be(G,"height",le[8]+"%"),(!fe||ve[0]&4)&&be(W,"cursor",le[2]?"default":"row-resize"),(!fe||ve[0]&4)&&be(W,"pointer-events",le[2]?"none":"auto"),(!fe||ve[0]&256)&&be(I,"height",100-le[8]+"%"),(!fe||ve[0]&1&&J!==(J="flex-shrink-0 flex flex-col overflow-hidden "+(le[0]==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white")+" border-l shadow-sm"))&&a(U,"class",J),(!fe||ve[0]&544)&&be(U,"width",(le[5]?"0":le[9])+"px"),(!fe||ve[0]&32)&&be(U,"min-width",le[5]?"0":"300px"),(!fe||ve[0]&33)&&rr(U,"collapsed",le[5]),le[5]?Ne?Ne.p(le,ve):(Ne=Yi(le),Ne.c(),Ne.m(R,null)):Ne&&(Ne.d(1),Ne=null);const _e={};!ce&&ve[0]&4&&(ce=!0,_e.isOpen=le[2],ot(()=>ce=!1)),!he&&ve[0]&64&&(he=!0,_e.editingAsset=le[6],ot(()=>he=!1)),Q.$set(_e);const Ce={};!Te&&ve[0]&2&&(Te=!0,Ce.isOpen=le[1],ot(()=>Te=!1)),xe.$set(Ce);const Oe={};ve[0]&8&&(Oe.onClose=le[31]),!ke&&ve[0]&8&&(ke=!0,Oe.isOpen=le[3],ot(()=>ke=!1)),we.$set(Oe),(!fe||ve[0]&2049&&de!==(de="h-screen w-full flex flex-col "+le[11]+" "+(le[0]==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900")+" svelte-m8xeqv"))&&a(e,"class",de)},i(le){fe||(Ee(j.$$.fragment,le),Ee(B.$$.fragment,le),Ee($.$$.fragment,le),Ee(X.$$.fragment,le),Ee(Q.$$.fragment,le),Ee(xe.$$.fragment,le),Ee(we.$$.fragment,le),fe=!0)},o(le){De(j.$$.fragment,le),De(B.$$.fragment,le),De($.$$.fragment,le),De(X.$$.fragment,le),De(Q.$$.fragment,le),De(xe.$$.fragment,le),De(we.$$.fragment,le),fe=!1},d(le){le&&K(e),Pe.d(),Re&&Re.d(),We(j),ye&&ye.d(),r[27](null),We(B),Ie&&Ie.d(),We($),We(X),Ne&&Ne.d(),We(Q),We(xe),We(we),He=!1,Be(Ge)}}}function gr(){const r=document.getElementById("app");r&&(r.style.height="100vh",r.style.width="100vw")}function Cc(r,e,t){let d,p,y,_,i,n,u;vt(r,It,N=>t(0,i=N)),vt(r,ut,N=>t(23,n=N)),vt(r,mt,N=>t(24,u=N));let b=!1,h=!1,m=!1,w=!1,S=!1,v=null,s,c=!1,o=!1,l=!1;function f(){pr(i==="light"?"dark":"light")}function x(){h||t(1,b=!b)}function C(){h||t(4,w=!w)}function E(){h||t(5,S=!S)}function k(N){N.preventDefault(),!(w||h)&&(c=!0,document.addEventListener("mousemove",L),document.addEventListener("mouseup",T))}function L(N){if(!c)return;const ae=Math.max(200,Math.min(500,N.clientX));Ys(ae)}function T(){c=!1,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",T)}function R(N){N.preventDefault(),!h&&(o=!0,document.addEventListener("mousemove",O),document.addEventListener("mouseup",A))}function O(N){if(!o)return;const ae=window.innerWidth,Q=Math.max(300,Math.min(600,ae-N.clientX));Zs(Q)}function A(){o=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",A)}function j(N){if(N.preventDefault(),h)return;l=!0;const ae=document.querySelector("[data-right-panel]");if(ae){const Q=ae.getBoundingClientRect();Z=N.clientY,ie=_,te=Q.height}document.addEventListener("mousemove",Y),document.addEventListener("mouseup",B)}let Z=0,ie=50,te=0;function Y(N){if(!l)return;const Q=(N.clientY-Z)/te*100,ce=Math.max(20,Math.min(80,ie+Q));Qs(ce)}function B(){l=!1,document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",B)}function P(N){s&&typeof s.handleConnect=="function"?s.handleConnect(N):(console.error("TerminalPanel not available"),alert("终端面板未初始化"))}async function H(N){var ae;if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{await window.wailsBindings.AddConnection(N);const Q={id:N.id,name:N.name,host:N.host,port:N.port,username:N.user,group:((ae=N.tags)==null?void 0:ae[0])||"默认分组",status:"online",type:N.type||"ssh",auth_type:N.auth_type,key_path:N.key_path,tags:N.tags||[]};yt.update(ce=>[...ce,Q])}catch(Q){throw console.error("Failed to add asset:",Q),Q}}function z(N){t(6,v=N),t(2,h=!0)}async function U(N){if(!window.wailsBindings){console.error("Wails bindings not loaded");return}try{yt.update(ae=>ae.map(Q=>{var ce;return Q.id===N.id?{...Q,id:N.id,name:N.name,host:N.host,port:N.port,username:N.user,group:((ce=N.tags)==null?void 0:ce[0])||"默认分组",type:N.type||"ssh",auth_type:N.auth_type,key_path:N.key_path,tags:N.tags||[]}:Q}))}catch(ae){throw console.error("Failed to update asset:",ae),ae}}async function G(){if(!window.wailsBindings){console.warn("Wails bindings not loaded yet");return}try{const N=await window.wailsBindings.GetConnections();console.log("Loaded connections from backend:",N);const ae=N.map(Q=>{var ce;return{id:Q.id,name:Q.name,host:Q.host,port:Q.port,username:Q.user,group:((ce=Q.tags)==null?void 0:ce[0])||"默认分组",status:"online",type:"ssh",auth_type:Q.auth_type,key_path:Q.key_path,tags:Q.tags||[]}});yt.set(ae)}catch(N){console.error("Failed to load connections:",N)}}Ht(async()=>{const N=localStorage.getItem("ssh-tools-theme");N?pr(N):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&pr("dark");let ae=null;try{const Q=await or(()=>Promise.resolve().then(()=>Ma),void 0);window.wailsBindings=Q,window.dispatchEvent(new CustomEvent("wails-bindings-loaded",{detail:Object.keys(Q.default||Q).join(", ")})),await G(),ae=(await or(()=>Promise.resolve().then(()=>us),void 0)).EventsOn("app:show-about",()=>{t(3,m=!0)})}catch(Q){console.warn("Wails bindings not available yet:",Q.message)}return gr(),window.addEventListener("resize",gr),()=>{window.removeEventListener("resize",gr),ae&&ae()}});const $=()=>{t(6,v=null),t(2,h=!0)},ne=async N=>{if(!window.wailsBindings){yt.update(ae=>ae.filter(Q=>Q.id!==N.id));return}if(confirm(`确定要删除连接 "${N.name}" 吗？`))try{await window.wailsBindings.RemoveConnection(N.id),yt.update(ae=>ae.filter(Q=>Q.id!==N.id))}catch(ae){console.error("Failed to delete asset:",ae),alert("删除连接失败: "+ae)}};function W(N){Xe[N?"unshift":"push"](()=>{s=N,t(7,s)})}function M(N){h=N,t(2,h)}function q(N){v=N,t(6,v)}function I(N){b=N,t(1,b)}const X=()=>t(3,m=!1);function J(N){m=N,t(3,m)}return r.$$.update=()=>{r.$$.dirty[0]&16777216&&u&&Array.from(u.values()),r.$$.dirty[0]&1&&t(11,d=i==="dark"?"dark":""),r.$$.dirty[0]&8388608&&t(10,p=n.sidebarWidth),r.$$.dirty[0]&8388608&&t(9,y=n.rightPanelWidth),r.$$.dirty[0]&8388608&&t(8,_=n.fileManagerHeight)},[i,b,h,m,w,S,v,s,_,y,p,d,f,x,C,E,k,R,j,P,H,z,U,n,u,$,ne,W,M,q,I,X,J]}class xc extends $e{constructor(e){super(),Qe(this,e,Cc,kc,Ze,{},null,[-1,-1])}}new xc({target:document.getElementById("app")});
